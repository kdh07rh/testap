"use strict";(self.webpackChunkjennifer5_frontend=self.webpackChunkjennifer5_frontend||[]).push([[14415],{14415:(zt,kt,yt)=>{yt.d(kt,{A:()=>vt});var ft=yt(34451),dt=yt(56923);ft.A.use(dt.A);const vt={name:"chart.brush.fullgauge",extend:"chart.brush.donut",component:function(){const nt=ft.A.include("util.math"),Y=function(){var pt,wt,k,ht,K,Q,tt;this.createText=function(V,W,G,I,O){var z=this.svg.group().translate(G,I),U=this.chart.theme("gaugeFontSize");return z.append(this.chart.text({"text-anchor":"middle","font-size":U,"font-weight":this.chart.theme("gaugeFontWeight"),fill:this.color(W),y:U/3},this.format(V,W)).scale(O)),z},this.createTitle=function(V,W,G,I,O,z,U){var N=this.svg.group().translate(G+O,I+z),J=O==0?"middle":O<0?"end":"start",q=this.chart.theme("gaugeTitleFontSize");return N.append(this.chart.text({"text-anchor":J,"font-size":q,"font-weight":this.chart.theme("gaugeTitleFontWeight"),fill:this.chart.theme("gaugeTitleFontColor"),y:q/3},V).scale(U)),N},this.drawUnit=function(V,W){var G=this.axis.c(V),I=this.getValue(W,"value",0),O=this.getValue(W,"title"),z=this.getValue(W,"max",100),U=this.getValue(W,"min",0),N=this.brush.startAngle,J=this.brush.endAngle;J>=360&&(J=359.99999);var q=(I-U)/(z-U),H=J*q;H>J&&(H=J);var j=G.width,it=G.height,Z=G.x,ut=G.y;wt=Math.min(j,it)/2,k=j/2+Z,ht=it/2+ut,K=wt-this.brush.size,Q=K-this.brush.size,tt=nt.scaleValue(wt,40,400,1,1.5);var at=this.brush.symbol=="butt"?this.chart.theme("gaugePaddingAngle"):0;return pt.append(this.drawDonut(k,ht,Q,K,N+H+at,J-H-at*2,{stroke:this.chart.theme("gaugeBackgroundColor"),fill:"transparent"})),pt.append(this.drawDonut(k,ht,Q,K,N,H,{stroke:this.color(V),"stroke-linecap":this.brush.symbol,fill:"transparent"})),this.brush.showText&&pt.append(this.createText(I,V,k,ht-K*.1,tt)),O!=""&&pt.append(this.createTitle(O,V,k,ht-K*.1,this.brush.titleX,this.brush.titleY,tt)),pt},this.draw=function(){return pt=this.chart.svg.group(),this.eachData(function(V,W){this.drawUnit(W,V)}),pt}};return Y.setup=function(){return{symbol:"butt",size:60,startAngle:0,endAngle:360,showText:!0,titleX:0,titleY:0,format:null}},Y}}},34451:(zt,kt,yt)=>{yt.d(kt,{A:()=>dt});var ft=yt(91225);const dt=ft.A},56923:(zt,kt,yt)=>{yt.d(kt,{A:()=>vt});var ft=yt(34451),dt=yt(88981);ft.A.use(dt.A);const vt={name:"chart.brush.donut",extend:"chart.brush.pie",component:function(){var nt=ft.A.include("util.base"),Y=ft.A.include("util.math"),pt=ft.A.include("util.color"),wt=function(){var k=this,ht={};this.drawDonut=function(K,Q,tt,V,W,G,I){I["stroke-width"]=V-tt,G>=360&&(G=359.9999);var O=this.chart.svg.group(),z=this.chart.svg.path(I),U=Math.abs(V-tt),N=Y.rotate(0,-V,Y.radian(W)),J=N.x,q=N.y;return z.MoveTo(J,q),N=Y.rotate(J,q,Y.radian(G)),O.translate(K,Q),z.Arc(V,V,0,G>180?1:0,1,N.x,N.y),z.css({"pointer-events":"stroke"}),O.append(z),O.order=1,O},this.drawDonut3d=function(K,Q,tt,V,W,G,I){var O=this.chart.svg.group(),z=this.chart.svg.path(I),U=Math.abs(V-tt);V+=U/2,tt=V-U;var N=Y.rotate(0,-V,Y.radian(W)),J=N.x,q=N.y,H=Y.rotate(0,-tt,Y.radian(W)),j=H.x,it=H.y;z.MoveTo(J,q),N=Y.rotate(J,q,Y.radian(G)),H=Y.rotate(j,it,Y.radian(G)),O.translate(K,Q),z.Arc(V,V,0,G>180?1:0,1,N.x,N.y);var Z=N.y+10,ut=N.x+5,at=H.y+10,xt=H.x+5,lt=J+5,Ct=q+10,Mt=j+5,At=it+10;z.LineTo(ut,Z),z.Arc(V,V,0,G>180?1:0,0,lt,Ct),z.ClosePath(),O.append(z);var Tt=this.chart.svg.path(I);return Tt.MoveTo(j,it),Tt.Arc(tt,tt,0,G>180?1:0,1,H.x,H.y),Tt.LineTo(xt,at),Tt.Arc(tt,tt,0,G>180?1:0,0,Mt,At),Tt.ClosePath(),O.append(Tt),O.order=1,O},this.drawDonut3dBlock=function(K,Q,tt,V,W,G,I){var O=this.chart.svg.group(),z=this.chart.svg.path(I),U=Math.abs(V-tt);V+=U/2,tt=V-U;var N=Y.rotate(0,-V,Y.radian(W)),J=N.x,q=N.y,H=Y.rotate(0,-tt,Y.radian(W)),j=H.x,it=H.y;z.MoveTo(J,q),N=Y.rotate(J,q,Y.radian(G)),H=Y.rotate(j,it,Y.radian(G)),O.translate(K,Q);var Z=N.y+10,ut=N.x+5,at=H.y+10,xt=H.x+5,lt=this.chart.svg.path(I);return lt.MoveTo(N.x,N.y).LineTo(ut,Z).LineTo(xt,at).LineTo(H.x,H.y).ClosePath(),O.append(lt),O.order=1,O},this.drawUnit=function(K,Q,tt){for(var V=this.getProperty(K),W=V.centerX,G=V.centerY,I=V.innerRadius,O=V.outerRadius,z=this.brush.target,U=this.brush.active,N=360,J=0,q=0,H=0,j=0;j<z.length;j++)q+=Q[z[j]];if(this.brush["3d"]){for(var j=0;j<z.length;j++){var it=Q[z[j]],Z=N*(it/q),ut=this.drawDonut3dBlock(W,G,I,O,J,Z,{fill:pt.darken(this.color(j),.5)},j==z.length-1);tt.append(ut),J+=Z}J=0;for(var j=0;j<z.length;j++){var it=Q[z[j]],Z=N*(it/q),ut=this.drawDonut3d(W,G,I,O,J,Z,{fill:pt.darken(this.color(j),.5)},j==z.length-1);tt.append(ut),J+=Z}}J=0;for(var j=0;j<z.length;j++)if(Q[z[j]]!=0){var it=Q[z[j]],Z=N*(it/q),at=J+Z/2-90,xt=Math.abs(J-Z)==360,lt=this.brush.showText=="inside"?this.brush.size+I+O:O,Ct=this.drawDonut(W,G,I,O,J,Z,{stroke:this.color(j),fill:"transparent"}),Mt=this.drawText(W,G,at,lt,this.getFormatText(z[j],it));ht[at]={active:!1,pie:Ct,text:Mt,centerX:W,centerY:G,centerAngle:at,outerRadius:lt},xt||(U==z[j]||nt.inArray(z[j],U)!=-1?ht[at].active=!0:ht[at].active=!1,this.brush.showText=="inside"&&this.setActiveTextEvent(ht),this.setActiveEvent(ht,!1),this.brush.activeEvent!=null&&function(Pt,Lt,_t,Et,Dt,Ft){Pt.on(k.brush.activeEvent,function(Gt){ht[Dt].active?ht[Dt].active=!1:ht[Dt].active=!0,k.brush.showText=="inside"&&k.setActiveTextEvent(ht),k.setActiveEvent(ht,!1)}),Pt.attr({cursor:"pointer"})}(Ct,Mt.get(0),W,G,at,lt)),this.addEvent(Ct,K,j),tt.append(Ct),tt.append(Mt),J+=Z,H+=it}this.brush.showValue&&this.drawTotalValue(tt,W,G,H)},this.drawNoData=function(K){var Q=this.getProperty(0);K.append(this.drawDonut(Q.centerX,Q.centerY,Q.innerRadius,Q.outerRadius,0,360,{stroke:this.chart.theme("pieNoDataBackgroundColor"),fill:"transparent"})),this.brush.showValue&&this.drawTotalValue(K,Q.centerX,Q.centerY,0)},this.drawTotalValue=function(K,Q,tt,V){var W=this.chart.theme("pieTotalValueFontSize"),G=this.chart.text({"font-size":W,"font-weight":this.chart.theme("pieTotalValueFontWeight"),fill:this.chart.theme("pieTotalValueFontColor"),"text-anchor":"middle",dy:W/3},this.format(V));G.translate(Q,tt),K.append(G)},this.getProperty=function(K){var Q=this.axis.c(K),tt=Q.width,V=Q.height,W=Q.x,G=Q.y,I=tt;V<I&&(I=V),this.brush.size>=I/2&&(this.brush.size=I/4);var O=I/2-this.brush.size/2;return{centerX:tt/2+W,centerY:V/2+G,outerRadius:O,innerRadius:O-this.brush.size}}};return wt.setup=function(){return{size:50,showValue:!1}},wt}}},88981:(zt,kt,yt)=>{yt.d(kt,{A:()=>dt});var ft=yt(34451);const dt={name:"chart.brush.pie",extend:"chart.brush.core",component:function(){var vt=ft.A.include("util.base"),nt=ft.A.include("util.math"),Y=ft.A.include("util.color"),pt=function(){var wt=this,k=3,ht=0,K=0,Q=1,tt,V={};this.setActiveEvent=function(W,G){var I=!0,O=this.chart.theme("pieDisableBackgroundOpacity")||.5;for(var z in W){var U=W[z];if(U.active){I=!1;break}}for(var z in W){var U=W[z];if(U.active){let q=this.chart.theme("pieActiveDistance"),H=Math.cos(nt.radian(U.centerAngle))*q,j=Math.sin(nt.radian(U.centerAngle))*q;U.pie.translate(U.centerX+H,U.centerY+j)}else U.pie.translate(U.centerX,U.centerY);G&&(U.pie.children.length>0&&U.pie.get(0).attr({opacity:I||U.active?1:O}),U.text.children.length>0&&U.text.get(0).attr({opacity:I||U.active?1:O}))}},this.setActiveTextEvent=function(W){for(var G in W){var I=W[G],O=I.active?this.chart.theme("pieActiveDistance"):0,z=I.centerX+Math.cos(nt.radian(I.centerAngle))*((I.outerRadius+O)/2),U=I.centerY+Math.sin(nt.radian(I.centerAngle))*((I.outerRadius+O)/2);I.text.children.length>0&&I.text.get(0).translate(z,U)}},this.getFormatText=function(W,G,I){var O=W;return typeof this.brush.format=="function"?this.format(O,G,I):G?O+": "+this.format(G):O},this.drawPie=function(W,G,I,O,z,U){var N=this.chart.svg.group();if(z==360){var J=this.chart.svg.circle({cx:W,cy:G,r:I,fill:U,stroke:this.chart.theme("pieBorderColor")||U,"stroke-width":this.chart.theme("pieBorderWidth")});return N.append(J),N}var q=this.chart.svg.path({fill:U,stroke:this.chart.theme("pieBorderColor")||U,"stroke-width":this.chart.theme("pieBorderWidth")}),H=nt.rotate(0,-I,nt.radian(O)),j=H.x,it=H.y;return q.MoveTo(j,it),H=nt.rotate(j,it,nt.radian(z)),N.translate(W,G),q.Arc(I,I,0,z>180?1:0,1,H.x,H.y).LineTo(0,0).ClosePath(),N.append(q),N.order=1,N},this.drawPie3d=function(W,G,I,O,z,U){var N=this.chart.svg.group(),J=this.chart.svg.path({fill:U,stroke:this.chart.theme("pieBorderColor")||U,"stroke-width":this.chart.theme("pieBorderWidth")}),q=nt.rotate(0,-I,nt.radian(O)),H=q.x,j=q.y;J.MoveTo(H,j),q=nt.rotate(H,j,nt.radian(z)),N.translate(W,G),J.Arc(I,I,0,z>180?1:0,1,q.x,q.y);var it=q.y+10,Z=q.x+5,ut=H+5,at=j+10;return J.LineTo(Z,it),J.Arc(I,I,0,z>180?1:0,0,ut,at),J.ClosePath(),N.append(J),N.order=1,N},this.drawText=function(W,G,I,O,z){var U=this.svg.group({visibility:this.brush.showText?"visible":"hidden"}),N=I+90>180;if(z===""||!z)return U;if(this.brush.showText=="inside"){var J=W+Math.cos(nt.radian(I))*(O/2),q=G+Math.sin(nt.radian(I))*(O/2),z=this.chart.text({"font-size":this.chart.theme("pieInnerFontSize"),fill:this.chart.theme("pieInnerFontColor"),"text-anchor":"middle",y:k},z);z.translate(J,q),U.append(z),U.order=2}else{var H=this.chart.theme("pieOuterLineRate"),j=Math.abs(I-ht);if(j<2){K==0&&(K=H);var it=H*.05;K-=it,Q-=.25}else K=H,Q=1;if(K>1.2){var Z=this.chart.theme("pieOuterLineSize"),ut=O*K,J=W+Math.cos(nt.radian(I))*O,q=G+Math.sin(nt.radian(I))*O,at=W+Math.cos(nt.radian(I))*ut,xt=G+Math.sin(nt.radian(I))*ut,lt=N?at-Z:at+Z,Ct=this.svg.path({fill:"transparent",stroke:this.chart.theme("pieOuterLineColor"),"stroke-width":this.chart.theme("pieOuterLineWidth"),"stroke-opacity":Q});Ct.MoveTo(J,q).LineTo(at,xt).LineTo(lt,xt);var z=this.chart.text({"font-size":this.chart.theme("pieOuterFontSize"),fill:this.chart.theme("pieOuterFontColor"),"fill-opacity":Q,"text-anchor":N?"end":"start",y:k},z);z.translate(lt+(N?-3:3),xt),U.append(z),U.append(Ct),U.order=0,ht=I}}return U},this.drawUnit=function(W,G,I){for(var O=this.getProperty(W),z=O.centerX,U=O.centerY,N=O.outerRadius,J=this.brush.target,q=this.brush.active,H=360,j=0,it=0,Z=0;Z<J.length;Z++)it+=G[J[Z]];for(var Z=0;Z<J.length;Z++)if(G[J[Z]]!=0){var ut=G[J[Z]],at=H*(ut/it);if(this.brush["3d"]){var xt=this.drawPie3d(z,U,N,j,at,Y.darken(this.color(Z),.5));I.append(xt)}j+=at}j=0;for(var Z=0;Z<J.length;Z++){var ut=G[J[Z]],at=H*(ut/it),lt=j+at/2-90,Ct=Math.abs(j-at)==360,Mt=this.drawPie(z,U,N,j,at,this.color(Z)),At=this.drawText(z,U,lt,N,this.getFormatText(J[Z],ut,it));V[lt]={active:!1,pie:Mt,text:At,centerX:z,centerY:U,centerAngle:lt,outerRadius:N},Ct||(q==J[Z]||vt.inArray(J[Z],q)!=-1?V[lt].active=!0:V[lt].active=!1,this.brush.showText=="inside"&&this.setActiveTextEvent(V),this.setActiveEvent(V,!0),this.brush.activeEvent!=null&&function(Lt,_t,Et,Dt,Ft,Gt){Lt.on(wt.brush.activeEvent,function(Xt){V[Ft].active?V[Ft].active=!1:V[Ft].active=!0,wt.brush.showText=="inside"&&wt.setActiveTextEvent(V),wt.setActiveEvent(V,!0)}),Lt.attr({cursor:"pointer"})}(Mt,At.get(0),z,U,lt,N)),wt.addEvent(Mt,W,Z),I.append(Mt),I.append(At),j+=at}},this.drawNoData=function(W){var G=this.getProperty(0);W.append(this.drawPie(G.centerX,G.centerY,G.outerRadius,0,360,this.chart.theme("pieNoDataBackgroundColor")))},this.drawBefore=function(){tt=this.chart.svg.group()},this.draw=function(){return this.listData().length==0?this.drawNoData(tt):this.eachData(function(W,G){this.drawUnit(G,W,tt)}),tt},this.getProperty=function(W){var G=this.axis.c(W),I=G.width,O=G.height,z=G.x,U=G.y,N=I;return O<N&&(N=O),{centerX:I/2+z,centerY:O/2+U,outerRadius:N/2}}};return pt.setup=function(){return{clip:!1,showText:null,format:null,"3d":!1,active:null,activeEvent:null}},pt}}},91225:(zt,kt,yt)=>{yt.d(kt,{A:()=>we});var ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},dt={},vt={},nt={},Y=dt["util.base"]={browser:{webkit:"WebkitAppearance"in document.documentElement.style,mozilla:typeof window.mozInnerScreenX<"u",msie:window.navigator.userAgent.indexOf("Trident")!=-1},isTouch:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent),inherit:function(u,d){!this.typeCheck("function",u)||!this.typeCheck("function",d)||(u.parent=d,u.prototype=new d,u.prototype.constructor=u,u.prototype.parent=u.prototype,u.prototype.super=function(l,h){return this.constructor.prototype[l].apply(this,h)})},extend:function(u,d,l){if(this.typeCheck(["object","function"],u)||(u={}),!this.typeCheck(["object","function"],d))return u;for(var h in d)l===!0?a(u[h])?this.extend(u[h],d[h],l):this.typeCheck("undefined",u[h])&&(u[h]=d[h]):a(u[h])?this.extend(u[h],d[h],l):u[h]=d[h];function a(e){return Y.typeCheck("object",e)}return u},pxToInt:function(u){return this.typeCheck("string",u)&&u.indexOf("px")!=-1?parseInt(u.split("px").join("")):u},clone:function(u){var d=this.typeCheck("array",u)?[]:{};for(var l in u)this.typeCheck("object",u[l])?d[l]=this.clone(u[l]):d[l]=u[l];return d},deepClone:function(u,d){var l=null;if(d=d||{},this.typeCheck("array",u)){l=new Array(u.length);for(var h=0,a=u.length;h<a;h++)l[h]=this.deepClone(u[h],d)}else if(this.typeCheck("date",u))l=u;else if(this.typeCheck("object",u)){l={};for(var e in u)d[e]?l[e]=u[e]:l[e]=this.deepClone(u[e],d)}else l=u;return l},runtime:function(u,d){var l=new Date().getTime();d();var h=new Date().getTime()},resize:function(u,d){var l=function(){var h=0;return function(){clearTimeout(h),h=setTimeout(u,d)}}();window.addEventListener?window.addEventListener("resize",l):object.attachEvent?window.attachEvent("onresize",l):window.onresize=l},typeCheck:function(u,d){function l(e,t){return typeof e!="string"?!1:e=="string"?typeof t=="string":e=="integer"?typeof t=="number"&&t%1==0:e=="float"?typeof t=="number"&&t%1!=0:e=="number"?typeof t=="number":e=="boolean"?typeof t=="boolean":e=="undefined"?typeof t>"u":e=="null"?t===null:e=="array"?t instanceof Array:e=="date"?t instanceof Date:e=="function"?typeof t=="function":e=="object"?(typeof t>"u"?"undefined":ft(t))=="object"&&t!==null&&!(t instanceof Array)&&!(t instanceof Date)&&!(t instanceof RegExp):!1}if((typeof u>"u"?"undefined":ft(u))=="object"&&u.length){for(var h=u,a=0;a<h.length;a++)if(l(h[a],d))return!0;return!1}else return l(u,d)},typeCheckObj:function(u,d){if((typeof u>"u"?"undefined":ft(u))=="object"){var l=this;for(var h in u){var a=u[h];typeof a=="function"&&function(e,t){u[e]=function(){for(var r=arguments,n=d[e],s=0;s<r.length;s++)if(!l.typeCheck(n[s],r[s]))throw new Error("JUI_CRITICAL_ERR: the "+s+"th parameter is not a "+n[s]+" ("+name+")");return t.apply(this,r)}}(h,a)}}},dateFormat:function(u,d,l){var h=["\0","January","February","March","April","May","June","July","August","September","October","November","December"],a=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e=["","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t=["","Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function r(M,B){var p=M+"";for(B=B||2;p.length<B;)p="0"+p;return p}var n=l?u.getUTCFullYear():u.getFullYear();d=d.replace(/(^|[^\\])yyyy+/g,"$1"+n),d=d.replace(/(^|[^\\])yy/g,"$1"+n.toString().substr(2,2)),d=d.replace(/(^|[^\\])y/g,"$1"+n);var s=(l?u.getUTCMonth():u.getMonth())+1;d=d.replace(/(^|[^\\])MMMM+/g,"$1"+h[0]),d=d.replace(/(^|[^\\])MMM/g,"$1"+a[0]),d=d.replace(/(^|[^\\])MM/g,"$1"+r(s)),d=d.replace(/(^|[^\\])M/g,"$1"+s);var i=l?u.getUTCDate():u.getDate();d=d.replace(/(^|[^\\])dddd+/g,"$1"+e[0]),d=d.replace(/(^|[^\\])ddd/g,"$1"+t[0]),d=d.replace(/(^|[^\\])dd/g,"$1"+r(i)),d=d.replace(/(^|[^\\])d/g,"$1"+i);var o=l?u.getUTCHours():u.getHours();d=d.replace(/(^|[^\\])HH+/g,"$1"+r(o)),d=d.replace(/(^|[^\\])H/g,"$1"+o);var f=o>12?o-12:o==0?12:o;d=d.replace(/(^|[^\\])hh+/g,"$1"+r(f)),d=d.replace(/(^|[^\\])h/g,"$1"+f);var c=l?u.getUTCMinutes():u.getMinutes();d=d.replace(/(^|[^\\])mm+/g,"$1"+r(c)),d=d.replace(/(^|[^\\])m/g,"$1"+c);var g=l?u.getUTCSeconds():u.getSeconds();d=d.replace(/(^|[^\\])ss+/g,"$1"+r(g)),d=d.replace(/(^|[^\\])s/g,"$1"+g);var v=l?u.getUTCMilliseconds():u.getMilliseconds();d=d.replace(/(^|[^\\])fff+/g,"$1"+r(v,3)),v=Math.round(v/10),d=d.replace(/(^|[^\\])ff/g,"$1"+r(v)),v=Math.round(v/10),d=d.replace(/(^|[^\\])f/g,"$1"+v);var x=o<12?"AM":"PM";d=d.replace(/(^|[^\\])TT+/g,"$1"+x),d=d.replace(/(^|[^\\])T/g,"$1"+x.charAt(0));var y=x.toLowerCase();d=d.replace(/(^|[^\\])tt+/g,"$1"+y),d=d.replace(/(^|[^\\])t/g,"$1"+y.charAt(0));var A=-u.getTimezoneOffset(),F=l||!A?"Z":A>0?"+":"-";if(!l){A=Math.abs(A);var w=Math.floor(A/60),m=A%60;F+=r(w)+":"+r(m)}d=d.replace(/(^|[^\\])K/g,"$1"+F);var T=(l?u.getUTCDay():u.getDay())+1;return d=d.replace(new RegExp(e[0],"g"),e[T]),d=d.replace(new RegExp(t[0],"g"),t[T]),d=d.replace(new RegExp(h[0],"g"),h[s]),d=d.replace(new RegExp(a[0],"g"),a[s]),d=d.replace(/\\(.)/g,"$1"),d},createId:function(u){return[u||"id",+new Date,Math.round(Math.random()*100)%100].join("-")},timeLoop:function(u,d){return function(l,h){function a(e){e<1||(e==1?(l.call(d,e),h.call(d)):setTimeout(function(){e>-1&&l.call(d,e--),e>-1&&a(e)},1))}a(u)}},loop:function(u,d){var l=0,h=u,a=Math.ceil(u/5);return function(e){for(var t=l,r=a*1,n=a*2,s=a*3,i=a*4,o=r,f=n,c=s,g=i,v=h;t<o&&t<h;)e.call(d,t,1),t++,r<f&&r<h&&(e.call(d,r,2),r++),n<c&&n<h&&(e.call(d,n,3),n++),s<g&&s<h&&(e.call(d,s,4),s++),i<v&&i<h&&(e.call(d,i,5),i++)}},loopArray:function(u,d){var l=u.length,h=0,a=l,e=Math.ceil(l/5);return function(t){for(var r=h,n=e*1,s=e*2,i=e*3,o=e*4,f=n,c=s,g=i,v=o,x=a;r<f&&r<a;)t.call(d,u[r],r,1),r++,n<c&&n<a&&(t.call(d,u[n],n,2),n++),s<g&&s<a&&(t.call(d,u[s],s,3),s++),i<v&&i<a&&(t.call(d,u[i],i,4),i++),o<x&&o<a&&(t.call(d,u[o],o,5),o++)}},startsWith:function(u,d,l){return l=l||0,u.lastIndexOf(d,l)===l},endsWith:function(u,d,l){var h=u;(l===void 0||l>h.length)&&(l=h.length),l-=d.length;var a=h.indexOf(d,l);return a!==-1&&a===l},inArray:function(u,d){if(this.typeCheck(["undefined","null"],u)||!this.typeCheck("array",d))return-1;for(var l=0,h=d.length;l<h;l++)if(d[l]==u)return l;return-1},trim:function(u){var d="[\\x20\\t\\r\\n\\f]",l=new RegExp("^"+d+"+|((?:^|[^\\\\])(?:\\\\.)*)"+d+"+$","g");return u==null?"":(u+"").replace(l,"")},param:function(u){var d=/%20/g,l=[],h=function(t,r){r=Y.typeCheck("function",r)?r():r??"",l[l.length]=encodeURIComponent(t)+"="+encodeURIComponent(r)};for(var a in u)h(a,u[a]);return l.join("&").replace(d,"+")},ajax:function(u){var d=null,l="",h=null,a=Y.extend({url:null,type:"GET",data:null,async:!0,success:null,fail:null},u);if(!(!this.typeCheck("string",a.url)||!this.typeCheck("function",a.success))){if(this.typeCheck("object",a.data)&&(l=this.param(a.data)),!this.typeCheck("undefined",XMLHttpRequest))d=new XMLHttpRequest;else for(var e=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],t=0,r=e.length;t<r;t++)try{d=new ActiveXObject(e[t]);break}catch{}d!=null&&(d.open(a.type,a.url,a.async),d.send(l),h=function(){d.readyState===4&&d.status==200?a.success(d):Y.typeCheck("function",a.fail)&&a.fail(d)},a.async?d.onreadystatechange=h:h())}},ready:function(){var L,u,d={};d["[object Boolean]"]="boolean",d["[object Number]"]="number",d["[object String]"]="string",d["[object Function]"]="function",d["[object Array]"]="array",d["[object Date]"]="date",d["[object RegExp]"]="regexp",d["[object Object]"]="object";var l={isReady:!1,readyWait:1,holdReady:function(t){t?l.readyWait++:l.ready(!0)},ready:function(t){if(t===!0&&!--l.readyWait||t!==!0&&!l.isReady){if(!document.body)return setTimeout(l.ready,1);if(l.isReady=!0,t!==!0&&--l.readyWait>0)return;L.resolveWith(document,[l])}},bindReady:function(){if(!L){if(L=l._Deferred(),document.readyState==="complete")return setTimeout(l.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",u,!1),window.addEventListener("load",l.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",u),window.attachEvent("onload",l.ready);var t=!1;try{t=window.frameElement==null}catch{}document.documentElement.doScroll&&t&&h()}}},_Deferred:function(){var t=[],r,n,s,i={done:function(){if(!s){var f=arguments,c,g,v,x,y;for(r&&(y=r,r=0),c=0,g=f.length;c<g;c++)v=f[c],x=l.type(v),x==="array"?i.done.apply(i,v):x==="function"&&t.push(v);y&&i.resolveWith(y[0],y[1])}return this},resolveWith:function(f,c){if(!s&&!r&&!n){c=c||[],n=1;try{for(;t[0];)t.shift().apply(f,c)}finally{r=[f,c],n=0}}return this},resolve:function(){return i.resolveWith(this,arguments),this},isResolved:function(){return!!(n||r)},cancel:function(){return s=1,t=[],this}};return i},type:function(t){return t==null?String(t):d[Object.prototype.toString.call(t)]||"object"}};function h(){if(!l.isReady){try{document.documentElement.doScroll("left")}catch{setTimeout(h,1);return}l.ready()}}document.addEventListener?u=function(){document.removeEventListener("DOMContentLoaded",u,!1),l.ready()}:document.attachEvent&&(u=function(){document.readyState==="complete"&&(document.detachEvent("onreadystatechange",u),l.ready())});function a(e){l.bindReady();var t=l.type(e);L.done(e)}return a}()},pt=function(u){for(var d=[],l=0;l<u.length;l++){var h=dt[u[l]];if(Y.typeCheck(["function","object"],h))d.push(h);else{var a=wt(u[l]);a==null?d.push(null):d.push(a)}}return d},wt=function(l){var d=null,l=l+".";for(var h in dt)if(h.indexOf(l)!=-1&&Y.typeCheck(["function","object"],dt[h])){var a=h.split(l).join("");a.indexOf(".")==-1&&(d==null&&(d={}),d[a]=dt[h])}return d},k={ready:function(){var u=[],d=arguments.length==2?arguments[1]:arguments[0],l=arguments.length==2?arguments[0]:null;if(!Y.typeCheck(["array","null"],l)||!Y.typeCheck("function",d))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");Y.ready(function(){l&&(u=pt(l)),d.apply(null,u)})},defineUI:function(u,d,l,h){if(!Y.typeCheck("string",u)||!Y.typeCheck("array",d)||!Y.typeCheck("function",l)||!Y.typeCheck(["string","undefined"],h))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");if(Y.typeCheck("function",nt[u]))throw new Error("JUI_CRITICAL_ERR: '"+u+"' is already exist");if(Y.typeCheck("undefined",h)&&(h="core"),Y.typeCheck("function",nt[h])){if(vt[h]!==!0)throw new Error("JUI_CRITICAL_ERR: UI function can not be inherited")}else throw new Error("JUI_CRITICAL_ERR: Parents are the only function");var a=pt(d),e=l.apply(null,a);Y.inherit(e,nt[h]),dt[u]=nt[h].init({type:u,class:e}),nt[u]=e,vt[u]=!0},redefineUI:function(u,d,l,h,a){!a&&vt[u]===!0&&(dt[u]=null,nt[u]=null,vt[u]=!1),(!a||a&&vt[u]!==!0)&&this.defineUI(u,d,l,h)},createUIObject:function(u,d,l,h,a,e){var t=new u.class,r=k.defineOptions(u.class,a||{});t.init.prototype=t,t.init.prototype.selector=d,t.init.prototype.root=h,t.init.prototype.options=r,t.init.prototype.event=new Array,t.init.prototype.timestamp=new Date().getTime(),t.init.prototype.index=l,t.init.prototype.module=u,Y.typeCheck("function",e)&&e(t,r);var n=new t.init;for(var s in r.event)n.on(s,r.event[s]);return h.jui=n,n},define:function(u,d,l,h){if(!Y.typeCheck("string",u)||!Y.typeCheck("array",d)||!Y.typeCheck("function",l)||!Y.typeCheck(["string","undefined","null"],h))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");if(Y.typeCheck("function",nt[u]))throw new Error("JUI_CRITICAL_ERR: '"+u+"' is already exist");var a=pt(d),e=l.apply(null,a);if(Y.typeCheck("function",nt[h])){if(vt[h]!==!0)throw new Error("JUI_CRITICAL_ERR: UI function can not be inherited");Y.inherit(e,nt[h])}dt[u]=e,nt[u]=e,vt[u]=!0},redefine:function(u,d,l,h,a){!a&&vt[u]===!0&&(dt[u]=null,nt[u]=null,vt[u]=!1),(!a||a&&vt[u]!==!0)&&this.define(u,d,l,h)},defineOptions:function(u,d,l){for(var h=n(u,{}),a=Object.keys(h),e=Object.keys(d),t=0;t<e.length;t++){var r=e[t];if(Y.inArray(r,a)==-1&&Y.inArray(r,l)==-1)throw new Error("JUI_CRITICAL_ERR: '"+r+"' is not an option")}Y.extend(d,h,!0);function n(s,i){if(Y.typeCheck("function",s)){if(Y.typeCheck("function",s.setup)){var o=s.setup();for(var f in o)Y.typeCheck("undefined",i[f])&&(i[f]=o[f])}n(s.parent,i)}return i}return d},include:function(u){if(!Y.typeCheck("string",u))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");var d=dt[u];if(Y.typeCheck(["function","object"],d))return d;var l=wt(u);return l??null},includeAll:function(){var u=[];for(var d in dt)u.push(dt[d]);return u},use:function(){for(var u=[],d=0;d<arguments.length;d++)if(Y.typeCheck("array",arguments[d]))for(var l=arguments[d],h=0;h<l.length;h++)Y.typeCheck("object",l[h])&&u.push(l[h]);else Y.typeCheck("object",arguments[d])&&u.push(arguments[d]);for(var d=0;d<u.length;d++){var a=u[d];if((typeof a>"u"?"undefined":ft(a))=="object"){if(typeof a.name!="string"||typeof a.component!="function")return;a.extend!=null&&k.include(a.extend)==null,a.extend=="core"?k.redefineUI(a.name,[],a.component,a.extend):k.redefine(a.name,[],a.component,a.extend)}}}},ht={name:"util.dom",extend:null,component:function(){var u=k.include("util.base");return{find:function(){var l=arguments;if(l.length==1){if(u.typeCheck("string",l[0]))return document.querySelectorAll(l[0])}else if(l.length==2&&u.typeCheck("object",l[0])&&u.typeCheck("string",l[1]))return l[0].querySelectorAll(l[1]);return[]},each:function(l,h){if(u.typeCheck("function",h)){var a=null;u.typeCheck("string",l)?a=document.querySelectorAll(l):u.typeCheck("array",l)&&(a=l),a!=null&&Array.prototype.forEach.call(a,function(e,t){h.apply(e,[t,e])})}},attr:function(l,h){if(u.typeCheck(["string","array"],l)){var a=document.querySelectorAll(l);if(u.typeCheck("object",h))for(var e=0;e<a.length;e++)for(var t in h)a[e].setAttribute(t,h[t]);else if(u.typeCheck("string",h)&&a.length>0)return a[0].getAttribute(h)}},remove:function(l){this.each(l,function(){this.parentNode.removeChild(this)})},offset:function(l){function h(i){return i!=null&&i==i.window}function a(i){return h(i)?i:i.nodeType===9?i.defaultView||i.parentWindow:!1}var e,t,r={top:0,left:0},n=l&&l.ownerDocument;if(n){e=n.documentElement;var s="undefined";return ft(l.getBoundingClientRect)!==s&&(r=l.getBoundingClientRect()),t=a(n),{top:r.top+(t.pageYOffset||e.scrollTop)-(e.clientTop||0),left:r.left+(t.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}}}}}},K={name:"util.math",extend:null,component:function(){var u=k.include("util.base");function d(r,n){for(var s=[],i=0,o=r.length;i<o;i++){for(var f=0,c=0,g=r[i].length;c<g;c++)f+=r[i][c]*n[c];s.push(f)}return s}function l(r,n){for(var s=[],i=[],o=0,f=n.length;o<f;o++)s[o]=[],i[o]=[];for(var o=0,f=n.length;o<f;o++)for(var c=0,g=n[o].length;c<g;c++)s[c].push(n[o][c]);for(var o=0,f=s.length;o<f;o++)for(var v=d(r,s[o]),c=0,g=v.length;c<g;c++)i[c].push(v[c]);return i}function h(r,n){var s=new Float32Array(4);return s[0]=r[0][0]*n[0]+r[0][1]*n[1]+r[0][2]*n[2]+r[0][3]*n[3],s[1]=r[1][0]*n[0]+r[1][1]*n[1]+r[1][2]*n[2]+r[1][3]*n[3],s[2]=r[2][0]*n[0]+r[2][1]*n[1]+r[2][2]*n[2]+r[2][3]*n[3],s[3]=r[3][0]*n[0]+r[3][1]*n[1]+r[3][2]*n[2]+r[3][3]*n[3],s}function a(r,n){var s=[new Float32Array(4),new Float32Array(4),new Float32Array(4),new Float32Array(4)],i=[new Float32Array([n[0][0],n[1][0],n[2][0],n[3][0]]),new Float32Array([n[0][1],n[1][1],n[2][1],n[3][1]]),new Float32Array([n[0][2],n[1][2],n[2][2],n[3][2]]),new Float32Array([n[0][3],n[1][3],n[2][3],n[3][3]])];return s[0][0]=r[0][0]*i[0][0]+r[0][1]*i[0][1]+r[0][2]*i[0][2]+r[0][3]*i[0][3],s[1][0]=r[1][0]*i[0][0]+r[1][1]*i[0][1]+r[1][2]*i[0][2]+r[1][3]*i[0][3],s[2][0]=r[2][0]*i[0][0]+r[2][1]*i[0][1]+r[2][2]*i[0][2]+r[2][3]*i[0][3],s[3][0]=r[3][0]*i[0][0]+r[3][1]*i[0][1]+r[3][2]*i[0][2]+r[3][3]*i[0][3],s[0][1]=r[0][0]*i[1][0]+r[0][1]*i[1][1]+r[0][2]*i[1][2]+r[0][3]*i[1][3],s[1][1]=r[1][0]*i[1][0]+r[1][1]*i[1][1]+r[1][2]*i[1][2]+r[1][3]*i[1][3],s[2][1]=r[2][0]*i[1][0]+r[2][1]*i[1][1]+r[2][2]*i[1][2]+r[2][3]*i[1][3],s[3][1]=r[3][0]*i[1][0]+r[3][1]*i[1][1]+r[3][2]*i[1][2]+r[3][3]*i[1][3],s[0][2]=r[0][0]*i[2][0]+r[0][1]*i[2][1]+r[0][2]*i[2][2]+r[0][3]*i[2][3],s[1][2]=r[1][0]*i[2][0]+r[1][1]*i[2][1]+r[1][2]*i[2][2]+r[1][3]*i[2][3],s[2][2]=r[2][0]*i[2][0]+r[2][1]*i[2][1]+r[2][2]*i[2][2]+r[2][3]*i[2][3],s[3][2]=r[3][0]*i[2][0]+r[3][1]*i[2][1]+r[3][2]*i[2][2]+r[3][3]*i[2][3],s[0][3]=r[0][0]*i[3][0]+r[0][1]*i[3][1]+r[0][2]*i[3][2]+r[0][3]*i[3][3],s[1][3]=r[1][0]*i[3][0]+r[1][1]*i[3][1]+r[1][2]*i[3][2]+r[1][3]*i[3][3],s[2][3]=r[2][0]*i[3][0]+r[2][1]*i[3][1]+r[2][2]*i[3][2]+r[2][3]*i[3][3],s[3][3]=r[3][0]*i[3][0]+r[3][1]*i[3][1]+r[3][2]*i[3][2]+r[3][3]*i[3][3],s}function e(r){var n=[new Float32Array(4),new Float32Array(4),new Float32Array(4),new Float32Array(4)],s=r[0][0],i=r[0][1],o=r[0][2],f=r[0][3],c=r[1][0],g=r[1][1],v=r[1][2],x=r[1][3],y=r[2][0],A=r[2][1],F=r[2][2],w=r[2][3],m=r[3][0],T=r[3][1],M=r[3][2],B=r[3][3];n[0][0]=v*w*T-x*F*T+x*A*M-g*w*M-v*A*B+g*F*B,n[0][1]=f*F*T-o*w*T-f*A*M+i*w*M+o*A*B-i*F*B,n[0][2]=o*x*T-f*v*T+f*g*M-i*x*M-o*g*B+i*v*B,n[0][3]=f*v*A-o*x*A-f*g*F+i*x*F+o*g*w-i*v*w,n[1][0]=x*F*m-v*w*m-x*y*M+c*w*M+v*y*B-c*F*B,n[1][1]=o*w*m-f*F*m+f*y*M-s*w*M-o*y*B+s*F*B,n[1][2]=f*v*m-o*x*m-f*c*M+s*x*M+o*c*B-s*v*B,n[1][3]=o*x*y-f*v*y+f*c*F-s*x*F-o*c*w+s*v*w,n[2][0]=g*w*m-x*A*m+x*y*T-c*w*T-g*y*B+c*A*B,n[2][1]=f*A*m-i*w*m-f*y*T+s*w*T+i*y*B-s*A*B,n[2][2]=i*x*m-f*g*m+f*c*T-s*x*T-i*c*B+s*g*B,n[2][3]=f*g*y-i*x*y-f*c*A+s*x*A+i*c*w-s*g*w,n[3][0]=v*A*m-g*F*m-v*y*T+c*F*T+g*y*M-c*A*M,n[3][1]=i*F*m-o*A*m+o*y*T-s*F*T-i*y*M+s*A*M,n[3][2]=o*g*m-i*v*m-o*c*T+s*v*T+i*c*M-s*g*M,n[3][4]=i*v*y-o*g*y+o*c*A-s*v*A-i*c*F+s*g*F;var p=1/(s*n[0][0]+c*n[0][1]+y*n[0][2]+m*n[0][3]);return p===0?n=[new Float32Array([1,0,0,0]),new Float32Array([0,1,0,0]),new Float32Array([0,0,1,0]),new Float32Array([0,0,0,1])]:(n[0][0]*=p,n[0][1]*=p,n[0][2]*=p,n[0][3]*=p,n[1][0]*=p,n[1][1]*=p,n[1][2]*=p,n[1][3]*=p,n[2][0]*=p,n[2][1]*=p,n[2][2]*=p,n[2][3]*=p,n[3][0]*=p,n[3][1]*=p,n[3][2]*=p,n[3][4]*=p),n}var t={rotate:function(n,s,i){return{x:n*Math.cos(i)-s*Math.sin(i),y:n*Math.sin(i)+s*Math.cos(i)}},resize:function(n,s,i,o){var f=o/i;return i>=n&&f<=1?(i=n,o=s*f):o>=s&&(o=s,i=n/f),{width:i,height:o}},radian:function(n){return n*Math.PI/180},degree:function(n){return n*180/Math.PI},angle:function(n,s,i,o){var f=i-n,c=o-s;return Math.atan2(c,f)},interpolateNumber:function(n,s){var i=s-n;return function(o){return n+i*o}},interpolateRound:function(n,s){var i=s-n;return function(o){return Math.round(n+i*o)}},getFixed:function(n,s){var i=(n+"").split("."),o=i.length<2?0:i[1].length,f=(s+"").split("."),c=f.length<2?0:f[1].length;return o>c?o:c},fixed:function(n){var s=this.getFixed(n,0),i=Math.pow(10,s),o=function(c){return Math.round(c*i)/i};return o.plus=function(f,c){return Math.round(f*i+c*i)/i},o.minus=function(f,c){return Math.round(f*i-c*i)/i},o.multi=function(f,c){return Math.round(f*i*(c*i))/(i*i)},o.div=function(f,c){var g=f*i/(c*i),v=Math.pow(10,this.getFixed(g,0));return Math.round(g*v)/v},o.remain=function(f,c){return Math.round(f*i%(c*i))/i},o},round:function(n,s){var i=Math.pow(10,s);return Math.round(n*i)/i},plus:function(n,s){var i=Math.pow(10,this.getFixed(n,s));return Math.round(n*i+s*i)/i},minus:function(n,s){var i=Math.pow(10,this.getFixed(n,s));return Math.round(n*i-s*i)/i},multi:function(n,s){var i=Math.pow(10,this.getFixed(n,s));return Math.round(n*i*(s*i))/(i*i)},div:function(n,s){var i=Math.pow(10,this.getFixed(n,s)),o=n*i/(s*i),f=Math.pow(10,this.getFixed(o,0));return Math.round(o*f)/f},remain:function(n,s){var i=Math.pow(10,this.getFixed(n,s));return Math.round(n*i%(s*i))/i},nice:function(n,s,i,o){if(o=o||!1,n>s)var f=n,c=s;else var c=n,f=s;var g=i,v=0,x=[],y,A;function F(m,T){var M=Math.floor(Math.log(m)/Math.LN10),B=m/Math.pow(10,M);return T?B<1.5?niceFraction=1:B<3?niceFraction=2:B<7?niceFraction=5:niceFraction=10:B<=1?niceFraction=1:B<=2?niceFraction=2:B<=5?niceFraction=5:niceFraction=10,niceFraction*Math.pow(10,M)}function w(){x=o?F(f-c,!1):f-c,v=o?F(x/g,!0):x/g,y=o?Math.floor(c/v)*v:c,A=o?Math.floor(f/v)*v:f}return w(),{min:y,max:A,range:x,spacing:v}},matrix:function(n,s){return u.typeCheck("array",s[0])?l(n,s):d(n,s)},matrix3d:function(n,s){return s[0]instanceof Array||s[0]instanceof Float32Array?a(n,s):h(n,s)},inverseMatrix3d:function(n){return e(n)},scaleValue:function(n,s,i,o,f){s=s==i?0:s;var c=f-o,g=c*v();function v(){var x=i-s,y=n-s,A=y/x;return A}return g+o}};return t}};k.use(K);var Q={name:"util.color",extend:null,component:function(){var u=k.include("util.base"),d=k.include("util.math");function l(a){var e=0,t=1,r=0,n=10,s=6;if(a){for(var i=0;i<a.length&&!(i>s);i++)e+=t*(a.charCodeAt(i)%n),r+=t*(n-1),t*=.7;r>0&&(e=e/r)}return e}var h={regex:/(linear|radial)\((.*)\)(.*)/i,format:function(e,t){if(t=="hex"){var r=e.r.toString(16);e.r<16&&(r="0"+r);var n=e.g.toString(16);e.g<16&&(n="0"+n);var s=e.b.toString(16);return e.b<16&&(s="0"+s),"#"+[r,n,s].join("").toUpperCase()}else if(t=="rgb")return typeof e.a>"u"?"rgb("+[e.r,e.g,e.b].join(",")+")":"rgba("+[e.r,e.g,e.b,e.a].join(",")+")";return e},scale:function(){var e,t;function r(n,s){var i={r:parseInt(e.r+(t.r-e.r)*n,10),g:parseInt(e.g+(t.g-e.g)*n,10),b:parseInt(e.b+(t.b-e.b)*n,10)};return h.format(i,s)}return r.domain=function(n,s){return e=h.rgb(n),t=h.rgb(s),r},r.ticks=function(n){for(var s=1/n,i=0,o=[];i<=1;){var f=r(i,"hex");o.push(f),i=d.plus(i,s)}return o},r},map:function(e,t){var r=[];t=t||5;for(var n=h.scale(),s=0,i=e.length-1;s<i;s++)if(s==0)r=n.domain(e[s],e[s+1]).ticks(t);else{var o=n.domain(e[s],e[s+1]).ticks(t);o.shift(),r=r.concat(o)}return r},rgb:function(e){if(typeof e=="string"){if(e.indexOf("rgb(")>-1){for(var t=e.replace("rgb(","").replace(")","").split(","),r=0,n=t.length;r<n;r++)t[r]=parseInt(u.trim(t[r]),10);return{r:t[0],g:t[1],b:t[2],a:1}}else if(e.indexOf("rgba(")>-1){for(var t=e.replace("rgba(","").replace(")","").split(","),r=0,n=t.length;r<n;r++)n-1==r?t[r]=parseFloat(u.trim(t[r])):t[r]=parseInt(u.trim(t[r]),10);return{r:t[0],g:t[1],b:t[2],a:t[3]}}else if(e.indexOf("#")==0){e=e.replace("#","");var t=[];if(e.length==3)for(var r=0,n=e.length;r<n;r++){var s=e.substr(r,1);t.push(parseInt(s+s,16))}else for(var r=0,n=e.length;r<n;r+=2)t.push(parseInt(e.substr(r,2),16));return{r:t[0],g:t[1],b:t[2],a:1}}}return e},HSVtoRGB:function(e,t,r){e==360&&(e=0);var n=t*r,s=n*(1-Math.abs(e/60%2-1)),i=r-n,o=[];return 0<=e&&e<60?o=[n,s,0]:60<=e&&e<120?o=[s,n,0]:120<=e&&e<180?o=[0,n,s]:180<=e&&e<240?o=[0,s,n]:240<=e&&e<300?o=[s,0,n]:300<=e&&e<360&&(o=[n,0,s]),{r:Math.ceil((o[0]+i)*255),g:Math.ceil((o[1]+i)*255),b:Math.ceil((o[2]+i)*255)}},RGBtoHSV:function(e,t,r){var n=e/255,s=t/255,i=r/255,o=Math.max(n,s,i),f=Math.min(n,s,i),c=o-f,g=0;c==0?g=0:o==n?g=60*((s-i)/c%6):o==s?g=60*((i-n)/c+2):o==i&&(g=60*((n-s)/c+4)),g<0&&(g=360+g);var v=0;o==0?v=0:v=c/o;var x=o;return{h:g,s:v,v:x}},trim:function(e){return(e||"").replace(/^\s+|\s+$/g,"")},lighten:function(e,t){e=e.replace(/[^0-9a-f]/gi,""),t=t||0;var r=[],n,s;for(s=0;s<6;s+=2)n=parseInt(e.substr(s,2),16),n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16),r.push(("00"+n).substr(n.length));return"#"+r.join("")},darken:function(e,t){return this.lighten(e,-t)},parse:function(e){return this.parseGradient(e)},parseGradient:function(e){var t=e.match(this.regex);if(!t)return e;var r=this.trim(t[1]),n=this.parseAttr(r,this.trim(t[2])),s=this.parseStop(this.trim(t[3])),i={type:r+"Gradient",attr:n,children:s};return i},parseStop:function(e){for(var t=e.split(","),r=[],n=0,s=t.length;n<s;n++){var e=t[n],i=e.split(" ");i.length!=0&&(i.length==1?r.push({type:"stop",attr:{"stop-color":i[0]}}):i.length==2?r.push({type:"stop",attr:{offset:i[0],"stop-color":i[1]}}):i.length==3&&r.push({type:"stop",attr:{offset:i[0],"stop-color":i[1],"stop-opacity":i[2]}}))}for(var o=-1,f=-1,n=0,s=r.length;n<s;n++){var e=r[n];if(n==0?e.offset||(e.offset=0):n==s-1&&(e.offset||(e.offset=1)),o==-1&&typeof e.offset>"u")o=n;else if(f==-1&&typeof e.offset>"u"){f=n;for(var c=f-o,g=r[f].offset.indexOf("%")>-1?parseFloat(r[f].offset)/100:r[f].offset,v=r[o].offset.indexOf("%")>-1?parseFloat(r[o].offset)/100:r[o].offset,x=g-v,y=x/c,A=v+y,F=o+1;F<f;F++)r[F].offset=A,A+=y;o=f,f=-1}}return r},parseAttr:function(e,t){if(e=="linear")switch(t){case"":case"left":return{x1:0,y1:0,x2:1,y2:0,direction:t||"left"};case"right":return{x1:1,y1:0,x2:0,y2:0,direction:t};case"top":return{x1:0,y1:0,x2:0,y2:1,direction:t};case"bottom":return{x1:0,y1:1,x2:0,y2:0,direction:t};case"top left":return{x1:0,y1:0,x2:1,y2:1,direction:t};case"top right":return{x1:1,y1:0,x2:0,y2:1,direction:t};case"bottom left":return{x1:0,y1:1,x2:1,y2:0,direction:t};case"bottom right":return{x1:1,y1:1,x2:0,y2:0,direction:t};default:for(var r=t.split(","),n=0,s=r.length;n<s;n++)r[n].indexOf("%")==-1&&(r[n]=parseFloat(r[n]));return{x1:r[0],y1:r[1],x2:r[2],y2:r[3]}}else{for(var r=t.split(","),n=0,s=r.length;n<s;n++)r[n].indexOf("%")==-1&&(r[n]=parseFloat(r[n]));return{cx:r[0],cy:r[1],r:r[2],fx:r[3],fy:r[4]}}},colorHash:function(e,t){var r=0;return e&&(e=e.replace(/.*`/,""),e=e.replace(/\(.*/,""),r=l(e)),typeof t=="function"?t(r):{r:200+Math.round(55*r),g:0+Math.round(230*(1-r)),b:0+Math.round(55*(1-r))}}};return h.map.parula=function(a){return h.map(["#352a87","#0f5cdd","#00b5a6","#ffc337","#fdff00"],a)},h.map.jet=function(a){return h.map(["#00008f","#0020ff","#00ffff","#51ff77","#fdff00","#ff0000","#800000"],a)},h.map.hsv=function(a){return h.map(["#ff0000","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff","#ff0000"],a)},h.map.hot=function(a){return h.map(["#0b0000","#ff0000","#ffff00","#ffffff"],a)},h.map.pink=function(a){return h.map(["#1e0000","#bd7b7b","#e7e5b2","#ffffff"],a)},h.map.bone=function(a){return h.map(["#000000","#4a4a68","#a6c6c6","#ffffff"],a)},h.map.copper=function(a){return h.map(["#000000","#3d2618","#9d623e","#ffa167","#ffc77f"],a)},h}},tt={name:"collection",extend:null,component:function(){var u=function(l,h,a,e){this.type=l,this.selector=h,this.options=a,this.destroy=function(){for(var r=0;r<e.length;r++)e[r].destroy()};for(var t=0;t<e.length;t++)this.push(e[t])};return u.prototype=Object.create(Array.prototype),u}},V={name:"manager",extend:null,component:function(){var u=k.include("util.base"),d=new function(){var l=[],h=[];this.add=function(a){l.push(a)},this.emit=function(a,e,t){for(var r=[],n=0;n<l.length;n++){var s=l[n];(a==s.selector||a==s.type)&&r.push(s)}for(var n=0;n<r.length;n++)for(var s=r[n],i=0;i<s.length;i++)s[i].emit(e,t)},this.get=function(a){if(u.typeCheck("integer",a))return l[a];if(u.typeCheck("string",a)){for(var e=0;e<l.length;e++){var t=l[e];if(a==t.selector)return t.length==1?t[0]:t}for(var r=[],e=0;e<l.length;e++){var t=l[e];a==t.type&&r.push(t)}return r}},this.getAll=function(){return l},this.remove=function(a){if(u.typeCheck("integer",a))return l.splice(a,1)[0]},this.shift=function(){return l.shift()},this.pop=function(){return l.pop()},this.size=function(){return l.length},this.addClass=function(a){h.push(a)},this.getClass=function(a){if(u.typeCheck("integer",a))return h[a];if(u.typeCheck("string",a)){for(var e=0;e<h.length;e++)if(a==h[e].type)return h[e]}return null},this.getClassAll=function(){return h},this.create=function(a,e,t){var r=d.getClass(a);if(u.typeCheck("null",r))throw new Error("JUI_CRITICAL_ERR: '"+a+"' does not exist");return r.class(e,t)}};return d}};k.use(ht,V,tt);var W={name:"core",extend:null,component:function(){var u=k.include("util.base"),d=k.include("util.dom"),l=k.include("manager"),h=k.include("collection"),a=function(){this.emit=function(t,r){if(u.typeCheck("string",t)){for(var n,s=0;s<this.event.length;s++){var i=this.event[s];if(i.type==t.toLowerCase()){var o=u.typeCheck("array",r)?r:[r];n=i.callback.apply(this,o)}}return n}},this.on=function(t,r){!u.typeCheck("string",t)||!u.typeCheck("function",r)||this.event.push({type:t.toLowerCase(),callback:r,unique:!1})},this.off=function(t){for(var r=[],n=0;n<this.event.length;n++){var s=this.event[n];(u.typeCheck("function",t)&&s.callback!=t||u.typeCheck("string",t)&&s.type!=t.toLowerCase())&&r.push(s)}this.event=r},this.setOption=function(t,r){if(u.typeCheck("object",t))for(var n in t)this.options[n]=t[n];else this.options[t]=r},this.destroy=function(){if(this.__proto__)for(var t in this.__proto__)delete this.__proto__[t]}};return a.build=function(e){return function(t,r){var n=[],s=[];u.typeCheck("string",t)?s=d.find(t):u.typeCheck("object",t)?s.push(t):s.push(document.createElement("div"));for(var i=0,o=s.length;i<o;i++)n[i]=k.createUIObject(e,t,i,s[i],r);return l.add(new h(e.type,t,r,n)),n.length==0?null:n.length==1?n[0]:n}},a.init=function(e){var t=null;return(typeof e>"u"?"undefined":ft(e))==="object"&&(t=a.build(e),l.addClass({type:e.type,class:t})),t},a.setup=function(){return{event:{}}},a}},G={name:"util.time",extend:null,component:function(){var u=k.include("util.base"),d={MILLISECOND:1e3,MINUTE:1e3*60,HOUR:1e3*60*60,DAY:1e3*60*60*24,years:"years",months:"months",days:"days",hours:"hours",minutes:"minutes",seconds:"seconds",milliseconds:"milliseconds",weeks:"weeks",diff:function(h,a,e){var t=+a-+e;return h=="seconds"?Math.abs(Math.floor(t/d.MILLISECOND)):h=="minutes"?Math.abs(Math.floor(t/d.MINUTE)):h=="hours"?Math.abs(Math.floor(t/d.HOUR)):h=="days"?Math.abs(Math.floor(t/d.DAY)):t},add:function(h){if(arguments.length<=2)return h;if(arguments.length>2){for(var a=new Date(+h),e=1;e<arguments.length;e+=2){var t=typeof arguments[e]=="string"?this[arguments[e]]:arguments[e],r=arguments[e+1];this.years==t?a.setFullYear(a.getFullYear()+r):this.months==t?a.setMonth(a.getMonth()+r):this.days==t?a.setDate(a.getDate()+r):this.hours==t?a.setHours(a.getHours()+r):this.minutes==t?a.setMinutes(a.getMinutes()+r):this.seconds==t?a.setSeconds(a.getSeconds()+r):this.milliseconds==t?a.setMilliseconds(a.getMilliseconds()+r):this.weeks==t&&a.setDate(a.getDate()+r*7)}return a}},format:function(h,a,e){return u.dateFormat(h,a,e)}};return d}};k.use(K);var I={name:"util.transform",extend:null,component:function(){var u=k.include("util.math"),d=function(h){function a(e){for(var t=0,r=h.length;t<r;t++)h[t]=u.matrix(e,h[t]);return h}this.matrix=function(){var e=arguments,t=e[0];if(t=="move")return[new Float32Array([1,0,e[1]]),new Float32Array([0,1,e[2]]),new Float32Array([0,0,1])];if(t=="scale")return[new Float32Array([e[1],0,0]),new Float32Array([0,e[2],0]),new Float32Array([0,0,1])];if(t=="rotate")return[new Float32Array([Math.cos(u.radian(e[1])),-Math.sin(u.radian(e[1])),0]),new Float32Array([Math.sin(u.radian(e[1])),Math.cos(u.radian(e[1])),0]),new Float32Array([0,0,1])];if(t=="move3d")return[new Float32Array([1,0,0,e[1]]),new Float32Array([0,1,0,e[2]]),new Float32Array([0,0,1,e[3]]),new Float32Array([0,0,0,1])];if(t=="scale3d")return[new Float32Array([e[1],0,0,0]),new Float32Array([0,e[2],0,0]),new Float32Array([0,0,e[3],0]),new Float32Array([0,0,0,1])];if(t=="rotate3dz")return[new Float32Array([Math.cos(u.radian(e[1])),-Math.sin(u.radian(e[1])),0,0]),new Float32Array([Math.sin(u.radian(e[1])),Math.cos(u.radian(e[1])),0,0]),new Float32Array([0,0,1,0]),new Float32Array([0,0,0,1])];if(t=="rotate3dx")return[new Float32Array([1,0,0,0]),new Float32Array([0,Math.cos(u.radian(e[1])),-Math.sin(u.radian(e[1])),0]),new Float32Array([0,Math.sin(u.radian(e[1])),Math.cos(u.radian(e[1])),0]),new Float32Array([0,0,0,1])];if(t=="rotate3dy")return[new Float32Array([Math.cos(u.radian(e[1])),0,Math.sin(u.radian(e[1])),0]),new Float32Array([0,1,0,0]),new Float32Array([-Math.sin(u.radian(e[1])),0,Math.cos(u.radian(e[1])),0]),new Float32Array([0,0,0,1])]},this.move=function(e,t){return a(this.matrix("move",e,t))},this.move3d=function(e,t,r){return a(this.matrix("move3d",e,t,r))},this.scale=function(e,t){return a(this.matrix("scale",e,t))},this.scale3d=function(e,t,r){return a(this.matrix("scale3d",e,t,r))},this.rotate=function(e){return a(this.matrix("rotate",e))},this.rotate3dz=function(e){return a(this.matrix("rotate3dz",e))},this.rotate3dx=function(e){return a(this.matrix("rotate3dx",e))},this.rotate3dy=function(e){return a(this.matrix("rotate3dy",e))},this.custom=function(e){return a(e)},this.merge=function(){for(var e=arguments,t=this.matrix.apply(this,e[0]),r=1;r<e.length;r++)t=u.matrix(t,this.matrix.apply(this,e[r]));return a(t)},this.merge2=function(e){for(var t=0,r=h.length;t<r;t++){for(var n=e.apply(null,h[t]),s=this.matrix.apply(this,n[0]),i=1;i<n.length;i++)s=u.matrix(s,this.matrix.apply(this,n[i]));h[t]=u.matrix(s,h[t])}}};return d}},O={name:"util.canvas.base",extend:null,component:function(){var u=function(l){this.clearContext=function(){l.clearRect(0,0,l.canvas.width,l.canvas.height)},this.drawLine=function(h,a,e,t,r){var n=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1;r=r||"#434d6b",l.beginPath(),l.moveTo(h,a),l.lineTo(e,t),l.lineWidth=n,l.strokeStyle=r,l.stroke()},this.drawCurve=function(h,a,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.5,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,n=arguments.length>5&&arguments[5]!==void 0?arguments[5]:16;l.beginPath();var s=h.reduce(function(f,c){return f.push(c[0],c[1]),f},[]),i=getCurvePoints(s,a,e,t,r,n);l.moveTo(i[0],i[1]);for(var o=2;o<i.length-1;o+=2)l.lineTo(i[o],i[o+1])},this.drawDashedLine=function(h,a,e,t,r){var n=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[3,3],s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1;r=r||"#434d6b",l.beginPath(),l.moveTo(h,a),l.lineTo(e,t),l.lineWidth=s,l.strokeStyle=r;var i=l.getLineDash();l.setLineDash(n),l.stroke(),l.setLineDash(i)},this.drawLines=function(h){h=h||"#434d6b",l.beginPath();for(var a=arguments.length,e=Array(a>1?a-1:0),t=1;t<a;t++)e[t-1]=arguments[t];l.moveTo(e[0][0],e[0][1]),e.slice(1).map(function(r){return l.lineTo(r[0],r[1])}),l.lineWidth=1,l.strokeStyle=h,l.stroke()},this.drawRoundRect=function(h,a,e,t,r){l.beginPath(),l.moveTo(h,a+r),l.lineTo(h,a+t-r),l.arcTo(h,a+t,h+r,a+t,r),l.lineTo(h+e-r,a+t),l.arcTo(h+e,a+t,h+e,a+t-r,r),l.lineTo(h+e,a+r),l.arcTo(h+e,a,h+e-r,a,r),l.lineTo(h+r,a),l.arcTo(h,a,h,a+r,r),l.closePath()},this.drawFreeRect=function(h,a,e,t,r,n,s,i,o){var f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null;o=o||"#ffffff",l.beginPath(),l.moveTo(h,a),l.lineTo(e,t),l.lineTo(r,n),l.lineTo(s,i),l.closePath(),l.fillStyle=o,f!=null&&(l.lineWidth=2,l.strokeStyle=f,l.stroke()),l.fill()},this.drawFreeRectStroke=function(h,a,e,t,r,n,s,i,o){o=o||"#ffffff",l.beginPath(),l.moveTo(h,a),l.lineTo(e,t),l.lineTo(r,n),l.lineTo(s,i),l.lineWidth=1,l.strokeStyle=o,l.stroke()},this.drawTriangle=function(h,a,e,t){t=t||"#ffffff",l.beginPath(),l.moveTo(h,a-e),l.lineTo(h-e,a+e),l.lineTo(h+e,a+e),l.closePath(),l.fillStyle=t,l.fill()},this.drawSquare=function(h,a,e,t){t=t||"#ffffff",l.beginPath(),l.moveTo(h-e,a-e),l.lineTo(h-e,a+e),l.lineTo(h+e,a+e),l.lineTo(h+e,a-e),l.closePath(),l.fillStyle=t,l.fill()},this.drawPage=function(h,a,e,t){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;drawFreeRect(l,h+a,e,h+a-20,e+14,h+a-20,e+52,h+a,e+38,t,r?"rgba(255,255,255,0.2)":null)},this.drawCircle=function(h,a,e,t){t=t||"white",e=e||1,l.beginPath(),l.arc(h,a,e,0,2*Math.PI),l.fillStyle=t,l.fill()},this.drawBullet=function(h,a){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:74,t=l.createLinearGradient(h,a,h+e,a);t.addColorStop(0,"#1074fc"),t.addColorStop(1,"rgba(37, 172, 254, 0)"),l.beginPath(),l.arc(h,a,2,Math.PI/2,Math.PI/2*3),l.lineTo(h+e,a-2),l.lineTo(h+e,a+2),l.closePath(),l.fillStyle=t,l.fill(),l.fillStyle=t},this.getCurvePoints=function(h,a,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.5,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,n=arguments.length>5&&arguments[5]!==void 0?arguments[5]:16,s=[],i=[],o,f,c,g,v,x,y,A,F,w,m,T,M;for(s=h.slice(0),r?(s.unshift(h[h.length-1]),s.unshift(h[h.length-2]),s.unshift(h[h.length-1]),s.unshift(h[h.length-2]),s.push(h[0]),s.push(h[1])):(s.unshift(h[1]),s.unshift(h[0]),s.push(h[h.length-2]),s.push(h[h.length-1])),M=2;M<s.length-4;M+=2)for(T=0;T<=n;T++)c=(s[M+2]-s[M-2])*t,g=(s[M+4]-s[M])*t,v=(s[M+3]-s[M-1])*t,x=(s[M+5]-s[M+1])*t,m=T/n,y=2*Math.pow(m,3)-3*Math.pow(m,2)+1,A=-(2*Math.pow(m,3))+3*Math.pow(m,2),F=Math.pow(m,3)-2*Math.pow(m,2)+m,w=Math.pow(m,3)-Math.pow(m,2),o=y*s[M]+A*s[M+2]+F*c+w*g,f=y*s[M+1]+A*s[M+3]+F*v+w*x,i.push(o),f>e?i.push(e):f<a?i.push(a):i.push(f);return i}};return u}},z=function(){var L=document.createElement("canvas"),u=L.getContext("2d"),d=u&&(u.backingStorePixelRatio||u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio)||1;return(window.devicePixelRatio||1)/d}();function U(L){var u=function(h,a){for(var e in h)h.hasOwnProperty(e)&&a(h[e],e)},d={fillRect:"all",clearRect:"all",strokeRect:"all",moveTo:"all",lineTo:"all",arc:[0,1,2],arcTo:"all",bezierCurveTo:"all",isPointinPath:"all",isPointinStroke:"all",quadraticCurveTo:"all",rect:"all",translate:"all",createRadialGradient:"all",createLinearGradient:"all"};z!==1&&(u(d,function(l,h){L[h]=function(a){return function(){var e=void 0,t=void 0,r=Array.prototype.slice.call(arguments);if(l==="all")r=r.map(function(n){return n*z});else if(Array.isArray(l))for(e=0,t=l.length;e<t;e++)r[l[e]]*=z;return a.apply(this,r)}}(L[h])}),L.stroke=function(l){return function(){this.lineWidth*=z,l.apply(this,arguments),this.lineWidth/=z}}(L.stroke),L.fillText=function(l){return function(){var h=Array.prototype.slice.call(arguments);h[1]*=z,h[2]*=z,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(a,e,t){return e*z+t}),l.apply(this,h),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(a,e,t){return e/z+t})}}(L.fillText),L.strokeText=function(l){return function(){var h=Array.prototype.slice.call(arguments);h[1]*=z,h[2]*=z,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(a,e,t){return e*z+t}),l.apply(this,h),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(a,e,t){return e/z+t})}}(L.strokeText))}function N(L){L.getContext=function(u){return function(d){var l=u.call(this,d);return d==="2d"&&z>1&&(this.style.height=this.height+"px",this.style.width=this.width+"px",this.width*=z,this.height*=z),l}}(L.getContext)}var J={name:"util.canvas.hidpi",extend:null,component:function(){return{polyfills:function(){U(CanvasRenderingContext2D.prototype),N(HTMLCanvasElement.prototype)},apply:function(d){U(d)},pixelRatio:z}}},q={name:"util.svg.element",extend:null,component:function(){var u=function d(){var l=[];this.create=function(h,a){this.element=document.createElementNS("http://www.w3.org/2000/svg",h),this.children=[],this.parent=null,this.styles={},this.attributes={},this.order=0,this.attr(a)},this.each=function(h){if(typeof h=="function"){for(var a=0,e=this.children.length;a<e;a++){var t=this.children[a];h.apply(t,[a,t])}return this.children}},this.get=function(h){return this.children[h]?this.children[h]:null},this.index=function(h){for(var a=0;a<this.children.length;a++)if(h==this.children[a])return a;return-1},this.append=function(h){return h instanceof d&&(h.parent&&h.remove(),this.children.push(h),h.parent=this),this},this.prepend=function(h){return this.insert(0,h)},this.insert=function(h,a){return a.parent&&a.remove(),this.children.splice(h,0,a),a.parent=this,this},this.remove=function(){for(var h=[],a=this.parent.children,e=0;e<a.length&&a[e]!=this;e++)h.push(a[e]);return this.parent.children=h,this},this.attr=function(h){if(!(typeof h>"u"||!h)){if(typeof h=="string")return this.attributes[h]||this.element.getAttribute(h);for(var a in h)this.attributes[a]=h[a],a.indexOf("xlink:")!=-1?this.element.setAttributeNS("http://www.w3.org/1999/xlink",a,h[a]):this.element.setAttribute(a,h[a]);return this}},this.css=function(h){var a=[];for(var e in h)this.styles[e]=h[e];for(var e in h)a.push(e+":"+h[e]);return this.attr({style:a.join(";")}),this},this.html=function(h){return this.element.innerHTML=h,this},this.text=function(h){for(var a=this.element.childNodes,e=0;e<a.length;e++)this.element.removeChild(a[e]);return this.element.appendChild(document.createTextNode(h)),this},this.on=function(h,a){var e=function(r){typeof a=="function"&&a.call(this,r)};return this.element.addEventListener(h,e,!1),l.push({type:h,callback:e}),this},this.off=function(h){if(h){for(var r=[],a=0,e=l.length;a<e;a++){var t=l[a];t.type!=h?r.push(t):this.element.removeEventListener(t.type,t.callback,!1)}l=r}else for(var a=0,e=l.length;a<e;a++){var t=l.shift();this.element.removeEventListener(t.type,t.callback,!1)}return this},this.hover=function(h,a){var e=function(n){typeof h=="function"&&h.call(this,n)},t=function(n){typeof a=="function"&&a.call(this,n)};return this.element.addEventListener("mouseover",e,!1),this.element.addEventListener("mouseout",t,!1),l.push({type:"mouseover",callback:e}),l.push({type:"mouseout",callback:t}),this},this.size=function(){var h={width:0,height:0},a=this.element.getBoundingClientRect();if(!a||a.width==0&&a.height==0){for(var e=["height","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"],t=["width","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],r=window.getComputedStyle(this.element),n=0;n<e.length;n++)h.height+=parseFloat(r[e[n]]);for(var n=0;n<t.length;n++)h.width+=parseFloat(r[t[n]]);h.width=h.width||this.element.getAttribute("width"),h.height=h.height||this.element.getAttribute("height")}else h.width=a.width,h.height=a.height;return isNaN(h.width)&&(h.width=0),isNaN(h.height)&&(h.height=0),h},this.is=function(h){return this instanceof jui.include(h)}};return u}},H={name:"util.svg.element.transform",extend:"util.svg.element",component:function(){var u=k.include("util.base"),d=function(){var h={translate:null,scale:null,rotate:null,skew:null,matrix:null};function a(t){var r=[];for(var n in h)h[n]&&r.push(h[n]);t.attr({transform:r.join(" ")})}function e(t){for(var r=[],n=0;n<t.length;n++)r.push(t[n]);return r.join(",")}this.translate=function(){return h.translate="translate("+e(arguments)+")",a(this),this},this.rotate=function(t,r,n){if(arguments.length==1)var s=t;else if(arguments.length==3)var s=t+" "+r+","+n;return h.rotate="rotate("+s+")",a(this),this},this.scale=function(){return h.scale="scale("+e(arguments)+")",a(this),this},this.skew=function(){return h.skew="skew("+e(arguments)+")",a(this),this},this.matrix=function(){return h.matrix="matrix("+e(arguments)+")",a(this),this},this.data=function(t){var r=this.attr("transform"),n={translate:/[^translate()]+/g,rotate:/[^rotate()]+/g,scale:/[^scale()]+/g,skew:/[^skew()]+/g,matrix:/[^matrix()]+/g};return u.typeCheck("string",r)?r.match(n[t])[0]:null}};return d}},j={name:"util.svg.element.path",extend:"util.svg.element.transform",component:function(){var u=k.include("util.base"),d=function(){var h=[];this.moveTo=function(a,e,t){return h.push((t||"m")+a+","+e),this},this.MoveTo=function(a,e){return this.moveTo(a,e,"M")},this.lineTo=function(a,e,t){return h.push((t||"l")+a+","+e),this},this.LineTo=function(a,e){return this.lineTo(a,e,"L")},this.hLineTo=function(a,e){return h.push((e||"h")+a),this},this.HLineTo=function(a){return this.hLineTo(a,"H")},this.vLineTo=function(a,e){return h.push((e||"v")+a),this},this.VLineTo=function(a){return this.vLineTo(a,"V")},this.curveTo=function(a,e,t,r,n,s,i){return h.push((i||"c")+a+","+e+" "+t+","+r+" "+n+","+s),this},this.CurveTo=function(a,e,t,r,n,s){return this.curveTo(a,e,t,r,n,s,"C")},this.sCurveTo=function(a,e,t,r,n){return h.push((n||"s")+a+","+e+" "+t+","+r),this},this.SCurveTo=function(a,e,t,r){return this.sCurveTo(a,e,t,r,"S")},this.qCurveTo=function(a,e,t,r,n){return h.push((n||"q")+a+","+e+" "+t+","+r),this},this.QCurveTo=function(a,e,t,r){return this.qCurveTo(a,e,t,r,"Q")},this.tCurveTo=function(a,e,t,r,n){return h.push((n||"t")+a+","+e+" "+t+","+r),this},this.TCurveTo=function(a,e,t,r){return this.tCurveTo(a,e,t,r,"T")},this.arc=function(a,e,t,r,n,s,i,o){return r=r?1:0,n=n?1:0,h.push((o||"a")+a+","+e+" "+t+" "+r+","+n+" "+s+","+i),this},this.Arc=function(a,e,t,r,n,s,i){return this.arc(a,e,t,r,n,s,i,"A")},this.closePath=function(a){return h.push(a||"z"),this},this.ClosePath=function(){return this.closePath("Z")},this.join=function(){h.length>0&&(this.attr({d:h.join(" ")}),h=[])},this.length=function(){var a=u.createId(),e=h.join(" "),t=document.createElement("svg"),r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttributeNS(null,"id",a),r.setAttributeNS(null,"d",e),t.appendChild(r),document.body.appendChild(t);var n=document.getElementById(a).getTotalLength();return document.body.removeChild(t),n}};return d}},it={name:"util.svg.element.path.rect",extend:"util.svg.element.path",component:function(){var u=function(){this.round=function(l,h,a,e,t,r){a=a||0,e=e||0,t=t||0,r=r||0,this.MoveTo(0,a).Arc(a,a,0,0,1,a,0).HLineTo(l-e).Arc(e,e,0,0,1,l,e).VLineTo(h-t).Arc(t,t,0,0,1,l-t,h).HLineTo(r).Arc(r,r,0,0,1,0,h-r).ClosePath().join()}};return u}},Z={name:"util.svg.element.path.symbol",extend:"util.svg.element.path",component:function(){var u=function(){var l="";this.template=function(h,a){var e=h,t=half_r=h/2,r=a/2,n="a"+half_r+","+half_r+" 0 1,1 "+e+",0",s="a"+half_r+","+half_r+" 0 1,1 "+-e+",0",i={triangle:["m0,"+-r,"l"+t+","+a,"l"+-h+",0","l"+t+","+-a].join(" "),rect:["m"+-t+","+-r,"l"+h+",0","l0,"+a,"l"+-h+",0","l0,"+-a].join(" "),cross:["m"+-t+","+-r,"l"+h+","+a,"m0,"+-a,"l"+-h+","+a].join(" "),circle:["m"+-e+",0",n,s].join(" ")};return i.rectangle=i.rect,i},this.join=function(){l.length>0&&(this.attr({d:l}),l="")},this.add=function(h,a,e){l+=" M"+h+","+a+e},this.triangle=function(h,a,e,t){return this.MoveTo(h,a).moveTo(0,-t/2).lineTo(e/2,t).lineTo(-e,0).lineTo(e/2,-t)},this.rect=this.rectangle=function(h,a,e,t){return this.MoveTo(h,a).moveTo(-e/2,-t/2).lineTo(e,0).lineTo(0,t).lineTo(-e,0).lineTo(0,-t)},this.cross=function(h,a,e,t){return this.MoveTo(h,a).moveTo(-e/2,-t/2).lineTo(e,t).moveTo(0,-t).lineTo(-e,t)},this.circle=function(h,a,e){return this.MoveTo(h,a).moveTo(-e,0).arc(e/2,e/2,0,1,1,e,0).arc(e/2,e/2,0,1,1,-e,0)}};return u}},ut={name:"util.svg.element.poly",extend:"util.svg.element.transform",component:function(){var u=function(){var l=[];this.point=function(h,a){return l.push(h+","+a),this},this.join=function(){if(l.length>0){var h=l[0];l.push(h),this.attr({points:l.join(" ")}),l=[]}}};return u}};k.use(q,H,j,Z,it,ut);var at={name:"util.svg.base",extend:null,component:function(){var u=k.include("util.base"),d=k.include("util.svg.element"),l=k.include("util.svg.element.transform"),h=k.include("util.svg.element.path"),a=k.include("util.svg.element.path.symbol"),e=k.include("util.svg.element.path.rect"),t=k.include("util.svg.element.poly"),r=null,n=function(){this.create=function(i,o,f,c){return i.create(o,f),i},this.createChild=function(i,o,f,c){return this.create(i,o,f,c)},this.custom=function(i,o,f){return this.create(new d,i,o,f)},this.defs=function(i){return this.create(new d,"defs",null,i)},this.symbol=function(i,o){return this.create(new d,"symbol",i,o)},this.g=this.group=function(i,o){return this.create(new l,"g",i,o)},this.marker=function(i,o){return this.create(new d,"marker",i,o)},this.a=function(i,o){return this.create(new l,"a",i,o)},this.switch=function(i,o){return this.create(new d,"switch",i,o)},this.use=function(i){return this.create(new d,"use",i)},this.rect=function(i,o){return this.create(new l,"rect",i,o)},this.line=function(i,o){return this.create(new l,"line",i,o)},this.circle=function(i,o){return this.create(new l,"circle",i,o)},this.text=function(i,o){return arguments.length==2?u.typeCheck("function",o)?this.create(new l,"text",i,o):this.create(new l,"text",i).text(o):this.create(new l,"text",i)},this.textPath=function(i,o){return u.typeCheck("string",o)?this.create(new d,"textPath",i).text(o):this.create(new d,"textPath",i)},this.tref=function(i,o){return u.typeCheck("string",o)?this.create(new d,"tref",i).text(o):this.create(new d,"tref",i)},this.tspan=function(i,o){return u.typeCheck("string",o)?this.create(new d,"tspan",i).text(o):this.create(new d,"tspan",i)},this.ellipse=function(i,o){return this.create(new l,"ellipse",i,o)},this.image=function(i,o){return this.create(new l,"image",i,o)},this.path=function(i,o){return this.create(new h,"path",i,o)},this.pathSymbol=function(i,o){return this.create(new a,"path",i,o)},this.pathRect=function(i,o){return this.create(new e,"path",i,o)},this.polyline=function(i,o){return this.create(new t,"polyline",i,o)},this.polygon=function(i,o){return this.create(new t,"polygon",i,o)},this.pattern=function(i,o){return this.create(new d,"pattern",i,o)},this.mask=function(i,o){return this.create(new d,"mask",i,o)},this.clipPath=function(i,o){return this.create(new d,"clipPath",i,o)},this.linearGradient=function(i,o){return this.create(new d,"linearGradient",i,o)},this.radialGradient=function(i,o){return this.create(new d,"radialGradient",i,o)},this.filter=function(i,o){return this.create(new d,"filter",i,o)},this.foreignObject=function(i,o){return this.create(new l,"foreignObject",i,o)},this.stop=function(i){return this.createChild(new d,"stop",i)},this.animate=function(i){return this.createChild(new d,"animate",i)},this.animateColor=function(i){return this.createChild(new d,"animateColor",i)},this.animateMotion=function(i){return this.createChild(new d,"animateMotion",i)},this.animateTransform=function(i){return this.createChild(new d,"animateTransform",i)},this.mpath=function(i){return this.createChild(new d,"mpath",i)},this.set=function(i){return this.createChild(new d,"set",i)},this.feBlend=function(i){return this.createChild(new d,"feBlend",i)},this.feColorMatrix=function(i){return this.createChild(new d,"feColorMatrix",i)},this.feComponentTransfer=function(i){return this.createChild(new d,"feComponentTransfer",i)},this.feComposite=function(i){return this.createChild(new d,"feComposite",i)},this.feConvolveMatrix=function(i){return this.createChild(new d,"feConvolveMatrix",i)},this.feDiffuseLighting=function(i){return this.createChild(new d,"feDiffuseLighting",i)},this.feDisplacementMap=function(i){return this.createChild(new d,"feDisplacementMap",i)},this.feFlood=function(i){return this.createChild(new d,"feFlood",i)},this.feGaussianBlur=function(i){return this.createChild(new d,"feGaussianBlur",i)},this.feImage=function(i){return this.createChild(new d,"feImage",i)},this.feMerge=function(i,o){return this.createChild(new d,"feMerge",i,o)},this.feMergeNode=function(i){return this.createChild(new d,"feMergeNode",i)},this.feMorphology=function(i){return this.createChild(new d,"feMorphology",i)},this.feOffset=function(i){return this.createChild(new d,"feOffset",i)},this.feSpecularLighting=function(i){return this.createChild(new d,"feSpecularLighting",i)},this.feTile=function(i){return this.createChild(new d,"feTile",i)},this.feTurbulence=function(i){return this.createChild(new d,"feTurbulence",i)}};return n.create=function(s,i,o){return r==null&&(r=new n),r.custom(s,i,o)},n}};k.use(K,Q,at);var xt={name:"util.svg.base3d",extend:"util.svg.base",component:function(){var u=k.include("util.base"),d=k.include("util.math"),l=k.include("util.color"),h=function(){this.rect3d=function(e,t,r,n,s){var i=this,o=d.radian(n),f=0,c=0,g=t,v=r,x=Math.cos(o)*s,y=Math.sin(o)*s,A=t+x,F=r+y,w=i.group({},function(){i.path({fill:l.lighten(e,.15),stroke:l.lighten(e,.15)}).MoveTo(x,f).LineTo(A,c).LineTo(g,y).LineTo(f,y),i.path({fill:e,stroke:e}).MoveTo(f,y).LineTo(f,F).LineTo(g,F).LineTo(g,y),i.path({fill:l.darken(e,.2),stroke:l.darken(e,.2)}).MoveTo(g,F).LineTo(A,v).LineTo(A,c).LineTo(g,y)});return w},this.cylinder3d=function(e,t,r,n,s,c){var o=this,f=d.radian(n),c=c==null?1:c==0?.01:c,g=t/2,v=g*c,x=Math.cos(f)*s/2,y=Math.sin(f)*s/2,A=u.createId("cylinder3d"),F=o.group({},function(){o.ellipse({fill:l.darken(e,.05),"fill-opacity":.85,stroke:l.darken(e,.05),rx:g,ry:y,cx:g,cy:r}).translate(x,y),o.path({fill:"url(#"+A+")","fill-opacity":.85,stroke:e}).MoveTo(g-v,y).LineTo(0,r).Arc(g,y,0,0,0,t,r).LineTo(g+v,y).Arc(g+v,y,0,0,1,g-v,y).translate(x,y),o.ellipse({fill:l.lighten(e,.2),"fill-opacity":.95,stroke:l.lighten(e,.2),rx:g*c,ry:y*c,cx:g,cy:y}).translate(x,y),o.linearGradient({id:A,x1:"100%",x2:"0%",y1:"0%",y2:"0%"},function(){o.stop({offset:"0%","stop-color":l.lighten(e,.15)}),o.stop({offset:"33.333333333333336%","stop-color":l.darken(e,.2)}),o.stop({offset:"66.66666666666667%","stop-color":l.darken(e,.2)}),o.stop({offset:"100%","stop-color":l.lighten(e,.15)})})});return F}};return h}};k.use(xt);var lt={name:"util.svg",extend:"util.svg.base3d",component:function(){var u=k.include("util.base"),d=k.include("util.svg.element"),l=k.include("util.svg.element.transform"),h=k.include("util.svg.element.path"),a=k.include("util.svg.element.poly"),e=function(r,n){var s=this,i=null,o=null,f=null,c={},g=0,v=!1;function x(){s.root=i=new d,o=new l,f=new l,i.create("svg",n),o.create("g"),f.create("g"),o.translate(.5,.5),f.translate(.5,.5),r.appendChild(i.element),i.append(o),i.append(f)}function y(w){var m=w.children;F(m)&&m.sort(function(p,b){return p.order-b.order});for(var T=0,M=m.length;T<M;T++){var B=m[T];B&&(B.children.length>0&&y(B),(B instanceof h||B instanceof a)&&B.join(),B.parent==w&&w.element.appendChild(B.element))}}function A(w){for(var m=w.children,T=0,M=m.length;T<M;T++){var B=m[T];B&&(B.off(),B.children.length>0&&A(B))}}function F(w){for(var m=0,T=w.length;m<T;m++)if(w[m].order>0)return!0;return!1}this.create=function(w,m,T,M){return w.create(m,T),g==0?o.append(w):c[g].append(w),u.typeCheck("function",M)&&(g++,c[g]=w,M.call(w),g--),w},this.createChild=function(w,m,T,M){if(w.parent==o)throw new Error("JUI_CRITICAL_ERR: Parents are required elements of the '"+m+"'");return this.create(w,m,T,M)},this.size=function(){if(arguments.length==2){var w=arguments[0],m=arguments[1];i.attr({width:w,height:m})}else return i.size()},this.clear=function(w){o.each(function(){this.element.parentNode&&o.element.removeChild(this.element)}),A(o),w===!0&&(f.each(function(){this.element.parentNode&&f.element.removeChild(this.element)}),A(f))},this.reset=function(w){this.clear(w),o.children=[],w===!0&&(f.children=[])},this.render=function(w){this.clear(),y(v===!1||w===!0?i:o),v=!0},this.download=function(w){u.typeCheck("string",w)&&(w=w.split(".")[0]);var m=document.createElement("a");m.download=w?w+".svg":"svg.svg",m.href=this.toDataURI(),document.body.appendChild(m),m.click(),m.parentNode.removeChild(m)},this.downloadImage=function(w,m){m=m||"image/png";var T=new Image,M=this.size(),B=this.toDataURI().replace('width="100%"','width="'+M.width+'"').replace('height="100%"','height="'+M.height+'"');T.onload=function(){var p=document.createElement("canvas");p.width=T.width,p.height=T.height;var b=p.getContext("2d");b.drawImage(T,0,0);var P=p.toDataURL(m);u.typeCheck("string",w)&&(w=w.split(".")[0]);var E=document.createElement("a");E.download=w?w+".png":"svg.png",E.href=P,document.body.appendChild(E),E.click(),E.parentNode.removeChild(E)},T.src=B},this.exportCanvas=function(w){var m=new Image,T=this.size(),M=this.toDataURI().replace('width="100%"','width="'+T.width+'"').replace('height="100%"','height="'+T.height+'"');m.onload=function(){w.width=m.width,w.height=m.height;var B=w.getContext("2d");B.drawImage(m,0,0)},m.src=M},this.toXML=function(){var w=r.innerHTML;return w=w.replace('xmlns="http://www.w3.org/2000/svg"',""),['<?xml version="1.0" encoding="utf-8"?>',w.replace("<svg ",'<svg xmlns="http://www.w3.org/2000/svg" ')].join(`
`)},this.toDataURI=function(){var w=this.toXML();return(u.browser.mozilla||u.browser.msie)&&(w=encodeURIComponent(w)),u.browser.msie?"data:image/svg+xml,"+w:"data:image/svg+xml;utf8,"+w},this.autoRender=function(w,m){g>0||(m?o.append(w):f.append(w))},this.getTextSize=function(w,m){if(w=="")return{width:0,height:0};m=m||{};var T=document.body||i.element,M=document.createElementNS("http://www.w3.org/2000/svg","svg");M.setAttributeNS(null,"width",500),M.setAttributeNS(null,"height",100),M.setAttributeNS(null,"x",-2e4),M.setAttributeNS(null,"y",-2e4);var B=document.createElementNS("http://www.w3.org/2000/svg","text");B.setAttributeNS(null,"x",-200),B.setAttributeNS(null,"y",-200),B.appendChild(document.createTextNode(w)),m.fontSize&&B.setAttributeNS(null,"font-size",m.fontSize),m.fontFamily&&B.setAttributeNS(null,"font-family",m.fontFamily),m.bold&&B.setAttributeNS(null,"font-weight",m.bold),m.style&&B.setAttributeNS(null,"font-style",m.style),M.appendChild(B),T.appendChild(M);var p=B.getBoundingClientRect();return T.removeChild(M),{width:p.width,height:p.height}},x()};return e.createObject=function(t){var r=new d;if(r.create(t.type,t.attr),t.children instanceof Array)for(var n=0,s=t.children.length;n<s;n++)r.append(e.createObject(t.children[n]));return r},e}};k.use([K]);var Ct={name:"util.scale.linear",extend:null,component:function(){var u=k.include("util.math"),d=function l(){var h=[0,1],a=[0,1],e=!1,t=!1,r={},n=null,s=null,i=null,o=null,f=null,c=null,g=null,v=null,x=0,y=null,A=null;function F(w){if(o<w)return t?F(o):a[0]+Math.abs(w-h[0])*x;if(i>w)return t?F(i):a[0]-Math.abs(w-h[0])*x;var m=(w-h[0])/g;return y(m)}return F.cache=function(){return r},F.min=function(){return Math.min.apply(Math,h)},F.max=function(){return Math.max.apply(Math,h)},F.rangeMin=function(){return Math.min.apply(Math,a)},F.rangeMax=function(){return Math.max.apply(Math,a)},F.rate=function(w,m){return F(F.max()*(w/m))},F.clamp=function(w){t=w||!1},F.domain=function(w){if(!arguments.length)return h;for(var m=0;m<w.length;m++)h[m]=w[m];return i=F.min(),o=F.max(),g=h[1]-h[0],this},F.range=function(w){if(!arguments.length)return a;for(var m=0;m<w.length;m++)a[m]=w[m];return n=u.interpolateRound(a[0],a[1]),s=u.interpolateNumber(a[0],a[1]),f=F.rangeMin(),c=F.rangeMax(),v=Math.abs(c-f),x=v/g,y=e?n:s,this},F.rangeRound=function(w){return e=!0,F.range(w)},F.rangeBand=function(){return A},F.invert=function(w){var m=l().domain(a).range(h);return m(w)},F.ticks=function(w,m,T,M){M=M||!1;var B=F.max();if(h[0]==0&&h[1]==0)return[];for(var p=u.nice(h[0],h[1],w||10,m||!1),b=[],P=M?p.max:p.min,E=M?p.min:p.max,rt=p.spacing,st=u.fixed(rt);M?E<=P:P<=E;)b.push(P),M?P=st.minus(P,rt):P=st.plus(P,rt);if(M){b[0]!=B&&b.unshift(B);for(var ct=0,gt=b.length;ct<gt;ct++)b[ct]=Math.abs(b[ct]-B)}else b[b.length-1]!=E&&P>E&&b.push(E),h[0]>h[1]&&b.reverse();var Bt=F(b[0]),bt=F(b[1]);return A=Math.abs(bt-Bt),b},F};return d}},Mt={name:"util.scale.circle",extend:null,component:function(){var u=function(){var l=[],h=[],a=0;function e(t){}return e.domain=function(t){if(typeof t>"u")return l;for(var r=0;r<t.length;r++)l[r]=t[r];return this},e.range=function(t){if(typeof t>"u")return h;for(var r=0;r<t.length;r++)h[r]=t[r];return this},e.rangePoints=function(t,r){r=r||0;for(var n=l.length,s=(t[1]-t[0]-r)/n,i=[],o=0;o<l.length;o++)o==0?i[o]=t[0]+r/2+s/2:i[o]=i[o-1]+s;return h=i,a=s,e},e.rangeBands=function(t,r,n){r=r||0,n=n||0;for(var s=l.length,i=s-1,o=(t[1]-t[0])/i,f=[],c=0;c<l.length;c++)c==0?f[c]=t[0]:f[c]=o+f[c-1];return a=o,h=f,e},e.rangeBand=function(){return a},e};return u}},At={name:"util.scale.log",extend:null,component:function(){var u=k.include("util.base"),d=k.include("util.scale.linear"),l=function(a){var e=a||10,t=d(),r=[],n=null,s=null;function i(v){return v<0?-(Math.log(Math.abs(v))/Math.log(e)):v>0?Math.log(v)/Math.log(e):0}function o(v){return v<0?-Math.pow(e,Math.abs(v)):v>0?Math.pow(e,v):0}function f(v){return Math.pow(e,(v+"").length-1)<v}function c(v){return Math.pow(e,(v+"").length)}var g=function(x){var y=x;return x>n?y=n:x<s&&(y=s),t(i(y))};return u.extend(g,t),g.log=function(){for(var v=[],x=0;x<r.length;x++)v[x]=i(r[x]);return v},g.domain=function(v){if(!arguments.length)return r;for(var x=0;x<v.length;x++)r[x]=v[x];if(n=Math.max.apply(Math,r),s=Math.min.apply(Math,r),f(n)&&(r[1]=n=c(n)),f(Math.abs(s))){var y=c(Math.abs(s));r[0]=s=s<0?-y:y}return t.domain(g.log()),g},g.base=function(v){return t.domain(g.log()),g},g.invert=function(v){return o(t.invert(v))},g.ticks=function(v,x,y){var A=t.ticks(v,x,y||1e20,!0);A[A.length-1]<t.max()&&A.push(t.max());for(var F=[],w=0,m=A.length;w<m;w++)F[w]=o(A[w]);return F},g};return l}},Tt={name:"util.scale.ordinal",extend:null,component:function(){var u=function(){var l=[],h=[],a=0,e={},t=!1;function r(n){var s=""+n;if(typeof e[s]<"u")return e[s];for(var i=-1,o=0;o<l.length;o++)if(typeof n=="string"&&l[o]===n){i=o;break}return i>-1?(e[s]=h[i],h[i]):typeof h[n]<"u"?(e[s]=h[n],h[n]):null}return r.domain=function(n){if(typeof n>"u")return l;for(var s=0;s<n.length;s++)l[s]=n[s];return this},r.range=function(n){if(typeof n>"u")return h;for(var s=0;s<n.length;s++)h[s]=n[s];return this},r.rangePoints=function(n,s){s=s||0;for(var i=l.length,o=(n[1]-n[0]-s)/i,f=[],c=0;c<l.length;c++)c==0?f[c]=n[0]+s/2+o/2:f[c]=f[c-1]+o;return h=f,a=o,t=!0,r},r.rangeBands=function(n,s,i){s=s||0,i=i||0;for(var o=l.length,f=o-1,c=(n[1]-n[0])/f,g=[],v=0;v<l.length;v++)v==0?g[v]=n[0]:g[v]=c+g[v-1];return a=c,h=g,t=!1,r},r.rangeBand=function(){return a},r.invert=function(n){var s=Math.min(h[0],h[1]);if(t){s-=a/2;var i=n;i<s&&(i=s);var o=Math.abs(i-s)/a;return Math.floor(o)}else{var o=Math.abs(n-s)/a;return Math.ceil(o)}},r};return u}},Jt={name:"util.scale.time",extend:null,component:function(){var u=k.include("util.time"),d=k.include("util.scale.linear"),l=function(){var a=[],e,t=d(),r=t.domain;return t.domain=function(n){if(!arguments.length)return r.call(t);for(var s=0;s<n.length;s++)a[s]=+n[s];return r.call(t,a)},t.min=function(){return Math.min(a[0],a[a.length-1])},t.max=function(){return Math.max(a[0],a[a.length-1])},t.rate=function(n,s){return t(t.max()*(n/s))},t.ticks=function(n,s){for(var i=a[0],o=a[1],f=[];i<o;)f.push(new Date(+i)),i=u.add(i,n,s);f.push(new Date(+i));var c=t(f[1]),g=t(f[2]);return e=g-c,f},t.realTicks=function(n,s){var i=a[0],o=a[1],f=[],c=new Date(+i),g=null;for(n==u.years?g=new Date(c.getFullYear(),0,1):n==u.months?g=new Date(c.getFullYear(),c.getMonth(),1):n==u.days||n==u.weeks?g=new Date(c.getFullYear(),c.getMonth(),c.getDate()):n==u.hours?g=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),0,0,0):n==u.minutes?g=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),0,0):n==u.seconds?g=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),0):n==u.milliseconds&&(g=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds())),g=u.add(g,n,s);+g<+o;)f.push(new Date(+g)),g=u.add(g,n,s);var v=t(f[1]),x=t(f[2]);return e=x-v,f},t.rangeBand=function(){return e},t.invert=function(n){var s=d().domain(t.range()).range(t.domain());return new Date(s(n))},t};return l}};k.use([K,G]);var Pt={name:"util.scale",extend:null,component:function(){var u=k.include("util.math"),d=k.include("util.time"),l={circle:function(){var a=[],e=[],t=0;function r(n){}return r.domain=function(n){if(typeof n>"u")return a;for(var s=0;s<n.length;s++)a[s]=n[s];return this},r.range=function(n){if(typeof n>"u")return e;for(var s=0;s<n.length;s++)e[s]=n[s];return this},r.rangePoints=function(n,s){s=s||0;for(var i=a.length,o=(n[1]-n[0]-s)/i,f=[],c=0;c<a.length;c++)c==0?f[c]=n[0]+s/2+o/2:f[c]=f[c-1]+o;return e=f,t=o,r},r.rangeBands=function(n,s,i){s=s||0,i=i||0;for(var o=a.length,f=o-1,c=(n[1]-n[0])/f,g=[],v=0;v<a.length;v++)v==0?g[v]=n[0]:g[v]=c+g[v-1];return t=c,e=g,r},r.rangeBand=function(){return t},r},ordinal:function(){var a=[],e=[],t=0,r={};function n(s){var i=""+s;if(typeof r[i]<"u")return r[i];for(var o=-1,f=0;f<a.length;f++)if(typeof s=="string"&&a[f]===s){o=f;break}return o>-1?(r[i]=e[o],e[o]):typeof e[s]<"u"?(a[s]=s,r[i]=e[s],e[s]):null}return n.domain=function(s){if(typeof s>"u")return a;for(var i=0;i<s.length;i++)a[i]=s[i];return this},n.range=function(s){if(typeof s>"u")return e;for(var i=0;i<s.length;i++)e[i]=s[i];return this},n.rangePoints=function(s,i){i=i||0;for(var o=a.length,f=(s[1]-s[0]-i)/o,c=[],g=0;g<a.length;g++)g==0?c[g]=s[0]+i/2+f/2:c[g]=c[g-1]+f;return e=c,t=f,n},n.rangeBands=function(s,i,o){i=i||0,o=o||0;for(var f=a.length,c=f-1,g=(s[1]-s[0])/c,v=[],x=0;x<a.length;x++)x==0?v[x]=s[0]:v[x]=g+v[x-1];return t=g,e=v,n},n.rangeBand=function(){return t},n.invert=function(s){return Math.ceil(s/t)},n},time:function(){var a=[],e,t=l.linear(),r=t.domain;return t.domain=function(n){if(!arguments.length)return r.call(t);for(var s=0;s<n.length;s++)a[s]=+n[s];return r.call(t,a)},t.min=function(){return Math.min(a[0],a[a.length-1])},t.max=function(){return Math.max(a[0],a[a.length-1])},t.rate=function(n,s){return t(t.max()*(n/s))},t.ticks=function(n,s){for(var i=a[0],o=a[1],f=[];i<o;)f.push(new Date(+i)),i=d.add(i,n,s);f.push(new Date(+i));var c=t(f[1]),g=t(f[2]);return e=g-c,f},t.realTicks=function(n,s){var i=a[0],o=a[1],f=[],c=new Date(+i),g=null;for(n==d.years?g=new Date(c.getFullYear(),0,1):n==d.months?g=new Date(c.getFullYear(),c.getMonth(),1):n==d.days||n==d.weeks?g=new Date(c.getFullYear(),c.getMonth(),c.getDate()):n==d.hours?g=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),0,0,0):n==d.minutes?g=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),0,0):n==d.seconds?g=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),0):n==d.milliseconds&&(g=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds())),g=d.add(g,n,s);+g<+o;)f.push(new Date(+g)),g=d.add(g,n,s);var v=t(f[1]),x=t(f[2]);return e=x-v,f},t.rangeBand=function(){return e},t.invert=function(n){var s=l.linear().domain(t.range()).range(t.domain());return new Date(s(n))},t},log:function(a){var e=a||10,t=l.linear(),r=[],n=null,s=null;function i(v){return v<0?-(Math.log(Math.abs(v))/Math.log(e)):v>0?Math.log(v)/Math.log(e):0}function o(v){return v<0?-Math.pow(e,Math.abs(v)):v>0?Math.pow(e,v):0}function f(v){return Math.pow(e,(v+"").length-1)<v}function c(v){return Math.pow(e,(v+"").length)}var g=function(x){var y=x;return x>n?y=n:x<s&&(y=s),t(i(y))};return $.extend(g,t),g.log=function(){for(var v=[],x=0;x<r.length;x++)v[x]=i(r[x]);return v},g.domain=function(v){if(!arguments.length)return r;for(var x=0;x<v.length;x++)r[x]=v[x];if(n=Math.max.apply(Math,r),s=Math.min.apply(Math,r),f(n)&&(r[1]=n=c(n)),f(Math.abs(s))){var y=c(Math.abs(s));r[0]=s=s<0?-y:y}return t.domain(g.log()),g},g.base=function(v){return t.domain(g.log()),g},g.invert=function(v){return o(t.invert(v))},g.ticks=function(v,x,y){var A=t.ticks(v,x,y||1e20,!0);A[A.length-1]<t.max()&&A.push(t.max());for(var F=[],w=0,m=A.length;w<m;w++)F[w]=o(A[w]);return F},g},linear:function(){var a=[0,1],e=[0,1],t=!1,r=!1,n={},s=null,i=null,o=null,f=null,c=null,g=null,v=null,x=null,y=0,A=null,F=null;function w(m){if(f<m)return r?w(f):e[0]+Math.abs(m-a[0])*y;if(o>m)return r?w(o):e[0]-Math.abs(m-a[0])*y;var T=(m-a[0])/v;return A(T)}return w.cache=function(){return n},w.min=function(){return Math.min.apply(Math,a)},w.max=function(){return Math.max.apply(Math,a)},w.rangeMin=function(){return Math.min.apply(Math,e)},w.rangeMax=function(){return Math.max.apply(Math,e)},w.rate=function(m,T){return w(w.max()*(m/T))},w.clamp=function(m){r=m||!1},w.domain=function(m){if(!arguments.length)return a;for(var T=0;T<m.length;T++)a[T]=m[T];return o=w.min(),f=w.max(),v=a[1]-a[0],this},w.range=function(m){if(!arguments.length)return e;for(var T=0;T<m.length;T++)e[T]=m[T];return s=u.interpolateRound(e[0],e[1]),i=u.interpolateNumber(e[0],e[1]),c=w.rangeMin(),g=w.rangeMax(),x=Math.abs(g-c),y=x/v,A=t?s:i,this},w.rangeRound=function(m){return t=!0,w.range(m)},w.rangeBand=function(){return F},w.invert=function(m){var T=l.linear().domain(e).range(a);return T(m)},w.ticks=function(m,T,M,B){B=B||!1;var p=w.max();if(a[0]==0&&a[1]==0)return[];for(var b=u.nice(a[0],a[1],m||10,T||!1),P=[],E=B?b.max:b.min,rt=B?b.min:b.max,st=b.spacing,ct=u.fixed(st);B?rt<=E:E<=rt;)P.push(E),B?E=ct.minus(E,st):E=ct.plus(E,st);if(B){P[0]!=p&&P.unshift(p);for(var gt=0,Bt=P.length;gt<Bt;gt++)P[gt]=Math.abs(P[gt]-p)}else P[P.length-1]!=rt&&E>rt&&P.push(rt),a[0]>a[1]&&P.reverse();var bt=w(P[0]),It=w(P[1]);return F=Math.abs(It-bt),P},w}};return l}},Lt={name:"chart.vector",extend:null,component:function(){var u=function d(l,h,a){this.x=l||0,this.y=h||0,this.z=a||0,this.add=function(e){return e instanceof d?new d(this.x+e.x,this.y+e.y,this.z+e.z):new d(this.x+e,this.y+e,this.z+e)},this.subtract=function(e){return e instanceof d?new d(this.x-e.x,this.y-e.y,this.z-e.z):new d(this.x-e,this.y-e,this.z-e)},this.multiply=function(e){return e instanceof d?new d(this.x*e.x,this.y*e.y,this.z*e.z):new d(this.x*e,this.y*e,this.z*e)},this.dotProduct=function(e){var t=this.x*e.x+this.y*e.y+this.z*e.z;return Math.acos(t/(this.getMagnitude()*e.getMagnitude()))},this.crossProduct=function(e){return new d(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)},this.normalize=function(){var e=this.getMagnitude();this.x/=e,this.y/=e,this.z/=e},this.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}};return u}},_t={name:"chart.draw",extend:null,component:function(){var u=k.include("util.base"),d=function(){this.render=function(){if(!u.typeCheck("function",this.draw))throw new Error("JUI_CRITICAL_ERR: 'draw' method must be implemented");u.typeCheck("function",this.drawBefore)&&this.drawBefore();var h=this.draw();if(u.typeCheck("function",this.drawAnimate)){var a=this.grid||this.brush||this.widget||this.map;a.animate!==!1&&this.drawAnimate(h)}return u.typeCheck("function",this.drawAfter)&&this.drawAfter(h),h},this.format=function(){var h=this.grid||this.brush||this.widget,a=h.format||this.chart.format;return a.apply(this.chart,arguments)},this.balloonPoints=function(h,a,e,t){var r=[];return h=="top"?(r.push([0,0].join(",")),r.push([a,0].join(",")),r.push([a,e].join(",")),r.push([a/2+t/2,e].join(",")),r.push([a/2,e+t].join(",")),r.push([a/2-t/2,e].join(",")),r.push([0,e].join(",")),r.push([0,0].join(","))):h=="bottom"?(r.push([0,t].join(",")),r.push([a/2-t/2,t].join(",")),r.push([a/2,0].join(",")),r.push([a/2+t/2,t].join(",")),r.push([a,t].join(",")),r.push([a,t+e].join(",")),r.push([0,t+e].join(",")),r.push([0,t].join(","))):h=="left"?(r.push([0,0].join(",")),r.push([a,0].join(",")),r.push([a,e/2-t/2].join(",")),r.push([a+t,e/2].join(",")),r.push([a,e/2+t/2].join(",")),r.push([a,e].join(",")),r.push([0,e].join(",")),r.push([0,0].join(","))):h=="right"?(r.push([0,0].join(",")),r.push([a,0].join(",")),r.push([a,e].join(",")),r.push([0,e].join(",")),r.push([0,e/2+t/2].join(",")),r.push([0-t,e/2].join(",")),r.push([0,e/2-t/2].join(",")),r.push([0,0].join(","))):(r.push([0,0].join(",")),r.push([a,0].join(",")),r.push([a,e].join(",")),r.push([0,e].join(",")),r.push([0,0].join(","))),r.join(" ")},this.on=function(h,a){var e=this;return this.chart.on(h,function(){if(u.startsWith(h,"axis.")&&u.typeCheck("integer",e.axis.index)){var t=e.chart.axis(e.axis.index),r=arguments[0];u.typeCheck("object",t)&&arguments[1]==e.axis.index&&a.apply(e,[r])}else a.apply(e,arguments)},"render")},this.calculate3d=function(){var h=this.axis.area("width"),a=this.axis.area("height"),e=this.axis.area("x"),t=this.axis.area("y"),r=this.axis.depth,n=this.axis.degree,s=this.axis.perspective,i=arguments;u.typeCheck("integer",n.x)||(n.x=0),u.typeCheck("integer",n.y)||(n.y=0),u.typeCheck("integer",n.z)||(n.z=0);for(var o=0;o<i.length;o++)i[o].perspective=s,i[o].rotate(Math.max(h,a,r),n,e+h/2,t+a/2,r/2)}};return d.setup=function(){return{type:null,animate:!1}},d}},Et={name:"chart.axis",extend:null,component:function(){var u=k.include("util.base"),d=function(h,a,e){var t=this,r=null,n={},s={},i="",o=null,f="",c=null;function g(p,b){return p.x=v(p.x,h.area("width")),p.y=v(p.y,h.area("height")),p.width=v(p.width,h.area("width")),p.height=v(p.height,h.area("height")),p.x2=p.x+p.width,p.y2=p.y+p.height,p.x+=b.left||0,p.y+=b.top||0,p.x2-=b.right||0,p.y2-=b.bottom||0,p.width=p.x2-p.x,p.height=p.y2-p.y,p}function v(p,b){return u.typeCheck("string",p)&&p.indexOf("%")>-1?b*(parseFloat(p.replace("%",""))/100):p}function x(p,b){if((b=="x"||b=="y"||b=="z")&&!u.typeCheck("object",p[b]))return null;p[b]=p[b]||{},b=="x"?p[b].orient=p[b].orient=="top"?"top":"bottom":b=="y"?p[b].orient=p[b].orient=="right"?"right":"left":b=="z"?p[b].orient="center":b=="c"&&(p[b].type=p[b].type||"panel",p[b].orient="custom"),p[b].type=p[b].type||"block";var P=k.include("chart.grid."+p[b].type);k.defineOptions(P,p[b]);var E=new P(h,p,p[b]);E.chart=h,E.axis=p,E.grid=p[b],E.svg=h.svg;var rt=E.render();return t.isFull3D()||(p[b].orient=="left"?rt.root.translate(h.area("x")+t.area("x")-p[b].dist,h.area("y")):p[b].orient=="right"?rt.root.translate(h.area("x")+t.area("x2")+p[b].dist,h.area("y")):p[b].orient=="bottom"?rt.root.translate(h.area("x"),h.area("y")+t.area("y2")+p[b].dist):p[b].orient=="top"?rt.root.translate(h.area("x"),h.area("y")+t.area("y")-p[b].dist):rt.root&&rt.root.translate(h.area("x")+t.area("x"),h.area("y")+t.area("y"))),rt.scale.type=p[b].type,rt.scale.root=rt.root,rt.scale}function y(p,b){if(b=="map"&&!u.typeCheck("object",p[b]))return null;p[b]=p[b]||{};var P=k.include("chart.map");k.defineOptions(P,p[b]),r==null&&(r=new P(h,p,p[b])),r.chart=h,r.axis=p,r.map=p[b],r.svg=h.svg;var E=r.render();return E.root.translate(h.area("x")+t.area("x"),h.area("y")+t.area("y")),E.scale.type=p[b].type,E.scale.root=E.root,E.scale}function A(p){var b=t.origin,P=t.buffer,E=Math.ceil(b.length/P);p<1?t.page=1:t.page=p>E?E:p,t.start=(t.page-1)*P,t.end=t.start+P,t.end>b.length&&(t.start=b.length-P,t.end=b.length),t.end<=b.length&&(t.start=t.start<0?0:t.start,t.data=b.slice(t.start,t.end),b.length>0&&t.page++)}function F(p,b){var P=t.origin;t.end=b>P.length?P.length:b,t.start=p<0?0:p,t.data=P.slice(t.start,t.end)}function w(){o&&(o.remove(),o=null),i="axis-clip-id-"+h.index+"."+e.index,o=h.svg.clipPath({id:i},function(){h.svg.rect({x:n.x,y:n.y,width:n.width,height:n.height})}),h.appendDefs(o),c&&(c.remove(),c=null),f="axis-clip-rect-id-"+h.index,c=h.svg.clipPath({id:f},function(){h.svg.rect({x:0,y:0,width:n.width,height:n.height})}),h.appendDefs(c)}function m(p){var b=t.area("y"),P=t.area("x");return p.chartY>b&&p.chartY<b+t.area("height")&&p.chartX>P&&p.chartX<P+t.area("width")?(p.axisX=p.chartX-P,p.axisY=p.chartY-b,!0):!1}function T(){var p=!1,b=e.index;h.on("chart.mousemove",function(P){m(P)?p||(h.emit("axis.mouseover",[P,b]),p=!0):p&&(h.emit("axis.mouseout",[P,b]),p=!1),m(P)&&h.emit("axis.mousemove",[P,b])}),h.on("bg.mousemove",function(P){!m(P)&&p&&(h.emit("axis.mouseout",[P,b]),p=!1)}),h.on("chart.mousedown",function(P){m(P)&&h.emit("axis.mousedown",[P,b])}),h.on("chart.mouseup",function(P){m(P)&&h.emit("axis.mouseup",[P,b])}),h.on("chart.click",function(P){m(P)&&h.emit("axis.click",[P,b])}),h.on("chart.dblclick",function(P){m(P)&&h.emit("axis.dblclick",[P,b])}),h.on("chart.rclick",function(P){m(P)&&h.emit("axis.rclick",[P,b])}),h.on("chart.mousewheel",function(P){m(P)&&h.emit("axis.mousewheel",[P,b])})}function M(){var p=h.theme("axisBorderWidth"),b=s.left+s.right,P=s.top+s.bottom,E=h.svg.rect({rx:h.theme("axisBorderRadius"),ry:h.theme("axisBorderRadius"),fill:h.theme("axisBackgroundColor"),"fill-opacity":h.theme("axisBackgroundOpacity"),stroke:h.theme("axisBorderColor"),"stroke-width":p,width:n.width+b-p,height:n.height+P-p,x:n.x-s.left,y:n.y-s.top});return E.translate(h.area("x"),h.area("y")),E}function B(){u.extend(t,{data:e.data,origin:e.origin,buffer:e.buffer,shift:e.shift,index:e.index,page:e.page,start:e.start,end:e.end,degree:e.degree,depth:e.depth,perspective:e.perspective}),t.origin=t.data,t.start>0||t.end>0?F(t.start,t.end):A(t.page),T(),t.reload(e)}this.getValue=function(p,b,P){var E=p[e.keymap[b]];return!u.typeCheck("undefined",E)||(E=p[b],!u.typeCheck("undefined",E))?E:P},this.reload=function(p){var b=h.area();u.extend(this,{x:p.x,y:p.y,z:p.z,c:p.c,map:p.map}),u.typeCheck("integer",p.padding)?s={left:p.padding,right:p.padding,bottom:p.padding,top:p.padding}:s=p.padding,n=g(u.extend(p.area,{x:0,y:0,width:b.width,height:b.height},!0),s),w(),this.root=M(),this.x=x(this,"x"),this.y=x(this,"y"),this.z=x(this,"z"),this.c=x(this,"c"),this.map=y(this,"map"),this.buffer=p.buffer,this.shift=p.shift,this.index=p.index,this.page=p.page,this.start=p.start,this.end=p.end,this.degree=p.degree,this.depth=p.depth,this.perspective=p.perspective},this.area=function(p){return u.typeCheck("undefined",n[p])?n:n[p]},this.padding=function(p){return u.typeCheck("undefined",s[p])?s:s[p]},this.get=function(p){var b={area:n,padding:s,clipId:i,clipRectId:f};return b[p]||e[p]},this.set=function(p,b,P){u.typeCheck("object",b)?P===!0?(a[p]=u.deepClone(b),e[p]=u.deepClone(b)):(u.extend(a[p],b),u.extend(e[p],b)):(a[p]=b,e[p]=b),h.isRender()&&h.render()},this.updateGrid=this.set,this.update=function(p){this.origin=u.typeCheck("array",p)?p:[p],this.page=1,this.start=0,this.end=0,this.screen(1)},this.screen=function(p){A(p),this.end<=this.origin.length&&h.isRender()&&h.render()},this.next=function(){var p=this.origin,b=this.buffer,P=this.shift;this.start+=P;var E=this.start+b>p.length;this.end=E?p.length:this.start+b,this.start=E?p.length-b:this.start,this.start=this.start<0?0:this.start,this.data=p.slice(this.start,this.end),h.isRender()&&h.render()},this.prev=function(){var p=this.origin,b=this.buffer,P=this.shift;this.start-=P;var E=this.start<0;this.end=E?b:this.start+b,this.start=E?0:this.start,this.data=p.slice(this.start,this.end),h.isRender()&&h.render()},this.zoom=function(p,b){p!=b&&(F(p,b),h.isRender()&&h.render())},this.isFull3D=function(){return!u.typeCheck(["undefined","null"],this.z)},B()};return d.setup=function(){return{extend:null,x:null,y:null,z:null,c:null,map:null,data:[],origin:[],keymap:{},area:{},padding:{top:0,bottom:0,left:0,right:0},buffer:1e4,shift:1,page:1,start:0,end:0,degree:{x:0,y:0,z:0},depth:0,perspective:.9}},d}};k.use([ht,lt]);var Dt={name:"chart.map",extend:null,component:function(){var u=k.include("util.base"),d=k.include("util.dom"),l=k.include("util.svg"),h=function(){var e=this,t={},r=null,n={},s=1,i=0,o=0;function f(m){for(var T=[],M=0,B=m.length;M<B;M++)if(u.typeCheck("object",m[M])){var p={};u.typeCheck("string",m[M].style)&&(p=P(m[M].style),delete m[M].style);var b=l.createObject({type:m[M].d!=null?"path":"polygon",attr:m[M]});b.attr(u.extend(p,{fill:e.chart.theme("mapPathBackgroundColor"),"fill-opacity":e.chart.theme("mapPathBackgroundOpacity"),stroke:e.chart.theme("mapPathBorderColor"),"stroke-width":e.chart.theme("mapPathBorderWidth"),"stroke-opacity":e.chart.theme("mapPathBorderOpacity")})),T.push({path:b,data:m[M]})}function P(E){for(var rt={},st=E.split(";"),ct=0;ct<st.length;ct++)if(st[ct].indexOf(":")!=-1){var gt=st[ct].split(":");rt[u.trim(gt[0])]=u.trim(gt[1])}return rt}return T}function c(m){if(u.typeCheck("string",m.id)){for(var T=[],M=m.childNodes,B=0,p=M.length;B<p;B++){var b=M[B],P=b.nodeName.toLowerCase();if(b.nodeType==1){if(P=="g")T=T.concat(c(b));else if(P=="path"||P=="polygon"){var E={group:m.id};for(var rt in b.attributes){var st=b.attributes[rt];st.specified&&v(st.name)&&(E[st.name]=x(st))}u.typeCheck("string",E.id)&&u.extend(E,y(E.id)),T.push(E)}}}return T}}function g(m){return u.typeCheck("array",t[m])||(t[m]=[],u.ajax({url:m,async:!1,success:function(M){var B=M.responseXML,p=B.getElementsByTagName("svg"),b=B.getElementsByTagName("style");if(p.length==1){for(var P=p[0].childNodes,E=0,rt=P.length;E<rt;E++){var st=P[E],ct=st.nodeName.toLowerCase();if(st.nodeType==1){if(ct=="g")t[m]=t[m].concat(c(st));else if(ct=="path"||ct=="polygon"){var gt={};for(var Bt in st.attributes){var bt=st.attributes[Bt];bt.specified&&v(bt.name)&&(gt[bt.name]=x(bt))}u.typeCheck("string",gt.id)&&u.extend(gt,y(gt.id)),t[m].push(gt)}}}for(var E=0;E<b.length;E++)e.svg.root.element.appendChild(b[E])}},fail:function(M){throw new Error("JUI_CRITICAL_ERR: Failed to load resource")}})),f(t[m])}function v(m){return m=="group"||m=="id"||m=="title"||m=="x"||m=="y"||m=="d"||m=="points"||m=="class"||m=="style"}function x(m){return m.name=="x"||m.name=="y"?parseFloat(m.value):m.value}function y(m){for(var T=e.axis.data,M=0;M<T.length;M++){var B=e.axis.getValue(T[M],"id",null);if(B==m)return T[M]}return null}function A(){for(var m=e.chart.svg.group(),T=g(e.map.path),M=0,B=T.length;M<B;M++){var p=T[M].path,b=T[M].data;m.append(p),u.typeCheck("string",b.id)&&(n[b.id]=T[M])}return m}function F(){var m=e.map.width,T=e.map.height,M=(m*s-m)/2,B=(T*s-T)/2;return{x:M+i,y:B+o}}function w(m,T){var M=e.chart;m.on("click",function(p){B(p),M.emit("map.click",[T,p])}),m.on("dblclick",function(p){B(p),M.emit("map.dblclick",[T,p])}),m.on("contextmenu",function(p){B(p),M.emit("map.rclick",[T,p]),p.preventDefault()}),m.on("mouseover",function(p){B(p),M.emit("map.mouseover",[T,p])}),m.on("mouseout",function(p){B(p),M.emit("map.mouseout",[T,p])}),m.on("mousemove",function(p){B(p),M.emit("map.mousemove",[T,p])}),m.on("mousedown",function(p){B(p),M.emit("map.mousedown",[T,p])}),m.on("mouseup",function(p){B(p),M.emit("map.mouseup",[T,p])});function B(p){var b=d.offset(M.root),P=p.pageX-b.left,E=p.pageY-b.top;p.bgX=P,p.bgY=E,p.chartX=P-M.padding("left"),p.chartY=E-M.padding("top")}}this.scale=function(m){if(u.typeCheck("string",m)){var T=null,M=null,B=null,p=null,b=F();if(u.typeCheck("object",n[m])){if(B=n[m].path,p=n[m].data,p.x!=null){var P=e.axis.getValue(p,"dx",0),E=parseFloat(p.x)+P;T=E*s-b.x}if(p.y!=null){var rt=e.axis.getValue(p,"dy",0),st=parseFloat(p.y)+rt;M=st*s-b.y}}return{x:T,y:M,path:B,data:p}}},this.scale.each=function(m){var T=this;for(var M in n)m.apply(T,[M,n[M]])},this.scale.size=function(){return{width:e.map.width,height:e.map.height}},this.scale.scale=function(m){return!m||m<0||(s=m,r.scale(s),this.view(i,o)),s},this.scale.view=function(m,T){var M={x:i,y:o};if(!u.typeCheck("number",m)||!u.typeCheck("number",T))return M;i=m,o=T;var B=F();return r.translate(-B.x,-B.y),{x:i,y:o}},this.draw=function(){var m=this.chart.svg.group();return s=this.map.scale,i=this.map.viewX,o=this.map.viewY,r=A(),m.append(r),this.map.scale!=1&&this.scale.scale(s),(this.map.viewX!=0||this.map.viewY!=0)&&this.scale.view(i,o),this.map.hide&&m.attr({visibility:"hidden"}),{root:m,scale:this.scale}},this.drawAfter=function(m){m.root.attr({"clip-path":"url(#"+this.axis.get("clipRectId")+")"}),setTimeout(function(){e.scale.each(function(T,M){w(M.path,M)})},1)}};return h.setup=function(){return{scale:1,viewX:0,viewY:0,hide:!1,path:"",width:-1,height:-1}},h}};k.use(ht,lt,Q,Et);var Ft={name:"chart.builder",extend:"core",component:function(){var u=k.include("util.base"),d=k.include("util.dom"),l=k.include("util.svg"),h=k.include("util.color"),a=k.include("chart.axis"),e=k.include("util.canvas.hidpi");u.resize(function(){for(var r=k.get("chart.builder"),n=0;n<r.length;n++)for(var s=r[n],i=0;i<s.length;i++)u.typeCheck("function",s[i].resize)&&s[i].resize()},1e3);var t=function(){var n=[],s=[],i=[],o=null,f,c,g,v={},x=!1,y=null,A={render:[],renderAll:[]},F={main:null,buffer:null,sub:null},w={},m=0;function T(C){var D=C.svg.size(),S={width:D.width-(f.left+f.right),height:D.height-(f.top+f.bottom),x:f.left,y:f.top};S.width<0&&(S.width=0),S.height<0&&(S.height=0),S.x2=S.x+S.width,S.y2=S.y+S.height,c=S}function M(C){s=u.deepClone(y.brush),i=u.deepClone(y.widget),o=C.svg.defs(),v={}}function B(C){for(var D=u.deepClone(y.axis,{data:!0,origin:!0}),S=0;S<D.length;S++)k.defineOptions(a,D[S]),D[S].index=S,n[S]?n[S].reload(D[S]):n[S]=new a(C,y.axis[S],D[S])}function p(C){var D=s;if(D!=null)for(var S=0;S<D.length;S++){var X=k.include("chart.brush."+D[S].type);k.defineOptions(X,D[S]);var R=n[D[S].axis];if(D[S].target)u.typeCheck("string",D[S].target)&&(D[S].target=[D[S].target]);else{var et=[];if(R)for(var mt in R.data[0])et.push(mt);D[S].target=et}D[S].index=S;var ot=new X(C,R,D[S]);ot.chart=C,ot.axis=R,ot.brush=D[S],ot.svg=C.svg,ot.canvas=F.buffer,ot.render()}}function b(C,D){var S=i;if(S!=null)for(var X=0;X<S.length;X++){var R=k.include("chart.widget."+S[X].type);k.defineOptions(R,S[X]),S[X].index=X;var et=new R(C,n[0],S[X]);if(et.chart=C,et.axis=n[0],et.widget=S[X],et.svg=C.svg,et.canvas=F.sub,x&&!et.isRender()&&D!==!0)return;var mt=et.render();et.isRender()||C.svg.autoRender(mt,!1)}}function P(C,D){var S=!1;D.on("click",function(R){X(R)?C.emit("chart.click",[R]):C.emit("bg.click",[R])}),D.on("dblclick",function(R){X(R)?C.emit("chart.dblclick",[R]):C.emit("bg.dblclick",[R])}),D.on("contextmenu",function(R){X(R)?C.emit("chart.rclick",[R]):C.emit("bg.rclick",[R]),R.preventDefault()}),D.on("mousemove",function(R){X(R)?S?C.emit("chart.mousemove",[R]):(C.emit("chart.mouseover",[R]),S=!0):(S&&(C.emit("chart.mouseout",[R]),S=!1),C.emit("bg.mousemove",[R]))}),D.on("mousedown",function(R){X(R)?C.emit("chart.mousedown",[R]):C.emit("bg.mousedown",[R])}),D.on("mouseup",function(R){X(R)?C.emit("chart.mouseup",[R]):C.emit("bg.mouseup",[R])}),D.on("mouseover",function(R){X(R)||C.emit("bg.mouseover",[R])}),D.on("mouseout",function(R){X(R)||C.emit("bg.mouseout",[R])}),D.on("mousewheel",function(R){X(R)?C.emit("chart.mousewheel",[R]):C.emit("bg.mousewheel",[R])});function X(R){var et=d.offset(C.root),mt=R.pageX-et.left,ot=R.pageY-et.top;if(R.bgX=mt,R.bgY=ot,R.chartX=mt-C.padding("left"),R.chartY=ot-C.padding("top"),!(R.chartX<0)&&!(R.chartX>C.area("width"))&&!(R.chartY<0)&&!(R.chartY>C.area("height")))return!0}}function E(C,D){for(var S=0;S<A.render.length;S++)C.off(A.render[S]);if(A.render=[],D===!0){for(var S=0;S<A.renderAll.length;S++)C.off(A.renderAll[S]);A.renderAll=[]}}function rt(C,D){if(!u.typeCheck("undefined",D)&&v[D])return"url(#"+v[D]+")";var S="gradient-"+m;C.attr.id=S;var X=l.createObject(C);return o.append(X),u.typeCheck("undefined",D)||(v[D]=S),"url(#"+S+")"}function st(C){if(u.typeCheck("string",C)){if(C=C.replace("url(#","").replace(")",""),v[C])return"url(#"+C+")";if(C.indexOf("pattern-")==-1)return!1;var D=C.split("-"),S=D.pop(),X=k.include("chart."+D.join("."));if(!X)return!1;var R=X[S];return typeof R=="function"&&(R=R.call(R)),R.attr&&!R.attr.id&&(R.attr.id=C),R=l.createObject(R),o.append(R),v[C]=C,"url(#"+C+")"}else{if(C.attr.id=C.attr.id||"pattern-"+m,v[C.attr.id])return"url(#"+C.attr.id+")";var R=l.createObject(C);return o.append(R),v[C.attr.id]=C.attr.id,"url(#"+C.attr.id+")"}}function ct(C){if(u.typeCheck("undefined",C))return"none";if(u.typeCheck("object",C))return C.type=="pattern"?st(C):rt(C);if(typeof C=="string"){var D=st(C);if(D)return D}var S=h.parse(C);return S==C?C:rt(S,C)}function gt(C){var D={};u.typeCheck("string",C)?(u.extend(D,k.include("chart.theme."+C)),u.extend(D,y.style)):u.typeCheck("object",C)&&(u.extend(g,y.style),u.extend(g,C),u.extend(D,g)),g=D}function Bt(C){y=u.deepClone(C.options,{data:!0,bind:!0});var D=y.padding;u.typeCheck("integer",D)?f={left:D,right:D,bottom:D,top:D}:f=D,u.typeCheck("array",y.axis)||(y.axis=[y.axis]),u.typeCheck("array",y.brush)||(y.brush=[y.brush]),u.typeCheck("array",y.widget)||(y.widget=[y.widget]),y.axis.length==0&&y.axis.push({data:[]});for(var S=0;S<y.axis.length;S++){var X=y.axis[S];u.extend(X,y.axis[X.extend],!0)}}function bt(){var C=y.icon;if(u.typeCheck(["string","array"],C.path)){for(var D=u.typeCheck("string",C.path)?[C.path]:C.path,S=[],X=0;X<D.length;X++){var R=D[X],et="url("+R+") ";R.indexOf(".eot")!=-1?et+="format('embedded-opentype')":R.indexOf(".woff")!=-1?et+="format('woff')":R.indexOf(".ttf")!=-1?et+="format('truetype')":R.indexOf(".svg")!=-1&&(et+="format('svg')"),S.push(et)}var mt="font-family: "+C.type+"; font-weight: normal; font-style: normal; src: "+S.join(",");(function(ot){var Yt=function(){var St=document.createElement("style");return St.appendChild(document.createTextNode("")),document.head.appendChild(St),St.sheet}();Yt.insertRule(ot,0)})("@font-face {"+mt+"}")}}function It(C,D){var S=/{([^{}]+)}/g,X=D.match(S);if(X!=null)for(var R=0;R<X.length;R++){var et=X[R].substring(1,X[R].length-1);D=D.replace(X[R],C.icon(et))}return D}function Ut(C){var D=C.svg.size();return{width:u.typeCheck("integer",y.width)?y.width:D.width,height:u.typeCheck("integer",y.height)?y.height:D.height}}function xe(C){C.style.position="relative",C.style.userSelect="none",C.style.webkitUserSelect="none",C.style.MozUserSelect="none",C.setAttribute("unselectable","on")}function Ce(C){var D=Ut(C),S=e.pixelRatio,X=function(mt){var ot=document.createElement("CANVAS");ot.width=D.width*S,ot.height=D.height*S,ot.style.position="absolute",ot.style.left="0px",ot.style.top="0px",ot.style.width=D.width+"px",ot.style.height=D.height+"px",ot.getContext&&(F[mt]=ot.getContext("2d"),e.apply(F[mt]),mt!="buffer"&&C.root.appendChild(ot)),mt=="sub"&&(ot.on=function(Yt,St){var Me=function(be){typeof St=="function"&&St.call(this,be)};return ot.addEventListener(Yt,Me,!1),this})};for(var R in F)X(R)}function Ot(C,D){var S=e.pixelRatio,X=Ut(C),R=F[D];R.restore(),R.clearRect(0,0,X.width*S,X.height*S),R.save(),D=="main"&&R.translate(c.x,c.y)}this.init=function(){m=this.index=k.size(),Bt(this),gt(y.theme),xe(this.root),this.svg=new l(this.root,{width:y.width,height:y.height,"buffered-rendering":"dynamic"}),y.canvas?(Ce(this),P(this,d.find(this.root,"CANVAS")[1])):P(this,this.svg.root),bt(),this.render()},this.get=function(C,D){var S={axis:n,brush:s,widget:i,padding:f,area:c};return S[C][D]?S[C][D]:S[C]||S},this.axis=function(C){return arguments.length==0?n:n[C]},this.area=function(C){return u.typeCheck("undefined",c[C])?c:c[C]},this.padding=function(C){return u.typeCheck("undefined",f[C])?f:f[C]},this.color=function(C,D){var S=null;if(arguments.length==1?u.typeCheck("string",C)?S=C:u.typeCheck("integer",C)&&(S=X(C)):u.typeCheck(["array","object"],D)?(S=D[C],u.typeCheck("integer",S)&&(S=X(S))):S=X(),v[S])return"url(#"+v[S]+")";function X(R){var et=g.colors,mt=R||C;return mt>et.length-1?et[et.length-1]:et[mt]}return ct(S)},this.icon=function(C){return k.include("chart.icon."+y.icon.type)[C]},this.text=function(C,D){return u.typeCheck("string",D)?D=It(this,D):u.typeCheck("undefined",D)&&(D=""),this.svg.text(C,D)},this.texts=function(C,D,S){for(var X=this.svg.group(),R=0;R<D.length;R++)if(u.typeCheck("string",D[R])){var et=(C["font-size"]||10)*(S||1);X.append(this.svg.text(u.extend({y:R*et},C,!0),It(this,D[R])))}return X},this.theme=function(C,D,S){if(arguments.length==0)return g;if(arguments.length==1)return C.indexOf("Color")>-1&&g[C]!=null?ct(g[C]):g[C];if(arguments.length==3){var X=C?D:S;return X.indexOf("Color")>-1&&g[X]!=null?ct(g[X]):g[X]}},this.format=function(){if(arguments.length!=0){var C=y.format;return u.typeCheck("function",C)?C.apply(this,arguments):arguments[0]}},this.on=function(C,D,S){!u.typeCheck("string",C)||!u.typeCheck("function",D)||(this.event.push({type:C.toLowerCase(),callback:D}),(S=="render"||S=="renderAll")&&A[S].push(D))},this.render=function(C){this.svg.reset(C),E(this,C),T(this),this.options.canvas&&(Ot(this,"main"),Ot(this,"buffer"),C&&Ot(this,"sub")),M(this),B(this),p(this),b(this,C),this.options.canvas&&F.main.drawImage(F.buffer.canvas,0,0),this.svg.root.css({"font-family":this.theme("fontFamily")+","+y.icon.type,background:this.theme("backgroundColor")}),this.svg.render(C),this.emit("render",[x]),x=!0},this.appendDefs=function(C){o.append(C)},this.addBrush=function(C){y.brush.push(C),this.isRender()&&this.render()},this.removeBrush=function(C){y.brush.splice(C,1),this.isRender()&&this.render()},this.updateBrush=function(C,D,S){S===!0?y.brush[C]=D:u.extend(y.brush[C],D),this.isRender()&&this.render()},this.addWidget=function(C){y.widget.push(C),this.isRender()&&this.render()},this.removeWidget=function(C){y.widget.splice(C,1),this.isRender()&&this.render()},this.updateWidget=function(C,D,S){S===!0?y.widget[C]=D:u.extend(y.widget[C],D),this.isRender()&&this.render()},this.setTheme=function(C){gt(C),this.isRender()&&this.render(!0)},this.setSize=function(C,D){if(arguments.length==2&&(y.width=C,y.height=D),this.svg.size(y.width,y.height),y.canvas)for(var S=e.pixelRatio,X=d.find(this.root,"CANVAS"),R=Ut(this),et=0;et<X.length;et++)X[et].width=R.width*S,X[et].height=R.height*S,X[et].style.width=R.width+"px",X[et].style.height=R.height+"px";this.isRender()&&this.render(!0)},this.isFullSize=function(){return y.width=="100%"||y.height=="100%",!0},this.resize=function(){this.isFullSize()&&this.setSize(),this.isRender()||this.render(!0)},this.isRender=function(){return x?y.render:!0},this.setCache=function(C,D){w[C]=D},this.getCache=function(C,D){return w[C]===void 0?D:w[C]}};return t.setup=function(){return{width:"100%",height:"100%",padding:{top:50,bottom:50,left:50,right:50},theme:"classic",style:{},brush:[],widget:[],axis:[],bind:null,format:null,render:!0,icon:{type:"classic",path:null},canvas:!1}},t}},Gt={name:"chart.plane",extend:"core",component:function(){var u=k.include("util.base"),d=k.include("chart.builder"),l=function(){var a=null,e=[],t=[],r=[],n=0,s={},i={};this.init=function(){var o=this.options,f={type:"range",step:o.step,line:o.line};s.x=u.extend({domain:o.x},f),s.y=u.extend({domain:o.y},f),s.x.orient="bottom",s.y.orient="left",s.z=u.extend({domain:o.z},f),s.depth=o.depth-o.padding*2,s.degree={x:o.dx,y:o.dy,z:o.dz},s.perspective=o.perspective,i.extend=0,i.x={hide:!0},i.y={hide:!0},i.z={hide:!0},o.dimension=="2d"&&(s.perspective=1,s.degree.x=0,s.degree.y=0,s.degree.z=0,s.z.hideText=!0)},this.push=function(o){u.typeCheck("array",o)&&(e[n]||e.push(u.extend({},n==0?s:i)),e[n].data||(e[n].data=[]),e[n].data.push(o))},this.commit=function(o,f){var c=this.options;t.push({type:"canvas.dot3d",color:n,axis:n,symbol:o||c.symbol,size:(f||c.r)*2}),n++},this.append=function(o,f,c){var g=this.options;e.push(u.extend({},n==0?s:i)),e[n].data=o,t.push({type:"canvas.dot3d",color:n,axis:n,symbol:f||g.symbol,size:(c||g.r)*2}),n++},this.render=function(){var o=this.options;if(o.dimension=="3d"&&r.push({type:"polygon.rotate3d"}),a!=null&&(a.root.innerHTML="",a=null),e.length==0&&e.push(s),a=d(this.root,{padding:o.padding,width:o.width,height:o.height,axis:e,brush:t,widget:r,canvas:!0,render:!1,style:{gridFaceBackgroundOpacity:.1}}),u.typeCheck("array",o.colors)){for(var f=[],c=0;c<o.colors.length;c++)f.push(a.color(o.colors[c]));a.setTheme({colors:f})}e=[],t=[],r=[],n=0,a.render()}};return l.setup=function(){return{dimension:"2d",width:500,height:500,depth:500,padding:50,x:[-100,100],y:[-100,100],z:[-100,100],step:4,line:!0,symbol:"dot",r:2,perspective:.9,dx:10,dy:5,dz:0,colors:null}},l}},Xt={name:"chart.animation",extend:"core",component:function(){var u=k.include("util.base"),d=k.include("chart.builder"),l=function(){var a=void 0,e=-1,t=0,r=0;this.init=function(){var n=this.options;if(a=n.interval,delete n.interval,n.axis.length&&n.axis.length>1)throw new Error("JUI_CRITICAL_ERR: the real-time module allows only a single axes");this.builder=d(this.selector,n)},this.run=function(n){var s=this,i=Date.now();if(r==0&&(r=i),i-t>a||a==0){var o=(i-t)/1e3;o>1&&(o=1),this.builder.setCache("tpf",o),this.builder.setCache("fps",1/o),typeof n=="function"&&n.call(this,i-r),this.render(),t=i}e=requestAnimationFrame(function(){s.run(n)})},this.stop=function(){e!=-1&&(cancelAnimationFrame(e),e=-1)},this.set=function(n,s,i){this.builder.axis(0).set(n,s,i)},this.update=function(n){this.builder.axis(0).update(n)},this.render=function(n){this.builder.render(n)}};return l.setup=function(){return u.extend({render:!1,canvas:!0,interval:0},Ft.component().setup(),!0)},l}};k.use([Lt,I,K]);var Rt={name:"chart.polygon.core",extend:null,component:function(){var u=k.include("util.base"),d=k.include("chart.vector"),l=k.include("util.transform"),h=k.include("util.math"),a=function(){this.perspective=.9,this.rotate=function(t,r,n,s,i){var o=this.perspective,f=new l(this.vertices),c=f.matrix("move3d",n,s,i);c=h.matrix3d(c,f.matrix("rotate3dx",r.x)),c=h.matrix3d(c,f.matrix("rotate3dy",r.y)),c=h.matrix3d(c,f.matrix("rotate3dz",r.z)),c=h.matrix3d(c,f.matrix("move3d",-n,-s,-i)),this.vertices=f.custom(c);for(var g=0,v=this.vertices.length;g<v;g++){var x=Math.abs(this.vertices[g][2]-t),y=h.scaleValue(x,0,t,o,1),A=new l,F=A.matrix("move3d",n,s,t/2);F=h.matrix3d(F,A.matrix("scale3d",y,y,y)),F=h.matrix3d(F,A.matrix("move3d",-n,-s,-t/2)),this.vertices[g]=h.matrix3d(F,this.vertices[g]),u.typeCheck("array",this.vectors)&&(this.vectors[g]==null?this.vectors[g]=new d(this.vertices[g][0],this.vertices[g][1],this.vertices[g][2]):(this.vectors[g].x=this.vertices[g][0],this.vectors[g].y=this.vertices[g][1],this.vectors[g].z=this.vertices[g][2]))}},this.min=function(){for(var t={x:this.vertices[0][0],y:this.vertices[0][1],z:this.vertices[0][2]},r=1,n=this.vertices.length;r<n;r++)t.x=Math.min(t.x,this.vertices[r][0]),t.y=Math.min(t.y,this.vertices[r][1]),t.z=Math.min(t.z,this.vertices[r][2]);return t},this.max=function(){for(var t={x:this.vertices[0][0],y:this.vertices[0][1],z:this.vertices[0][2]},r=1,n=this.vertices.length;r<n;r++)t.x=Math.max(t.x,this.vertices[r][0]),t.y=Math.max(t.y,this.vertices[r][1]),t.z=Math.max(t.z,this.vertices[r][2]);return t}};return a}};k.use(Rt);var Wt={name:"chart.polygon.grid",extend:"chart.polygon.core",component:function(){var u=function(l,h,a,e,t,r){t=t||0,r=r||0,h=t+h,a=r+a;var n={center:[new Float32Array([t,r,e,1]),new Float32Array([h,r,e,1]),new Float32Array([h,a,e,1]),new Float32Array([t,a,e,1])],horizontal:[new Float32Array([t,a,0,1]),new Float32Array([h,a,0,1]),new Float32Array([h,a,e,1]),new Float32Array([t,a,e,1])],vertical:[new Float32Array([h,r,0,1]),new Float32Array([h,a,0,1]),new Float32Array([h,a,e,1]),new Float32Array([h,r,e,1])]};this.vertices=n[l],this.vectors=[]};return u}};k.use(Rt);var Nt={name:"chart.polygon.line",extend:"chart.polygon.core",component:function(){var u=function(l,h,a,e,t,r){this.vertices=[new Float32Array([l,h,a,1]),new Float32Array([e,t,r,1])],this.vectors=[]};return u}};k.use(Rt);var $t={name:"chart.polygon.point",extend:"chart.polygon.core",component:function(){var u=function(l,h,a){this.vertices=[new Float32Array([l,h,a,1])],this.vectors=[]};return u}};k.use(Rt);var Ht={name:"chart.polygon.cube",extend:"chart.polygon.core",component:function(){var u=function(l,h,a,e,t,r){this.vertices=[new Float32Array([l,h,a,1]),new Float32Array([l+e,h,a,1]),new Float32Array([l+e,h,a+r,1]),new Float32Array([l,h,a+r,1]),new Float32Array([l,h+t,a,1]),new Float32Array([l+e,h+t,a,1]),new Float32Array([l+e,h+t,a+r,1]),new Float32Array([l,h+t,a+r,1])],this.faces=[[0,1,2,3],[3,2,6,7],[0,3,7,4],[1,2,6,5],[0,1,5,4],[4,5,6,7]],this.vectors=[]};return u}};k.use(_t);var jt={name:"chart.grid.draw2d",extend:"chart.draw",component:function(){var u=k.include("util.base"),d=function(){this.createGridX=function(h,a,e,t,r){var n=this.getLineOption(),s=this.chart.svg.group().translate(e,0),i=this.chart.theme("gridTickBorderSize");return s.append(this.line({y2:h=="bottom"?i:-i,stroke:this.color(t,"gridActiveBorderColor","gridXAxisBorderColor"),"stroke-width":this.chart.theme("gridTickBorderWidth")})),n&&this.drawValueLine(h,s,t,n,a,r),s},this.createGridY=function(h,a,e,t,r){var n=this.getLineOption(),s=this.chart.svg.group().translate(0,e),i=this.chart.theme("gridTickBorderSize");return s.append(this.line({x2:h=="left"?-i:i,stroke:this.color(t,"gridActiveBorderColor","gridYAxisBorderColor"),"stroke-width":this.chart.theme("gridTickBorderWidth")})),n&&this.drawValueLine(h,s,t,n,a,r),s},this.fillRectObject=function(h,a,e,t,r,n,s){a.type.indexOf("gradient")>-1?h.append(this.chart.svg.rect({x:t,y:r,height:s,width:n,fill:this.chart.color(a.fill?a.fill:"linear("+e+") "+this.chart.theme("gridPatternColor")+",0.5 "+this.chart.theme("backgroundColor")),"fill-opacity":this.chart.theme("gridPatternOpacity")})):a.type.indexOf("rect")>-1&&h.append(this.chart.svg.rect({x:t,y:r,height:s,width:n,fill:this.chart.color(a.fill?a.fill:this.chart.theme("gridPatternColor")),"fill-opacity":this.chart.theme("gridPatternOpacity")}))},this.drawAxisLine=function(h,a,e){var t=h=="top"||h=="bottom";a.append(this.chart.svg.line(u.extend({x1:0,y1:0,x2:0,y2:0,stroke:this.color(t?"gridXAxisBorderColor":"gridYAxisBorderColor"),"stroke-width":this.chart.theme(t?"gridXAxisBorderWidth":"gridYAxisBorderWidth"),"stroke-opacity":1},e)))},this.drawPattern=function(h,a,e,t){if(!this.grid.hide&&h&&a&&e){var r=this.getLineOption(),n=h=="left"||h=="right",s=this.chart.svg.group();if(s.translate(this.axis.area("x")+this.chart.area("x"),this.axis.area("y")+this.chart.area("y")),r&&(r.type.indexOf("gradient")>-1||r.type.indexOf("rect")>-1))for(var i=0;i<e.length-1;i+=2){var o=Math.abs(e[i+1]-e[i]),f=e[i]-(t?o/2:0),c=n?0:f,g=n?f:0,v=n?this.axis.area("width"):o,x=n?o:this.axis.area("height");this.fillRectObject(s,r,h,c,g,v,x)}}},this.drawBaseLine=function(h,a){var e=this.getGridSize(),t={};h=="bottom"||h=="top"?t={x1:e.start,x2:e.end}:(h=="left"||h=="right")&&(t={y1:e.start,y2:e.end}),this.drawAxisLine(h,a,t)},this.drawValueLine=function(h,a,e,t,r,n){var s={},i=!1;if(h=="top"?(i=this.checkDrawLineY(r,n),s={x1:0,x2:0,y1:0,y2:this.axis.area("height")}):h=="bottom"?(i=this.checkDrawLineY(r,n),s={x1:0,x2:0,y1:0,y2:-this.axis.area("height")}):h=="left"?(i=this.checkDrawLineX(r,n),s={x1:0,x2:this.axis.area("width"),y1:0,y2:0}):h=="right"&&(i=this.checkDrawLineX(r,n),s={x1:0,x2:-this.axis.area("width"),y1:0,y2:0}),i){var o=this.line(u.extend({stroke:this.chart.theme(e,"gridActiveBorderColor","gridBorderColor"),"stroke-width":this.chart.theme(e,"gridActiveBorderWidth","gridBorderWidth")},s));if(t.type.indexOf("dashed")>-1){var f=this.chart.theme("gridBorderDashArray");o.attr({"stroke-dasharray":f=="none"||!f?"3,3":f})}a.append(o)}},this.drawValueText=function(h,a,e,t,r,n,s){this.grid.hideText||(h=="top"?a.append(this.getTextRotate(this.chart.text({x:n,y:-(this.chart.theme("gridTickBorderSize")+this.chart.theme("gridTickPadding")*2),dy:this.chart.theme("gridXFontSize")/3,fill:this.chart.theme(s,"gridActiveFontColor","gridXFontColor"),"text-anchor":"middle","font-size":this.chart.theme("gridXFontSize"),"font-weight":this.chart.theme("gridXFontWeight")},r))):h=="bottom"?a.append(this.getTextRotate(this.chart.text({x:n,y:this.chart.theme("gridTickBorderSize")+this.chart.theme("gridTickPadding")*2,dy:this.chart.theme("gridXFontSize")/3,fill:this.chart.theme(s,"gridActiveFontColor","gridXFontColor"),"text-anchor":"middle","font-size":this.chart.theme("gridXFontSize"),"font-weight":this.chart.theme("gridXFontWeight")},r))):h=="left"?a.append(this.getTextRotate(this.chart.text({x:-this.chart.theme("gridTickBorderSize")-this.chart.theme("gridTickPadding"),y:n,dy:this.chart.theme("gridYFontSize")/3,fill:this.chart.theme(s,"gridActiveFontColor","gridYFontColor"),"text-anchor":"end","font-size":this.chart.theme("gridYFontSize"),"font-weight":this.chart.theme("gridYFontWeight")},r))):h=="right"&&a.append(this.getTextRotate(this.chart.text({x:this.chart.theme("gridTickBorderSize")+this.chart.theme("gridTickPadding"),y:n,dy:this.chart.theme("gridYFontSize")/3,fill:this.chart.theme(s,"gridActiveFontColor","gridYFontColor"),"text-anchor":"start","font-size":this.chart.theme("gridYFontSize"),"font-weight":this.chart.theme("gridYFontWeight")},r))))},this.drawImage=function(h,a,e,t,r,n){if(u.typeCheck("function",this.grid.image)){var s=this.grid.image.apply(this.chart,[e,t]);if(u.typeCheck("object",s)){var i=this.chart.svg.image({"xlink:href":s.uri,width:s.width,height:s.height});h=="top"||h=="bottom"?i.attr({x:this.grid.type=="block"?this.scale.rangeBand()/2-s.width/2:-(s.width/2)}):(h=="left"||h=="right")&&i.attr({y:this.grid.type=="block"?this.scale.rangeBand()/2-s.height/2:-(s.height/2)}),h=="bottom"?i.attr({y:s.dist}):h=="top"?i.attr({y:-(s.dist+s.height)}):h=="left"?i.attr({x:-(s.dist+s.width)}):h=="right"&&i.attr({x:s.dist}),i.translate(r,n),a.append(i)}}}};return d}};k.use(_t,Wt,Nt,$t);var Vt={name:"chart.grid.draw3d",extend:"chart.draw",component:function(){var u=k.include("util.base"),d=k.include("chart.polygon.grid"),l=k.include("chart.polygon.line"),h=k.include("chart.polygon.point"),a=function(){this.createGridX=function(t,r,n,s,i){var o=this.getLineOption(),f=this.svg.group();return o&&this.drawValueLine(t,f,s,o,r,n,i),f},this.createGridY=function(t,r,n,s,i){var o=this.getLineOption(),f=this.svg.group();return o&&this.drawValueLine(t,f,s,o,r,n,i),f},this.drawCenter=function(t,r,n,s,i){var o=this.svg.group(),f=this.getLineOption();f&&this.drawValueLineCenter(o,r,f),this.drawValueTextCenter(o,r,n,s,i),t.append(o)},this.drawBaseLine=function(t,r){var n=this.svg.group();this.drawAxisLine(t,n),r.append(n)},this.drawAxisLine=function(t,r){var n=t=="top"||t=="bottom",s=n?"gridXAxisBorderColor":"gridYAxisBorderColor",i=n?"gridXAxisBorderWidth":"gridYAxisBorderWidth";t=="center"&&(s="gridZAxisBorderColor",i="gridZAxisBorderWidth");var o=this.svg.polygon({stroke:this.chart.theme(s),"stroke-width":this.chart.theme(i),"stroke-opacity":1,fill:this.chart.theme("gridFaceBackgroundColor"),"fill-opacity":this.chart.theme("gridFaceBackgroundOpacity")}),f=null,c=this.axis.area("width"),g=this.axis.area("height"),v=this.axis.area("x"),x=this.axis.area("y"),y=this.axis.depth;t=="center"?f=new d("center",c,g,y,v,x):n?(g=t=="bottom"?g:0,f=new d("horizontal",c,g,y,v,x)):(c=t=="right"?c:0,f=new d("vertical",c,g,y,v,x)),this.calculate3d(f);for(var A=0;A<f.vectors.length;A++)o.point(f.vectors[A].x,f.vectors[A].y);t=="center"?this.axis.get("y").hide!==!0&&r.append(o):r.append(o)},this.drawValueLine=function(t,r,n,s,i,o,f){var c=!1,g=this.axis.area("width"),v=this.axis.area("height"),x=this.axis.area("x"),y=this.axis.area("y"),A=this.axis.depth,F=null,w=null;if(t=="top"?(c=this.checkDrawLineY(i,f),F=new l(o,y,0,o,y,A),w=new l(o,y,A,o,y+v,A)):t=="bottom"?(c=this.checkDrawLineY(i,f),F=new l(o,y+v,0,o,y+v,A),w=new l(o,y+v,A,o,y,A)):t=="left"?(c=this.checkDrawLineX(i,f),F=new l(x,o,0,x,o,A),w=new l(x,o,A,x+g,o,A)):t=="right"&&(c=this.checkDrawLineX(i,f),F=new l(x+g,o,0,x+g,o,A),w=new l(x+g,o,A,x,o,A)),c){this.calculate3d(F,w);var m=this.line({stroke:this.chart.theme("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),x1:F.vectors[0].x,y1:F.vectors[0].y,x2:F.vectors[1].x,y2:F.vectors[1].y}),T=this.line({stroke:this.chart.theme("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),x1:w.vectors[0].x,y1:w.vectors[0].y,x2:w.vectors[1].x,y2:w.vectors[1].y});if(s.type.indexOf("dashed")>-1){var M=this.chart.theme("gridBorderDashArray"),B=M=="none"||!M?"3,3":M;m.attr({"stroke-dasharray":B}),T.attr({"stroke-dasharray":B})}r.append(m),this.axis.get("y").hide!==!0&&r.append(T)}},this.drawValueLineCenter=function(t,r,n){for(var s=this.grid.type!="block"?r.length-1:r.length,i=this.axis.area("width"),o=this.axis.area("height"),f=this.axis.area("x"),c=this.axis.area("y"),g=this.axis.depth,v=this.axis.get("y").orient=="left"?0:i,x=this.axis.get("x").orient=="top"?0:o,y=1;y<s;y++){var A=y*(g/s),F=new l(f,c+x,A,f+i,c+x,A),w=new l(f+v,c,A,f+v,c+o,A);this.calculate3d(F,w);var m=this.line({stroke:this.chart.theme("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),x1:F.vectors[0].x,y1:F.vectors[0].y,x2:F.vectors[1].x,y2:F.vectors[1].y}),T=this.line({stroke:this.chart.theme("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),x1:w.vectors[0].x,y1:w.vectors[0].y,x2:w.vectors[1].x,y2:w.vectors[1].y});if(n.type.indexOf("dashed")>-1){var M=this.chart.theme("gridBorderDashArray"),B=M=="none"||!M?"3,3":M;m.attr({"stroke-dasharray":B}),T.attr({"stroke-dasharray":B})}t.append(m),this.axis.get("y").hide!==!0&&t.append(T)}},this.drawValueText=function(t,r,n,s,i){if(!this.grid.hideText){var o=t=="left"||t=="right",f=this.chart.theme("gridTickBorderSize"),c=this.chart.theme("gridTickPadding"),g=this.axis.area("width"),v=this.axis.area("height"),x=this.axis.area("x"),y=this.axis.area("y"),A=0,F=0;t=="top"?(A=s,F=y+-(f+c*2)):t=="bottom"?(A=s,F=y+(v+f+c*2)):t=="left"?(A=x+-(f+c),F=s):t=="right"&&(A=x+(g+f+c),F=s);var w=new h(A,F,0);this.calculate3d(w),r.append(this.getTextRotate(this.chart.text({x:w.vectors[0].x,y:w.vectors[0].y,dx:o?0:this.chart.theme("gridXFontSize")/3,dy:o?this.chart.theme("gridYFontSize")/3:0,fill:this.chart.theme(o?"gridYFontColor":"gridXFontColor"),"text-anchor":o?t=="left"?"end":"start":"middle","font-size":this.chart.theme(o?"gridYFontSize":"gridXFontSize"),"font-weight":this.chart.theme(o?"gridYFontWeight":"gridXFontWeight")},i)))}},this.drawValueTextCenter=function(t,r,n,s,i){if(!this.grid.hideText)for(var o=this.chart.theme("gridTickBorderSize")+this.chart.theme("gridTickPadding"),f=this.axis.get("y").orient=="left",c=this.axis.get("x").orient=="top",g=this.grid.type!="block"?r.length-1:r.length,v=this.axis.area("width"),x=this.axis.area("height"),y=this.axis.depth,A=this.axis.area("x")+(f?v+o:-o),F=this.axis.area("y")+(c?-o:x+o),w=0;w<r.length;w++){var m=this.format(r[w],w),T=w*(y/g)+i,M=new h(A,F,T);this.calculate3d(M),t.append(this.getTextRotate(this.chart.text({x:M.vectors[0].x,y:M.vectors[0].y,fill:this.chart.theme("gridZFontColor"),"text-anchor":f?"start":"end","font-size":this.chart.theme("gridZFontSize"),"font-weight":this.chart.theme("gridZFontWeight")},m)))}},this.drawPattern=function(){},this.drawImage=function(){}};return a}};k.use([K,_t,jt,Vt]);var qt={name:"chart.grid.core",extend:"chart.draw",component:function(){var u=k.include("util.base"),d=k.include("util.math"),l=k.include("chart.grid.draw2d"),h=k.include("chart.grid.draw3d"),a=function(){this.wrapper=function(t,r){return t},this.line=function(t){return this.chart.svg.line(u.extend({x1:0,y1:0,x2:0,y2:0,stroke:this.color("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),"stroke-dasharray":this.chart.theme("gridBorderDashArray"),"stroke-opacity":this.chart.theme("gridBorderOpacity")},t))},this.color=function(t){var r=this.grid.color;return arguments.length==3?r!=null?this.chart.color(r):this.chart.theme.apply(this.chart,arguments):r!=null?this.chart.color(r):this.chart.theme(t)},this.data=function(t,r){return this.axis.data&&this.axis.data[t]?this.axis.data[t][r]||this.axis.data[t]:this.axis.data||[]},this.getGridSize=function(){var t=this.grid.orient,r=this.axis.depth,n=this.axis.degree,s=t=="left"||t=="right"?this.axis.area("y"):this.axis.area("x"),i=t=="left"||t=="right"?this.axis.area("height"):this.axis.area("width"),o=s,f=i,c=o+f,g={start:o,size:f,end:c};if(this.axis.isFull3D())t=="center"&&(g.start=0,g.size=r,g.end=r);else if(r>0||n>0){var v=d.radian(360-n),x=Math.cos(v)*r,y=Math.sin(v)*r;t=="left"?(g.start=g.start-y,g.size=g.size-y):t=="bottom"&&(g.end=g.end-x,g.size=g.size-x)}return g},this.getDefaultOffset=function(){var t=this.grid.orient,r=this.axis.area(),n=r.width,s=r.height,i=t=="left"||t=="right"?r.y:r.x,o=t=="left"||t=="right"?s:n,f=i,c=o,g=f+c;return{start:f,size:c,end:g}},this.getTextRotate=function(t){var r=this.grid.textRotate;if(r==null)return t;u.typeCheck("function",r)&&(r=r.apply(this.chart,[t]));var n=t.attr("x"),s=t.attr("y");return t.rotate(r,n,s),t},this.getLineOption=function(){var t=this.grid.line;return typeof t=="string"?t={type:t||"solid"}:typeof t=="number"?t={type:"solid","stroke-width":t}:(typeof t>"u"?"undefined":ft(t))!=="object"&&(t=!!t,t&&(t={type:"solid"})),t&&!t.type=="string"&&(t.type=t.type.split(/ /g)),t},this.checkDrawLineY=function(t,r){var n=this.axis.get("y");if(!n.hide){if(n.orient=="left"&&t==0&&!this.grid.realtime)return!1;if(n.orient=="right"&&r)return!1}return!0},this.checkDrawLineX=function(t,r){var n=this.axis.get("x");if(!n.hide){if(n.orient=="top"&&t==0)return!1;if(n.orient=="bottom"&&r&&!this.grid.realtime)return!1}return!0},this.drawTop=function(t,r,n,s,i){for(var o=0,f=r.length;o<f;o++){var c=this.format(r[o],o),g=n[o]-i,v=o==f-1&&this.grid.type!="block",x=!1;if(this.drawImage("top",t,r[o],o,g,0),!(!c&&c!==0)){u.typeCheck("function",s)&&(x=s(r[o]));var y=this.createGridX("top",o,g,x,v);this.drawValueText("top",y,o,n[o],c,i,x),t.append(y)}}},this.drawBottom=function(t,r,n,s,i){for(var o=0,f=r.length;o<f;o++){var c=this.format(r[o],o),g=n[o]-i,v=o==f-1&&this.grid.type!="block",x=!1;if(this.drawImage("bottom",t,r[o],o,g,0),!(!c&&c!==0)){u.typeCheck("function",s)&&(x=s(r[o]));var y=this.createGridX("bottom",o,g,x,v);this.drawValueText("bottom",y,o,n[o],c,i,x),t.append(y)}}},this.drawLeft=function(t,r,n,s,i){for(var o=0,f=r.length;o<f;o++){var c=this.format(r[o],o),g=n[o]-i,v=o==f-1&&this.grid.type!="block",x=!1;if(this.drawImage("left",t,r[o],o,0,g),!(!c&&c!==0)){u.typeCheck("function",s)&&(x=s(r[o]));var y=this.createGridY("left",o,g,x,v);this.drawValueText("left",y,o,n[o],c,i,x),t.append(y)}}},this.drawRight=function(t,r,n,s,i){for(var o=0,f=r.length;o<f;o++){var c=this.format(r[o],o),g=n[o]-i,v=o==f-1&&this.grid.type!="block",x=!1;if(this.drawImage("right",t,r[o],o,0,g),!(!c&&c!==0)){u.typeCheck("function",s)&&(x=s(r[o]));var y=this.createGridY("right",o,g,x,v);this.drawValueText("right",y,o,n[o],c,i,x),t.append(y)}}},this.drawGrid=function(){var t=this.chart.svg.group(),r=this[this.grid.orient],n=this.axis.isFull3D()?h:l;return this.scale=this.wrapper(this.scale,this.grid.key),u.typeCheck("function",r)&&(n.call(this),r.call(this,t)),this.grid.hide&&t.attr({display:"none"}),{root:t,scale:this.scale}},this.drawAfter=function(t){t.root.attr({class:"grid-"+this.grid.type}),t.root.translate(this.chart.area("x"),this.chart.area("y"))}};return a.setup=function(){return{dist:0,orient:null,hide:!1,color:null,title:null,line:!1,format:null,image:null,textRotate:null}},a}},Zt={name:"chart.grid.block",extend:"chart.grid.core",component:function(){var u=k.include("util.base"),d=k.include("util.scale"),l=function(){this.center=function(a){this.drawCenter(a,this.domain,this.points,null,this.half_band),this.drawBaseLine("center",a)},this.top=function(a){this.drawPattern("top",this.domain,this.points,!0),this.drawTop(a,this.domain,this.points,null,this.half_band),this.drawBaseLine("top",a),a.append(this.createGridX("top",this.domain.length,this.end,null,!0))},this.bottom=function(a){this.drawPattern("bottom",this.domain,this.points,!0),this.drawBottom(a,this.domain,this.points,null,this.half_band),this.drawBaseLine("bottom",a),a.append(this.createGridX("bottom",this.domain.length,this.end,null,!0))},this.left=function(a){this.drawPattern("left",this.domain,this.points,!0),this.drawLeft(a,this.domain,this.points,null,this.half_band),this.drawBaseLine("left",a),a.append(this.createGridY("left",this.domain.length,this.end,null,!0))},this.right=function(a){this.drawPattern("right",this.domain,this.points,!0),this.drawRight(a,this.domain,this.points,null,this.half_band),this.drawBaseLine("right",a),a.append(this.createGridY("right",this.domain.length,this.end,null,!0))},this.initDomain=function(){var a=[];if(u.typeCheck("string",this.grid.domain)){var e=this.grid.domain,t=this.data();if(this.grid.reverse)var r=t.length-1,n=0,s=-1;else var r=0,n=t.length-1,s=1;for(var i=r;this.grid.reverse?i>=n:i<=n;i+=s)a.push(t[i][e])}else u.typeCheck("function",this.grid.domain)?a=this.grid.domain.call(this.chart):u.typeCheck("array",this.grid.domain)&&(a=this.grid.domain);return this.grid.reverse&&a.reverse(),a},this.wrapper=function(a,e){var t=a,r=this,n=r.domain.length,s=r.grid.reverse;function i(o){return t(typeof o=="number"&&e?r.axis.data[o][e]:s?n-o-1:o)}return e?u.extend(i,t):t},this.drawBefore=function(){var a=this.initDomain(),e=this.getGridSize(),t=[e.start,e.end];this.scale=d.ordinal().domain(a),this.scale.rangePoints(t),this.start=e.start,this.size=e.size,this.end=e.end,this.points=this.scale.range(),this.domain=this.scale.domain(),this.band=this.scale.rangeBand(),this.half_band=this.band/2,this.bar=6,this.reverse=this.grid.reverse},this.draw=function(){return this.drawGrid("block")}};return l.setup=function(){return{domain:null,reverse:!1,max:10,hideText:!1,key:null}},l}},Kt={name:"chart.grid.date",extend:"chart.grid.core",component:function(){var u=k.include("util.base"),d=k.include("util.scale"),l=k.include("util.time"),h=function(){this.center=function(e){this.drawCenter(e,this.ticks,this.values,null,0),this.drawBaseLine("center",e)},this.top=function(e){this.drawPattern("top",this.ticks,this.values),this.drawTop(e,this.ticks,this.values,null,0),this.drawBaseLine("top",e)},this.bottom=function(e){this.drawPattern("bottom",this.ticks,this.values),this.drawBottom(e,this.ticks,this.values,null,0),this.drawBaseLine("bottom",e)},this.left=function(e){this.drawPattern("left",this.ticks,this.values),this.drawLeft(e,this.ticks,this.values,null,0),this.drawBaseLine("left",e)},this.right=function(e){this.drawPattern("right",this.ticks,this.values),this.drawRight(e,this.ticks,this.values,null,0),this.drawBaseLine("right",e)},this.wrapper=function(e,t){var r=e,n=this;function s(i){return r(typeof i=="number"?n.axis.data[i][t]:+i)}return t?u.extend(s,r):r},this.initDomain=function(){var e=[],t=[],r=this.grid.min||void 0,n=this.grid.max||void 0,s=this.data(),i=[];if(u.typeCheck("string",this.grid.domain)){if(s.length>0){var o=this.grid.domain;i.push(+s[0][o]),i.push(+s[s.length-1][o])}}else if(u.typeCheck("function",this.grid.domain))for(var f=s.length;f--;){var c=this.grid.domain.call(this.chart,s[f]);u.typeCheck("array",c)?(i[f]=Math.max.apply(Math,c),i.push(Math.min.apply(Math,c))):i[f]=c}else i=this.grid.domain;return u.typeCheck("undefined",r)&&i.length>0&&(r=Math.min.apply(Math,i)),u.typeCheck("undefined",n)&&i.length>0&&(n=Math.max.apply(Math,i)),e=[r,n],t=this.grid.interval,this.grid.reverse&&e.reverse(),u.typeCheck("function",t)?this.interval=t.call(this.chart,e):this.interval=t,e},this.drawBefore=function(){var e=this.initDomain(),t=this.getGridSize(),r=[t.start,t.end];if(this.scale=d.time().domain(e).range(r),this.scale.clamp(this.grid.clamp),this.ticks=[],this.grid.realtime!=null&&l[this.grid.realtime]==this.grid.realtime)var n=this.scale.realTicks(this.grid.realtime,this.interval);else var n=this.scale.ticks("milliseconds",this.interval);typeof this.grid.format=="string"&&function(f,c){f.format=function(g){return l.format(g,c)}}(this.grid,this.grid.format),this.start=t.start,this.size=t.size,this.end=t.end,this.bar=6,this.values=[];for(var s=0,i=n.length;s<i;s++){var o=this.scale(n[s]);o>=t.start&&o<=t.end&&(this.values.push(o),this.ticks.push(n[s]))}},this.draw=function(){return this.drawGrid("date")}};return h.setup=function(){return{domain:null,interval:1e3,min:null,max:null,reverse:!1,key:null,realtime:null,hideText:!1}},h}},Qt={name:"chart.grid.dateblock",extend:"chart.grid.date",component:function(){var u=k.include("util.base"),d=k.include("util.scale"),l=k.include("util.time"),h=function(){this.wrapper=function(e,t){var r=e,n=this;return r.rangeBand=function(){return n.grid.unit},r},this.initDomain=function(){var e=[],t=[],r=this.grid.min||void 0,n=this.grid.max||void 0,s=this.data(),i=[];if(u.typeCheck("string",this.grid.domain)){var o=this.grid.domain;i.push(+s[0][o]),i.push(+s[s.length-1][o])}else if(u.typeCheck("function",this.grid.domain))for(var f=s.length;f--;){var c=this.grid.domain.call(this.chart,s[f]);u.typeCheck("array",c)?(i[f]=+Math.max.apply(Math,c),i.push(+Math.min.apply(Math,c))):i[f]=+c}else i=this.grid.domain;return u.typeCheck("undefined",r)&&(r=Math.min.apply(Math,i)),u.typeCheck("undefined",n)&&(n=Math.max.apply(Math,i)),e=[r,n],t=this.grid.interval,this.grid.reverse&&e.reverse(),u.typeCheck("function",t)?e.interval=t.call(this.chart,e):e.interval=t,e},this.drawBefore=function(){var e=this.initDomain(),t=this.getGridSize(),r=[t.start,t.end],n=d.time().domain(e).rangeRound(r);this.grid.realtime!=null&&l[this.grid.realtime]==this.grid.realtime?this.ticks=n.realTicks(this.grid.realtime,e.interval):this.ticks=n.ticks("milliseconds",e.interval);var s=this.axis.data.length-1,i=this.grid.unit=Math.abs(r[0]-r[1])/s;typeof this.grid.format=="string"&&function(c,g){c.format=function(v){return l.format(v,g)}}(this.grid,this.grid.format),this.start=t.start,this.size=t.size,this.end=t.end,this.bar=6,this.values=[];for(var o=0,s=this.ticks.length;o<s;o++)this.values[o]=n(this.ticks[o]);var f=this;this.scale=u.extend(function(c){return f.start+c*i},n)},this.draw=function(){return this.drawGrid("dateblock")}};return h}},te={name:"chart.grid.fullblock",extend:"chart.grid.core",component:function(){var u=k.include("util.base"),d=k.include("util.scale"),l=function(){this.center=function(a){this.drawCenter(a,this.domain,this.points,null,0),this.drawBaseLine("center",a)},this.top=function(a){this.drawPattern("top",this.domain,this.points),this.drawTop(a,this.domain,this.points,null,0),this.drawBaseLine("top",a)},this.bottom=function(a){this.drawPattern("bottom",this.domain,this.points),this.drawBottom(a,this.domain,this.points,null,0),this.drawBaseLine("bottom",a)},this.left=function(a){this.drawPattern("left",this.domain,this.points),this.drawLeft(a,this.domain,this.points,null,0),this.drawBaseLine("left",a)},this.right=function(a){this.drawPattern("right",this.domain,this.points),this.drawRight(a,this.domain,this.points,null,0),this.drawBaseLine("right",a)},this.initDomain=function(){var a=[];if(u.typeCheck("string",this.grid.domain)){var e=this.grid.domain,t=this.data();if(this.grid.reverse)var r=t.length-1,n=0,s=-1;else var r=0,n=t.length-1,s=1;for(var i=r;this.grid.reverse?i>=n:i<=n;i+=s)a.push(t[i][e])}else u.typeCheck("function",this.grid.domain)?a=this.grid.domain.call(this.chart):u.typeCheck("array",this.grid.domain)&&(a=this.grid.domain);return this.grid.reverse&&a.reverse(),a},this.wrapper=function(a,e){var t=a,r=this,n=r.domain.length,s=r.grid.reverse;function i(o){return t(typeof o=="number"&&e?r.axis.data[o][e]:s?n-o:o)}return e?u.extend(i,t):t},this.drawBefore=function(){var a=this.initDomain(),e=this.getGridSize();this.scale=d.ordinal().domain(a);var t=[e.start,e.end];this.scale.rangeBands(t),this.start=e.start,this.size=e.size,this.end=e.end,this.points=this.scale.range(),this.domain=this.scale.domain(),this.band=this.scale.rangeBand(),this.half_band=0,this.bar=6,this.reverse=this.grid.reverse},this.draw=function(){return this.drawGrid("fullblock")}};return l.setup=function(){return{domain:null,reverse:!1,max:10,hideText:!1}},l}};k.use([K]);var ee={name:"chart.grid.radar",extend:"chart.grid.core",component:function(){var u=k.include("util.base"),d=k.include("util.math"),l=function(){var a=this,e=[];function t(s,i,o,f,c,g){var v=Math.abs(c),x=i,y=o;s.append(a.chart.svg.circle({cx:x,cy:y,r:v,"fill-opacity":0,stroke:a.color("gridBorderColor"),"stroke-width":a.chart.theme("gridBorderWidth")}))}function r(s,i,o,f,c,g,v){var x=a.chart.svg.group(),y=[];y.push([i+f,o+c]);for(var A=f,F=c,w=0;w<g;w++){var m=d.rotate(A,F,v);A=m.x,F=m.y,y.push([i+m.x,o+m.y])}for(var T=a.chart.svg.path({fill:"none",stroke:a.color("gridBorderColor"),"stroke-width":a.chart.theme("gridBorderWidth")}),w=0;w<y.length;w++){var M=y[w];w==0?T.MoveTo(M[0],M[1]):T.LineTo(M[0],M[1])}T.LineTo(y[0][0],y[0][1]),x.append(T),s.append(x)}function n(s){var i=a.grid.max,o=a.chart.padding("left"),f=a.chart.padding("top");return function(c,g){var v=g/i,x=Math.abs(s.y1)-Math.abs(s.y2),y=x*v,A=2*Math.PI/a.domain.length,F=s.x1,w=s.y1,m=-y,T=0,M=d.rotate(T,m,A*c),B={x:o+F+M.x,y:f+w+M.y};return B}}this.initDomain=function(){var s=[];if(u.typeCheck("string",this.grid.domain)){var i=this.grid.domain,o=this.data();if(this.grid.reverse)var f=o.length-1,c=0,g=-1;else var f=0,c=o.length-1,g=1;for(var v=f;this.grid.reverse?v>=c:v<=c;v+=g)s.push(o[v][i])}else u.typeCheck("function",this.grid.domain)?s=this.grid.domain(this.chart,this.grid):s=this.grid.domain;return this.grid.reverse&&s.reverse(),s},this.drawBefore=function(){this.domain=this.initDomain()},this.draw=function(){var s=this.axis.area("width"),i=this.axis.area("height"),o=s;i<o&&(o=i);var f=o/2,c=this.axis.area("x")+s/2,g=this.axis.area("y")+i/2,v=-f,x=0,y=this.domain.length,A=this.grid.step,F=2*Math.PI/y,w=Math.abs(v)/A,m=this.chart.svg.group(),T=this.chart.svg.group();m.append(T),e=[];for(var M=0;M<y;M++){var B=c+x,p=g+v;T.append(this.chart.svg.line({x1:c,y1:g,x2:B,y2:p,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),e[M]={x1:c,y1:g,x2:B,y2:p};var b=p,P=B,E="middle";p>g?b=p+20:p<g&&(b=p-10),B>c?(E="start",P+=10):B<c&&(E="end",P-=10),this.grid.hideText||T.append(this.chart.text({x:P,y:b,"text-anchor":E,"font-size":this.chart.theme("gridCFontSize"),"font-weight":this.chart.theme("gridCFontWeight"),fill:this.chart.theme("gridCFontColor")},this.domain[M]));var rt=d.rotate(x,v,F);x=rt.x,v=rt.y}if(!this.grid.line)return{root:T,scale:n(e[0])};v=-f;for(var st=0,ct=this.grid.max/this.grid.step,M=0;M<A;M++){if(M==0&&this.grid.extra){v+=w;continue}this.grid.shape=="circle"?t(T,c,g,0,v,y):r(T,c,g,0,v,y,F),this.grid.hideText||T.append(this.chart.text({x:c,y:g+(v+w-5),"font-size":this.chart.theme("gridCFontSize"),"font-weight":this.chart.theme("gridCFontWeight"),fill:this.chart.theme("gridCFontColor")},this.grid.max-st+"")),v+=w,st+=ct}return this.grid.hide&&T.attr({display:"none"}),{root:T,scale:n(e[0])}}};return l.setup=function(){return{domain:null,reverse:!1,max:100,step:10,line:!0,hideText:!1,extra:!1,shape:"radial"}},l}};k.use([K,Pt]);var re={name:"chart.grid.range",extend:"chart.grid.core",component:function(){var u=k.include("util.base"),d=k.include("util.math"),l=k.include("util.scale"),h=function(){this.center=function(e){var t=this.scale.min(),r=this.scale.max();this.drawCenter(e,this.ticks,this.values,function(n){return n==0&&n!=t&&n!=r},0),this.drawBaseLine("center",e)},this.top=function(e){this.drawPattern("top",this.ticks,this.values);var t=this.scale.min(),r=this.scale.max();this.drawTop(e,this.ticks,this.values,function(n){return n==0&&n!=t&&n!=r},0),this.drawBaseLine("top",e)},this.bottom=function(e){this.drawPattern("bottom",this.ticks,this.values);var t=this.scale.min(),r=this.scale.max();this.drawBottom(e,this.ticks,this.values,function(n){return n==0&&n!=t&&n!=r},0),this.drawBaseLine("bottom",e)},this.left=function(e){this.drawPattern("left",this.ticks,this.values);var t=this.scale.min(),r=this.scale.max();this.drawLeft(e,this.ticks,this.values,function(n){return n==0&&n!=t&&n!=r},0),this.drawBaseLine("left",e)},this.right=function(e){this.drawPattern("right",this.ticks,this.values);var t=this.scale.min(),r=this.scale.max();this.drawRight(e,this.ticks,this.values,function(n){return n==0&&n!=t&&n!=r},0),this.drawBaseLine("right",e)},this.wrapper=function(e,t){var r=e,n=this;function s(i){return r(n.axis.data[i][t])}return t?u.extend(s,r):r},this.initDomain=function(){var e=[],t=this.grid.min||void 0,r=this.grid.max||void 0,n=this.data(),s=[],i=!1;if(u.typeCheck("string",this.grid.domain)){var o=this.grid.domain;s=new Array(n.length);for(var f=n.length;f--;){var c=n[f][o];u.typeCheck("array",c)?(s[f]=Math.max(c),s.push(Math.min(c))):(s[f]=c,s.push(0))}}else if(u.typeCheck("function",this.grid.domain)){s=new Array(n.length);for(var g=!1,f=n.length;f--;){var c=this.grid.domain.call(this.chart,n[f]);u.typeCheck("array",c)?(s[f]=Math.max.apply(Math,c),s.push(Math.min.apply(Math,c))):(s[f]=c,g||(s.push(0),g=!0))}}else s=this.grid.domain,i=!0;var v=Math.min.apply(Math,s),x=Math.max.apply(Math,s);i?(t=v,r=x):((typeof t>"u"||t>v)&&(t=v),(typeof r>"u"||r<x)&&(r=x));var y;if(u.typeCheck("function",this.grid.unit)?y=this.grid.unit.call(this.chart,this.grid):u.typeCheck("number",this.grid.unit)?y=this.grid.unit:(t>0&&(t=Math.floor(t)),y=d.div(r-t,this.grid.step),y>1?y=Math.ceil(y):0<y&&y<1&&(y=d.div(Math.ceil(d.multi(y,10)),10))),y==0)e=[0,0];else{for(var A=0,F=d.fixed(y);A<r;)A=F.plus(A,y);for(var w=A;w>t;)w=F.minus(w,y);e=[w,A],e.step=Math.abs(w-A)/y}return this.grid.reverse&&e.reverse(),e},this.drawBefore=function(){var e=this.initDomain(),t=this.getGridSize();if(this.scale=l.linear().domain(e),this.grid.orient=="left"||this.grid.orient=="right")var r=[t.end,t.start];else var r=[t.start,t.end];this.scale.range(r),this.scale.clamp(this.grid.clamp),this.start=t.start,this.size=t.size,this.end=t.end,this.step=e.step,this.nice=this.grid.nice,this.ticks=this.scale.ticks(this.step,this.nice),(this.grid.orient=="left"||this.grid.orient=="right")&&this.ticks.reverse(),this.bar=6,this.values=[];for(var n=0,s=this.ticks.length;n<s;n++)this.values[n]=this.scale(this.ticks[n])},this.draw=function(){return this.drawGrid("range")}};return h.setup=function(){return{domain:null,step:10,min:0,max:0,unit:null,clamp:!0,reverse:!1,key:null,hideText:!1,nice:!1}},h}},ne={name:"chart.grid.log",extend:"chart.grid.range",component:function(){var u=k.include("util.scale"),d=function(){this.drawBefore=function(){this.grid.unit=!1;var h=this.initDomain(),a=this.getGridSize();if(this.scale=u.log(this.grid.base).domain(h),this.grid.orient=="left"||this.grid.orient=="right")var e=[a.end,a.start];else var e=[a.start,a.end];this.scale.range(e),this.start=a.start,this.size=a.size,this.end=a.end,this.step=this.grid.step,this.nice=this.grid.nice,this.ticks=this.scale.ticks(this.step,this.nice),(this.grid.orient=="left"||this.grid.orient=="right")&&this.ticks.reverse(),this.bar=6,this.values=[];for(var t=0,r=this.ticks.length;t<r;t++)this.values[t]=this.scale(this.ticks[t])},this.draw=function(){return this.drawGrid("log")}};return d.setup=function(){return{base:10,step:4,nice:!1,hideText:!1}},d}},ie={name:"chart.grid.rule",extend:"chart.grid.core",component:function(){var u=k.include("util.base"),d=k.include("util.scale"),l=function(){this.top=function(a){var e=this.axis.area("height"),t=e/2;a.append(this.axisLine({y1:this.center?t:0,y2:this.center?t:0,x1:this.start,x2:this.end}));for(var r=this.ticks,n=this.values,s=this.bar,i=0;i<r.length;i++){var o=this.format(r[i],i);if(!(!o&&o!==0)){var f=r[i]==0,c=this.chart.svg.group().translate(n[i],this.center?t:0);c.append(this.line({y1:this.center?-s:0,y2:s,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),(!f||f&&!this.hideZero)&&c.append(this.getTextRotate(this.chart.text({x:0,y:s+s+4,"text-anchor":"middle",fill:this.chart.theme("gridFontColor")},o))),a.append(c)}}},this.bottom=function(a){var e=this.axis.area("height"),t=e/2;a.append(this.axisLine({y1:this.center?-t:0,y2:this.center?-t:0,x1:this.start,x2:this.end}));for(var r=this.ticks,n=this.values,s=this.bar,i=0;i<r.length;i++){var o=this.format(r[i],i);if(!(!o&&o!==0)){var f=r[i]==0,c=this.chart.svg.group().translate(n[i],this.center?-t:0);c.append(this.line({y1:this.center?-s:0,y2:this.center?s:-s,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),(!f||f&&!this.hideZero)&&c.append(this.getTextRotate(this.chart.text({x:0,y:-s*2,"text-anchor":"middle",fill:this.chart.theme(f,"gridActiveFontColor","gridFontColor")},o))),a.append(c)}}},this.left=function(a){var e=this.axis.area("width"),t=this.axis.area("height"),r=e/2;a.append(this.axisLine({x1:this.center?r:0,x2:this.center?r:0,y1:this.start,y2:this.end}));for(var n=this.ticks,s=this.values,i=this.bar,o=0;o<n.length;o++){var f=this.format(n[o],o);if(!(!f&&f!==0)){var c=n[o]==0,g=this.chart.svg.group().translate(this.center?r:0,s[o]);g.append(this.line({x1:this.center?-i:0,x2:i,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),(!c||c&&!this.hideZero)&&g.append(this.getTextRotate(this.chart.text({x:i/2+4,y:i-2,fill:this.chart.theme("gridFontColor")},f))),a.append(g)}}},this.right=function(a){var e=this.axis.area("width"),t=e/2;a.append(this.axisLine({x1:this.center?-t:0,x2:this.center?-t:0,y1:this.start,y2:this.end}));for(var r=this.ticks,n=this.values,s=this.bar,i=0;i<r.length;i++){var o=this.format(r[i],i);if(!(!o&&o!==0)){var f=r[i]==0,c=this.chart.svg.group().translate(this.center?-t:0,n[i]);c.append(this.line({x1:this.center?-s:0,x2:this.center?s:-s,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),(!f||f&&!this.hideZero)&&c.append(this.getTextRotate(this.chart.text({x:-s-4,y:s-2,"text-anchor":"end",fill:this.chart.theme("gridFontColor")},o))),a.append(c)}}},this.wrapper=function(a,e){var t=a,r=this;function n(s){return t(r.axis.data[s][e])}return e?u.extend(n,t):t},this.initDomain=function(){var a=[],e=this.grid.min||void 0,t=this.grid.max||void 0,r=this.data(),n=[];if(u.typeCheck("string",this.grid.domain)){var s=this.grid.domain;n=new Array(r.length);for(var i=0,o=r.length;i<o;i++){var f=r[i][s];u.typeCheck("array",f)?(n[i]=Math.max(f),n.push(Math.min(f))):n[i]=f}}else if(u.typeCheck("function",this.grid.domain)){n=new Array(r.length);for(var i=0,o=r.length;i<o;i++){var f=this.grid.domain.call(this.chart,r[i]);u.typeCheck("array",f)?(n[i]=Math.max.apply(Math,f),n.push(Math.min.apply(Math,f))):n[i]=f}}else n=grid.domain;var c=Math.min.apply(Math,n),g=Math.max.apply(Math,n);typeof e>"u"&&(e=c),typeof t>"u"&&(t=g),this.grid.max=t,this.grid.min=e;var v;if(u.typeCheck("function",this.grid.unit)?v=this.grid.unit.call(this.chart,this.grid):u.typeCheck("number",this.grid.unit)?v=this.grid.unit:v=Math.ceil((t-e)/this.grid.step),v==0)a=[0,0];else{for(var x=0;x<t;)x+=v;for(var y=x;y>e;)y-=v;a=[y,x]}return this.grid.reverse&&a.reverse(),a},this.drawBefore=function(){var a=this.initDomain(),e=this.getGridSize();if(this.scale=d.linear().domain(a),this.grid.orient=="left"||this.grid.orient=="right")var t=[e.end,e.start];else var t=[e.start,e.end];this.scale.range(t),this.start=e.start,this.size=e.size,this.end=e.end,this.step=this.grid.step,this.nice=this.grid.nice,this.ticks=this.scale.ticks(this.step,this.nice),this.bar=6,this.hideZero=this.grid.hideZero,this.center=this.grid.center,this.values=[];for(var r=0,n=this.ticks.length;r<n;r++)this.values[r]=this.scale(this.ticks[r])},this.draw=function(){return this.drawGrid(chart,orient,"rule",grid)}};return l.setup=function(){return{domain:null,step:10,min:0,max:0,unit:null,clamp:!0,reverse:!1,key:null,hideText:!1,hideZero:!1,nice:!1,center:!1}},l}},ae={name:"chart.grid.panel",extend:"chart.grid.core",component:function(){var u=k.include("util.base"),d=function(){this.custom=function(h){var a=this.scale(0);a.x-=this.axis.area("x"),a.y-=this.axis.area("y"),h.append(this.chart.svg.rect(u.extend(a,{fill:"transparent",stroke:"transparent"})))},this.drawBefore=function(){this.scale=function(h){return function(a){return{x:h.area("x"),y:h.area("y"),width:h.area("width"),height:h.area("height")}}}(this.axis)},this.draw=function(){return this.grid.hide=!0,this.drawGrid("panel")}};return d}},se={name:"chart.grid.table",extend:"chart.grid.core",component:function(){var u=function(l,h,a){var e,t;this.custom=function(r){for(var n=0;n<e;n++)for(var s=0;s<t;s++){var i=n*t+s,o=this.scale(i);o.x-=this.axis.area("x"),o.y-=this.axis.area("y");var f=this.chart.svg.rect(_.extend(o,{fill:"tranparent",stroke:"black"}))}},this.drawBefore=function(){var r=this.grid.rows,n=this.grid.columns,s=this.grid.padding,i=(this.axis.area("width")-(n-1)*s)/n,o=(this.axis.area("height")-(r-1)*s)/r;this.scale=function(f,c,g,v,x){return function(y){var A=Math.floor(y/g),F=y%g,w=F*x,m=A*v,T=s*F,M=s*A;return{x:f.area("x")+w+T,y:f.area("y")+m+M,width:x,height:v}}}(this.axis,r,n,o,i)},this.draw=function(){return this.grid.hide=!0,this.drawGrid("table")}};return u.setup=function(){return{rows:1,columns:1,padding:10}},u}},he={name:"chart.grid.overlap",extend:"chart.grid.core",component:function(){var u=k.include("util.base"),d=function(){var h,a,e,t,r;this.custom=function(){for(var n=0,s=this.axis.data.length;n<s;n++){var i=this.scale(n);i.x-=this.axis.area("x"),i.y-=this.axis.area("y"),this.chart.svg.rect(u.extend(i,{fill:"transparent",stroke:"transparent"}))}},this.drawBefore=function(){h=this.grid.count||this.axis.data.length||1,a=this.axis.area("width")/2/h,e=this.axis.area("height")/2/h,t=this.axis.area("width"),r=this.axis.area("height"),this.scale=function(n){return function(s){var i=s*a,o=s*e;return{x:n.area("x")+i,y:n.area("y")+o,width:Math.abs(t/2-i)*2,height:Math.abs(r/2-o)*2}}}(this.axis)},this.draw=function(){return this.grid.hide=!0,this.drawGrid("overlap")}};return d.setup=function(){return{count:null}},d}};k.use([K]);var oe={name:"chart.grid.grid3d",extend:"chart.grid.core",component:function(){var u=k.include("util.base"),d=k.include("util.math"),l=function(){var a=this,e=0,t=0,r=0;function n(s){var i=null;return s.each(function(o,f){f.element.nodeName=="line"&&(i=f.attributes)}),i}this.drawBefore=function(){e=this.axis.get("depth"),t=this.axis.get("degree"),r=d.radian(360-t),this.scale=function(){return function(s,i,o,f){var c=u.typeCheck("integer",f)?f:1,g=e/c;if(o==null||c==1)return{x:a.axis.x(s),y:a.axis.y(i),depth:g};var o=o??0,v=g*o,x=Math.sin(r)*g;return{x:a.axis.x(s)+Math.cos(r)*v,y:a.axis.y(i)+Math.sin(r)*v+x,depth:g}}}(this.axis),this.scale.depth=e,this.scale.degree=t,this.scale.radian=r},this.draw=function(){var s=this.axis.x.root,i=this.axis.y.root,o=Math.sin(r)*e,f=Math.cos(r)*e;return i.each(function(c,g){if(g.element.nodeName=="line")i.append(a.line({x1:f,y1:0,x2:f,y2:o+g.attributes.y2}));else{var v=n(s);g.append(a.line({x1:0,y1:0,x2:f,y2:o})),g.append(a.line({x1:f,y1:o,x2:f+v.x2,y2:o}))}}),s.each(function(c,g){var v=g.element.nodeName=="line"?g.attributes:g.get(0).attributes,x=v.y1+Math.sin(r)*e,y=v.x1+Math.cos(r)*e;if(c>0){var A=n(i);g.append(a.line({x1:v.x1,y1:v.y1,x2:y,y2:x})),g.append(a.line({x1:y,y1:x,x2:y,y2:-(A.y2-x)}))}}),this.drawGrid()}};return l.setup=function(){return{domain:null}},l}};k.use(_t,ht);var ue={name:"chart.brush.core",extend:"chart.draw",component:function(){var u=k.include("util.base"),d=k.include("util.dom"),l=function(){function a(e,t){for(var r={},n={},s=0;s<t.length;s++)r[t[s]]||(n[t[s]]=[]);for(var s=0,i=e.length;s<i;s++){var o=e[s];for(var f in n)n[f].push(o[f])}for(var c in n)r[c]={min:Math.min.apply(Math,n[c]),max:Math.max.apply(Math,n[c])};return r}this.drawAfter=function(e){this.brush.clip!==!1&&e.attr({"clip-path":"url(#"+this.axis.get("clipId")+")"}),e.attr({class:"brush-"+this.brush.type}),e.translate(this.chart.area("x"),this.chart.area("y"))},this.drawTooltip=function(e,t,r){var n=this,s=null;function i(){return n.chart.svg.group({visibility:"hidden"},function(){n.chart.text({fill:n.chart.theme("tooltipPointFontColor"),"font-size":n.chart.theme("tooltipPointFontSize"),"font-weight":n.chart.theme("tooltipPointFontWeight"),"text-anchor":"middle",opacity:r}),n.chart.svg.circle({r:n.chart.theme("tooltipPointRadius"),fill:e,stroke:t,opacity:r,"stroke-width":n.chart.theme("tooltipPointBorderWidth")})})}function o(f,c,g,v){var x=s.get(0);x.element.textContent=v,f=="left"?x.attr({x:-7,y:4,"text-anchor":"end"}):f=="right"?x.attr({x:7,y:4,"text-anchor":"start"}):f=="bottom"?x.attr({y:16}):x.attr({y:-7}),s.attr({visibility:v!=0?"visible":"hidden"}),s.translate(c,g)}return s=i(),{tooltip:s,control:o,style:function(c,g,v){s.get(0).attr({opacity:v}),s.get(1).attr({fill:c,stroke:g,opacity:v})}}},this.curvePoints=function(e){var t=[],r=[],n=e.length-1,s=[],i=[],o=[],f=[];for(s[0]=0,i[0]=2,o[0]=1,f[0]=e[0]+2*e[1],c=1;c<n-1;c++)s[c]=1,i[c]=4,o[c]=1,f[c]=4*e[c]+2*e[c+1];s[n-1]=2,i[n-1]=7,o[n-1]=0,f[n-1]=8*e[n-1]+e[n];for(var c=1;c<n;c++){var g=s[c]/i[c-1];i[c]=i[c]-g*o[c-1],f[c]=f[c]-g*f[c-1]}t[n-1]=f[n-1]/i[n-1];for(var c=n-2;c>=0;--c)t[c]=(f[c]-o[c]*t[c+1])/i[c];for(var c=0;c<n-1;c++)r[c]=2*e[c+1]-t[c+1];return r[n-1]=.5*(e[n]+t[n-1]),{p1:t,p2:r}},this.eachData=function(e,t){if(u.typeCheck("function",e)){var r=this.listData();if(t===!0)for(var n=r.length-1;n>=0;n--)e.call(this,n,r[n]);else for(var s=0,n=r.length;s<n;s++)e.call(this,r[s],s)}},this.listData=function(){if(this.axis){if(!this.axis.data)return[]}else return[];return this.axis.data},this.getData=function(e){return this.listData()[e]},this.getValue=function(e,t,r){return this.axis.getValue(e,t,r)},this.getXY=function(e){var t=[],r={},n=this.listData().length,s=n,i=this.brush.target,o=i.length;e!==!1&&(r=a(this.axis.data,i));for(var f=0;f<o;f++)t[f]={x:new Array(n),y:new Array(n),value:new Array(n),min:[],max:[],length:n};var c=this.axis.data,g=this.axis.y.type=="range",v=this.axis.x,x=this.axis.y,y=u.loop(s);return y(function(A,F){var w=c[A],m=0,T=0;g?m=v(A):T=x(A);for(var M=0;M<o;M++){var B=i[M],p=w[B];g?T=x(p):m=v(p),t[M].x[A]=m,t[M].y[A]=T,t[M].value[A]=p,e!==!1&&(t[M].min[A]=p==r[B].min,t[M].max[A]=p==r[B].max)}}),t},this.getStackXY=function(e){var t=this.getXY(e),r=this.axis.y.type=="range";return this.eachData(function(n,s){for(var i=0,o=0;o<this.brush.target.length;o++){var f=this.brush.target[o],c=n[f];o>0&&(i+=n[this.brush.target[o-1]]),r?t[o].y[s]=this.axis.y(c+i):t[o].x[s]=this.axis.x(c+i)}}),t},this.addEvent=function(e,t,r){if(this.brush.useEvent!==!0)return;var n=this.chart,s={};u.typeCheck("object",t)&&!r?(s.brush=this.brush,s.data=t):(s.brush=this.brush,s.dataIndex=t,s.dataKey=r!=null?this.brush.target[r]:null,s.data=t!=null?this.getData(t):null),e.on("click",function(o){i(o),n.emit("click",[s,o])}),e.on("dblclick",function(o){i(o),n.emit("dblclick",[s,o])}),e.on("contextmenu",function(o){i(o),n.emit("rclick",[s,o]),o.preventDefault()}),e.on("mouseover",function(o){i(o),n.emit("mouseover",[s,o])}),e.on("mouseout",function(o){i(o),n.emit("mouseout",[s,o])}),e.on("mousemove",function(o){i(o),n.emit("mousemove",[s,o])}),e.on("mousedown",function(o){i(o),n.emit("mousedown",[s,o])}),e.on("mouseup",function(o){i(o),n.emit("mouseup",[s,o])});function i(o){var f=d.offset(n.root),c=o.pageX-f.left,g=o.pageY-f.top;o.bgX=c,o.bgY=g,o.chartX=c-n.padding("left"),o.chartY=g-n.padding("top")}},this.color=function(e,t){var r=this.brush.colors,n=null,s=0,i=0;if(u.typeCheck("undefined",t)?s=e:(s=t,i=e),u.typeCheck("function",r)){var o=r.call(this.chart,this.getData(i),i);u.typeCheck(["string","integer"],o)?n=this.chart.color(o):u.typeCheck("array",o)?n=this.chart.color(s,o):n=this.chart.color(0)}else n=this.chart.color(s,r);return n},this.offset=function(e,t){var r=this.axis[e](t);return this.axis[e].type!="block"&&(r+=this.axis[e].rangeBand()/2),r}};return l.setup=function(){return{target:null,colors:null,axis:0,index:null,clip:!0,useEvent:!0}},l}},le={name:"chart.brush.map.core",extend:"chart.brush.core",component:function(){var u=function(){};return u}},ce={name:"chart.brush.polygon.core",extend:"chart.brush.core",component:function(){var u=function(){this.createPolygon=function(l,h){this.calculate3d(l);var a=h.call(this,l);if(a)return a.order=this.axis.depth-l.max().z,a}};return u.setup=function(){return{id:null,clip:!1}},u}},fe={name:"chart.brush.canvas.core",extend:"chart.brush.core",component:function(){var u=k.include("util.base"),d=function(){this.addPolygon=function(h,a){u.typeCheck("array",this.polygons)||(this.polygons=[]),this.calculate3d(h),this.polygons.push({polygon:h,order:this.axis.depth-h.max().z,handler:a})},this.drawAfter=function(){if(u.typeCheck("array",this.polygons)){var h=this.polygons;h.sort(function(r,n){return r.order-n.order});for(var a=0,e=h.length;a<e;a++){var t=h.shift();t.handler.call(this,t.polygon)}}}};return d}};k.use(_t);var de={name:"chart.widget.core",extend:"chart.draw",component:function(){var u=k.include("util.base"),d=function(){this.getIndexArray=function(h){var a=[0];return u.typeCheck("array",h)?a=h:u.typeCheck("integer",h)&&(a=[h]),a},this.getScaleToValue=function(h,a,e,t,r){var n=(e-a)*10,s=(r-t)/n,i=r-s*((h-a)/.1);return i<t?t:i>r?r:i},this.getValueToScale=function(h,a,e,t,r){var n=(r-t)*10,s=(e-a)/n;return parseFloat((t+(e-h)/s*.1).toFixed(1))},this.isRender=function(){return this.widget.render===!0},this.on=function(h,a,e){var t=this;return this.chart.on(h,function(){if(u.startsWith(h,"axis.")&&u.typeCheck("integer",e)){var r=t.chart.axis(e),n=arguments[0];u.typeCheck("object",r)&&arguments[1]==e&&a.apply(t,[n])}else a.apply(t,arguments)},this.isRender()?"render":"renderAll")},this.drawAfter=function(h){h.attr({class:"widget-"+this.widget.type})}};return d.setup=function(){return{render:!1,index:0}},d}},ge={name:"chart.widget.map.core",extend:"chart.widget.core",component:function(){var u=function(l,h,a){};return u.setup=function(){return{axis:0}},u}},pe={name:"chart.widget.polygon.core",extend:"chart.widget.core",component:function(){var u=function(){this.drawAfter=function(l){}};return u}},ve={name:"chart.widget.canvas.core",extend:"chart.widget.core",component:function(){var u=function(){this.drawAfter=function(l){}};return u}};k.use([ht,K,Q,tt,V,W,G,I,O,J,q,H,j,it,Z,ut,at,xt,lt,Ct,Mt,At,Tt,Jt,Pt,Lt,_t,Et,Dt,Ft,Gt,Xt,Rt,Wt,Nt,$t,Ht,jt,Vt,qt,Zt,Kt,Qt,te,ee,re,ne,ie,ae,se,he,oe,ue,le,ce,fe,de,ge,pe,ve]);var me=k.include("util.base"),ye=k.include("manager");me.extend(k,ye,!0);const we=k}}]);
