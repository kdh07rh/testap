"use strict";(self.webpackChunkjennifer5_frontend=self.webpackChunkjennifer5_frontend||[]).push([[60491],{86471:(de,S,i)=>{i.d(S,{A:()=>V});var e=i(47577);const U={class:"ip-setting"},w={class:"row"},$={class:"title"},X={class:"group"},R={class:"row"};function K(v,I,O,T,A,j){const W=(0,e.g2)("input-field"),h=(0,e.g2)("btn"),f=(0,e.g2)("memos");return(0,e.uX)(),(0,e.CE)("div",U,[(0,e.Lk)("div",w,[(0,e.Lk)("div",$,(0,e.v_)(v.i18n[v.isUrl?"url":"ip"]),1),I[2]||(I[2]=(0,e.eW)()),(0,e.Lk)("div",X,[(0,e.bF)(W,{width:200,validator:v.validCheckInput,value:v.ipText,"onUpdate:value":I[0]||(I[0]=M=>v.ipText=M),"onKeyup:enter":v.onAddIp},null,8,["validator","value","onKeyup:enter"]),I[1]||(I[1]=(0,e.eW)()),(0,e.bF)(h,{normal:"",items:[{text:v.i18n.add}],onClick:v.onAddIp},null,8,["items","onClick"])])]),I[3]||(I[3]=(0,e.eW)()),(0,e.Lk)("div",R,[(0,e.bF)(f,{subject:v.title,"memo-type":v.ipType,"memo-items":v.ipItems,onDelete:v.onDeleteIp},null,8,["subject","memo-type","memo-items","onDelete"])])])}var P=i(11649),H=i(35375),F=i(3515),Q=i(6373);function B(v){return v.map(I=>({main:I,sub:"",disabled:!1}))}const G=(0,e.pM)({components:{Btn:H.A,Memos:F.A,InputField:P.A},props:{title:{type:String,required:!0},items:{type:Array,required:!1,default:()=>[]},type:{type:String,required:!1,default:"info"},isUrl:{type:Boolean,required:!1,default:!1}},emits:["update:items"],setup(v,{emit:I}){const O=(0,e.WQ)("i18n",{}),T=(0,e.KR)(""),A=(0,e.KR)(B(v.items)),j=()=>{h(T.value)&&(I("update:items",[...v.items,T.value]),T.value="")},W=(f,M)=>{I("update:items",v.items.filter((te,J)=>J!==M))},h=f=>(0,Q._$)(f)||v.isUrl&&f!=="";return(0,e.wB)(()=>v.items,f=>{A.value=B(f)}),{i18n:O,ipText:T,title:v.title,ipType:v.type,ipItems:A,onAddIp:j,onDeleteIp:W,validCheckInput:h}}});var z=i(35339);const V=(0,z.A)(G,[["render",K],["__scopeId","data-v-70e6468b"]])},94280:(de,S,i)=>{i.r(S),i.d(S,{default:()=>Ut});var e=i(47577);const U={class:"app-ctrl"},w={class:"left"},$={key:0,class:"right"},X={class:"tab"},R={class:"search"},K={key:1,class:"right"},P={key:2,class:"right"};function H(s,t,o,n,m,p){const d=(0,e.g2)("domain-tree-layer"),a=(0,e.g2)("btn"),l=(0,e.g2)("base-header"),r=(0,e.g2)("tab"),_=(0,e.g2)("cards"),C=(0,e.g2)("search"),k=(0,e.g2)("blocked-ips"),g=(0,e.g2)("confirm-window"),u=(0,e.g2)("card-form");return(0,e.uX)(),(0,e.CE)("div",U,[(0,e.bo)((0,e.Lk)("div",w,[(0,e.bF)(d,{"is-layer":!1,"show-title":!1})],512),[[e.aG,s.showDomainTreeLayer&&s.screenMode==="list"]]),t[12]||(t[12]=(0,e.eW)()),s.screenMode==="list"?((0,e.uX)(),(0,e.CE)("div",$,[(0,e.bF)(l,{title:s.i18nMessages.ddosTitle,"use-domain-tree-btn":!0,"active-domain-tree":s.showDomainTreeLayer,onToggleDomaintree:t[1]||(t[1]=()=>s.showDomainTreeLayer=!s.showDomainTreeLayer)},{tools:(0,e.k6)(()=>[(0,e.bF)(a,{normal:"","icon-first":"",class:"border-none",disabled:s.selectedDomain.resourceType!=="domain",items:[{text:s.i18nMessages.add,iconType:s.iconTypes.add}],onClick:s.onClickAddSetting},null,8,["disabled","items","onClick"]),t[3]||(t[3]=(0,e.eW)()),t[4]||(t[4]=(0,e.Lk)("div",{class:"splitter"},null,-1)),t[5]||(t[5]=(0,e.eW)()),(0,e.bF)(a,{class:"border-none",normal:"","icon-first":"",disabled:s.checkedItems.length===0,items:[{iconType:s.iconTypes.trashcan}],"tooltip-options":{message:s.i18nMessages.delete},onClick:t[0]||(t[0]=()=>s.confirmMessage=s.i18nMessages.M0270)},null,8,["disabled","items","tooltip-options"])]),_:1},8,["title","active-domain-tree"]),t[7]||(t[7]=(0,e.eW)()),(0,e.Lk)("div",X,[(0,e.bF)(r,{normal:"",tabs:s.tabItems,"active-tab":s.activeTab,onChange:s.onChangeActiveTab},null,8,["tabs","active-tab","onChange"])]),t[8]||(t[8]=(0,e.eW)()),s.activeTab==="setting"?((0,e.uX)(),(0,e.Wv)(_,{key:0})):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.Lk)("div",R,[(0,e.bF)(C,{small:"",placeholder:s.i18nMessages.search,width:182,value:s.searchText,onChange:s.onChangeSearchText},null,8,["placeholder","value","onChange"])]),t[6]||(t[6]=(0,e.eW)()),(0,e.bF)(k)],64)),t[9]||(t[9]=(0,e.eW)()),s.confirmMessage!==""?((0,e.uX)(),(0,e.Wv)(g,{key:2,message:s.confirmMessage,onCancel:t[2]||(t[2]=()=>s.confirmMessage=""),onApply:s.onClickDeleteSettings},null,8,["message","onApply"])):(0,e.Q3)("v-if",!0)])):s.screenMode==="modify"?((0,e.uX)(),(0,e.CE)("div",K,[(0,e.bF)(l,{"use-back-btn":!0,"use-delete-btn":!0,onDeleteSetting:s.onClickDeleteSetting,onClickBackbtn:s.onClickBackBtn},null,8,["onDeleteSetting","onClickBackbtn"]),t[10]||(t[10]=(0,e.eW)()),(0,e.bF)(u,{"is-new":!1,onCancel:s.onClickBackBtn},null,8,["onCancel"])])):((0,e.uX)(),(0,e.CE)("div",P,[(0,e.bF)(l,{title:s.i18nMessages.addDdosSetting},null,8,["title"]),t[11]||(t[11]=(0,e.eW)()),(0,e.bF)(u,{"is-new":!0,onCancel:s.onClickBackBtn},null,8,["onCancel"])]))])}var F=i(35375),Q=i(87469),B=i(20251),G=i(22984),z=i(83987);const ee={key:0,class:"cards"},V={key:1,class:"no-cards"};function v(s,t,o,n,m,p){const d=(0,e.g2)("card");return s.cardItems.length>0?((0,e.uX)(),(0,e.CE)("div",ee,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(s.cardItems,a=>((0,e.uX)(),(0,e.Wv)(d,{key:a.sequence,item:a,checked:s.isChecked(a),onSelect:l=>s.onClickCardItem(a),onCheck:l=>s.onCheckCardItem(a,l)},null,8,["item","checked","onSelect","onCheck"]))),128))])):((0,e.uX)(),(0,e.CE)("div",V,(0,e.v_)(s.i18n.M0703),1))}const I={class:"card"},O={class:"row"},T={class:"subject"},A=["innerHTML"],j={class:"row main-info"},W={class:"left"},h={class:"subject"},f={class:"value"},M={class:"right"},te={class:"subject"},J={class:"value"},le={class:"checklist"},ae={class:"row"},re={class:"subject"},ue={class:"value"},pe={key:0,class:"text"},ce={key:1,class:"text"},me={key:0,class:"row"},_e={class:"subject"},ve={class:"value"},ke={key:1,class:"row"},Ce={class:"subject"},Ie={class:"value"},ge={key:2,class:"row"},Ee={class:"subject"},fe={class:"value"},ye={key:3,class:"row"},be={class:"subject"},Te={class:"value"},Le={class:"checkbox"};function De(s,t,o,n,m,p){const d=(0,e.g2)("checked-label"),a=(0,e.g2)("memo"),l=(0,e.g2)("checkbox");return(0,e.uX)(),(0,e.CE)("div",I,[(0,e.Lk)("div",{class:"rows",onClick:t[0]||(t[0]=(0,e.D$)(r=>s.$emit("select"),["prevent"]))},[(0,e.Lk)("div",O,[(0,e.Lk)("div",T,[(0,e.Lk)("span",{innerHTML:s.subject},null,8,A)])]),t[7]||(t[7]=(0,e.eW)()),(0,e.Lk)("div",j,[(0,e.Lk)("div",W,[(0,e.Lk)("div",h,(0,e.v_)(s.i18n.dimensionTime)+" ("+(0,e.v_)(s.i18n.seconds)+`)
                    `,1),t[2]||(t[2]=(0,e.eW)()),(0,e.Lk)("div",f,(0,e.v_)(s.measureTime.toFixed(0)),1)]),t[6]||(t[6]=(0,e.eW)()),(0,e.Lk)("div",M,[(0,e.Lk)("div",te,(0,e.v_)(s.i18n.repeatCount),1),t[4]||(t[4]=(0,e.eW)()),(0,e.Lk)("div",J,(0,e.v_)(s.callCount.toLocaleForAries()),1),t[5]||(t[5]=(0,e.eW)()),(0,e.Lk)("div",le,[s.checkOnlyClientId?((0,e.uX)(),(0,e.Wv)(d,{key:0,label:s.i18n.M0498},null,8,["label"])):(0,e.Q3)("v-if",!0),t[3]||(t[3]=(0,e.eW)()),s.checkOnlySameUrlCall?((0,e.uX)(),(0,e.Wv)(d,{key:1,label:s.i18n.M0596},null,8,["label"])):(0,e.Q3)("v-if",!0)])])]),t[8]||(t[8]=(0,e.eW)()),(0,e.Lk)("div",ae,[(0,e.Lk)("div",re,[(0,e.eW)((0,e.v_)(s.i18n[s.rejectType===1?"showMessage":s.rejectType===2?"redirectUrl":"M0521"])+" ",1),(0,e.Lk)("div",ue,[s.rejectType===1?((0,e.uX)(),(0,e.CE)("div",pe,(0,e.v_)(s.rejectMessage),1)):s.rejectType===2?((0,e.uX)(),(0,e.CE)("div",ce,(0,e.v_)(s.rejectUrl),1)):(0,e.Q3)("v-if",!0)])])]),t[9]||(t[9]=(0,e.eW)()),s.instanceNames.length>0?((0,e.uX)(),(0,e.CE)("div",me,[(0,e.Lk)("div",_e,[(0,e.eW)((0,e.v_)(s.i18n.instance)+" ",1),(0,e.Lk)("div",ve,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(s.instanceNames,(r,_)=>((0,e.uX)(),(0,e.Wv)(a,{key:_,"memo-type":"normal","memo-text":{main:r,sub:"",disabled:!1}},null,8,["memo-text"]))),128))])])])):(0,e.Q3)("v-if",!0),t[10]||(t[10]=(0,e.eW)()),s.allowIpAddresses.length>0?((0,e.uX)(),(0,e.CE)("div",ke,[(0,e.Lk)("div",Ce,[(0,e.eW)((0,e.v_)(s.i18n.ipWhitelist)+" ",1),(0,e.Lk)("div",Ie,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(s.allowIpAddresses,(r,_)=>((0,e.uX)(),(0,e.Wv)(a,{key:_,"memo-type":"info","memo-text":{main:r,sub:"",disabled:!1}},null,8,["memo-text"]))),128))])])])):(0,e.Q3)("v-if",!0),t[11]||(t[11]=(0,e.eW)()),s.blockIpAddresses.length>0?((0,e.uX)(),(0,e.CE)("div",ge,[(0,e.Lk)("div",Ee,[(0,e.eW)((0,e.v_)(s.i18n.ipBlacklist)+" ",1),(0,e.Lk)("div",fe,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(s.blockIpAddresses,(r,_)=>((0,e.uX)(),(0,e.Wv)(a,{key:_,"memo-type":"fatal","memo-text":{main:r,sub:"",disabled:!1}},null,8,["memo-text"]))),128))])])])):(0,e.Q3)("v-if",!0),t[12]||(t[12]=(0,e.eW)()),s.blockingUrls.length>0?((0,e.uX)(),(0,e.CE)("div",ye,[(0,e.Lk)("div",be,[(0,e.eW)((0,e.v_)(s.i18n.urlBlacklist)+" ",1),(0,e.Lk)("div",Te,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(s.blockingUrls,(r,_)=>((0,e.uX)(),(0,e.Wv)(a,{key:_,"memo-type":"fatal","memo-text":{main:r,sub:"",disabled:!1}},null,8,["memo-text"]))),128))])])])):(0,e.Q3)("v-if",!0)]),t[13]||(t[13]=(0,e.eW)()),(0,e.Lk)("div",Le,[(0,e.bF)(l,{active:s.checked,onChange:t[1]||(t[1]=r=>s.$emit("check",r))},null,8,["active"])])])}var se=i(88994),he=i(78496);const Ae={class:"checked-label"};function We(s,t,o,n,m,p){const d=(0,e.g2)("svg-icon");return(0,e.uX)(),(0,e.CE)("div",Ae,[(0,e.bF)(d,{icon:s.iconType,width:s.iconSize,height:s.iconSize},null,8,["icon","width","height"]),t[0]||(t[0]=(0,e.eW)()),(0,e.Lk)("span",null,(0,e.v_)(s.label),1)])}var y=i(79526);const Me=(0,e.pM)({components:{SvgIcon:y.Ah},props:{label:{type:String,required:!0}},setup(s){return{...(0,e.QW)(s),iconType:y.B2.check,iconSize:18}}});var L=i(35339);const Se=(0,L.A)(Me,[["render",We],["__scopeId","data-v-02cc85ce"]]),Fe=(0,e.pM)({components:{Memo:he.A,CheckedLabel:Se,Checkbox:se.A},props:{item:{type:Object,required:!0},checked:{type:Boolean,required:!0}},emits:["select","check"],setup(s){return{i18n:(0,e.WQ)("i18n",{}),...(0,e.QW)(s.item)}}}),Be=(0,L.A)(Fe,[["render",De],["__scopeId","data-v-49dc505f"]]);var Y=i(28416),b=i(1401),D=i(21005),Oe=i(86617),ne=i(27664),Z=i(6373),q=i(415),oe=i(97116);const c={RESET_ITEMS:"resetDdosItems",ADD_ITEM:"addDdosItem",DELETE_ITEM:"deleteDdosItem",SELECT_ITEM:"selectDdosItem",RESET_BLOCKED_IPS:"resetDdosBlockedIps",ADD_BLOCKED_IP:"addDdosBlockedIp",UPDATE_BLOCKED_IP_ROWS:"updateDdosBlockedIpRows",END_BLOCKED_IP:"endDdosBlockedIp",CHANGE_SCREEN_MODE:"changeScreenMode",CHANGE_SEARCH_TEXT:"changeSearchText",UPDATE_CHECKED_ITEMS:"updateCheckedItems"},E={SAVE_ITEM:"saveDdosItem",DELETE_ITEM:"deleteDdosItem",DELETE_ITEMS:"deleteDdosItems",LOAD_ITEMS:"loadDdosItems",LOAD_BLOCKED_IPS:"loadDdosBlockedIps"},je={namespaced:!0,state:()=>({module:"ddos",selectedItem:(0,q.z)(),checkedItems:[],screenMode:"list",items:[],blockedIps:[],searchText:""}),mutations:{[c.RESET_ITEMS](s){s.items=[]},[c.ADD_ITEM](s,t){s.items.push(t),s.items.sort((o,n)=>n.instanceOids.length-o.instanceOids.length)},[c.DELETE_ITEM](s,t){s.items=s.items.filter(o=>o.domainId!==t.domain&&o.sequence!==t.sequence)},[c.SELECT_ITEM](s,t){s.screenMode="modify",s.selectedItem=t},[c.RESET_BLOCKED_IPS](s){s.blockedIps=[]},[c.ADD_BLOCKED_IP](s,t){s.blockedIps.push(t)},[c.UPDATE_BLOCKED_IP_ROWS](s,t){const o=s.blockedIps.filter(n=>n.domainId===t.domainId);o.length===1&&(o[0].rows=[...o[0].rows,...t.rows])},[c.END_BLOCKED_IP](s,t){const o=s.blockedIps.filter(n=>n.domainId===t);o.length===1&&(o[0].isLoading=!1)},[c.CHANGE_SCREEN_MODE](s,t){s.screenMode=t,t!=="modify"&&(s.selectedItem=(0,q.z)())},[c.CHANGE_SEARCH_TEXT](s,t){s.searchText=t},[c.UPDATE_CHECKED_ITEMS](s,t){s.checkedItems=t}},actions:{async[E.SAVE_ITEM]({commit:s},t){const{data:o}=await D.A.post("/responseRule/repetitive-call/set",(0,Z.$W)({sid:t.domainId,seq:t.sequence,oids:t.instanceOids,measureTime:t.measureTime,callCount:t.callCount,rejectType:t.rejectType,rejectMessage:t.rejectMessage,rejectUrl:t.rejectUrl,allowIpAddresses:t.allowIpAddresses,blockIpAddresses:t.blockIpAddresses,blockingUrls:t.blockingUrls,checkOnlyClientId:t.checkOnlyClientId,checkOnlySameUrlCall:t.checkOnlySameUrlCall}));o&&s(c.CHANGE_SCREEN_MODE,"list")},async[E.DELETE_ITEM]({commit:s,state:t}){const{data:o}=await D.A.post("/responseRule/repetitive-call/remove",(0,Z.$W)({sid:t.selectedItem.domainId,seq:t.selectedItem.sequence}));o&&s(c.CHANGE_SCREEN_MODE,"list")},async[E.DELETE_ITEMS]({commit:s,state:t}){for(let o=0;o<t.checkedItems.length;o++){const n=t.checkedItems[o],{data:m}=await D.A.post("/responseRule/repetitive-call/remove",(0,Z.$W)({sid:n.domainId,seq:n.sequence}));m&&s(c.DELETE_ITEM,n)}},async[E.LOAD_ITEMS]({commit:s},t){const{data:o}=await D.A.get("/responseRule/repetitive-call/list",{params:{format:"json",sid:t.domainId}});o.forEach(n=>{const m={domainId:t.domainId,sequence:n.seq,subject:t.fullName,measureTime:n.measureTime,callCount:n.callCount,rejectType:n.rejectType,rejectMessage:n.rejectMessage,rejectUrl:n.rejectUrl,instanceOids:n.oids,allowIpAddresses:n.allowIpAddresses,blockIpAddresses:n.blockIpAddresses,blockingUrls:n.blockingUrls,checkOnlyClientId:n.checkOnlyClientId,checkOnlySameUrlCall:n.checkOnlySameUrlCall};n.oids.length>0?D.A.get("/agent/names/oids",{params:{format:"json",sid:t.domainId,oids:n.oids}}).then(p=>{s(c.ADD_ITEM,{...m,instanceNames:p.data.length===n.oids.length?p.data:n.oids.map(d=>`${d}`)})}):s(c.ADD_ITEM,{...m,instanceNames:[]})})},async[E.LOAD_BLOCKED_IPS]({state:s,commit:t},o){const n=s.searchText,{data:m}=await D.A.get("/agent/names",{params:{format:"json",sid:o.domainId,code:Oe.qA.REPETITIVE_CALL}}),p=m.filter(a=>a.statusMsg==="Supported");t(c.ADD_BLOCKED_IP,{domainId:o.domainId,parentNames:o.parentNames,rows:[],isLoading:!0});let d=0;p.forEach(a=>{const{shortName:l,oid:r}=a;D.A.get("/responseRule/ddos/ips",{params:{sid:o.domainId,oid:r}}).then(_=>{_.data.length>0&&t(c.UPDATE_BLOCKED_IP_ROWS,{domainId:o.domainId,rows:_.data.filter(C=>n!==""&&(C.ip.startsWith(n)||C.blockingUrl.startsWith(n))||n==="").map(C=>({blockingUrl:C.blockingUrl,ip:C.ip,time:(0,ne.qm)(C.time).format(ne.fp.longWithSec),type:C.type,instanceName:l}))}),d+=1,d===p.length&&t(c.END_BLOCKED_IP,o.domainId)})})}}};oe.A.hasModule("ddos")||oe.A.registerModule("ddos",je);const Kt=null,Ne=(0,e.pM)({components:{Card:Be},setup(){const s=(0,e.WQ)("i18n",{}),t=(0,b.P)("domain"),o=(0,e.EW)(()=>t.getters("sidList")),{fullName:n,setFullName:m}=(0,Y.bs)(t.state.domainList),{state:p,commit:d,dispatch:a}=(0,b.P)("ddos"),l=(0,e.EW)(()=>p.items),r=k=>{d(c.SELECT_ITEM,k)},_=(k,g)=>{g?d(c.UPDATE_CHECKED_ITEMS,[...p.checkedItems,k]):d(c.UPDATE_CHECKED_ITEMS,p.checkedItems.filter(u=>u.domainId!==k.domainId&&u.sequence!==k.sequence))},C=k=>p.checkedItems.filter(g=>g.domainId===k.domainId&&g.sequence===k.sequence).length>0;return(0,e.nT)(()=>{d(c.RESET_ITEMS),o.value.forEach(k=>{m(k),a(E.LOAD_ITEMS,{fullName:(0,e.tB)(n).value,domainId:k})})}),{i18n:s,cardItems:l,onClickCardItem:r,onCheckCardItem:_,isChecked:C}}}),Ue=(0,L.A)(Ne,[["render",v]]),we={class:"blocked-ips"};function $e(s,t,o,n,m,p){const d=(0,e.g2)("blocked-ip-comp");return(0,e.uX)(),(0,e.CE)("div",we,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(s.blockedIps,(a,l)=>((0,e.uX)(),(0,e.Wv)(d,{key:l,ip:a},null,8,["ip"]))),128))])}const Xe={class:"subject"},Re={class:"parent-names"},Ke={class:"name"},Pe={class:"count"};function He(s,t,o,n,m,p){const d=(0,e.g2)("svg-icon"),a=(0,e.g2)("loading-indicator"),l=(0,e.g2)("setting-table");return s.existData?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,e.C4)(s.rootClass)},[(0,e.Lk)("div",Xe,[(0,e.Lk)("div",Re,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(s.parentNames,(r,_)=>((0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.eW)((0,e.v_)(r)+" ",1),_<s.parentNames.length-1?((0,e.uX)(),(0,e.Wv)(d,{key:0,icon:s.subjectOptions.iconType,width:s.subjectOptions.iconSize,height:s.subjectOptions.iconSize},null,8,["icon","width","height"])):(0,e.Q3)("v-if",!0)],64))),256))]),t[0]||(t[0]=(0,e.eW)()),(0,e.Lk)("div",Ke,(0,e.v_)(s.simpleName),1),t[1]||(t[1]=(0,e.eW)()),(0,e.Lk)("div",Pe,(0,e.v_)(s.i18n.blockedIp)+": "+(0,e.v_)(s.rows.length.toLocaleForAries()),1)]),t[7]||(t[7]=(0,e.eW)()),s.isLoading?((0,e.uX)(),(0,e.Wv)(a,{key:0})):(0,e.Q3)("v-if",!0),t[8]||(t[8]=(0,e.eW)()),(0,e.bF)(l,{columns:s.columns,rows:s.rows,checkable:!1,selectable:!1,"min-width":700},{row:(0,e.k6)(({data:r,index:_})=>[(0,e.Lk)("td",null,(0,e.v_)((_+1).toLocaleForAries()),1),t[2]||(t[2]=(0,e.eW)()),(0,e.Lk)("td",null,(0,e.v_)(r.time),1),t[3]||(t[3]=(0,e.eW)()),(0,e.Lk)("td",null,(0,e.v_)(r.instanceName),1),t[4]||(t[4]=(0,e.eW)()),(0,e.Lk)("td",null,(0,e.v_)(r.type===1?s.i18n.manual:s.i18n.auto),1),t[5]||(t[5]=(0,e.eW)()),(0,e.Lk)("td",null,(0,e.v_)(r.ip),1),t[6]||(t[6]=(0,e.eW)()),(0,e.Lk)("td",null,(0,e.v_)(r.blockingUrl),1)]),_:1},8,["columns","rows"])],2)):(0,e.Q3)("v-if",!0)}var Qe=i(62078),Ge=i(40317);const ze=(0,e.pM)({components:{SvgIcon:y.Ah,LoadingIndicator:Qe.A,SettingTable:Ge.A},props:{ip:{type:Object,required:!0}},setup(s){const t=(0,e.WQ)("i18n",{no:"No.",date:"Date",instance:"Instance",ipRejectType:"Reject type",ip:"IP",url:"URL",manual:"Manual",auto:"Auto"}),o=[{field:null,label:t.no,width:100},{field:"time",label:t.date},{field:"instanceName",label:t.instance},{field:"type",label:t.ipRejectType},{field:"ip",label:t.ip},{field:"blockingUrl",label:t.url,width:"30%"}],n={iconType:y.B2.arrowRight,iconSize:16},m=(0,e.KR)([...s.ip.parentNames].reverse()),p=(0,e.KR)(m.value.pop()),d=(0,e.KR)(["blocked-ip"]),a=(0,e.KR)(!0);return(0,e.wB)(()=>s.ip.isLoading,l=>{!l&&s.ip.rows.length===0&&(d.value=["blocked-ip","hide"],setTimeout(()=>{a.value=!1},1e3))}),{i18n:t,columns:o,subjectOptions:n,parentNames:m,simpleName:p,rootClass:d,existData:a,domainId:(0,e.lW)(s.ip,"domainId"),rows:(0,e.lW)(s.ip,"rows"),isLoading:(0,e.lW)(s.ip,"isLoading")}}}),Ve=(0,L.A)(ze,[["render",He],["__scopeId","data-v-5431882a"]]),Je=(0,e.pM)({components:{BlockedIpComp:Ve},setup(s){const t=(0,b.P)("domain"),o=(0,e.EW)(()=>t.getters("sidList")),{parentNames:n,setParentNames:m}=(0,Y.cl)(t.state.domainList),{state:p,commit:d,dispatch:a}=(0,b.P)("ddos"),l=(0,e.EW)(()=>p.blockedIps);return(0,e.nT)(()=>{d(c.RESET_BLOCKED_IPS),o.value.forEach(r=>{m(r),a(E.LOAD_BLOCKED_IPS,{parentNames:(0,e.tB)(n).value,domainId:r})})}),{blockedIps:l}}}),Ye=(0,L.A)(Je,[["render",$e],["__scopeId","data-v-5db6228c"]]),Ze={class:"card-form"},qe={class:"row"},xe={class:"left"},et={class:"right full-name"},tt=["innerHTML"],st=["innerHTML"],nt={class:"row"},ot={class:"left"},it={class:"right"},dt={class:"row"},lt={class:"left"},at={class:"right"},rt={class:"description"},ut={class:"col-group"},pt={class:"col"},ct={class:"sub-title"},mt={class:"col"},_t={class:"sub-title"},vt={class:"types"},kt={class:"type"},Ct={class:"type"},It={class:"message"},gt={class:"row"},Et={class:"left"},ft={class:"right"},yt={class:"row"},bt={class:"left"},Tt={class:"right"},Lt={class:"footer"};function Dt(s,t,o,n,m,p){const d=(0,e.g2)("instance-setting"),a=(0,e.g2)("format-number-input"),l=(0,e.g2)("checkbox"),r=(0,e.g2)("svg-icon"),_=(0,e.g2)("reject-types"),C=(0,e.g2)("ip-setting"),k=(0,e.g2)("btn"),g=(0,e.g2)("alert-window");return(0,e.uX)(),(0,e.CE)("div",Ze,[(0,e.Lk)("div",qe,[(0,e.Lk)("div",xe,(0,e.v_)(s.i18n.domain),1),t[13]||(t[13]=(0,e.eW)()),(0,e.Lk)("div",et,[s.isNew?((0,e.uX)(),(0,e.CE)("div",{key:0,innerHTML:s.fullName},null,8,tt)):((0,e.uX)(),(0,e.CE)("div",{key:1,innerHTML:s.formData.subject},null,8,st))])]),t[28]||(t[28]=(0,e.eW)()),(0,e.Lk)("div",nt,[(0,e.Lk)("div",ot,(0,e.v_)(s.i18n.instance),1),t[14]||(t[14]=(0,e.eW)()),(0,e.Lk)("div",it,[(0,e.bF)(d,{description:s.i18n.M0701,"selected-domain-id":s.formData.domainId,"instance-names":s.formData.instanceNames,"onUpdate:instanceNames":t[0]||(t[0]=u=>s.formData.instanceNames=u),"instance-oids":s.formData.instanceOids,"onUpdate:instanceOids":t[1]||(t[1]=u=>s.formData.instanceOids=u)},null,8,["description","selected-domain-id","instance-names","instance-oids"])])]),t[29]||(t[29]=(0,e.eW)()),(0,e.Lk)("div",dt,[(0,e.Lk)("div",lt,(0,e.v_)(s.i18n.filterValue),1),t[22]||(t[22]=(0,e.eW)()),(0,e.Lk)("div",at,[(0,e.Lk)("div",rt,(0,e.v_)(s.i18n.M0702),1),t[20]||(t[20]=(0,e.eW)()),(0,e.Lk)("div",ut,[(0,e.Lk)("div",pt,[(0,e.Lk)("div",ct,(0,e.v_)(s.i18n.dimensionTime)+" ("+(0,e.v_)(s.i18n.seconds)+`)
                        `,1),t[15]||(t[15]=(0,e.eW)()),(0,e.bF)(a,{min:0,width:120,value:s.formData.measureTime,"onUpdate:value":t[2]||(t[2]=u=>s.formData.measureTime=u)},null,8,["value"])]),t[17]||(t[17]=(0,e.eW)()),(0,e.Lk)("div",mt,[(0,e.Lk)("div",_t,(0,e.v_)(s.i18n.repeatCount),1),t[16]||(t[16]=(0,e.eW)()),(0,e.bF)(a,{min:0,width:120,value:s.formData.callCount,"onUpdate:value":t[3]||(t[3]=u=>s.formData.callCount=u)},null,8,["value"])])]),t[21]||(t[21]=(0,e.eW)()),(0,e.Lk)("div",vt,[(0,e.Lk)("div",kt,[(0,e.bF)(l,{label:s.i18n.M0498,active:s.formData.checkOnlyClientId,"onUpdate:active":t[4]||(t[4]=u=>s.formData.checkOnlyClientId=u)},null,8,["label","active"])]),t[19]||(t[19]=(0,e.eW)()),(0,e.Lk)("div",Ct,[(0,e.bF)(l,{label:s.i18n.M0596,active:s.formData.checkOnlySameUrlCall,"onUpdate:active":t[5]||(t[5]=u=>s.formData.checkOnlySameUrlCall=u)},null,8,["label","active"]),t[18]||(t[18]=(0,e.eW)()),(0,e.Lk)("div",It,[(0,e.bF)(r,{icon:s.iconOptions.type,width:s.iconOptions.size,height:s.iconOptions.size},null,8,["icon","width","height"]),(0,e.eW)(" "+(0,e.v_)(s.i18n.M0597),1)])])])])]),t[30]||(t[30]=(0,e.eW)()),(0,e.Lk)("div",gt,[(0,e.Lk)("div",Et,(0,e.v_)(s.i18n.M0217),1),t[23]||(t[23]=(0,e.eW)()),(0,e.Lk)("div",ft,[(0,e.bF)(_,{value:s.formData.rejectType,"onUpdate:value":t[6]||(t[6]=u=>s.formData.rejectType=u),message:s.formData.rejectMessage,"onUpdate:message":t[7]||(t[7]=u=>s.formData.rejectMessage=u),url:s.formData.rejectUrl,"onUpdate:url":t[8]||(t[8]=u=>s.formData.rejectUrl=u),"is-plc":!1},null,8,["value","message","url"])])]),t[31]||(t[31]=(0,e.eW)()),(0,e.Lk)("div",yt,[(0,e.Lk)("div",bt,(0,e.v_)(s.i18n.ipSpecificSetting),1),t[26]||(t[26]=(0,e.eW)()),(0,e.Lk)("div",Tt,[(0,e.bF)(C,{type:"info",title:s.i18n.ipWhitelist,items:s.formData.allowIpAddresses,"onUpdate:items":t[9]||(t[9]=u=>s.formData.allowIpAddresses=u)},null,8,["title","items"]),t[24]||(t[24]=(0,e.eW)()),(0,e.bF)(C,{type:"fatal",title:s.i18n.ipBlacklist,items:s.formData.blockIpAddresses,"onUpdate:items":t[10]||(t[10]=u=>s.formData.blockIpAddresses=u)},null,8,["title","items"]),t[25]||(t[25]=(0,e.eW)()),(0,e.bF)(C,{type:"fatal",title:s.i18n.urlBlacklist,"is-url":!0,items:s.formData.blockingUrls,"onUpdate:items":t[11]||(t[11]=u=>s.formData.blockingUrls=u)},null,8,["title","items"])])]),t[32]||(t[32]=(0,e.eW)()),(0,e.Lk)("div",Lt,[(0,e.bF)(k,{class:"border-none",normal:"",items:[{text:s.i18n.cancel}],onClick:t[12]||(t[12]=()=>s.$emit("cancel"))},null,8,["items"]),t[27]||(t[27]=(0,e.eW)()),(0,e.bF)(k,{class:"primary",normal:"",items:[{text:s.isNew?s.i18n.add:s.i18n.saveChanges}],onClick:s.onClickSaveBtn},null,8,["items","onClick"])]),t[33]||(t[33]=(0,e.eW)()),s.alertMessage?((0,e.uX)(),(0,e.Wv)(g,{key:0,message:s.alertMessage,onCancel:s.onHideAlertMessage},null,8,["message","onCancel"])):(0,e.Q3)("v-if",!0)])}var ht=i(97953),At=i(90194),Wt=i(46555),Mt=i(52785),St=i(86471),Ft=i(57222);const Bt=(0,e.pM)({components:{FormatNumberInput:ht.A,Btn:F.A,Checkbox:se.A,SvgIcon:y.Ah,RejectTypes:Mt.A,InstanceSetting:Wt.A,AlertWindow:At.A,IpSetting:St.A},props:{isNew:{type:Boolean,required:!0}},emits:["cancel"],setup(s,{emit:t}){const o=(0,b.P)("domain"),{state:n,dispatch:m}=(0,b.P)("ddos"),p=(0,e.WQ)("i18n",{}),d=(0,e.KR)(""),a=(0,e.EW)(()=>o.state.selectedOne),l=(0,e.Kh)(s.isNew?{...n.selectedItem,domainId:a.value.data.sid}:{...n.selectedItem}),{fullName:r,setFullName:_}=(0,Y.bs)(o.state.domainList);_(l.domainId);const C=async()=>{const{result:g,existNames:u}=(0,q.g)(l.sequence,l.domainId,l.instanceOids,l.instanceNames,n.items);if(g){d.value=`${p.M0226} (${u})`;return}if(l.rejectType===1&&l.rejectMessage.trim()===""){d.value=`${p.M0275}`;return}if(l.rejectType===2&&l.rejectUrl.trim()===""){d.value=`${p.M0069}`;return}await m(E.SAVE_ITEM,l),t("cancel")},k=()=>{d.value=""};return(0,Ft.v)(()=>{t("cancel")}),{iconOptions:{type:y.B2.info,size:14},domainGroupTree:o.state.domainList,i18n:p,selectedDomain:a,formData:l,alertMessage:d,fullName:r,onClickSaveBtn:C,onHideAlertMessage:k,...(0,e.QW)(s)}}}),Ot=(0,L.A)(Bt,[["render",Dt],["__scopeId","data-v-acd89730"]]);var jt=i(10935),N=i(59624);const Nt=(0,e.pM)({components:{Btn:F.A,Search:Q.A,Tab:B.A,DomainTreeLayer:G.A,BaseHeader:z.A,Cards:Ue,BlockedIps:Ye,CardForm:Ot,ConfirmWindow:jt.A},setup(){(0,e.Gt)("i18n",N.A);const s=(0,b.P)("domain"),t=(0,e.EW)(()=>s.state.selectedOne),{state:o,commit:n,dispatch:m}=(0,b.P)("ddos"),p=(0,e.EW)(()=>o.screenMode),d=(0,e.EW)(()=>o.searchText),a=(0,e.EW)(()=>o.checkedItems),l=[{key:"setting",value:N.A.setting},{key:"blockedIp",value:N.A.blockedIp}],r=(0,e.KR)("setting"),_=(0,e.KR)(""),C=(0,e.KR)(window.innerWidth>1280),k=()=>{n(c.CHANGE_SCREEN_MODE,"write")},g=x=>{r.value=x,ie("")},u=()=>{m(E.DELETE_ITEM)},wt=()=>{m(E.DELETE_ITEMS),_.value=""},$t=()=>{n(c.CHANGE_SCREEN_MODE,"list")},ie=x=>{n(c.CHANGE_SEARCH_TEXT,x)};return(0,e.wB)(t,()=>{p.value!=="list"&&n(c.CHANGE_SCREEN_MODE,"list")}),{i18nMessages:N.A,iconTypes:{trashcan:y.B2.trashcan,add:y.B2.add},tabItems:l,activeTab:r,screenMode:p,searchText:d,confirmMessage:_,checkedItems:a,selectedDomain:t,showDomainTreeLayer:C,onClickAddSetting:k,onChangeActiveTab:g,onClickDeleteSetting:u,onClickDeleteSettings:wt,onClickBackBtn:$t,onChangeSearchText:ie}}}),Ut=(0,L.A)(Nt,[["render",H]])}}]);
