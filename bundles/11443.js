(()=>{"use strict";var p={11443:(t,s,n)=>{var e=n(31472),a=n(6687);const i=a.A;var o=n(41091);new o.Ay("UserdefinedDashboard").version(1).stores({thumbnails:"++id,dashboardKey,theme"});class _ extends o.Ay{patterns;settings;constructor(){super("XViewPatternAnalysis"),this.version(1).stores({patterns:"++id, name, type, status, enable, image, embedding, description, createUser, createTimestamp",settings:"++id, enableRealtimeMessage, enableAutoAdjustAllowance, allowanceForTransaction, allowanceForError, allowanceForPatternRecognition"})}}const E=new _;var O=n(3317);importScripts("/script/tf.js"),self.onmessage=async({data:l})=>{const f=await E.settings.get(1);if(f!==void 0&&f.enableRealtimeMessage===!0){const d=l.form,u=l.rows,R=l.range,A=l.axisMax;if(u.length>0){n.g.tf.engine().startScope();const m=await n.g.tf.loadGraphModel(e.Qv),C=(0,O.d)(u,d.createTimestamp-R,R,A),g=[1,e.H,e.W,1],v=n.g.tf.tensor(C,g),L=m.predict(v).arraySync()[0];n.g.tf.engine().endScope(),d.embedding.push(L);const{data:b}=await i.put(`${e.f0}/pattern/${d.id}`,d);b==="OK"&&E.patterns.add(d)}}}},31472:(t,s,n)=>{n.d(s,{H:()=>c,Qv:()=>i,W:()=>o,f0:()=>a});var e=n(86617);const a="/api-v2/manage/xview-pattern-recognition",i="/script/tf-model/reward_v20230630_2/model.json",o=60,c=60,_=54,E=5,O=5,l=null,f={[e.i8.HTTP_IO_EXCEPTION]:5,[e.i8.HTTP_404_ERROR]:1,[e.i8.OUT_OF_MEMORY]:5,[e.i8.SERVICE_EXCEPTION]:5,[e.i8.SERVICE_ERROR]:1,[e.i8.DB_CONNECTION_UNCLOSED]:5,[e.i8.DB_STATEMENT_UNCLOSED]:1,[e.i8.DB_RESULTSET_UNCLOSED]:1,[e.i8.PLC_REJECTED]:5,[e.i8.DEADLOCK]:5,[e.i8.METHOD_EXCEPTION]:1,[e.i8.RECURSIVE_CALL]:1,[e.i8.REPETITIVE_CALL]:1,[e.i8.SQL_EXCEPTION]:4,[e.i8.SQL_TOOMANY_FETCH]:5,[e.i8.EXTERNALCALL_EXCEPTION]:5,[e.i8.DB_CONNECTION_FAIL]:5,[e.i8.DB_UN_COMMIT_ROLLBACK]:1,[e.i8.DB_CONNECTION_ILLEGAL_ACCESS]:1,[e.i8.CORE_ERROR]:5,[e.i8.COMPILE_ERROR]:3,[e.i8.PARSE_ERROR]:3,[e.i8.PHP_WARNING]:1,[e.i8.NATIVE_CRITICAL_ERROR]:5,[e.i8.BAD_RESPONSE_TIME_APPLICATION]:3,[e.i8.BAD_RESPONSE_TIME_SQL]:5,[e.i8.BAD_RESPONSE_TIME_EXTERNAL_CALL]:5,[e.i8.AGENT_STOP]:5,[e.i8.AGENT_START]:1,[e.i8.AGENT_RECONNECT]:1,[e.i8.THREAD_KILL_MANUAL]:1,[e.i8.THREAD_KILL_AUTO]:1}}},T={};function r(t){var s=T[t];if(s!==void 0)return s.exports;var n=T[t]={exports:{}};return p[t].call(n.exports,n,n.exports,r),n.exports}r.m=p,r.x=()=>{var t=r.O(void 0,[6687,41091,18757],()=>r(11443));return t=r.O(t),t},(()=>{var t=[];r.O=(s,n,e,a)=>{if(n){a=a||0;for(var i=t.length;i>0&&t[i-1][2]>a;i--)t[i]=t[i-1];t[i]=[n,e,a];return}for(var o=1/0,i=0;i<t.length;i++){for(var[n,e,a]=t[i],c=!0,_=0;_<n.length;_++)(a&!1||o>=a)&&Object.keys(r.O).every(u=>r.O[u](n[_]))?n.splice(_--,1):(c=!1,a<o&&(o=a));if(c){t.splice(i--,1);var E=e();E!==void 0&&(s=E)}}return s}})(),r.d=(t,s)=>{for(var n in s)r.o(s,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:s[n]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce((s,n)=>(r.f[n](t,s),s),[])),r.u=t=>""+t+".js",r.miniCssF=t=>{},r.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),r.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),r.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.p="/bundles/",(()=>{var t={11443:1},s=a=>{var[i,o,c]=a;for(var _ in o)r.o(o,_)&&(r.m[_]=o[_]);for(c&&c(r);i.length;)t[i.pop()]=1;e(a)};r.f.i=(a,i)=>{t[a]||importScripts(r.p+r.u(a))};var n=self.webpackChunkjennifer5_frontend=self.webpackChunkjennifer5_frontend||[],e=n.push.bind(n);n.push=s})(),(()=>{var t=r.x;r.x=()=>Promise.all([6687,41091,18757].map(r.e,r)).then(t)})();var N=r.x()})();
