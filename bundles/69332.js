"use strict";(self.webpackChunkjennifer5_frontend=self.webpackChunkjennifer5_frontend||[]).push([[2009,26902,69332,77656,99210],{44:(Mt,He,c)=>{c.d(He,{$$:()=>v,C1:()=>B,C5:()=>qe,G_:()=>ve,HD:()=>x,Hc:()=>ne,I$:()=>d,In:()=>F,Ip:()=>he,L4:()=>w,L9:()=>m,Oc:()=>Pe,Q1:()=>Re,Qf:()=>_t,T5:()=>E,T9:()=>re,UL:()=>D,Uk:()=>ce,XJ:()=>Ae,YS:()=>S,ZB:()=>ae,Zg:()=>A,_$:()=>R,c1:()=>C,cw:()=>O,eU:()=>it,eY:()=>W,h9:()=>z,jO:()=>me,jr:()=>Ce,kP:()=>Le,lW:()=>Q,nZ:()=>j,r:()=>K,rv:()=>$,t0:()=>Ke,uN:()=>I,xO:()=>N,xW:()=>Y,yq:()=>q,zU:()=>Ze});var u=c(45573),G=c(34920),U=c(24167),P=c(48391),M=c(41063);const w=(0,U.x1)("input.background",{dark:"#3C3C3C",light:G.Q1.white,hcDark:G.Q1.black,hcLight:G.Q1.white},u.kg("inputBoxBackground","Input box background.")),O=(0,U.x1)("input.foreground",P.CU,u.kg("inputBoxForeground","Input box foreground.")),A=(0,U.x1)("input.border",{dark:null,light:null,hcDark:P.b1,hcLight:P.b1},u.kg("inputBoxBorder","Input box border.")),I=(0,U.x1)("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:P.b1,hcLight:P.b1},u.kg("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),b=(0,U.x1)("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},u.kg("inputOption.hoverBackground","Background color of activated options in input fields.")),C=(0,U.x1)("inputOption.activeBackground",{dark:(0,U.JO)(P.tA,.4),light:(0,U.JO)(P.tA,.2),hcDark:G.Q1.transparent,hcLight:G.Q1.transparent},u.kg("inputOption.activeBackground","Background hover color of options in input fields.")),v=(0,U.x1)("inputOption.activeForeground",{dark:G.Q1.white,light:G.Q1.black,hcDark:P.CU,hcLight:P.CU},u.kg("inputOption.activeForeground","Foreground color of activated options in input fields.")),_=(0,U.x1)("input.placeholderForeground",{light:(0,U.JO)(P.CU,.5),dark:(0,U.JO)(P.CU,.5),hcDark:(0,U.JO)(P.CU,.7),hcLight:(0,U.JO)(P.CU,.7)},u.kg("inputPlaceholderForeground","Input box foreground color for placeholder text.")),d=(0,U.x1)("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:G.Q1.black,hcLight:G.Q1.white},u.kg("inputValidationInfoBackground","Input validation background color for information severity.")),m=(0,U.x1)("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:P.CU},u.kg("inputValidationInfoForeground","Input validation foreground color for information severity.")),S=(0,U.x1)("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:P.b1,hcLight:P.b1},u.kg("inputValidationInfoBorder","Input validation border color for information severity.")),D=(0,U.x1)("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:G.Q1.black,hcLight:G.Q1.white},u.kg("inputValidationWarningBackground","Input validation background color for warning severity.")),E=(0,U.x1)("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:P.CU},u.kg("inputValidationWarningForeground","Input validation foreground color for warning severity.")),B=(0,U.x1)("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:P.b1,hcLight:P.b1},u.kg("inputValidationWarningBorder","Input validation border color for warning severity.")),R=(0,U.x1)("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:G.Q1.black,hcLight:G.Q1.white},u.kg("inputValidationErrorBackground","Input validation background color for error severity.")),z=(0,U.x1)("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:P.CU},u.kg("inputValidationErrorForeground","Input validation foreground color for error severity.")),W=(0,U.x1)("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:P.b1,hcLight:P.b1},u.kg("inputValidationErrorBorder","Input validation border color for error severity.")),$=(0,U.x1)("dropdown.background",{dark:"#3C3C3C",light:G.Q1.white,hcDark:G.Q1.black,hcLight:G.Q1.white},u.kg("dropdownBackground","Dropdown background.")),Q=(0,U.x1)("dropdown.listBackground",{dark:null,light:null,hcDark:G.Q1.black,hcLight:G.Q1.white},u.kg("dropdownListBackground","Dropdown list background.")),q=(0,U.x1)("dropdown.foreground",{dark:"#F0F0F0",light:P.CU,hcDark:G.Q1.white,hcLight:P.CU},u.kg("dropdownForeground","Dropdown foreground.")),ne=(0,U.x1)("dropdown.border",{dark:$,light:"#CECECE",hcDark:P.b1,hcLight:P.b1},u.kg("dropdownBorder","Dropdown border.")),ve=(0,U.x1)("button.foreground",G.Q1.white,u.kg("buttonForeground","Button foreground color.")),Re=(0,U.x1)("button.separator",(0,U.JO)(ve,.4),u.kg("buttonSeparator","Button separator color.")),Ae=(0,U.x1)("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},u.kg("buttonBackground","Button background color.")),re=(0,U.x1)("button.hoverBackground",{dark:(0,U.a)(Ae,.2),light:(0,U.e$)(Ae,.2),hcDark:Ae,hcLight:Ae},u.kg("buttonHoverBackground","Button background color when hovering.")),K=(0,U.x1)("button.border",P.b1,u.kg("buttonBorder","Button border color.")),F=(0,U.x1)("button.secondaryForeground",{dark:G.Q1.white,light:G.Q1.white,hcDark:G.Q1.white,hcLight:P.CU},u.kg("buttonSecondaryForeground","Secondary button foreground color.")),N=(0,U.x1)("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:G.Q1.white},u.kg("buttonSecondaryBackground","Secondary button background color.")),j=(0,U.x1)("button.secondaryHoverBackground",{dark:(0,U.a)(N,.2),light:(0,U.e$)(N,.2),hcDark:null,hcLight:null},u.kg("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),me=(0,U.x1)("radio.activeForeground",v,u.kg("radioActiveForeground","Foreground color of active radio option.")),ce=(0,U.x1)("radio.activeBackground",C,u.kg("radioBackground","Background color of active radio option.")),he=(0,U.x1)("radio.activeBorder",I,u.kg("radioActiveBorder","Border color of the active radio option.")),Le=(0,U.x1)("radio.inactiveForeground",null,u.kg("radioInactiveForeground","Foreground color of inactive radio option.")),Y=(0,U.x1)("radio.inactiveBackground",null,u.kg("radioInactiveBackground","Background color of inactive radio option.")),ae=(0,U.x1)("radio.inactiveBorder",{light:(0,U.JO)(me,.2),dark:(0,U.JO)(me,.2),hcDark:(0,U.JO)(me,.4),hcLight:(0,U.JO)(me,.2)},u.kg("radioInactiveBorder","Border color of the inactive radio option.")),Ce=(0,U.x1)("radio.inactiveHoverBackground",b,u.kg("radioHoverBackground","Background color of inactive active radio option when hovering.")),Pe=(0,U.x1)("checkbox.background",$,u.kg("checkbox.background","Background color of checkbox widget.")),ye=(0,U.x1)("checkbox.selectBackground",M.Cg,u.kg("checkbox.select.background","Background color of checkbox widget when the element it's in is selected.")),Ke=(0,U.x1)("checkbox.foreground",q,u.kg("checkbox.foreground","Foreground color of checkbox widget.")),qe=(0,U.x1)("checkbox.border",ne,u.kg("checkbox.border","Border color of checkbox widget.")),Ue=(0,U.x1)("checkbox.selectBorder",P.t4,u.kg("checkbox.select.border","Border color of checkbox widget when the element it's in is selected.")),x=(0,U.x1)("keybindingLabel.background",{dark:new G.Q1(new G.bU(128,128,128,.17)),light:new G.Q1(new G.bU(221,221,221,.4)),hcDark:G.Q1.transparent,hcLight:G.Q1.transparent},u.kg("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),it=(0,U.x1)("keybindingLabel.foreground",{dark:G.Q1.fromHex("#CCCCCC"),light:G.Q1.fromHex("#555555"),hcDark:G.Q1.white,hcLight:P.CU},u.kg("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),Ze=(0,U.x1)("keybindingLabel.border",{dark:new G.Q1(new G.bU(51,51,51,.6)),light:new G.Q1(new G.bU(204,204,204,.4)),hcDark:new G.Q1(new G.bU(111,195,223)),hcLight:P.b1},u.kg("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),_t=(0,U.x1)("keybindingLabel.bottomBorder",{dark:new G.Q1(new G.bU(68,68,68,.6)),light:new G.Q1(new G.bU(187,187,187,.4)),hcDark:new G.Q1(new G.bU(111,195,223)),hcLight:P.CU},u.kg("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut."))},926:(Mt,He,c)=>{c.d(He,{e:()=>P});var u=c(38594),G=c(42008),U=c(90692);const P={clipboard:{writeText:U.ib||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:U.ib||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:U.ib||u.Qu()?0:navigator.keyboard||u.nr?1:2,touch:"ontouchstart"in G.G||navigator.maxTouchPoints>0,pointerEvents:G.G.PointerEvent&&("ontouchstart"in G.G||navigator.maxTouchPoints>0)}},1822:(Mt,He,c)=>{c.d(He,{yE:()=>P});var u=c(56491),G=c(60599);class U{constructor(v,_,d,m,S,D,E){this._forceIntegerValues=v,this._scrollStateBrand=void 0,this._forceIntegerValues&&(_=_|0,d=d|0,m=m|0,S=S|0,D=D|0,E=E|0),this.rawScrollLeft=m,this.rawScrollTop=E,_<0&&(_=0),m+_>d&&(m=d-_),m<0&&(m=0),S<0&&(S=0),E+S>D&&(E=D-S),E<0&&(E=0),this.width=_,this.scrollWidth=d,this.scrollLeft=m,this.height=S,this.scrollHeight=D,this.scrollTop=E}equals(v){return this.rawScrollLeft===v.rawScrollLeft&&this.rawScrollTop===v.rawScrollTop&&this.width===v.width&&this.scrollWidth===v.scrollWidth&&this.scrollLeft===v.scrollLeft&&this.height===v.height&&this.scrollHeight===v.scrollHeight&&this.scrollTop===v.scrollTop}withScrollDimensions(v,_){return new U(this._forceIntegerValues,typeof v.width<"u"?v.width:this.width,typeof v.scrollWidth<"u"?v.scrollWidth:this.scrollWidth,_?this.rawScrollLeft:this.scrollLeft,typeof v.height<"u"?v.height:this.height,typeof v.scrollHeight<"u"?v.scrollHeight:this.scrollHeight,_?this.rawScrollTop:this.scrollTop)}withScrollPosition(v){return new U(this._forceIntegerValues,this.width,this.scrollWidth,typeof v.scrollLeft<"u"?v.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof v.scrollTop<"u"?v.scrollTop:this.rawScrollTop)}createScrollEvent(v,_){const d=this.width!==v.width,m=this.scrollWidth!==v.scrollWidth,S=this.scrollLeft!==v.scrollLeft,D=this.height!==v.height,E=this.scrollHeight!==v.scrollHeight,B=this.scrollTop!==v.scrollTop;return{inSmoothScrolling:_,oldWidth:v.width,oldScrollWidth:v.scrollWidth,oldScrollLeft:v.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:v.height,oldScrollHeight:v.scrollHeight,oldScrollTop:v.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:d,scrollWidthChanged:m,scrollLeftChanged:S,heightChanged:D,scrollHeightChanged:E,scrollTopChanged:B}}}class P extends G.jG{constructor(v){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new u.vl),this.onScroll=this._onScroll.event,this._smoothScrollDuration=v.smoothScrollDuration,this._scheduleAtNextAnimationFrame=v.scheduleAtNextAnimationFrame,this._state=new U(v.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(v){this._smoothScrollDuration=v}validateScrollPosition(v){return this._state.withScrollPosition(v)}getScrollDimensions(){return this._state}setScrollDimensions(v,_){const d=this._state.withScrollDimensions(v,_);this._setState(d,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(v){const _=this._state.withScrollPosition(v);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(_,!1)}setScrollPositionSmooth(v,_){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(v);if(this._smoothScrolling){v={scrollLeft:typeof v.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:v.scrollLeft,scrollTop:typeof v.scrollTop>"u"?this._smoothScrolling.to.scrollTop:v.scrollTop};const d=this._state.withScrollPosition(v);if(this._smoothScrolling.to.scrollLeft===d.scrollLeft&&this._smoothScrolling.to.scrollTop===d.scrollTop)return;let m;_?m=new A(this._smoothScrolling.from,d,this._smoothScrolling.startTime,this._smoothScrolling.duration):m=this._smoothScrolling.combine(this._state,d,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=m}else{const d=this._state.withScrollPosition(v);this._smoothScrolling=A.start(this._state,d,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const v=this._smoothScrolling.tick(),_=this._state.withScrollPosition(v);if(this._setState(_,!0),!!this._smoothScrolling){if(v.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(v,_){const d=this._state;d.equals(v)||(this._state=v,this._onScroll.fire(this._state.createScrollEvent(d,_)))}}class M{constructor(v,_,d){this.scrollLeft=v,this.scrollTop=_,this.isDone=d}}function w(C,v){const _=v-C;return function(d){return C+_*b(d)}}function O(C,v,_){return function(d){return d<_?C(d/_):v((d-_)/(1-_))}}class A{constructor(v,_,d,m){this.from=v,this.to=_,this.duration=m,this.startTime=d,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(v,_,d){if(Math.abs(v-_)>2.5*d){let S,D;return v<_?(S=v+.75*d,D=_-.75*d):(S=v-.75*d,D=_+.75*d),O(w(v,S),w(D,_),.33)}return w(v,_)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(v){this.to=v.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(v){const _=(v-this.startTime)/this.duration;if(_<1){const d=this.scrollLeft(_),m=this.scrollTop(_);return new M(d,m,!1)}return new M(this.to.scrollLeft,this.to.scrollTop,!0)}combine(v,_,d){return A.start(v,_,d)}static start(v,_,d){d=d+10;const m=Date.now()-10;return new A(v,_,m,d)}}function I(C){return Math.pow(C,3)}function b(C){return 1-I(1-C)}},2009:(Mt,He,c)=>{c.r(He),c.d(He,{getIconClasses:()=>A});var u=c(54021),G=c(38266),U=c(37473),P=c(49896),M=c(55766),w=c(42640);const O=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function A(C,v,_,d,m){if(w.L.isThemeIcon(m))return[`codicon-${m.id}`,"predefined-file-icon"];if(U.r.isUri(m))return[];const S=d===M.p.ROOT_FOLDER?["rootfolder-icon"]:d===M.p.FOLDER?["folder-icon"]:["file-icon"];if(_){let D;if(_.scheme===u.ny.data)D=G.B6.parseMetaData(_).get(G.B6.META_DATA_LABEL);else{const E=_.path.match(O);E?(D=b(E[2].toLowerCase()),E[1]&&S.push(`${b(E[1].toLowerCase())}-name-dir-icon`)):D=b(_.authority.toLowerCase())}if(d===M.p.ROOT_FOLDER)S.push(`${D}-root-name-folder-icon`);else if(d===M.p.FOLDER)S.push(`${D}-name-folder-icon`);else{if(D){if(S.push(`${D}-name-file-icon`),S.push("name-file-icon"),D.length<=255){const B=D.split(".");for(let R=1;R<B.length;R++)S.push(`${B.slice(R).join(".")}-ext-file-icon`)}S.push("ext-file-icon")}const E=I(C,v,_);E&&S.push(`${b(E)}-lang-file-icon`)}}return S}function I(C,v,_){if(!_)return null;let d=null;if(_.scheme===u.ny.data){const S=G.B6.parseMetaData(_).get(G.B6.META_DATA_MIME);S&&(d=v.getLanguageIdByMimeType(S))}else{const m=C.getModel(_);m&&(d=m.getLanguageId())}return d&&d!==P.vH?d:v.guessLanguageIdByFilepathOrFirstLine(_)}function b(C){return C.replace(/[\s]/g,"/")}},2352:(Mt,He,c)=>{c.d(He,{Pj:()=>Q,jX:()=>q,vg:()=>ve,_V:()=>K});var u=c(93009),G=c(46204),U=c(87856),P=c(13697),M=c(77714),w=c(33902),O=c(37473),A=c(41615),I=c(60153),b=c(69504),C=c(98414),v=c(47545),_=c(69393),d=c(59105),m=c(52229),S=c(93750);class D{constructor(N){this.value=N,this._lower=N.toLowerCase()}static toKey(N){return typeof N=="string"?N.toLowerCase():N._lower}}class E{constructor(N){if(this._set=new Set,N)for(const j of N)this.add(j)}add(N){this._set.add(D.toKey(N))}has(N){return this._set.has(D.toKey(N))}}var B=c(81545),R=c(84139),z=c(92824),W=c(13656);function $(F,N,j){const me=[],ce=new E,he=F.ordered(j);for(const Y of he)me.push(Y),Y.extensionId&&ce.add(Y.extensionId);const Le=N.ordered(j);for(const Y of Le){if(Y.extensionId){if(ce.has(Y.extensionId))continue;ce.add(Y.extensionId)}me.push({displayName:Y.displayName,extensionId:Y.extensionId,provideDocumentFormattingEdits(ae,Ce,Pe){return Y.provideDocumentRangeFormattingEdits(ae,ae.getFullModelRange(),Ce,Pe)}})}return me}class Q{static{this._selectors=new M.w}static setFormatterSelector(N){return{dispose:Q._selectors.unshift(N)}}static async select(N,j,me,ce){if(N.length===0)return;const he=P.f.first(Q._selectors);if(he)return await he(N,j,me,ce)}}async function q(F,N,j,me,ce,he,Le){const Y=F.get(B._Y),{documentRangeFormattingEditProvider:ae}=F.get(R.ILanguageFeaturesService),Ce=(0,I.z9)(N)?N.getModel():N,Pe=ae.ordered(Ce),ye=await Q.select(Pe,Ce,me,2);ye&&(ce.report(ye),await Y.invokeFunction(ne,ye,N,j,he,Le))}async function ne(F,N,j,me,ce,he){const Le=F.get(_.IEditorWorkerService),Y=F.get(z.rr),ae=F.get(W.Nt);let Ce,Pe;(0,I.z9)(j)?(Ce=j.getModel(),Pe=new A.gI(j,5,void 0,ce)):(Ce=j,Pe=new A.ER(j,ce));const ye=[];let Ke=0;for(const Ze of(0,u._j)(me).sort(C.Q.compareRangesUsingStarts))Ke>0&&C.Q.areIntersectingOrTouching(ye[Ke-1],Ze)?ye[Ke-1]=C.Q.fromPositions(ye[Ke-1].getStartPosition(),Ze.getEndPosition()):Ke=ye.push(Ze);const qe=async Ze=>{Y.trace("[format][provideDocumentRangeFormattingEdits] (request)",N.extensionId?.value,Ze);const _t=await N.provideDocumentRangeFormattingEdits(Ce,Ze,Ce.getFormattingOptions(),Pe.token)||[];return Y.trace("[format][provideDocumentRangeFormattingEdits] (response)",N.extensionId?.value,_t),_t},Ue=(Ze,_t)=>{if(!Ze.length||!_t.length)return!1;const ot=Ze.reduce((Pt,Wt)=>C.Q.plusRange(Pt,Wt.range),Ze[0].range);if(!_t.some(Pt=>C.Q.intersectRanges(ot,Pt.range)))return!1;for(const Pt of Ze)for(const Wt of _t)if(C.Q.intersectRanges(Pt.range,Wt.range))return!0;return!1},x=[],it=[];try{if(typeof N.provideDocumentRangesFormattingEdits=="function"){Y.trace("[format][provideDocumentRangeFormattingEdits] (request)",N.extensionId?.value,ye);const Ze=await N.provideDocumentRangesFormattingEdits(Ce,ye,Ce.getFormattingOptions(),Pe.token)||[];Y.trace("[format][provideDocumentRangeFormattingEdits] (response)",N.extensionId?.value,Ze),it.push(Ze)}else{for(const Ze of ye){if(Pe.token.isCancellationRequested)return!0;it.push(await qe(Ze))}for(let Ze=0;Ze<ye.length;++Ze)for(let _t=Ze+1;_t<ye.length;++_t){if(Pe.token.isCancellationRequested)return!0;if(Ue(it[Ze],it[_t])){const ot=C.Q.plusRange(ye[Ze],ye[_t]),Pt=await qe(ot);ye.splice(_t,1),ye.splice(Ze,1),ye.push(ot),it.splice(_t,1),it.splice(Ze,1),it.push(Pt),Ze=0,_t=0}}}for(const Ze of it){if(Pe.token.isCancellationRequested)return!0;const _t=await Le.computeMoreMinimalEdits(Ce.uri,Ze);_t&&x.push(..._t)}}finally{Pe.dispose()}if(x.length===0)return!1;if((0,I.z9)(j))m.c.execute(j,x,!0),j.revealPositionInCenterIfOutsideViewport(j.getPosition(),1);else{const[{range:Ze}]=x,_t=new v.L(Ze.startLineNumber,Ze.startColumn,Ze.endLineNumber,Ze.endColumn);Ce.pushEditOperations([_t],x.map(ot=>({text:ot.text,range:C.Q.lift(ot.range),forceMoveMarkers:!0})),ot=>{for(const{range:Pt}of ot)if(C.Q.areIntersectingOrTouching(Pt,_t))return[new v.L(Pt.startLineNumber,Pt.startColumn,Pt.endLineNumber,Pt.endColumn)];return null})}return ae.playSignal(W.Rh.format,{userGesture:he}),!0}async function ve(F,N,j,me,ce,he){const Le=F.get(B._Y),Y=F.get(R.ILanguageFeaturesService),ae=(0,I.z9)(N)?N.getModel():N,Ce=$(Y.documentFormattingEditProvider,Y.documentRangeFormattingEditProvider,ae),Pe=await Q.select(Ce,ae,j,1);Pe&&(me.report(Pe),await Le.invokeFunction(Re,Pe,N,j,ce,he))}async function Re(F,N,j,me,ce,he){const Le=F.get(_.IEditorWorkerService),Y=F.get(W.Nt);let ae,Ce;(0,I.z9)(j)?(ae=j.getModel(),Ce=new A.gI(j,5,void 0,ce)):(ae=j,Ce=new A.ER(j,ce));let Pe;try{const ye=await N.provideDocumentFormattingEdits(ae,ae.getFormattingOptions(),Ce.token);if(Pe=await Le.computeMoreMinimalEdits(ae.uri,ye),Ce.token.isCancellationRequested)return!0}finally{Ce.dispose()}if(!Pe||Pe.length===0)return!1;if((0,I.z9)(j))m.c.execute(j,Pe,me!==2),me!==2&&j.revealPositionInCenterIfOutsideViewport(j.getPosition(),1);else{const[{range:ye}]=Pe,Ke=new v.L(ye.startLineNumber,ye.startColumn,ye.endLineNumber,ye.endColumn);ae.pushEditOperations([Ke],Pe.map(qe=>({text:qe.text,range:C.Q.lift(qe.range),forceMoveMarkers:!0})),qe=>{for(const{range:Ue}of qe)if(C.Q.areIntersectingOrTouching(Ue,Ke))return[new v.L(Ue.startLineNumber,Ue.startColumn,Ue.endLineNumber,Ue.endColumn)];return null})}return Y.playSignal(W.Rh.format,{userGesture:he}),!0}async function Ae(F,N,j,me,ce,he){const Le=N.documentRangeFormattingEditProvider.ordered(j);for(const Y of Le){const ae=await Promise.resolve(Y.provideDocumentRangeFormattingEdits(j,me,ce,he)).catch(U.M_);if((0,u.EI)(ae))return await F.computeMoreMinimalEdits(j.uri,ae)}}async function re(F,N,j,me,ce){const he=$(N.documentFormattingEditProvider,N.documentRangeFormattingEditProvider,j);for(const Le of he){const Y=await Promise.resolve(Le.provideDocumentFormattingEdits(j,me,ce)).catch(U.M_);if((0,u.EI)(Y))return await F.computeMoreMinimalEdits(j.uri,Y)}}function K(F,N,j,me,ce,he,Le){const Y=N.onTypeFormattingEditProvider.ordered(j);return Y.length===0||Y[0].autoFormatTriggerCharacters.indexOf(ce)<0?Promise.resolve(void 0):Promise.resolve(Y[0].provideOnTypeFormattingEdits(j,me,ce,he,Le)).catch(U.M_).then(ae=>F.computeMoreMinimalEdits(j.uri,ae))}S.w.registerCommand("_executeFormatRangeProvider",async function(F,...N){const[j,me,ce]=N;(0,w.j)(O.r.isUri(j)),(0,w.j)(C.Q.isIRange(me));const he=F.get(d.ITextModelService),Le=F.get(_.IEditorWorkerService),Y=F.get(R.ILanguageFeaturesService),ae=await he.createModelReference(j);try{return Ae(Le,Y,ae.object.textEditorModel,C.Q.lift(me),ce,G.XO.None)}finally{ae.dispose()}}),S.w.registerCommand("_executeFormatDocumentProvider",async function(F,...N){const[j,me]=N;(0,w.j)(O.r.isUri(j));const ce=F.get(d.ITextModelService),he=F.get(_.IEditorWorkerService),Le=F.get(R.ILanguageFeaturesService),Y=await ce.createModelReference(j);try{return re(he,Le,Y.object.textEditorModel,me,G.XO.None)}finally{Y.dispose()}}),S.w.registerCommand("_executeFormatOnTypeProvider",async function(F,...N){const[j,me,ce,he]=N;(0,w.j)(O.r.isUri(j)),(0,w.j)(b.y.isIPosition(me)),(0,w.j)(typeof ce=="string");const Le=F.get(d.ITextModelService),Y=F.get(_.IEditorWorkerService),ae=F.get(R.ILanguageFeaturesService),Ce=await Le.createModelReference(j);try{return K(Y,ae,Ce.object.textEditorModel,b.y.lift(me),ce,he,G.XO.None)}finally{Ce.dispose()}})},3207:(Mt,He,c)=>{c.d(He,{Yj:()=>w,s0:()=>O});var u=c(85565),G=c(14216),U=c(9709),P=c(32287);const M={getInitialState:()=>P.r3,tokenizeEncoded:(I,b,C)=>(0,P.Lh)(0,C)};async function w(I,b,C){if(!C)return A(b,I.languageIdCodec,M);const v=await U.dG.getOrCreate(C);return A(b,I.languageIdCodec,v||M)}function O(I,b,C,v,_,d,m){let S="<div>",D=v,E=0,B=!0;for(let R=0,z=b.getCount();R<z;R++){const W=b.getEndOffset(R);if(W<=v)continue;let $="";for(;D<W&&D<_;D++){const Q=I.charCodeAt(D);switch(Q){case 9:{let q=d-(D+E)%d;for(E+=q-1;q>0;)m&&B?($+="&#160;",B=!1):($+=" ",B=!0),q--;break}case 60:$+="&lt;",B=!1;break;case 62:$+="&gt;",B=!1;break;case 38:$+="&amp;",B=!1;break;case 0:$+="&#00;",B=!1;break;case 65279:case 8232:case 8233:case 133:$+="\uFFFD",B=!1;break;case 13:$+="&#8203",B=!1;break;case 32:m&&B?($+="&#160;",B=!1):($+=" ",B=!0);break;default:$+=String.fromCharCode(Q),B=!1}}if(S+=`<span style="${b.getInlineStyle(R,C)}">${$}</span>`,W>_||D>=_)break}return S+="</div>",S}function A(I,b,C){let v='<div class="monaco-tokenized-source">';const _=u.uz(I);let d=C.getInitialState();for(let m=0,S=_.length;m<S;m++){const D=_[m];m>0&&(v+="<br/>");const E=C.tokenizeEncoded(D,!0,d);G.f.convertToEndOffset(E.tokens,D.length);const R=new G.f(E.tokens,D,b).inflate();let z=0;for(let W=0,$=R.getCount();W<$;W++){const Q=R.getClassName(W),q=R.getEndOffset(W);v+=`<span class="${Q}">${u.ih(D.substring(z,q))}</span>`,z=q}d=E.endState}return v+="</div>",v}},3223:(Mt,He,c)=>{c.d(He,{Go:()=>G,PI:()=>M,V0:()=>b,aI:()=>A,co:()=>O,kT:()=>C,ol:()=>U});var u=c(33902);function G(v){if(!v||typeof v!="object"||v instanceof RegExp)return v;const _=Array.isArray(v)?[]:{};return Object.entries(v).forEach(([d,m])=>{_[d]=m&&typeof m=="object"?G(m):m}),_}function U(v){if(!v||typeof v!="object")return v;const _=[v];for(;_.length>0;){const d=_.shift();Object.freeze(d);for(const m in d)if(P.call(d,m)){const S=d[m];typeof S=="object"&&!Object.isFrozen(S)&&!(0,u.iu)(S)&&_.push(S)}}return v}const P=Object.prototype.hasOwnProperty;function M(v,_){return w(v,_,new Set)}function w(v,_,d){if((0,u.z)(v))return v;const m=_(v);if(typeof m<"u")return m;if(Array.isArray(v)){const S=[];for(const D of v)S.push(w(D,_,d));return S}if((0,u.Gv)(v)){if(d.has(v))throw new Error("Cannot clone recursive data-structure");d.add(v);const S={};for(const D in v)P.call(v,D)&&(S[D]=w(v[D],_,d));return d.delete(v),S}return v}function O(v,_,d=!0){return(0,u.Gv)(v)?((0,u.Gv)(_)&&Object.keys(_).forEach(m=>{m in v?d&&((0,u.Gv)(v[m])&&(0,u.Gv)(_[m])?O(v[m],_[m],d):v[m]=_[m]):v[m]=_[m]}),v):_}function A(v,_){if(v===_)return!0;if(v==null||_===null||_===void 0||typeof v!=typeof _||typeof v!="object"||Array.isArray(v)!==Array.isArray(_))return!1;let d,m;if(Array.isArray(v)){if(v.length!==_.length)return!1;for(d=0;d<v.length;d++)if(!A(v[d],_[d]))return!1}else{const S=[];for(m in v)S.push(m);S.sort();const D=[];for(m in _)D.push(m);if(D.sort(),!A(S,D))return!1;for(d=0;d<S.length;d++)if(!A(v[S[d]],_[S[d]]))return!1}return!0}function I(v){let _=[];for(;Object.prototype!==v;)_=_.concat(Object.getOwnPropertyNames(v)),v=Object.getPrototypeOf(v);return _}function b(v){const _=[];for(const d of I(v))typeof v[d]=="function"&&_.push(d);return _}function C(v,_){const d=S=>function(){const D=Array.prototype.slice.call(arguments,0);return _(S,D)},m={};for(const S of v)m[S]=d(S);return m}},3320:(Mt,He,c)=>{c.d(He,{AO:()=>W,Dr:()=>$,Hs:()=>ve,K4:()=>D,Ls:()=>z,UN:()=>q,YA:()=>Q,dU:()=>m,ey:()=>Le,h0:()=>ne,is:()=>B,kr:()=>R,oi:()=>E,sx:()=>S});var u=c(87856),G=c(85565),U=c(47917),P=c(77105),M=c(13429),w=c(92998),O=c(53605),A=c(98414),I=c(69504),b=c(81483),C=c(61231),v=c(90439),_=c(66498),d=c(84279);class m{static getEdits(ae,Ce,Pe,ye,Ke){if(!Ke&&this._isAutoIndentType(ae,Ce,Pe)){const qe=[];for(const x of Pe){const it=this._findActualIndentationForSelection(ae,Ce,x,ye);if(it===null)return;qe.push({selection:x,indentation:it})}const Ue=E.getAutoClosingPairClose(ae,Ce,Pe,ye,!1);return this._getIndentationAndAutoClosingPairEdits(ae,Ce,qe,ye,Ue)}}static _isAutoIndentType(ae,Ce,Pe){if(ae.autoIndent<4)return!1;for(let ye=0,Ke=Pe.length;ye<Ke;ye++)if(!Ce.tokenization.isCheapToTokenize(Pe[ye].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(ae,Ce,Pe,ye){const Ke=(0,_._t)(ae,Ce,Pe,ye,{shiftIndent:Ue=>ce(ae,Ue),unshiftIndent:Ue=>he(ae,Ue)},ae.languageConfigurationService);if(Ke===null)return null;const qe=(0,C.Cw)(Ce,Pe.startLineNumber,Pe.startColumn);return Ke===ae.normalizeIndentation(qe)?null:Ke}static _getIndentationAndAutoClosingPairEdits(ae,Ce,Pe,ye,Ke){const qe=Pe.map(({selection:x,indentation:it})=>{if(Ke!==null){const Ze=this._getEditFromIndentationAndSelection(ae,Ce,it,x,ye,!1);return new Ae(Ze,x,ye,Ke)}else{const Ze=this._getEditFromIndentationAndSelection(ae,Ce,it,x,ye,!0);return me(Ze.range,Ze.text,!1)}}),Ue={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new w.vY(4,qe,Ue)}static _getEditFromIndentationAndSelection(ae,Ce,Pe,ye,Ke,qe=!0){const Ue=ye.startLineNumber,x=Ce.getLineFirstNonWhitespaceColumn(Ue);let it=ae.normalizeIndentation(Pe);if(x!==0){const _t=Ce.getLineContent(Ue);it+=_t.substring(x-1,ye.startColumn-1)}return it+=qe?Ke:"",{range:new A.Q(Ue,1,ye.endLineNumber,ye.endColumn),text:it}}}class S{static getEdits(ae,Ce,Pe,ye,Ke,qe){if(j(Ce,Pe,ye,Ke,qe))return this._runAutoClosingOvertype(ae,ye,qe)}static _runAutoClosingOvertype(ae,Ce,Pe){const ye=[];for(let Ke=0,qe=Ce.length;Ke<qe;Ke++){const x=Ce[Ke].getPosition(),it=new A.Q(x.lineNumber,x.column,x.lineNumber,x.column+1);ye[Ke]=new U.iu(it,Pe)}return new w.vY(4,ye,{shouldPushStackElementBefore:K(ae,4),shouldPushStackElementAfter:!1})}}class D{static getEdits(ae,Ce,Pe,ye,Ke){if(j(ae,Ce,Pe,ye,Ke)){const qe=Pe.map(Ue=>new U.iu(new A.Q(Ue.positionLineNumber,Ue.positionColumn,Ue.positionLineNumber,Ue.positionColumn+1),"",!1));return new w.vY(4,qe,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class E{static getEdits(ae,Ce,Pe,ye,Ke,qe){if(!qe){const Ue=this.getAutoClosingPairClose(ae,Ce,Pe,ye,Ke);if(Ue!==null)return this._runAutoClosingOpenCharType(Pe,ye,Ke,Ue)}}static _runAutoClosingOpenCharType(ae,Ce,Pe,ye){const Ke=[];for(let qe=0,Ue=ae.length;qe<Ue;qe++){const x=ae[qe];Ke[qe]=new Re(x,Ce,!Pe,ye)}return new w.vY(4,Ke,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(ae,Ce,Pe,ye,Ke){for(const Wt of Pe)if(!Wt.isEmpty())return null;const qe=Pe.map(Wt=>{const Rt=Wt.getPosition();return Ke?{lineNumber:Rt.lineNumber,beforeColumn:Rt.column-ye.length,afterColumn:Rt.column}:{lineNumber:Rt.lineNumber,beforeColumn:Rt.column,afterColumn:Rt.column}}),Ue=this._findAutoClosingPairOpen(ae,Ce,qe.map(Wt=>new I.y(Wt.lineNumber,Wt.beforeColumn)),ye);if(!Ue)return null;let x,it;if((0,w.vG)(ye)?(x=ae.autoClosingQuotes,it=ae.shouldAutoCloseBefore.quote):(ae.blockCommentStartToken?Ue.open.includes(ae.blockCommentStartToken):!1)?(x=ae.autoClosingComments,it=ae.shouldAutoCloseBefore.comment):(x=ae.autoClosingBrackets,it=ae.shouldAutoCloseBefore.bracket),x==="never")return null;const _t=this._findContainedAutoClosingPair(ae,Ue),ot=_t?_t.close:"";let Pt=!0;for(const Wt of qe){const{lineNumber:Rt,beforeColumn:at,afterColumn:Xe}=Wt,pe=Ce.getLineContent(Rt),te=pe.substring(0,at-1),oe=pe.substring(Xe-1);if(oe.startsWith(ot)||(Pt=!1),oe.length>0){const dt=oe.charAt(0);if(!this._isBeforeClosingBrace(ae,oe)&&!it(dt))return null}if(Ue.open.length===1&&(ye==="'"||ye==='"')&&x!=="always"){const dt=(0,O.i)(ae.wordSeparators,[]);if(te.length>0){const Ye=te.charCodeAt(te.length-1);if(dt.get(Ye)===0)return null}}if(!Ce.tokenization.isCheapToTokenize(Rt))return null;Ce.tokenization.forceTokenization(Rt);const Te=Ce.tokenization.getLineTokens(Rt),Ve=(0,v.BQ)(Te,at-1);if(!Ue.shouldAutoClose(Ve,at-Ve.firstCharOffset))return null;const We=Ue.findNeutralCharacter();if(We){const dt=Ce.tokenization.getTokenTypeIfInsertingCharacter(Rt,at,We);if(!Ue.isOK(dt))return null}}return Pt?Ue.close.substring(0,Ue.close.length-ot.length):Ue.close}static _findContainedAutoClosingPair(ae,Ce){if(Ce.open.length<=1)return null;const Pe=Ce.close.charAt(Ce.close.length-1),ye=ae.autoClosingPairs.autoClosingPairsCloseByEnd.get(Pe)||[];let Ke=null;for(const qe of ye)qe.open!==Ce.open&&Ce.open.includes(qe.open)&&Ce.close.endsWith(qe.close)&&(!Ke||qe.open.length>Ke.open.length)&&(Ke=qe);return Ke}static _findAutoClosingPairOpen(ae,Ce,Pe,ye){const Ke=ae.autoClosingPairs.autoClosingPairsOpenByEnd.get(ye);if(!Ke)return null;let qe=null;for(const Ue of Ke)if(qe===null||Ue.open.length>qe.open.length){let x=!0;for(const it of Pe)if(Ce.getValueInRange(new A.Q(it.lineNumber,it.column-Ue.open.length+1,it.lineNumber,it.column))+ye!==Ue.open){x=!1;break}x&&(qe=Ue)}return qe}static _isBeforeClosingBrace(ae,Ce){const Pe=Ce.charAt(0),ye=ae.autoClosingPairs.autoClosingPairsOpenByStart.get(Pe)||[],Ke=ae.autoClosingPairs.autoClosingPairsCloseByStart.get(Pe)||[],qe=ye.some(x=>Ce.startsWith(x.open)),Ue=Ke.some(x=>Ce.startsWith(x.close));return!qe&&Ue}}class B{static getEdits(ae,Ce,Pe,ye,Ke){if(!Ke&&this._isSurroundSelectionType(ae,Ce,Pe,ye))return this._runSurroundSelectionType(ae,Pe,ye)}static _runSurroundSelectionType(ae,Ce,Pe){const ye=[];for(let Ke=0,qe=Ce.length;Ke<qe;Ke++){const Ue=Ce[Ke],x=ae.surroundingPairs[Pe];ye[Ke]=new M.i(Ue,Pe,x)}return new w.vY(0,ye,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(ae,Ce,Pe,ye){if(!Le(ae,ye)||!ae.surroundingPairs.hasOwnProperty(ye))return!1;const Ke=(0,w.vG)(ye);for(const qe of Pe){if(qe.isEmpty())return!1;let Ue=!0;for(let x=qe.startLineNumber;x<=qe.endLineNumber;x++){const it=Ce.getLineContent(x),Ze=x===qe.startLineNumber?qe.startColumn-1:0,_t=x===qe.endLineNumber?qe.endColumn-1:it.length,ot=it.substring(Ze,_t);if(/[^ \t]/.test(ot)){Ue=!1;break}}if(Ue)return!1;if(Ke&&qe.startLineNumber===qe.endLineNumber&&qe.startColumn+1===qe.endColumn){const x=Ce.getValueInRange(qe);if((0,w.vG)(x))return!1}}return!0}}class R{static getEdits(ae,Ce,Pe,ye,Ke,qe){if(!qe&&this._isTypeInterceptorElectricChar(Ce,Pe,ye)){const Ue=this._typeInterceptorElectricChar(ae,Ce,Pe,ye[0],Ke);if(Ue)return Ue}}static _isTypeInterceptorElectricChar(ae,Ce,Pe){return!!(Pe.length===1&&Ce.tokenization.isCheapToTokenize(Pe[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(ae,Ce,Pe,ye,Ke){if(!Ce.electricChars.hasOwnProperty(Ke)||!ye.isEmpty())return null;const qe=ye.getPosition();Pe.tokenization.forceTokenization(qe.lineNumber);const Ue=Pe.tokenization.getLineTokens(qe.lineNumber);let x;try{x=Ce.onElectricCharacter(Ke,Ue,qe.column)}catch(it){return(0,u.dz)(it),null}if(!x)return null;if(x.matchOpenBracket){const it=(Ue.getLineContent()+Ke).lastIndexOf(x.matchOpenBracket)+1,Ze=Pe.bracketPairs.findMatchingBracketUp(x.matchOpenBracket,{lineNumber:qe.lineNumber,column:it},500);if(Ze){if(Ze.startLineNumber===qe.lineNumber)return null;const _t=Pe.getLineContent(Ze.startLineNumber),ot=G.UU(_t),Pt=Ce.normalizeIndentation(ot),Wt=Pe.getLineContent(qe.lineNumber),Rt=Pe.getLineFirstNonWhitespaceColumn(qe.lineNumber)||qe.column,at=Wt.substring(Rt-1,qe.column-1),Xe=Pt+at+Ke,pe=new A.Q(qe.lineNumber,1,qe.lineNumber,qe.column),te=new U.iu(pe,Xe);return new w.vY(re(Xe,ae),[te],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class z{static getEdits(ae,Ce,Pe){const ye=[];for(let qe=0,Ue=Ce.length;qe<Ue;qe++)ye[qe]=new U.iu(Ce[qe],Pe);const Ke=re(Pe,ae);return new w.vY(Ke,ye,{shouldPushStackElementBefore:K(ae,Ke),shouldPushStackElementAfter:!1})}}class W{static getEdits(ae,Ce,Pe,ye,Ke){if(!Ke&&ye===`
`){const qe=[];for(let Ue=0,x=Pe.length;Ue<x;Ue++)qe[Ue]=this._enter(ae,Ce,!1,Pe[Ue]);return new w.vY(4,qe,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(ae,Ce,Pe,ye){if(ae.autoIndent===0)return me(ye,`
`,Pe);if(!Ce.tokenization.isCheapToTokenize(ye.getStartPosition().lineNumber)||ae.autoIndent===1){const x=Ce.getLineContent(ye.startLineNumber),it=G.UU(x).substring(0,ye.startColumn-1);return me(ye,`
`+ae.normalizeIndentation(it),Pe)}const Ke=(0,d.h)(ae.autoIndent,Ce,ye,ae.languageConfigurationService);if(Ke){if(Ke.indentAction===b.l.None)return me(ye,`
`+ae.normalizeIndentation(Ke.indentation+Ke.appendText),Pe);if(Ke.indentAction===b.l.Indent)return me(ye,`
`+ae.normalizeIndentation(Ke.indentation+Ke.appendText),Pe);if(Ke.indentAction===b.l.IndentOutdent){const x=ae.normalizeIndentation(Ke.indentation),it=ae.normalizeIndentation(Ke.indentation+Ke.appendText),Ze=`
`+it+`
`+x;return Pe?new U.q2(ye,Ze,!0):new U.iP(ye,Ze,-1,it.length-x.length,!0)}else if(Ke.indentAction===b.l.Outdent){const x=he(ae,Ke.indentation);return me(ye,`
`+ae.normalizeIndentation(x+Ke.appendText),Pe)}}const qe=Ce.getLineContent(ye.startLineNumber),Ue=G.UU(qe).substring(0,ye.startColumn-1);if(ae.autoIndent>=4){const x=(0,_.MU)(ae.autoIndent,Ce,ye,{unshiftIndent:it=>he(ae,it),shiftIndent:it=>ce(ae,it),normalizeIndentation:it=>ae.normalizeIndentation(it)},ae.languageConfigurationService);if(x){let it=ae.visibleColumnFromColumn(Ce,ye.getEndPosition());const Ze=ye.endColumn,_t=Ce.getLineContent(ye.endLineNumber),ot=G.HG(_t);if(ot>=0?ye=ye.setEndPosition(ye.endLineNumber,Math.max(ye.endColumn,ot+1)):ye=ye.setEndPosition(ye.endLineNumber,Ce.getLineMaxColumn(ye.endLineNumber)),Pe)return new U.q2(ye,`
`+ae.normalizeIndentation(x.afterEnter),!0);{let Pt=0;return Ze<=ot+1&&(ae.insertSpaces||(it=Math.ceil(it/ae.indentSize)),Pt=Math.min(it+1-ae.normalizeIndentation(x.afterEnter).length-1,0)),new U.iP(ye,`
`+ae.normalizeIndentation(x.afterEnter),0,Pt,!0)}}}return me(ye,`
`+ae.normalizeIndentation(Ue),Pe)}static lineInsertBefore(ae,Ce,Pe){if(Ce===null||Pe===null)return[];const ye=[];for(let Ke=0,qe=Pe.length;Ke<qe;Ke++){let Ue=Pe[Ke].positionLineNumber;if(Ue===1)ye[Ke]=new U.q2(new A.Q(1,1,1,1),`
`);else{Ue--;const x=Ce.getLineMaxColumn(Ue);ye[Ke]=this._enter(ae,Ce,!1,new A.Q(Ue,x,Ue,x))}}return ye}static lineInsertAfter(ae,Ce,Pe){if(Ce===null||Pe===null)return[];const ye=[];for(let Ke=0,qe=Pe.length;Ke<qe;Ke++){const Ue=Pe[Ke].positionLineNumber,x=Ce.getLineMaxColumn(Ue);ye[Ke]=this._enter(ae,Ce,!1,new A.Q(Ue,x,Ue,x))}return ye}static lineBreakInsert(ae,Ce,Pe){const ye=[];for(let Ke=0,qe=Pe.length;Ke<qe;Ke++)ye[Ke]=this._enter(ae,Ce,!0,Pe[Ke]);return ye}}class ${static getEdits(ae,Ce,Pe,ye,Ke,qe){const Ue=this._distributePasteToCursors(ae,Pe,ye,Ke,qe);return Ue?(Pe=Pe.sort(A.Q.compareRangesUsingStarts),this._distributedPaste(ae,Ce,Pe,Ue)):this._simplePaste(ae,Ce,Pe,ye,Ke)}static _distributePasteToCursors(ae,Ce,Pe,ye,Ke){if(ye||Ce.length===1)return null;if(Ke&&Ke.length===Ce.length)return Ke;if(ae.multiCursorPaste==="spread"){Pe.charCodeAt(Pe.length-1)===10&&(Pe=Pe.substring(0,Pe.length-1)),Pe.charCodeAt(Pe.length-1)===13&&(Pe=Pe.substring(0,Pe.length-1));const qe=G.uz(Pe);if(qe.length===Ce.length)return qe}return null}static _distributedPaste(ae,Ce,Pe,ye){const Ke=[];for(let qe=0,Ue=Pe.length;qe<Ue;qe++)Ke[qe]=new U.iu(Pe[qe],ye[qe]);return new w.vY(0,Ke,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(ae,Ce,Pe,ye,Ke){const qe=[];for(let Ue=0,x=Pe.length;Ue<x;Ue++){const it=Pe[Ue],Ze=it.getPosition();if(Ke&&!it.isEmpty()&&(Ke=!1),Ke&&ye.indexOf(`
`)!==ye.length-1&&(Ke=!1),Ke){const _t=new A.Q(Ze.lineNumber,1,Ze.lineNumber,1);qe[Ue]=new U.ui(_t,ye,it,!0)}else qe[Ue]=new U.iu(it,ye)}return new w.vY(0,qe,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class Q{static getEdits(ae,Ce,Pe,ye,Ke,qe,Ue,x){const it=ye.map(Ze=>this._compositionType(Pe,Ze,Ke,qe,Ue,x));return new w.vY(4,it,{shouldPushStackElementBefore:K(ae,4),shouldPushStackElementAfter:!1})}static _compositionType(ae,Ce,Pe,ye,Ke,qe){if(!Ce.isEmpty())return null;const Ue=Ce.getPosition(),x=Math.max(1,Ue.column-ye),it=Math.min(ae.getLineMaxColumn(Ue.lineNumber),Ue.column+Ke),Ze=new A.Q(Ue.lineNumber,x,Ue.lineNumber,it);return ae.getValueInRange(Ze)===Pe&&qe===0?null:new U.iP(Ze,Pe,0,qe)}}class q{static getEdits(ae,Ce,Pe){const ye=[];for(let qe=0,Ue=Ce.length;qe<Ue;qe++)ye[qe]=new U.iu(Ce[qe],Pe);const Ke=re(Pe,ae);return new w.vY(Ke,ye,{shouldPushStackElementBefore:K(ae,Ke),shouldPushStackElementAfter:!1})}}class ne{static getCommands(ae,Ce,Pe){const ye=[];for(let Ke=0,qe=Pe.length;Ke<qe;Ke++){const Ue=Pe[Ke];if(Ue.isEmpty()){const x=Ce.getLineContent(Ue.startLineNumber);if(/^\s*$/.test(x)&&Ce.tokenization.isCheapToTokenize(Ue.startLineNumber)){let it=this._goodIndentForLine(ae,Ce,Ue.startLineNumber);it=it||"	";const Ze=ae.normalizeIndentation(it);if(!x.startsWith(Ze)){ye[Ke]=new U.iu(new A.Q(Ue.startLineNumber,1,Ue.startLineNumber,x.length+1),Ze,!0);continue}}ye[Ke]=this._replaceJumpToNextIndent(ae,Ce,Ue,!0)}else{if(Ue.startLineNumber===Ue.endLineNumber){const x=Ce.getLineMaxColumn(Ue.startLineNumber);if(Ue.startColumn!==1||Ue.endColumn!==x){ye[Ke]=this._replaceJumpToNextIndent(ae,Ce,Ue,!1);continue}}ye[Ke]=new P.Y(Ue,{isUnshift:!1,tabSize:ae.tabSize,indentSize:ae.indentSize,insertSpaces:ae.insertSpaces,useTabStops:ae.useTabStops,autoIndent:ae.autoIndent},ae.languageConfigurationService)}}return ye}static _goodIndentForLine(ae,Ce,Pe){let ye=null,Ke="";const qe=(0,_.vn)(ae.autoIndent,Ce,Pe,!1,ae.languageConfigurationService);if(qe)ye=qe.action,Ke=qe.indentation;else if(Pe>1){let Ue;for(Ue=Pe-1;Ue>=1;Ue--){const Ze=Ce.getLineContent(Ue);if(G.lT(Ze)>=0)break}if(Ue<1)return null;const x=Ce.getLineMaxColumn(Ue),it=(0,d.h)(ae.autoIndent,Ce,new A.Q(Ue,x,Ue,x),ae.languageConfigurationService);it&&(Ke=it.indentation+it.appendText)}return ye&&(ye===b.l.Indent&&(Ke=ce(ae,Ke)),ye===b.l.Outdent&&(Ke=he(ae,Ke)),Ke=ae.normalizeIndentation(Ke)),Ke||null}static _replaceJumpToNextIndent(ae,Ce,Pe,ye){let Ke="";const qe=Pe.getStartPosition();if(ae.insertSpaces){const Ue=ae.visibleColumnFromColumn(Ce,qe),x=ae.indentSize,it=x-Ue%x;for(let Ze=0;Ze<it;Ze++)Ke+=" "}else Ke="	";return new U.iu(Pe,Ke,ye)}}class ve extends U.iP{constructor(ae,Ce,Pe,ye,Ke,qe){super(ae,Ce,Pe,ye),this._openCharacter=Ke,this._closeCharacter=qe,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(ae,Ce,Pe){return this.closeCharacterRange=new A.Q(Ce.startLineNumber,Ce.endColumn-this._closeCharacter.length,Ce.endLineNumber,Ce.endColumn),this.enclosingRange=new A.Q(Ce.startLineNumber,Ce.endColumn-this._openCharacter.length-this._closeCharacter.length,Ce.endLineNumber,Ce.endColumn),super.computeCursorState(ae,Pe)}}class Re extends ve{constructor(ae,Ce,Pe,ye){const Ke=(Pe?Ce:"")+ye,qe=0,Ue=-ye.length;super(ae,Ke,qe,Ue,Ce,ye)}computeCursorState(ae,Ce){const ye=Ce.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(ae,ye,Ce)}}class Ae extends ve{constructor(ae,Ce,Pe,ye){const Ke=Pe+ye,qe=0,Ue=Pe.length;super(Ce,Ke,qe,Ue,Pe,ye),this._autoIndentationEdit=ae,this._autoClosingEdit={range:Ce,text:Ke}}getEditOperations(ae,Ce){Ce.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),Ce.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(ae,Ce){const Pe=Ce.getInverseEditOperations();if(Pe.length!==2)throw new Error("There should be two inverse edit operations!");const ye=Pe[0].range,Ke=Pe[1].range,qe=ye.plusRange(Ke);return this._computeCursorStateWithRange(ae,qe,Ce)}}function re(Y,ae){return Y===" "?ae===5||ae===6?6:5:4}function K(Y,ae){return N(Y)&&!N(ae)?!0:Y===5?!1:F(Y)!==F(ae)}function F(Y){return Y===6||Y===5?"space":Y}function N(Y){return Y===4||Y===5||Y===6}function j(Y,ae,Ce,Pe,ye){if(Y.autoClosingOvertype==="never"||!Y.autoClosingPairs.autoClosingPairsCloseSingleChar.has(ye))return!1;for(let Ke=0,qe=Ce.length;Ke<qe;Ke++){const Ue=Ce[Ke];if(!Ue.isEmpty())return!1;const x=Ue.getPosition(),it=ae.getLineContent(x.lineNumber);if(it.charAt(x.column-1)!==ye)return!1;const _t=(0,w.vG)(ye);if((x.column>2?it.charCodeAt(x.column-2):0)===92&&_t)return!1;if(Y.autoClosingOvertype==="auto"){let Pt=!1;for(let Wt=0,Rt=Pe.length;Wt<Rt;Wt++){const at=Pe[Wt];if(x.lineNumber===at.startLineNumber&&x.column===at.startColumn){Pt=!0;break}}if(!Pt)return!1}}return!0}function me(Y,ae,Ce){return Ce?new U.q2(Y,ae,!0):new U.iu(Y,ae,!0)}function ce(Y,ae,Ce){return Ce=Ce||1,P.Y.shiftIndent(ae,ae.length+Ce,Y.tabSize,Y.indentSize,Y.insertSpaces)}function he(Y,ae,Ce){return Ce=Ce||1,P.Y.unshiftIndent(ae,ae.length+Ce,Y.tabSize,Y.indentSize,Y.insertSpaces)}function Le(Y,ae){return(0,w.vG)(ae)?Y.autoSurround==="quotes"||Y.autoSurround==="languageDefined":Y.autoSurround==="brackets"||Y.autoSurround==="languageDefined"}},3478:(Mt,He,c)=>{c.d(He,{f:()=>A});var u=c(46454),G=c(90692),U=c(93750),P=c(39642),M=c(60599),w=c(77714);class O{constructor(){this._coreKeybindings=new w.w,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(v){if(G.OS===1){if(v&&v.win)return v.win}else if(G.OS===2){if(v&&v.mac)return v.mac}else if(v&&v.linux)return v.linux;return v}registerKeybindingRule(v){const _=O.bindToCurrentPlatform(v),d=new M.Cm;if(_&&_.primary){const m=(0,u.Zv)(_.primary,G.OS);m&&d.add(this._registerDefaultKeybinding(m,v.id,v.args,v.weight,0,v.when))}if(_&&Array.isArray(_.secondary))for(let m=0,S=_.secondary.length;m<S;m++){const D=_.secondary[m],E=(0,u.Zv)(D,G.OS);E&&d.add(this._registerDefaultKeybinding(E,v.id,v.args,v.weight,-m-1,v.when))}return d}registerCommandAndKeybindingRule(v){return(0,M.qE)(this.registerKeybindingRule(v),U.w.registerCommand(v))}_registerDefaultKeybinding(v,_,d,m,S,D){const E=this._coreKeybindings.push({keybinding:v,command:_,commandArgs:d,when:D,weight1:m,weight2:S,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,(0,M.s)(()=>{E(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(b)),this._cachedMergedKeybindings.slice(0)}}const A=new O,I={EditorModes:"platform.keybindingsRegistry"};P.O.add(I.EditorModes,A);function b(C,v){if(C.weight1!==v.weight1)return C.weight1-v.weight1;if(C.command&&v.command){if(C.command<v.command)return-1;if(C.command>v.command)return 1}return C.weight2-v.weight2}},3621:(Mt,He,c)=>{c.d(He,{IF:()=>E});var u=c(65068);var G=Object.defineProperty,U=Object.getOwnPropertyDescriptor,P=Object.getOwnPropertyNames,M=Object.prototype.hasOwnProperty,w=($,Q,q,ne)=>{if(Q&&typeof Q=="object"||typeof Q=="function")for(let ve of P(Q))!M.call($,ve)&&ve!==q&&G($,ve,{get:()=>Q[ve],enumerable:!(ne=U(Q,ve))||ne.enumerable});return $},O=($,Q,q)=>(w($,Q,"default"),q&&w(q,Q,"default")),A="5.4.5",I={};O(I,u);var b=($=>($[$.None=0]="None",$[$.CommonJS=1]="CommonJS",$[$.AMD=2]="AMD",$[$.UMD=3]="UMD",$[$.System=4]="System",$[$.ES2015=5]="ES2015",$[$.ESNext=99]="ESNext",$))(b||{}),C=($=>($[$.None=0]="None",$[$.Preserve=1]="Preserve",$[$.React=2]="React",$[$.ReactNative=3]="ReactNative",$[$.ReactJSX=4]="ReactJSX",$[$.ReactJSXDev=5]="ReactJSXDev",$))(C||{}),v=($=>($[$.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",$[$.LineFeed=1]="LineFeed",$))(v||{}),_=($=>($[$.ES3=0]="ES3",$[$.ES5=1]="ES5",$[$.ES2015=2]="ES2015",$[$.ES2016=3]="ES2016",$[$.ES2017=4]="ES2017",$[$.ES2018=5]="ES2018",$[$.ES2019=6]="ES2019",$[$.ES2020=7]="ES2020",$[$.ESNext=99]="ESNext",$[$.JSON=100]="JSON",$[$.Latest=99]="Latest",$))(_||{}),d=($=>($[$.Classic=1]="Classic",$[$.NodeJs=2]="NodeJs",$))(d||{}),m=class{constructor($,Q,q,ne,ve){this._onDidChange=new I.Emitter,this._onDidExtraLibsChange=new I.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions($),this.setDiagnosticsOptions(Q),this.setWorkerOptions(q),this.setInlayHintsOptions(ne),this.setModeConfiguration(ve),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get modeConfiguration(){return this._modeConfiguration}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib($,Q){let q;if(typeof Q>"u"?q=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:q=Q,this._extraLibs[q]&&this._extraLibs[q].content===$)return{dispose:()=>{}};let ne=1;return this._removedExtraLibs[q]&&(ne=this._removedExtraLibs[q]+1),this._extraLibs[q]&&(ne=this._extraLibs[q].version+1),this._extraLibs[q]={content:$,version:ne},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let ve=this._extraLibs[q];ve&&ve.version===ne&&(delete this._extraLibs[q],this._removedExtraLibs[q]=ne,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs($){for(const Q in this._extraLibs)this._removedExtraLibs[Q]=this._extraLibs[Q].version;if(this._extraLibs=Object.create(null),$&&$.length>0)for(const Q of $){const q=Q.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,ne=Q.content;let ve=1;this._removedExtraLibs[q]&&(ve=this._removedExtraLibs[q]+1),this._extraLibs[q]={content:ne,version:ve}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions($){this._compilerOptions=$||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions($){this._diagnosticsOptions=$||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions($){this._workerOptions=$||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions($){this._inlayHintsOptions=$||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime($){}setEagerModelSync($){this._eagerModelSync=$}getEagerModelSync(){return this._eagerModelSync}setModeConfiguration($){this._modeConfiguration=$||Object.create(null),this._onDidChange.fire(void 0)}},S=A,D={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},E=new m({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},D),B=new m({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},D),R=()=>W().then($=>$.getTypeScriptWorker()),z=()=>W().then($=>$.getJavaScriptWorker());I.languages.typescript={ModuleKind:b,JsxEmit:C,NewLineKind:v,ScriptTarget:_,ModuleResolutionKind:d,typescriptVersion:S,typescriptDefaults:E,javascriptDefaults:B,getTypeScriptWorker:R,getJavaScriptWorker:z};function W(){return c.e(56452).then(c.bind(c,56452))}I.languages.onLanguage("typescript",()=>W().then($=>$.setupTypeScript(E))),I.languages.onLanguage("javascript",()=>W().then($=>$.setupJavaScript(B)))},3960:(Mt,He,c)=>{c.d(He,{nA:()=>u,qQ:()=>C});class u{constructor(_,d,m){this.owner=_,this.debugNameSource=d,this.referenceFn=m}getDebugName(_){return P(_,this)}}const G=new Map,U=new WeakMap;function P(v,_){const d=U.get(v);if(d)return d;const m=M(v,_);if(m){let S=G.get(m)??0;S++,G.set(m,S);const D=S===1?m:`${m}#${S}`;return U.set(v,D),D}}function M(v,_){const d=U.get(v);if(d)return d;const m=_.owner?I(_.owner)+".":"";let S;const D=_.debugNameSource;if(D!==void 0)if(typeof D=="function"){if(S=D(),S!==void 0)return m+S}else return m+D;const E=_.referenceFn;if(E!==void 0&&(S=C(E),S!==void 0))return m+S;if(_.owner!==void 0){const B=w(_.owner,v);if(B!==void 0)return m+B}}function w(v,_){for(const d in v)if(v[d]===_)return d}const O=new Map,A=new WeakMap;function I(v){const _=A.get(v);if(_)return _;const d=b(v);let m=O.get(d)??0;m++,O.set(d,m);const S=m===1?d:`${d}#${m}`;return A.set(v,S),S}function b(v){const _=v.constructor;return _?_.name:"Object"}function C(v){const _=v.toString(),m=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(_);return(m?m[1]:void 0)?.trim()}},4034:(Mt,He,c)=>{c.d(He,{C9:()=>m,CQ:()=>S,GV:()=>C,H8:()=>re,P9:()=>Ae,QI:()=>W,QR:()=>B,Rj:()=>b,U4:()=>j,VF:()=>w,Yo:()=>R,eM:()=>$,ef:()=>O,f4:()=>d,fE:()=>v,fi:()=>Re,gt:()=>I,ij:()=>D,k5:()=>ce,lO:()=>E,p7:()=>A,pf:()=>me,pn:()=>ve,sb:()=>he,uN:()=>_,yI:()=>z});var u=c(45573),G=c(34920),U=c(24167),P=c(48391),M=c(41063);const w=(0,U.x1)("list.focusBackground",null,u.kg("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),O=(0,U.x1)("list.focusForeground",null,u.kg("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),A=(0,U.x1)("list.focusOutline",{dark:P.tA,light:P.tA,hcDark:P.bu,hcLight:P.bu},u.kg("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),I=(0,U.x1)("list.focusAndSelectionOutline",null,u.kg("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),b=(0,U.x1)("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:G.Q1.fromHex("#0F4A85").transparent(.1)},u.kg("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),C=(0,U.x1)("list.activeSelectionForeground",{dark:G.Q1.white,light:G.Q1.white,hcDark:null,hcLight:null},u.kg("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),v=(0,U.x1)("list.activeSelectionIconForeground",null,u.kg("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),_=(0,U.x1)("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:G.Q1.fromHex("#0F4A85").transparent(.1)},u.kg("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),d=(0,U.x1)("list.inactiveSelectionForeground",null,u.kg("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),m=(0,U.x1)("list.inactiveSelectionIconForeground",null,u.kg("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),S=(0,U.x1)("list.inactiveFocusBackground",null,u.kg("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),D=(0,U.x1)("list.inactiveFocusOutline",null,u.kg("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),E=(0,U.x1)("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:G.Q1.white.transparent(.1),hcLight:G.Q1.fromHex("#0F4A85").transparent(.1)},u.kg("listHoverBackground","List/Tree background when hovering over items using the mouse.")),B=(0,U.x1)("list.hoverForeground",null,u.kg("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),R=(0,U.x1)("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},u.kg("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),z=(0,U.x1)("list.dropBetweenBackground",{dark:P.t4,light:P.t4,hcDark:null,hcLight:null},u.kg("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),W=(0,U.x1)("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:P.tA,hcLight:P.tA},u.kg("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),$=(0,U.x1)("list.focusHighlightForeground",{dark:W,light:(0,U.Hz)(b,W,"#BBE7FF"),hcDark:W,hcLight:W},u.kg("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),Q=(0,U.x1)("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},u.kg("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),q=(0,U.x1)("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},u.kg("listErrorForeground","Foreground color of list items containing errors.")),ne=(0,U.x1)("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},u.kg("listWarningForeground","Foreground color of list items containing warnings.")),ve=(0,U.x1)("listFilterWidget.background",{light:(0,U.e$)(M.Cg,0),dark:(0,U.a)(M.Cg,0),hcDark:M.Cg,hcLight:M.Cg},u.kg("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),Re=(0,U.x1)("listFilterWidget.outline",{dark:G.Q1.transparent,light:G.Q1.transparent,hcDark:"#f38518",hcLight:"#007ACC"},u.kg("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),Ae=(0,U.x1)("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:P.b1,hcLight:P.b1},u.kg("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),re=(0,U.x1)("listFilterWidget.shadow",M.f9,u.kg("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees.")),K=(0,U.x1)("list.filterMatchBackground",{dark:M.Ub,light:M.Ub,hcDark:null,hcLight:null},u.kg("listFilterMatchHighlight","Background color of the filtered match.")),F=(0,U.x1)("list.filterMatchBorder",{dark:M.EC,light:M.EC,hcDark:P.b1,hcLight:P.bu},u.kg("listFilterMatchHighlightBorder","Border color of the filtered match.")),N=(0,U.x1)("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},u.kg("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized.")),j=(0,U.x1)("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},u.kg("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),me=(0,U.x1)("tree.inactiveIndentGuidesStroke",(0,U.JO)(j,.4),u.kg("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),ce=(0,U.x1)("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},u.kg("tableColumnsBorder","Table border color between columns.")),he=(0,U.x1)("tree.tableOddRowsBackground",{dark:(0,U.JO)(P.CU,.04),light:(0,U.JO)(P.CU,.04),hcDark:null,hcLight:null},u.kg("tableOddRowsBackgroundColor","Background color for odd table rows.")),Le=(0,U.x1)("editorActionList.background",M.Cg,u.kg("editorActionListBackground","Action List background color.")),Y=(0,U.x1)("editorActionList.foreground",M.Fi,u.kg("editorActionListForeground","Action List foreground color.")),ae=(0,U.x1)("editorActionList.focusForeground",C,u.kg("editorActionListFocusForeground","Action List foreground color for the focused item.")),Ce=(0,U.x1)("editorActionList.focusBackground",b,u.kg("editorActionListFocusBackground","Action List background color for the focused item."))},4156:(Mt,He,c)=>{c.d(He,{W:()=>G});const u=globalThis.performance&&typeof globalThis.performance.now=="function";class G{static create(P){return new G(P)}constructor(P){this._now=u&&P===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}},4857:(Mt,He,c)=>{c.d(He,{$u:()=>ve,Ot:()=>Re,oq:()=>re,rN:()=>me,rr:()=>K});var u=c(31938),G=c(15625),U=c(38795),P=c(27759),M=c(43860),w=c(47192),O=c(60599),A=c(90692),I=c(45573),b=c(76222),C=c(18709),v=c(25894),_=c(4879),d=c(81545),m=c(87386),S=c(22250),D=c(68669),E=c(41403),B=c(42640),R=c(64246),z=c(33902),W=c(19867),$=c(7285),Q=c(73240),q=function(ce,he,Le,Y){var ae=arguments.length,Ce=ae<3?he:Y===null?Y=Object.getOwnPropertyDescriptor(he,Le):Y,Pe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ce=Reflect.decorate(ce,he,Le,Y);else for(var ye=ce.length-1;ye>=0;ye--)(Pe=ce[ye])&&(Ce=(ae<3?Pe(Ce):ae>3?Pe(he,Le,Ce):Pe(he,Le))||Ce);return ae>3&&Ce&&Object.defineProperty(he,Le,Ce),Ce},ne=function(ce,he){return function(Le,Y){he(Le,Y,ce)}};function ve(ce,he,Le,Y){let ae,Ce,Pe;if(Array.isArray(ce))Pe=ce,ae=he,Ce=Le;else{const qe=he;Pe=ce.getActions(qe),ae=Le,Ce=Y}const ye=u.Di.getInstance(),Ke=ye.keyStatus.altKey||(A.uF||A.j9)&&ye.keyStatus.shiftKey;Ae(Pe,ae,Ke,Ce?qe=>qe===Ce:qe=>qe==="navigation")}function Re(ce,he,Le,Y,ae,Ce){let Pe,ye,Ke,qe,Ue;if(Array.isArray(ce))Ue=ce,Pe=he,ye=Le,Ke=Y,qe=ae;else{const it=he;Ue=ce.getActions(it),Pe=Le,ye=Y,Ke=ae,qe=Ce}Ae(Ue,Pe,!1,typeof ye=="string"?it=>it===ye:ye,Ke,qe)}function Ae(ce,he,Le,Y=Pe=>Pe==="navigation",ae=()=>!1,Ce=!1){let Pe,ye;Array.isArray(he)?(Pe=he,ye=he):(Pe=he.primary,ye=he.secondary);const Ke=new Set;for(const[qe,Ue]of ce){let x;Y(qe)?(x=Pe,x.length>0&&Ce&&x.push(new M.wv)):(x=ye,x.length>0&&x.push(new M.wv));for(let it of Ue){Le&&(it=it instanceof b.Xe&&it.alt?it.alt:it);const Ze=x.push(it);it instanceof M.YH&&Ke.add({group:qe,action:it,index:Ze-1})}}for(const{group:qe,action:Ue,index:x}of Ke){const it=Y(qe)?Pe:ye,Ze=Ue.actions;ae(Ue,qe,it.length)&&it.splice(x,1,...Ze)}}let re=class extends U.Z4{constructor(he,Le,Y,ae,Ce,Pe,ye,Ke){super(void 0,he,{icon:!!(he.class||he.item.icon),label:!he.class&&!he.item.icon,draggable:Le?.draggable,keybinding:Le?.keybinding,hoverDelegate:Le?.hoverDelegate}),this._options=Le,this._keybindingService=Y,this._notificationService=ae,this._contextKeyService=Ce,this._themeService=Pe,this._contextMenuService=ye,this._accessibilityService=Ke,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new O.HE),this._altKey=u.Di.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(he){he.preventDefault(),he.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(Le){this._notificationService.error(Le)}}render(he){if(super.render(he),he.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let Le=!1;const Y=()=>{const ae=!!this._menuItemAction.alt?.enabled&&(!this._accessibilityService.isMotionReduced()||Le)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&Le);ae!==this._wantsAltCommand&&(this._wantsAltCommand=ae,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(Y)),this._register((0,u.ko)(he,"mouseleave",ae=>{Le=!1,Y()})),this._register((0,u.ko)(he,"mouseenter",ae=>{Le=!0,Y()})),Y()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){const he=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),Le=he&&he.getLabel(),Y=this._commandAction.tooltip||this._commandAction.label;let ae=Le?(0,I.kg)("titleAndKb","{0} ({1})",Y,Le):Y;if(!this._wantsAltCommand&&this._menuItemAction.alt?.enabled){const Ce=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,Pe=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),ye=Pe&&Pe.getLabel(),Ke=ye?(0,I.kg)("titleAndKb","{0} ({1})",Ce,ye):Ce;ae=(0,I.kg)("titleAndKbAndAlt",`{0}
[{1}] {2}`,ae,w.Of.modifierLabels[A.OS].altKey,Ke)}return ae}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(he){this._itemClassDispose.value=void 0;const{element:Le,label:Y}=this;if(!Le||!Y)return;const ae=this._commandAction.checked&&(0,C.N)(he.toggled)&&he.toggled.icon?he.toggled.icon:he.icon;if(ae)if(B.L.isThemeIcon(ae)){const Ce=B.L.asClassNameArray(ae);Y.classList.add(...Ce),this._itemClassDispose.value=(0,O.s)(()=>{Y.classList.remove(...Ce)})}else Y.style.backgroundImage=(0,R.HD)(this._themeService.getColorTheme().type)?(0,u.Tf)(ae.dark):(0,u.Tf)(ae.light),Y.classList.add("icon"),this._itemClassDispose.value=(0,O.qE)((0,O.s)(()=>{Y.style.backgroundImage="",Y.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};re=q([ne(2,m.b),ne(3,S.Ot),ne(4,v.fN),ne(5,E.Gy),ne(6,_.Z),ne(7,Q.j)],re);class K extends re{render(he){this.options.label=!0,this.options.icon=!1,super.render(he),he.classList.add("text-only"),he.classList.toggle("use-comma",this._options?.useComma??!1)}updateLabel(){const he=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!he)return super.updateLabel();if(this.label){const Le=K._symbolPrintEnter(he);this._options?.conversational?this.label.textContent=(0,I.kg)({key:"content2",comment:['A label with keybindg like "ESC to dismiss"']},"{1} to {0}",this._action.label,Le):this.label.textContent=(0,I.kg)({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,Le)}}static _symbolPrintEnter(he){return he.getLabel()?.replace(/\benter\b/gi,"\u23CE").replace(/\bEscape\b/gi,"Esc")}}let F=class extends P.d{constructor(he,Le,Y,ae,Ce){const Pe={...Le,menuAsChild:Le?.menuAsChild??!1,classNames:Le?.classNames??(B.L.isThemeIcon(he.item.icon)?B.L.asClassName(he.item.icon):void 0),keybindingProvider:Le?.keybindingProvider??(ye=>Y.lookupKeybinding(ye.id))};super(he,{getActions:()=>he.actions},ae,Pe),this._keybindingService=Y,this._contextMenuService=ae,this._themeService=Ce}render(he){super.render(he),(0,z.j)(this.element),he.classList.add("menu-entry");const Le=this._action,{icon:Y}=Le.item;if(Y&&!B.L.isThemeIcon(Y)){this.element.classList.add("icon");const ae=()=>{this.element&&(this.element.style.backgroundImage=(0,R.HD)(this._themeService.getColorTheme().type)?(0,u.Tf)(Y.dark):(0,u.Tf)(Y.light))};ae(),this._register(this._themeService.onDidColorThemeChange(()=>{ae()}))}}};F=q([ne(2,m.b),ne(3,_.Z),ne(4,E.Gy)],F);let N=class extends U.EH{constructor(he,Le,Y,ae,Ce,Pe,ye,Ke){super(null,he),this._keybindingService=Y,this._notificationService=ae,this._contextMenuService=Ce,this._menuService=Pe,this._instaService=ye,this._storageService=Ke,this._container=null,this._options=Le,this._storageKey=`${he.item.submenu.id}_lastActionId`;let qe;const Ue=Le?.persistLastActionId?Ke.get(this._storageKey,1):void 0;Ue&&(qe=he.actions.find(it=>Ue===it.id)),qe||(qe=he.actions[0]),this._defaultAction=this._instaService.createInstance(re,qe,{keybinding:this._getDefaultActionKeybindingLabel(qe)});const x={keybindingProvider:it=>this._keybindingService.lookupKeybinding(it.id),...Le,menuAsChild:Le?.menuAsChild??!0,classNames:Le?.classNames??["codicon","codicon-chevron-down"],actionRunner:Le?.actionRunner??new M.LN};this._dropdown=new P.d(he,he.actions,this._contextMenuService,x),this._register(this._dropdown.actionRunner.onDidRun(it=>{it.action instanceof b.Xe&&this.update(it.action)}))}update(he){this._options?.persistLastActionId&&this._storageService.store(this._storageKey,he.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(re,he,{keybinding:this._getDefaultActionKeybindingLabel(he)}),this._defaultAction.actionRunner=new class extends M.LN{async runAction(Le,Y){await Le.run(void 0)}},this._container&&this._defaultAction.render((0,u.Hs)(this._container,(0,u.$)(".action-container")))}_getDefaultActionKeybindingLabel(he){let Le;if(this._options?.renderKeybindingWithDefaultActionLabel){const Y=this._keybindingService.lookupKeybinding(he.id);Y&&(Le=`(${Y.getLabel()})`)}return Le}setActionContext(he){super.setActionContext(he),this._defaultAction.setActionContext(he),this._dropdown.setActionContext(he)}render(he){this._container=he,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const Le=(0,u.$)(".action-container");this._defaultAction.render((0,u.BC)(this._container,Le)),this._register((0,u.ko)(Le,u.Bx.KEY_DOWN,ae=>{const Ce=new G.Z(ae);Ce.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),Ce.stopPropagation())}));const Y=(0,u.$)(".dropdown-action-container");this._dropdown.render((0,u.BC)(this._container,Y)),this._register((0,u.ko)(Y,u.Bx.KEY_DOWN,ae=>{const Ce=new G.Z(ae);Ce.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),this._defaultAction.element?.focus(),Ce.stopPropagation())}))}focus(he){he?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(he){he?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};N=q([ne(2,m.b),ne(3,S.Ot),ne(4,_.Z),ne(5,b.ez),ne(6,d._Y),ne(7,D.CS)],N);let j=class extends U.XF{constructor(he,Le){super(null,he,he.actions.map(Y=>({text:Y.id===M.wv.ID?"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500":Y.label,isDisabled:!Y.enabled})),0,Le,$.RE,{ariaLabel:he.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,he.actions.findIndex(Y=>Y.checked)))}render(he){super.render(he),he.style.borderColor=(0,W.GuP)(W.HcB)}runAction(he,Le){const Y=this.action.actions[Le];Y&&this.actionRunner.run(Y)}};j=q([ne(1,_.l)],j);function me(ce,he,Le){return he instanceof b.Xe?ce.createInstance(re,he,Le):he instanceof b.nI?he.item.isSelection?ce.createInstance(j,he):he.item.rememberDefaultAction?ce.createInstance(N,he,{...Le,persistLastActionId:!0}):ce.createInstance(F,he,Le):void 0}},4879:(Mt,He,c)=>{c.d(He,{Z:()=>U,l:()=>G});var u=c(81545);const G=(0,u.u1)("contextViewService"),U=(0,u.u1)("contextMenuService")},4977:(Mt,He,c)=>{c.d(He,{J7:()=>d,W0:()=>O,aV:()=>_,nd:()=>w});var u=c(90692),G=c(45573),U=c(25894);const P=new U.N1("isMac",u.zx,(0,G.kg)("isMac","Whether the operating system is macOS")),M=new U.N1("isLinux",u.j9,(0,G.kg)("isLinux","Whether the operating system is Linux")),w=new U.N1("isWindows",u.uF,(0,G.kg)("isWindows","Whether the operating system is Windows")),O=new U.N1("isWeb",u.HZ,(0,G.kg)("isWeb","Whether the platform is a web browser")),A=new U.N1("isMacNative",u.zx&&!u.HZ,(0,G.kg)("isMacNative","Whether the operating system is macOS on a non-browser platform")),I=new U.N1("isIOS",u.un,(0,G.kg)("isIOS","Whether the operating system is iOS")),b=new U.N1("isMobile",u.Fr,(0,G.kg)("isMobile","Whether the platform is a mobile web browser")),C=new U.N1("isDevelopment",!1,!0),v=new U.N1("productQualityType","",(0,G.kg)("productQualityType","Quality type of VS Code")),_="inputFocus",d=new U.N1(_,!1,(0,G.kg)("inputFocus","Whether keyboard focus is inside an input box"))},5262:(Mt,He,c)=>{c.d(He,{ne:()=>dt,Nd:()=>Ye,Jo:()=>Ue,WJ:()=>x,dt:()=>mt,uU:()=>we,Tt:()=>D,yr:()=>Ke,O:()=>qe,WP:()=>m,dE:()=>E,J1:()=>Le,or:()=>_});var u=c(41461);function G(ke){const Z=M(ke);if(Z&&Z.length>0)return new Uint32Array(Z)}let U=0;const P=new Uint32Array(10);function M(ke){if(U=0,w(ke,A,4352),U>0||(w(ke,I,4449),U>0)||(w(ke,b,4520),U>0)||(w(ke,C,12593),U))return P.subarray(0,U);if(ke>=44032&&ke<=55203){const Z=ke-44032,Fe=Z%588,pt=Math.floor(Z/588),et=Math.floor(Fe/28),Zt=Fe%28-1;if(pt<A.length?w(pt,A,0):4352+pt-12593<C.length&&w(4352+pt,C,12593),et<I.length?w(et,I,0):4449+et-12593<C.length&&w(4449+et-12593,C,12593),Zt>=0&&(Zt<b.length?w(Zt,b,0):4520+Zt-12593<C.length&&w(4520+Zt-12593,C,12593)),U>0)return P.subarray(0,U)}}function w(ke,Z,Fe){ke>=Fe&&ke<Fe+Z.length&&O(Z[ke-Fe])}function O(ke){ke!==0&&(P[U++]=ke&255,ke>>8&&(P[U++]=ke>>8&255),ke>>16&&(P[U++]=ke>>16&255))}const A=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),I=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),b=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),C=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);var v=c(85565);function _(...ke){return function(Z,Fe){for(let pt=0,et=ke.length;pt<et;pt++){const Zt=ke[pt](Z,Fe);if(Zt)return Zt}return null}}const d=S.bind(void 0,!1),m=S.bind(void 0,!0);function S(ke,Z,Fe){if(!Fe||Fe.length<Z.length)return null;let pt;return ke?pt=v.ns(Fe,Z):pt=Fe.indexOf(Z)===0,pt?Z.length>0?[{start:0,end:Z.length}]:[]:null}function D(ke,Z){const Fe=Z.toLowerCase().indexOf(ke.toLowerCase());return Fe===-1?null:[{start:Fe,end:Fe+ke.length}]}function E(ke,Z){return B(ke.toLowerCase(),Z.toLowerCase(),0,0)}function B(ke,Z,Fe,pt){if(Fe===ke.length)return[];if(pt===Z.length)return null;if(ke[Fe]===Z[pt]){let et=null;return(et=B(ke,Z,Fe+1,pt+1))?re({start:pt,end:pt+1},et):null}return B(ke,Z,Fe,pt+1)}function R(ke){return 97<=ke&&ke<=122}function z(ke){return 65<=ke&&ke<=90}function W(ke){return 48<=ke&&ke<=57}function $(ke){return ke===32||ke===9||ke===10||ke===13}const Q=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(ke=>Q.add(ke.charCodeAt(0)));function q(ke){return $(ke)||Q.has(ke)}function ne(ke,Z){return ke===Z||q(ke)&&q(Z)}const ve=new Map;function Re(ke){if(ve.has(ke))return ve.get(ke);let Z;const Fe=G(ke);return Fe&&(Z=Fe),ve.set(ke,Z),Z}function Ae(ke){return R(ke)||z(ke)||W(ke)}function re(ke,Z){return Z.length===0?Z=[ke]:ke.end===Z[0].start?Z[0].start=ke.start:Z.unshift(ke),Z}function K(ke,Z){for(let Fe=Z;Fe<ke.length;Fe++){const pt=ke.charCodeAt(Fe);if(z(pt)||W(pt)||Fe>0&&!Ae(ke.charCodeAt(Fe-1)))return Fe}return ke.length}function F(ke,Z,Fe,pt){if(Fe===ke.length)return[];if(pt===Z.length)return null;if(ke[Fe]!==Z[pt].toLowerCase())return null;{let et=null,Zt=pt+1;for(et=F(ke,Z,Fe+1,pt+1);!et&&(Zt=K(Z,Zt))<Z.length;)et=F(ke,Z,Fe+1,Zt),Zt++;return et===null?null:re({start:pt,end:pt+1},et)}}function N(ke){let Z=0,Fe=0,pt=0,et=0,Zt=0;for(let yi=0;yi<ke.length;yi++)Zt=ke.charCodeAt(yi),z(Zt)&&Z++,R(Zt)&&Fe++,Ae(Zt)&&pt++,W(Zt)&&et++;const bi=Z/ke.length,ci=Fe/ke.length,Oi=pt/ke.length,Ii=et/ke.length;return{upperPercent:bi,lowerPercent:ci,alphaPercent:Oi,numericPercent:Ii}}function j(ke){const{upperPercent:Z,lowerPercent:Fe}=ke;return Fe===0&&Z>.6}function me(ke){const{upperPercent:Z,lowerPercent:Fe,alphaPercent:pt,numericPercent:et}=ke;return Fe>.2&&Z<.8&&pt>.6&&et<.2}function ce(ke){let Z=0,Fe=0,pt=0,et=0;for(let Zt=0;Zt<ke.length;Zt++)pt=ke.charCodeAt(Zt),z(pt)&&Z++,R(pt)&&Fe++,$(pt)&&et++;return(Z===0||Fe===0)&&et===0?ke.length<=30:Z<=5}function he(ke,Z){if(!Z||(Z=Z.trim(),Z.length===0)||!ce(ke))return null;Z.length>60&&(Z=Z.substring(0,60));const Fe=N(Z);if(!me(Fe)){if(!j(Fe))return null;Z=Z.toLowerCase()}let pt=null,et=0;for(ke=ke.toLowerCase();et<Z.length&&(pt=F(ke,Z,0,et))===null;)et=K(Z,et+1);return pt}function Le(ke,Z,Fe=!1){if(!Z||Z.length===0)return null;let pt=null,et=0;for(ke=ke.toLowerCase(),Z=Z.toLowerCase();et<Z.length&&(pt=Y(ke,Z,0,et,Fe),pt===null);)et=ae(Z,et+1);return pt}function Y(ke,Z,Fe,pt,et){let Zt=0;if(Fe===ke.length)return[];if(pt===Z.length)return null;if(!ne(ke.charCodeAt(Fe),Z.charCodeAt(pt))){const Oi=Re(ke.charCodeAt(Fe));if(!Oi)return null;for(let Ii=0;Ii<Oi.length;Ii++)if(!ne(Oi[Ii],Z.charCodeAt(pt+Ii)))return null;Zt+=Oi.length-1}let bi=null,ci=pt+Zt+1;if(bi=Y(ke,Z,Fe+1,ci,et),!et)for(;!bi&&(ci=ae(Z,ci))<Z.length;)bi=Y(ke,Z,Fe+1,ci,et),ci++;if(!bi)return null;if(ke.charCodeAt(Fe)!==Z.charCodeAt(pt)){const Oi=Re(ke.charCodeAt(Fe));if(!Oi)return bi;for(let Ii=0;Ii<Oi.length;Ii++)if(Oi[Ii]!==Z.charCodeAt(pt+Ii))return bi}return re({start:pt,end:pt+Zt+1},bi)}function ae(ke,Z){for(let Fe=Z;Fe<ke.length;Fe++)if(q(ke.charCodeAt(Fe))||Fe>0&&q(ke.charCodeAt(Fe-1)))return Fe;return ke.length}const Ce=_(m,he,D),Pe=_(m,he,E),ye=new u.qK(1e4);function Ke(ke,Z,Fe=!1){if(typeof ke!="string"||typeof Z!="string")return null;let pt=ye.get(ke);pt||(pt=new RegExp(v.Bm(ke),"i"),ye.set(ke,pt));const et=pt.exec(Z);return et?[{start:et.index,end:et.index+et[0].length}]:Fe?Pe(ke,Z):Ce(ke,Z)}function qe(ke,Z){const Fe=mt(ke,ke.toLowerCase(),0,Z,Z.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return Fe?x(Fe):null}function Ue(ke,Z,Fe,pt,et,Zt){const bi=Math.min(13,ke.length);for(;Fe<bi;Fe++){const ci=mt(ke,Z,Fe,pt,et,Zt,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(ci)return ci}return[0,Zt]}function x(ke){if(typeof ke>"u")return[];const Z=[],Fe=ke[1];for(let pt=ke.length-1;pt>1;pt--){const et=ke[pt]+Fe,Zt=Z[Z.length-1];Zt&&Zt.end===et?Zt.end=et+1:Z.push({start:et,end:et+1})}return Z}const it=128;function Ze(){const ke=[],Z=[];for(let Fe=0;Fe<=it;Fe++)Z[Fe]=0;for(let Fe=0;Fe<=it;Fe++)ke.push(Z.slice(0));return ke}function _t(ke){const Z=[];for(let Fe=0;Fe<=ke;Fe++)Z[Fe]=0;return Z}const ot=_t(2*it),Pt=_t(2*it),Wt=Ze(),Rt=Ze(),at=Ze(),Xe=!1;function pe(ke,Z,Fe,pt,et){function Zt(ci,Oi,Ii=" "){for(;ci.length<Oi;)ci=Ii+ci;return ci}let bi=` |   |${pt.split("").map(ci=>Zt(ci,3)).join("|")}
`;for(let ci=0;ci<=Fe;ci++)ci===0?bi+=" |":bi+=`${Z[ci-1]}|`,bi+=ke[ci].slice(0,et+1).map(Oi=>Zt(Oi.toString(),3)).join("|")+`
`;return bi}function te(ke,Z,Fe,pt){ke=ke.substr(Z),Fe=Fe.substr(pt)}function oe(ke,Z){if(Z<0||Z>=ke.length)return!1;const Fe=ke.codePointAt(Z);switch(Fe){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!v.Ss(Fe)}}function Te(ke,Z){if(Z<0||Z>=ke.length)return!1;switch(ke.charCodeAt(Z)){case 32:case 9:return!0;default:return!1}}function Ve(ke,Z,Fe){return Z[ke]!==Fe[ke]}function We(ke,Z,Fe,pt,et,Zt,bi=!1){for(;Z<Fe&&et<Zt;)ke[Z]===pt[et]&&(bi&&(ot[Z]=et),Z+=1),et+=1;return Z===Fe}var dt;(function(ke){ke.Default=[-100,0];function Z(Fe){return!Fe||Fe.length===2&&Fe[0]===-100&&Fe[1]===0}ke.isDefault=Z})(dt||(dt={}));class Ye{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(Z,Fe){this.firstMatchCanBeWeak=Z,this.boostFullMatch=Fe}}function mt(ke,Z,Fe,pt,et,Zt,bi=Ye.default){const ci=ke.length>it?it:ke.length,Oi=pt.length>it?it:pt.length;if(Fe>=ci||Zt>=Oi||ci-Fe>Oi-Zt||!We(Z,Fe,ci,et,Zt,Oi,!0))return;Dt(ci,Oi,Fe,Zt,Z,et);let Ii=1,yi=1,Vt=Fe,_n=Zt;const oi=[!1];for(Ii=1,Vt=Fe;Vt<ci;Ii++,Vt++){const Ci=ot[Vt],wi=Pt[Vt],ji=Vt+1<ci?Pt[Vt+1]:Oi;for(yi=Ci-Zt+1,_n=Ci;_n<ji;yi++,_n++){let Di=Number.MIN_SAFE_INTEGER,dn=!1;_n<=wi&&(Di=Se(ke,Z,Vt,Fe,pt,et,_n,Oi,Zt,Wt[Ii-1][yi-1]===0,oi));let nn=0;Di!==Number.MAX_SAFE_INTEGER&&(dn=!0,nn=Di+Rt[Ii-1][yi-1]);const Dn=_n>Ci,Mi=Dn?Rt[Ii][yi-1]+(Wt[Ii][yi-1]>0?-5:0):0,Zn=_n>Ci+1&&Wt[Ii][yi-1]>0,us=Zn?Rt[Ii][yi-2]+(Wt[Ii][yi-2]>0?-5:0):0;if(Zn&&(!Dn||us>=Mi)&&(!dn||us>=nn))Rt[Ii][yi]=us,at[Ii][yi]=3,Wt[Ii][yi]=0;else if(Dn&&(!dn||Mi>=nn))Rt[Ii][yi]=Mi,at[Ii][yi]=2,Wt[Ii][yi]=0;else if(dn)Rt[Ii][yi]=nn,at[Ii][yi]=1,Wt[Ii][yi]=Wt[Ii-1][yi-1]+1;else throw new Error("not possible")}}if(Xe&&te(ke,Fe,pt,Zt),!oi[0]&&!bi.firstMatchCanBeWeak)return;Ii--,yi--;const Ne=[Rt[Ii][yi],Zt];let gt=0,ei=0;for(;Ii>=1;){let Ci=yi;do{const wi=at[Ii][Ci];if(wi===3)Ci=Ci-2;else if(wi===2)Ci=Ci-1;else break}while(Ci>=1);gt>1&&Z[Fe+Ii-1]===et[Zt+yi-1]&&!Ve(Ci+Zt-1,pt,et)&&gt+1>Wt[Ii][Ci]&&(Ci=yi),Ci===yi?gt++:gt=1,ei||(ei=Ci),Ii--,yi=Ci-1,Ne.push(yi)}Oi-Zt===ci&&bi.boostFullMatch&&(Ne[0]+=2);const ai=ei-ci;return Ne[0]-=ai,Ne}function Dt(ke,Z,Fe,pt,et,Zt){let bi=ke-1,ci=Z-1;for(;bi>=Fe&&ci>=pt;)et[bi]===Zt[ci]&&(Pt[bi]=ci,bi--),ci--}function Se(ke,Z,Fe,pt,et,Zt,bi,ci,Oi,Ii,yi){if(Z[Fe]!==Zt[bi])return Number.MIN_SAFE_INTEGER;let Vt=1,_n=!1;return bi===Fe-pt?Vt=ke[Fe]===et[bi]?7:5:Ve(bi,et,Zt)&&(bi===0||!Ve(bi-1,et,Zt))?(Vt=ke[Fe]===et[bi]?7:5,_n=!0):oe(Zt,bi)&&(bi===0||!oe(Zt,bi-1))?Vt=5:(oe(Zt,bi-1)||Te(Zt,bi-1))&&(Vt=5,_n=!0),Vt>1&&Fe===pt&&(yi[0]=!0),_n||(_n=Ve(bi,et,Zt)||oe(Zt,bi-1)||Te(Zt,bi-1)),Fe===pt?bi>Oi&&(Vt-=_n?3:5):Ii?Vt+=_n?2:0:Vt+=_n?0:1,bi+1===ci&&(Vt-=_n?3:5),Vt}function we(ke,Z,Fe,pt,et,Zt,bi){return Xt(ke,Z,Fe,pt,et,Zt,!0,bi)}function Xt(ke,Z,Fe,pt,et,Zt,bi,ci){let Oi=mt(ke,Z,Fe,pt,et,Zt,ci);if(Oi&&!bi)return Oi;if(ke.length>=3){const Ii=Math.min(7,ke.length-1);for(let yi=Fe+1;yi<Ii;yi++){const Vt=ri(ke,yi);if(Vt){const _n=mt(Vt,Vt.toLowerCase(),Fe,pt,et,Zt,ci);_n&&(_n[0]-=3,(!Oi||_n[0]>Oi[0])&&(Oi=_n))}}}return Oi}function ri(ke,Z){if(Z+1>=ke.length)return;const Fe=ke[Z],pt=ke[Z+1];if(Fe!==pt)return ke.slice(0,Z)+pt+Fe+ke.slice(Z+2)}},5408:(Mt,He,c)=>{c.d(He,{f:()=>u});class u{constructor(U,P,M,w,O,A,I){this.id=U,this.label=P,this.alias=M,this.metadata=w,this._precondition=O,this._run=A,this._contextKeyService=I}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(U){return this.isSupported()?this._run(U):Promise.resolve(void 0)}}},5656:(Mt,He,c)=>{c.d(He,{Al:()=>M,Hf:()=>U,_O:()=>P});var u=c(85565),G=c(98414);const U=!1;class P{static{this.EMPTY=new P("",0,0,null,void 0)}constructor(O,A,I,b,C){this.value=O,this.selectionStart=A,this.selectionEnd=I,this.selection=b,this.newlineCountBeforeSelection=C}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(O,A){const I=O.getValue(),b=O.getSelectionStart(),C=O.getSelectionEnd();let v;if(A){const _=I.substring(0,b),d=A.value.substring(0,A.selectionStart);_===d&&(v=A.newlineCountBeforeSelection)}return new P(I,b,C,null,v)}collapseSelection(){return this.selectionStart===this.value.length?this:new P(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(O,A,I){A.setValue(O,this.value),I&&A.setSelectionRange(O,this.selectionStart,this.selectionEnd)}deduceEditorPosition(O){if(O<=this.selectionStart){const b=this.value.substring(O,this.selectionStart);return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,b,-1)}if(O>=this.selectionEnd){const b=this.value.substring(this.selectionEnd,O);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,b,1)}const A=this.value.substring(this.selectionStart,O);if(A.indexOf("\u2026")===-1)return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,A,1);const I=this.value.substring(O,this.selectionEnd);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,I,-1)}_finishDeduceEditorPosition(O,A,I){let b=0,C=-1;for(;(C=A.indexOf(`
`,C+1))!==-1;)b++;return[O,I*A.length,b]}static deduceInput(O,A,I){if(!O)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const b=Math.min(u.Qp(O.value,A.value),O.selectionStart,A.selectionStart),C=Math.min(u.Vi(O.value,A.value),O.value.length-O.selectionEnd,A.value.length-A.selectionEnd),v=O.value.substring(b,O.value.length-C),_=A.value.substring(b,A.value.length-C),d=O.selectionStart-b,m=O.selectionEnd-b,S=A.selectionStart-b,D=A.selectionEnd-b;if(S===D){const B=O.selectionStart-b;return{text:_,replacePrevCharCnt:B,replaceNextCharCnt:0,positionDelta:0}}const E=m-d;return{text:_,replacePrevCharCnt:E,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(O,A){if(!O)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(O.value===A.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:A.selectionEnd-O.selectionEnd};const I=Math.min(u.Qp(O.value,A.value),O.selectionEnd),b=Math.min(u.Vi(O.value,A.value),O.value.length-O.selectionEnd),C=O.value.substring(I,O.value.length-b),v=A.value.substring(I,A.value.length-b),_=O.selectionStart-I,d=O.selectionEnd-I,m=A.selectionStart-I,S=A.selectionEnd-I;return{text:v,replacePrevCharCnt:d,replaceNextCharCnt:C.length-d,positionDelta:S-v.length}}}class M{static _getPageOfLine(O,A){return Math.floor((O-1)/A)}static _getRangeForPage(O,A){const I=O*A,b=I+1,C=I+A;return new G.Q(b,1,C+1,1)}static fromEditorSelection(O,A,I,b){const v=M._getPageOfLine(A.startLineNumber,I),_=M._getRangeForPage(v,I),d=M._getPageOfLine(A.endLineNumber,I),m=M._getRangeForPage(d,I);let S=_.intersectRanges(new G.Q(1,1,A.startLineNumber,A.startColumn));if(b&&O.getValueLengthInRange(S,1)>500){const $=O.modifyPosition(S.getEndPosition(),-500);S=G.Q.fromPositions($,S.getEndPosition())}const D=O.getValueInRange(S,1),E=O.getLineCount(),B=O.getLineMaxColumn(E);let R=m.intersectRanges(new G.Q(A.endLineNumber,A.endColumn,E,B));if(b&&O.getValueLengthInRange(R,1)>500){const $=O.modifyPosition(R.getStartPosition(),500);R=G.Q.fromPositions(R.getStartPosition(),$)}const z=O.getValueInRange(R,1);let W;if(v===d||v+1===d)W=O.getValueInRange(A,1);else{const $=_.intersectRanges(A),Q=m.intersectRanges(A);W=O.getValueInRange($,1)+"\u2026"+O.getValueInRange(Q,1)}return b&&W.length>2*500&&(W=W.substring(0,500)+"\u2026"+W.substring(W.length-500,W.length)),new P(D+W+z,D.length,D.length+W.length,A,S.endLineNumber-S.startLineNumber)}}},5751:(Mt,He,c)=>{c.d(He,{Io:()=>w,J3:()=>U,Ld:()=>M,Th:()=>A});var u=c(13697),G=c(77714);const U="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function P(b=""){let C="(-?\\d*\\.\\d\\w*)|([^";for(const v of U)b.indexOf(v)>=0||(C+="\\"+v);return C+="\\s]+)",new RegExp(C,"g")}const M=P();function w(b){let C=M;if(b&&b instanceof RegExp)if(b.global)C=b;else{let v="g";b.ignoreCase&&(v+="i"),b.multiline&&(v+="m"),b.unicode&&(v+="u"),C=new RegExp(b.source,v)}return C.lastIndex=0,C}const O=new G.w;O.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function A(b,C,v,_,d){if(C=w(C),d||(d=u.f.first(O)),v.length>d.maxLen){let B=b-d.maxLen/2;return B<0?B=0:_+=B,v=v.substring(B,b+d.maxLen/2),A(b,C,v,_,d)}const m=Date.now(),S=b-1-_;let D=-1,E=null;for(let B=1;!(Date.now()-m>=d.timeBudget);B++){const R=S-d.windowSize*B;C.lastIndex=Math.max(0,R);const z=I(C,v,S,D);if(!z&&E||(E=z,R<=0))break;D=R}if(E){const B={word:E[0],startColumn:_+1+E.index,endColumn:_+1+E.index+E[0].length};return C.lastIndex=0,B}return null}function I(b,C,v,_){let d;for(;d=b.exec(C);){const m=d.index||0;if(m<=v&&b.lastIndex>=v)return d;if(_>0&&m>_)return null}return null}},6105:(Mt,He,c)=>{c.d(He,{Ft:()=>M,V7:()=>P,Xo:()=>w,ok:()=>G,xb:()=>U});var u=c(87856);function G(O,A){if(!O)throw new Error(A?`Assertion failed (${A})`:"Assertion Failed")}function U(O,A="Unreachable"){throw new Error(A)}function P(O){O||(0,u.dz)(new u.D7("Soft Assertion Failed"))}function M(O){O()||(O(),(0,u.dz)(new u.D7("Assertion Failed")))}function w(O,A){let I=0;for(;I<O.length-1;){const b=O[I],C=O[I+1];if(!A(b,C))return!1;I++}return!0}},6113:(Mt,He,c)=>{c.d(He,{n:()=>u,r:()=>G});class u{constructor(P){this._prefix=P,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const G=new u("id#")},7069:(Mt,He,c)=>{c.d(He,{B:()=>I,q:()=>b});var u=c(31938),G=c(42008),U=c(93009),P=c(77065),M=c(56491),w=c(60599),O=c(77714),A=function(C,v,_,d){var m=arguments.length,S=m<3?v:d===null?d=Object.getOwnPropertyDescriptor(v,_):d,D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(C,v,_,d);else for(var E=C.length-1;E>=0;E--)(D=C[E])&&(S=(m<3?D(S):m>3?D(v,_,S):D(v,_))||S);return m>3&&S&&Object.defineProperty(v,_,S),S},I;(function(C){C.Tap="-monaco-gesturetap",C.Change="-monaco-gesturechange",C.Start="-monaco-gesturestart",C.End="-monaco-gesturesend",C.Contextmenu="-monaco-gesturecontextmenu"})(I||(I={}));class b extends w.jG{static{this.SCROLL_FRICTION=-.005}static{this.HOLD_DELAY=700}static{this.CLEAR_TAP_COUNT_TIME=400}constructor(){super(),this.dispatched=!1,this.targets=new O.w,this.ignoreTargets=new O.w,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(M.Jh.runAndSubscribe(u.Iv,({window:v,disposables:_})=>{_.add(u.ko(v.document,"touchstart",d=>this.onTouchStart(d),{passive:!1})),_.add(u.ko(v.document,"touchend",d=>this.onTouchEnd(v,d))),_.add(u.ko(v.document,"touchmove",d=>this.onTouchMove(d),{passive:!1}))},{window:G.G,disposables:this._store}))}static addTarget(v){if(!b.isTouchDevice())return w.jG.None;b.INSTANCE||(b.INSTANCE=(0,w.lC)(new b));const _=b.INSTANCE.targets.push(v);return(0,w.s)(_)}static ignoreTarget(v){if(!b.isTouchDevice())return w.jG.None;b.INSTANCE||(b.INSTANCE=(0,w.lC)(new b));const _=b.INSTANCE.ignoreTargets.push(v);return(0,w.s)(_)}static isTouchDevice(){return"ontouchstart"in G.G||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(v){const _=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let d=0,m=v.targetTouches.length;d<m;d++){const S=v.targetTouches.item(d);this.activeTouches[S.identifier]={id:S.identifier,initialTarget:S.target,initialTimeStamp:_,initialPageX:S.pageX,initialPageY:S.pageY,rollingTimestamps:[_],rollingPageX:[S.pageX],rollingPageY:[S.pageY]};const D=this.newGestureEvent(I.Start,S.target);D.pageX=S.pageX,D.pageY=S.pageY,this.dispatchEvent(D)}this.dispatched&&(v.preventDefault(),v.stopPropagation(),this.dispatched=!1)}onTouchEnd(v,_){const d=Date.now(),m=Object.keys(this.activeTouches).length;for(let S=0,D=_.changedTouches.length;S<D;S++){const E=_.changedTouches.item(S);if(!this.activeTouches.hasOwnProperty(String(E.identifier)))continue;const B=this.activeTouches[E.identifier],R=Date.now()-B.initialTimeStamp;if(R<b.HOLD_DELAY&&Math.abs(B.initialPageX-U.RT(B.rollingPageX))<30&&Math.abs(B.initialPageY-U.RT(B.rollingPageY))<30){const z=this.newGestureEvent(I.Tap,B.initialTarget);z.pageX=U.RT(B.rollingPageX),z.pageY=U.RT(B.rollingPageY),this.dispatchEvent(z)}else if(R>=b.HOLD_DELAY&&Math.abs(B.initialPageX-U.RT(B.rollingPageX))<30&&Math.abs(B.initialPageY-U.RT(B.rollingPageY))<30){const z=this.newGestureEvent(I.Contextmenu,B.initialTarget);z.pageX=U.RT(B.rollingPageX),z.pageY=U.RT(B.rollingPageY),this.dispatchEvent(z)}else if(m===1){const z=U.RT(B.rollingPageX),W=U.RT(B.rollingPageY),$=U.RT(B.rollingTimestamps)-B.rollingTimestamps[0],Q=z-B.rollingPageX[0],q=W-B.rollingPageY[0],ne=[...this.targets].filter(ve=>B.initialTarget instanceof Node&&ve.contains(B.initialTarget));this.inertia(v,ne,d,Math.abs(Q)/$,Q>0?1:-1,z,Math.abs(q)/$,q>0?1:-1,W)}this.dispatchEvent(this.newGestureEvent(I.End,B.initialTarget)),delete this.activeTouches[E.identifier]}this.dispatched&&(_.preventDefault(),_.stopPropagation(),this.dispatched=!1)}newGestureEvent(v,_){const d=document.createEvent("CustomEvent");return d.initEvent(v,!1,!0),d.initialTarget=_,d.tapCount=0,d}dispatchEvent(v){if(v.type===I.Tap){const _=new Date().getTime();let d=0;_-this._lastSetTapCountTime>b.CLEAR_TAP_COUNT_TIME?d=1:d=2,this._lastSetTapCountTime=_,v.tapCount=d}else(v.type===I.Change||v.type===I.Contextmenu)&&(this._lastSetTapCountTime=0);if(v.initialTarget instanceof Node){for(const d of this.ignoreTargets)if(d.contains(v.initialTarget))return;const _=[];for(const d of this.targets)if(d.contains(v.initialTarget)){let m=0,S=v.initialTarget;for(;S&&S!==d;)m++,S=S.parentElement;_.push([m,d])}_.sort((d,m)=>d[0]-m[0]);for(const[d,m]of _)m.dispatchEvent(v),this.dispatched=!0}}inertia(v,_,d,m,S,D,E,B,R){this.handle=u.PG(v,()=>{const z=Date.now(),W=z-d;let $=0,Q=0,q=!0;m+=b.SCROLL_FRICTION*W,E+=b.SCROLL_FRICTION*W,m>0&&(q=!1,$=S*m*W),E>0&&(q=!1,Q=B*E*W);const ne=this.newGestureEvent(I.Change);ne.translationX=$,ne.translationY=Q,_.forEach(ve=>ve.dispatchEvent(ne)),q||this.inertia(v,_,z,m,S,D+$,E,B,R+Q)})}onTouchMove(v){const _=Date.now();for(let d=0,m=v.changedTouches.length;d<m;d++){const S=v.changedTouches.item(d);if(!this.activeTouches.hasOwnProperty(String(S.identifier)))continue;const D=this.activeTouches[S.identifier],E=this.newGestureEvent(I.Change,D.initialTarget);E.translationX=S.pageX-U.RT(D.rollingPageX),E.translationY=S.pageY-U.RT(D.rollingPageY),E.pageX=S.pageX,E.pageY=S.pageY,this.dispatchEvent(E),D.rollingPageX.length>3&&(D.rollingPageX.shift(),D.rollingPageY.shift(),D.rollingTimestamps.shift()),D.rollingPageX.push(S.pageX),D.rollingPageY.push(S.pageY),D.rollingTimestamps.push(_)}this.dispatched&&(v.preventDefault(),v.stopPropagation(),this.dispatched=!1)}}A([P.B],b,"isTouchDevice",null)},7285:(Mt,He,c)=>{c.d(He,{Dk:()=>v,IN:()=>m,RE:()=>D,XS:()=>E,cv:()=>M,ho:()=>C,ir:()=>P,m$:()=>_,mk:()=>O,oJ:()=>w,t8:()=>S});var u=c(19867),G=c(34920);function U(B,R){const z={...R};for(const W in B){const $=B[W];z[W]=$!==void 0?(0,u.GuP)($):void 0}return z}const P={keybindingLabelBackground:(0,u.GuP)(u.HDX),keybindingLabelForeground:(0,u.GuP)(u.eUu),keybindingLabelBorder:(0,u.GuP)(u.zUX),keybindingLabelBottomBorder:(0,u.GuP)(u.Qfh),keybindingLabelShadow:(0,u.GuP)(u.f9l)},M={buttonForeground:(0,u.GuP)(u.G_h),buttonSeparator:(0,u.GuP)(u.Q1$),buttonBackground:(0,u.GuP)(u.XJc),buttonHoverBackground:(0,u.GuP)(u.T9h),buttonSecondaryForeground:(0,u.GuP)(u.Inn),buttonSecondaryBackground:(0,u.GuP)(u.xOA),buttonSecondaryHoverBackground:(0,u.GuP)(u.nZG),buttonBorder:(0,u.GuP)(u.raQ)},w={progressBarBackground:(0,u.GuP)(u.BTi)},O={inputActiveOptionBorder:(0,u.GuP)(u.uNK),inputActiveOptionForeground:(0,u.GuP)(u.$$0),inputActiveOptionBackground:(0,u.GuP)(u.c1f)},A={activeForeground:(0,u.GuP)(u.jOE),activeBackground:(0,u.GuP)(u.Ukx),activeBorder:(0,u.GuP)(u.Ips),inactiveForeground:(0,u.GuP)(u.kPT),inactiveBackground:(0,u.GuP)(u.xWN),inactiveBorder:(0,u.GuP)(u.ZBU),inactiveHoverBackground:(0,u.GuP)(u.jr9)},I={checkboxBackground:(0,u.GuP)(u.OcU),checkboxBorder:(0,u.GuP)(u.C5U),checkboxForeground:(0,u.GuP)(u.t0B)},b={dialogBackground:(0,u.GuP)(u.CgL),dialogForeground:(0,u.GuP)(u.FiB),dialogShadow:(0,u.GuP)(u.f9l),dialogBorder:(0,u.GuP)(u.b1q),errorIconForeground:(0,u.GuP)(u.tYX),warningIconForeground:(0,u.GuP)(u.JPj),infoIconForeground:(0,u.GuP)(u.bNw),textLinkForeground:(0,u.GuP)(u.vwp)},C={inputBackground:(0,u.GuP)(u.L4c),inputForeground:(0,u.GuP)(u.cws),inputBorder:(0,u.GuP)(u.Zgs),inputValidationInfoBorder:(0,u.GuP)(u.YSW),inputValidationInfoBackground:(0,u.GuP)(u.I$A),inputValidationInfoForeground:(0,u.GuP)(u.L9Z),inputValidationWarningBorder:(0,u.GuP)(u.C1n),inputValidationWarningBackground:(0,u.GuP)(u.ULt),inputValidationWarningForeground:(0,u.GuP)(u.T5N),inputValidationErrorBorder:(0,u.GuP)(u.eYZ),inputValidationErrorBackground:(0,u.GuP)(u._$n),inputValidationErrorForeground:(0,u.GuP)(u.h9z)},v={listFilterWidgetBackground:(0,u.GuP)(u.pnl),listFilterWidgetOutline:(0,u.GuP)(u.fiM),listFilterWidgetNoMatchesOutline:(0,u.GuP)(u.P9Z),listFilterWidgetShadow:(0,u.GuP)(u.H8q),inputBoxStyles:C,toggleStyles:O},_={badgeBackground:(0,u.GuP)(u.WMx),badgeForeground:(0,u.GuP)(u.zRE),badgeBorder:(0,u.GuP)(u.b1q)},d={breadcrumbsBackground:(0,u.GuP)(u.vV$),breadcrumbsForeground:(0,u.GuP)(u.mc0),breadcrumbsHoverForeground:(0,u.GuP)(u.etE),breadcrumbsFocusForeground:(0,u.GuP)(u.etE),breadcrumbsFocusAndSelectionForeground:(0,u.GuP)(u.sAS)},m={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:(0,u.GuP)(u.VFX),listFocusForeground:(0,u.GuP)(u.efJ),listFocusOutline:(0,u.GuP)(u.p7Y),listActiveSelectionBackground:(0,u.GuP)(u.Rjz),listActiveSelectionForeground:(0,u.GuP)(u.GVV),listActiveSelectionIconForeground:(0,u.GuP)(u.fED),listFocusAndSelectionOutline:(0,u.GuP)(u.gtq),listFocusAndSelectionBackground:(0,u.GuP)(u.Rjz),listFocusAndSelectionForeground:(0,u.GuP)(u.GVV),listInactiveSelectionBackground:(0,u.GuP)(u.uNx),listInactiveSelectionIconForeground:(0,u.GuP)(u.C9U),listInactiveSelectionForeground:(0,u.GuP)(u.f4y),listInactiveFocusBackground:(0,u.GuP)(u.CQ3),listInactiveFocusOutline:(0,u.GuP)(u.ijf),listHoverBackground:(0,u.GuP)(u.lO1),listHoverForeground:(0,u.GuP)(u.QRv),listDropOverBackground:(0,u.GuP)(u.Yoe),listDropBetweenBackground:(0,u.GuP)(u.yIp),listSelectionOutline:(0,u.GuP)(u.buw),listHoverOutline:(0,u.GuP)(u.buw),treeIndentGuidesStroke:(0,u.GuP)(u.U4U),treeInactiveIndentGuidesStroke:(0,u.GuP)(u.pft),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:(0,u.GuP)(u.bXl),tableColumnsBorder:(0,u.GuP)(u.k5u),tableOddRowsBackgroundColor:(0,u.GuP)(u.sbQ)};function S(B){return U(B,m)}const D={selectBackground:(0,u.GuP)(u.rvE),selectListBackground:(0,u.GuP)(u.lWP),selectForeground:(0,u.GuP)(u.yqq),decoratorRightForeground:(0,u.GuP)(u.NBf),selectBorder:(0,u.GuP)(u.HcB),focusBorder:(0,u.GuP)(u.tAP),listFocusBackground:(0,u.GuP)(u.AlL),listInactiveSelectionIconForeground:(0,u.GuP)(u.c7i),listFocusForeground:(0,u.GuP)(u.nH),listFocusOutline:(0,u.HP_)(u.buw,G.Q1.transparent.toString()),listHoverBackground:(0,u.GuP)(u.lO1),listHoverForeground:(0,u.GuP)(u.QRv),listHoverOutline:(0,u.GuP)(u.buw),selectListBorder:(0,u.GuP)(u.sIe),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},E={shadowColor:(0,u.GuP)(u.f9l),borderColor:(0,u.GuP)(u.g$2),foregroundColor:(0,u.GuP)(u.dd_),backgroundColor:(0,u.GuP)(u.c6Y),selectionForegroundColor:(0,u.GuP)(u.pmr),selectionBackgroundColor:(0,u.GuP)(u.Ux$),selectionBorderColor:(0,u.GuP)(u.SNb),separatorColor:(0,u.GuP)(u.D7X),scrollbarShadow:(0,u.GuP)(u.bXl),scrollbarSliderBackground:(0,u.GuP)(u.gnV),scrollbarSliderHoverBackground:(0,u.GuP)(u.cI_),scrollbarSliderActiveBackground:(0,u.GuP)(u.mhZ)}},8264:(Mt,He,c)=>{c.d(He,{IN:()=>z,LC:()=>re,P8:()=>Ae,S8:()=>Q,SA:()=>$,V8:()=>ve,Vn:()=>K,fj:()=>q,hd:()=>ne,pD:()=>Re});var u=c(89394);const G=65,U=97,P=90,M=122,w=46,O=47,A=92,I=58,b=63;class C extends Error{constructor(N,j,me){let ce;typeof j=="string"&&j.indexOf("not ")===0?(ce="must not be",j=j.replace(/^not /,"")):ce="must be";const he=N.indexOf(".")!==-1?"property":"argument";let Le=`The "${N}" ${he} ${ce} of type ${j}`;Le+=`. Received type ${typeof me}`,super(Le),this.code="ERR_INVALID_ARG_TYPE"}}function v(F,N){if(F===null||typeof F!="object")throw new C(N,"Object",F)}function _(F,N){if(typeof F!="string")throw new C(N,"string",F)}const d=u.iD==="win32";function m(F){return F===O||F===A}function S(F){return F===O}function D(F){return F>=G&&F<=P||F>=U&&F<=M}function E(F,N,j,me){let ce="",he=0,Le=-1,Y=0,ae=0;for(let Ce=0;Ce<=F.length;++Ce){if(Ce<F.length)ae=F.charCodeAt(Ce);else{if(me(ae))break;ae=O}if(me(ae)){if(!(Le===Ce-1||Y===1))if(Y===2){if(ce.length<2||he!==2||ce.charCodeAt(ce.length-1)!==w||ce.charCodeAt(ce.length-2)!==w){if(ce.length>2){const Pe=ce.lastIndexOf(j);Pe===-1?(ce="",he=0):(ce=ce.slice(0,Pe),he=ce.length-1-ce.lastIndexOf(j)),Le=Ce,Y=0;continue}else if(ce.length!==0){ce="",he=0,Le=Ce,Y=0;continue}}N&&(ce+=ce.length>0?`${j}..`:"..",he=2)}else ce.length>0?ce+=`${j}${F.slice(Le+1,Ce)}`:ce=F.slice(Le+1,Ce),he=Ce-Le-1;Le=Ce,Y=0}else ae===w&&Y!==-1?++Y:Y=-1}return ce}function B(F){return F?`${F[0]==="."?"":"."}${F}`:""}function R(F,N){v(N,"pathObject");const j=N.dir||N.root,me=N.base||`${N.name||""}${B(N.ext)}`;return j?j===N.root?`${j}${me}`:`${j}${F}${me}`:me}const z={resolve(...F){let N="",j="",me=!1;for(let ce=F.length-1;ce>=-1;ce--){let he;if(ce>=0){if(he=F[ce],_(he,`paths[${ce}]`),he.length===0)continue}else N.length===0?he=u.bJ():(he=u._K[`=${N}`]||u.bJ(),(he===void 0||he.slice(0,2).toLowerCase()!==N.toLowerCase()&&he.charCodeAt(2)===A)&&(he=`${N}\\`));const Le=he.length;let Y=0,ae="",Ce=!1;const Pe=he.charCodeAt(0);if(Le===1)m(Pe)&&(Y=1,Ce=!0);else if(m(Pe))if(Ce=!0,m(he.charCodeAt(1))){let ye=2,Ke=ye;for(;ye<Le&&!m(he.charCodeAt(ye));)ye++;if(ye<Le&&ye!==Ke){const qe=he.slice(Ke,ye);for(Ke=ye;ye<Le&&m(he.charCodeAt(ye));)ye++;if(ye<Le&&ye!==Ke){for(Ke=ye;ye<Le&&!m(he.charCodeAt(ye));)ye++;(ye===Le||ye!==Ke)&&(ae=`\\\\${qe}\\${he.slice(Ke,ye)}`,Y=ye)}}}else Y=1;else D(Pe)&&he.charCodeAt(1)===I&&(ae=he.slice(0,2),Y=2,Le>2&&m(he.charCodeAt(2))&&(Ce=!0,Y=3));if(ae.length>0)if(N.length>0){if(ae.toLowerCase()!==N.toLowerCase())continue}else N=ae;if(me){if(N.length>0)break}else if(j=`${he.slice(Y)}\\${j}`,me=Ce,Ce&&N.length>0)break}return j=E(j,!me,"\\",m),me?`${N}\\${j}`:`${N}${j}`||"."},normalize(F){_(F,"path");const N=F.length;if(N===0)return".";let j=0,me,ce=!1;const he=F.charCodeAt(0);if(N===1)return S(he)?"\\":F;if(m(he))if(ce=!0,m(F.charCodeAt(1))){let Y=2,ae=Y;for(;Y<N&&!m(F.charCodeAt(Y));)Y++;if(Y<N&&Y!==ae){const Ce=F.slice(ae,Y);for(ae=Y;Y<N&&m(F.charCodeAt(Y));)Y++;if(Y<N&&Y!==ae){for(ae=Y;Y<N&&!m(F.charCodeAt(Y));)Y++;if(Y===N)return`\\\\${Ce}\\${F.slice(ae)}\\`;Y!==ae&&(me=`\\\\${Ce}\\${F.slice(ae,Y)}`,j=Y)}}}else j=1;else D(he)&&F.charCodeAt(1)===I&&(me=F.slice(0,2),j=2,N>2&&m(F.charCodeAt(2))&&(ce=!0,j=3));let Le=j<N?E(F.slice(j),!ce,"\\",m):"";return Le.length===0&&!ce&&(Le="."),Le.length>0&&m(F.charCodeAt(N-1))&&(Le+="\\"),me===void 0?ce?`\\${Le}`:Le:ce?`${me}\\${Le}`:`${me}${Le}`},isAbsolute(F){_(F,"path");const N=F.length;if(N===0)return!1;const j=F.charCodeAt(0);return m(j)||N>2&&D(j)&&F.charCodeAt(1)===I&&m(F.charCodeAt(2))},join(...F){if(F.length===0)return".";let N,j;for(let he=0;he<F.length;++he){const Le=F[he];_(Le,"path"),Le.length>0&&(N===void 0?N=j=Le:N+=`\\${Le}`)}if(N===void 0)return".";let me=!0,ce=0;if(typeof j=="string"&&m(j.charCodeAt(0))){++ce;const he=j.length;he>1&&m(j.charCodeAt(1))&&(++ce,he>2&&(m(j.charCodeAt(2))?++ce:me=!1))}if(me){for(;ce<N.length&&m(N.charCodeAt(ce));)ce++;ce>=2&&(N=`\\${N.slice(ce)}`)}return z.normalize(N)},relative(F,N){if(_(F,"from"),_(N,"to"),F===N)return"";const j=z.resolve(F),me=z.resolve(N);if(j===me||(F=j.toLowerCase(),N=me.toLowerCase(),F===N))return"";let ce=0;for(;ce<F.length&&F.charCodeAt(ce)===A;)ce++;let he=F.length;for(;he-1>ce&&F.charCodeAt(he-1)===A;)he--;const Le=he-ce;let Y=0;for(;Y<N.length&&N.charCodeAt(Y)===A;)Y++;let ae=N.length;for(;ae-1>Y&&N.charCodeAt(ae-1)===A;)ae--;const Ce=ae-Y,Pe=Le<Ce?Le:Ce;let ye=-1,Ke=0;for(;Ke<Pe;Ke++){const Ue=F.charCodeAt(ce+Ke);if(Ue!==N.charCodeAt(Y+Ke))break;Ue===A&&(ye=Ke)}if(Ke!==Pe){if(ye===-1)return me}else{if(Ce>Pe){if(N.charCodeAt(Y+Ke)===A)return me.slice(Y+Ke+1);if(Ke===2)return me.slice(Y+Ke)}Le>Pe&&(F.charCodeAt(ce+Ke)===A?ye=Ke:Ke===2&&(ye=3)),ye===-1&&(ye=0)}let qe="";for(Ke=ce+ye+1;Ke<=he;++Ke)(Ke===he||F.charCodeAt(Ke)===A)&&(qe+=qe.length===0?"..":"\\..");return Y+=ye,qe.length>0?`${qe}${me.slice(Y,ae)}`:(me.charCodeAt(Y)===A&&++Y,me.slice(Y,ae))},toNamespacedPath(F){if(typeof F!="string"||F.length===0)return F;const N=z.resolve(F);if(N.length<=2)return F;if(N.charCodeAt(0)===A){if(N.charCodeAt(1)===A){const j=N.charCodeAt(2);if(j!==b&&j!==w)return`\\\\?\\UNC\\${N.slice(2)}`}}else if(D(N.charCodeAt(0))&&N.charCodeAt(1)===I&&N.charCodeAt(2)===A)return`\\\\?\\${N}`;return F},dirname(F){_(F,"path");const N=F.length;if(N===0)return".";let j=-1,me=0;const ce=F.charCodeAt(0);if(N===1)return m(ce)?F:".";if(m(ce)){if(j=me=1,m(F.charCodeAt(1))){let Y=2,ae=Y;for(;Y<N&&!m(F.charCodeAt(Y));)Y++;if(Y<N&&Y!==ae){for(ae=Y;Y<N&&m(F.charCodeAt(Y));)Y++;if(Y<N&&Y!==ae){for(ae=Y;Y<N&&!m(F.charCodeAt(Y));)Y++;if(Y===N)return F;Y!==ae&&(j=me=Y+1)}}}}else D(ce)&&F.charCodeAt(1)===I&&(j=N>2&&m(F.charCodeAt(2))?3:2,me=j);let he=-1,Le=!0;for(let Y=N-1;Y>=me;--Y)if(m(F.charCodeAt(Y))){if(!Le){he=Y;break}}else Le=!1;if(he===-1){if(j===-1)return".";he=j}return F.slice(0,he)},basename(F,N){N!==void 0&&_(N,"suffix"),_(F,"path");let j=0,me=-1,ce=!0,he;if(F.length>=2&&D(F.charCodeAt(0))&&F.charCodeAt(1)===I&&(j=2),N!==void 0&&N.length>0&&N.length<=F.length){if(N===F)return"";let Le=N.length-1,Y=-1;for(he=F.length-1;he>=j;--he){const ae=F.charCodeAt(he);if(m(ae)){if(!ce){j=he+1;break}}else Y===-1&&(ce=!1,Y=he+1),Le>=0&&(ae===N.charCodeAt(Le)?--Le===-1&&(me=he):(Le=-1,me=Y))}return j===me?me=Y:me===-1&&(me=F.length),F.slice(j,me)}for(he=F.length-1;he>=j;--he)if(m(F.charCodeAt(he))){if(!ce){j=he+1;break}}else me===-1&&(ce=!1,me=he+1);return me===-1?"":F.slice(j,me)},extname(F){_(F,"path");let N=0,j=-1,me=0,ce=-1,he=!0,Le=0;F.length>=2&&F.charCodeAt(1)===I&&D(F.charCodeAt(0))&&(N=me=2);for(let Y=F.length-1;Y>=N;--Y){const ae=F.charCodeAt(Y);if(m(ae)){if(!he){me=Y+1;break}continue}ce===-1&&(he=!1,ce=Y+1),ae===w?j===-1?j=Y:Le!==1&&(Le=1):j!==-1&&(Le=-1)}return j===-1||ce===-1||Le===0||Le===1&&j===ce-1&&j===me+1?"":F.slice(j,ce)},format:R.bind(null,"\\"),parse(F){_(F,"path");const N={root:"",dir:"",base:"",ext:"",name:""};if(F.length===0)return N;const j=F.length;let me=0,ce=F.charCodeAt(0);if(j===1)return m(ce)?(N.root=N.dir=F,N):(N.base=N.name=F,N);if(m(ce)){if(me=1,m(F.charCodeAt(1))){let ye=2,Ke=ye;for(;ye<j&&!m(F.charCodeAt(ye));)ye++;if(ye<j&&ye!==Ke){for(Ke=ye;ye<j&&m(F.charCodeAt(ye));)ye++;if(ye<j&&ye!==Ke){for(Ke=ye;ye<j&&!m(F.charCodeAt(ye));)ye++;ye===j?me=ye:ye!==Ke&&(me=ye+1)}}}}else if(D(ce)&&F.charCodeAt(1)===I){if(j<=2)return N.root=N.dir=F,N;if(me=2,m(F.charCodeAt(2))){if(j===3)return N.root=N.dir=F,N;me=3}}me>0&&(N.root=F.slice(0,me));let he=-1,Le=me,Y=-1,ae=!0,Ce=F.length-1,Pe=0;for(;Ce>=me;--Ce){if(ce=F.charCodeAt(Ce),m(ce)){if(!ae){Le=Ce+1;break}continue}Y===-1&&(ae=!1,Y=Ce+1),ce===w?he===-1?he=Ce:Pe!==1&&(Pe=1):he!==-1&&(Pe=-1)}return Y!==-1&&(he===-1||Pe===0||Pe===1&&he===Y-1&&he===Le+1?N.base=N.name=F.slice(Le,Y):(N.name=F.slice(Le,he),N.base=F.slice(Le,Y),N.ext=F.slice(he,Y))),Le>0&&Le!==me?N.dir=F.slice(0,Le-1):N.dir=N.root,N},sep:"\\",delimiter:";",win32:null,posix:null},W=(()=>{if(d){const F=/\\/g;return()=>{const N=u.bJ().replace(F,"/");return N.slice(N.indexOf("/"))}}return()=>u.bJ()})(),$={resolve(...F){let N="",j=!1;for(let me=F.length-1;me>=-1&&!j;me--){const ce=me>=0?F[me]:W();_(ce,`paths[${me}]`),ce.length!==0&&(N=`${ce}/${N}`,j=ce.charCodeAt(0)===O)}return N=E(N,!j,"/",S),j?`/${N}`:N.length>0?N:"."},normalize(F){if(_(F,"path"),F.length===0)return".";const N=F.charCodeAt(0)===O,j=F.charCodeAt(F.length-1)===O;return F=E(F,!N,"/",S),F.length===0?N?"/":j?"./":".":(j&&(F+="/"),N?`/${F}`:F)},isAbsolute(F){return _(F,"path"),F.length>0&&F.charCodeAt(0)===O},join(...F){if(F.length===0)return".";let N;for(let j=0;j<F.length;++j){const me=F[j];_(me,"path"),me.length>0&&(N===void 0?N=me:N+=`/${me}`)}return N===void 0?".":$.normalize(N)},relative(F,N){if(_(F,"from"),_(N,"to"),F===N||(F=$.resolve(F),N=$.resolve(N),F===N))return"";const j=1,me=F.length,ce=me-j,he=1,Le=N.length-he,Y=ce<Le?ce:Le;let ae=-1,Ce=0;for(;Ce<Y;Ce++){const ye=F.charCodeAt(j+Ce);if(ye!==N.charCodeAt(he+Ce))break;ye===O&&(ae=Ce)}if(Ce===Y)if(Le>Y){if(N.charCodeAt(he+Ce)===O)return N.slice(he+Ce+1);if(Ce===0)return N.slice(he+Ce)}else ce>Y&&(F.charCodeAt(j+Ce)===O?ae=Ce:Ce===0&&(ae=0));let Pe="";for(Ce=j+ae+1;Ce<=me;++Ce)(Ce===me||F.charCodeAt(Ce)===O)&&(Pe+=Pe.length===0?"..":"/..");return`${Pe}${N.slice(he+ae)}`},toNamespacedPath(F){return F},dirname(F){if(_(F,"path"),F.length===0)return".";const N=F.charCodeAt(0)===O;let j=-1,me=!0;for(let ce=F.length-1;ce>=1;--ce)if(F.charCodeAt(ce)===O){if(!me){j=ce;break}}else me=!1;return j===-1?N?"/":".":N&&j===1?"//":F.slice(0,j)},basename(F,N){N!==void 0&&_(N,"ext"),_(F,"path");let j=0,me=-1,ce=!0,he;if(N!==void 0&&N.length>0&&N.length<=F.length){if(N===F)return"";let Le=N.length-1,Y=-1;for(he=F.length-1;he>=0;--he){const ae=F.charCodeAt(he);if(ae===O){if(!ce){j=he+1;break}}else Y===-1&&(ce=!1,Y=he+1),Le>=0&&(ae===N.charCodeAt(Le)?--Le===-1&&(me=he):(Le=-1,me=Y))}return j===me?me=Y:me===-1&&(me=F.length),F.slice(j,me)}for(he=F.length-1;he>=0;--he)if(F.charCodeAt(he)===O){if(!ce){j=he+1;break}}else me===-1&&(ce=!1,me=he+1);return me===-1?"":F.slice(j,me)},extname(F){_(F,"path");let N=-1,j=0,me=-1,ce=!0,he=0;for(let Le=F.length-1;Le>=0;--Le){const Y=F.charCodeAt(Le);if(Y===O){if(!ce){j=Le+1;break}continue}me===-1&&(ce=!1,me=Le+1),Y===w?N===-1?N=Le:he!==1&&(he=1):N!==-1&&(he=-1)}return N===-1||me===-1||he===0||he===1&&N===me-1&&N===j+1?"":F.slice(N,me)},format:R.bind(null,"/"),parse(F){_(F,"path");const N={root:"",dir:"",base:"",ext:"",name:""};if(F.length===0)return N;const j=F.charCodeAt(0)===O;let me;j?(N.root="/",me=1):me=0;let ce=-1,he=0,Le=-1,Y=!0,ae=F.length-1,Ce=0;for(;ae>=me;--ae){const Pe=F.charCodeAt(ae);if(Pe===O){if(!Y){he=ae+1;break}continue}Le===-1&&(Y=!1,Le=ae+1),Pe===w?ce===-1?ce=ae:Ce!==1&&(Ce=1):ce!==-1&&(Ce=-1)}if(Le!==-1){const Pe=he===0&&j?1:he;ce===-1||Ce===0||Ce===1&&ce===Le-1&&ce===he+1?N.base=N.name=F.slice(Pe,Le):(N.name=F.slice(Pe,ce),N.base=F.slice(Pe,Le),N.ext=F.slice(ce,Le))}return he>0?N.dir=F.slice(0,he-1):j&&(N.dir="/"),N},sep:"/",delimiter:":",win32:null,posix:null};$.win32=z.win32=z,$.posix=z.posix=$;const Q=d?z.normalize:$.normalize,q=d?z.join:$.join,ne=d?z.resolve:$.resolve,ve=d?z.relative:$.relative,Re=d?z.dirname:$.dirname,Ae=d?z.basename:$.basename,re=d?z.extname:$.extname,K=d?z.sep:$.sep},8775:(Mt,He,c)=>{c.d(He,{$C:()=>pe,BE:()=>yi,Bc:()=>j,O4:()=>W,Of:()=>dt,XR:()=>We,hZ:()=>C,jT:()=>ye,jU:()=>Ii,ls:()=>B,lw:()=>A,m9:()=>Ae,n0:()=>I,qB:()=>_n,r_:()=>me,wA:()=>D,xZ:()=>Ce,xq:()=>O,zM:()=>m});var u=c(93009),G=c(3223),U=c(90692),P=c(28841),M=c(5751),w=c(45573);const O=8;class A{constructor(Ne){this._values=Ne}hasChanged(Ne){return this._values[Ne]}}class I{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class b{constructor(Ne,gt,ei,ai){this.id=Ne,this.name=gt,this.defaultValue=ei,this.schema=ai}applyUpdate(Ne,gt){return v(Ne,gt)}compute(Ne,gt,ei){return ei}}class C{constructor(Ne,gt){this.newValue=Ne,this.didChange=gt}}function v(oi,Ne){if(typeof oi!="object"||typeof Ne!="object"||!oi||!Ne)return new C(Ne,oi!==Ne);if(Array.isArray(oi)||Array.isArray(Ne)){const ei=Array.isArray(oi)&&Array.isArray(Ne)&&u.aI(oi,Ne);return new C(Ne,!ei)}let gt=!1;for(const ei in Ne)if(Ne.hasOwnProperty(ei)){const ai=v(oi[ei],Ne[ei]);ai.didChange&&(oi[ei]=ai.newValue,gt=!0)}return new C(oi,gt)}class _{constructor(Ne){this.schema=void 0,this.id=Ne,this.name="_never_",this.defaultValue=void 0}applyUpdate(Ne,gt){return v(Ne,gt)}validate(Ne){return this.defaultValue}}class d{constructor(Ne,gt,ei,ai){this.id=Ne,this.name=gt,this.defaultValue=ei,this.schema=ai}applyUpdate(Ne,gt){return v(Ne,gt)}validate(Ne){return typeof Ne>"u"?this.defaultValue:Ne}compute(Ne,gt,ei){return ei}}function m(oi,Ne){return typeof oi>"u"?Ne:oi==="false"?!1:!!oi}class S extends d{constructor(Ne,gt,ei,ai=void 0){typeof ai<"u"&&(ai.type="boolean",ai.default=ei),super(Ne,gt,ei,ai)}validate(Ne){return m(Ne,this.defaultValue)}}function D(oi,Ne,gt,ei){if(typeof oi>"u")return Ne;let ai=parseInt(oi,10);return isNaN(ai)?Ne:(ai=Math.max(gt,ai),ai=Math.min(ei,ai),ai|0)}class E extends d{static clampedInt(Ne,gt,ei,ai){return D(Ne,gt,ei,ai)}constructor(Ne,gt,ei,ai,Ci,wi=void 0){typeof wi<"u"&&(wi.type="integer",wi.default=ei,wi.minimum=ai,wi.maximum=Ci),super(Ne,gt,ei,wi),this.minimum=ai,this.maximum=Ci}validate(Ne){return E.clampedInt(Ne,this.defaultValue,this.minimum,this.maximum)}}function B(oi,Ne,gt,ei){if(typeof oi>"u")return Ne;const ai=R.float(oi,Ne);return R.clamp(ai,gt,ei)}class R extends d{static clamp(Ne,gt,ei){return Ne<gt?gt:Ne>ei?ei:Ne}static float(Ne,gt){if(typeof Ne=="number")return Ne;if(typeof Ne>"u")return gt;const ei=parseFloat(Ne);return isNaN(ei)?gt:ei}constructor(Ne,gt,ei,ai,Ci){typeof Ci<"u"&&(Ci.type="number",Ci.default=ei),super(Ne,gt,ei,Ci),this.validationFn=ai}validate(Ne){return this.validationFn(R.float(Ne,this.defaultValue))}}class z extends d{static string(Ne,gt){return typeof Ne!="string"?gt:Ne}constructor(Ne,gt,ei,ai=void 0){typeof ai<"u"&&(ai.type="string",ai.default=ei),super(Ne,gt,ei,ai)}validate(Ne){return z.string(Ne,this.defaultValue)}}function W(oi,Ne,gt,ei){return typeof oi!="string"?Ne:ei&&oi in ei?ei[oi]:gt.indexOf(oi)===-1?Ne:oi}class $ extends d{constructor(Ne,gt,ei,ai,Ci=void 0){typeof Ci<"u"&&(Ci.type="string",Ci.enum=ai,Ci.default=ei),super(Ne,gt,ei,Ci),this._allowedValues=ai}validate(Ne){return W(Ne,this.defaultValue,this._allowedValues)}}class Q extends b{constructor(Ne,gt,ei,ai,Ci,wi,ji=void 0){typeof ji<"u"&&(ji.type="string",ji.enum=Ci,ji.default=ai),super(Ne,gt,ei,ji),this._allowedValues=Ci,this._convert=wi}validate(Ne){return typeof Ne!="string"?this.defaultValue:this._allowedValues.indexOf(Ne)===-1?this.defaultValue:this._convert(Ne)}}function q(oi){switch(oi){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class ne extends b{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[w.kg("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),w.kg("accessibilitySupport.on","Optimize for usage with a Screen Reader."),w.kg("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:w.kg("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(Ne){switch(Ne){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(Ne,gt,ei){return ei===0?Ne.accessibilitySupport:ei}}class ve extends b{constructor(){const Ne={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",Ne,{"editor.comments.insertSpace":{type:"boolean",default:Ne.insertSpace,description:w.kg("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:Ne.ignoreEmptyLines,description:w.kg("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{insertSpace:m(gt.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:m(gt.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function Re(oi){switch(oi){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Ae;(function(oi){oi[oi.Line=1]="Line",oi[oi.Block=2]="Block",oi[oi.Underline=3]="Underline",oi[oi.LineThin=4]="LineThin",oi[oi.BlockOutline=5]="BlockOutline",oi[oi.UnderlineThin=6]="UnderlineThin"})(Ae||(Ae={}));function re(oi){switch(oi){case"line":return Ae.Line;case"block":return Ae.Block;case"underline":return Ae.Underline;case"line-thin":return Ae.LineThin;case"block-outline":return Ae.BlockOutline;case"underline-thin":return Ae.UnderlineThin}}class K extends _{constructor(){super(143)}compute(Ne,gt,ei){const ai=["monaco-editor"];return gt.get(39)&&ai.push(gt.get(39)),Ne.extraEditorClassName&&ai.push(Ne.extraEditorClassName),gt.get(74)==="default"?ai.push("mouse-default"):gt.get(74)==="copy"&&ai.push("mouse-copy"),gt.get(112)&&ai.push("showUnused"),gt.get(141)&&ai.push("showDeprecated"),ai.join(" ")}}class F extends S{constructor(){super(37,"emptySelectionClipboard",!0,{description:w.kg("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(Ne,gt,ei){return ei&&Ne.emptySelectionClipboard}}class N extends b{constructor(){const Ne={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",Ne,{"editor.find.cursorMoveOnType":{type:"boolean",default:Ne.cursorMoveOnType,description:w.kg("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:Ne.seedSearchStringFromSelection,enumDescriptions:[w.kg("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),w.kg("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),w.kg("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:w.kg("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:Ne.autoFindInSelection,enumDescriptions:[w.kg("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),w.kg("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),w.kg("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:w.kg("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:Ne.globalFindClipboard,description:w.kg("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:U.zx},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:Ne.addExtraSpaceOnTop,description:w.kg("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:Ne.loop,description:w.kg("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{cursorMoveOnType:m(gt.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof Ne.seedSearchStringFromSelection=="boolean"?Ne.seedSearchStringFromSelection?"always":"never":W(gt.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof Ne.autoFindInSelection=="boolean"?Ne.autoFindInSelection?"always":"never":W(gt.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:m(gt.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:m(gt.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:m(gt.loop,this.defaultValue.loop)}}}class j extends b{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(51,"fontLigatures",j.OFF,{anyOf:[{type:"boolean",description:w.kg("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:w.kg("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:w.kg("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(Ne){return typeof Ne>"u"?this.defaultValue:typeof Ne=="string"?Ne==="false"||Ne.length===0?j.OFF:Ne==="true"?j.ON:Ne:Ne?j.ON:j.OFF}}class me extends b{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(54,"fontVariations",me.OFF,{anyOf:[{type:"boolean",description:w.kg("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:w.kg("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:w.kg("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(Ne){return typeof Ne>"u"?this.defaultValue:typeof Ne=="string"?Ne==="false"?me.OFF:Ne==="true"?me.TRANSLATE:Ne:Ne?me.TRANSLATE:me.OFF}compute(Ne,gt,ei){return Ne.fontInfo.fontVariationSettings}}class ce extends _{constructor(){super(50)}compute(Ne,gt,ei){return Ne.fontInfo}}class he extends d{constructor(){super(52,"fontSize",Ii.fontSize,{type:"number",minimum:6,maximum:100,default:Ii.fontSize,description:w.kg("fontSize","Controls the font size in pixels.")})}validate(Ne){const gt=R.float(Ne,this.defaultValue);return gt===0?Ii.fontSize:R.clamp(gt,6,100)}compute(Ne,gt,ei){return Ne.fontInfo.fontSize}}class Le extends b{static{this.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.MINIMUM_VALUE=1}static{this.MAXIMUM_VALUE=1e3}constructor(){super(53,"fontWeight",Ii.fontWeight,{anyOf:[{type:"number",minimum:Le.MINIMUM_VALUE,maximum:Le.MAXIMUM_VALUE,errorMessage:w.kg("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Le.SUGGESTION_VALUES}],default:Ii.fontWeight,description:w.kg("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(Ne){return Ne==="normal"||Ne==="bold"?Ne:String(E.clampedInt(Ne,Ii.fontWeight,Le.MINIMUM_VALUE,Le.MAXIMUM_VALUE))}}class Y extends b{constructor(){const Ne={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},gt={type:"string",enum:["peek","gotoAndPeek","goto"],default:Ne.multiple,enumDescriptions:[w.kg("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),w.kg("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),w.kg("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},ei=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",Ne,{"editor.gotoLocation.multiple":{deprecationMessage:w.kg("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:w.kg("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...gt},"editor.gotoLocation.multipleTypeDefinitions":{description:w.kg("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...gt},"editor.gotoLocation.multipleDeclarations":{description:w.kg("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...gt},"editor.gotoLocation.multipleImplementations":{description:w.kg("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...gt},"editor.gotoLocation.multipleReferences":{description:w.kg("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...gt},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:Ne.alternativeDefinitionCommand,enum:ei,description:w.kg("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:Ne.alternativeTypeDefinitionCommand,enum:ei,description:w.kg("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:Ne.alternativeDeclarationCommand,enum:ei,description:w.kg("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:Ne.alternativeImplementationCommand,enum:ei,description:w.kg("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:Ne.alternativeReferenceCommand,enum:ei,description:w.kg("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{multiple:W(gt.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:gt.multipleDefinitions??W(gt.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:gt.multipleTypeDefinitions??W(gt.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:gt.multipleDeclarations??W(gt.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:gt.multipleImplementations??W(gt.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:gt.multipleReferences??W(gt.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:gt.multipleTests??W(gt.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:z.string(gt.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:z.string(gt.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:z.string(gt.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:z.string(gt.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:z.string(gt.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:z.string(gt.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class ae extends b{constructor(){const Ne={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",Ne,{"editor.hover.enabled":{type:"boolean",default:Ne.enabled,description:w.kg("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:Ne.delay,minimum:0,maximum:1e4,description:w.kg("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:Ne.sticky,description:w.kg("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:Ne.hidingDelay,description:w.kg("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:Ne.above,description:w.kg("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{enabled:m(gt.enabled,this.defaultValue.enabled),delay:E.clampedInt(gt.delay,this.defaultValue.delay,0,1e4),sticky:m(gt.sticky,this.defaultValue.sticky),hidingDelay:E.clampedInt(gt.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:m(gt.above,this.defaultValue.above)}}}class Ce extends _{constructor(){super(146)}compute(Ne,gt,ei){return Ce.computeLayout(gt,{memory:Ne.memory,outerWidth:Ne.outerWidth,outerHeight:Ne.outerHeight,isDominatedByLongLines:Ne.isDominatedByLongLines,lineHeight:Ne.fontInfo.lineHeight,viewLineCount:Ne.viewLineCount,lineNumbersDigitCount:Ne.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:Ne.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:Ne.fontInfo.maxDigitWidth,pixelRatio:Ne.pixelRatio,glyphMarginDecorationLaneCount:Ne.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(Ne){const gt=Ne.height/Ne.lineHeight,ei=Math.floor(Ne.paddingTop/Ne.lineHeight);let ai=Math.floor(Ne.paddingBottom/Ne.lineHeight);Ne.scrollBeyondLastLine&&(ai=Math.max(ai,gt-1));const Ci=(ei+Ne.viewLineCount+ai)/(Ne.pixelRatio*Ne.height),wi=Math.floor(Ne.viewLineCount/Ci);return{typicalViewportLineCount:gt,extraLinesBeforeFirstLine:ei,extraLinesBeyondLastLine:ai,desiredRatio:Ci,minimapLineCount:wi}}static _computeMinimapLayout(Ne,gt){const ei=Ne.outerWidth,ai=Ne.outerHeight,Ci=Ne.pixelRatio;if(!Ne.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(Ci*ai),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:ai};const wi=gt.stableMinimapLayoutInput,ji=wi&&Ne.outerHeight===wi.outerHeight&&Ne.lineHeight===wi.lineHeight&&Ne.typicalHalfwidthCharacterWidth===wi.typicalHalfwidthCharacterWidth&&Ne.pixelRatio===wi.pixelRatio&&Ne.scrollBeyondLastLine===wi.scrollBeyondLastLine&&Ne.paddingTop===wi.paddingTop&&Ne.paddingBottom===wi.paddingBottom&&Ne.minimap.enabled===wi.minimap.enabled&&Ne.minimap.side===wi.minimap.side&&Ne.minimap.size===wi.minimap.size&&Ne.minimap.showSlider===wi.minimap.showSlider&&Ne.minimap.renderCharacters===wi.minimap.renderCharacters&&Ne.minimap.maxColumn===wi.minimap.maxColumn&&Ne.minimap.scale===wi.minimap.scale&&Ne.verticalScrollbarWidth===wi.verticalScrollbarWidth&&Ne.isViewportWrapping===wi.isViewportWrapping,Di=Ne.lineHeight,dn=Ne.typicalHalfwidthCharacterWidth,nn=Ne.scrollBeyondLastLine,Dn=Ne.minimap.renderCharacters;let Mi=Ci>=2?Math.round(Ne.minimap.scale*2):Ne.minimap.scale;const Zn=Ne.minimap.maxColumn,us=Ne.minimap.size,xs=Ne.minimap.side,Wn=Ne.verticalScrollbarWidth,Rn=Ne.viewLineCount,Bn=Ne.remainingWidth,ws=Ne.isViewportWrapping,Ln=Dn?2:3;let Qn=Math.floor(Ci*ai);const hi=Qn/Ci;let vt=!1,ui=!1,wt=Ln*Mi,In=Mi/Ci,Ki=1;if(us==="fill"||us==="fit"){const{typicalViewportLineCount:Li,extraLinesBeforeFirstLine:Bi,extraLinesBeyondLastLine:Pi,desiredRatio:un,minimapLineCount:Cn}=Ce.computeContainedMinimapLineCount({viewLineCount:Rn,scrollBeyondLastLine:nn,paddingTop:Ne.paddingTop,paddingBottom:Ne.paddingBottom,height:ai,lineHeight:Di,pixelRatio:Ci});if(Rn/Cn>1)vt=!0,ui=!0,Mi=1,wt=1,In=Mi/Ci;else{let yn=!1,fs=Mi+1;if(us==="fit"){const cs=Math.ceil((Bi+Rn+Pi)*wt);ws&&ji&&Bn<=gt.stableFitRemainingWidth?(yn=!0,fs=gt.stableFitMaxMinimapScale):yn=cs>Qn}if(us==="fill"||yn){vt=!0;const cs=Mi;wt=Math.min(Di*Ci,Math.max(1,Math.floor(1/un))),ws&&ji&&Bn<=gt.stableFitRemainingWidth&&(fs=gt.stableFitMaxMinimapScale),Mi=Math.min(fs,Math.max(1,Math.floor(wt/Ln))),Mi>cs&&(Ki=Math.min(2,Mi/cs)),In=Mi/Ci/Ki,Qn=Math.ceil(Math.max(Li,Bi+Rn+Pi)*wt),ws?(gt.stableMinimapLayoutInput=Ne,gt.stableFitRemainingWidth=Bn,gt.stableFitMaxMinimapScale=Mi):(gt.stableMinimapLayoutInput=null,gt.stableFitRemainingWidth=0)}}}const Tt=Math.floor(Zn*In),$i=Math.min(Tt,Math.max(0,Math.floor((Bn-Wn-2)*In/(dn+In)))+O);let St=Math.floor(Ci*$i);const yt=St/Ci;St=Math.floor(St*Ki);const Yt=Dn?1:2,ii=xs==="left"?0:ei-$i-Wn;return{renderMinimap:Yt,minimapLeft:ii,minimapWidth:$i,minimapHeightIsEditorHeight:vt,minimapIsSampling:ui,minimapScale:Mi,minimapLineHeight:wt,minimapCanvasInnerWidth:St,minimapCanvasInnerHeight:Qn,minimapCanvasOuterWidth:yt,minimapCanvasOuterHeight:hi}}static computeLayout(Ne,gt){const ei=gt.outerWidth|0,ai=gt.outerHeight|0,Ci=gt.lineHeight|0,wi=gt.lineNumbersDigitCount|0,ji=gt.typicalHalfwidthCharacterWidth,Di=gt.maxDigitWidth,dn=gt.pixelRatio,nn=gt.viewLineCount,Dn=Ne.get(138),Mi=Dn==="inherit"?Ne.get(137):Dn,Zn=Mi==="inherit"?Ne.get(133):Mi,us=Ne.get(136),xs=gt.isDominatedByLongLines,Wn=Ne.get(57),Rn=Ne.get(68).renderType!==0,Bn=Ne.get(69),ws=Ne.get(106),Ln=Ne.get(84),Qn=Ne.get(73),hi=Ne.get(104),vt=hi.verticalScrollbarSize,ui=hi.verticalHasArrows,wt=hi.arrowSize,In=hi.horizontalScrollbarSize,Ki=Ne.get(43),Tt=Ne.get(111)!=="never";let $i=Ne.get(66);Ki&&Tt&&($i+=16);let St=0;if(Rn){const Mn=Math.max(wi,Bn);St=Math.round(Mn*Di)}let yt=0;Wn&&(yt=Ci*gt.glyphMarginDecorationLaneCount);let Yt=0,ii=Yt+yt,Li=ii+St,Bi=Li+$i;const Pi=ei-yt-St-$i;let un=!1,Cn=!1,sn=-1;Mi==="inherit"&&xs?(un=!0,Cn=!0):Zn==="on"||Zn==="bounded"?Cn=!0:Zn==="wordWrapColumn"&&(sn=us);const yn=Ce._computeMinimapLayout({outerWidth:ei,outerHeight:ai,lineHeight:Ci,typicalHalfwidthCharacterWidth:ji,pixelRatio:dn,scrollBeyondLastLine:ws,paddingTop:Ln.top,paddingBottom:Ln.bottom,minimap:Qn,verticalScrollbarWidth:vt,viewLineCount:nn,remainingWidth:Pi,isViewportWrapping:Cn},gt.memory||new I);yn.renderMinimap!==0&&yn.minimapLeft===0&&(Yt+=yn.minimapWidth,ii+=yn.minimapWidth,Li+=yn.minimapWidth,Bi+=yn.minimapWidth);const fs=Pi-yn.minimapWidth,cs=Math.max(1,Math.floor((fs-vt-2)/ji)),_s=ui?wt:0;return Cn&&(sn=Math.max(1,cs),Zn==="bounded"&&(sn=Math.min(sn,us))),{width:ei,height:ai,glyphMarginLeft:Yt,glyphMarginWidth:yt,glyphMarginDecorationLaneCount:gt.glyphMarginDecorationLaneCount,lineNumbersLeft:ii,lineNumbersWidth:St,decorationsLeft:Li,decorationsWidth:$i,contentLeft:Bi,contentWidth:fs,minimap:yn,viewportColumn:cs,isWordWrapMinified:un,isViewportWrapping:Cn,wrappingColumn:sn,verticalScrollbarWidth:vt,horizontalScrollbarHeight:In,overviewRuler:{top:_s,width:vt,height:ai-2*_s,right:0}}}}class Pe extends b{constructor(){super(140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[w.kg("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),w.kg("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:w.kg("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(Ne){return W(Ne,"simple",["simple","advanced"])}compute(Ne,gt,ei){return gt.get(2)===2?"advanced":ei}}var ye;(function(oi){oi.Off="off",oi.OnCode="onCode",oi.On="on"})(ye||(ye={}));class Ke extends b{constructor(){const Ne={enabled:ye.OnCode};super(65,"lightbulb",Ne,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[ye.Off,ye.OnCode,ye.On],default:Ne.enabled,enumDescriptions:[w.kg("editor.lightbulb.enabled.off","Disable the code action menu."),w.kg("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),w.kg("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:w.kg("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(Ne){return!Ne||typeof Ne!="object"?this.defaultValue:{enabled:W(Ne.enabled,this.defaultValue.enabled,[ye.Off,ye.OnCode,ye.On])}}}class qe extends b{constructor(){const Ne={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(116,"stickyScroll",Ne,{"editor.stickyScroll.enabled":{type:"boolean",default:Ne.enabled,description:w.kg("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:Ne.maxLineCount,minimum:1,maximum:20,description:w.kg("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:Ne.defaultModel,description:w.kg("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:Ne.scrollWithEditor,description:w.kg("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{enabled:m(gt.enabled,this.defaultValue.enabled),maxLineCount:E.clampedInt(gt.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:W(gt.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:m(gt.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class Ue extends b{constructor(){const Ne={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(142,"inlayHints",Ne,{"editor.inlayHints.enabled":{type:"string",default:Ne.enabled,description:w.kg("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[w.kg("editor.inlayHints.on","Inlay hints are enabled"),w.kg("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",U.zx?"Ctrl+Option":"Ctrl+Alt"),w.kg("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",U.zx?"Ctrl+Option":"Ctrl+Alt"),w.kg("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:Ne.fontSize,markdownDescription:w.kg("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:Ne.fontFamily,markdownDescription:w.kg("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:Ne.padding,description:w.kg("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return typeof gt.enabled=="boolean"&&(gt.enabled=gt.enabled?"on":"off"),{enabled:W(gt.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:E.clampedInt(gt.fontSize,this.defaultValue.fontSize,0,100),fontFamily:z.string(gt.fontFamily,this.defaultValue.fontFamily),padding:m(gt.padding,this.defaultValue.padding)}}}class x extends b{constructor(){super(66,"lineDecorationsWidth",10)}validate(Ne){return typeof Ne=="string"&&/^\d+(\.\d+)?ch$/.test(Ne)?-parseFloat(Ne.substring(0,Ne.length-2)):E.clampedInt(Ne,this.defaultValue,0,1e3)}compute(Ne,gt,ei){return ei<0?E.clampedInt(-ei*Ne.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):ei}}class it extends R{constructor(){super(67,"lineHeight",Ii.lineHeight,Ne=>R.clamp(Ne,0,150),{markdownDescription:w.kg("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(Ne,gt,ei){return Ne.fontInfo.lineHeight}}class Ze extends b{constructor(){const Ne={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",Ne,{"editor.minimap.enabled":{type:"boolean",default:Ne.enabled,description:w.kg("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:Ne.autohide,description:w.kg("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[w.kg("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),w.kg("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),w.kg("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:Ne.size,description:w.kg("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:Ne.side,description:w.kg("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:Ne.showSlider,description:w.kg("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:Ne.scale,minimum:1,maximum:3,enum:[1,2,3],description:w.kg("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:Ne.renderCharacters,description:w.kg("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:Ne.maxColumn,description:w.kg("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:Ne.showRegionSectionHeaders,description:w.kg("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:Ne.showMarkSectionHeaders,description:w.kg("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:Ne.sectionHeaderFontSize,description:w.kg("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:Ne.sectionHeaderLetterSpacing,description:w.kg("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{enabled:m(gt.enabled,this.defaultValue.enabled),autohide:m(gt.autohide,this.defaultValue.autohide),size:W(gt.size,this.defaultValue.size,["proportional","fill","fit"]),side:W(gt.side,this.defaultValue.side,["right","left"]),showSlider:W(gt.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:m(gt.renderCharacters,this.defaultValue.renderCharacters),scale:E.clampedInt(gt.scale,1,1,3),maxColumn:E.clampedInt(gt.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:m(gt.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:m(gt.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:R.clamp(gt.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:R.clamp(gt.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function _t(oi){return oi==="ctrlCmd"?U.zx?"metaKey":"ctrlKey":"altKey"}class ot extends b{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:w.kg("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:w.kg("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{top:E.clampedInt(gt.top,0,0,1e3),bottom:E.clampedInt(gt.bottom,0,0,1e3)}}}class Pt extends b{constructor(){const Ne={enabled:!0,cycle:!0};super(86,"parameterHints",Ne,{"editor.parameterHints.enabled":{type:"boolean",default:Ne.enabled,description:w.kg("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:Ne.cycle,description:w.kg("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{enabled:m(gt.enabled,this.defaultValue.enabled),cycle:m(gt.cycle,this.defaultValue.cycle)}}}class Wt extends _{constructor(){super(144)}compute(Ne,gt,ei){return Ne.pixelRatio}}class Rt extends b{constructor(){super(88,"placeholder",void 0)}validate(Ne){return typeof Ne>"u"?this.defaultValue:typeof Ne=="string"?Ne:this.defaultValue}}class at extends b{constructor(){const Ne={other:"on",comments:"off",strings:"off"},gt=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[w.kg("on","Quick suggestions show inside the suggest widget"),w.kg("inline","Quick suggestions show as ghost text"),w.kg("off","Quick suggestions are disabled")]}];super(90,"quickSuggestions",Ne,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:gt,default:Ne.strings,description:w.kg("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:gt,default:Ne.comments,description:w.kg("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:gt,default:Ne.other,description:w.kg("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:Ne,markdownDescription:w.kg("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=Ne}validate(Ne){if(typeof Ne=="boolean"){const dn=Ne?"on":"off";return{comments:dn,strings:dn,other:dn}}if(!Ne||typeof Ne!="object")return this.defaultValue;const{other:gt,comments:ei,strings:ai}=Ne,Ci=["on","inline","off"];let wi,ji,Di;return typeof gt=="boolean"?wi=gt?"on":"off":wi=W(gt,this.defaultValue.other,Ci),typeof ei=="boolean"?ji=ei?"on":"off":ji=W(ei,this.defaultValue.comments,Ci),typeof ai=="boolean"?Di=ai?"on":"off":Di=W(ai,this.defaultValue.strings,Ci),{other:wi,comments:ji,strings:Di}}}class Xe extends b{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[w.kg("lineNumbers.off","Line numbers are not rendered."),w.kg("lineNumbers.on","Line numbers are rendered as absolute number."),w.kg("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),w.kg("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:w.kg("lineNumbers","Controls the display of line numbers.")})}validate(Ne){let gt=this.defaultValue.renderType,ei=this.defaultValue.renderFn;return typeof Ne<"u"&&(typeof Ne=="function"?(gt=4,ei=Ne):Ne==="interval"?gt=3:Ne==="relative"?gt=2:Ne==="on"?gt=1:gt=0),{renderType:gt,renderFn:ei}}}function pe(oi){const Ne=oi.get(99);return Ne==="editable"?oi.get(92):Ne!=="on"}class te extends b{constructor(){const Ne=[],gt={type:"number",description:w.kg("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(103,"rulers",Ne,{type:"array",items:{anyOf:[gt,{type:["object"],properties:{column:gt,color:{type:"string",description:w.kg("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:Ne,description:w.kg("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(Ne){if(Array.isArray(Ne)){const gt=[];for(const ei of Ne)if(typeof ei=="number")gt.push({column:E.clampedInt(ei,0,0,1e4),color:null});else if(ei&&typeof ei=="object"){const ai=ei;gt.push({column:E.clampedInt(ai.column,0,0,1e4),color:ai.color})}return gt.sort((ei,ai)=>ei.column-ai.column),gt}return this.defaultValue}}class oe extends b{constructor(){super(93,"readOnlyMessage",void 0)}validate(Ne){return!Ne||typeof Ne!="object"?this.defaultValue:Ne}}function Te(oi,Ne){if(typeof oi!="string")return Ne;switch(oi){case"hidden":return 2;case"visible":return 3;default:return 1}}class Ve extends b{constructor(){const Ne={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(104,"scrollbar",Ne,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[w.kg("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),w.kg("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),w.kg("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:w.kg("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[w.kg("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),w.kg("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),w.kg("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:w.kg("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:Ne.verticalScrollbarSize,description:w.kg("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:Ne.horizontalScrollbarSize,description:w.kg("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:Ne.scrollByPage,description:w.kg("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:Ne.ignoreHorizontalScrollbarInContentHeight,description:w.kg("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne,ei=E.clampedInt(gt.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),ai=E.clampedInt(gt.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:E.clampedInt(gt.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:Te(gt.vertical,this.defaultValue.vertical),horizontal:Te(gt.horizontal,this.defaultValue.horizontal),useShadows:m(gt.useShadows,this.defaultValue.useShadows),verticalHasArrows:m(gt.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:m(gt.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:m(gt.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:m(gt.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:ei,horizontalSliderSize:E.clampedInt(gt.horizontalSliderSize,ei,0,1e3),verticalScrollbarSize:ai,verticalSliderSize:E.clampedInt(gt.verticalSliderSize,ai,0,1e3),scrollByPage:m(gt.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:m(gt.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}}const We="inUntrustedWorkspace",dt={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class Ye extends b{constructor(){const Ne={nonBasicASCII:We,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:We,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(126,"unicodeHighlight",Ne,{[dt.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,We],default:Ne.nonBasicASCII,description:w.kg("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[dt.invisibleCharacters]:{restricted:!0,type:"boolean",default:Ne.invisibleCharacters,description:w.kg("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[dt.ambiguousCharacters]:{restricted:!0,type:"boolean",default:Ne.ambiguousCharacters,description:w.kg("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[dt.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,We],default:Ne.includeComments,description:w.kg("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[dt.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,We],default:Ne.includeStrings,description:w.kg("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[dt.allowedCharacters]:{restricted:!0,type:"object",default:Ne.allowedCharacters,description:w.kg("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[dt.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:Ne.allowedLocales,description:w.kg("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(Ne,gt){let ei=!1;gt.allowedCharacters&&Ne&&(G.aI(Ne.allowedCharacters,gt.allowedCharacters)||(Ne={...Ne,allowedCharacters:gt.allowedCharacters},ei=!0)),gt.allowedLocales&&Ne&&(G.aI(Ne.allowedLocales,gt.allowedLocales)||(Ne={...Ne,allowedLocales:gt.allowedLocales},ei=!0));const ai=super.applyUpdate(Ne,gt);return ei?new C(ai.newValue,!0):ai}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{nonBasicASCII:Xt(gt.nonBasicASCII,We,[!0,!1,We]),invisibleCharacters:m(gt.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:m(gt.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Xt(gt.includeComments,We,[!0,!1,We]),includeStrings:Xt(gt.includeStrings,We,[!0,!1,We]),allowedCharacters:this.validateBooleanMap(Ne.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(Ne.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(Ne,gt){if(typeof Ne!="object"||!Ne)return gt;const ei={};for(const[ai,Ci]of Object.entries(Ne))Ci===!0&&(ei[ai]=!0);return ei}}class mt extends b{constructor(){const Ne={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",Ne,{"editor.inlineSuggest.enabled":{type:"boolean",default:Ne.enabled,description:w.kg("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:Ne.showToolbar,enum:["always","onHover","never"],enumDescriptions:[w.kg("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),w.kg("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),w.kg("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:w.kg("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:Ne.suppressSuggestions,description:w.kg("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:Ne.fontFamily,description:w.kg("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{enabled:m(gt.enabled,this.defaultValue.enabled),mode:W(gt.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:W(gt.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:m(gt.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:m(gt.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:z.string(gt.fontFamily,this.defaultValue.fontFamily)}}}class Dt extends b{constructor(){const Ne={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(63,"experimentalInlineEdit",Ne,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:Ne.enabled,description:w.kg("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:Ne.showToolbar,enum:["always","onHover","never"],enumDescriptions:[w.kg("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),w.kg("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),w.kg("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:w.kg("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:Ne.fontFamily,description:w.kg("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{enabled:m(gt.enabled,this.defaultValue.enabled),showToolbar:W(gt.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:z.string(gt.fontFamily,this.defaultValue.fontFamily),keepOnBlur:m(gt.keepOnBlur,this.defaultValue.keepOnBlur)}}}class Se extends b{constructor(){const Ne={enabled:P.R.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:P.R.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",Ne,{"editor.bracketPairColorization.enabled":{type:"boolean",default:Ne.enabled,markdownDescription:w.kg("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:Ne.independentColorPoolPerBracketType,description:w.kg("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{enabled:m(gt.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:m(gt.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class we extends b{constructor(){const Ne={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",Ne,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[w.kg("editor.guides.bracketPairs.true","Enables bracket pair guides."),w.kg("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),w.kg("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:Ne.bracketPairs,description:w.kg("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[w.kg("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),w.kg("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),w.kg("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:Ne.bracketPairsHorizontal,description:w.kg("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:Ne.highlightActiveBracketPair,description:w.kg("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:Ne.indentation,description:w.kg("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[w.kg("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),w.kg("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),w.kg("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:Ne.highlightActiveIndentation,description:w.kg("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{bracketPairs:Xt(gt.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Xt(gt.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:m(gt.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:m(gt.indentation,this.defaultValue.indentation),highlightActiveIndentation:Xt(gt.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function Xt(oi,Ne,gt){const ei=gt.indexOf(oi);return ei===-1?Ne:gt[ei]}class ri extends b{constructor(){const Ne={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(119,"suggest",Ne,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[w.kg("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),w.kg("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:Ne.insertMode,description:w.kg("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:Ne.filterGraceful,description:w.kg("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:Ne.localityBonus,description:w.kg("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:Ne.shareSuggestSelections,markdownDescription:w.kg("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[w.kg("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),w.kg("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),w.kg("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),w.kg("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:Ne.selectionMode,markdownDescription:w.kg("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:Ne.snippetsPreventQuickSuggestions,description:w.kg("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:Ne.showIcons,description:w.kg("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:Ne.showStatusBar,description:w.kg("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:Ne.preview,description:w.kg("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:Ne.showInlineDetails,description:w.kg("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:w.kg("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:w.kg("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:w.kg("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{insertMode:W(gt.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:m(gt.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:m(gt.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:m(gt.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:m(gt.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:W(gt.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:m(gt.showIcons,this.defaultValue.showIcons),showStatusBar:m(gt.showStatusBar,this.defaultValue.showStatusBar),preview:m(gt.preview,this.defaultValue.preview),previewMode:W(gt.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:m(gt.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:m(gt.showMethods,this.defaultValue.showMethods),showFunctions:m(gt.showFunctions,this.defaultValue.showFunctions),showConstructors:m(gt.showConstructors,this.defaultValue.showConstructors),showDeprecated:m(gt.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:m(gt.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:m(gt.showFields,this.defaultValue.showFields),showVariables:m(gt.showVariables,this.defaultValue.showVariables),showClasses:m(gt.showClasses,this.defaultValue.showClasses),showStructs:m(gt.showStructs,this.defaultValue.showStructs),showInterfaces:m(gt.showInterfaces,this.defaultValue.showInterfaces),showModules:m(gt.showModules,this.defaultValue.showModules),showProperties:m(gt.showProperties,this.defaultValue.showProperties),showEvents:m(gt.showEvents,this.defaultValue.showEvents),showOperators:m(gt.showOperators,this.defaultValue.showOperators),showUnits:m(gt.showUnits,this.defaultValue.showUnits),showValues:m(gt.showValues,this.defaultValue.showValues),showConstants:m(gt.showConstants,this.defaultValue.showConstants),showEnums:m(gt.showEnums,this.defaultValue.showEnums),showEnumMembers:m(gt.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:m(gt.showKeywords,this.defaultValue.showKeywords),showWords:m(gt.showWords,this.defaultValue.showWords),showColors:m(gt.showColors,this.defaultValue.showColors),showFiles:m(gt.showFiles,this.defaultValue.showFiles),showReferences:m(gt.showReferences,this.defaultValue.showReferences),showFolders:m(gt.showFolders,this.defaultValue.showFolders),showTypeParameters:m(gt.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:m(gt.showSnippets,this.defaultValue.showSnippets),showUsers:m(gt.showUsers,this.defaultValue.showUsers),showIssues:m(gt.showIssues,this.defaultValue.showIssues)}}}class ke extends b{constructor(){super(114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:w.kg("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:w.kg("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(Ne){return!Ne||typeof Ne!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:m(Ne.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:m(Ne.selectSubwords,this.defaultValue.selectSubwords)}}}class Z extends b{constructor(){const Ne=[];super(131,"wordSegmenterLocales",Ne,{anyOf:[{description:w.kg("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:w.kg("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(Ne){if(typeof Ne=="string"&&(Ne=[Ne]),Array.isArray(Ne)){const gt=[];for(const ei of Ne)if(typeof ei=="string")try{Intl.Segmenter.supportedLocalesOf(ei).length>0&&gt.push(ei)}catch{}return gt}return this.defaultValue}}class Fe extends b{constructor(){super(139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[w.kg("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),w.kg("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),w.kg("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),w.kg("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:w.kg("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(Ne){switch(Ne){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(Ne,gt,ei){return gt.get(2)===2?0:ei}}class pt extends _{constructor(){super(147)}compute(Ne,gt,ei){const ai=gt.get(146);return{isDominatedByLongLines:Ne.isDominatedByLongLines,isWordWrapMinified:ai.isWordWrapMinified,isViewportWrapping:ai.isViewportWrapping,wrappingColumn:ai.wrappingColumn}}}class et extends b{constructor(){const Ne={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",Ne,{"editor.dropIntoEditor.enabled":{type:"boolean",default:Ne.enabled,markdownDescription:w.kg("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:w.kg("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[w.kg("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),w.kg("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{enabled:m(gt.enabled,this.defaultValue.enabled),showDropSelector:W(gt.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class Zt extends b{constructor(){const Ne={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",Ne,{"editor.pasteAs.enabled":{type:"boolean",default:Ne.enabled,markdownDescription:w.kg("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:w.kg("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[w.kg("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),w.kg("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(Ne){if(!Ne||typeof Ne!="object")return this.defaultValue;const gt=Ne;return{enabled:m(gt.enabled,this.defaultValue.enabled),showPasteSelector:W(gt.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const Ii={fontFamily:U.zx?"Menlo, Monaco, 'Courier New', monospace":U.j9?"'Droid Sans Mono', 'monospace', monospace":"Consolas, 'Courier New', monospace",fontWeight:"normal",fontSize:U.zx?12:14,lineHeight:0,letterSpacing:0},yi=[];function Vt(oi){return yi[oi.id]=oi,oi}const _n={acceptSuggestionOnCommitCharacter:Vt(new S(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:w.kg("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:Vt(new $(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",w.kg("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:w.kg("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:Vt(new ne),accessibilityPageSize:Vt(new E(3,"accessibilityPageSize",10,1,1073741824,{description:w.kg("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:Vt(new z(4,"ariaLabel",w.kg("editorViewAccessibleLabel","Editor content"))),ariaRequired:Vt(new S(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:Vt(new S(8,"screenReaderAnnounceInlineSuggestion",!0,{description:w.kg("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:Vt(new $(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",w.kg("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),w.kg("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:w.kg("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:Vt(new $(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",w.kg("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),w.kg("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:w.kg("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:Vt(new $(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",w.kg("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:w.kg("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:Vt(new $(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",w.kg("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:w.kg("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:Vt(new $(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",w.kg("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),w.kg("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:w.kg("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:Vt(new Q(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],q,{enumDescriptions:[w.kg("editor.autoIndent.none","The editor will not insert indentation automatically."),w.kg("editor.autoIndent.keep","The editor will keep the current line's indentation."),w.kg("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),w.kg("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),w.kg("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:w.kg("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:Vt(new S(13,"automaticLayout",!1)),autoSurround:Vt(new $(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[w.kg("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),w.kg("editor.autoSurround.quotes","Surround with quotes but not brackets."),w.kg("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:w.kg("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:Vt(new Se),bracketPairGuides:Vt(new we),stickyTabStops:Vt(new S(117,"stickyTabStops",!1,{description:w.kg("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:Vt(new S(17,"codeLens",!0,{description:w.kg("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:Vt(new z(18,"codeLensFontFamily","",{description:w.kg("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:Vt(new E(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:w.kg("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:Vt(new S(20,"colorDecorators",!0,{description:w.kg("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:Vt(new $(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[w.kg("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),w.kg("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),w.kg("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:w.kg("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:Vt(new E(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:w.kg("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:Vt(new S(22,"columnSelection",!1,{description:w.kg("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:Vt(new ve),contextmenu:Vt(new S(24,"contextmenu",!0)),copyWithSyntaxHighlighting:Vt(new S(25,"copyWithSyntaxHighlighting",!0,{description:w.kg("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:Vt(new Q(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],Re,{description:w.kg("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:Vt(new $(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[w.kg("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),w.kg("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),w.kg("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:w.kg("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:Vt(new Q(28,"cursorStyle",Ae.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],re,{description:w.kg("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:Vt(new E(29,"cursorSurroundingLines",0,0,1073741824,{description:w.kg("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:Vt(new $(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[w.kg("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),w.kg("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:w.kg("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:Vt(new E(31,"cursorWidth",0,0,1073741824,{markdownDescription:w.kg("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:Vt(new S(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:Vt(new S(33,"disableMonospaceOptimizations",!1)),domReadOnly:Vt(new S(34,"domReadOnly",!1)),dragAndDrop:Vt(new S(35,"dragAndDrop",!0,{description:w.kg("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:Vt(new F),dropIntoEditor:Vt(new et),stickyScroll:Vt(new qe),experimentalWhitespaceRendering:Vt(new $(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[w.kg("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),w.kg("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),w.kg("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:w.kg("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:Vt(new z(39,"extraEditorClassName","")),fastScrollSensitivity:Vt(new R(40,"fastScrollSensitivity",5,oi=>oi<=0?5:oi,{markdownDescription:w.kg("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:Vt(new N),fixedOverflowWidgets:Vt(new S(42,"fixedOverflowWidgets",!1)),folding:Vt(new S(43,"folding",!0,{description:w.kg("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:Vt(new $(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[w.kg("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),w.kg("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:w.kg("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:Vt(new S(45,"foldingHighlight",!0,{description:w.kg("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:Vt(new S(46,"foldingImportsByDefault",!1,{description:w.kg("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:Vt(new E(47,"foldingMaximumRegions",5e3,10,65e3,{description:w.kg("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:Vt(new S(48,"unfoldOnClickAfterEndOfLine",!1,{description:w.kg("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:Vt(new z(49,"fontFamily",Ii.fontFamily,{description:w.kg("fontFamily","Controls the font family.")})),fontInfo:Vt(new ce),fontLigatures2:Vt(new j),fontSize:Vt(new he),fontWeight:Vt(new Le),fontVariations:Vt(new me),formatOnPaste:Vt(new S(55,"formatOnPaste",!1,{description:w.kg("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:Vt(new S(56,"formatOnType",!1,{description:w.kg("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:Vt(new S(57,"glyphMargin",!0,{description:w.kg("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:Vt(new Y),hideCursorInOverviewRuler:Vt(new S(59,"hideCursorInOverviewRuler",!1,{description:w.kg("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:Vt(new ae),inDiffEditor:Vt(new S(61,"inDiffEditor",!1)),letterSpacing:Vt(new R(64,"letterSpacing",Ii.letterSpacing,oi=>R.clamp(oi,-5,20),{description:w.kg("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:Vt(new Ke),lineDecorationsWidth:Vt(new x),lineHeight:Vt(new it),lineNumbers:Vt(new Xe),lineNumbersMinChars:Vt(new E(69,"lineNumbersMinChars",5,1,300)),linkedEditing:Vt(new S(70,"linkedEditing",!1,{description:w.kg("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:Vt(new S(71,"links",!0,{description:w.kg("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:Vt(new $(72,"matchBrackets","always",["always","near","never"],{description:w.kg("matchBrackets","Highlight matching brackets.")})),minimap:Vt(new Ze),mouseStyle:Vt(new $(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:Vt(new R(75,"mouseWheelScrollSensitivity",1,oi=>oi===0?1:oi,{markdownDescription:w.kg("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:Vt(new S(76,"mouseWheelZoom",!1,{markdownDescription:U.zx?w.kg("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):w.kg("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:Vt(new S(77,"multiCursorMergeOverlapping",!0,{description:w.kg("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:Vt(new Q(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],_t,{markdownEnumDescriptions:[w.kg("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),w.kg("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:w.kg({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:Vt(new $(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[w.kg("multiCursorPaste.spread","Each cursor pastes a single line of the text."),w.kg("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:w.kg("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:Vt(new E(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:w.kg("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:Vt(new $(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[w.kg("occurrencesHighlight.off","Does not highlight occurrences."),w.kg("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),w.kg("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:w.kg("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:Vt(new S(82,"overviewRulerBorder",!0,{description:w.kg("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:Vt(new E(83,"overviewRulerLanes",3,0,3)),padding:Vt(new ot),pasteAs:Vt(new Zt),parameterHints:Vt(new Pt),peekWidgetDefaultFocus:Vt(new $(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[w.kg("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),w.kg("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:w.kg("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:Vt(new Rt),definitionLinkOpensInPeek:Vt(new S(89,"definitionLinkOpensInPeek",!1,{description:w.kg("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:Vt(new at),quickSuggestionsDelay:Vt(new E(91,"quickSuggestionsDelay",10,0,1073741824,{description:w.kg("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:Vt(new S(92,"readOnly",!1)),readOnlyMessage:Vt(new oe),renameOnType:Vt(new S(94,"renameOnType",!1,{description:w.kg("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:w.kg("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:Vt(new S(95,"renderControlCharacters",!0,{description:w.kg("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:Vt(new $(96,"renderFinalNewline",U.j9?"dimmed":"on",["off","on","dimmed"],{description:w.kg("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:Vt(new $(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",w.kg("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:w.kg("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:Vt(new S(98,"renderLineHighlightOnlyWhenFocus",!1,{description:w.kg("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:Vt(new $(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:Vt(new $(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",w.kg("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),w.kg("renderWhitespace.selection","Render whitespace characters only on selected text."),w.kg("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:w.kg("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:Vt(new E(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:Vt(new S(102,"roundedSelection",!0,{description:w.kg("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:Vt(new te),scrollbar:Vt(new Ve),scrollBeyondLastColumn:Vt(new E(105,"scrollBeyondLastColumn",4,0,1073741824,{description:w.kg("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:Vt(new S(106,"scrollBeyondLastLine",!0,{description:w.kg("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:Vt(new S(107,"scrollPredominantAxis",!0,{description:w.kg("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:Vt(new S(108,"selectionClipboard",!0,{description:w.kg("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:U.j9})),selectionHighlight:Vt(new S(109,"selectionHighlight",!0,{description:w.kg("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:Vt(new S(110,"selectOnLineNumbers",!0)),showFoldingControls:Vt(new $(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[w.kg("showFoldingControls.always","Always show the folding controls."),w.kg("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),w.kg("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:w.kg("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:Vt(new S(112,"showUnused",!0,{description:w.kg("showUnused","Controls fading out of unused code.")})),showDeprecated:Vt(new S(141,"showDeprecated",!0,{description:w.kg("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:Vt(new Ue),snippetSuggestions:Vt(new $(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[w.kg("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),w.kg("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),w.kg("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),w.kg("snippetSuggestions.none","Do not show snippet suggestions.")],description:w.kg("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:Vt(new ke),smoothScrolling:Vt(new S(115,"smoothScrolling",!1,{description:w.kg("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:Vt(new E(118,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:Vt(new ri),inlineSuggest:Vt(new mt),inlineEdit:Vt(new Dt),inlineCompletionsAccessibilityVerbose:Vt(new S(150,"inlineCompletionsAccessibilityVerbose",!1,{description:w.kg("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:Vt(new E(120,"suggestFontSize",0,0,1e3,{markdownDescription:w.kg("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:Vt(new E(121,"suggestLineHeight",0,0,1e3,{markdownDescription:w.kg("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:Vt(new S(122,"suggestOnTriggerCharacters",!0,{description:w.kg("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:Vt(new $(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[w.kg("suggestSelection.first","Always select the first suggestion."),w.kg("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),w.kg("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:w.kg("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:Vt(new $(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[w.kg("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),w.kg("tabCompletion.off","Disable tab completions."),w.kg("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:w.kg("tabCompletion","Enables tab completions.")})),tabIndex:Vt(new E(125,"tabIndex",0,-1,1073741824)),unicodeHighlight:Vt(new Ye),unusualLineTerminators:Vt(new $(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[w.kg("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),w.kg("unusualLineTerminators.off","Unusual line terminators are ignored."),w.kg("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:w.kg("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:Vt(new S(128,"useShadowDOM",!0)),useTabStops:Vt(new S(129,"useTabStops",!0,{description:w.kg("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:Vt(new $(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[w.kg("wordBreak.normal","Use the default line break rule."),w.kg("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:w.kg("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:Vt(new Z),wordSeparators:Vt(new z(132,"wordSeparators",M.J3,{description:w.kg("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:Vt(new $(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[w.kg("wordWrap.off","Lines will never wrap."),w.kg("wordWrap.on","Lines will wrap at the viewport width."),w.kg({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),w.kg({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:w.kg({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:Vt(new z(134,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:Vt(new z(135,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:Vt(new E(136,"wordWrapColumn",80,1,1073741824,{markdownDescription:w.kg({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:Vt(new $(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:Vt(new $(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:Vt(new K),defaultColorDecorators:Vt(new S(148,"defaultColorDecorators",!1,{markdownDescription:w.kg("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:Vt(new Wt),tabFocusMode:Vt(new S(145,"tabFocusMode",!1,{markdownDescription:w.kg("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:Vt(new Ce),wrappingInfo:Vt(new pt),wrappingIndent:Vt(new Fe),wrappingStrategy:Vt(new Pe)}},8794:(Mt,He,c)=>{c.r(He),c.d(He,{findSectionHeaders:()=>U});const u=new RegExp("\\bMARK:\\s*(.*)$","d"),G=/^-+|-+$/g;function U(A,I){let b=[];if(I.findRegionSectionHeaders&&I.foldingRules?.markers){const C=P(A,I);b=b.concat(C)}if(I.findMarkSectionHeaders){const C=M(A);b=b.concat(C)}return b}function P(A,I){const b=[],C=A.getLineCount();for(let v=1;v<=C;v++){const _=A.getLineContent(v),d=_.match(I.foldingRules.markers.start);if(d){const m={startLineNumber:v,startColumn:d[0].length+1,endLineNumber:v,endColumn:_.length+1};if(m.endColumn>m.startColumn){const S={range:m,...O(_.substring(d[0].length)),shouldBeInComments:!1};(S.text||S.hasSeparatorLine)&&b.push(S)}}}return b}function M(A){const I=[],b=A.getLineCount();for(let C=1;C<=b;C++){const v=A.getLineContent(C);w(v,C,I)}return I}function w(A,I,b){u.lastIndex=0;const C=u.exec(A);if(C){const v=C.indices[1][0]+1,_=C.indices[1][1]+1,d={startLineNumber:I,startColumn:v,endLineNumber:I,endColumn:_};if(d.endColumn>d.startColumn){const m={range:d,...O(C[1]),shouldBeInComments:!0};(m.text||m.hasSeparatorLine)&&b.push(m)}}}function O(A){A=A.trim();const I=A.startsWith("-");return A=A.replace(G,""),{text:A,hasSeparatorLine:I}}},8909:(Mt,He,c)=>{c.d(He,{W5:()=>m,dr:()=>I,hB:()=>C,lt:()=>O,wC:()=>d});var u=c(85565),G=c(53605),U=c(69504),P=c(98414),M=c(26342);const w=999;class O{constructor(D,E,B,R){this.searchString=D,this.isRegex=E,this.matchCase=B,this.wordSeparators=R}parseSearchRequest(){if(this.searchString==="")return null;let D;this.isRegex?D=A(this.searchString):D=this.searchString.indexOf(`
`)>=0;let E=null;try{E=u.OS(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:D,global:!0,unicode:!0})}catch{return null}if(!E)return null;let B=!this.isRegex&&!D;return B&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(B=this.matchCase),new M.L5(E,this.wordSeparators?(0,G.i)(this.wordSeparators,[]):null,B?this.searchString:null)}}function A(S){if(!S||S.length===0)return!1;for(let D=0,E=S.length;D<E;D++){const B=S.charCodeAt(D);if(B===10)return!0;if(B===92){if(D++,D>=E)break;const R=S.charCodeAt(D);if(R===110||R===114||R===87)return!0}}return!1}function I(S,D,E){if(!E)return new M.Dg(S,null);const B=[];for(let R=0,z=D.length;R<z;R++)B[R]=D[R];return new M.Dg(S,B)}class b{constructor(D){const E=[];let B=0;for(let R=0,z=D.length;R<z;R++)D.charCodeAt(R)===10&&(E[B++]=R);this._lineFeedsOffsets=E}findLineFeedCountBeforeOffset(D){const E=this._lineFeedsOffsets;let B=0,R=E.length-1;if(R===-1||D<=E[0])return 0;for(;B<R;){const z=B+((R-B)/2>>0);E[z]>=D?R=z-1:E[z+1]>=D?(B=z,R=z):B=z+1}return B+1}}class C{static findMatches(D,E,B,R,z){const W=E.parseSearchRequest();return W?W.regex.multiline?this._doFindMatchesMultiline(D,B,new m(W.wordSeparators,W.regex),R,z):this._doFindMatchesLineByLine(D,B,W,R,z):[]}static _getMultilineMatchRange(D,E,B,R,z,W){let $,Q=0;R?(Q=R.findLineFeedCountBeforeOffset(z),$=E+z+Q):$=E+z;let q;if(R){const Ae=R.findLineFeedCountBeforeOffset(z+W.length)-Q;q=$+W.length+Ae}else q=$+W.length;const ne=D.getPositionAt($),ve=D.getPositionAt(q);return new P.Q(ne.lineNumber,ne.column,ve.lineNumber,ve.column)}static _doFindMatchesMultiline(D,E,B,R,z){const W=D.getOffsetAt(E.getStartPosition()),$=D.getValueInRange(E,1),Q=D.getEOL()===`\r
`?new b($):null,q=[];let ne=0,ve;for(B.reset(0);ve=B.next($);)if(q[ne++]=I(this._getMultilineMatchRange(D,W,$,Q,ve.index,ve[0]),ve,R),ne>=z)return q;return q}static _doFindMatchesLineByLine(D,E,B,R,z){const W=[];let $=0;if(E.startLineNumber===E.endLineNumber){const q=D.getLineContent(E.startLineNumber).substring(E.startColumn-1,E.endColumn-1);return $=this._findMatchesInLine(B,q,E.startLineNumber,E.startColumn-1,$,W,R,z),W}const Q=D.getLineContent(E.startLineNumber).substring(E.startColumn-1);$=this._findMatchesInLine(B,Q,E.startLineNumber,E.startColumn-1,$,W,R,z);for(let q=E.startLineNumber+1;q<E.endLineNumber&&$<z;q++)$=this._findMatchesInLine(B,D.getLineContent(q),q,0,$,W,R,z);if($<z){const q=D.getLineContent(E.endLineNumber).substring(0,E.endColumn-1);$=this._findMatchesInLine(B,q,E.endLineNumber,0,$,W,R,z)}return W}static _findMatchesInLine(D,E,B,R,z,W,$,Q){const q=D.wordSeparators;if(!$&&D.simpleSearch){const Re=D.simpleSearch,Ae=Re.length,re=E.length;let K=-Ae;for(;(K=E.indexOf(Re,K+Ae))!==-1;)if((!q||d(q,E,re,K,Ae))&&(W[z++]=new M.Dg(new P.Q(B,K+1+R,B,K+1+Ae+R),null),z>=Q))return z;return z}const ne=new m(D.wordSeparators,D.regex);let ve;ne.reset(0);do if(ve=ne.next(E),ve&&(W[z++]=I(new P.Q(B,ve.index+1+R,B,ve.index+1+ve[0].length+R),ve,$),z>=Q))return z;while(ve);return z}static findNextMatch(D,E,B,R){const z=E.parseSearchRequest();if(!z)return null;const W=new m(z.wordSeparators,z.regex);return z.regex.multiline?this._doFindNextMatchMultiline(D,B,W,R):this._doFindNextMatchLineByLine(D,B,W,R)}static _doFindNextMatchMultiline(D,E,B,R){const z=new U.y(E.lineNumber,1),W=D.getOffsetAt(z),$=D.getLineCount(),Q=D.getValueInRange(new P.Q(z.lineNumber,z.column,$,D.getLineMaxColumn($)),1),q=D.getEOL()===`\r
`?new b(Q):null;B.reset(E.column-1);const ne=B.next(Q);return ne?I(this._getMultilineMatchRange(D,W,Q,q,ne.index,ne[0]),ne,R):E.lineNumber!==1||E.column!==1?this._doFindNextMatchMultiline(D,new U.y(1,1),B,R):null}static _doFindNextMatchLineByLine(D,E,B,R){const z=D.getLineCount(),W=E.lineNumber,$=D.getLineContent(W),Q=this._findFirstMatchInLine(B,$,W,E.column,R);if(Q)return Q;for(let q=1;q<=z;q++){const ne=(W+q-1)%z,ve=D.getLineContent(ne+1),Re=this._findFirstMatchInLine(B,ve,ne+1,1,R);if(Re)return Re}return null}static _findFirstMatchInLine(D,E,B,R,z){D.reset(R-1);const W=D.next(E);return W?I(new P.Q(B,W.index+1,B,W.index+1+W[0].length),W,z):null}static findPreviousMatch(D,E,B,R){const z=E.parseSearchRequest();if(!z)return null;const W=new m(z.wordSeparators,z.regex);return z.regex.multiline?this._doFindPreviousMatchMultiline(D,B,W,R):this._doFindPreviousMatchLineByLine(D,B,W,R)}static _doFindPreviousMatchMultiline(D,E,B,R){const z=this._doFindMatchesMultiline(D,new P.Q(1,1,E.lineNumber,E.column),B,R,10*w);if(z.length>0)return z[z.length-1];const W=D.getLineCount();return E.lineNumber!==W||E.column!==D.getLineMaxColumn(W)?this._doFindPreviousMatchMultiline(D,new U.y(W,D.getLineMaxColumn(W)),B,R):null}static _doFindPreviousMatchLineByLine(D,E,B,R){const z=D.getLineCount(),W=E.lineNumber,$=D.getLineContent(W).substring(0,E.column-1),Q=this._findLastMatchInLine(B,$,W,R);if(Q)return Q;for(let q=1;q<=z;q++){const ne=(z+W-q-1)%z,ve=D.getLineContent(ne+1),Re=this._findLastMatchInLine(B,ve,ne+1,R);if(Re)return Re}return null}static _findLastMatchInLine(D,E,B,R){let z=null,W;for(D.reset(0);W=D.next(E);)z=I(new P.Q(B,W.index+1,B,W.index+1+W[0].length),W,R);return z}}function v(S,D,E,B,R){if(B===0)return!0;const z=D.charCodeAt(B-1);if(S.get(z)!==0||z===13||z===10)return!0;if(R>0){const W=D.charCodeAt(B);if(S.get(W)!==0)return!0}return!1}function _(S,D,E,B,R){if(B+R===E)return!0;const z=D.charCodeAt(B+R);if(S.get(z)!==0||z===13||z===10)return!0;if(R>0){const W=D.charCodeAt(B+R-1);if(S.get(W)!==0)return!0}return!1}function d(S,D,E,B,R){return v(S,D,E,B,R)&&_(S,D,E,B,R)}class m{constructor(D,E){this._wordSeparators=D,this._searchRegex=E,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(D){this._searchRegex.lastIndex=D,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(D){const E=D.length;let B;do{if(this._prevMatchStartIndex+this._prevMatchLength===E||(B=this._searchRegex.exec(D),!B))return null;const R=B.index,z=B[0].length;if(R===this._prevMatchStartIndex&&z===this._prevMatchLength){if(z===0){u.Z5(D,E,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=R,this._prevMatchLength=z,!this._wordSeparators||d(this._wordSeparators,D,E,R,z))return B}while(B);return null}}},8954:(Mt,He,c)=>{c.d(He,{s:()=>C});var u=c(31938),G=c(38714),U=c(60599),P=c(3223),M=c(94698),w=c(15903),O=c(91779),A=c(33902),I=c(60317);class b{constructor(S){this._element=S}get element(){return this._element}set textContent(S){this.disposed||S===this._textContent||(this._textContent=S,this._element.textContent=S)}set classNames(S){this.disposed||(0,P.aI)(S,this._classNames)||(this._classNames=S,this._element.classList.value="",this._element.classList.add(...S))}set empty(S){this.disposed||S===this._empty||(this._empty=S,this._element.style.marginLeft=S?"0":"")}dispose(){this.disposed=!0}}class C extends U.jG{constructor(S,D){super(),this.customHovers=new Map,this.creationOptions=D,this.domNode=this._register(new b(u.BC(S,u.$(".monaco-icon-label")))),this.labelContainer=u.BC(this.domNode.element,u.$(".monaco-icon-label-container")),this.nameContainer=u.BC(this.labelContainer,u.$("span.monaco-icon-name-container")),D?.supportHighlights||D?.supportIcons?this.nameNode=this._register(new d(this.nameContainer,!!D.supportIcons)):this.nameNode=new v(this.nameContainer),this.hoverDelegate=D?.hoverDelegate??(0,w.nZ)("mouse")}get element(){return this.domNode.element}setLabel(S,D,E){const B=["monaco-icon-label"],R=["monaco-icon-label-container"];let z="";E&&(E.extraClasses&&B.push(...E.extraClasses),E.italic&&B.push("italic"),E.strikethrough&&B.push("strikethrough"),E.disabledCommand&&R.push("disabled"),E.title&&(typeof E.title=="string"?z+=E.title:z+=S));const W=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(E?.iconPath){let $;!W||!u.sb(W)?($=u.$(".monaco-icon-label-iconpath"),this.domNode.element.prepend($)):$=W,$.style.backgroundImage=u.Tf(E?.iconPath)}else W&&W.remove();if(this.domNode.classNames=B,this.domNode.element.setAttribute("aria-label",z),this.labelContainer.classList.value="",this.labelContainer.classList.add(...R),this.setupHover(E?.descriptionTitle?this.labelContainer:this.element,E?.title),this.nameNode.setLabel(S,E),D||this.descriptionNode){const $=this.getOrCreateDescriptionNode();$ instanceof G._?($.set(D||"",E?E.descriptionMatches:void 0,void 0,E?.labelEscapeNewLines),this.setupHover($.element,E?.descriptionTitle)):($.textContent=D&&E?.labelEscapeNewLines?G._.escapeNewLines(D,[]):D||"",this.setupHover($.element,E?.descriptionTitle||""),$.empty=!D)}if(E?.suffix||this.suffixNode){const $=this.getOrCreateSuffixNode();$.textContent=E?.suffix??""}}setupHover(S,D){const E=this.customHovers.get(S);if(E&&(E.dispose(),this.customHovers.delete(S)),!D){S.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover)(function(R,z){(0,A.Kg)(z)?R.title=(0,I.pS)(z):z?.markdownNotSupportedFallback?R.title=z.markdownNotSupportedFallback:R.removeAttribute("title")})(S,D);else{const B=(0,O.i)().setupManagedHover(this.hoverDelegate,S,D);B&&this.customHovers.set(S,B)}}dispose(){super.dispose();for(const S of this.customHovers.values())S.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const S=this._register(new b(u.Pl(this.nameContainer,u.$("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new b(u.BC(S.element,u.$("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){if(!this.descriptionNode){const S=this._register(new b(u.BC(this.labelContainer,u.$("span.monaco-icon-description-container"))));this.creationOptions?.supportDescriptionHighlights?this.descriptionNode=this._register(new G._(u.BC(S.element,u.$("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new b(u.BC(S.element,u.$("span.label-description"))))}return this.descriptionNode}}class v{constructor(S){this.container=S,this.label=void 0,this.singleLabel=void 0}setLabel(S,D){if(!(this.label===S&&(0,P.aI)(this.options,D)))if(this.label=S,this.options=D,typeof S=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=u.BC(this.container,u.$("a.label-name",{id:D?.domId}))),this.singleLabel.textContent=S;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let E=0;E<S.length;E++){const B=S[E],R=D?.domId&&`${D?.domId}_${E}`;u.BC(this.container,u.$("a.label-name",{id:R,"data-icon-label-count":S.length,"data-icon-label-index":E,role:"treeitem"},B)),E<S.length-1&&u.BC(this.container,u.$("span.label-separator",void 0,D?.separator||"/"))}}}}function _(m,S,D){if(!D)return;let E=0;return m.map(B=>{const R={start:E,end:E+B.length},z=D.map(W=>M.Q.intersect(R,W)).filter(W=>!M.Q.isEmpty(W)).map(({start:W,end:$})=>({start:W-E,end:$-E}));return E=R.end+S.length,z})}class d extends U.jG{constructor(S,D){super(),this.container=S,this.supportIcons=D,this.label=void 0,this.singleLabel=void 0}setLabel(S,D){if(!(this.label===S&&(0,P.aI)(this.options,D)))if(this.label=S,this.options=D,typeof S=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new G._(u.BC(this.container,u.$("a.label-name",{id:D?.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(S,D?.matches,void 0,D?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const E=D?.separator||"/",B=_(S,E,D?.matches);for(let R=0;R<S.length;R++){const z=S[R],W=B?B[R]:void 0,$=D?.domId&&`${D?.domId}_${R}`,Q=u.$("a.label-name",{id:$,"data-icon-label-count":S.length,"data-icon-label-index":R,role:"treeitem"});this._register(new G._(u.BC(this.container,Q),{supportIcons:this.supportIcons})).set(z,W,void 0,D?.labelEscapeNewLines),R<S.length-1&&u.BC(Q,u.$("span.label-separator",void 0,E))}}}}},9709:(Mt,He,c)=>{c.d(He,{uB:()=>ve,HC:()=>_,Kb:()=>E,FX:()=>S,rY:()=>C,lO:()=>Q,M$:()=>v,r4:()=>Re,qw:()=>d,sm:()=>F,v_:()=>Ae,OV:()=>q,YT:()=>ne,GE:()=>m,WA:()=>D,gP:()=>W,ou:()=>I,dG:()=>re,$M:()=>b,OB:()=>K,PK:()=>z,Iu:()=>B});var u=c(67538),G=c(37473),U=c(98414),P=c(56491),M=c(60599);class w{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new P.vl,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(j){this._onDidChange.fire({changedLanguages:j,changedColorMap:!1})}register(j,me){return this._tokenizationSupports.set(j,me),this.handleChange([j]),(0,M.s)(()=>{this._tokenizationSupports.get(j)===me&&(this._tokenizationSupports.delete(j),this.handleChange([j]))})}get(j){return this._tokenizationSupports.get(j)||null}registerFactory(j,me){this._factories.get(j)?.dispose();const ce=new O(this,j,me);return this._factories.set(j,ce),(0,M.s)(()=>{const he=this._factories.get(j);!he||he!==ce||(this._factories.delete(j),he.dispose())})}async getOrCreate(j){const me=this.get(j);if(me)return me;const ce=this._factories.get(j);return!ce||ce.isResolved?null:(await ce.resolve(),this.get(j))}isResolved(j){if(this.get(j))return!0;const ce=this._factories.get(j);return!!(!ce||ce.isResolved)}setColorMap(j){this._colorMap=j,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class O extends M.jG{get isResolved(){return this._isResolved}constructor(j,me,ce){super(),this._registry=j,this._languageId=me,this._factory=ce,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const j=await this._factory.tokenizationSupport;this._isResolved=!0,j&&!this._isDisposed&&this._register(this._registry.register(this._languageId,j))}}var A=c(45573);class I{constructor(j,me,ce){this.offset=j,this.type=me,this.language=ce,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}}class b{constructor(j,me){this.tokens=j,this.endState=me,this._tokenizationResultBrand=void 0}}class C{constructor(j,me){this.tokens=j,this.endState=me,this._encodedTokenizationResultBrand=void 0}}var v;(function(N){N[N.Increase=0]="Increase",N[N.Decrease=1]="Decrease"})(v||(v={}));var _;(function(N){const j=new Map;j.set(0,u.W.symbolMethod),j.set(1,u.W.symbolFunction),j.set(2,u.W.symbolConstructor),j.set(3,u.W.symbolField),j.set(4,u.W.symbolVariable),j.set(5,u.W.symbolClass),j.set(6,u.W.symbolStruct),j.set(7,u.W.symbolInterface),j.set(8,u.W.symbolModule),j.set(9,u.W.symbolProperty),j.set(10,u.W.symbolEvent),j.set(11,u.W.symbolOperator),j.set(12,u.W.symbolUnit),j.set(13,u.W.symbolValue),j.set(15,u.W.symbolEnum),j.set(14,u.W.symbolConstant),j.set(15,u.W.symbolEnum),j.set(16,u.W.symbolEnumMember),j.set(17,u.W.symbolKeyword),j.set(27,u.W.symbolSnippet),j.set(18,u.W.symbolText),j.set(19,u.W.symbolColor),j.set(20,u.W.symbolFile),j.set(21,u.W.symbolReference),j.set(22,u.W.symbolCustomColor),j.set(23,u.W.symbolFolder),j.set(24,u.W.symbolTypeParameter),j.set(25,u.W.account),j.set(26,u.W.issues);function me(Le){let Y=j.get(Le);return Y||(Y=u.W.symbolProperty),Y}N.toIcon=me;const ce=new Map;ce.set("method",0),ce.set("function",1),ce.set("constructor",2),ce.set("field",3),ce.set("variable",4),ce.set("class",5),ce.set("struct",6),ce.set("interface",7),ce.set("module",8),ce.set("property",9),ce.set("event",10),ce.set("operator",11),ce.set("unit",12),ce.set("value",13),ce.set("constant",14),ce.set("enum",15),ce.set("enum-member",16),ce.set("enumMember",16),ce.set("keyword",17),ce.set("snippet",27),ce.set("text",18),ce.set("color",19),ce.set("file",20),ce.set("reference",21),ce.set("customcolor",22),ce.set("folder",23),ce.set("type-parameter",24),ce.set("typeParameter",24),ce.set("account",25),ce.set("issue",26);function he(Le,Y){let ae=ce.get(Le);return typeof ae>"u"&&!Y&&(ae=9),ae}N.fromString=he})(_||(_={}));var d;(function(N){N[N.Automatic=0]="Automatic",N[N.Explicit=1]="Explicit"})(d||(d={}));class m{constructor(j,me,ce,he){this.range=j,this.text=me,this.completionKind=ce,this.isSnippetText=he}equals(j){return U.Q.lift(this.range).equalsRange(j.range)&&this.text===j.text&&this.completionKind===j.completionKind&&this.isSnippetText===j.isSnippetText}}var S;(function(N){N[N.Automatic=0]="Automatic",N[N.PasteAs=1]="PasteAs"})(S||(S={}));var D;(function(N){N[N.Invoke=1]="Invoke",N[N.TriggerCharacter=2]="TriggerCharacter",N[N.ContentChange=3]="ContentChange"})(D||(D={}));var E;(function(N){N[N.Text=0]="Text",N[N.Read=1]="Read",N[N.Write=2]="Write"})(E||(E={}));function B(N){return N&&G.r.isUri(N.uri)&&U.Q.isIRange(N.range)&&(U.Q.isIRange(N.originSelectionRange)||U.Q.isIRange(N.targetSelectionRange))}const R={17:(0,A.kg)("Array","array"),16:(0,A.kg)("Boolean","boolean"),4:(0,A.kg)("Class","class"),13:(0,A.kg)("Constant","constant"),8:(0,A.kg)("Constructor","constructor"),9:(0,A.kg)("Enum","enumeration"),21:(0,A.kg)("EnumMember","enumeration member"),23:(0,A.kg)("Event","event"),7:(0,A.kg)("Field","field"),0:(0,A.kg)("File","file"),11:(0,A.kg)("Function","function"),10:(0,A.kg)("Interface","interface"),19:(0,A.kg)("Key","key"),5:(0,A.kg)("Method","method"),1:(0,A.kg)("Module","module"),2:(0,A.kg)("Namespace","namespace"),20:(0,A.kg)("Null","null"),15:(0,A.kg)("Number","number"),18:(0,A.kg)("Object","object"),24:(0,A.kg)("Operator","operator"),3:(0,A.kg)("Package","package"),6:(0,A.kg)("Property","property"),14:(0,A.kg)("String","string"),22:(0,A.kg)("Struct","struct"),25:(0,A.kg)("TypeParameter","type parameter"),12:(0,A.kg)("Variable","variable")};function z(N,j){return(0,A.kg)("symbolAriaLabel","{0} ({1})",N,R[j])}var W;(function(N){const j=new Map;j.set(0,u.W.symbolFile),j.set(1,u.W.symbolModule),j.set(2,u.W.symbolNamespace),j.set(3,u.W.symbolPackage),j.set(4,u.W.symbolClass),j.set(5,u.W.symbolMethod),j.set(6,u.W.symbolProperty),j.set(7,u.W.symbolField),j.set(8,u.W.symbolConstructor),j.set(9,u.W.symbolEnum),j.set(10,u.W.symbolInterface),j.set(11,u.W.symbolFunction),j.set(12,u.W.symbolVariable),j.set(13,u.W.symbolConstant),j.set(14,u.W.symbolString),j.set(15,u.W.symbolNumber),j.set(16,u.W.symbolBoolean),j.set(17,u.W.symbolArray),j.set(18,u.W.symbolObject),j.set(19,u.W.symbolKey),j.set(20,u.W.symbolNull),j.set(21,u.W.symbolEnumMember),j.set(22,u.W.symbolStruct),j.set(23,u.W.symbolEvent),j.set(24,u.W.symbolOperator),j.set(25,u.W.symbolTypeParameter);function me(ce){let he=j.get(ce);return he||(he=u.W.symbolProperty),he}N.toIcon=me})(W||(W={}));class ${}class Q{static{this.Comment=new Q("comment")}static{this.Imports=new Q("imports")}static{this.Region=new Q("region")}static fromValue(j){switch(j){case"comment":return Q.Comment;case"imports":return Q.Imports;case"region":return Q.Region}return new Q(j)}constructor(j){this.value=j}}var q;(function(N){N[N.AIGenerated=1]="AIGenerated"})(q||(q={}));var ne;(function(N){N[N.Invoke=0]="Invoke",N[N.Automatic=1]="Automatic"})(ne||(ne={}));var ve;(function(N){function j(me){return!me||typeof me!="object"?!1:typeof me.id=="string"&&typeof me.title=="string"}N.is=j})(ve||(ve={}));var Re;(function(N){N[N.Type=1]="Type",N[N.Parameter=2]="Parameter"})(Re||(Re={}));class Ae{constructor(j){this.createSupport=j,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(j=>{j&&j.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const re=new w,K=new w;var F;(function(N){N[N.Invoke=0]="Invoke",N[N.Automatic=1]="Automatic"})(F||(F={}))},9786:(Mt,He,c)=>{c.d(He,{BT:()=>v,WM:()=>w,bX:()=>A,cI:()=>b,gn:()=>I,mh:()=>C,zR:()=>O});var u=c(45573),G=c(34920),U=c(24167),P=c(48391);const M=(0,U.x1)("sash.hoverBorder",P.tA,u.kg("sashActiveBorder","Border color of active sashes.")),w=(0,U.x1)("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:G.Q1.black,hcLight:"#0F4A85"},u.kg("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),O=(0,U.x1)("badge.foreground",{dark:G.Q1.white,light:"#333",hcDark:G.Q1.white,hcLight:G.Q1.white},u.kg("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),A=(0,U.x1)("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},u.kg("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),I=(0,U.x1)("scrollbarSlider.background",{dark:G.Q1.fromHex("#797979").transparent(.4),light:G.Q1.fromHex("#646464").transparent(.4),hcDark:(0,U.JO)(P.b1,.6),hcLight:(0,U.JO)(P.b1,.4)},u.kg("scrollbarSliderBackground","Scrollbar slider background color.")),b=(0,U.x1)("scrollbarSlider.hoverBackground",{dark:G.Q1.fromHex("#646464").transparent(.7),light:G.Q1.fromHex("#646464").transparent(.7),hcDark:(0,U.JO)(P.b1,.8),hcLight:(0,U.JO)(P.b1,.8)},u.kg("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),C=(0,U.x1)("scrollbarSlider.activeBackground",{dark:G.Q1.fromHex("#BFBFBF").transparent(.4),light:G.Q1.fromHex("#000000").transparent(.6),hcDark:P.b1,hcLight:P.b1},u.kg("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),v=(0,U.x1)("progressBar.background",{dark:G.Q1.fromHex("#0E70C0"),light:G.Q1.fromHex("#0E70C0"),hcDark:P.b1,hcLight:P.b1},u.kg("progressBarBackground","Background color of the progress bar that can show for long running operations."))},12305:(Mt,He,c)=>{c.r(He),c.d(He,{IMarkerDecorationsService:()=>G});var u=c(81545);const G=(0,u.u1)("markerDecorationsService")},12634:(Mt,He,c)=>{c.d(He,{I:()=>G});var u=c(43860);class G extends u.LN{constructor(P){super(),this._getContext=P}runAction(P,M){const w=this._getContext();return super.runAction(P,w)}}},13199:(Mt,He,c)=>{c.d(He,{TN:()=>O,fO:()=>A});var u=c(81545),G=c(60599),U=c(54752),P=c(31938),M=function(b,C,v,_){var d=arguments.length,m=d<3?C:_===null?_=Object.getOwnPropertyDescriptor(C,v):_,S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(b,C,v,_);else for(var D=b.length-1;D>=0;D--)(S=b[D])&&(m=(d<3?S(m):d>3?S(C,v,m):S(C,v))||m);return d>3&&m&&Object.defineProperty(C,v,m),m},w=function(b,C){return function(v,_){C(v,_,b)}};const O=(0,u.u1)("hoverService");let A=class extends G.jG{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(C,v,_={},d,m){super(),this.placement=C,this.instantHover=v,this.overrideOptions=_,this.configurationService=d,this.hoverService=m,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new G.Cm),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(S=>{S.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(C,v){const _=typeof this.overrideOptions=="function"?this.overrideOptions(C,v):this.overrideOptions;this.hoverDisposables.clear();const d=(0,P.sb)(C.target)?[C.target]:C.target.targetElements;for(const S of d)this.hoverDisposables.add((0,P.b2)(S,"keydown",D=>{D.equals(9)&&this.hoverService.hideHover()}));const m=(0,P.sb)(C.content)?void 0:C.content.toString();return this.hoverService.showHover({...C,..._,persistence:{hideOnKeyDown:!0,..._.persistence},id:m,appearance:{...C.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),..._.appearance}},v)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};A=M([w(3,U.pG),w(4,O)],A);const I={showHover:function(){throw new Error("Native hover function not implemented.")},delay:0,showNativeHover:!0}},13429:(Mt,He,c)=>{c.d(He,{i:()=>U,y:()=>P});var u=c(98414),G=c(47545);class U{constructor(w,O,A){this._range=w,this._charBeforeSelection=O,this._charAfterSelection=A}getEditOperations(w,O){O.addTrackedEditOperation(new u.Q(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),O.addTrackedEditOperation(new u.Q(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(w,O){const A=O.getInverseEditOperations(),I=A[0].range,b=A[1].range;return new G.L(I.endLineNumber,I.endColumn,b.endLineNumber,b.endColumn-this._charAfterSelection.length)}}class P{constructor(w,O,A){this._position=w,this._text=O,this._charAfter=A}getEditOperations(w,O){O.addTrackedEditOperation(new u.Q(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(w,O){const I=O.getInverseEditOperations()[0].range;return new G.L(I.endLineNumber,I.startColumn,I.endLineNumber,I.endColumn-this._charAfter.length)}}},13511:(Mt,He,c)=>{c.d(He,{MU:()=>re,QC:()=>ne,Se:()=>Re,oO:()=>Ae});var u=c(38594),G=c(31938),U=c(53784),P=c(25334),M=c(61329),w=c(62385),O=c(37519),A=c(42640);const I=11;class b extends w.x{constructor(N){super(),this._onActivate=N.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=N.bgWidth+"px",this.bgDomNode.style.height=N.bgHeight+"px",typeof N.top<"u"&&(this.bgDomNode.style.top="0px"),typeof N.left<"u"&&(this.bgDomNode.style.left="0px"),typeof N.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof N.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=N.className,this.domNode.classList.add(...A.L.asClassNameArray(N.icon)),this.domNode.style.position="absolute",this.domNode.style.width=I+"px",this.domNode.style.height=I+"px",typeof N.top<"u"&&(this.domNode.style.top=N.top+"px"),typeof N.left<"u"&&(this.domNode.style.left=N.left+"px"),typeof N.bottom<"u"&&(this.domNode.style.bottom=N.bottom+"px"),typeof N.right<"u"&&(this.domNode.style.right=N.right+"px"),this._pointerMoveMonitor=this._register(new M._),this._register(G.b2(this.bgDomNode,G.Bx.POINTER_DOWN,j=>this._arrowPointerDown(j))),this._register(G.b2(this.domNode,G.Bx.POINTER_DOWN,j=>this._arrowPointerDown(j))),this._pointerdownRepeatTimer=this._register(new G.Be),this._pointerdownScheduleRepeatTimer=this._register(new O.pc)}_arrowPointerDown(N){if(!N.target||!(N.target instanceof Element))return;const j=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,G.zk(N))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(j,200),this._pointerMoveMonitor.startMonitoring(N.target,N.pointerId,N.buttons,me=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),N.preventDefault()}}var C=c(60599);class v extends C.jG{constructor(N,j,me){super(),this._visibility=N,this._visibleClassName=j,this._invisibleClassName=me,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new O.pc)}setVisibility(N){this._visibility!==N&&(this._visibility=N,this._updateShouldBeVisible())}setShouldBeVisible(N){this._rawShouldBeVisible=N,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const N=this._applyVisibilitySetting();this._shouldBeVisible!==N&&(this._shouldBeVisible=N,this.ensureVisibility())}setIsNeeded(N){this._isNeeded!==N&&(this._isNeeded=N,this.ensureVisibility())}setDomNode(N){this._domNode=N,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(N){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(N?" fade":"")))}}var _=c(90692);const d=140;class m extends w.x{constructor(N){super(),this._lazyRender=N.lazyRender,this._host=N.host,this._scrollable=N.scrollable,this._scrollByPage=N.scrollByPage,this._scrollbarState=N.scrollbarState,this._visibilityController=this._register(new v(N.visibility,"visible scrollbar "+N.extraScrollbarClassName,"invisible scrollbar "+N.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new M._),this._shouldRender=!0,this.domNode=(0,U.Z)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(G.ko(this.domNode.domNode,G.Bx.POINTER_DOWN,j=>this._domNodePointerDown(j)))}_createArrow(N){const j=this._register(new b(N));this.domNode.domNode.appendChild(j.bgDomNode),this.domNode.domNode.appendChild(j.domNode)}_createSlider(N,j,me,ce){this.slider=(0,U.Z)(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(N),this.slider.setLeft(j),typeof me=="number"&&this.slider.setWidth(me),typeof ce=="number"&&this.slider.setHeight(ce),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(G.ko(this.slider.domNode,G.Bx.POINTER_DOWN,he=>{he.button===0&&(he.preventDefault(),this._sliderPointerDown(he))})),this.onclick(this.slider.domNode,he=>{he.leftButton&&he.stopPropagation()})}_onElementSize(N){return this._scrollbarState.setVisibleSize(N)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(N){return this._scrollbarState.setScrollSize(N)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(N){return this._scrollbarState.setScrollPosition(N)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(N){N.target===this.domNode.domNode&&this._onPointerDown(N)}delegatePointerDown(N){const j=this.domNode.domNode.getClientRects()[0].top,me=j+this._scrollbarState.getSliderPosition(),ce=j+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),he=this._sliderPointerPosition(N);me<=he&&he<=ce?N.button===0&&(N.preventDefault(),this._sliderPointerDown(N)):this._onPointerDown(N)}_onPointerDown(N){let j,me;if(N.target===this.domNode.domNode&&typeof N.offsetX=="number"&&typeof N.offsetY=="number")j=N.offsetX,me=N.offsetY;else{const he=G.BK(this.domNode.domNode);j=N.pageX-he.left,me=N.pageY-he.top}const ce=this._pointerDownRelativePosition(j,me);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(ce):this._scrollbarState.getDesiredScrollPositionFromOffset(ce)),N.button===0&&(N.preventDefault(),this._sliderPointerDown(N))}_sliderPointerDown(N){if(!N.target||!(N.target instanceof Element))return;const j=this._sliderPointerPosition(N),me=this._sliderOrthogonalPointerPosition(N),ce=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(N.target,N.pointerId,N.buttons,he=>{const Le=this._sliderOrthogonalPointerPosition(he),Y=Math.abs(Le-me);if(_.uF&&Y>d){this._setDesiredScrollPositionNow(ce.getScrollPosition());return}const Ce=this._sliderPointerPosition(he)-j;this._setDesiredScrollPositionNow(ce.getDesiredScrollPositionFromDelta(Ce))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(N){const j={};this.writeScrollPosition(j,N),this._scrollable.setScrollPositionNow(j)}updateScrollbarSize(N){this._updateScrollbarSize(N),this._scrollbarState.setScrollbarSize(N),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}var S=c(70033),D=c(67538);class E extends m{constructor(N,j,me){const ce=N.getScrollDimensions(),he=N.getCurrentScrollPosition();if(super({lazyRender:j.lazyRender,host:me,scrollbarState:new S.m(j.horizontalHasArrows?j.arrowSize:0,j.horizontal===2?0:j.horizontalScrollbarSize,j.vertical===2?0:j.verticalScrollbarSize,ce.width,ce.scrollWidth,he.scrollLeft),visibility:j.horizontal,extraScrollbarClassName:"horizontal",scrollable:N,scrollByPage:j.scrollByPage}),j.horizontalHasArrows){const Le=(j.arrowSize-I)/2,Y=(j.horizontalScrollbarSize-I)/2;this._createArrow({className:"scra",icon:D.W.scrollbarButtonLeft,top:Y,left:Le,bottom:void 0,right:void 0,bgWidth:j.arrowSize,bgHeight:j.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new P.$(null,1,0))}),this._createArrow({className:"scra",icon:D.W.scrollbarButtonRight,top:Y,left:void 0,bottom:void 0,right:Le,bgWidth:j.arrowSize,bgHeight:j.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new P.$(null,-1,0))})}this._createSlider(Math.floor((j.horizontalScrollbarSize-j.horizontalSliderSize)/2),0,void 0,j.horizontalSliderSize)}_updateSlider(N,j){this.slider.setWidth(N),this.slider.setLeft(j)}_renderDomNode(N,j){this.domNode.setWidth(N),this.domNode.setHeight(j),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(N){return this._shouldRender=this._onElementScrollSize(N.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(N.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(N.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(N,j){return N}_sliderPointerPosition(N){return N.pageX}_sliderOrthogonalPointerPosition(N){return N.pageY}_updateScrollbarSize(N){this.slider.setHeight(N)}writeScrollPosition(N,j){N.scrollLeft=j}updateOptions(N){this.updateScrollbarSize(N.horizontal===2?0:N.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(N.vertical===2?0:N.verticalScrollbarSize),this._visibilityController.setVisibility(N.horizontal),this._scrollByPage=N.scrollByPage}}class B extends m{constructor(N,j,me){const ce=N.getScrollDimensions(),he=N.getCurrentScrollPosition();if(super({lazyRender:j.lazyRender,host:me,scrollbarState:new S.m(j.verticalHasArrows?j.arrowSize:0,j.vertical===2?0:j.verticalScrollbarSize,0,ce.height,ce.scrollHeight,he.scrollTop),visibility:j.vertical,extraScrollbarClassName:"vertical",scrollable:N,scrollByPage:j.scrollByPage}),j.verticalHasArrows){const Le=(j.arrowSize-I)/2,Y=(j.verticalScrollbarSize-I)/2;this._createArrow({className:"scra",icon:D.W.scrollbarButtonUp,top:Le,left:Y,bottom:void 0,right:void 0,bgWidth:j.verticalScrollbarSize,bgHeight:j.arrowSize,onActivate:()=>this._host.onMouseWheel(new P.$(null,0,1))}),this._createArrow({className:"scra",icon:D.W.scrollbarButtonDown,top:void 0,left:Y,bottom:Le,right:void 0,bgWidth:j.verticalScrollbarSize,bgHeight:j.arrowSize,onActivate:()=>this._host.onMouseWheel(new P.$(null,0,-1))})}this._createSlider(0,Math.floor((j.verticalScrollbarSize-j.verticalSliderSize)/2),j.verticalSliderSize,void 0)}_updateSlider(N,j){this.slider.setHeight(N),this.slider.setTop(j)}_renderDomNode(N,j){this.domNode.setWidth(j),this.domNode.setHeight(N),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(N){return this._shouldRender=this._onElementScrollSize(N.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(N.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(N.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(N,j){return j}_sliderPointerPosition(N){return N.pageY}_sliderOrthogonalPointerPosition(N){return N.pageX}_updateScrollbarSize(N){this.slider.setWidth(N)}writeScrollPosition(N,j){N.scrollTop=j}updateOptions(N){this.updateScrollbarSize(N.vertical===2?0:N.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(N.vertical),this._scrollByPage=N.scrollByPage}}var R=c(56491),z=c(1822);const W=500,$=50,Q=!0;class q{constructor(N,j,me){this.timestamp=N,this.deltaX=j,this.deltaY=me,this.score=0}}class ne{static{this.INSTANCE=new ne}constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let N=1,j=0,me=1,ce=this._rear;do{const he=ce===this._front?N:Math.pow(2,-me);if(N-=he,j+=this._memory[ce].score*he,ce===this._front)break;ce=(this._capacity+ce-1)%this._capacity,me++}while(!0);return j<=.5}acceptStandardWheelEvent(N){if(u.H8){const j=G.zk(N.browserEvent),me=(0,u.pR)(j);this.accept(Date.now(),N.deltaX*me,N.deltaY*me)}else this.accept(Date.now(),N.deltaX,N.deltaY)}accept(N,j,me){let ce=null;const he=new q(N,j,me);this._front===-1&&this._rear===-1?(this._memory[0]=he,this._front=0,this._rear=0):(ce=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=he),he.score=this._computeScore(he,ce)}_computeScore(N,j){if(Math.abs(N.deltaX)>0&&Math.abs(N.deltaY)>0)return 1;let me=.5;if((!this._isAlmostInt(N.deltaX)||!this._isAlmostInt(N.deltaY))&&(me+=.25),j){const ce=Math.abs(N.deltaX),he=Math.abs(N.deltaY),Le=Math.abs(j.deltaX),Y=Math.abs(j.deltaY),ae=Math.max(Math.min(ce,Le),1),Ce=Math.max(Math.min(he,Y),1),Pe=Math.max(ce,Le),ye=Math.max(he,Y);Pe%ae===0&&ye%Ce===0&&(me-=.5)}return Math.min(Math.max(me,0),1)}_isAlmostInt(N){return Math.abs(Math.round(N)-N)<.01}}class ve extends w.x{get options(){return this._options}constructor(N,j,me){super(),this._onScroll=this._register(new R.vl),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new R.vl),N.style.overflow="hidden",this._options=K(j),this._scrollable=me,this._register(this._scrollable.onScroll(he=>{this._onWillScroll.fire(he),this._onDidScroll(he),this._onScroll.fire(he)}));const ce={onMouseWheel:he=>this._onMouseWheel(he),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new B(this._scrollable,this._options,ce)),this._horizontalScrollbar=this._register(new E(this._scrollable,this._options,ce)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(N),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=(0,U.Z)(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=(0,U.Z)(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=(0,U.Z)(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,he=>this._onMouseOver(he)),this.onmouseleave(this._listenOnDomNode,he=>this._onMouseLeave(he)),this._hideTimeout=this._register(new O.pc),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=(0,C.AS)(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(N){this._verticalScrollbar.delegatePointerDown(N)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(N){this._scrollable.setScrollDimensions(N,!1)}updateClassName(N){this._options.className=N,_.zx&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(N){typeof N.handleMouseWheel<"u"&&(this._options.handleMouseWheel=N.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof N.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=N.mouseWheelScrollSensitivity),typeof N.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=N.fastScrollSensitivity),typeof N.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=N.scrollPredominantAxis),typeof N.horizontal<"u"&&(this._options.horizontal=N.horizontal),typeof N.vertical<"u"&&(this._options.vertical=N.vertical),typeof N.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=N.horizontalScrollbarSize),typeof N.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=N.verticalScrollbarSize),typeof N.scrollByPage<"u"&&(this._options.scrollByPage=N.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(N){this._onMouseWheel(new P.$(N))}_setListeningToMouseWheel(N){if(this._mouseWheelToDispose.length>0!==N&&(this._mouseWheelToDispose=(0,C.AS)(this._mouseWheelToDispose),N)){const me=ce=>{this._onMouseWheel(new P.$(ce))};this._mouseWheelToDispose.push(G.ko(this._listenOnDomNode,G.Bx.MOUSE_WHEEL,me,{passive:!1}))}}_onMouseWheel(N){if(N.browserEvent?.defaultPrevented)return;const j=ne.INSTANCE;Q&&j.acceptStandardWheelEvent(N);let me=!1;if(N.deltaY||N.deltaX){let he=N.deltaY*this._options.mouseWheelScrollSensitivity,Le=N.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&Le+he===0?Le=he=0:Math.abs(he)>=Math.abs(Le)?Le=0:he=0),this._options.flipAxes&&([he,Le]=[Le,he]);const Y=!_.zx&&N.browserEvent&&N.browserEvent.shiftKey;(this._options.scrollYToX||Y)&&!Le&&(Le=he,he=0),N.browserEvent&&N.browserEvent.altKey&&(Le=Le*this._options.fastScrollSensitivity,he=he*this._options.fastScrollSensitivity);const ae=this._scrollable.getFutureScrollPosition();let Ce={};if(he){const Pe=$*he,ye=ae.scrollTop-(Pe<0?Math.floor(Pe):Math.ceil(Pe));this._verticalScrollbar.writeScrollPosition(Ce,ye)}if(Le){const Pe=$*Le,ye=ae.scrollLeft-(Pe<0?Math.floor(Pe):Math.ceil(Pe));this._horizontalScrollbar.writeScrollPosition(Ce,ye)}Ce=this._scrollable.validateScrollPosition(Ce),(ae.scrollLeft!==Ce.scrollLeft||ae.scrollTop!==Ce.scrollTop)&&(Q&&this._options.mouseWheelSmoothScroll&&j.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(Ce):this._scrollable.setScrollPositionNow(Ce),me=!0)}let ce=me;!ce&&this._options.alwaysConsumeMouseWheel&&(ce=!0),!ce&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(ce=!0),ce&&(N.preventDefault(),N.stopPropagation())}_onDidScroll(N){this._shouldRender=this._horizontalScrollbar.onDidScroll(N)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(N)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const N=this._scrollable.getCurrentScrollPosition(),j=N.scrollTop>0,me=N.scrollLeft>0,ce=me?" left":"",he=j?" top":"",Le=me||j?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${ce}`),this._topShadowDomNode.setClassName(`shadow${he}`),this._topLeftShadowDomNode.setClassName(`shadow${Le}${he}${ce}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(N){this._mouseIsOver=!1,this._hide()}_onMouseOver(N){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),W)}}class Re extends ve{constructor(N,j){j=j||{},j.mouseWheelSmoothScroll=!1;const me=new z.yE({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:ce=>G.PG(G.zk(N),ce)});super(N,j,me),this._register(me)}setScrollPosition(N){this._scrollable.setScrollPositionNow(N)}}class Ae extends ve{constructor(N,j,me){super(N,j,me)}setScrollPosition(N){N.reuseAnimation?this._scrollable.setScrollPositionSmooth(N,N.reuseAnimation):this._scrollable.setScrollPositionNow(N)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class re extends ve{constructor(N,j){j=j||{},j.mouseWheelSmoothScroll=!1;const me=new z.yE({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:ce=>G.PG(G.zk(N),ce)});super(N,j,me),this._register(me),this._element=N,this._register(this.onScroll(ce=>{ce.scrollTopChanged&&(this._element.scrollTop=ce.scrollTop),ce.scrollLeftChanged&&(this._element.scrollLeft=ce.scrollLeft)})),this.scanDomNode()}setScrollPosition(N){this._scrollable.setScrollPositionNow(N)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function K(F){const N={lazyRender:typeof F.lazyRender<"u"?F.lazyRender:!1,className:typeof F.className<"u"?F.className:"",useShadows:typeof F.useShadows<"u"?F.useShadows:!0,handleMouseWheel:typeof F.handleMouseWheel<"u"?F.handleMouseWheel:!0,flipAxes:typeof F.flipAxes<"u"?F.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof F.consumeMouseWheelIfScrollbarIsNeeded<"u"?F.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof F.alwaysConsumeMouseWheel<"u"?F.alwaysConsumeMouseWheel:!1,scrollYToX:typeof F.scrollYToX<"u"?F.scrollYToX:!1,mouseWheelScrollSensitivity:typeof F.mouseWheelScrollSensitivity<"u"?F.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof F.fastScrollSensitivity<"u"?F.fastScrollSensitivity:5,scrollPredominantAxis:typeof F.scrollPredominantAxis<"u"?F.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof F.mouseWheelSmoothScroll<"u"?F.mouseWheelSmoothScroll:!0,arrowSize:typeof F.arrowSize<"u"?F.arrowSize:11,listenOnDomNode:typeof F.listenOnDomNode<"u"?F.listenOnDomNode:null,horizontal:typeof F.horizontal<"u"?F.horizontal:1,horizontalScrollbarSize:typeof F.horizontalScrollbarSize<"u"?F.horizontalScrollbarSize:10,horizontalSliderSize:typeof F.horizontalSliderSize<"u"?F.horizontalSliderSize:0,horizontalHasArrows:typeof F.horizontalHasArrows<"u"?F.horizontalHasArrows:!1,vertical:typeof F.vertical<"u"?F.vertical:1,verticalScrollbarSize:typeof F.verticalScrollbarSize<"u"?F.verticalScrollbarSize:10,verticalHasArrows:typeof F.verticalHasArrows<"u"?F.verticalHasArrows:!1,verticalSliderSize:typeof F.verticalSliderSize<"u"?F.verticalSliderSize:0,scrollByPage:typeof F.scrollByPage<"u"?F.scrollByPage:!1};return N.horizontalSliderSize=typeof F.horizontalSliderSize<"u"?F.horizontalSliderSize:N.horizontalScrollbarSize,N.verticalSliderSize=typeof F.verticalSliderSize<"u"?F.verticalSliderSize:N.verticalScrollbarSize,_.zx&&(N.className+=" mac"),N}},13522:(Mt,He,c)=>{c.d(He,{q:()=>u});const u={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1}},13656:(Mt,He,c)=>{c.d(He,{Nt:()=>U,Rh:()=>O});var u=c(45573),G=c(81545);const U=(0,G.u1)("accessibilitySignalService"),P=Symbol("AcknowledgeDocCommentsToken");class M{static register(I){return new M(I.fileName)}static{this.error=M.register({fileName:"error.mp3"})}static{this.warning=M.register({fileName:"warning.mp3"})}static{this.success=M.register({fileName:"success.mp3"})}static{this.foldedArea=M.register({fileName:"foldedAreas.mp3"})}static{this.break=M.register({fileName:"break.mp3"})}static{this.quickFixes=M.register({fileName:"quickFixes.mp3"})}static{this.taskCompleted=M.register({fileName:"taskCompleted.mp3"})}static{this.taskFailed=M.register({fileName:"taskFailed.mp3"})}static{this.terminalBell=M.register({fileName:"terminalBell.mp3"})}static{this.diffLineInserted=M.register({fileName:"diffLineInserted.mp3"})}static{this.diffLineDeleted=M.register({fileName:"diffLineDeleted.mp3"})}static{this.diffLineModified=M.register({fileName:"diffLineModified.mp3"})}static{this.chatRequestSent=M.register({fileName:"chatRequestSent.mp3"})}static{this.chatResponseReceived1=M.register({fileName:"chatResponseReceived1.mp3"})}static{this.chatResponseReceived2=M.register({fileName:"chatResponseReceived2.mp3"})}static{this.chatResponseReceived3=M.register({fileName:"chatResponseReceived3.mp3"})}static{this.chatResponseReceived4=M.register({fileName:"chatResponseReceived4.mp3"})}static{this.clear=M.register({fileName:"clear.mp3"})}static{this.save=M.register({fileName:"save.mp3"})}static{this.format=M.register({fileName:"format.mp3"})}static{this.voiceRecordingStarted=M.register({fileName:"voiceRecordingStarted.mp3"})}static{this.voiceRecordingStopped=M.register({fileName:"voiceRecordingStopped.mp3"})}static{this.progress=M.register({fileName:"progress.mp3"})}constructor(I){this.fileName=I}}class w{constructor(I){this.randomOneOf=I}}class O{constructor(I,b,C,v,_,d){this.sound=I,this.name=b,this.legacySoundSettingsKey=C,this.settingsKey=v,this.legacyAnnouncementSettingsKey=_,this.announcementMessage=d}static{this._signals=new Set}static register(I){const b=new w("randomOneOf"in I.sound?I.sound.randomOneOf:[I.sound]),C=new O(b,I.name,I.legacySoundSettingsKey,I.settingsKey,I.legacyAnnouncementSettingsKey,I.announcementMessage);return O._signals.add(C),C}static{this.errorAtPosition=O.register({name:(0,u.kg)("accessibilitySignals.positionHasError.name","Error at Position"),sound:M.error,announcementMessage:(0,u.kg)("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"})}static{this.warningAtPosition=O.register({name:(0,u.kg)("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:M.warning,announcementMessage:(0,u.kg)("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"})}static{this.errorOnLine=O.register({name:(0,u.kg)("accessibilitySignals.lineHasError.name","Error on Line"),sound:M.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:(0,u.kg)("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"})}static{this.warningOnLine=O.register({name:(0,u.kg)("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:M.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:(0,u.kg)("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"})}static{this.foldedArea=O.register({name:(0,u.kg)("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:M.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:(0,u.kg)("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"})}static{this.break=O.register({name:(0,u.kg)("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:M.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:(0,u.kg)("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"})}static{this.inlineSuggestion=O.register({name:(0,u.kg)("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:M.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"})}static{this.terminalQuickFix=O.register({name:(0,u.kg)("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:M.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:(0,u.kg)("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"})}static{this.onDebugBreak=O.register({name:(0,u.kg)("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:M.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:(0,u.kg)("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"})}static{this.noInlayHints=O.register({name:(0,u.kg)("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:M.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:(0,u.kg)("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"})}static{this.taskCompleted=O.register({name:(0,u.kg)("accessibilitySignals.taskCompleted","Task Completed"),sound:M.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:(0,u.kg)("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"})}static{this.taskFailed=O.register({name:(0,u.kg)("accessibilitySignals.taskFailed","Task Failed"),sound:M.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:(0,u.kg)("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"})}static{this.terminalCommandFailed=O.register({name:(0,u.kg)("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:M.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:(0,u.kg)("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"})}static{this.terminalCommandSucceeded=O.register({name:(0,u.kg)("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:M.success,announcementMessage:(0,u.kg)("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"})}static{this.terminalBell=O.register({name:(0,u.kg)("accessibilitySignals.terminalBell","Terminal Bell"),sound:M.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:(0,u.kg)("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"})}static{this.notebookCellCompleted=O.register({name:(0,u.kg)("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:M.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:(0,u.kg)("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"})}static{this.notebookCellFailed=O.register({name:(0,u.kg)("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:M.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:(0,u.kg)("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"})}static{this.diffLineInserted=O.register({name:(0,u.kg)("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:M.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"})}static{this.diffLineDeleted=O.register({name:(0,u.kg)("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:M.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"})}static{this.diffLineModified=O.register({name:(0,u.kg)("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:M.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"})}static{this.chatRequestSent=O.register({name:(0,u.kg)("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:M.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:(0,u.kg)("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"})}static{this.chatResponseReceived=O.register({name:(0,u.kg)("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[M.chatResponseReceived1,M.chatResponseReceived2,M.chatResponseReceived3,M.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"})}static{this.progress=O.register({name:(0,u.kg)("accessibilitySignals.progress","Progress"),sound:M.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:(0,u.kg)("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"})}static{this.clear=O.register({name:(0,u.kg)("accessibilitySignals.clear","Clear"),sound:M.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:(0,u.kg)("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"})}static{this.save=O.register({name:(0,u.kg)("accessibilitySignals.save","Save"),sound:M.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:(0,u.kg)("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"})}static{this.format=O.register({name:(0,u.kg)("accessibilitySignals.format","Format"),sound:M.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:(0,u.kg)("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"})}static{this.voiceRecordingStarted=O.register({name:(0,u.kg)("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:M.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"})}static{this.voiceRecordingStopped=O.register({name:(0,u.kg)("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:M.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"})}}},13697:(Mt,He,c)=>{c.d(He,{f:()=>u});var u;(function(G){function U(W){return W&&typeof W=="object"&&typeof W[Symbol.iterator]=="function"}G.is=U;const P=Object.freeze([]);function M(){return P}G.empty=M;function*w(W){yield W}G.single=w;function O(W){return U(W)?W:w(W)}G.wrap=O;function A(W){return W||P}G.from=A;function*I(W){for(let $=W.length-1;$>=0;$--)yield W[$]}G.reverse=I;function b(W){return!W||W[Symbol.iterator]().next().done===!0}G.isEmpty=b;function C(W){return W[Symbol.iterator]().next().value}G.first=C;function v(W,$){let Q=0;for(const q of W)if($(q,Q++))return!0;return!1}G.some=v;function _(W,$){for(const Q of W)if($(Q))return Q}G.find=_;function*d(W,$){for(const Q of W)$(Q)&&(yield Q)}G.filter=d;function*m(W,$){let Q=0;for(const q of W)yield $(q,Q++)}G.map=m;function*S(W,$){let Q=0;for(const q of W)yield*$(q,Q++)}G.flatMap=S;function*D(...W){for(const $ of W)yield*$}G.concat=D;function E(W,$,Q){let q=Q;for(const ne of W)q=$(q,ne);return q}G.reduce=E;function*B(W,$,Q=W.length){for($<0&&($+=W.length),Q<0?Q+=W.length:Q>W.length&&(Q=W.length);$<Q;$++)yield W[$]}G.slice=B;function R(W,$=Number.POSITIVE_INFINITY){const Q=[];if($===0)return[Q,W];const q=W[Symbol.iterator]();for(let ne=0;ne<$;ne++){const ve=q.next();if(ve.done)return[Q,G.empty()];Q.push(ve.value)}return[Q,{[Symbol.iterator](){return q}}]}G.consume=R;async function z(W){const $=[];for await(const Q of W)$.push(Q);return Promise.resolve($)}G.asyncToArray=z})(u||(u={}))},13716:(Mt,He,c)=>{c.d(He,{H:()=>G});var u=c(87856);function G(U,P){const M=globalThis.MonacoEnvironment;if(M?.createTrustedTypesPolicy)try{return M.createTrustedTypesPolicy(U,P)}catch(w){(0,u.dz)(w);return}try{return globalThis.trustedTypes?.createPolicy(U,P)}catch(w){(0,u.dz)(w);return}}},14318:(Mt,He,c)=>{c.d(He,{aQ:()=>ce,nr:()=>he,Sx:()=>Ke,po:()=>me,tj:()=>j});var u=c(31938),G=c(38594),U=c(34920),P=c(56491),M=c(9709),w=c(71269);class O{constructor(Ue,x,it,Ze,_t){this._parsedThemeRuleBrand=void 0,this.token=Ue,this.index=x,this.fontStyle=it,this.foreground=Ze,this.background=_t}}function A(qe){if(!qe||!Array.isArray(qe))return[];const Ue=[];let x=0;for(let it=0,Ze=qe.length;it<Ze;it++){const _t=qe[it];let ot=-1;if(typeof _t.fontStyle=="string"){ot=0;const Rt=_t.fontStyle.split(" ");for(let at=0,Xe=Rt.length;at<Xe;at++)switch(Rt[at]){case"italic":ot=ot|1;break;case"bold":ot=ot|2;break;case"underline":ot=ot|4;break;case"strikethrough":ot=ot|8;break}}let Pt=null;typeof _t.foreground=="string"&&(Pt=_t.foreground);let Wt=null;typeof _t.background=="string"&&(Wt=_t.background),Ue[x++]=new O(_t.token||"",it,ot,Pt,Wt)}return Ue}function I(qe,Ue){qe.sort((at,Xe)=>{const pe=m(at.token,Xe.token);return pe!==0?pe:at.index-Xe.index});let x=0,it="000000",Ze="ffffff";for(;qe.length>=1&&qe[0].token==="";){const at=qe.shift();at.fontStyle!==-1&&(x=at.fontStyle),at.foreground!==null&&(it=at.foreground),at.background!==null&&(Ze=at.background)}const _t=new C;for(const at of Ue)_t.getId(at);const ot=_t.getId(it),Pt=_t.getId(Ze),Wt=new S(x,ot,Pt),Rt=new D(Wt);for(let at=0,Xe=qe.length;at<Xe;at++){const pe=qe[at];Rt.insert(pe.token,pe.fontStyle,_t.getId(pe.foreground),_t.getId(pe.background))}return new v(_t,Rt)}const b=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class C{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(Ue){if(Ue===null)return 0;const x=Ue.match(b);if(!x)throw new Error("Illegal value for token color: "+Ue);Ue=x[1].toUpperCase();let it=this._color2id.get(Ue);return it||(it=++this._lastColorId,this._color2id.set(Ue,it),this._id2color[it]=U.Q1.fromHex("#"+Ue),it)}getColorMap(){return this._id2color.slice(0)}}class v{static createFromRawTokenTheme(Ue,x){return this.createFromParsedTokenTheme(A(Ue),x)}static createFromParsedTokenTheme(Ue,x){return I(Ue,x)}constructor(Ue,x){this._colorMap=Ue,this._root=x,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(Ue){return this._root.match(Ue)}match(Ue,x){let it=this._cache.get(x);if(typeof it>"u"){const Ze=this._match(x),_t=d(x);it=(Ze.metadata|_t<<8)>>>0,this._cache.set(x,it)}return(it|Ue<<0)>>>0}}const _=/\b(comment|string|regex|regexp)\b/;function d(qe){const Ue=qe.match(_);if(!Ue)return 0;switch(Ue[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function m(qe,Ue){return qe<Ue?-1:qe>Ue?1:0}class S{constructor(Ue,x,it){this._themeTrieElementRuleBrand=void 0,this._fontStyle=Ue,this._foreground=x,this._background=it,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new S(this._fontStyle,this._foreground,this._background)}acceptOverwrite(Ue,x,it){Ue!==-1&&(this._fontStyle=Ue),x!==0&&(this._foreground=x),it!==0&&(this._background=it),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class D{constructor(Ue){this._themeTrieElementBrand=void 0,this._mainRule=Ue,this._children=new Map}match(Ue){if(Ue==="")return this._mainRule;const x=Ue.indexOf(".");let it,Ze;x===-1?(it=Ue,Ze=""):(it=Ue.substring(0,x),Ze=Ue.substring(x+1));const _t=this._children.get(it);return typeof _t<"u"?_t.match(Ze):this._mainRule}insert(Ue,x,it,Ze){if(Ue===""){this._mainRule.acceptOverwrite(x,it,Ze);return}const _t=Ue.indexOf(".");let ot,Pt;_t===-1?(ot=Ue,Pt=""):(ot=Ue.substring(0,_t),Pt=Ue.substring(_t+1));let Wt=this._children.get(ot);typeof Wt>"u"&&(Wt=new D(this._mainRule.clone()),this._children.set(ot,Wt)),Wt.insert(Pt,x,it,Ze)}}function E(qe){const Ue=[];for(let x=1,it=qe.length;x<it;x++){const Ze=qe[x];Ue[x]=`.mtk${x} { color: ${Ze}; }`}return Ue.push(".mtki { font-style: italic; }"),Ue.push(".mtkb { font-weight: bold; }"),Ue.push(".mtku { text-decoration: underline; text-underline-position: under; }"),Ue.push(".mtks { text-decoration: line-through; }"),Ue.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),Ue.join(`
`)}var B=c(54656),R=c(19867);const z={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[R.YtV]:"#FFFFFE",[R.By2]:"#000000",[R.tan]:"#E5EBF1",[B.vV]:"#D3D3D3",[B.H0]:"#939393",[R.QwA]:"#ADD6FF4D"}},W={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[R.YtV]:"#1E1E1E",[R.By2]:"#D4D4D4",[R.tan]:"#3A3D41",[B.vV]:"#404040",[B.H0]:"#707070",[R.QwA]:"#ADD6FF26"}},$={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[R.YtV]:"#000000",[R.By2]:"#FFFFFF",[B.vV]:"#FFFFFF",[B.H0]:"#FFFFFF"}},Q={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[R.YtV]:"#FFFFFF",[R.By2]:"#292929",[B.vV]:"#292929",[B.H0]:"#292929"}};var q=c(39642),ne=c(41403),ve=c(60599),Re=c(64246),Ae=c(42640),re=c(34021);function K(qe){const Ue=new ve.Cm,x=Ue.add(new P.vl),it=(0,re.HT)();return Ue.add(it.onDidChange(()=>x.fire())),qe&&Ue.add(qe.onDidProductIconThemeChange(()=>x.fire())),{dispose:()=>Ue.dispose(),onDidChange:x.event,getCSS(){const Ze=qe?qe.getProductIconTheme():new F,_t={},ot=[],Pt=[];for(const Wt of it.getIcons()){const Rt=Ze.getIcon(Wt);if(!Rt)continue;const at=Rt.font,Xe=`--vscode-icon-${Wt.id}-font-family`,pe=`--vscode-icon-${Wt.id}-content`;at?(_t[at.id]=at.definition,Pt.push(`${Xe}: ${(0,u.yt)(at.id)};`,`${pe}: '${Rt.fontCharacter}';`),ot.push(`.codicon-${Wt.id}:before { content: '${Rt.fontCharacter}'; font-family: ${(0,u.yt)(at.id)}; }`)):(Pt.push(`${pe}: '${Rt.fontCharacter}'; ${Xe}: 'codicon';`),ot.push(`.codicon-${Wt.id}:before { content: '${Rt.fontCharacter}'; }`))}for(const Wt in _t){const Rt=_t[Wt],at=Rt.weight?`font-weight: ${Rt.weight};`:"",Xe=Rt.style?`font-style: ${Rt.style};`:"",pe=Rt.src.map(te=>`${(0,u.Tf)(te.location)} format('${te.format}')`).join(", ");ot.push(`@font-face { src: ${pe}; font-family: ${(0,u.yt)(Wt)};${at}${Xe} font-display: block; }`)}return ot.push(`:root { ${Pt.join(" ")} }`),ot.join(`
`)}}}class F{getIcon(Ue){const x=(0,re.HT)();let it=Ue.defaults;for(;Ae.L.isThemeIcon(it);){const Ze=x.getIcon(it.id);if(!Ze)return;it=Ze.defaults}return it}}var N=c(42008);const j="vs",me="vs-dark",ce="hc-black",he="hc-light",Le=q.O.as(R.FdG.ColorContribution),Y=q.O.as(ne.Fd.ThemingContribution);class ae{constructor(Ue,x){this.semanticHighlighting=!1,this.themeData=x;const it=x.base;Ue.length>0?(Ce(Ue)?this.id=Ue:this.id=it+" "+Ue,this.themeName=Ue):(this.id=it,this.themeName=it),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const Ue=new Map;for(const x in this.themeData.colors)Ue.set(x,U.Q1.fromHex(this.themeData.colors[x]));if(this.themeData.inherit){const x=Pe(this.themeData.base);for(const it in x.colors)Ue.has(it)||Ue.set(it,U.Q1.fromHex(x.colors[it]))}this.colors=Ue}return this.colors}getColor(Ue,x){const it=this.getColors().get(Ue);if(it)return it;if(x!==!1)return this.getDefault(Ue)}getDefault(Ue){let x=this.defaultColors[Ue];return x||(x=Le.resolveDefaultColor(Ue,this),this.defaultColors[Ue]=x,x)}defines(Ue){return this.getColors().has(Ue)}get type(){switch(this.base){case j:return Re.zM.LIGHT;case ce:return Re.zM.HIGH_CONTRAST_DARK;case he:return Re.zM.HIGH_CONTRAST_LIGHT;default:return Re.zM.DARK}}get tokenTheme(){if(!this._tokenTheme){let Ue=[],x=[];if(this.themeData.inherit){const _t=Pe(this.themeData.base);Ue=_t.rules,_t.encodedTokensColors&&(x=_t.encodedTokensColors)}const it=this.themeData.colors["editor.foreground"],Ze=this.themeData.colors["editor.background"];if(it||Ze){const _t={token:""};it&&(_t.foreground=it),Ze&&(_t.background=Ze),Ue.push(_t)}Ue=Ue.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(x=this.themeData.encodedTokensColors),this._tokenTheme=v.createFromRawTokenTheme(Ue,x)}return this._tokenTheme}getTokenStyleMetadata(Ue,x,it){const _t=this.tokenTheme._match([Ue].concat(x).join(".")).metadata,ot=w.x.getForeground(_t),Pt=w.x.getFontStyle(_t);return{foreground:ot,italic:!!(Pt&1),bold:!!(Pt&2),underline:!!(Pt&4),strikethrough:!!(Pt&8)}}}function Ce(qe){return qe===j||qe===me||qe===ce||qe===he}function Pe(qe){switch(qe){case j:return z;case me:return W;case ce:return $;case he:return Q}}function ye(qe){const Ue=Pe(qe);return new ae(qe,Ue)}class Ke extends ve.jG{constructor(){super(),this._onColorThemeChange=this._register(new P.vl),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new P.vl),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new F,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(j,ye(j)),this._knownThemes.set(me,ye(me)),this._knownThemes.set(ce,ye(ce)),this._knownThemes.set(he,ye(he));const Ue=this._register(K(this));this._codiconCSS=Ue.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(j),this._onOSSchemeChanged(),this._register(Ue.onDidChange(()=>{this._codiconCSS=Ue.getCSS(),this._updateCSS()})),(0,G.Dy)(N.G,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(Ue){return u.Cl(Ue)?this._registerShadowDomContainer(Ue):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=u.li(void 0,Ue=>{Ue.className="monaco-colors",Ue.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),ve.jG.None}_registerShadowDomContainer(Ue){const x=u.li(Ue,it=>{it.className="monaco-colors",it.textContent=this._allCSS});return this._styleElements.push(x),{dispose:()=>{for(let it=0;it<this._styleElements.length;it++)if(this._styleElements[it]===x){this._styleElements.splice(it,1);return}}}}defineTheme(Ue,x){if(!/^[a-z0-9\-]+$/i.test(Ue))throw new Error("Illegal theme name!");if(!Ce(x.base)&&!Ce(Ue))throw new Error("Illegal theme base!");this._knownThemes.set(Ue,new ae(Ue,x)),Ce(Ue)&&this._knownThemes.forEach(it=>{it.base===Ue&&it.notifyBaseUpdated()}),this._theme.themeName===Ue&&this.setTheme(Ue)}getColorTheme(){return this._theme}setColorMapOverride(Ue){this._colorMapOverride=Ue,this._updateThemeOrColorMap()}setTheme(Ue){let x;this._knownThemes.has(Ue)?x=this._knownThemes.get(Ue):x=this._knownThemes.get(j),this._updateActualTheme(x)}_updateActualTheme(Ue){!Ue||this._theme===Ue||(this._theme=Ue,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const Ue=N.G.matchMedia("(forced-colors: active)").matches;if(Ue!==(0,Re.Bb)(this._theme.type)){let x;(0,Re.HD)(this._theme.type)?x=Ue?ce:me:x=Ue?he:j,this._updateActualTheme(this._knownThemes.get(x))}}}setAutoDetectHighContrast(Ue){this._autoDetectHighContrast=Ue,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const Ue=[],x={},it={addRule:ot=>{x[ot]||(Ue.push(ot),x[ot]=!0)}};Y.getThemingParticipants().forEach(ot=>ot(this._theme,it,this._environment));const Ze=[];for(const ot of Le.getColors()){const Pt=this._theme.getColor(ot.id,!0);Pt&&Ze.push(`${(0,R.Bbc)(ot.id)}: ${Pt.toString()};`)}it.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${Ze.join(`
`)} }`);const _t=this._colorMapOverride||this._theme.tokenTheme.getColorMap();it.addRule(E(_t)),this._themeCSS=Ue.join(`
`),this._updateCSS(),M.dG.setColorMap(_t),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(Ue=>Ue.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}},14932:(Mt,He,c)=>{c.d(He,{T:()=>M,v:()=>w});var u=c(77105),G=c(13429),U=c(92998),P=c(3320);class M{static indent(A,I,b){if(I===null||b===null)return[];const C=[];for(let v=0,_=b.length;v<_;v++)C[v]=new u.Y(b[v],{isUnshift:!1,tabSize:A.tabSize,indentSize:A.indentSize,insertSpaces:A.insertSpaces,useTabStops:A.useTabStops,autoIndent:A.autoIndent},A.languageConfigurationService);return C}static outdent(A,I,b){const C=[];for(let v=0,_=b.length;v<_;v++)C[v]=new u.Y(b[v],{isUnshift:!0,tabSize:A.tabSize,indentSize:A.indentSize,insertSpaces:A.insertSpaces,useTabStops:A.useTabStops,autoIndent:A.autoIndent},A.languageConfigurationService);return C}static paste(A,I,b,C,v,_){return P.Dr.getEdits(A,I,b,C,v,_)}static tab(A,I,b){return P.h0.getCommands(A,I,b)}static compositionType(A,I,b,C,v,_,d,m){return P.YA.getEdits(A,I,b,C,v,_,d,m)}static compositionEndWithInterceptors(A,I,b,C,v,_){if(!C)return null;let d=null;for(const B of C)if(d===null)d=B.insertedText;else if(d!==B.insertedText)return null;if(!d||d.length!==1)return null;const m=d;let S=!1;for(const B of C)if(B.deletedText.length!==0){S=!0;break}if(S){if(!(0,P.ey)(I,m)||!I.surroundingPairs.hasOwnProperty(m))return null;const B=(0,U.vG)(m);for(const W of C)if(W.deletedSelectionStart!==0||W.deletedSelectionEnd!==W.deletedText.length||/^[ \t]+$/.test(W.deletedText)||B&&(0,U.vG)(W.deletedText))return null;const R=[];for(const W of v){if(!W.isEmpty())return null;R.push(W.getPosition())}if(R.length!==C.length)return null;const z=[];for(let W=0,$=R.length;W<$;W++)z.push(new G.y(R[W],C[W].deletedText,I.surroundingPairs[m]));return new U.vY(4,z,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const D=P.K4.getEdits(I,b,v,_,m);if(D!==void 0)return D;const E=P.oi.getEdits(I,b,v,m,!0,!1);return E!==void 0?E:null}static typeWithInterceptors(A,I,b,C,v,_,d){const m=P.AO.getEdits(b,C,v,d,A);if(m!==void 0)return m;const S=P.dU.getEdits(b,C,v,d,A);if(S!==void 0)return S;const D=P.sx.getEdits(I,b,C,v,_,d);if(D!==void 0)return D;const E=P.oi.getEdits(b,C,v,d,!1,A);if(E!==void 0)return E;const B=P.is.getEdits(b,C,v,d,A);if(B!==void 0)return B;const R=P.kr.getEdits(I,b,C,v,d,A);return R!==void 0?R:P.Ls.getEdits(I,v,d)}static typeWithoutInterceptors(A,I,b,C,v){return P.UN.getEdits(A,C,v)}}class w{constructor(A,I,b,C,v,_){this.deletedText=A,this.deletedSelectionStart=I,this.deletedSelectionEnd=b,this.insertedText=C,this.insertedSelectionStart=v,this.insertedSelectionEnd=_}}},14998:(Mt,He,c)=>{c.d(He,{GM:()=>E,KL:()=>R,Kl:()=>v,Ob:()=>_,Ou:()=>D,XT:()=>m,Zb:()=>B,Zw:()=>d,bk:()=>S,dv:()=>C,wp:()=>z});var u=c(67538),G=c(42640),U=c(87451),P=c(45573),M=c(19867),w=c(34021);const O=(0,M.x1A)("diffEditor.move.border","#8b8b8b9c",(0,P.kg)("diffEditor.move.border","The border color for text that got moved in the diff editor.")),A=(0,M.x1A)("diffEditor.moveActive.border","#FFA500",(0,P.kg)("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor.")),I=(0,M.x1A)("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},(0,P.kg)("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets.")),b=(0,w.pU)("diff-insert",u.W.add,(0,P.kg)("diffInsertIcon","Line decoration for inserts in the diff editor.")),C=(0,w.pU)("diff-remove",u.W.remove,(0,P.kg)("diffRemoveIcon","Line decoration for removals in the diff editor.")),v=U.kI.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+G.L.asClassName(b),marginClassName:"gutter-insert"}),_=U.kI.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+G.L.asClassName(C),marginClassName:"gutter-delete"}),d=U.kI.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),m=U.kI.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),S=U.kI.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),D=U.kI.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),E=U.kI.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),B=U.kI.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),R=U.kI.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),z=U.kI.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"})},15625:(Mt,He,c)=>{c.d(He,{Z:()=>b});var u=c(38594),G=c(64840),U=c(46454),P=c(90692);function M(C){if(C.charCode){const _=String.fromCharCode(C.charCode).toUpperCase();return G.YM.fromString(_)}const v=C.keyCode;if(v===3)return 7;if(u.gm)switch(v){case 59:return 85;case 60:if(P.j9)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(P.zx)return 57;break}else if(u.Tc){if(P.zx&&v===93)return 57;if(!P.zx&&v===92)return 57}return G.uw[v]||0}const w=P.zx?256:2048,O=512,A=1024,I=P.zx?2048:256;class b{constructor(v){this._standardKeyboardEventBrand=!0;const _=v;this.browserEvent=_,this.target=_.target,this.ctrlKey=_.ctrlKey,this.shiftKey=_.shiftKey,this.altKey=_.altKey,this.metaKey=_.metaKey,this.altGraphKey=_.getModifierState?.("AltGraph"),this.keyCode=M(_),this.code=_.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(v){return this._asKeybinding===v}_computeKeybinding(){let v=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(v=this.keyCode);let _=0;return this.ctrlKey&&(_|=w),this.altKey&&(_|=O),this.shiftKey&&(_|=A),this.metaKey&&(_|=I),_|=v,_}_computeKeyCodeChord(){let v=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(v=this.keyCode),new U.dG(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,v)}}},15763:(Mt,He,c)=>{c.r(He),c.d(He,{MirrorModel:()=>_,STOP_SYNC_MODEL_DELTA_TIME_MS:()=>b,WorkerTextModelSyncClient:()=>C,WorkerTextModelSyncServer:()=>v});var u=c(37519),G=c(60599),U=c(37473),P=c(69504),M=c(98414),w=c(5751),O=c(85565),A=c(82895);class I{constructor(m,S,D,E){this._uri=m,this._lines=S,this._eol=D,this._versionId=E,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(m){m.eol&&m.eol!==this._eol&&(this._eol=m.eol,this._lineStarts=null);const S=m.changes;for(const D of S)this._acceptDeleteRange(D.range),this._acceptInsertText(new P.y(D.range.startLineNumber,D.range.startColumn),D.text);this._versionId=m.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const m=this._eol.length,S=this._lines.length,D=new Uint32Array(S);for(let E=0;E<S;E++)D[E]=this._lines[E].length+m;this._lineStarts=new A.N(D)}}_setLineText(m,S){this._lines[m]=S,this._lineStarts&&this._lineStarts.setValue(m,this._lines[m].length+this._eol.length)}_acceptDeleteRange(m){if(m.startLineNumber===m.endLineNumber){if(m.startColumn===m.endColumn)return;this._setLineText(m.startLineNumber-1,this._lines[m.startLineNumber-1].substring(0,m.startColumn-1)+this._lines[m.startLineNumber-1].substring(m.endColumn-1));return}this._setLineText(m.startLineNumber-1,this._lines[m.startLineNumber-1].substring(0,m.startColumn-1)+this._lines[m.endLineNumber-1].substring(m.endColumn-1)),this._lines.splice(m.startLineNumber,m.endLineNumber-m.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(m.startLineNumber,m.endLineNumber-m.startLineNumber)}_acceptInsertText(m,S){if(S.length===0)return;const D=(0,O.uz)(S);if(D.length===1){this._setLineText(m.lineNumber-1,this._lines[m.lineNumber-1].substring(0,m.column-1)+D[0]+this._lines[m.lineNumber-1].substring(m.column-1));return}D[D.length-1]+=this._lines[m.lineNumber-1].substring(m.column-1),this._setLineText(m.lineNumber-1,this._lines[m.lineNumber-1].substring(0,m.column-1)+D[0]);const E=new Uint32Array(D.length-1);for(let B=1;B<D.length;B++)this._lines.splice(m.lineNumber+B-1,0,D[B]),E[B-1]=D[B].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(m.lineNumber,E)}}const b=60*1e3;class C extends G.jG{constructor(m,S,D=!1){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=m,this._modelService=S,!D){const E=new u.vb;E.cancelAndSet(()=>this._checkStopModelSync(),Math.round(b/2)),this._register(E)}}dispose(){for(const m in this._syncedModels)(0,G.AS)(this._syncedModels[m]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(m,S=!1){for(const D of m){const E=D.toString();this._syncedModels[E]||this._beginModelSync(D,S),this._syncedModels[E]&&(this._syncedModelsLastUsedTime[E]=new Date().getTime())}}_checkStopModelSync(){const m=new Date().getTime(),S=[];for(const D in this._syncedModelsLastUsedTime)m-this._syncedModelsLastUsedTime[D]>b&&S.push(D);for(const D of S)this._stopModelSync(D)}_beginModelSync(m,S){const D=this._modelService.getModel(m);if(!D||!S&&D.isTooLargeForSyncing())return;const E=m.toString();this._proxy.$acceptNewModel({url:D.uri.toString(),lines:D.getLinesContent(),EOL:D.getEOL(),versionId:D.getVersionId()});const B=new G.Cm;B.add(D.onDidChangeContent(R=>{this._proxy.$acceptModelChanged(E.toString(),R)})),B.add(D.onWillDispose(()=>{this._stopModelSync(E)})),B.add((0,G.s)(()=>{this._proxy.$acceptRemovedModel(E)})),this._syncedModels[E]=B}_stopModelSync(m){const S=this._syncedModels[m];delete this._syncedModels[m],delete this._syncedModelsLastUsedTime[m],(0,G.AS)(S)}}class v{constructor(){this._models=Object.create(null)}getModel(m){return this._models[m]}getModels(){const m=[];return Object.keys(this._models).forEach(S=>m.push(this._models[S])),m}$acceptNewModel(m){this._models[m.url]=new _(U.r.parse(m.url),m.lines,m.EOL,m.versionId)}$acceptModelChanged(m,S){if(!this._models[m])return;this._models[m].onEvents(S)}$acceptRemovedModel(m){this._models[m]&&delete this._models[m]}}class _ extends I{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(m){const S=[];for(let D=0;D<this._lines.length;D++){const E=this._lines[D],B=this.offsetAt(new P.y(D+1,1)),R=E.matchAll(m);for(const z of R)(z.index||z.index===0)&&(z.index=z.index+B),S.push(z)}return S}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(m){return this._lines[m-1]}getWordAtPosition(m,S){const D=(0,w.Th)(m.column,(0,w.Io)(S),this._lines[m.lineNumber-1],0);return D?new M.Q(m.lineNumber,D.startColumn,m.lineNumber,D.endColumn):null}words(m){const S=this._lines,D=this._wordenize.bind(this);let E=0,B="",R=0,z=[];return{*[Symbol.iterator](){for(;;)if(R<z.length){const W=B.substring(z[R].start,z[R].end);R+=1,yield W}else if(E<S.length)B=S[E],z=D(B,m),R=0,E+=1;else break}}}getLineWords(m,S){const D=this._lines[m-1],E=this._wordenize(D,S),B=[];for(const R of E)B.push({word:D.substring(R.start,R.end),startColumn:R.start+1,endColumn:R.end+1});return B}_wordenize(m,S){const D=[];let E;for(S.lastIndex=0;(E=S.exec(m))&&E[0].length!==0;)D.push({start:E.index,end:E.index+E[0].length});return D}getValueInRange(m){if(m=this._validateRange(m),m.startLineNumber===m.endLineNumber)return this._lines[m.startLineNumber-1].substring(m.startColumn-1,m.endColumn-1);const S=this._eol,D=m.startLineNumber-1,E=m.endLineNumber-1,B=[];B.push(this._lines[D].substring(m.startColumn-1));for(let R=D+1;R<E;R++)B.push(this._lines[R]);return B.push(this._lines[E].substring(0,m.endColumn-1)),B.join(S)}offsetAt(m){return m=this._validatePosition(m),this._ensureLineStarts(),this._lineStarts.getPrefixSum(m.lineNumber-2)+(m.column-1)}positionAt(m){m=Math.floor(m),m=Math.max(0,m),this._ensureLineStarts();const S=this._lineStarts.getIndexOf(m),D=this._lines[S.index].length;return{lineNumber:1+S.index,column:1+Math.min(S.remainder,D)}}_validateRange(m){const S=this._validatePosition({lineNumber:m.startLineNumber,column:m.startColumn}),D=this._validatePosition({lineNumber:m.endLineNumber,column:m.endColumn});return S.lineNumber!==m.startLineNumber||S.column!==m.startColumn||D.lineNumber!==m.endLineNumber||D.column!==m.endColumn?{startLineNumber:S.lineNumber,startColumn:S.column,endLineNumber:D.lineNumber,endColumn:D.column}:m}_validatePosition(m){if(!P.y.isIPosition(m))throw new Error("bad position");let{lineNumber:S,column:D}=m,E=!1;if(S<1)S=1,D=1,E=!0;else if(S>this._lines.length)S=this._lines.length,D=this._lines[S-1].length+1,E=!0;else{const B=this._lines[S-1].length+1;D<1?(D=1,E=!0):D>B&&(D=B,E=!0)}return E?{lineNumber:S,column:D}:m}}},15903:(Mt,He,c)=>{c.d(He,{MW:()=>w,bW:()=>A,nZ:()=>O});var u=c(37145);let U=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});const P=new u.d(()=>U("mouse",!1)),M=new u.d(()=>U("element",!1));function w(I){U=I}function O(I){return I==="element"?M.value:P.value}function A(){return U("element",!0)}},16612:(Mt,He,c)=>{c.d(He,{V:()=>U,w:()=>P});var u=c(63886),G=c(80129);function U(M,w,O){return(0,G.eP)({debugName:()=>`Configuration Key "${M}"`},A=>O.onDidChangeConfiguration(I=>{I.affectsConfiguration(M)&&A(I)}),()=>O.getValue(M)??w)}function P(M,w,O){const A=M.bindTo(w);return(0,u.zL)({debugName:()=>`Set Context Key "${M.key}"`},I=>{A.set(O(I))})}},17195:(Mt,He,c)=>{c.d(He,{BG:()=>U,IO:()=>M,Y:()=>P,eh:()=>G,pj:()=>O,qN:()=>w});class u{constructor(I,b){this._restrictedRenderingContextBrand=void 0,this._viewLayout=I,this.viewportData=b,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const C=this._viewLayout.getCurrentViewport();this.scrollTop=C.top,this.scrollLeft=C.left,this.viewportWidth=C.width,this.viewportHeight=C.height}getScrolledTopFromAbsoluteTop(I){return I-this.scrollTop}getVerticalOffsetForLineNumber(I,b){return this._viewLayout.getVerticalOffsetForLineNumber(I,b)}getVerticalOffsetAfterLineNumber(I,b){return this._viewLayout.getVerticalOffsetAfterLineNumber(I,b)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class G extends u{constructor(I,b,C){super(I,b),this._renderingContextBrand=void 0,this._viewLines=C}linesVisibleRangesForRange(I,b){return this._viewLines.linesVisibleRangesForRange(I,b)}visibleRangeForPosition(I){return this._viewLines.visibleRangeForPosition(I)}}class U{constructor(I,b,C,v){this.outsideRenderedLine=I,this.lineNumber=b,this.ranges=C,this.continuesOnNextLine=v}}class P{static from(I){const b=new Array(I.length);for(let C=0,v=I.length;C<v;C++){const _=I[C];b[C]=new P(_.left,_.width)}return b}constructor(I,b){this._horizontalRangeBrand=void 0,this.left=Math.round(I),this.width=Math.round(b)}toString(){return`[${this.left},${this.width}]`}}class M{constructor(I,b){this._floatHorizontalRangeBrand=void 0,this.left=I,this.width=b}toString(){return`[${this.left},${this.width}]`}static compare(I,b){return I.left-b.left}}class w{constructor(I,b){this.outsideRenderedLine=I,this.originalLeft=b,this.left=Math.round(this.originalLeft)}}class O{constructor(I,b){this.outsideRenderedLine=I,this.ranges=b}}},17577:(Mt,He,c)=>{c.d(He,{n:()=>P,s:()=>M});var u=c(31938),G=c(42640);const U=new RegExp(`(\\\\)?\\$\\((${G.L.iconNameExpression}(?:${G.L.iconModifierExpression})?)\\)`,"g");function P(w){const O=new Array;let A,I=0,b=0;for(;(A=U.exec(w))!==null;){b=A.index||0,I<b&&O.push(w.substring(I,b)),I=(A.index||0)+A[0].length;const[,C,v]=A;O.push(C?`$(${v})`:M({id:v}))}return I<w.length&&O.push(w.substring(I)),O}function M(w){const O=u.$("span");return O.classList.add(...G.L.asClassNameArray(w)),O}},18709:(Mt,He,c)=>{c.d(He,{N:()=>G,f:()=>u});function u(U){return U&&typeof U=="object"&&typeof U.original=="string"&&typeof U.value=="string"}function G(U){return U?U.condition!==void 0:!1}},19154:(Mt,He,c)=>{c.d(He,{Bs:()=>M,d:()=>G});var u=c(85565);class G{constructor(O,A,I,b){this.startColumn=O,this.endColumn=A,this.className=I,this.type=b,this._lineDecorationBrand=void 0}static _equals(O,A){return O.startColumn===A.startColumn&&O.endColumn===A.endColumn&&O.className===A.className&&O.type===A.type}static equalsArr(O,A){const I=O.length,b=A.length;if(I!==b)return!1;for(let C=0;C<I;C++)if(!G._equals(O[C],A[C]))return!1;return!0}static extractWrapped(O,A,I){if(O.length===0)return O;const b=A+1,C=I+1,v=I-A,_=[];let d=0;for(const m of O)m.endColumn<=b||m.startColumn>=C||(_[d++]=new G(Math.max(1,m.startColumn-b+1),Math.min(v+1,m.endColumn-b+1),m.className,m.type));return _}static filter(O,A,I,b){if(O.length===0)return[];const C=[];let v=0;for(let _=0,d=O.length;_<d;_++){const m=O[_],S=m.range;if(S.endLineNumber<A||S.startLineNumber>A||S.isEmpty()&&(m.type===0||m.type===3))continue;const D=S.startLineNumber===A?S.startColumn:I,E=S.endLineNumber===A?S.endColumn:b;C[v++]=new G(D,E,m.inlineClassName,m.type)}return C}static _typeCompare(O,A){const I=[2,0,1,3];return I[O]-I[A]}static compare(O,A){if(O.startColumn!==A.startColumn)return O.startColumn-A.startColumn;if(O.endColumn!==A.endColumn)return O.endColumn-A.endColumn;const I=G._typeCompare(O.type,A.type);return I!==0?I:O.className!==A.className?O.className<A.className?-1:1:0}}class U{constructor(O,A,I,b){this.startOffset=O,this.endOffset=A,this.className=I,this.metadata=b}}class P{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(O){let A=0;for(let I=0,b=O.length;I<b;I++)A|=O[I];return A}consumeLowerThan(O,A,I){for(;this.count>0&&this.stopOffsets[0]<O;){let b=0;for(;b+1<this.count&&this.stopOffsets[b]===this.stopOffsets[b+1];)b++;I.push(new U(A,this.stopOffsets[b],this.classNames.join(" "),P._metadata(this.metadata))),A=this.stopOffsets[b]+1,this.stopOffsets.splice(0,b+1),this.classNames.splice(0,b+1),this.metadata.splice(0,b+1),this.count-=b+1}return this.count>0&&A<O&&(I.push(new U(A,O-1,this.classNames.join(" "),P._metadata(this.metadata))),A=O),A}insert(O,A,I){if(this.count===0||this.stopOffsets[this.count-1]<=O)this.stopOffsets.push(O),this.classNames.push(A),this.metadata.push(I);else for(let b=0;b<this.count;b++)if(this.stopOffsets[b]>=O){this.stopOffsets.splice(b,0,O),this.classNames.splice(b,0,A),this.metadata.splice(b,0,I);break}this.count++}}class M{static normalize(O,A){if(A.length===0)return[];const I=[],b=new P;let C=0;for(let v=0,_=A.length;v<_;v++){const d=A[v];let m=d.startColumn,S=d.endColumn;const D=d.className,E=d.type===1?2:d.type===2?4:0;if(m>1){const z=O.charCodeAt(m-2);u.pc(z)&&m--}if(S>1){const z=O.charCodeAt(S-2);u.pc(z)&&S--}const B=m-1,R=S-2;C=b.consumeLowerThan(B,C,I),b.count===0&&(C=B),b.insert(R,D,E)}return b.consumeLowerThan(1073741824,C,I),I}}},20817:(Mt,He,c)=>{c.d(He,{VV:()=>U,o5:()=>G});function u(P){return P}class G{constructor(M,w){this.lastCache=void 0,this.lastArgKey=void 0,typeof M=="function"?(this._fn=M,this._computeKey=u):(this._fn=w,this._computeKey=M.getCacheKey)}get(M){const w=this._computeKey(M);return this.lastArgKey!==w&&(this.lastArgKey=w,this.lastCache=this._fn(M)),this.lastCache}}class U{get cachedValues(){return this._map}constructor(M,w){this._map=new Map,this._map2=new Map,typeof M=="function"?(this._fn=M,this._computeKey=u):(this._fn=w,this._computeKey=M.getCacheKey)}get(M){const w=this._computeKey(M);if(this._map2.has(w))return this._map2.get(w);const O=this._fn(M);return this._map.set(M,O),this._map2.set(w,O),O}}},21358:(Mt,He,c)=>{c.d(He,{DR:()=>w,cj:()=>P,oc:()=>M});var u=c(49048),G=c(45573),U=c(81545),P;(function(O){O[O.Hint=1]="Hint",O[O.Info=2]="Info",O[O.Warning=4]="Warning",O[O.Error=8]="Error"})(P||(P={})),function(O){function A(_,d){return d-_}O.compare=A;const I=Object.create(null);I[O.Error]=(0,G.kg)("sev.error","Error"),I[O.Warning]=(0,G.kg)("sev.warning","Warning"),I[O.Info]=(0,G.kg)("sev.info","Info");function b(_){return I[_]||""}O.toString=b;function C(_){switch(_){case u.A.Error:return O.Error;case u.A.Warning:return O.Warning;case u.A.Info:return O.Info;case u.A.Ignore:return O.Hint}}O.fromSeverity=C;function v(_){switch(_){case O.Error:return u.A.Error;case O.Warning:return u.A.Warning;case O.Info:return u.A.Info;case O.Hint:return u.A.Ignore}}O.toSeverity=v}(P||(P={}));var M;(function(O){const A="";function I(C){return b(C,!0)}O.makeKey=I;function b(C,v){const _=[A];return C.source?_.push(C.source.replace("\xA6","\\\xA6")):_.push(A),C.code?typeof C.code=="string"?_.push(C.code.replace("\xA6","\\\xA6")):_.push(C.code.value.replace("\xA6","\\\xA6")):_.push(A),C.severity!==void 0&&C.severity!==null?_.push(P.toString(C.severity)):_.push(A),C.message&&v?_.push(C.message.replace("\xA6","\\\xA6")):_.push(A),C.startLineNumber!==void 0&&C.startLineNumber!==null?_.push(C.startLineNumber.toString()):_.push(A),C.startColumn!==void 0&&C.startColumn!==null?_.push(C.startColumn.toString()):_.push(A),C.endLineNumber!==void 0&&C.endLineNumber!==null?_.push(C.endLineNumber.toString()):_.push(A),C.endColumn!==void 0&&C.endColumn!==null?_.push(C.endColumn.toString()):_.push(A),_.push(A),_.join("\xA6")}O.makeKeyOptionalMessage=b})(M||(M={}));const w=(0,U.u1)("markerService")},21594:(Mt,He,c)=>{c.d(He,{B:()=>C,m:()=>R});var u=c(31938),G=c(89530),U=c(7069),P=c(37519),M=c(77065),w=c(56491),O=c(60599),A=c(90692),I=function(z,W,$,Q){var q=arguments.length,ne=q<3?W:Q===null?Q=Object.getOwnPropertyDescriptor(W,$):Q,ve;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ne=Reflect.decorate(z,W,$,Q);else for(var Re=z.length-1;Re>=0;Re--)(ve=z[Re])&&(ne=(q<3?ve(ne):q>3?ve(W,$,ne):ve(W,$))||ne);return q>3&&ne&&Object.defineProperty(W,$,ne),ne};const b=!1;var C;(function(z){z.North="north",z.South="south",z.East="east",z.West="west"})(C||(C={}));let v=4;const _=new w.vl;let d=300;const m=new w.vl;class S{constructor(W){this.el=W,this.disposables=new O.Cm}get onPointerMove(){return this.disposables.add(new G.f((0,u.zk)(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new G.f((0,u.zk)(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}I([M.B],S.prototype,"onPointerMove",null),I([M.B],S.prototype,"onPointerUp",null);class D{get onPointerMove(){return this.disposables.add(new G.f(this.el,U.B.Change)).event}get onPointerUp(){return this.disposables.add(new G.f(this.el,U.B.End)).event}constructor(W){this.el=W,this.disposables=new O.Cm}dispose(){this.disposables.dispose()}}I([M.B],D.prototype,"onPointerMove",null),I([M.B],D.prototype,"onPointerUp",null);class E{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(W){this.factory=W}dispose(){}}I([M.B],E.prototype,"onPointerMove",null),I([M.B],E.prototype,"onPointerUp",null);const B="pointer-events-disabled";class R extends O.jG{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(W){this._state!==W&&(this.el.classList.toggle("disabled",W===0),this.el.classList.toggle("minimum",W===1),this.el.classList.toggle("maximum",W===2),this._state=W,this.onDidEnablementChange.fire(W))}set orthogonalStartSash(W){if(this._orthogonalStartSash!==W){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),W){const $=Q=>{this.orthogonalStartDragHandleDisposables.clear(),Q!==0&&(this._orthogonalStartDragHandle=(0,u.BC)(this.el,(0,u.$)(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add((0,O.s)(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new G.f(this._orthogonalStartDragHandle,"mouseenter")).event(()=>R.onMouseEnter(W),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new G.f(this._orthogonalStartDragHandle,"mouseleave")).event(()=>R.onMouseLeave(W),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(W.onDidEnablementChange.event($,this)),$(W.state)}this._orthogonalStartSash=W}}set orthogonalEndSash(W){if(this._orthogonalEndSash!==W){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),W){const $=Q=>{this.orthogonalEndDragHandleDisposables.clear(),Q!==0&&(this._orthogonalEndDragHandle=(0,u.BC)(this.el,(0,u.$)(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add((0,O.s)(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new G.f(this._orthogonalEndDragHandle,"mouseenter")).event(()=>R.onMouseEnter(W),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new G.f(this._orthogonalEndDragHandle,"mouseleave")).event(()=>R.onMouseLeave(W),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(W.onDidEnablementChange.event($,this)),$(W.state)}this._orthogonalEndSash=W}}constructor(W,$,Q){super(),this.hoverDelay=d,this.hoverDelayer=this._register(new P.ve(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new w.vl),this._onDidStart=this._register(new w.vl),this._onDidChange=this._register(new w.vl),this._onDidReset=this._register(new w.vl),this._onDidEnd=this._register(new w.vl),this.orthogonalStartSashDisposables=this._register(new O.Cm),this.orthogonalStartDragHandleDisposables=this._register(new O.Cm),this.orthogonalEndSashDisposables=this._register(new O.Cm),this.orthogonalEndDragHandleDisposables=this._register(new O.Cm),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=(0,u.BC)(W,(0,u.$)(".monaco-sash")),Q.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${Q.orthogonalEdge}`),A.zx&&this.el.classList.add("mac");const q=this._register(new G.f(this.el,"mousedown")).event;this._register(q(F=>this.onPointerStart(F,new S(W)),this));const ne=this._register(new G.f(this.el,"dblclick")).event;this._register(ne(this.onPointerDoublePress,this));const ve=this._register(new G.f(this.el,"mouseenter")).event;this._register(ve(()=>R.onMouseEnter(this)));const Re=this._register(new G.f(this.el,"mouseleave")).event;this._register(Re(()=>R.onMouseLeave(this))),this._register(U.q.addTarget(this.el));const Ae=this._register(new G.f(this.el,U.B.Start)).event;this._register(Ae(F=>this.onPointerStart(F,new D(this.el)),this));const re=this._register(new G.f(this.el,U.B.Tap)).event;let K;this._register(re(F=>{if(K){clearTimeout(K),K=void 0,this.onPointerDoublePress(F);return}clearTimeout(K),K=setTimeout(()=>K=void 0,250)},this)),typeof Q.size=="number"?(this.size=Q.size,Q.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=v,this._register(_.event(F=>{this.size=F,this.layout()}))),this._register(m.event(F=>this.hoverDelay=F)),this.layoutProvider=$,this.orthogonalStartSash=Q.orthogonalStartSash,this.orthogonalEndSash=Q.orthogonalEndSash,this.orientation=Q.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",b),this.layout()}onPointerStart(W,$){u.fs.stop(W);let Q=!1;if(!W.__orthogonalSashEvent){const me=this.getOrthogonalSash(W);me&&(Q=!0,W.__orthogonalSashEvent=!0,me.onPointerStart(W,new E($)))}if(this.linkedSash&&!W.__linkedSashEvent&&(W.__linkedSashEvent=!0,this.linkedSash.onPointerStart(W,new E($))),!this.state)return;const q=this.el.ownerDocument.getElementsByTagName("iframe");for(const me of q)me.classList.add(B);const ne=W.pageX,ve=W.pageY,Re=W.altKey,Ae={startX:ne,currentX:ne,startY:ve,currentY:ve,altKey:Re};this.el.classList.add("active"),this._onDidStart.fire(Ae);const re=(0,u.li)(this.el),K=()=>{let me="";Q?me="all-scroll":this.orientation===1?this.state===1?me="s-resize":this.state===2?me="n-resize":me=A.zx?"row-resize":"ns-resize":this.state===1?me="e-resize":this.state===2?me="w-resize":me=A.zx?"col-resize":"ew-resize",re.textContent=`* { cursor: ${me} !important; }`},F=new O.Cm;K(),Q||this.onDidEnablementChange.event(K,null,F);const N=me=>{u.fs.stop(me,!1);const ce={startX:ne,currentX:me.pageX,startY:ve,currentY:me.pageY,altKey:Re};this._onDidChange.fire(ce)},j=me=>{u.fs.stop(me,!1),re.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),F.dispose();for(const ce of q)ce.classList.remove(B)};$.onPointerMove(N,null,F),$.onPointerUp(j,null,F),F.add($)}onPointerDoublePress(W){const $=this.getOrthogonalSash(W);$&&$._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(W,$=!1){W.el.classList.contains("active")?(W.hoverDelayer.cancel(),W.el.classList.add("hover")):W.hoverDelayer.trigger(()=>W.el.classList.add("hover"),W.hoverDelay).then(void 0,()=>{}),!$&&W.linkedSash&&R.onMouseEnter(W.linkedSash,!0)}static onMouseLeave(W,$=!1){W.hoverDelayer.cancel(),W.el.classList.remove("hover"),!$&&W.linkedSash&&R.onMouseLeave(W.linkedSash,!0)}clearSashHoverState(){R.onMouseLeave(this)}layout(){if(this.orientation===0){const W=this.layoutProvider;this.el.style.left=W.getVerticalSashLeft(this)-this.size/2+"px",W.getVerticalSashTop&&(this.el.style.top=W.getVerticalSashTop(this)+"px"),W.getVerticalSashHeight&&(this.el.style.height=W.getVerticalSashHeight(this)+"px")}else{const W=this.layoutProvider;this.el.style.top=W.getHorizontalSashTop(this)-this.size/2+"px",W.getHorizontalSashLeft&&(this.el.style.left=W.getHorizontalSashLeft(this)+"px"),W.getHorizontalSashWidth&&(this.el.style.width=W.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(W){const $=W.initialTarget??W.target;if(!(!$||!(0,u.sb)($))&&$.classList.contains("orthogonal-drag-handle"))return $.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}},22250:(Mt,He,c)=>{c.d(He,{AI:()=>U,Kz:()=>M,Ot:()=>P});var u=c(49048),G=c(81545),U=u.A;const P=(0,G.u1)("notificationService");class M{}},22510:(Mt,He,c)=>{c.d(He,{Gb:()=>_,Ax:()=>v,rk:()=>R});var u=c(38594),G=c(53784),U=c(90692),P=c(17195);class M{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(W,$){W.selectNodeContents($)}static _readClientRects(W,$,Q,q,ne){const ve=this._createRange();try{return ve.setStart(W,$),ve.setEnd(Q,q),ve.getClientRects()}catch{return null}finally{this._detachRange(ve,ne)}}static _mergeAdjacentRanges(W){if(W.length===1)return W;W.sort(P.IO.compare);const $=[];let Q=0,q=W[0];for(let ne=1,ve=W.length;ne<ve;ne++){const Re=W[ne];q.left+q.width+.9>=Re.left?q.width=Math.max(q.width,Re.left+Re.width-q.left):($[Q++]=q,q=Re)}return $[Q++]=q,$}static _createHorizontalRangesFromClientRects(W,$,Q){if(!W||W.length===0)return null;const q=[];for(let ne=0,ve=W.length;ne<ve;ne++){const Re=W[ne];q[ne]=new P.IO(Math.max(0,(Re.left-$)/Q),Re.width/Q)}return this._mergeAdjacentRanges(q)}static readHorizontalRanges(W,$,Q,q,ne,ve){const Ae=W.children.length-1;if(0>Ae)return null;if($=Math.min(Ae,Math.max(0,$)),q=Math.min(Ae,Math.max(0,q)),$===q&&Q===ne&&Q===0&&!W.children[$].firstChild){const N=W.children[$].getClientRects();return ve.markDidDomLayout(),this._createHorizontalRangesFromClientRects(N,ve.clientRectDeltaLeft,ve.clientRectScale)}$!==q&&q>0&&ne===0&&(q--,ne=1073741824);let re=W.children[$].firstChild,K=W.children[q].firstChild;if((!re||!K)&&(!re&&Q===0&&$>0&&(re=W.children[$-1].firstChild,Q=1073741824),!K&&ne===0&&q>0&&(K=W.children[q-1].firstChild,ne=1073741824)),!re||!K)return null;Q=Math.min(re.textContent.length,Math.max(0,Q)),ne=Math.min(K.textContent.length,Math.max(0,ne));const F=this._readClientRects(re,Q,K,ne,ve.endNode);return ve.markDidDomLayout(),this._createHorizontalRangesFromClientRects(F,ve.clientRectDeltaLeft,ve.clientRectScale)}}var w=c(19154),O=c(62681),A=c(64246),I=c(8775);const b=function(){return U.ib?!0:!(U.j9||u.gm||u.nr)}();let C=!0;class v{constructor(W,$){this.themeType=$;const Q=W.options,q=Q.get(50);Q.get(38)==="off"?this.renderWhitespace=Q.get(100):this.renderWhitespace="none",this.renderControlCharacters=Q.get(95),this.spaceWidth=q.spaceWidth,this.middotWidth=q.middotWidth,this.wsmiddotWidth=q.wsmiddotWidth,this.useMonospaceOptimizations=q.isMonospace&&!Q.get(33),this.canUseHalfwidthRightwardsArrow=q.canUseHalfwidthRightwardsArrow,this.lineHeight=Q.get(67),this.stopRenderingLineAfter=Q.get(118),this.fontLigatures=Q.get(51)}equals(W){return this.themeType===W.themeType&&this.renderWhitespace===W.renderWhitespace&&this.renderControlCharacters===W.renderControlCharacters&&this.spaceWidth===W.spaceWidth&&this.middotWidth===W.middotWidth&&this.wsmiddotWidth===W.wsmiddotWidth&&this.useMonospaceOptimizations===W.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===W.canUseHalfwidthRightwardsArrow&&this.lineHeight===W.lineHeight&&this.stopRenderingLineAfter===W.stopRenderingLineAfter&&this.fontLigatures===W.fontLigatures}}class _{static{this.CLASS_NAME="view-line"}constructor(W){this._options=W,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(W){if(this._renderedViewLine)this._renderedViewLine.domNode=(0,G.Z)(W);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(W){this._isMaybeInvalid=!0,this._options=W}onSelectionChanged(){return(0,A.Bb)(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(W,$,Q,q,ne){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const ve=q.getViewLineRenderingData(W),Re=this._options,Ae=w.d.filter(ve.inlineDecorations,W,ve.minColumn,ve.maxColumn);let re=null;if((0,A.Bb)(Re.themeType)||this._options.renderWhitespace==="selection"){const j=q.selections;for(const me of j){if(me.endLineNumber<W||me.startLineNumber>W)continue;const ce=me.startLineNumber===W?me.startColumn:ve.minColumn,he=me.endLineNumber===W?me.endColumn:ve.maxColumn;ce<he&&((0,A.Bb)(Re.themeType)&&Ae.push(new w.d(ce,he,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(re||(re=[]),re.push(new O.MT(ce-1,he-1))))}}const K=new O.zL(Re.useMonospaceOptimizations,Re.canUseHalfwidthRightwardsArrow,ve.content,ve.continuesWithWrappedLine,ve.isBasicASCII,ve.containsRTL,ve.minColumn-1,ve.tokens,Ae,ve.tabSize,ve.startVisibleColumn,Re.spaceWidth,Re.middotWidth,Re.wsmiddotWidth,Re.stopRenderingLineAfter,Re.renderWhitespace,Re.renderControlCharacters,Re.fontLigatures!==I.Bc.OFF,re);if(this._renderedViewLine&&this._renderedViewLine.input.equals(K))return!1;ne.appendString('<div style="top:'),ne.appendString(String($)),ne.appendString("px;height:"),ne.appendString(String(Q)),ne.appendString('px;" class="'),ne.appendString(_.CLASS_NAME),ne.appendString('">');const F=(0,O.UW)(K,ne);ne.appendString("</div>");let N=null;return C&&b&&ve.isBasicASCII&&Re.useMonospaceOptimizations&&F.containsForeignElements===0&&(N=new d(this._renderedViewLine?this._renderedViewLine.domNode:null,K,F.characterMapping)),N||(N=D(this._renderedViewLine?this._renderedViewLine.domNode:null,K,F.characterMapping,F.containsRTL,F.containsForeignElements)),this._renderedViewLine=N,!0}layoutLine(W,$,Q){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop($),this._renderedViewLine.domNode.setHeight(Q))}getWidth(W){return this._renderedViewLine?this._renderedViewLine.getWidth(W):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof d:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof d?this._renderedViewLine.monospaceAssumptionsAreValid():C}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof d&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(W,$,Q,q){if(!this._renderedViewLine)return null;$=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,$)),Q=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,Q));const ne=this._renderedViewLine.input.stopRenderingLineAfter;if(ne!==-1&&$>ne+1&&Q>ne+1)return new P.pj(!0,[new P.IO(this.getWidth(q),0)]);ne!==-1&&$>ne+1&&($=ne+1),ne!==-1&&Q>ne+1&&(Q=ne+1);const ve=this._renderedViewLine.getVisibleRangesForRange(W,$,Q,q);return ve&&ve.length>0?new P.pj(!1,ve):null}getColumnOfNodeOffset(W,$){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(W,$):1}}class d{constructor(W,$,Q){this._cachedWidth=-1,this.domNode=W,this.input=$;const q=Math.floor($.lineContent.length/300);if(q>0){this._keyColumnPixelOffsetCache=new Float32Array(q);for(let ne=0;ne<q;ne++)this._keyColumnPixelOffsetCache[ne]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=Q,this._charWidth=$.spaceWidth}getWidth(W){if(!this.domNode||this.input.lineContent.length<300){const $=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*$)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,W?.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return C;if(this.input.lineContent.length<300){const W=this.getWidth(null),$=this.domNode.domNode.firstChild.offsetWidth;Math.abs(W-$)>=2&&(C=!1)}return C}toSlowRenderedLine(){return D(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(W,$,Q,q){const ne=this._getColumnPixelOffset(W,$,q),ve=this._getColumnPixelOffset(W,Q,q);return[new P.IO(ne,ve-ne)]}_getColumnPixelOffset(W,$,Q){if($<=300){const re=this._characterMapping.getHorizontalOffset($);return this._charWidth*re}const q=Math.floor(($-1)/300)-1,ne=(q+1)*300+1;let ve=-1;if(this._keyColumnPixelOffsetCache&&(ve=this._keyColumnPixelOffsetCache[q],ve===-1&&(ve=this._actualReadPixelOffset(W,ne,Q),this._keyColumnPixelOffsetCache[q]=ve)),ve===-1){const re=this._characterMapping.getHorizontalOffset($);return this._charWidth*re}const Re=this._characterMapping.getHorizontalOffset(ne),Ae=this._characterMapping.getHorizontalOffset($);return ve+this._charWidth*(Ae-Re)}_getReadingTarget(W){return W.domNode.firstChild}_actualReadPixelOffset(W,$,Q){if(!this.domNode)return-1;const q=this._characterMapping.getDomPosition($),ne=M.readHorizontalRanges(this._getReadingTarget(this.domNode),q.partIndex,q.charIndex,q.partIndex,q.charIndex,Q);return!ne||ne.length===0?-1:ne[0].left}getColumnOfNodeOffset(W,$){return R(this._characterMapping,W,$)}}class m{constructor(W,$,Q,q,ne){if(this.domNode=W,this.input=$,this._characterMapping=Q,this._isWhitespaceOnly=/^\s*$/.test($.lineContent),this._containsForeignElements=ne,this._cachedWidth=-1,this._pixelOffsetCache=null,!q||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let ve=0,Re=this._characterMapping.length;ve<=Re;ve++)this._pixelOffsetCache[ve]=-1}}_getReadingTarget(W){return W.domNode.firstChild}getWidth(W){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,W?.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(W,$,Q,q){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const ne=this._readPixelOffset(this.domNode,W,$,q);if(ne===-1)return null;const ve=this._readPixelOffset(this.domNode,W,Q,q);return ve===-1?null:[new P.IO(ne,ve-ne)]}return this._readVisibleRangesForRange(this.domNode,W,$,Q,q)}_readVisibleRangesForRange(W,$,Q,q,ne){if(Q===q){const ve=this._readPixelOffset(W,$,Q,ne);return ve===-1?null:[new P.IO(ve,0)]}else return this._readRawVisibleRangesForRange(W,Q,q,ne)}_readPixelOffset(W,$,Q,q){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(q);const ne=this._getReadingTarget(W);return ne.firstChild?(q.markDidDomLayout(),ne.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const ne=this._pixelOffsetCache[Q];if(ne!==-1)return ne;const ve=this._actualReadPixelOffset(W,$,Q,q);return this._pixelOffsetCache[Q]=ve,ve}return this._actualReadPixelOffset(W,$,Q,q)}_actualReadPixelOffset(W,$,Q,q){if(this._characterMapping.length===0){const Ae=M.readHorizontalRanges(this._getReadingTarget(W),0,0,0,0,q);return!Ae||Ae.length===0?-1:Ae[0].left}if(Q===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(q);const ne=this._characterMapping.getDomPosition(Q),ve=M.readHorizontalRanges(this._getReadingTarget(W),ne.partIndex,ne.charIndex,ne.partIndex,ne.charIndex,q);if(!ve||ve.length===0)return-1;const Re=ve[0].left;if(this.input.isBasicASCII){const Ae=this._characterMapping.getHorizontalOffset(Q),re=Math.round(this.input.spaceWidth*Ae);if(Math.abs(re-Re)<=1)return re}return Re}_readRawVisibleRangesForRange(W,$,Q,q){if($===1&&Q===this._characterMapping.length)return[new P.IO(0,this.getWidth(q))];const ne=this._characterMapping.getDomPosition($),ve=this._characterMapping.getDomPosition(Q);return M.readHorizontalRanges(this._getReadingTarget(W),ne.partIndex,ne.charIndex,ve.partIndex,ve.charIndex,q)}getColumnOfNodeOffset(W,$){return R(this._characterMapping,W,$)}}class S extends m{_readVisibleRangesForRange(W,$,Q,q,ne){const ve=super._readVisibleRangesForRange(W,$,Q,q,ne);if(!ve||ve.length===0||Q===q||Q===1&&q===this._characterMapping.length)return ve;if(!this.input.containsRTL){const Re=this._readPixelOffset(W,$,q,ne);if(Re!==-1){const Ae=ve[ve.length-1];Ae.left<Re&&(Ae.width=Re-Ae.left)}}return ve}}const D=function(){return u.Tc?E:B}();function E(z,W,$,Q,q){return new S(z,W,$,Q,q)}function B(z,W,$,Q,q){return new m(z,W,$,Q,q)}function R(z,W,$){const Q=W.textContent.length;let q=-1;for(;W;)W=W.previousSibling,q++;return z.getColumn(new O.wZ(q,$),Q)}},23957:(Mt,He,c)=>{c.d(He,{Uq:()=>G,mu:()=>U,qE:()=>u});function u(P,M,w){return Math.min(Math.max(P,M),w)}class G{constructor(){this._n=1,this._val=0}update(M){return this._val=this._val+(M-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class U{constructor(M){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(M),this._values.fill(0,0,M)}update(M){const w=this._values[this._index];return this._values[this._index]=M,this._index=(this._index+1)%this._values.length,this._sum-=w,this._sum+=M,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}},24385:(Mt,He,c)=>{c.d(He,{As:()=>U,qg:()=>P});var u=c(55409),G=c(37473);function U(O){return JSON.stringify(O,M)}function P(O){let A=JSON.parse(O);return A=w(A),A}function M(O,A){return A instanceof RegExp?{$mid:2,source:A.source,flags:A.flags}:A}function w(O,A=0){if(!O||A>200)return O;if(typeof O=="object"){switch(O.$mid){case 1:return G.r.revive(O);case 2:return new RegExp(O.source,O.flags);case 17:return new Date(O.source)}if(O instanceof u.MB||O instanceof Uint8Array)return O;if(Array.isArray(O))for(let I=0;I<O.length;++I)O[I]=w(O[I],A+1);else for(const I in O)Object.hasOwnProperty.call(O,I)&&(O[I]=w(O[I],A+1))}return O}},25334:(Mt,He,c)=>{c.d(He,{P:()=>w,$:()=>O});var u=c(38594);const G=new WeakMap;function U(A){if(!A.parent||A.parent===A)return null;try{const I=A.location,b=A.parent.location;if(I.origin!=="null"&&b.origin!=="null"&&I.origin!==b.origin)return null}catch{return null}return A.parent}class P{static getSameOriginWindowChain(I){let b=G.get(I);if(!b){b=[],G.set(I,b);let C=I,v;do v=U(C),v?b.push({window:new WeakRef(C),iframeElement:C.frameElement||null}):b.push({window:new WeakRef(C),iframeElement:null}),C=v;while(C)}return b.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(I,b){if(!b||I===b)return{top:0,left:0};let C=0,v=0;const _=this.getSameOriginWindowChain(I);for(const d of _){const m=d.window.deref();if(C+=m?.scrollY??0,v+=m?.scrollX??0,m===b||!d.iframeElement)break;const S=d.iframeElement.getBoundingClientRect();C+=S.top,v+=S.left}return{top:C,left:v}}}var M=c(90692);class w{constructor(I,b){this.timestamp=Date.now(),this.browserEvent=b,this.leftButton=b.button===0,this.middleButton=b.button===1,this.rightButton=b.button===2,this.buttons=b.buttons,this.target=b.target,this.detail=b.detail||1,b.type==="dblclick"&&(this.detail=2),this.ctrlKey=b.ctrlKey,this.shiftKey=b.shiftKey,this.altKey=b.altKey,this.metaKey=b.metaKey,typeof b.pageX=="number"?(this.posx=b.pageX,this.posy=b.pageY):(this.posx=b.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=b.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const C=P.getPositionOfChildWindowRelativeToAncestorWindow(I,b.view);this.posx-=C.left,this.posy-=C.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class O{constructor(I,b=0,C=0){this.browserEvent=I||null,this.target=I?I.target||I.targetNode||I.srcElement:null,this.deltaY=C,this.deltaX=b;let v=!1;if(u.H8){const _=navigator.userAgent.match(/Chrome\/(\d+)/);v=(_?parseInt(_[1]):123)<=122}if(I){const _=I,d=I,m=I.view?.devicePixelRatio||1;if(typeof _.wheelDeltaY<"u")v?this.deltaY=_.wheelDeltaY/(120*m):this.deltaY=_.wheelDeltaY/120;else if(typeof d.VERTICAL_AXIS<"u"&&d.axis===d.VERTICAL_AXIS)this.deltaY=-d.detail/3;else if(I.type==="wheel"){const S=I;S.deltaMode===S.DOM_DELTA_LINE?u.gm&&!M.zx?this.deltaY=-I.deltaY/3:this.deltaY=-I.deltaY:this.deltaY=-I.deltaY/40}if(typeof _.wheelDeltaX<"u")u.nr&&M.uF?this.deltaX=-(_.wheelDeltaX/120):v?this.deltaX=_.wheelDeltaX/(120*m):this.deltaX=_.wheelDeltaX/120;else if(typeof d.HORIZONTAL_AXIS<"u"&&d.axis===d.HORIZONTAL_AXIS)this.deltaX=-I.detail/3;else if(I.type==="wheel"){const S=I;S.deltaMode===S.DOM_DELTA_LINE?u.gm&&!M.zx?this.deltaX=-I.deltaX/3:this.deltaX=-I.deltaX:this.deltaX=-I.deltaX/40}this.deltaY===0&&this.deltaX===0&&I.wheelDelta&&(v?this.deltaY=I.wheelDelta/(120*m):this.deltaY=I.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}}},26342:(Mt,He,c)=>{c.d(He,{A5:()=>G,Dg:()=>w,F4:()=>b,L5:()=>I,VW:()=>P,Wo:()=>A,X2:()=>M,ZS:()=>U,nk:()=>O,vd:()=>C});var u=c(3223),G;(function(v){v[v.Left=1]="Left",v[v.Center=2]="Center",v[v.Right=4]="Right",v[v.Full=7]="Full"})(G||(G={}));var U;(function(v){v[v.Left=1]="Left",v[v.Center=2]="Center",v[v.Right=3]="Right"})(U||(U={}));var P;(function(v){v[v.Both=0]="Both",v[v.Right=1]="Right",v[v.Left=2]="Left",v[v.None=3]="None"})(P||(P={}));class M{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(_){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,_.tabSize|0),_.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,_.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!_.insertSpaces,this.defaultEOL=_.defaultEOL|0,this.trimAutoWhitespace=!!_.trimAutoWhitespace,this.bracketPairColorizationOptions=_.bracketPairColorizationOptions}equals(_){return this.tabSize===_.tabSize&&this._indentSizeIsTabSize===_._indentSizeIsTabSize&&this.indentSize===_.indentSize&&this.insertSpaces===_.insertSpaces&&this.defaultEOL===_.defaultEOL&&this.trimAutoWhitespace===_.trimAutoWhitespace&&(0,u.aI)(this.bracketPairColorizationOptions,_.bracketPairColorizationOptions)}createChangeEvent(_){return{tabSize:this.tabSize!==_.tabSize,indentSize:this.indentSize!==_.indentSize,insertSpaces:this.insertSpaces!==_.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==_.trimAutoWhitespace}}}class w{constructor(_,d){this._findMatchBrand=void 0,this.range=_,this.matches=d}}function O(v){return v&&typeof v.read=="function"}class A{constructor(_,d,m,S,D,E){this.identifier=_,this.range=d,this.text=m,this.forceMoveMarkers=S,this.isAutoWhitespaceEdit=D,this._isTracked=E}}class I{constructor(_,d,m){this.regex=_,this.wordSeparators=d,this.simpleSearch=m}}class b{constructor(_,d,m){this.reverseEdits=_,this.changes=d,this.trimAutoWhitespaceLineNumbers=m}}function C(v){return!v.isTooLargeForSyncing()&&!v.isForSimpleWidget}},26390:(Mt,He,c)=>{c.d(He,{k:()=>G});var u=c(81545);const G=(0,u.u1)("environmentService")},26902:(Mt,He,c)=>{c.r(He),c.d(He,{DraggedTreeItemsIdentifier:()=>G,TreeViewsDnDService:()=>u});class u{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(P){if(P&&this._dragOperations.has(P)){const M=this._dragOperations.get(P);return this._dragOperations.delete(P),M}}}class G{constructor(P){this.identifier=P}}},27406:(Mt,He,c)=>{c.r(He),c.d(He,{MarkerDecorationsService:()=>m});var u=c(21358),G=c(60599),U=c(26342),P=c(41403),M=c(54656),w=c(65365),O=c(98414),A=c(54021),I=c(56491),b=c(19867),C=c(41461),v=c(99042),_=function(D,E,B,R){var z=arguments.length,W=z<3?E:R===null?R=Object.getOwnPropertyDescriptor(E,B):R,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(D,E,B,R);else for(var Q=D.length-1;Q>=0;Q--)($=D[Q])&&(W=(z<3?$(W):z>3?$(E,B,W):$(E,B))||W);return z>3&&W&&Object.defineProperty(E,B,W),W},d=function(D,E){return function(B,R){E(B,R,D)}};let m=class extends G.jG{constructor(E,B){super(),this._markerService=B,this._onDidChangeMarker=this._register(new I.vl),this._markerDecorations=new C.fT,E.getModels().forEach(R=>this._onModelAdded(R)),this._register(E.onModelAdded(this._onModelAdded,this)),this._register(E.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(E=>E.dispose()),this._markerDecorations.clear()}getMarker(E,B){const R=this._markerDecorations.get(E);return R&&R.getMarker(B)||null}_handleMarkerChange(E){E.forEach(B=>{const R=this._markerDecorations.get(B);R&&this._updateDecorations(R)})}_onModelAdded(E){const B=new S(E);this._markerDecorations.set(E.uri,B),this._updateDecorations(B)}_onModelRemoved(E){const B=this._markerDecorations.get(E.uri);B&&(B.dispose(),this._markerDecorations.delete(E.uri)),(E.uri.scheme===A.ny.inMemory||E.uri.scheme===A.ny.internal||E.uri.scheme===A.ny.vscode)&&this._markerService?.read({resource:E.uri}).map(R=>R.owner).forEach(R=>this._markerService.remove(R,[E.uri]))}_updateDecorations(E){const B=this._markerService.read({resource:E.model.uri,take:500});E.update(B)&&this._onDidChangeMarker.fire(E.model)}};m=_([d(0,w.IModelService),d(1,u.DR)],m);class S extends G.jG{constructor(E){super(),this.model=E,this._map=new C.cO,this._register((0,G.s)(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(E){const{added:B,removed:R}=(0,v.Z)(new Set(this._map.keys()),new Set(E));if(B.length===0&&R.length===0)return!1;const z=R.map(Q=>this._map.get(Q)),W=B.map(Q=>({range:this._createDecorationRange(this.model,Q),options:this._createDecorationOption(Q)})),$=this.model.deltaDecorations(z,W);for(const Q of R)this._map.delete(Q);for(let Q=0;Q<$.length;Q++)this._map.set(B[Q],$[Q]);return!0}getMarker(E){return this._map.getKey(E.id)}_createDecorationRange(E,B){let R=O.Q.lift(B);if(B.severity===u.cj.Hint&&!this._hasMarkerTag(B,1)&&!this._hasMarkerTag(B,2)&&(R=R.setEndPosition(R.startLineNumber,R.startColumn+2)),R=E.validateRange(R),R.isEmpty()){const z=E.getLineLastNonWhitespaceColumn(R.startLineNumber)||E.getLineMaxColumn(R.startLineNumber);if(z===1||R.endColumn>=z)return R;const W=E.getWordAtPosition(R.getStartPosition());W&&(R=new O.Q(R.startLineNumber,W.startColumn,R.endLineNumber,W.endColumn))}else if(B.endColumn===Number.MAX_VALUE&&B.startColumn===1&&R.startLineNumber===R.endLineNumber){const z=E.getLineFirstNonWhitespaceColumn(B.startLineNumber);z<R.endColumn&&(R=new O.Q(R.startLineNumber,z,R.endLineNumber,R.endColumn),B.startColumn=z)}return R}_createDecorationOption(E){let B,R,z,W,$;switch(E.severity){case u.cj.Hint:this._hasMarkerTag(E,2)?B=void 0:this._hasMarkerTag(E,1)?B="squiggly-unnecessary":B="squiggly-hint",z=0;break;case u.cj.Info:B="squiggly-info",R=(0,P.Yf)(M.AQ),z=10,$={color:(0,P.Yf)(b.KoI),position:1};break;case u.cj.Warning:B="squiggly-warning",R=(0,P.Yf)(M.aZ),z=20,$={color:(0,P.Yf)(b.uMG),position:1};break;case u.cj.Error:default:B="squiggly-error",R=(0,P.Yf)(M.yI),z=30,$={color:(0,P.Yf)(b.yLC),position:1};break}return E.tags&&(E.tags.indexOf(1)!==-1&&(W="squiggly-inline-unnecessary"),E.tags.indexOf(2)!==-1&&(W="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:B,showIfCollapsed:!0,overviewRuler:{color:R,position:U.A5.Right},minimap:$,zIndex:z,inlineClassName:W}}_hasMarkerTag(E,B){return E.tags?E.tags.indexOf(B)>=0:!1}}},27759:(Mt,He,c)=>{c.d(He,{d:()=>C});var u=c(31938),G=c(38795),U=c(15625),P=c(7069),M=c(43860),w=c(56491);class O extends M.LN{constructor(_,d){super(),this._onDidChangeVisibility=this._register(new w.vl),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=(0,u.BC)(_,(0,u.$)(".monaco-dropdown")),this._label=(0,u.BC)(this._element,(0,u.$)(".dropdown-label"));let m=d.labelRenderer;m||(m=D=>(D.textContent=d.label||"",null));for(const D of[u.Bx.CLICK,u.Bx.MOUSE_DOWN,P.B.Tap])this._register((0,u.ko)(this.element,D,E=>u.fs.stop(E,!0)));for(const D of[u.Bx.MOUSE_DOWN,P.B.Tap])this._register((0,u.ko)(this._label,D,E=>{(0,u.Er)(E)&&(E.detail>1||E.button!==0)||(this.visible?this.hide():this.show())}));this._register((0,u.ko)(this._label,u.Bx.KEY_UP,D=>{const E=new U.Z(D);(E.equals(3)||E.equals(10))&&(u.fs.stop(D,!0),this.visible?this.hide():this.show())}));const S=m(this._label);S&&this._register(S),this._register(P.q.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class A extends O{constructor(_,d){super(_,d),this._options=d,this._actions=[],this.actions=d.actions||[]}set menuOptions(_){this._menuOptions=_}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(_){this._actions=_}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(_,d)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(_,d):void 0,getKeyBinding:_=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(_):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}var I=c(15903),b=c(91779);class C extends G.EH{constructor(_,d,m,S=Object.create(null)){super(null,_,S),this.actionItem=null,this._onDidChangeVisibility=this._register(new w.vl),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=d,this.contextMenuProvider=m,this.options=S,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(_){this.actionItem=_;const d=D=>{this.element=(0,u.BC)(D,(0,u.$)("a.action-label"));let E=[];return typeof this.options.classNames=="string"?E=this.options.classNames.split(/\s+/g).filter(B=>!!B):this.options.classNames&&(E=this.options.classNames),E.find(B=>B==="icon")||E.push("codicon"),this.element.classList.add(...E),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register((0,b.i)().setupManagedHover(this.options.hoverDelegate??(0,I.nZ)("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},m=Array.isArray(this.menuActionsOrProvider),S={contextMenuProvider:this.contextMenuProvider,labelRenderer:d,menuAsChild:this.options.menuAsChild,actions:m?this.menuActionsOrProvider:void 0,actionProvider:m?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new A(_,S)),this._register(this.dropdownMenu.onDidChangeVisibility(D=>{this.element?.setAttribute("aria-expanded",`${D}`),this._onDidChangeVisibility.fire(D)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const D=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return D.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let _=null;return this.action.tooltip?_=this.action.tooltip:this.action.label&&(_=this.action.label),_??void 0}setActionContext(_){super.setActionContext(_),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=_:this.dropdownMenu.menuOptions={context:_})}show(){this.dropdownMenu?.show()}updateEnabled(){const _=!this.action.enabled;this.actionItem?.classList.toggle("disabled",_),this.element?.classList.toggle("disabled",_)}}},29552:(Mt,He,c)=>{c.d(He,{M:()=>U});var u=c(56491);class G{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new u.vl,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(M){this._tabFocus=M,this._onDidChangeTabFocus.fire(this._tabFocus)}}const U=new G},29554:(Mt,He,c)=>{c.d(He,{Gc:()=>Ce,R9:()=>it});var u=c(31938),G=c(46625),U=c(89530),P=c(58242),M=c(15625),w=c(25334),O=c(17577),A=c(87856),I=c(56491),b=c(53897),C=c(60317),v=c(6113),_=c(37145),d=c(60599);let m={};(function(){function Fe(pt,et){et(m)}Fe.amd=!0,function(pt,et){typeof Fe=="function"&&Fe.amd?Fe(["exports"],et):typeof exports=="object"?et(exports):(pt=typeof globalThis<"u"?globalThis:pt||self,et(pt.marked={}))}(this,function(pt){"use strict";function et(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}pt.defaults=et();function Zt(_e){pt.defaults=_e}const bi=/[&<>"']/,ci=new RegExp(bi.source,"g"),Oi=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Ii=new RegExp(Oi.source,"g"),yi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Vt=_e=>yi[_e];function _n(_e,ue){if(ue){if(bi.test(_e))return _e.replace(ci,Vt)}else if(Oi.test(_e))return _e.replace(Ii,Vt);return _e}const oi=/(^|[^\[])\^/g;function Ne(_e,ue){let Ee=typeof _e=="string"?_e:_e.source;ue=ue||"";const Ie={replace:(ze,Je)=>{let rt=typeof Je=="string"?Je:Je.source;return rt=rt.replace(oi,"$1"),Ee=Ee.replace(ze,rt),Ie},getRegex:()=>new RegExp(Ee,ue)};return Ie}function gt(_e){try{_e=encodeURI(_e).replace(/%25/g,"%")}catch{return null}return _e}const ei={exec:()=>null};function ai(_e,ue){const Ee=_e.replace(/\|/g,(Je,rt,Ct)=>{let jt=!1,It=rt;for(;--It>=0&&Ct[It]==="\\";)jt=!jt;return jt?"|":" |"}),Ie=Ee.split(/ \|/);let ze=0;if(Ie[0].trim()||Ie.shift(),Ie.length>0&&!Ie[Ie.length-1].trim()&&Ie.pop(),ue)if(Ie.length>ue)Ie.splice(ue);else for(;Ie.length<ue;)Ie.push("");for(;ze<Ie.length;ze++)Ie[ze]=Ie[ze].trim().replace(/\\\|/g,"|");return Ie}function Ci(_e,ue,Ee){const Ie=_e.length;if(Ie===0)return"";let ze=0;for(;ze<Ie;){const Je=_e.charAt(Ie-ze-1);if(Je===ue&&!Ee)ze++;else if(Je!==ue&&Ee)ze++;else break}return _e.slice(0,Ie-ze)}function wi(_e,ue){if(_e.indexOf(ue[1])===-1)return-1;let Ee=0;for(let Ie=0;Ie<_e.length;Ie++)if(_e[Ie]==="\\")Ie++;else if(_e[Ie]===ue[0])Ee++;else if(_e[Ie]===ue[1]&&(Ee--,Ee<0))return Ie;return-1}function ji(_e,ue,Ee,Ie){const ze=ue.href,Je=ue.title?_n(ue.title):null,rt=_e[1].replace(/\\([\[\]])/g,"$1");if(_e[0].charAt(0)!=="!"){Ie.state.inLink=!0;const Ct={type:"link",raw:Ee,href:ze,title:Je,text:rt,tokens:Ie.inlineTokens(rt)};return Ie.state.inLink=!1,Ct}return{type:"image",raw:Ee,href:ze,title:Je,text:_n(rt)}}function Di(_e,ue){const Ee=_e.match(/^(\s+)(?:```)/);if(Ee===null)return ue;const Ie=Ee[1];return ue.split(`
`).map(ze=>{const Je=ze.match(/^\s+/);if(Je===null)return ze;const[rt]=Je;return rt.length>=Ie.length?ze.slice(Ie.length):ze}).join(`
`)}class dn{options;rules;lexer;constructor(ue){this.options=ue||pt.defaults}space(ue){const Ee=this.rules.block.newline.exec(ue);if(Ee&&Ee[0].length>0)return{type:"space",raw:Ee[0]}}code(ue){const Ee=this.rules.block.code.exec(ue);if(Ee){const Ie=Ee[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:Ee[0],codeBlockStyle:"indented",text:this.options.pedantic?Ie:Ci(Ie,`
`)}}}fences(ue){const Ee=this.rules.block.fences.exec(ue);if(Ee){const Ie=Ee[0],ze=Di(Ie,Ee[3]||"");return{type:"code",raw:Ie,lang:Ee[2]?Ee[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):Ee[2],text:ze}}}heading(ue){const Ee=this.rules.block.heading.exec(ue);if(Ee){let Ie=Ee[2].trim();if(/#$/.test(Ie)){const ze=Ci(Ie,"#");(this.options.pedantic||!ze||/ $/.test(ze))&&(Ie=ze.trim())}return{type:"heading",raw:Ee[0],depth:Ee[1].length,text:Ie,tokens:this.lexer.inline(Ie)}}}hr(ue){const Ee=this.rules.block.hr.exec(ue);if(Ee)return{type:"hr",raw:Ci(Ee[0],`
`)}}blockquote(ue){const Ee=this.rules.block.blockquote.exec(ue);if(Ee){let Ie=Ci(Ee[0],`
`).split(`
`),ze="",Je="";const rt=[];for(;Ie.length>0;){let Ct=!1;const jt=[];let It;for(It=0;It<Ie.length;It++)if(/^ {0,3}>/.test(Ie[It]))jt.push(Ie[It]),Ct=!0;else if(!Ct)jt.push(Ie[It]);else break;Ie=Ie.slice(It);const Ut=jt.join(`
`),Bt=Ut.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");ze=ze?`${ze}
${Ut}`:Ut,Je=Je?`${Je}
${Bt}`:Bt;const Kt=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(Bt,rt,!0),this.lexer.state.top=Kt,Ie.length===0)break;const ct=rt[rt.length-1];if(ct?.type==="code")break;if(ct?.type==="blockquote"){const Ht=ct,Qt=Ht.raw+`
`+Ie.join(`
`),fi=this.blockquote(Qt);rt[rt.length-1]=fi,ze=ze.substring(0,ze.length-Ht.raw.length)+fi.raw,Je=Je.substring(0,Je.length-Ht.text.length)+fi.text;break}else if(ct?.type==="list"){const Ht=ct,Qt=Ht.raw+`
`+Ie.join(`
`),fi=this.list(Qt);rt[rt.length-1]=fi,ze=ze.substring(0,ze.length-ct.raw.length)+fi.raw,Je=Je.substring(0,Je.length-Ht.raw.length)+fi.raw,Ie=Qt.substring(rt[rt.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:ze,tokens:rt,text:Je}}}list(ue){let Ee=this.rules.block.list.exec(ue);if(Ee){let Ie=Ee[1].trim();const ze=Ie.length>1,Je={type:"list",raw:"",ordered:ze,start:ze?+Ie.slice(0,-1):"",loose:!1,items:[]};Ie=ze?`\\d{1,9}\\${Ie.slice(-1)}`:`\\${Ie}`,this.options.pedantic&&(Ie=ze?Ie:"[*+-]");const rt=new RegExp(`^( {0,3}${Ie})((?:[	 ][^\\n]*)?(?:\\n|$))`);let Ct=!1;for(;ue;){let jt=!1,It="",Ut="";if(!(Ee=rt.exec(ue))||this.rules.block.hr.test(ue))break;It=Ee[0],ue=ue.substring(It.length);let Bt=Ee[2].split(`
`,1)[0].replace(/^\t+/,en=>" ".repeat(3*en.length)),Kt=ue.split(`
`,1)[0],ct=!Bt.trim(),Ht=0;if(this.options.pedantic?(Ht=2,Ut=Bt.trimStart()):ct?Ht=Ee[1].length+1:(Ht=Ee[2].search(/[^ ]/),Ht=Ht>4?1:Ht,Ut=Bt.slice(Ht),Ht+=Ee[1].length),ct&&/^ *$/.test(Kt)&&(It+=Kt+`
`,ue=ue.substring(Kt.length+1),jt=!0),!jt){const en=new RegExp(`^ {0,${Math.min(3,Ht-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),di=new RegExp(`^ {0,${Math.min(3,Ht-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),$t=new RegExp(`^ {0,${Math.min(3,Ht-1)}}(?:\`\`\`|~~~)`),vi=new RegExp(`^ {0,${Math.min(3,Ht-1)}}#`);for(;ue;){const Hi=ue.split(`
`,1)[0];if(Kt=Hi,this.options.pedantic&&(Kt=Kt.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),$t.test(Kt)||vi.test(Kt)||en.test(Kt)||di.test(ue))break;if(Kt.search(/[^ ]/)>=Ht||!Kt.trim())Ut+=`
`+Kt.slice(Ht);else{if(ct||Bt.search(/[^ ]/)>=4||$t.test(Bt)||vi.test(Bt)||di.test(Bt))break;Ut+=`
`+Kt}!ct&&!Kt.trim()&&(ct=!0),It+=Hi+`
`,ue=ue.substring(Hi.length+1),Bt=Kt.slice(Ht)}}Je.loose||(Ct?Je.loose=!0:/\n *\n *$/.test(It)&&(Ct=!0));let Qt=null,fi;this.options.gfm&&(Qt=/^\[[ xX]\] /.exec(Ut),Qt&&(fi=Qt[0]!=="[ ] ",Ut=Ut.replace(/^\[[ xX]\] +/,""))),Je.items.push({type:"list_item",raw:It,task:!!Qt,checked:fi,loose:!1,text:Ut,tokens:[]}),Je.raw+=It}Je.items[Je.items.length-1].raw=Je.items[Je.items.length-1].raw.trimEnd(),Je.items[Je.items.length-1].text=Je.items[Je.items.length-1].text.trimEnd(),Je.raw=Je.raw.trimEnd();for(let jt=0;jt<Je.items.length;jt++)if(this.lexer.state.top=!1,Je.items[jt].tokens=this.lexer.blockTokens(Je.items[jt].text,[]),!Je.loose){const It=Je.items[jt].tokens.filter(Bt=>Bt.type==="space"),Ut=It.length>0&&It.some(Bt=>/\n.*\n/.test(Bt.raw));Je.loose=Ut}if(Je.loose)for(let jt=0;jt<Je.items.length;jt++)Je.items[jt].loose=!0;return Je}}html(ue){const Ee=this.rules.block.html.exec(ue);if(Ee)return{type:"html",block:!0,raw:Ee[0],pre:Ee[1]==="pre"||Ee[1]==="script"||Ee[1]==="style",text:Ee[0]}}def(ue){const Ee=this.rules.block.def.exec(ue);if(Ee){const Ie=Ee[1].toLowerCase().replace(/\s+/g," "),ze=Ee[2]?Ee[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",Je=Ee[3]?Ee[3].substring(1,Ee[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):Ee[3];return{type:"def",tag:Ie,raw:Ee[0],href:ze,title:Je}}}table(ue){const Ee=this.rules.block.table.exec(ue);if(!Ee||!/[:|]/.test(Ee[2]))return;const Ie=ai(Ee[1]),ze=Ee[2].replace(/^\||\| *$/g,"").split("|"),Je=Ee[3]&&Ee[3].trim()?Ee[3].replace(/\n[ \t]*$/,"").split(`
`):[],rt={type:"table",raw:Ee[0],header:[],align:[],rows:[]};if(Ie.length===ze.length){for(const Ct of ze)/^ *-+: *$/.test(Ct)?rt.align.push("right"):/^ *:-+: *$/.test(Ct)?rt.align.push("center"):/^ *:-+ *$/.test(Ct)?rt.align.push("left"):rt.align.push(null);for(let Ct=0;Ct<Ie.length;Ct++)rt.header.push({text:Ie[Ct],tokens:this.lexer.inline(Ie[Ct]),header:!0,align:rt.align[Ct]});for(const Ct of Je)rt.rows.push(ai(Ct,rt.header.length).map((jt,It)=>({text:jt,tokens:this.lexer.inline(jt),header:!1,align:rt.align[It]})));return rt}}lheading(ue){const Ee=this.rules.block.lheading.exec(ue);if(Ee)return{type:"heading",raw:Ee[0],depth:Ee[2].charAt(0)==="="?1:2,text:Ee[1],tokens:this.lexer.inline(Ee[1])}}paragraph(ue){const Ee=this.rules.block.paragraph.exec(ue);if(Ee){const Ie=Ee[1].charAt(Ee[1].length-1)===`
`?Ee[1].slice(0,-1):Ee[1];return{type:"paragraph",raw:Ee[0],text:Ie,tokens:this.lexer.inline(Ie)}}}text(ue){const Ee=this.rules.block.text.exec(ue);if(Ee)return{type:"text",raw:Ee[0],text:Ee[0],tokens:this.lexer.inline(Ee[0])}}escape(ue){const Ee=this.rules.inline.escape.exec(ue);if(Ee)return{type:"escape",raw:Ee[0],text:_n(Ee[1])}}tag(ue){const Ee=this.rules.inline.tag.exec(ue);if(Ee)return!this.lexer.state.inLink&&/^<a /i.test(Ee[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(Ee[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(Ee[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(Ee[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:Ee[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:Ee[0]}}link(ue){const Ee=this.rules.inline.link.exec(ue);if(Ee){const Ie=Ee[2].trim();if(!this.options.pedantic&&/^</.test(Ie)){if(!/>$/.test(Ie))return;const rt=Ci(Ie.slice(0,-1),"\\");if((Ie.length-rt.length)%2===0)return}else{const rt=wi(Ee[2],"()");if(rt>-1){const jt=(Ee[0].indexOf("!")===0?5:4)+Ee[1].length+rt;Ee[2]=Ee[2].substring(0,rt),Ee[0]=Ee[0].substring(0,jt).trim(),Ee[3]=""}}let ze=Ee[2],Je="";if(this.options.pedantic){const rt=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(ze);rt&&(ze=rt[1],Je=rt[3])}else Je=Ee[3]?Ee[3].slice(1,-1):"";return ze=ze.trim(),/^</.test(ze)&&(this.options.pedantic&&!/>$/.test(Ie)?ze=ze.slice(1):ze=ze.slice(1,-1)),ji(Ee,{href:ze&&ze.replace(this.rules.inline.anyPunctuation,"$1"),title:Je&&Je.replace(this.rules.inline.anyPunctuation,"$1")},Ee[0],this.lexer)}}reflink(ue,Ee){let Ie;if((Ie=this.rules.inline.reflink.exec(ue))||(Ie=this.rules.inline.nolink.exec(ue))){const ze=(Ie[2]||Ie[1]).replace(/\s+/g," "),Je=Ee[ze.toLowerCase()];if(!Je){const rt=Ie[0].charAt(0);return{type:"text",raw:rt,text:rt}}return ji(Ie,Je,Ie[0],this.lexer)}}emStrong(ue,Ee,Ie=""){let ze=this.rules.inline.emStrongLDelim.exec(ue);if(!ze||ze[3]&&Ie.match(/[\p{L}\p{N}]/u))return;if(!(ze[1]||ze[2]||"")||!Ie||this.rules.inline.punctuation.exec(Ie)){const rt=[...ze[0]].length-1;let Ct,jt,It=rt,Ut=0;const Bt=ze[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(Bt.lastIndex=0,Ee=Ee.slice(-1*ue.length+rt);(ze=Bt.exec(Ee))!=null;){if(Ct=ze[1]||ze[2]||ze[3]||ze[4]||ze[5]||ze[6],!Ct)continue;if(jt=[...Ct].length,ze[3]||ze[4]){It+=jt;continue}else if((ze[5]||ze[6])&&rt%3&&!((rt+jt)%3)){Ut+=jt;continue}if(It-=jt,It>0)continue;jt=Math.min(jt,jt+It+Ut);const Kt=[...ze[0]][0].length,ct=ue.slice(0,rt+ze.index+Kt+jt);if(Math.min(rt,jt)%2){const Qt=ct.slice(1,-1);return{type:"em",raw:ct,text:Qt,tokens:this.lexer.inlineTokens(Qt)}}const Ht=ct.slice(2,-2);return{type:"strong",raw:ct,text:Ht,tokens:this.lexer.inlineTokens(Ht)}}}}codespan(ue){const Ee=this.rules.inline.code.exec(ue);if(Ee){let Ie=Ee[2].replace(/\n/g," ");const ze=/[^ ]/.test(Ie),Je=/^ /.test(Ie)&&/ $/.test(Ie);return ze&&Je&&(Ie=Ie.substring(1,Ie.length-1)),Ie=_n(Ie,!0),{type:"codespan",raw:Ee[0],text:Ie}}}br(ue){const Ee=this.rules.inline.br.exec(ue);if(Ee)return{type:"br",raw:Ee[0]}}del(ue){const Ee=this.rules.inline.del.exec(ue);if(Ee)return{type:"del",raw:Ee[0],text:Ee[2],tokens:this.lexer.inlineTokens(Ee[2])}}autolink(ue){const Ee=this.rules.inline.autolink.exec(ue);if(Ee){let Ie,ze;return Ee[2]==="@"?(Ie=_n(Ee[1]),ze="mailto:"+Ie):(Ie=_n(Ee[1]),ze=Ie),{type:"link",raw:Ee[0],text:Ie,href:ze,tokens:[{type:"text",raw:Ie,text:Ie}]}}}url(ue){let Ee;if(Ee=this.rules.inline.url.exec(ue)){let Ie,ze;if(Ee[2]==="@")Ie=_n(Ee[0]),ze="mailto:"+Ie;else{let Je;do Je=Ee[0],Ee[0]=this.rules.inline._backpedal.exec(Ee[0])?.[0]??"";while(Je!==Ee[0]);Ie=_n(Ee[0]),Ee[1]==="www."?ze="http://"+Ee[0]:ze=Ee[0]}return{type:"link",raw:Ee[0],text:Ie,href:ze,tokens:[{type:"text",raw:Ie,text:Ie}]}}}inlineText(ue){const Ee=this.rules.inline.text.exec(ue);if(Ee){let Ie;return this.lexer.state.inRawBlock?Ie=Ee[0]:Ie=_n(Ee[0]),{type:"text",raw:Ee[0],text:Ie}}}}const nn=/^(?: *(?:\n|$))+/,Dn=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Mi=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Zn=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,us=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,xs=/(?:[*+-]|\d{1,9}[.)])/,Wn=Ne(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,xs).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Rn=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Bn=/^[^\n]+/,ws=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Ln=Ne(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ws).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Qn=Ne(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,xs).getRegex(),hi="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",vt=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ui=Ne("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",vt).replace("tag",hi).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),wt=Ne(Rn).replace("hr",Zn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hi).getRegex(),Ki={blockquote:Ne(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",wt).getRegex(),code:Dn,def:Ln,fences:Mi,heading:us,hr:Zn,html:ui,lheading:Wn,list:Qn,newline:nn,paragraph:wt,table:ei,text:Bn},Tt=Ne("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Zn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hi).getRegex(),$i={...Ki,table:Tt,paragraph:Ne(Rn).replace("hr",Zn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Tt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hi).getRegex()},St={...Ki,html:Ne(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",vt).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ei,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ne(Rn).replace("hr",Zn).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Wn).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},yt=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Yt=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ii=/^( {2,}|\\)\n(?!\s*$)/,Li=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Bi="\\p{P}\\p{S}",Pi=Ne(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Bi).getRegex(),un=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Cn=Ne(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Bi).getRegex(),sn=Ne("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Bi).getRegex(),yn=Ne("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Bi).getRegex(),fs=Ne(/\\([punct])/,"gu").replace(/punct/g,Bi).getRegex(),cs=Ne(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),_s=Ne(vt).replace("(?:-->|$)","-->").getRegex(),Mn=Ne("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",_s).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),vs=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Xi=Ne(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",vs).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Fi=Ne(/^!?\[(label)\]\[(ref)\]/).replace("label",vs).replace("ref",ws).getRegex(),os=Ne(/^!?\[(ref)\](?:\[\])?/).replace("ref",ws).getRegex(),no=Ne("reflink|nolink(?!\\()","g").replace("reflink",Fi).replace("nolink",os).getRegex(),so={_backpedal:ei,anyPunctuation:fs,autolink:cs,blockSkip:un,br:ii,code:Yt,del:ei,emStrongLDelim:Cn,emStrongRDelimAst:sn,emStrongRDelimUnd:yn,escape:yt,link:Xi,nolink:os,punctuation:Pi,reflink:Fi,reflinkSearch:no,tag:Mn,text:Li,url:ei},co={...so,link:Ne(/^!?\[(label)\]\((.*?)\)/).replace("label",vs).getRegex(),reflink:Ne(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",vs).getRegex()},$n={...so,escape:Ne(yt).replace("])","~|])").getRegex(),url:Ne(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Kn={...$n,br:Ne(ii).replace("{2,}","*").getRegex(),text:Ne($n.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Xn={normal:Ki,gfm:$i,pedantic:St},zt={normal:so,gfm:$n,breaks:Kn,pedantic:co};class le{tokens;options;state;tokenizer;inlineQueue;constructor(ue){this.tokens=[],this.tokens.links=Object.create(null),this.options=ue||pt.defaults,this.options.tokenizer=this.options.tokenizer||new dn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const Ee={block:Xn.normal,inline:zt.normal};this.options.pedantic?(Ee.block=Xn.pedantic,Ee.inline=zt.pedantic):this.options.gfm&&(Ee.block=Xn.gfm,this.options.breaks?Ee.inline=zt.breaks:Ee.inline=zt.gfm),this.tokenizer.rules=Ee}static get rules(){return{block:Xn,inline:zt}}static lex(ue,Ee){return new le(Ee).lex(ue)}static lexInline(ue,Ee){return new le(Ee).inlineTokens(ue)}lex(ue){ue=ue.replace(/\r\n|\r/g,`
`),this.blockTokens(ue,this.tokens);for(let Ee=0;Ee<this.inlineQueue.length;Ee++){const Ie=this.inlineQueue[Ee];this.inlineTokens(Ie.src,Ie.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(ue,Ee=[],Ie=!1){this.options.pedantic?ue=ue.replace(/\t/g,"    ").replace(/^ +$/gm,""):ue=ue.replace(/^( *)(\t+)/gm,(Ct,jt,It)=>jt+"    ".repeat(It.length));let ze,Je,rt;for(;ue;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(Ct=>(ze=Ct.call({lexer:this},ue,Ee))?(ue=ue.substring(ze.raw.length),Ee.push(ze),!0):!1))){if(ze=this.tokenizer.space(ue)){ue=ue.substring(ze.raw.length),ze.raw.length===1&&Ee.length>0?Ee[Ee.length-1].raw+=`
`:Ee.push(ze);continue}if(ze=this.tokenizer.code(ue)){ue=ue.substring(ze.raw.length),Je=Ee[Ee.length-1],Je&&(Je.type==="paragraph"||Je.type==="text")?(Je.raw+=`
`+ze.raw,Je.text+=`
`+ze.text,this.inlineQueue[this.inlineQueue.length-1].src=Je.text):Ee.push(ze);continue}if(ze=this.tokenizer.fences(ue)){ue=ue.substring(ze.raw.length),Ee.push(ze);continue}if(ze=this.tokenizer.heading(ue)){ue=ue.substring(ze.raw.length),Ee.push(ze);continue}if(ze=this.tokenizer.hr(ue)){ue=ue.substring(ze.raw.length),Ee.push(ze);continue}if(ze=this.tokenizer.blockquote(ue)){ue=ue.substring(ze.raw.length),Ee.push(ze);continue}if(ze=this.tokenizer.list(ue)){ue=ue.substring(ze.raw.length),Ee.push(ze);continue}if(ze=this.tokenizer.html(ue)){ue=ue.substring(ze.raw.length),Ee.push(ze);continue}if(ze=this.tokenizer.def(ue)){ue=ue.substring(ze.raw.length),Je=Ee[Ee.length-1],Je&&(Je.type==="paragraph"||Je.type==="text")?(Je.raw+=`
`+ze.raw,Je.text+=`
`+ze.raw,this.inlineQueue[this.inlineQueue.length-1].src=Je.text):this.tokens.links[ze.tag]||(this.tokens.links[ze.tag]={href:ze.href,title:ze.title});continue}if(ze=this.tokenizer.table(ue)){ue=ue.substring(ze.raw.length),Ee.push(ze);continue}if(ze=this.tokenizer.lheading(ue)){ue=ue.substring(ze.raw.length),Ee.push(ze);continue}if(rt=ue,this.options.extensions&&this.options.extensions.startBlock){let Ct=1/0;const jt=ue.slice(1);let It;this.options.extensions.startBlock.forEach(Ut=>{It=Ut.call({lexer:this},jt),typeof It=="number"&&It>=0&&(Ct=Math.min(Ct,It))}),Ct<1/0&&Ct>=0&&(rt=ue.substring(0,Ct+1))}if(this.state.top&&(ze=this.tokenizer.paragraph(rt))){Je=Ee[Ee.length-1],Ie&&Je?.type==="paragraph"?(Je.raw+=`
`+ze.raw,Je.text+=`
`+ze.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Je.text):Ee.push(ze),Ie=rt.length!==ue.length,ue=ue.substring(ze.raw.length);continue}if(ze=this.tokenizer.text(ue)){ue=ue.substring(ze.raw.length),Je=Ee[Ee.length-1],Je&&Je.type==="text"?(Je.raw+=`
`+ze.raw,Je.text+=`
`+ze.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Je.text):Ee.push(ze);continue}if(ue){const Ct="Infinite loop on byte: "+ue.charCodeAt(0);if(this.options.silent)break;throw new Error(Ct)}}return this.state.top=!0,Ee}inline(ue,Ee=[]){return this.inlineQueue.push({src:ue,tokens:Ee}),Ee}inlineTokens(ue,Ee=[]){let Ie,ze,Je,rt=ue,Ct,jt,It;if(this.tokens.links){const Ut=Object.keys(this.tokens.links);if(Ut.length>0)for(;(Ct=this.tokenizer.rules.inline.reflinkSearch.exec(rt))!=null;)Ut.includes(Ct[0].slice(Ct[0].lastIndexOf("[")+1,-1))&&(rt=rt.slice(0,Ct.index)+"["+"a".repeat(Ct[0].length-2)+"]"+rt.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Ct=this.tokenizer.rules.inline.blockSkip.exec(rt))!=null;)rt=rt.slice(0,Ct.index)+"["+"a".repeat(Ct[0].length-2)+"]"+rt.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Ct=this.tokenizer.rules.inline.anyPunctuation.exec(rt))!=null;)rt=rt.slice(0,Ct.index)+"++"+rt.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;ue;)if(jt||(It=""),jt=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(Ut=>(Ie=Ut.call({lexer:this},ue,Ee))?(ue=ue.substring(Ie.raw.length),Ee.push(Ie),!0):!1))){if(Ie=this.tokenizer.escape(ue)){ue=ue.substring(Ie.raw.length),Ee.push(Ie);continue}if(Ie=this.tokenizer.tag(ue)){ue=ue.substring(Ie.raw.length),ze=Ee[Ee.length-1],ze&&Ie.type==="text"&&ze.type==="text"?(ze.raw+=Ie.raw,ze.text+=Ie.text):Ee.push(Ie);continue}if(Ie=this.tokenizer.link(ue)){ue=ue.substring(Ie.raw.length),Ee.push(Ie);continue}if(Ie=this.tokenizer.reflink(ue,this.tokens.links)){ue=ue.substring(Ie.raw.length),ze=Ee[Ee.length-1],ze&&Ie.type==="text"&&ze.type==="text"?(ze.raw+=Ie.raw,ze.text+=Ie.text):Ee.push(Ie);continue}if(Ie=this.tokenizer.emStrong(ue,rt,It)){ue=ue.substring(Ie.raw.length),Ee.push(Ie);continue}if(Ie=this.tokenizer.codespan(ue)){ue=ue.substring(Ie.raw.length),Ee.push(Ie);continue}if(Ie=this.tokenizer.br(ue)){ue=ue.substring(Ie.raw.length),Ee.push(Ie);continue}if(Ie=this.tokenizer.del(ue)){ue=ue.substring(Ie.raw.length),Ee.push(Ie);continue}if(Ie=this.tokenizer.autolink(ue)){ue=ue.substring(Ie.raw.length),Ee.push(Ie);continue}if(!this.state.inLink&&(Ie=this.tokenizer.url(ue))){ue=ue.substring(Ie.raw.length),Ee.push(Ie);continue}if(Je=ue,this.options.extensions&&this.options.extensions.startInline){let Ut=1/0;const Bt=ue.slice(1);let Kt;this.options.extensions.startInline.forEach(ct=>{Kt=ct.call({lexer:this},Bt),typeof Kt=="number"&&Kt>=0&&(Ut=Math.min(Ut,Kt))}),Ut<1/0&&Ut>=0&&(Je=ue.substring(0,Ut+1))}if(Ie=this.tokenizer.inlineText(Je)){ue=ue.substring(Ie.raw.length),Ie.raw.slice(-1)!=="_"&&(It=Ie.raw.slice(-1)),jt=!0,ze=Ee[Ee.length-1],ze&&ze.type==="text"?(ze.raw+=Ie.raw,ze.text+=Ie.text):Ee.push(Ie);continue}if(ue){const Ut="Infinite loop on byte: "+ue.charCodeAt(0);if(this.options.silent)break;throw new Error(Ut)}}return Ee}}class Be{options;parser;constructor(ue){this.options=ue||pt.defaults}space(ue){return""}code({text:ue,lang:Ee,escaped:Ie}){const ze=(Ee||"").match(/^\S*/)?.[0],Je=ue.replace(/\n$/,"")+`
`;return ze?'<pre><code class="language-'+_n(ze)+'">'+(Ie?Je:_n(Je,!0))+`</code></pre>
`:"<pre><code>"+(Ie?Je:_n(Je,!0))+`</code></pre>
`}blockquote({tokens:ue}){return`<blockquote>
${this.parser.parse(ue)}</blockquote>
`}html({text:ue}){return ue}heading({tokens:ue,depth:Ee}){return`<h${Ee}>${this.parser.parseInline(ue)}</h${Ee}>
`}hr(ue){return`<hr>
`}list(ue){const Ee=ue.ordered,Ie=ue.start;let ze="";for(let Ct=0;Ct<ue.items.length;Ct++){const jt=ue.items[Ct];ze+=this.listitem(jt)}const Je=Ee?"ol":"ul",rt=Ee&&Ie!==1?' start="'+Ie+'"':"";return"<"+Je+rt+`>
`+ze+"</"+Je+`>
`}listitem(ue){let Ee="";if(ue.task){const Ie=this.checkbox({checked:!!ue.checked});ue.loose?ue.tokens.length>0&&ue.tokens[0].type==="paragraph"?(ue.tokens[0].text=Ie+" "+ue.tokens[0].text,ue.tokens[0].tokens&&ue.tokens[0].tokens.length>0&&ue.tokens[0].tokens[0].type==="text"&&(ue.tokens[0].tokens[0].text=Ie+" "+ue.tokens[0].tokens[0].text)):ue.tokens.unshift({type:"text",raw:Ie+" ",text:Ie+" "}):Ee+=Ie+" "}return Ee+=this.parser.parse(ue.tokens,!!ue.loose),`<li>${Ee}</li>
`}checkbox({checked:ue}){return"<input "+(ue?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:ue}){return`<p>${this.parser.parseInline(ue)}</p>
`}table(ue){let Ee="",Ie="";for(let Je=0;Je<ue.header.length;Je++)Ie+=this.tablecell(ue.header[Je]);Ee+=this.tablerow({text:Ie});let ze="";for(let Je=0;Je<ue.rows.length;Je++){const rt=ue.rows[Je];Ie="";for(let Ct=0;Ct<rt.length;Ct++)Ie+=this.tablecell(rt[Ct]);ze+=this.tablerow({text:Ie})}return ze&&(ze=`<tbody>${ze}</tbody>`),`<table>
<thead>
`+Ee+`</thead>
`+ze+`</table>
`}tablerow({text:ue}){return`<tr>
${ue}</tr>
`}tablecell(ue){const Ee=this.parser.parseInline(ue.tokens),Ie=ue.header?"th":"td";return(ue.align?`<${Ie} align="${ue.align}">`:`<${Ie}>`)+Ee+`</${Ie}>
`}strong({tokens:ue}){return`<strong>${this.parser.parseInline(ue)}</strong>`}em({tokens:ue}){return`<em>${this.parser.parseInline(ue)}</em>`}codespan({text:ue}){return`<code>${ue}</code>`}br(ue){return"<br>"}del({tokens:ue}){return`<del>${this.parser.parseInline(ue)}</del>`}link({href:ue,title:Ee,tokens:Ie}){const ze=this.parser.parseInline(Ie),Je=gt(ue);if(Je===null)return ze;ue=Je;let rt='<a href="'+ue+'"';return Ee&&(rt+=' title="'+Ee+'"'),rt+=">"+ze+"</a>",rt}image({href:ue,title:Ee,text:Ie}){const ze=gt(ue);if(ze===null)return Ie;ue=ze;let Je=`<img src="${ue}" alt="${Ie}"`;return Ee&&(Je+=` title="${Ee}"`),Je+=">",Je}text(ue){return"tokens"in ue&&ue.tokens?this.parser.parseInline(ue.tokens):ue.text}}class ht{strong({text:ue}){return ue}em({text:ue}){return ue}codespan({text:ue}){return ue}del({text:ue}){return ue}html({text:ue}){return ue}text({text:ue}){return ue}link({text:ue}){return""+ue}image({text:ue}){return""+ue}br(){return""}}class Ft{options;renderer;textRenderer;constructor(ue){this.options=ue||pt.defaults,this.options.renderer=this.options.renderer||new Be,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ht}static parse(ue,Ee){return new Ft(Ee).parse(ue)}static parseInline(ue,Ee){return new Ft(Ee).parseInline(ue)}parse(ue,Ee=!0){let Ie="";for(let ze=0;ze<ue.length;ze++){const Je=ue[ze];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Je.type]){const Ct=Je,jt=this.options.extensions.renderers[Ct.type].call({parser:this},Ct);if(jt!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Ct.type)){Ie+=jt||"";continue}}const rt=Je;switch(rt.type){case"space":{Ie+=this.renderer.space(rt);continue}case"hr":{Ie+=this.renderer.hr(rt);continue}case"heading":{Ie+=this.renderer.heading(rt);continue}case"code":{Ie+=this.renderer.code(rt);continue}case"table":{Ie+=this.renderer.table(rt);continue}case"blockquote":{Ie+=this.renderer.blockquote(rt);continue}case"list":{Ie+=this.renderer.list(rt);continue}case"html":{Ie+=this.renderer.html(rt);continue}case"paragraph":{Ie+=this.renderer.paragraph(rt);continue}case"text":{let Ct=rt,jt=this.renderer.text(Ct);for(;ze+1<ue.length&&ue[ze+1].type==="text";)Ct=ue[++ze],jt+=`
`+this.renderer.text(Ct);Ee?Ie+=this.renderer.paragraph({type:"paragraph",raw:jt,text:jt,tokens:[{type:"text",raw:jt,text:jt}]}):Ie+=jt;continue}default:{const Ct='Token with "'+rt.type+'" type was not found.';if(this.options.silent)return"";throw new Error(Ct)}}}return Ie}parseInline(ue,Ee){Ee=Ee||this.renderer;let Ie="";for(let ze=0;ze<ue.length;ze++){const Je=ue[ze];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Je.type]){const Ct=this.options.extensions.renderers[Je.type].call({parser:this},Je);if(Ct!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Je.type)){Ie+=Ct||"";continue}}const rt=Je;switch(rt.type){case"escape":{Ie+=Ee.text(rt);break}case"html":{Ie+=Ee.html(rt);break}case"link":{Ie+=Ee.link(rt);break}case"image":{Ie+=Ee.image(rt);break}case"strong":{Ie+=Ee.strong(rt);break}case"em":{Ie+=Ee.em(rt);break}case"codespan":{Ie+=Ee.codespan(rt);break}case"br":{Ie+=Ee.br(rt);break}case"del":{Ie+=Ee.del(rt);break}case"text":{Ie+=Ee.text(rt);break}default:{const Ct='Token with "'+rt.type+'" type was not found.';if(this.options.silent)return"";throw new Error(Ct)}}}return Ie}}class Ot{options;constructor(ue){this.options=ue||pt.defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(ue){return ue}postprocess(ue){return ue}processAllTokens(ue){return ue}}class qt{defaults=et();options=this.setOptions;parse=this.parseMarkdown(le.lex,Ft.parse);parseInline=this.parseMarkdown(le.lexInline,Ft.parseInline);Parser=Ft;Renderer=Be;TextRenderer=ht;Lexer=le;Tokenizer=dn;Hooks=Ot;constructor(...ue){this.use(...ue)}walkTokens(ue,Ee){let Ie=[];for(const ze of ue)switch(Ie=Ie.concat(Ee.call(this,ze)),ze.type){case"table":{const Je=ze;for(const rt of Je.header)Ie=Ie.concat(this.walkTokens(rt.tokens,Ee));for(const rt of Je.rows)for(const Ct of rt)Ie=Ie.concat(this.walkTokens(Ct.tokens,Ee));break}case"list":{const Je=ze;Ie=Ie.concat(this.walkTokens(Je.items,Ee));break}default:{const Je=ze;this.defaults.extensions?.childTokens?.[Je.type]?this.defaults.extensions.childTokens[Je.type].forEach(rt=>{const Ct=Je[rt].flat(1/0);Ie=Ie.concat(this.walkTokens(Ct,Ee))}):Je.tokens&&(Ie=Ie.concat(this.walkTokens(Je.tokens,Ee)))}}return Ie}use(...ue){const Ee=this.defaults.extensions||{renderers:{},childTokens:{}};return ue.forEach(Ie=>{const ze={...Ie};if(ze.async=this.defaults.async||ze.async||!1,Ie.extensions&&(Ie.extensions.forEach(Je=>{if(!Je.name)throw new Error("extension name required");if("renderer"in Je){const rt=Ee.renderers[Je.name];rt?Ee.renderers[Je.name]=function(...Ct){let jt=Je.renderer.apply(this,Ct);return jt===!1&&(jt=rt.apply(this,Ct)),jt}:Ee.renderers[Je.name]=Je.renderer}if("tokenizer"in Je){if(!Je.level||Je.level!=="block"&&Je.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const rt=Ee[Je.level];rt?rt.unshift(Je.tokenizer):Ee[Je.level]=[Je.tokenizer],Je.start&&(Je.level==="block"?Ee.startBlock?Ee.startBlock.push(Je.start):Ee.startBlock=[Je.start]:Je.level==="inline"&&(Ee.startInline?Ee.startInline.push(Je.start):Ee.startInline=[Je.start]))}"childTokens"in Je&&Je.childTokens&&(Ee.childTokens[Je.name]=Je.childTokens)}),ze.extensions=Ee),Ie.renderer){const Je=this.defaults.renderer||new Be(this.defaults);for(const rt in Ie.renderer){if(!(rt in Je))throw new Error(`renderer '${rt}' does not exist`);if(["options","parser"].includes(rt))continue;const Ct=rt,jt=Ie.renderer[Ct],It=Je[Ct];Je[Ct]=(...Ut)=>{let Bt=jt.apply(Je,Ut);return Bt===!1&&(Bt=It.apply(Je,Ut)),Bt||""}}ze.renderer=Je}if(Ie.tokenizer){const Je=this.defaults.tokenizer||new dn(this.defaults);for(const rt in Ie.tokenizer){if(!(rt in Je))throw new Error(`tokenizer '${rt}' does not exist`);if(["options","rules","lexer"].includes(rt))continue;const Ct=rt,jt=Ie.tokenizer[Ct],It=Je[Ct];Je[Ct]=(...Ut)=>{let Bt=jt.apply(Je,Ut);return Bt===!1&&(Bt=It.apply(Je,Ut)),Bt}}ze.tokenizer=Je}if(Ie.hooks){const Je=this.defaults.hooks||new Ot;for(const rt in Ie.hooks){if(!(rt in Je))throw new Error(`hook '${rt}' does not exist`);if(rt==="options")continue;const Ct=rt,jt=Ie.hooks[Ct],It=Je[Ct];Ot.passThroughHooks.has(rt)?Je[Ct]=Ut=>{if(this.defaults.async)return Promise.resolve(jt.call(Je,Ut)).then(Kt=>It.call(Je,Kt));const Bt=jt.call(Je,Ut);return It.call(Je,Bt)}:Je[Ct]=(...Ut)=>{let Bt=jt.apply(Je,Ut);return Bt===!1&&(Bt=It.apply(Je,Ut)),Bt}}ze.hooks=Je}if(Ie.walkTokens){const Je=this.defaults.walkTokens,rt=Ie.walkTokens;ze.walkTokens=function(Ct){let jt=[];return jt.push(rt.call(this,Ct)),Je&&(jt=jt.concat(Je.call(this,Ct))),jt}}this.defaults={...this.defaults,...ze}}),this}setOptions(ue){return this.defaults={...this.defaults,...ue},this}lexer(ue,Ee){return le.lex(ue,Ee??this.defaults)}parser(ue,Ee){return Ft.parse(ue,Ee??this.defaults)}parseMarkdown(ue,Ee){return(ze,Je)=>{const rt={...Je},Ct={...this.defaults,...rt},jt=this.onError(!!Ct.silent,!!Ct.async);if(this.defaults.async===!0&&rt.async===!1)return jt(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof ze>"u"||ze===null)return jt(new Error("marked(): input parameter is undefined or null"));if(typeof ze!="string")return jt(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ze)+", string expected"));if(Ct.hooks&&(Ct.hooks.options=Ct),Ct.async)return Promise.resolve(Ct.hooks?Ct.hooks.preprocess(ze):ze).then(It=>ue(It,Ct)).then(It=>Ct.hooks?Ct.hooks.processAllTokens(It):It).then(It=>Ct.walkTokens?Promise.all(this.walkTokens(It,Ct.walkTokens)).then(()=>It):It).then(It=>Ee(It,Ct)).then(It=>Ct.hooks?Ct.hooks.postprocess(It):It).catch(jt);try{Ct.hooks&&(ze=Ct.hooks.preprocess(ze));let It=ue(ze,Ct);Ct.hooks&&(It=Ct.hooks.processAllTokens(It)),Ct.walkTokens&&this.walkTokens(It,Ct.walkTokens);let Ut=Ee(It,Ct);return Ct.hooks&&(Ut=Ct.hooks.postprocess(Ut)),Ut}catch(It){return jt(It)}}}onError(ue,Ee){return Ie=>{if(Ie.message+=`
Please report this to https://github.com/markedjs/marked.`,ue){const ze="<p>An error occurred:</p><pre>"+_n(Ie.message+"",!0)+"</pre>";return Ee?Promise.resolve(ze):ze}if(Ee)return Promise.reject(Ie);throw Ie}}}const Si=new qt;function mi(_e,ue){return Si.parse(_e,ue)}mi.options=mi.setOptions=function(_e){return Si.setOptions(_e),mi.defaults=Si.defaults,Zt(mi.defaults),mi},mi.getDefaults=et,mi.defaults=pt.defaults,mi.use=function(..._e){return Si.use(..._e),mi.defaults=Si.defaults,Zt(mi.defaults),mi},mi.walkTokens=function(_e,ue){return Si.walkTokens(_e,ue)},mi.parseInline=Si.parseInline,mi.Parser=Ft,mi.parser=Ft.parse,mi.Renderer=Be,mi.TextRenderer=ht,mi.Lexer=le,mi.lexer=le.lex,mi.Tokenizer=dn,mi.Hooks=Ot,mi.parse=mi;const qi=mi.options,Wi=mi.setOptions,Ei=mi.use,Qi=mi.walkTokens,on=mi.parseInline,an=mi,Zi=Ft.parse,Et=le.lex;pt.Hooks=Ot,pt.Lexer=le,pt.Marked=qt,pt.Parser=Ft,pt.Renderer=Be,pt.TextRenderer=ht,pt.Tokenizer=dn,pt.getDefaults=et,pt.lexer=Et,pt.marked=mi,pt.options=qi,pt.parse=an,pt.parseInline=on,pt.parser=Zi,pt.setOptions=Wi,pt.use=Ei,pt.walkTokens=Qi})})();var S=m.Hooks||exports.Hooks,D=m.Lexer||exports.Lexer,E=m.Marked||exports.Marked,B=m.Parser||exports.Parser,R=m.Renderer||exports.Renderer,z=m.TextRenderer||exports.TextRenderer,W=m.Tokenizer||exports.Tokenizer,$=m.defaults||exports.defaults,Q=m.getDefaults||exports.getDefaults,q=m.lexer||exports.lexer,ne=m.marked||exports.marked,ve=m.options||exports.options,Re=m.parse||exports.parse,Ae=m.parseInline||exports.parseInline,re=m.parser||exports.parser,K=m.setOptions||exports.setOptions,F=m.use||exports.use,N=m.walkTokens||exports.walkTokens,j=c(24385),me=c(54021),ce=c(3223),he=c(38266),Le=c(85565),Y=c(37473);const ae=Object.freeze({image:({href:Fe,title:pt,text:et})=>{let Zt=[],bi=[];return Fe&&({href:Fe,dimensions:Zt}=(0,b.nI)(Fe),bi.push(`src="${(0,b.oO)(Fe)}"`)),et&&bi.push(`alt="${(0,b.oO)(et)}"`),pt&&bi.push(`title="${(0,b.oO)(pt)}"`),Zt.length&&(bi=bi.concat(Zt)),"<img "+bi.join(" ")+">"},paragraph({tokens:Fe}){return`<p>${this.parser.parseInline(Fe)}</p>`},link({href:Fe,title:pt,tokens:et}){let Zt=this.parser.parseInline(et);return typeof Fe!="string"?"":(Fe===Zt&&(Zt=(0,b._W)(Zt)),pt=typeof pt=="string"?(0,b.oO)((0,b._W)(pt)):"",Fe=(0,b._W)(Fe),Fe=Fe.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${Fe}" title="${pt||Fe}" draggable="false">${Zt}</a>`)}});function Ce(Fe,pt={},et={}){const Zt=new d.Cm;let bi=!1;const ci=(0,P.n)(pt),Oi=function(ai){let Ci;try{Ci=(0,j.qg)(decodeURIComponent(ai))}catch{}return Ci?(Ci=(0,ce.PI)(Ci,wi=>{if(Fe.uris&&Fe.uris[wi])return Y.r.revive(Fe.uris[wi])}),encodeURIComponent(JSON.stringify(Ci))):ai},Ii=function(ai,Ci){const wi=Fe.uris&&Fe.uris[ai];let ji=Y.r.revive(wi);return Ci?ai.startsWith(me.ny.data+":")?ai:(ji||(ji=Y.r.parse(ai)),me.zl.uriToBrowserUri(ji).toString(!0)):!ji||Y.r.parse(ai).toString()===ji.toString()?ai:(ji.query&&(ji=ji.with({query:Oi(ji.query)})),ji.toString())},yi=new R;yi.image=ae.image,yi.link=ae.link,yi.paragraph=ae.paragraph;const Vt=[],_n=[];if(pt.codeBlockRendererSync?yi.code=({text:ai,lang:Ci})=>{const wi=v.r.nextId(),ji=pt.codeBlockRendererSync(Pe(Ci),ai);return _n.push([wi,ji]),`<div class="code" data-code="${wi}">${(0,Le.ih)(ai)}</div>`}:pt.codeBlockRenderer&&(yi.code=({text:ai,lang:Ci})=>{const wi=v.r.nextId(),ji=pt.codeBlockRenderer(Pe(Ci),ai);return Vt.push(ji.then(Di=>[wi,Di])),`<div class="code" data-code="${wi}">${(0,Le.ih)(ai)}</div>`}),pt.actionHandler){const ai=function(ji){let Di=ji.target;if(!(Di.tagName!=="A"&&(Di=Di.parentElement,!Di||Di.tagName!=="A")))try{let dn=Di.dataset.href;dn&&(Fe.baseUri&&(dn=ye(Y.r.from(Fe.baseUri),dn)),pt.actionHandler.callback(dn,ji))}catch(dn){(0,A.dz)(dn)}finally{ji.preventDefault()}},Ci=pt.actionHandler.disposables.add(new U.f(ci,"click")),wi=pt.actionHandler.disposables.add(new U.f(ci,"auxclick"));pt.actionHandler.disposables.add(I.Jh.any(Ci.event,wi.event)(ji=>{const Di=new w.P(u.zk(ci),ji);!Di.leftButton&&!Di.middleButton||ai(Di)})),pt.actionHandler.disposables.add(u.ko(ci,"keydown",ji=>{const Di=new M.Z(ji);!Di.equals(10)&&!Di.equals(3)||ai(Di)}))}Fe.supportHtml||(yi.html=({text:ai})=>pt.sanitizerOptions?.replaceWithPlaintext?(0,Le.ih)(ai):(Fe.isTrusted?ai.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?ai:""),et.renderer=yi;let oi=Fe.value??"";oi.length>1e5&&(oi=`${oi.substr(0,1e5)}\u2026`),Fe.supportThemeIcons&&(oi=(0,C.sA)(oi));let Ne;if(pt.fillInIncompleteTokens){const ai={...$,...et},Ci=q(oi,ai),wi=Te(Ci);Ne=re(wi,ai)}else Ne=Re(oi,{...et,async:!1});Fe.supportThemeIcons&&(Ne=(0,O.n)(Ne).map(Ci=>typeof Ci=="string"?Ci:Ci.outerHTML).join(""));const ei=new DOMParser().parseFromString(qe({isTrusted:Fe.isTrusted,...pt.sanitizerOptions},Ne),"text/html");if(ei.body.querySelectorAll("img, audio, video, source").forEach(ai=>{const Ci=ai.getAttribute("src");if(Ci){let wi=Ci;try{Fe.baseUri&&(wi=ye(Y.r.from(Fe.baseUri),wi))}catch{}if(ai.setAttribute("src",Ii(wi,!0)),pt.remoteImageIsAllowed){const ji=Y.r.parse(wi);ji.scheme!==me.ny.file&&ji.scheme!==me.ny.data&&!pt.remoteImageIsAllowed(ji)&&ai.replaceWith(u.$("",void 0,ai.outerHTML))}}}),ei.body.querySelectorAll("a").forEach(ai=>{const Ci=ai.getAttribute("href");if(ai.setAttribute("href",""),!Ci||/^data:|javascript:/i.test(Ci)||/^command:/i.test(Ci)&&!Fe.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(Ci))ai.replaceWith(...ai.childNodes);else{let wi=Ii(Ci,!1);Fe.baseUri&&(wi=ye(Y.r.from(Fe.baseUri),Ci)),ai.dataset.href=wi}}),ci.innerHTML=qe({isTrusted:Fe.isTrusted,...pt.sanitizerOptions},ei.body.innerHTML),Vt.length>0)Promise.all(Vt).then(ai=>{if(bi)return;const Ci=new Map(ai),wi=ci.querySelectorAll("div[data-code]");for(const ji of wi){const Di=Ci.get(ji.dataset.code??"");Di&&u.Ln(ji,Di)}pt.asyncRenderCallback?.()});else if(_n.length>0){const ai=new Map(_n),Ci=ci.querySelectorAll("div[data-code]");for(const wi of Ci){const ji=ai.get(wi.dataset.code??"");ji&&u.Ln(wi,ji)}}if(pt.asyncRenderCallback)for(const ai of ci.getElementsByTagName("img")){const Ci=Zt.add(u.ko(ai,"load",()=>{Ci.dispose(),pt.asyncRenderCallback()}))}return{element:ci,dispose:()=>{bi=!0,Zt.dispose()}}}function Pe(Fe){if(!Fe)return"";const pt=Fe.split(/[\s+|:|,|\{|\?]/,1);return pt.length?pt[0]:Fe}function ye(Fe,pt){return/^\w[\w\d+.-]*:/.test(pt)?pt:Fe.path.endsWith("/")?(0,he.o1)(Fe,pt).toString():(0,he.o1)((0,he.pD)(Fe),pt).toString()}const Ke=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function qe(Fe,pt){const{config:et,allowedSchemes:Zt}=x(Fe),bi=new d.Cm;bi.add(Z("uponSanitizeAttribute",(ci,Oi)=>{if(Oi.attrName==="style"||Oi.attrName==="class"){if(ci.tagName==="SPAN"){if(Oi.attrName==="style"){Oi.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(border-radius:[0-9]+px;)?$/.test(Oi.attrValue);return}else if(Oi.attrName==="class"){Oi.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(Oi.attrValue);return}}Oi.keepAttr=!1;return}else if(ci.tagName==="INPUT"&&ci.attributes.getNamedItem("type")?.value==="checkbox"){if(Oi.attrName==="type"&&Oi.attrValue==="checkbox"||Oi.attrName==="disabled"||Oi.attrName==="checked"){Oi.keepAttr=!0;return}Oi.keepAttr=!1}})),bi.add(Z("uponSanitizeElement",(ci,Oi)=>{if(Oi.tagName==="input"&&(ci.attributes.getNamedItem("type")?.value==="checkbox"?ci.setAttribute("disabled",""):Fe.replaceWithPlaintext||ci.remove()),Fe.replaceWithPlaintext&&!Oi.allowedTags[Oi.tagName]&&Oi.tagName!=="body"&&ci.parentElement){let Ii,yi;if(Oi.tagName==="#comment")Ii=`<!--${ci.textContent}-->`;else{const Ne=Ke.includes(Oi.tagName),gt=ci.attributes.length?" "+Array.from(ci.attributes).map(ei=>`${ei.name}="${ei.value}"`).join(" "):"";Ii=`<${Oi.tagName}${gt}>`,Ne||(yi=`</${Oi.tagName}>`)}const Vt=document.createDocumentFragment(),_n=ci.parentElement.ownerDocument.createTextNode(Ii);Vt.appendChild(_n);const oi=yi?ci.parentElement.ownerDocument.createTextNode(yi):void 0;for(;ci.firstChild;)Vt.appendChild(ci.firstChild);oi&&Vt.appendChild(oi),ci.nodeType===Node.COMMENT_NODE?ci.parentElement.insertBefore(Vt,ci):ci.parentElement.replaceChild(Vt,ci)}})),bi.add(u.a4(Zt));try{return G.aj(pt,{...et,RETURN_TRUSTED_TYPE:!0})}finally{bi.dispose()}}const Ue=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function x(Fe){const pt=[me.ny.http,me.ny.https,me.ny.mailto,me.ny.data,me.ny.file,me.ny.vscodeFileResource,me.ny.vscodeRemote,me.ny.vscodeRemoteResource];return Fe.isTrusted&&pt.push(me.ny.command),{config:{ALLOWED_TAGS:Fe.allowedTags??[...u.TT],ALLOWED_ATTR:Ue,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:pt}}function it(Fe){return typeof Fe=="string"?Fe:Ze(Fe)}function Ze(Fe,pt){let et=Fe.value??"";et.length>1e5&&(et=`${et.substr(0,1e5)}\u2026`);const Zt=Re(et,{async:!1,renderer:pt?Wt.value:Pt.value}).replace(/&(#\d+|[a-zA-Z]+);/g,bi=>_t.get(bi)??bi);return qe({isTrusted:!1},Zt).toString()}const _t=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function ot(){const Fe=new R;return Fe.code=({text:pt})=>pt,Fe.blockquote=({text:pt})=>pt+`
`,Fe.html=pt=>"",Fe.heading=function({tokens:pt}){return this.parser.parseInline(pt)+`
`},Fe.hr=()=>"",Fe.list=function({items:pt}){return pt.map(et=>this.listitem(et)).join(`
`)+`
`},Fe.listitem=({text:pt})=>pt+`
`,Fe.paragraph=function({tokens:pt}){return this.parser.parseInline(pt)+`
`},Fe.table=function({header:pt,rows:et}){return pt.map(Zt=>this.tablecell(Zt)).join(" ")+`
`+et.map(Zt=>Zt.map(bi=>this.tablecell(bi)).join(" ")).join(`
`)+`
`},Fe.tablerow=({text:pt})=>pt,Fe.tablecell=function({tokens:pt}){return this.parser.parseInline(pt)},Fe.strong=({text:pt})=>pt,Fe.em=({text:pt})=>pt,Fe.codespan=({text:pt})=>pt,Fe.br=pt=>`
`,Fe.del=({text:pt})=>pt,Fe.image=pt=>"",Fe.text=({text:pt})=>pt,Fe.link=({text:pt})=>pt,Fe}const Pt=new _.d(Fe=>ot()),Wt=new _.d(()=>{const Fe=ot();return Fe.code=({text:pt})=>`
\`\`\`
${pt}
\`\`\`
`,Fe});function Rt(Fe){let pt="";return Fe.forEach(et=>{pt+=et.raw}),pt}function at(Fe){if(Fe.tokens)for(let pt=Fe.tokens.length-1;pt>=0;pt--){const et=Fe.tokens[pt];if(et.type==="text"){const Zt=et.raw.split(`
`),bi=Zt[Zt.length-1];if(bi.includes("`"))return We(Fe);if(bi.includes("**"))return we(Fe);if(bi.match(/\*\w/))return dt(Fe);if(bi.match(/(^|\s)__\w/))return Xt(Fe);if(bi.match(/(^|\s)_\w/))return Ye(Fe);if(Xe(bi)||pe(bi)&&Fe.tokens.slice(0,pt).some(ci=>ci.type==="text"&&ci.raw.match(/\[[^\]]*$/))){const ci=Fe.tokens.slice(pt+1);return ci[0]?.type==="link"&&ci[1]?.type==="text"&&ci[1].raw.match(/^ *"[^"]*$/)||bi.match(/^[^"]* +"[^"]*$/)?Dt(Fe):mt(Fe)}else if(bi.match(/(^|\s)\[\w*/))return Se(Fe)}}}function Xe(Fe){return!!Fe.match(/(^|\s)\[.*\]\(\w*/)}function pe(Fe){return!!Fe.match(/^[^\[]*\]\([^\)]*$/)}function te(Fe){const pt=Fe.items[Fe.items.length-1],et=pt.tokens?pt.tokens[pt.tokens.length-1]:void 0;let Zt;if(et?.type==="text"&&!("inRawBlock"in pt)&&(Zt=at(et)),!Zt||Zt.type!=="paragraph")return;const bi=Rt(Fe.items.slice(0,-1)),ci=pt.raw.match(/^(\s*(-|\d+\.|\*) +)/)?.[0];if(!ci)return;const Oi=ci+Rt(pt.tokens.slice(0,-1))+Zt.raw,Ii=q(bi+Oi)[0];if(Ii.type==="list")return Ii}const oe=3;function Te(Fe){for(let pt=0;pt<oe;pt++){const et=Ve(Fe);if(et)Fe=et;else break}return Fe}function Ve(Fe){let pt,et;for(pt=0;pt<Fe.length;pt++){const Zt=Fe[pt];if(Zt.type==="paragraph"&&Zt.raw.match(/(\n|^)\|/)){et=ke(Fe.slice(pt));break}if(pt===Fe.length-1&&Zt.type==="list"){const bi=te(Zt);if(bi){et=[bi];break}}if(pt===Fe.length-1&&Zt.type==="paragraph"){const bi=at(Zt);if(bi){et=[bi];break}}}if(et){const Zt=[...Fe.slice(0,pt),...et];return Zt.links=Fe.links,Zt}return null}function We(Fe){return ri(Fe,"`")}function dt(Fe){return ri(Fe,"*")}function Ye(Fe){return ri(Fe,"_")}function mt(Fe){return ri(Fe,")")}function Dt(Fe){return ri(Fe,'")')}function Se(Fe){return ri(Fe,"](https://microsoft.com)")}function we(Fe){return ri(Fe,"**")}function Xt(Fe){return ri(Fe,"__")}function ri(Fe,pt){const et=Rt(Array.isArray(Fe)?Fe:[Fe]);return q(et+pt)[0]}function ke(Fe){const pt=Rt(Fe),et=pt.split(`
`);let Zt,bi=!1;for(let ci=0;ci<et.length;ci++){const Oi=et[ci].trim();if(typeof Zt>"u"&&Oi.match(/^\s*\|/)){const Ii=Oi.match(/(\|[^\|]+)(?=\||$)/g);Ii&&(Zt=Ii.length)}else if(typeof Zt=="number")if(Oi.match(/^\s*\|/)){if(ci!==et.length-1)return;bi=!0}else return}if(typeof Zt=="number"&&Zt>0){const ci=bi?et.slice(0,-1).join(`
`):pt,Oi=!!ci.match(/\|\s*$/),Ii=ci+(Oi?"":"|")+`
|${" --- |".repeat(Zt)}`;return q(Ii)}}function Z(Fe,pt){return G.$w(Fe,pt),(0,d.s)(()=>G.SV(Fe))}},30217:(Mt,He,c)=>{c.d(He,{D7:()=>v,SN:()=>C,Ux:()=>b,c6:()=>A,dd:()=>O,g$:()=>w,pm:()=>I});var u=c(45573),G=c(24167),U=c(48391),P=c(44),M=c(4034);const w=(0,G.x1)("menu.border",{dark:null,light:null,hcDark:U.b1,hcLight:U.b1},u.kg("menuBorder","Border color of menus.")),O=(0,G.x1)("menu.foreground",P.yq,u.kg("menuForeground","Foreground color of menu items.")),A=(0,G.x1)("menu.background",P.rv,u.kg("menuBackground","Background color of menu items.")),I=(0,G.x1)("menu.selectionForeground",M.GV,u.kg("menuSelectionForeground","Foreground color of the selected menu item in menus.")),b=(0,G.x1)("menu.selectionBackground",M.Rj,u.kg("menuSelectionBackground","Background color of the selected menu item in menus.")),C=(0,G.x1)("menu.selectionBorder",{dark:null,light:null,hcDark:U.bu,hcLight:U.bu},u.kg("menuSelectionBorder","Border color of the selected menu item in menus.")),v=(0,G.x1)("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:U.b1,hcLight:U.b1},u.kg("menuSeparatorBackground","Color of a separator menu item in menus."))},31450:(Mt,He,c)=>{c.d(He,{Z:()=>M});var u=c(37486),G=c(70679),U=c(3960);class P extends G.ZK{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(O,A,I){super(),this._debugNameData=O,this._equalityComparator=I,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=A}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const O of this.observers)for(const A of this._deltas)O.handleChange(this,A);this._deltas.length=0}else for(const O of this.observers)O.handleChange(this,void 0)}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const O of this.observers)O.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const O=[...this.observers];for(const A of O)A.endUpdate(this)}}addObserver(O){const A=!this.observers.has(O)&&this._updateCounter>0;super.addObserver(O),A&&O.beginUpdate(this)}removeObserver(O){const A=this.observers.has(O)&&this._updateCounter>0;super.removeObserver(O),A&&O.endUpdate(this)}set(O,A,I){if(I===void 0&&this._equalityComparator(this._value,O))return;let b;A||(A=b=new G.XL(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(O),I!==void 0&&this._deltas.push(I),A.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(C,v)=>{},handlePossibleChange:C=>{}},this),this._updateCounter>1)for(const C of this.observers)C.handlePossibleChange(this)}finally{b&&b.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(O){this._value=O}}function M(w,O){return w.lazy?new P(new U.nA(w.owner,w.debugName,void 0),O,w.equalsFn??u.nx):new G.Lj(new U.nA(w.owner,w.debugName,void 0),O,w.equalsFn??u.nx)}},31938:(Mt,He,c)=>{c.d(He,{$:()=>Dn,BC:()=>Ci,BK:()=>x,Be:()=>Y,Bx:()=>yi,CE:()=>Wn,Cl:()=>pe,Di:()=>ui,Ej:()=>Ue,Er:()=>Oi,Fv:()=>Q,H4:()=>ot,Hs:()=>wi,Ij:()=>ce,Iv:()=>W,L9:()=>Ce,Ln:()=>ji,Mc:()=>Tt,OK:()=>Pt,Oq:()=>he,PG:()=>Le,Pl:()=>ai,Q2:()=>B,QX:()=>Wt,TT:()=>hi,Tf:()=>Bn,Tr:()=>Ze,U2:()=>pt,U3:()=>me,WU:()=>Zn,Wt:()=>Fe,X7:()=>Te,XD:()=>at,Xc:()=>K,ZF:()=>R,a:()=>We,a4:()=>Qn,b2:()=>re,bo:()=>Mi,bq:()=>oe,cL:()=>qe,fg:()=>Ke,fs:()=>_n,fz:()=>dt,gI:()=>Ln,h:()=>Ki,i0:()=>Rn,jD:()=>us,jG:()=>te,jh:()=>mt,ko:()=>ve,kx:()=>Ii,li:()=>Se,mU:()=>it,nR:()=>Ve,nY:()=>bi,pN:()=>wt,q3:()=>$,sb:()=>Zt,sd:()=>Vt,tG:()=>Pe,vT:()=>xs,w5:()=>ei,w_:()=>q,wk:()=>Ne,xZ:()=>ci,y6:()=>_t,yt:()=>ws,zK:()=>oi,zk:()=>m});var u=c(38594),G=c(926),U=c(15625),P=c(25334),M=c(37519),w=c(87856),O=c(56491),A=c(46625),I=c(60599),b=c(54021),C=c(90692),v=c(79475),_=c(42008);const{registerWindow:d,getWindow:m,getDocument:S,getWindows:D,getWindowsCount:E,getWindowId:B,getWindowById:R,hasWindow:z,onDidRegisterWindow:W,onWillUnregisterWindow:$,onDidUnregisterWindow:Q}=function(){const St=new Map;(0,_.y)(_.G,1);const yt={window:_.G,disposables:new I.Cm};St.set(_.G.vscodeWindowId,yt);const Yt=new O.vl,ii=new O.vl,Li=new O.vl;function Bi(Pi,un){return(typeof Pi=="number"?St.get(Pi):void 0)??(un?yt:void 0)}return{onDidRegisterWindow:Yt.event,onWillUnregisterWindow:Li.event,onDidUnregisterWindow:ii.event,registerWindow(Pi){if(St.has(Pi.vscodeWindowId))return I.jG.None;const un=new I.Cm,Cn={window:Pi,disposables:un.add(new I.Cm)};return St.set(Pi.vscodeWindowId,Cn),un.add((0,I.s)(()=>{St.delete(Pi.vscodeWindowId),ii.fire(Pi)})),un.add(ve(Pi,yi.BEFORE_UNLOAD,()=>{Li.fire(Pi)})),Yt.fire(Cn),un},getWindows(){return St.values()},getWindowsCount(){return St.size},getWindowId(Pi){return Pi.vscodeWindowId},hasWindow(Pi){return St.has(Pi)},getWindowById:Bi,getWindow(Pi){const un=Pi;if(un?.ownerDocument?.defaultView)return un.ownerDocument.defaultView.window;const Cn=Pi;return Cn?.view?Cn.view.window:_.G},getDocument(Pi){return m(Pi).document}}}();function q(St){for(;St.firstChild;)St.firstChild.remove()}class ne{constructor(yt,Yt,ii,Li){this._node=yt,this._type=Yt,this._handler=ii,this._options=Li||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function ve(St,yt,Yt,ii){return new ne(St,yt,Yt,ii)}function Re(St,yt){return function(Yt){return yt(new P.P(St,Yt))}}function Ae(St){return function(yt){return St(new U.Z(yt))}}const re=function(yt,Yt,ii,Li){let Bi=ii;return Yt==="click"||Yt==="mousedown"||Yt==="contextmenu"?Bi=Re(m(yt),ii):(Yt==="keydown"||Yt==="keypress"||Yt==="keyup")&&(Bi=Ae(ii)),ve(yt,Yt,Bi,Li)},K=function(yt,Yt,ii){const Li=Re(m(yt),Yt);return N(yt,Li,ii)},F=function(yt,Yt,ii){const Li=Re(m(yt),Yt);return j(yt,Li,ii)};function N(St,yt,Yt){return ve(St,C.un&&G.e.pointerEvents?yi.POINTER_DOWN:yi.MOUSE_DOWN,yt,Yt)}function j(St,yt,Yt){return ve(St,platform.isIOS&&BrowserFeatures.pointerEvents?yi.POINTER_UP:yi.MOUSE_UP,yt,Yt)}function me(St,yt,Yt){return(0,M.b7)(St,yt,Yt)}class ce extends M.A0{constructor(yt,Yt){super(yt,Yt)}}let he,Le;class Y extends M.vb{constructor(yt){super(),this.defaultTarget=yt&&m(yt)}cancelAndSet(yt,Yt,ii){return super.cancelAndSet(yt,Yt,ii??this.defaultTarget)}}class ae{constructor(yt,Yt=0){this._runner=yt,this.priority=Yt,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(yt){(0,w.dz)(yt)}}static sort(yt,Yt){return Yt.priority-yt.priority}}(function(){const St=new Map,yt=new Map,Yt=new Map,ii=new Map,Li=Bi=>{Yt.set(Bi,!1);const Pi=St.get(Bi)??[];for(yt.set(Bi,Pi),St.set(Bi,[]),ii.set(Bi,!0);Pi.length>0;)Pi.sort(ae.sort),Pi.shift().execute();ii.set(Bi,!1)};Le=(Bi,Pi,un=0)=>{const Cn=B(Bi),sn=new ae(Pi,un);let yn=St.get(Cn);return yn||(yn=[],St.set(Cn,yn)),yn.push(sn),Yt.get(Cn)||(Yt.set(Cn,!0),Bi.requestAnimationFrame(()=>Li(Cn))),sn},he=(Bi,Pi,un)=>{const Cn=B(Bi);if(ii.get(Cn)){const sn=new ae(Pi,un);let yn=yt.get(Cn);return yn||(yn=[],yt.set(Cn,yn)),yn.push(sn),sn}else return Le(Bi,Pi,un)}})();function Ce(St){return m(St).getComputedStyle(St,null)}function Pe(St,yt){const Yt=m(St),ii=Yt.document;if(St!==ii.body)return new Ke(St.clientWidth,St.clientHeight);if(C.un&&Yt?.visualViewport)return new Ke(Yt.visualViewport.width,Yt.visualViewport.height);if(Yt?.innerWidth&&Yt.innerHeight)return new Ke(Yt.innerWidth,Yt.innerHeight);if(ii.body&&ii.body.clientWidth&&ii.body.clientHeight)return new Ke(ii.body.clientWidth,ii.body.clientHeight);if(ii.documentElement&&ii.documentElement.clientWidth&&ii.documentElement.clientHeight)return new Ke(ii.documentElement.clientWidth,ii.documentElement.clientHeight);if(yt)return Pe(yt);throw new Error("Unable to figure out browser width and height")}class ye{static convertToPixels(yt,Yt){return parseFloat(Yt)||0}static getDimension(yt,Yt,ii){const Li=Ce(yt),Bi=Li?Li.getPropertyValue(Yt):"0";return ye.convertToPixels(yt,Bi)}static getBorderLeftWidth(yt){return ye.getDimension(yt,"border-left-width","borderLeftWidth")}static getBorderRightWidth(yt){return ye.getDimension(yt,"border-right-width","borderRightWidth")}static getBorderTopWidth(yt){return ye.getDimension(yt,"border-top-width","borderTopWidth")}static getBorderBottomWidth(yt){return ye.getDimension(yt,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(yt){return ye.getDimension(yt,"padding-left","paddingLeft")}static getPaddingRight(yt){return ye.getDimension(yt,"padding-right","paddingRight")}static getPaddingTop(yt){return ye.getDimension(yt,"padding-top","paddingTop")}static getPaddingBottom(yt){return ye.getDimension(yt,"padding-bottom","paddingBottom")}static getMarginLeft(yt){return ye.getDimension(yt,"margin-left","marginLeft")}static getMarginTop(yt){return ye.getDimension(yt,"margin-top","marginTop")}static getMarginRight(yt){return ye.getDimension(yt,"margin-right","marginRight")}static getMarginBottom(yt){return ye.getDimension(yt,"margin-bottom","marginBottom")}}class Ke{static{this.None=new Ke(0,0)}constructor(yt,Yt){this.width=yt,this.height=Yt}with(yt=this.width,Yt=this.height){return yt!==this.width||Yt!==this.height?new Ke(yt,Yt):this}static is(yt){return typeof yt=="object"&&typeof yt.height=="number"&&typeof yt.width=="number"}static lift(yt){return yt instanceof Ke?yt:new Ke(yt.width,yt.height)}static equals(yt,Yt){return yt===Yt?!0:!yt||!Yt?!1:yt.width===Yt.width&&yt.height===Yt.height}}function qe(St){let yt=St.offsetParent,Yt=St.offsetTop,ii=St.offsetLeft;for(;(St=St.parentNode)!==null&&St!==St.ownerDocument.body&&St!==St.ownerDocument.documentElement;){Yt-=St.scrollTop;const Li=Xe(St)?null:Ce(St);Li&&(ii-=Li.direction!=="rtl"?St.scrollLeft:-St.scrollLeft),St===yt&&(ii+=ye.getBorderLeftWidth(St),Yt+=ye.getBorderTopWidth(St),Yt+=St.offsetTop,ii+=St.offsetLeft,yt=St.offsetParent)}return{left:ii,top:Yt}}function Ue(St,yt,Yt){typeof yt=="number"&&(St.style.width=`${yt}px`),typeof Yt=="number"&&(St.style.height=`${Yt}px`)}function x(St){const yt=St.getBoundingClientRect(),Yt=m(St);return{left:yt.left+Yt.scrollX,top:yt.top+Yt.scrollY,width:yt.width,height:yt.height}}function it(St){let yt=St,Yt=1;do{const ii=Ce(yt).zoom;ii!=null&&ii!=="1"&&(Yt*=ii),yt=yt.parentElement}while(yt!==null&&yt!==yt.ownerDocument.documentElement);return Yt}function Ze(St){const yt=ye.getMarginLeft(St)+ye.getMarginRight(St);return St.offsetWidth+yt}function _t(St){const yt=ye.getBorderLeftWidth(St)+ye.getBorderRightWidth(St),Yt=ye.getPaddingLeft(St)+ye.getPaddingRight(St);return St.offsetWidth-yt-Yt}function ot(St){const yt=ye.getBorderTopWidth(St)+ye.getBorderBottomWidth(St),Yt=ye.getPaddingTop(St)+ye.getPaddingBottom(St);return St.offsetHeight-yt-Yt}function Pt(St){const yt=ye.getMarginTop(St)+ye.getMarginBottom(St);return St.offsetHeight+yt}function Wt(St,yt){return!!yt?.contains(St)}function Rt(St,yt,Yt){for(;St&&St.nodeType===St.ELEMENT_NODE;){if(St.classList.contains(yt))return St;if(Yt){if(typeof Yt=="string"){if(St.classList.contains(Yt))return null}else if(St===Yt)return null}St=St.parentNode}return null}function at(St,yt,Yt){return!!Rt(St,yt,Yt)}function Xe(St){return St&&!!St.host&&!!St.mode}function pe(St){return!!te(St)}function te(St){for(;St.parentNode;){if(St===St.ownerDocument?.body)return null;St=St.parentNode}return Xe(St)?St:null}function oe(){let St=We().activeElement;for(;St?.shadowRoot;)St=St.shadowRoot.activeElement;return St}function Te(St){return oe()===St}function Ve(St){return Wt(oe(),St)}function We(){return E()<=1?_.G.document:Array.from(D()).map(({window:yt})=>yt.document).find(yt=>yt.hasFocus())??_.G.document}function dt(){return We().defaultView?.window??_.G}const Ye=new Map;function mt(){return new Dt}class Dt{constructor(){this._currentCssStyle="",this._styleSheet=void 0}setStyle(yt){yt!==this._currentCssStyle&&(this._currentCssStyle=yt,this._styleSheet?this._styleSheet.innerText=yt:this._styleSheet=Se(_.G.document.head,Yt=>Yt.innerText=yt))}dispose(){this._styleSheet&&(this._styleSheet.remove(),this._styleSheet=void 0)}}function Se(St=_.G.document.head,yt,Yt){const ii=document.createElement("style");if(ii.type="text/css",ii.media="screen",yt?.(ii),St.appendChild(ii),Yt&&Yt.add((0,I.s)(()=>ii.remove())),St===_.G.document.head){const Li=new Set;Ye.set(ii,Li);for(const{window:Bi,disposables:Pi}of D()){if(Bi===_.G)continue;const un=Pi.add(we(ii,Li,Bi));Yt?.add(un)}}return ii}function we(St,yt,Yt){const ii=new I.Cm,Li=St.cloneNode(!0);Yt.document.head.appendChild(Li),ii.add((0,I.s)(()=>Li.remove()));for(const Bi of Z(St))Li.sheet?.insertRule(Bi.cssText,Li.sheet?.cssRules.length);return ii.add(Xt.observe(St,ii,{childList:!0})(()=>{Li.textContent=St.textContent})),yt.add(Li),ii.add((0,I.s)(()=>yt.delete(Li))),ii}const Xt=new class{constructor(){this.mutationObservers=new Map}observe(St,yt,Yt){let ii=this.mutationObservers.get(St);ii||(ii=new Map,this.mutationObservers.set(St,ii));const Li=(0,v.tW)(Yt);let Bi=ii.get(Li);if(Bi)Bi.users+=1;else{const Pi=new O.vl,un=new MutationObserver(sn=>Pi.fire(sn));un.observe(St,Yt);const Cn=Bi={users:1,observer:un,onDidMutate:Pi.event};yt.add((0,I.s)(()=>{Cn.users-=1,Cn.users===0&&(Pi.dispose(),un.disconnect(),ii?.delete(Li),ii?.size===0&&this.mutationObservers.delete(St))})),ii.set(Li,Bi)}return Bi.onDidMutate}};let ri=null;function ke(){return ri||(ri=Se()),ri}function Z(St){return St?.sheet?.rules?St.sheet.rules:St?.sheet?.cssRules?St.sheet.cssRules:[]}function Fe(St,yt,Yt=ke()){if(!(!Yt||!yt)){Yt.sheet?.insertRule(`${St} {${yt}}`,0);for(const ii of Ye.get(Yt)??[])Fe(St,yt,ii)}}function pt(St,yt=ke()){if(!yt)return;const Yt=Z(yt),ii=[];for(let Li=0;Li<Yt.length;Li++){const Bi=Yt[Li];et(Bi)&&Bi.selectorText.indexOf(St)!==-1&&ii.push(Li)}for(let Li=ii.length-1;Li>=0;Li--)yt.sheet?.deleteRule(ii[Li]);for(const Li of Ye.get(yt)??[])pt(St,Li)}function et(St){return typeof St.selectorText=="string"}function Zt(St){return St instanceof HTMLElement||St instanceof m(St).HTMLElement}function bi(St){return St instanceof HTMLAnchorElement||St instanceof m(St).HTMLAnchorElement}function ci(St){return St instanceof SVGElement||St instanceof m(St).SVGElement}function Oi(St){return St instanceof MouseEvent||St instanceof m(St).MouseEvent}function Ii(St){return St instanceof KeyboardEvent||St instanceof m(St).KeyboardEvent}const yi={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:u.Tc?"webkitAnimationStart":"animationstart",ANIMATION_END:u.Tc?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:u.Tc?"webkitAnimationIteration":"animationiteration"};function Vt(St){const yt=St;return!!(yt&&typeof yt.preventDefault=="function"&&typeof yt.stopPropagation=="function")}const _n={stop:(St,yt)=>(St.preventDefault(),yt&&St.stopPropagation(),St)};function oi(St){const yt=[];for(let Yt=0;St&&St.nodeType===St.ELEMENT_NODE;Yt++)yt[Yt]=St.scrollTop,St=St.parentNode;return yt}function Ne(St,yt){for(let Yt=0;St&&St.nodeType===St.ELEMENT_NODE;Yt++)St.scrollTop!==yt[Yt]&&(St.scrollTop=yt[Yt]),St=St.parentNode}class gt extends I.jG{static hasFocusWithin(yt){if(Zt(yt)){const Yt=te(yt),ii=Yt?Yt.activeElement:yt.ownerDocument.activeElement;return Wt(ii,yt)}else{const Yt=yt;return Wt(Yt.document.activeElement,Yt.document)}}constructor(yt){super(),this._onDidFocus=this._register(new O.vl),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new O.vl),this.onDidBlur=this._onDidBlur.event;let Yt=gt.hasFocusWithin(yt),ii=!1;const Li=()=>{ii=!1,Yt||(Yt=!0,this._onDidFocus.fire())},Bi=()=>{Yt&&(ii=!0,(Zt(yt)?m(yt):yt).setTimeout(()=>{ii&&(ii=!1,Yt=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{gt.hasFocusWithin(yt)!==Yt&&(Yt?Bi():Li())},this._register(ve(yt,yi.FOCUS,Li,!0)),this._register(ve(yt,yi.BLUR,Bi,!0)),Zt(yt)&&(this._register(ve(yt,yi.FOCUS_IN,()=>this._refreshStateHandler())),this._register(ve(yt,yi.FOCUS_OUT,()=>this._refreshStateHandler())))}}function ei(St){return new gt(St)}function ai(St,yt){return St.after(yt),yt}function Ci(St,...yt){if(St.append(...yt),yt.length===1&&typeof yt[0]!="string")return yt[0]}function wi(St,yt){return St.insertBefore(yt,St.firstChild),yt}function ji(St,...yt){St.innerText="",Ci(St,...yt)}const Di=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var dn;(function(St){St.HTML="http://www.w3.org/1999/xhtml",St.SVG="http://www.w3.org/2000/svg"})(dn||(dn={}));function nn(St,yt,Yt,...ii){const Li=Di.exec(yt);if(!Li)throw new Error("Bad use of emmet");const Bi=Li[1]||"div";let Pi;return St!==dn.HTML?Pi=document.createElementNS(St,Bi):Pi=document.createElement(Bi),Li[3]&&(Pi.id=Li[3]),Li[4]&&(Pi.className=Li[4].replace(/\./g," ").trim()),Yt&&Object.entries(Yt).forEach(([un,Cn])=>{typeof Cn>"u"||(/^on\w+$/.test(un)?Pi[un]=Cn:un==="selected"?Cn&&Pi.setAttribute(un,"true"):Pi.setAttribute(un,Cn))}),Pi.append(...ii),Pi}function Dn(St,yt,...Yt){return nn(dn.HTML,St,yt,...Yt)}Dn.SVG=function(St,yt,...Yt){return nn(dn.SVG,St,yt,...Yt)};function Mi(St,...yt){St?Zn(...yt):us(...yt)}function Zn(...St){for(const yt of St)yt.style.display="",yt.removeAttribute("aria-hidden")}function us(...St){for(const yt of St)yt.style.display="none",yt.setAttribute("aria-hidden","true")}function xs(St,yt){const Yt=St.devicePixelRatio*yt;return Math.max(1,Math.floor(Yt))/St.devicePixelRatio}function Wn(St){_.G.open(St,"_blank","noopener")}function Rn(St,yt){const Yt=()=>{yt(),ii=Le(St,Yt)};let ii=Le(St,Yt);return(0,I.s)(()=>ii.dispose())}b.Ez.setPreferredWebSchema(/^https:/.test(_.G.location.href)?"https":"http");function Bn(St){return St?`url('${b.zl.uriToBrowserUri(St).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function ws(St){return`'${St.replace(/'/g,"%27")}'`}function Ln(St,yt){if(St!==void 0){const Yt=St.match(/^\s*var\((.+)\)$/);if(Yt){const ii=Yt[1].split(",",2);return ii.length===2&&(yt=Ln(ii[1].trim(),yt)),`var(${ii[0]}, ${yt})`}return St}return yt}function Qn(St,yt=!1){const Yt=document.createElement("a");return A.$w("afterSanitizeAttributes",ii=>{for(const Li of["href","src"])if(ii.hasAttribute(Li)){const Bi=ii.getAttribute(Li);if(Li==="href"&&Bi.startsWith("#"))continue;if(Yt.href=Bi,!St.includes(Yt.protocol.replace(/:$/,""))){if(yt&&Li==="src"&&Yt.href.startsWith("data:"))continue;ii.removeAttribute(Li)}}}),(0,I.s)(()=>{A.SV("afterSanitizeAttributes")})}const hi=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]),vt=Object.freeze({ALLOWED_TAGS:["a","button","blockquote","code","div","h1","h2","h3","h4","h5","h6","hr","input","label","li","p","pre","select","small","span","strong","textarea","ul","ol"],ALLOWED_ATTR:["href","data-href","data-command","target","title","name","src","alt","class","id","role","tabindex","style","data-code","width","height","align","x-dispatch","required","checked","placeholder","type","start"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!0});class ui extends O.vl{constructor(){super(),this._subscriptions=new I.Cm,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(O.Jh.runAndSubscribe(W,({window:yt,disposables:Yt})=>this.registerListeners(yt,Yt),{window:_.G,disposables:this._subscriptions}))}registerListeners(yt,Yt){Yt.add(ve(yt,"keydown",ii=>{if(ii.defaultPrevented)return;const Li=new U.Z(ii);if(!(Li.keyCode===6&&ii.repeat)){if(ii.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(ii.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(ii.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(ii.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(Li.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=ii.altKey,this._keyStatus.ctrlKey=ii.ctrlKey,this._keyStatus.metaKey=ii.metaKey,this._keyStatus.shiftKey=ii.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=ii,this.fire(this._keyStatus))}},!0)),Yt.add(ve(yt,"keyup",ii=>{ii.defaultPrevented||(!ii.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!ii.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!ii.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!ii.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=ii.altKey,this._keyStatus.ctrlKey=ii.ctrlKey,this._keyStatus.metaKey=ii.metaKey,this._keyStatus.shiftKey=ii.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=ii,this.fire(this._keyStatus)))},!0)),Yt.add(ve(yt.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),Yt.add(ve(yt.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),Yt.add(ve(yt.document.body,"mousemove",ii=>{ii.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),Yt.add(ve(yt,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return ui.instance||(ui.instance=new ui),ui.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class wt extends I.jG{constructor(yt,Yt){super(),this.element=yt,this.callbacks=Yt,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(ve(this.element,yi.DRAG_START,yt=>{this.callbacks.onDragStart?.(yt)})),this.callbacks.onDrag&&this._register(ve(this.element,yi.DRAG,yt=>{this.callbacks.onDrag?.(yt)})),this._register(ve(this.element,yi.DRAG_ENTER,yt=>{this.counter++,this.dragStartTime=yt.timeStamp,this.callbacks.onDragEnter?.(yt)})),this._register(ve(this.element,yi.DRAG_OVER,yt=>{yt.preventDefault(),this.callbacks.onDragOver?.(yt,yt.timeStamp-this.dragStartTime)})),this._register(ve(this.element,yi.DRAG_LEAVE,yt=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave?.(yt))})),this._register(ve(this.element,yi.DRAG_END,yt=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd?.(yt)})),this._register(ve(this.element,yi.DROP,yt=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop?.(yt)}))}}const In=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function Ki(St,...yt){let Yt,ii;Array.isArray(yt[0])?(Yt={},ii=yt[0]):(Yt=yt[0]||{},ii=yt[1]);const Li=In.exec(St);if(!Li||!Li.groups)throw new Error("Bad use of h");const Bi=Li.groups.tag||"div",Pi=document.createElement(Bi);Li.groups.id&&(Pi.id=Li.groups.id);const un=[];if(Li.groups.class)for(const sn of Li.groups.class.split("."))sn!==""&&un.push(sn);if(Yt.className!==void 0)for(const sn of Yt.className.split("."))sn!==""&&un.push(sn);un.length>0&&(Pi.className=un.join(" "));const Cn={};if(Li.groups.name&&(Cn[Li.groups.name]=Pi),ii)for(const sn of ii)Zt(sn)?Pi.appendChild(sn):typeof sn=="string"?Pi.append(sn):"root"in sn&&(Object.assign(Cn,sn),Pi.appendChild(sn.root));for(const[sn,yn]of Object.entries(Yt))if(sn!=="className")if(sn==="style")for(const[fs,cs]of Object.entries(yn))Pi.style.setProperty($i(fs),typeof cs=="number"?cs+"px":""+cs);else sn==="tabIndex"?Pi.tabIndex=yn:Pi.setAttribute($i(sn),yn.toString());return Cn.root=Pi,Cn}function Tt(St,...yt){let Yt,ii;Array.isArray(yt[0])?(Yt={},ii=yt[0]):(Yt=yt[0]||{},ii=yt[1]);const Li=In.exec(St);if(!Li||!Li.groups)throw new Error("Bad use of h");const Bi=Li.groups.tag||"div",Pi=document.createElementNS("http://www.w3.org/2000/svg",Bi);Li.groups.id&&(Pi.id=Li.groups.id);const un=[];if(Li.groups.class)for(const sn of Li.groups.class.split("."))sn!==""&&un.push(sn);if(Yt.className!==void 0)for(const sn of Yt.className.split("."))sn!==""&&un.push(sn);un.length>0&&(Pi.className=un.join(" "));const Cn={};if(Li.groups.name&&(Cn[Li.groups.name]=Pi),ii)for(const sn of ii)Zt(sn)?Pi.appendChild(sn):typeof sn=="string"?Pi.append(sn):"root"in sn&&(Object.assign(Cn,sn),Pi.appendChild(sn.root));for(const[sn,yn]of Object.entries(Yt))if(sn!=="className")if(sn==="style")for(const[fs,cs]of Object.entries(yn))Pi.style.setProperty($i(fs),typeof cs=="number"?cs+"px":""+cs);else sn==="tabIndex"?Pi.tabIndex=yn:Pi.setAttribute($i(sn),yn.toString());return Cn.root=Pi,Cn}function $i(St){return St.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},31997:(Mt,He,c)=>{c.d(He,{S:()=>A,c:()=>O});var u=c(33902),G=c(92998),U=c(85613),P=c(33836),M=c(69504),w=c(98414);class O{static addCursorDown(b,C,v){const _=[];let d=0;for(let m=0,S=C.length;m<S;m++){const D=C[m];_[d++]=new G.MF(D.modelState,D.viewState),v?_[d++]=G.MF.fromModelState(U.I.translateDown(b.cursorConfig,b.model,D.modelState)):_[d++]=G.MF.fromViewState(U.I.translateDown(b.cursorConfig,b,D.viewState))}return _}static addCursorUp(b,C,v){const _=[];let d=0;for(let m=0,S=C.length;m<S;m++){const D=C[m];_[d++]=new G.MF(D.modelState,D.viewState),v?_[d++]=G.MF.fromModelState(U.I.translateUp(b.cursorConfig,b.model,D.modelState)):_[d++]=G.MF.fromViewState(U.I.translateUp(b.cursorConfig,b,D.viewState))}return _}static moveToBeginningOfLine(b,C,v){const _=[];for(let d=0,m=C.length;d<m;d++){const S=C[d];_[d]=this._moveToLineStart(b,S,v)}return _}static _moveToLineStart(b,C,v){const _=C.viewState.position.column,d=C.modelState.position.column,m=_===d,S=C.viewState.position.lineNumber,D=b.getLineFirstNonWhitespaceColumn(S);return!m&&!(_===D)?this._moveToLineStartByView(b,C,v):this._moveToLineStartByModel(b,C,v)}static _moveToLineStartByView(b,C,v){return G.MF.fromViewState(U.I.moveToBeginningOfLine(b.cursorConfig,b,C.viewState,v))}static _moveToLineStartByModel(b,C,v){return G.MF.fromModelState(U.I.moveToBeginningOfLine(b.cursorConfig,b.model,C.modelState,v))}static moveToEndOfLine(b,C,v,_){const d=[];for(let m=0,S=C.length;m<S;m++){const D=C[m];d[m]=this._moveToLineEnd(b,D,v,_)}return d}static _moveToLineEnd(b,C,v,_){const d=C.viewState.position,m=b.getLineMaxColumn(d.lineNumber),S=d.column===m,D=C.modelState.position,E=b.model.getLineMaxColumn(D.lineNumber),B=m-d.column===E-D.column;return S||B?this._moveToLineEndByModel(b,C,v,_):this._moveToLineEndByView(b,C,v,_)}static _moveToLineEndByView(b,C,v,_){return G.MF.fromViewState(U.I.moveToEndOfLine(b.cursorConfig,b,C.viewState,v,_))}static _moveToLineEndByModel(b,C,v,_){return G.MF.fromModelState(U.I.moveToEndOfLine(b.cursorConfig,b.model,C.modelState,v,_))}static expandLineSelection(b,C){const v=[];for(let _=0,d=C.length;_<d;_++){const m=C[_],S=m.modelState.selection.startLineNumber,D=b.model.getLineCount();let E=m.modelState.selection.endLineNumber,B;E===D?B=b.model.getLineMaxColumn(D):(E++,B=1),v[_]=G.MF.fromModelState(new G.mG(new w.Q(S,1,S,1),0,0,new M.y(E,B),0))}return v}static moveToBeginningOfBuffer(b,C,v){const _=[];for(let d=0,m=C.length;d<m;d++){const S=C[d];_[d]=G.MF.fromModelState(U.I.moveToBeginningOfBuffer(b.cursorConfig,b.model,S.modelState,v))}return _}static moveToEndOfBuffer(b,C,v){const _=[];for(let d=0,m=C.length;d<m;d++){const S=C[d];_[d]=G.MF.fromModelState(U.I.moveToEndOfBuffer(b.cursorConfig,b.model,S.modelState,v))}return _}static selectAll(b,C){const v=b.model.getLineCount(),_=b.model.getLineMaxColumn(v);return G.MF.fromModelState(new G.mG(new w.Q(1,1,1,1),0,0,new M.y(v,_),0))}static line(b,C,v,_,d){const m=b.model.validatePosition(_),S=d?b.coordinatesConverter.validateViewPosition(new M.y(d.lineNumber,d.column),m):b.coordinatesConverter.convertModelPositionToViewPosition(m);if(!v){const E=b.model.getLineCount();let B=m.lineNumber+1,R=1;return B>E&&(B=E,R=b.model.getLineMaxColumn(B)),G.MF.fromModelState(new G.mG(new w.Q(m.lineNumber,1,B,R),2,0,new M.y(B,R),0))}const D=C.modelState.selectionStart.getStartPosition().lineNumber;if(m.lineNumber<D)return G.MF.fromViewState(C.viewState.move(!0,S.lineNumber,1,0));if(m.lineNumber>D){const E=b.getLineCount();let B=S.lineNumber+1,R=1;return B>E&&(B=E,R=b.getLineMaxColumn(B)),G.MF.fromViewState(C.viewState.move(!0,B,R,0))}else{const E=C.modelState.selectionStart.getEndPosition();return G.MF.fromModelState(C.modelState.move(!0,E.lineNumber,E.column,0))}}static word(b,C,v,_){const d=b.model.validatePosition(_);return G.MF.fromModelState(P.z.word(b.cursorConfig,b.model,C.modelState,v,d))}static cancelSelection(b,C){if(!C.modelState.hasSelection())return new G.MF(C.modelState,C.viewState);const v=C.viewState.position.lineNumber,_=C.viewState.position.column;return G.MF.fromViewState(new G.mG(new w.Q(v,_,v,_),0,0,new M.y(v,_),0))}static moveTo(b,C,v,_,d){if(v){if(C.modelState.selectionStartKind===1)return this.word(b,C,v,_);if(C.modelState.selectionStartKind===2)return this.line(b,C,v,_,d)}const m=b.model.validatePosition(_),S=d?b.coordinatesConverter.validateViewPosition(new M.y(d.lineNumber,d.column),m):b.coordinatesConverter.convertModelPositionToViewPosition(m);return G.MF.fromViewState(C.viewState.move(v,S.lineNumber,S.column,0))}static simpleMove(b,C,v,_,d,m){switch(v){case 0:return m===4?this._moveHalfLineLeft(b,C,_):this._moveLeft(b,C,_,d);case 1:return m===4?this._moveHalfLineRight(b,C,_):this._moveRight(b,C,_,d);case 2:return m===2?this._moveUpByViewLines(b,C,_,d):this._moveUpByModelLines(b,C,_,d);case 3:return m===2?this._moveDownByViewLines(b,C,_,d):this._moveDownByModelLines(b,C,_,d);case 4:return m===2?C.map(S=>G.MF.fromViewState(U.I.moveToPrevBlankLine(b.cursorConfig,b,S.viewState,_))):C.map(S=>G.MF.fromModelState(U.I.moveToPrevBlankLine(b.cursorConfig,b.model,S.modelState,_)));case 5:return m===2?C.map(S=>G.MF.fromViewState(U.I.moveToNextBlankLine(b.cursorConfig,b,S.viewState,_))):C.map(S=>G.MF.fromModelState(U.I.moveToNextBlankLine(b.cursorConfig,b.model,S.modelState,_)));case 6:return this._moveToViewMinColumn(b,C,_);case 7:return this._moveToViewFirstNonWhitespaceColumn(b,C,_);case 8:return this._moveToViewCenterColumn(b,C,_);case 9:return this._moveToViewMaxColumn(b,C,_);case 10:return this._moveToViewLastNonWhitespaceColumn(b,C,_);default:return null}}static viewportMove(b,C,v,_,d){const m=b.getCompletelyVisibleViewRange(),S=b.coordinatesConverter.convertViewRangeToModelRange(m);switch(v){case 11:{const D=this._firstLineNumberInRange(b.model,S,d),E=b.model.getLineFirstNonWhitespaceColumn(D);return[this._moveToModelPosition(b,C[0],_,D,E)]}case 13:{const D=this._lastLineNumberInRange(b.model,S,d),E=b.model.getLineFirstNonWhitespaceColumn(D);return[this._moveToModelPosition(b,C[0],_,D,E)]}case 12:{const D=Math.round((S.startLineNumber+S.endLineNumber)/2),E=b.model.getLineFirstNonWhitespaceColumn(D);return[this._moveToModelPosition(b,C[0],_,D,E)]}case 14:{const D=[];for(let E=0,B=C.length;E<B;E++){const R=C[E];D[E]=this.findPositionInViewportIfOutside(b,R,m,_)}return D}default:return null}}static findPositionInViewportIfOutside(b,C,v,_){const d=C.viewState.position.lineNumber;if(v.startLineNumber<=d&&d<=v.endLineNumber-1)return new G.MF(C.modelState,C.viewState);{let m;d>v.endLineNumber-1?m=v.endLineNumber-1:d<v.startLineNumber?m=v.startLineNumber:m=d;const S=U.I.vertical(b.cursorConfig,b,d,C.viewState.position.column,C.viewState.leftoverVisibleColumns,m,!1);return G.MF.fromViewState(C.viewState.move(_,S.lineNumber,S.column,S.leftoverVisibleColumns))}}static _firstLineNumberInRange(b,C,v){let _=C.startLineNumber;return C.startColumn!==b.getLineMinColumn(_)&&_++,Math.min(C.endLineNumber,_+v-1)}static _lastLineNumberInRange(b,C,v){let _=C.startLineNumber;return C.startColumn!==b.getLineMinColumn(_)&&_++,Math.max(_,C.endLineNumber-v+1)}static _moveLeft(b,C,v,_){return C.map(d=>G.MF.fromViewState(U.I.moveLeft(b.cursorConfig,b,d.viewState,v,_)))}static _moveHalfLineLeft(b,C,v){const _=[];for(let d=0,m=C.length;d<m;d++){const S=C[d],D=S.viewState.position.lineNumber,E=Math.round(b.getLineLength(D)/2);_[d]=G.MF.fromViewState(U.I.moveLeft(b.cursorConfig,b,S.viewState,v,E))}return _}static _moveRight(b,C,v,_){return C.map(d=>G.MF.fromViewState(U.I.moveRight(b.cursorConfig,b,d.viewState,v,_)))}static _moveHalfLineRight(b,C,v){const _=[];for(let d=0,m=C.length;d<m;d++){const S=C[d],D=S.viewState.position.lineNumber,E=Math.round(b.getLineLength(D)/2);_[d]=G.MF.fromViewState(U.I.moveRight(b.cursorConfig,b,S.viewState,v,E))}return _}static _moveDownByViewLines(b,C,v,_){const d=[];for(let m=0,S=C.length;m<S;m++){const D=C[m];d[m]=G.MF.fromViewState(U.I.moveDown(b.cursorConfig,b,D.viewState,v,_))}return d}static _moveDownByModelLines(b,C,v,_){const d=[];for(let m=0,S=C.length;m<S;m++){const D=C[m];d[m]=G.MF.fromModelState(U.I.moveDown(b.cursorConfig,b.model,D.modelState,v,_))}return d}static _moveUpByViewLines(b,C,v,_){const d=[];for(let m=0,S=C.length;m<S;m++){const D=C[m];d[m]=G.MF.fromViewState(U.I.moveUp(b.cursorConfig,b,D.viewState,v,_))}return d}static _moveUpByModelLines(b,C,v,_){const d=[];for(let m=0,S=C.length;m<S;m++){const D=C[m];d[m]=G.MF.fromModelState(U.I.moveUp(b.cursorConfig,b.model,D.modelState,v,_))}return d}static _moveToViewPosition(b,C,v,_,d){return G.MF.fromViewState(C.viewState.move(v,_,d,0))}static _moveToModelPosition(b,C,v,_,d){return G.MF.fromModelState(C.modelState.move(v,_,d,0))}static _moveToViewMinColumn(b,C,v){const _=[];for(let d=0,m=C.length;d<m;d++){const S=C[d],D=S.viewState.position.lineNumber,E=b.getLineMinColumn(D);_[d]=this._moveToViewPosition(b,S,v,D,E)}return _}static _moveToViewFirstNonWhitespaceColumn(b,C,v){const _=[];for(let d=0,m=C.length;d<m;d++){const S=C[d],D=S.viewState.position.lineNumber,E=b.getLineFirstNonWhitespaceColumn(D);_[d]=this._moveToViewPosition(b,S,v,D,E)}return _}static _moveToViewCenterColumn(b,C,v){const _=[];for(let d=0,m=C.length;d<m;d++){const S=C[d],D=S.viewState.position.lineNumber,E=Math.round((b.getLineMaxColumn(D)+b.getLineMinColumn(D))/2);_[d]=this._moveToViewPosition(b,S,v,D,E)}return _}static _moveToViewMaxColumn(b,C,v){const _=[];for(let d=0,m=C.length;d<m;d++){const S=C[d],D=S.viewState.position.lineNumber,E=b.getLineMaxColumn(D);_[d]=this._moveToViewPosition(b,S,v,D,E)}return _}static _moveToViewLastNonWhitespaceColumn(b,C,v){const _=[];for(let d=0,m=C.length;d<m;d++){const S=C[d],D=S.viewState.position.lineNumber,E=b.getLineLastNonWhitespaceColumn(D);_[d]=this._moveToViewPosition(b,S,v,D,E)}return _}}var A;(function(I){const b=function(v){if(!u.Gv(v))return!1;const _=v;return!(!u.Kg(_.to)||!u.b0(_.select)&&!u.Lm(_.select)||!u.b0(_.by)&&!u.Kg(_.by)||!u.b0(_.value)&&!u.Et(_.value))};I.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:b,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},I.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},I.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function C(v){if(!v.to)return null;let _;switch(v.to){case I.RawDirection.Left:_=0;break;case I.RawDirection.Right:_=1;break;case I.RawDirection.Up:_=2;break;case I.RawDirection.Down:_=3;break;case I.RawDirection.PrevBlankLine:_=4;break;case I.RawDirection.NextBlankLine:_=5;break;case I.RawDirection.WrappedLineStart:_=6;break;case I.RawDirection.WrappedLineFirstNonWhitespaceCharacter:_=7;break;case I.RawDirection.WrappedLineColumnCenter:_=8;break;case I.RawDirection.WrappedLineEnd:_=9;break;case I.RawDirection.WrappedLineLastNonWhitespaceCharacter:_=10;break;case I.RawDirection.ViewPortTop:_=11;break;case I.RawDirection.ViewPortBottom:_=13;break;case I.RawDirection.ViewPortCenter:_=12;break;case I.RawDirection.ViewPortIfOutside:_=14;break;default:return null}let d=0;switch(v.by){case I.RawUnit.Line:d=1;break;case I.RawUnit.WrappedLine:d=2;break;case I.RawUnit.Character:d=3;break;case I.RawUnit.HalfLine:d=4;break}return{direction:_,unit:d,select:!!v.select,value:v.value||1}}I.parse=C})(A||(A={}))},32182:(Mt,He,c)=>{c.d(He,{A7:()=>A,Q_:()=>C,VR:()=>w,cn:()=>D,ct:()=>E,jB:()=>O,kF:()=>m,mX:()=>d});var u=c(45573),G=c(8264),U=c(70264),P=c(37473),M=c(81545);const w=(0,M.u1)("contextService");function O(B){const R=B;return typeof R?.id=="string"&&P.r.isUri(R.uri)}function A(B){return typeof B?.id=="string"&&!O(B)&&!v(B)}const I={id:"ext-dev"},b={id:"empty-window"};function C(B,R){if(typeof B=="string"||typeof B>"u")return typeof B=="string"?{id:(0,G.P8)(B)}:R?I:b;const z=B;return z.configuration?{id:z.id,configPath:z.configuration}:z.folders.length===1?{id:z.id,uri:z.folders[0].uri}:{id:z.id}}function v(B){const R=B;return typeof R?.id=="string"&&P.r.isUri(R.configPath)}class _{constructor(R,z,W,$,Q){this._id=R,this._transient=W,this._configuration=$,this._ignorePathCasing=Q,this._foldersMap=TernarySearchTree.forUris(this._ignorePathCasing,()=>!0),this.folders=z}get folders(){return this._folders}set folders(R){this._folders=R,this.updateFoldersMap()}get id(){return this._id}get transient(){return this._transient}get configuration(){return this._configuration}set configuration(R){this._configuration=R}getFolder(R){return R&&this._foldersMap.findSubstr(R)||null}updateFoldersMap(){this._foldersMap=TernarySearchTree.forUris(this._ignorePathCasing,()=>!0);for(const R of this.folders)this._foldersMap.set(R.uri,R)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}}class d{constructor(R,z){this.raw=z,this.uri=R.uri,this.index=R.index,this.name=R.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const m="code-workspace",S=[{name:(0,u.kg)("codeWorkspace","Code Workspace"),extensions:[m]}],D="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function E(B){return B.id===D}},32857:(Mt,He,c)=>{c.d(He,{V:()=>M,WR:()=>O,no:()=>P});var u=c(85565),G=c(90439),U=c(14216);class P{constructor(I,b,C){this._indentRulesSupport=b,this._indentationLineProcessor=new w(I,C)}shouldIncrease(I,b){const C=this._indentationLineProcessor.getProcessedLine(I,b);return this._indentRulesSupport.shouldIncrease(C)}shouldDecrease(I,b){const C=this._indentationLineProcessor.getProcessedLine(I,b);return this._indentRulesSupport.shouldDecrease(C)}shouldIgnore(I,b){const C=this._indentationLineProcessor.getProcessedLine(I,b);return this._indentRulesSupport.shouldIgnore(C)}shouldIndentNextLine(I,b){const C=this._indentationLineProcessor.getProcessedLine(I,b);return this._indentRulesSupport.shouldIndentNextLine(C)}}class M{constructor(I,b){this.model=I,this.indentationLineProcessor=new w(I,b)}getProcessedTokenContextAroundRange(I){const b=this._getProcessedTokensBeforeRange(I),C=this._getProcessedTokensAfterRange(I),v=this._getProcessedPreviousLineTokens(I);return{beforeRangeProcessedTokens:b,afterRangeProcessedTokens:C,previousLineProcessedTokens:v}}_getProcessedTokensBeforeRange(I){this.model.tokenization.forceTokenization(I.startLineNumber);const b=this.model.tokenization.getLineTokens(I.startLineNumber),C=(0,G.BQ)(b,I.startColumn-1);let v;if(O(this.model,I.getStartPosition())){const d=I.startColumn-1-C.firstCharOffset,m=C.firstCharOffset,S=m+d;v=b.sliceAndInflate(m,S,0)}else{const d=I.startColumn-1;v=b.sliceAndInflate(0,d,0)}return this.indentationLineProcessor.getProcessedTokens(v)}_getProcessedTokensAfterRange(I){const b=I.isEmpty()?I.getStartPosition():I.getEndPosition();this.model.tokenization.forceTokenization(b.lineNumber);const C=this.model.tokenization.getLineTokens(b.lineNumber),v=(0,G.BQ)(C,b.column-1),_=b.column-1-v.firstCharOffset,d=v.firstCharOffset+_,m=v.firstCharOffset+v.getLineLength(),S=C.sliceAndInflate(d,m,0);return this.indentationLineProcessor.getProcessedTokens(S)}_getProcessedPreviousLineTokens(I){const b=z=>{this.model.tokenization.forceTokenization(z);const W=this.model.tokenization.getLineTokens(z),$=this.model.getLineMaxColumn(z)-1;return(0,G.BQ)(W,$)};this.model.tokenization.forceTokenization(I.startLineNumber);const C=this.model.tokenization.getLineTokens(I.startLineNumber),v=(0,G.BQ)(C,I.startColumn-1),_=U.f.createEmpty("",v.languageIdCodec),d=I.startLineNumber-1;if(d===0||!(v.firstCharOffset===0))return _;const D=b(d);if(!(v.languageId===D.languageId))return _;const B=D.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(B)}}class w{constructor(I,b){this.model=I,this.languageConfigurationService=b}getProcessedLine(I,b){const C=(d,m)=>{const S=u.UU(d);return m+d.substring(S.length)};this.model.tokenization.forceTokenization?.(I);const v=this.model.tokenization.getLineTokens(I);let _=this.getProcessedTokens(v).getLineContent();return b!==void 0&&(_=C(_,b)),_}getProcessedTokens(I){const b=S=>S===2||S===3||S===1,C=I.getLanguageId(0),_=this.languageConfigurationService.getLanguageConfiguration(C).bracketsNew.getBracketRegExp({global:!0}),d=[];return I.forEach(S=>{const D=I.getStandardTokenType(S);let E=I.getTokenText(S);b(D)&&(E=E.replace(_,""));const B=I.getMetadata(S);d.push({text:E,metadata:B})}),U.f.createFromTextAndMetadata(d,I.languageIdCodec)}}function O(A,I){A.tokenization.forceTokenization(I.lineNumber);const b=A.tokenization.getLineTokens(I.lineNumber),C=(0,G.BQ)(b,I.column-1),v=C.firstCharOffset===0,_=b.getLanguageId(0)===C.languageId;return!v&&!_}},33836:(Mt,He,c)=>{c.d(He,{c:()=>A,z:()=>O});var u=c(85565),G=c(92998),U=c(71899),P=c(53605),M=c(69504),w=c(98414);class O{static _createWord(C,v,_,d,m){return{start:d,end:m,wordType:v,nextCharClass:_}}static _createIntlWord(C,v){return{start:C.index,end:C.index+C.segment.length,wordType:1,nextCharClass:v}}static _findPreviousWordOnLine(C,v,_){const d=v.getLineContent(_.lineNumber);return this._doFindPreviousWordOnLine(d,C,_)}static _doFindPreviousWordOnLine(C,v,_){let d=0;const m=v.findPrevIntlWordBeforeOrAtOffset(C,_.column-2);for(let S=_.column-2;S>=0;S--){const D=C.charCodeAt(S),E=v.get(D);if(m&&S===m.index)return this._createIntlWord(m,E);if(E===0){if(d===2)return this._createWord(C,d,E,S+1,this._findEndOfWord(C,v,d,S+1));d=1}else if(E===2){if(d===1)return this._createWord(C,d,E,S+1,this._findEndOfWord(C,v,d,S+1));d=2}else if(E===1&&d!==0)return this._createWord(C,d,E,S+1,this._findEndOfWord(C,v,d,S+1))}return d!==0?this._createWord(C,d,1,0,this._findEndOfWord(C,v,d,0)):null}static _findEndOfWord(C,v,_,d){const m=v.findNextIntlWordAtOrAfterOffset(C,d),S=C.length;for(let D=d;D<S;D++){const E=C.charCodeAt(D),B=v.get(E);if(m&&D===m.index+m.segment.length||B===1||_===1&&B===2||_===2&&B===0)return D}return S}static _findNextWordOnLine(C,v,_){const d=v.getLineContent(_.lineNumber);return this._doFindNextWordOnLine(d,C,_)}static _doFindNextWordOnLine(C,v,_){let d=0;const m=C.length,S=v.findNextIntlWordAtOrAfterOffset(C,_.column-1);for(let D=_.column-1;D<m;D++){const E=C.charCodeAt(D),B=v.get(E);if(S&&D===S.index)return this._createIntlWord(S,B);if(B===0){if(d===2)return this._createWord(C,d,B,this._findStartOfWord(C,v,d,D-1),D);d=1}else if(B===2){if(d===1)return this._createWord(C,d,B,this._findStartOfWord(C,v,d,D-1),D);d=2}else if(B===1&&d!==0)return this._createWord(C,d,B,this._findStartOfWord(C,v,d,D-1),D)}return d!==0?this._createWord(C,d,1,this._findStartOfWord(C,v,d,m-1),m):null}static _findStartOfWord(C,v,_,d){const m=v.findPrevIntlWordBeforeOrAtOffset(C,d);for(let S=d;S>=0;S--){const D=C.charCodeAt(S),E=v.get(D);if(m&&S===m.index)return S;if(E===1||_===1&&E===2||_===2&&E===0)return S+1}return 0}static moveWordLeft(C,v,_,d,m){let S=_.lineNumber,D=_.column;D===1&&S>1&&(S=S-1,D=v.getLineMaxColumn(S));let E=O._findPreviousWordOnLine(C,v,new M.y(S,D));if(d===0)return new M.y(S,E?E.start+1:1);if(d===1)return!m&&E&&E.wordType===2&&E.end-E.start===1&&E.nextCharClass===0&&(E=O._findPreviousWordOnLine(C,v,new M.y(S,E.start+1))),new M.y(S,E?E.start+1:1);if(d===3){for(;E&&E.wordType===2;)E=O._findPreviousWordOnLine(C,v,new M.y(S,E.start+1));return new M.y(S,E?E.start+1:1)}return E&&D<=E.end+1&&(E=O._findPreviousWordOnLine(C,v,new M.y(S,E.start+1))),new M.y(S,E?E.end+1:1)}static _moveWordPartLeft(C,v){const _=v.lineNumber,d=C.getLineMaxColumn(_);if(v.column===1)return _>1?new M.y(_-1,C.getLineMaxColumn(_-1)):v;const m=C.getLineContent(_);for(let S=v.column-1;S>1;S--){const D=m.charCodeAt(S-2),E=m.charCodeAt(S-1);if(D===95&&E!==95)return new M.y(_,S);if(D===45&&E!==45)return new M.y(_,S);if((u.Lv(D)||u.DB(D))&&u.Wv(E))return new M.y(_,S);if(u.Wv(D)&&u.Wv(E)&&S+1<d){const B=m.charCodeAt(S);if(u.Lv(B)||u.DB(B))return new M.y(_,S)}}return new M.y(_,1)}static moveWordRight(C,v,_,d){let m=_.lineNumber,S=_.column,D=!1;S===v.getLineMaxColumn(m)&&m<v.getLineCount()&&(D=!0,m=m+1,S=1);let E=O._findNextWordOnLine(C,v,new M.y(m,S));if(d===2)E&&E.wordType===2&&E.end-E.start===1&&E.nextCharClass===0&&(E=O._findNextWordOnLine(C,v,new M.y(m,E.end+1))),E?S=E.end+1:S=v.getLineMaxColumn(m);else if(d===3){for(D&&(S=0);E&&(E.wordType===2||E.start+1<=S);)E=O._findNextWordOnLine(C,v,new M.y(m,E.end+1));E?S=E.start+1:S=v.getLineMaxColumn(m)}else E&&!D&&S>=E.start+1&&(E=O._findNextWordOnLine(C,v,new M.y(m,E.end+1))),E?S=E.start+1:S=v.getLineMaxColumn(m);return new M.y(m,S)}static _moveWordPartRight(C,v){const _=v.lineNumber,d=C.getLineMaxColumn(_);if(v.column===d)return _<C.getLineCount()?new M.y(_+1,1):v;const m=C.getLineContent(_);for(let S=v.column+1;S<d;S++){const D=m.charCodeAt(S-2),E=m.charCodeAt(S-1);if(D!==95&&E===95)return new M.y(_,S);if(D!==45&&E===45)return new M.y(_,S);if((u.Lv(D)||u.DB(D))&&u.Wv(E))return new M.y(_,S);if(u.Wv(D)&&u.Wv(E)&&S+1<d){const B=m.charCodeAt(S);if(u.Lv(B)||u.DB(B))return new M.y(_,S)}}return new M.y(_,d)}static _deleteWordLeftWhitespace(C,v){const _=C.getLineContent(v.lineNumber),d=v.column-2,m=u.lT(_,d);return m+1<d?new w.Q(v.lineNumber,m+2,v.lineNumber,v.column):null}static deleteWordLeft(C,v){const _=C.wordSeparators,d=C.model,m=C.selection,S=C.whitespaceHeuristics;if(!m.isEmpty())return m;if(U.g.isAutoClosingPairDelete(C.autoClosingDelete,C.autoClosingBrackets,C.autoClosingQuotes,C.autoClosingPairs.autoClosingPairsOpenByEnd,C.model,[C.selection],C.autoClosedCharacters)){const z=C.selection.getPosition();return new w.Q(z.lineNumber,z.column-1,z.lineNumber,z.column+1)}const D=new M.y(m.positionLineNumber,m.positionColumn);let E=D.lineNumber,B=D.column;if(E===1&&B===1)return null;if(S){const z=this._deleteWordLeftWhitespace(d,D);if(z)return z}let R=O._findPreviousWordOnLine(_,d,D);return v===0?R?B=R.start+1:B>1?B=1:(E--,B=d.getLineMaxColumn(E)):(R&&B<=R.end+1&&(R=O._findPreviousWordOnLine(_,d,new M.y(E,R.start+1))),R?B=R.end+1:B>1?B=1:(E--,B=d.getLineMaxColumn(E))),new w.Q(E,B,D.lineNumber,D.column)}static deleteInsideWord(C,v,_){if(!_.isEmpty())return _;const d=new M.y(_.positionLineNumber,_.positionColumn),m=this._deleteInsideWordWhitespace(v,d);return m||this._deleteInsideWordDetermineDeleteRange(C,v,d)}static _charAtIsWhitespace(C,v){const _=C.charCodeAt(v);return _===32||_===9}static _deleteInsideWordWhitespace(C,v){const _=C.getLineContent(v.lineNumber),d=_.length;if(d===0)return null;let m=Math.max(v.column-2,0);if(!this._charAtIsWhitespace(_,m))return null;let S=Math.min(v.column-1,d-1);if(!this._charAtIsWhitespace(_,S))return null;for(;m>0&&this._charAtIsWhitespace(_,m-1);)m--;for(;S+1<d&&this._charAtIsWhitespace(_,S+1);)S++;return new w.Q(v.lineNumber,m+1,v.lineNumber,S+2)}static _deleteInsideWordDetermineDeleteRange(C,v,_){const d=v.getLineContent(_.lineNumber),m=d.length;if(m===0)return _.lineNumber>1?new w.Q(_.lineNumber-1,v.getLineMaxColumn(_.lineNumber-1),_.lineNumber,1):_.lineNumber<v.getLineCount()?new w.Q(_.lineNumber,1,_.lineNumber+1,1):new w.Q(_.lineNumber,1,_.lineNumber,1);const S=z=>z.start+1<=_.column&&_.column<=z.end+1,D=(z,W)=>(z=Math.min(z,_.column),W=Math.max(W,_.column),new w.Q(_.lineNumber,z,_.lineNumber,W)),E=z=>{let W=z.start+1,$=z.end+1,Q=!1;for(;$-1<m&&this._charAtIsWhitespace(d,$-1);)Q=!0,$++;if(!Q)for(;W>1&&this._charAtIsWhitespace(d,W-2);)W--;return D(W,$)},B=O._findPreviousWordOnLine(C,v,_);if(B&&S(B))return E(B);const R=O._findNextWordOnLine(C,v,_);return R&&S(R)?E(R):B&&R?D(B.end+1,R.start+1):B?D(B.start+1,B.end+1):R?D(R.start+1,R.end+1):D(1,m+1)}static _deleteWordPartLeft(C,v){if(!v.isEmpty())return v;const _=v.getPosition(),d=O._moveWordPartLeft(C,_);return new w.Q(_.lineNumber,_.column,d.lineNumber,d.column)}static _findFirstNonWhitespaceChar(C,v){const _=C.length;for(let d=v;d<_;d++){const m=C.charAt(d);if(m!==" "&&m!=="	")return d}return _}static _deleteWordRightWhitespace(C,v){const _=C.getLineContent(v.lineNumber),d=v.column-1,m=this._findFirstNonWhitespaceChar(_,d);return d+1<m?new w.Q(v.lineNumber,v.column,v.lineNumber,m+1):null}static deleteWordRight(C,v){const _=C.wordSeparators,d=C.model,m=C.selection,S=C.whitespaceHeuristics;if(!m.isEmpty())return m;const D=new M.y(m.positionLineNumber,m.positionColumn);let E=D.lineNumber,B=D.column;const R=d.getLineCount(),z=d.getLineMaxColumn(E);if(E===R&&B===z)return null;if(S){const $=this._deleteWordRightWhitespace(d,D);if($)return $}let W=O._findNextWordOnLine(_,d,D);return v===2?W?B=W.end+1:B<z||E===R?B=z:(E++,W=O._findNextWordOnLine(_,d,new M.y(E,1)),W?B=W.start+1:B=d.getLineMaxColumn(E)):(W&&B>=W.start+1&&(W=O._findNextWordOnLine(_,d,new M.y(E,W.end+1))),W?B=W.start+1:B<z||E===R?B=z:(E++,W=O._findNextWordOnLine(_,d,new M.y(E,1)),W?B=W.start+1:B=d.getLineMaxColumn(E))),new w.Q(E,B,D.lineNumber,D.column)}static _deleteWordPartRight(C,v){if(!v.isEmpty())return v;const _=v.getPosition(),d=O._moveWordPartRight(C,_);return new w.Q(_.lineNumber,_.column,d.lineNumber,d.column)}static _createWordAtPosition(C,v,_){const d=new w.Q(v,_.start+1,v,_.end+1);return{word:C.getValueInRange(d),startColumn:d.startColumn,endColumn:d.endColumn}}static getWordAtPosition(C,v,_,d){const m=(0,P.i)(v,_),S=O._findPreviousWordOnLine(m,C,d);if(S&&S.wordType===1&&S.start<=d.column-1&&d.column-1<=S.end)return O._createWordAtPosition(C,d.lineNumber,S);const D=O._findNextWordOnLine(m,C,d);return D&&D.wordType===1&&D.start<=d.column-1&&d.column-1<=D.end?O._createWordAtPosition(C,d.lineNumber,D):null}static word(C,v,_,d,m){const S=(0,P.i)(C.wordSeparators,C.wordSegmenterLocales),D=O._findPreviousWordOnLine(S,v,m),E=O._findNextWordOnLine(S,v,m);if(!d){let $,Q;return D&&D.wordType===1&&D.start<=m.column-1&&m.column-1<=D.end?($=D.start+1,Q=D.end+1):E&&E.wordType===1&&E.start<=m.column-1&&m.column-1<=E.end?($=E.start+1,Q=E.end+1):(D?$=D.end+1:$=1,E?Q=E.start+1:Q=v.getLineMaxColumn(m.lineNumber)),new G.mG(new w.Q(m.lineNumber,$,m.lineNumber,Q),1,0,new M.y(m.lineNumber,Q),0)}let B,R;D&&D.wordType===1&&D.start<m.column-1&&m.column-1<D.end?(B=D.start+1,R=D.end+1):E&&E.wordType===1&&E.start<m.column-1&&m.column-1<E.end?(B=E.start+1,R=E.end+1):(B=m.column,R=m.column);const z=m.lineNumber;let W;if(_.selectionStart.containsPosition(m))W=_.selectionStart.endColumn;else if(m.isBeforeOrEqual(_.selectionStart.getStartPosition())){W=B;const $=new M.y(z,W);_.selectionStart.containsPosition($)&&(W=_.selectionStart.endColumn)}else{W=R;const $=new M.y(z,W);_.selectionStart.containsPosition($)&&(W=_.selectionStart.startColumn)}return _.move(!0,z,W,0)}}class A extends O{static deleteWordPartLeft(C){const v=I([O.deleteWordLeft(C,0),O.deleteWordLeft(C,2),O._deleteWordPartLeft(C.model,C.selection)]);return v.sort(w.Q.compareRangesUsingEnds),v[2]}static deleteWordPartRight(C){const v=I([O.deleteWordRight(C,0),O.deleteWordRight(C,2),O._deleteWordPartRight(C.model,C.selection)]);return v.sort(w.Q.compareRangesUsingStarts),v[0]}static moveWordPartLeft(C,v,_,d){const m=I([O.moveWordLeft(C,v,_,0,d),O.moveWordLeft(C,v,_,2,d),O._moveWordPartLeft(v,_)]);return m.sort(M.y.compare),m[2]}static moveWordPartRight(C,v,_){const d=I([O.moveWordRight(C,v,_,0),O.moveWordRight(C,v,_,2),O._moveWordPartRight(v,_)]);return d.sort(M.y.compare),d[0]}}function I(b){return b.filter(C=>!!C)}},33902:(Mt,He,c)=>{c.d(He,{Et:()=>P,Gv:()=>G,Kg:()=>u,Lm:()=>w,O9:()=>A,Tn:()=>v,b0:()=>O,eU:()=>C,iu:()=>U,j:()=>b,jx:()=>_,xZ:()=>M,z:()=>I});function u(m){return typeof m=="string"}function G(m){return typeof m=="object"&&m!==null&&!Array.isArray(m)&&!(m instanceof RegExp)&&!(m instanceof Date)}function U(m){const S=Object.getPrototypeOf(Uint8Array);return typeof m=="object"&&m instanceof S}function P(m){return typeof m=="number"&&!isNaN(m)}function M(m){return!!m&&typeof m[Symbol.iterator]=="function"}function w(m){return m===!0||m===!1}function O(m){return typeof m>"u"}function A(m){return!I(m)}function I(m){return O(m)||m===null}function b(m,S){if(!m)throw new Error(S?`Unexpected type, expected '${S}'`:"Unexpected type")}function C(m){if(I(m))throw new Error("Assertion Failed: argument is undefined or null");return m}function v(m){return typeof m=="function"}function _(m,S){const D=Math.min(m.length,S.length);for(let E=0;E<D;E++)d(m[E],S[E])}function d(m,S){if(u(S)){if(typeof m!==S)throw new Error(`argument does not match constraint: typeof ${S}`)}else if(v(S)){try{if(m instanceof S)return}catch{}if(!I(m)&&m.constructor===S||S.length===1&&S.call(void 0,m)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}},33924:(Mt,He,c)=>{c.d(He,{M:()=>M,S:()=>w});var u=c(87856),G=c(88935),U=c(98414),P=c(51922);class M{static fromRangeInclusive(A){return new M(A.startLineNumber,A.endLineNumber+1)}static joinMany(A){if(A.length===0)return[];let I=new w(A[0].slice());for(let b=1;b<A.length;b++)I=I.getUnion(new w(A[b].slice()));return I.ranges}static join(A){if(A.length===0)throw new u.D7("lineRanges cannot be empty");let I=A[0].startLineNumber,b=A[0].endLineNumberExclusive;for(let C=1;C<A.length;C++)I=Math.min(I,A[C].startLineNumber),b=Math.max(b,A[C].endLineNumberExclusive);return new M(I,b)}static ofLength(A,I){return new M(A,A+I)}static deserialize(A){return new M(A[0],A[1])}constructor(A,I){if(A>I)throw new u.D7(`startLineNumber ${A} cannot be after endLineNumberExclusive ${I}`);this.startLineNumber=A,this.endLineNumberExclusive=I}contains(A){return this.startLineNumber<=A&&A<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(A){return new M(this.startLineNumber+A,this.endLineNumberExclusive+A)}deltaLength(A){return new M(this.startLineNumber,this.endLineNumberExclusive+A)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(A){return new M(Math.min(this.startLineNumber,A.startLineNumber),Math.max(this.endLineNumberExclusive,A.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(A){const I=Math.max(this.startLineNumber,A.startLineNumber),b=Math.min(this.endLineNumberExclusive,A.endLineNumberExclusive);if(I<=b)return new M(I,b)}intersectsStrict(A){return this.startLineNumber<A.endLineNumberExclusive&&A.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(A){return this.startLineNumber<=A.endLineNumberExclusive&&A.startLineNumber<=this.endLineNumberExclusive}equals(A){return this.startLineNumber===A.startLineNumber&&this.endLineNumberExclusive===A.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new U.Q(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new U.Q(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(A){const I=[];for(let b=this.startLineNumber;b<this.endLineNumberExclusive;b++)I.push(A(b));return I}forEach(A){for(let I=this.startLineNumber;I<this.endLineNumberExclusive;I++)A(I)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(A){return this.startLineNumber<=A&&A<this.endLineNumberExclusive}toOffsetRange(){return new G.L(this.startLineNumber-1,this.endLineNumberExclusive-1)}}class w{constructor(A=[]){this._normalizedRanges=A}get ranges(){return this._normalizedRanges}addRange(A){if(A.length===0)return;const I=(0,P.hw)(this._normalizedRanges,C=>C.endLineNumberExclusive>=A.startLineNumber),b=(0,P.iM)(this._normalizedRanges,C=>C.startLineNumber<=A.endLineNumberExclusive)+1;if(I===b)this._normalizedRanges.splice(I,0,A);else if(I===b-1){const C=this._normalizedRanges[I];this._normalizedRanges[I]=C.join(A)}else{const C=this._normalizedRanges[I].join(this._normalizedRanges[b-1]).join(A);this._normalizedRanges.splice(I,b-I,C)}}contains(A){const I=(0,P.lx)(this._normalizedRanges,b=>b.startLineNumber<=A);return!!I&&I.endLineNumberExclusive>A}intersects(A){const I=(0,P.lx)(this._normalizedRanges,b=>b.startLineNumber<A.endLineNumberExclusive);return!!I&&I.endLineNumberExclusive>A.startLineNumber}getUnion(A){if(this._normalizedRanges.length===0)return A;if(A._normalizedRanges.length===0)return this;const I=[];let b=0,C=0,v=null;for(;b<this._normalizedRanges.length||C<A._normalizedRanges.length;){let _=null;if(b<this._normalizedRanges.length&&C<A._normalizedRanges.length){const d=this._normalizedRanges[b],m=A._normalizedRanges[C];d.startLineNumber<m.startLineNumber?(_=d,b++):(_=m,C++)}else b<this._normalizedRanges.length?(_=this._normalizedRanges[b],b++):(_=A._normalizedRanges[C],C++);v===null?v=_:v.endLineNumberExclusive>=_.startLineNumber?v=new M(v.startLineNumber,Math.max(v.endLineNumberExclusive,_.endLineNumberExclusive)):(I.push(v),v=_)}return v!==null&&I.push(v),new w(I)}subtractFrom(A){const I=(0,P.hw)(this._normalizedRanges,_=>_.endLineNumberExclusive>=A.startLineNumber),b=(0,P.iM)(this._normalizedRanges,_=>_.startLineNumber<=A.endLineNumberExclusive)+1;if(I===b)return new w([A]);const C=[];let v=A.startLineNumber;for(let _=I;_<b;_++){const d=this._normalizedRanges[_];d.startLineNumber>v&&C.push(new M(v,d.startLineNumber)),v=d.endLineNumberExclusive}return v<A.endLineNumberExclusive&&C.push(new M(v,A.endLineNumberExclusive)),new w(C)}toString(){return this._normalizedRanges.map(A=>A.toString()).join(", ")}getIntersection(A){const I=[];let b=0,C=0;for(;b<this._normalizedRanges.length&&C<A._normalizedRanges.length;){const v=this._normalizedRanges[b],_=A._normalizedRanges[C],d=v.intersect(_);d&&!d.isEmpty&&I.push(d),v.endLineNumberExclusive<_.endLineNumberExclusive?b++:C++}return new w(I)}getWithDelta(A){return new w(this._normalizedRanges.map(I=>I.delta(A)))}}},34021:(Mt,He,c)=>{c.d(He,{$_:()=>W,HT:()=>D,pU:()=>S});var u=c(37519),G=c(67538),U=c(91467),P=c(42640),M=c(56491),w=c(33902),O=c(37473),A=c(45573),I=c(57643),b=c(39642);const C={IconContribution:"base.contributions.icons"};var v;(function(ve){function Re(Ae,re){let K=Ae.defaults;for(;P.L.isThemeIcon(K);){const F=m.getIcon(K.id);if(!F)return;K=F.defaults}return K}ve.getDefinition=Re})(v||(v={}));var _;(function(ve){function Re(re){return{weight:re.weight,style:re.style,src:re.src.map(K=>({format:K.format,location:K.location.toString()}))}}ve.toJSONObject=Re;function Ae(re){const K=F=>(0,w.Kg)(F)?F:void 0;if(re&&Array.isArray(re.src)&&re.src.every(F=>(0,w.Kg)(F.format)&&(0,w.Kg)(F.location)))return{weight:K(re.weight),style:K(re.style),src:re.src.map(F=>({format:F.format,location:O.r.parse(F.location)}))}}ve.fromJSONObject=Ae})(_||(_={}));class d{constructor(){this._onDidChange=new M.vl,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:(0,A.kg)("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:(0,A.kg)("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${P.L.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(Re,Ae,re,K){const F=this.iconsById[Re];if(F){if(re&&!F.description){F.description=re,this.iconSchema.properties[Re].markdownDescription=`${re} $(${Re})`;const me=this.iconReferenceSchema.enum.indexOf(Re);me!==-1&&(this.iconReferenceSchema.enumDescriptions[me]=re),this._onDidChange.fire()}return F}const N={id:Re,description:re,defaults:Ae,deprecationMessage:K};this.iconsById[Re]=N;const j={$ref:"#/definitions/icons"};return K&&(j.deprecationMessage=K),re&&(j.markdownDescription=`${re}: $(${Re})`),this.iconSchema.properties[Re]=j,this.iconReferenceSchema.enum.push(Re),this.iconReferenceSchema.enumDescriptions.push(re||""),this._onDidChange.fire(),{id:Re}}getIcons(){return Object.keys(this.iconsById).map(Re=>this.iconsById[Re])}getIcon(Re){return this.iconsById[Re]}getIconSchema(){return this.iconSchema}toString(){const Re=(F,N)=>F.id.localeCompare(N.id),Ae=F=>{for(;P.L.isThemeIcon(F.defaults);)F=this.iconsById[F.defaults.id];return`codicon codicon-${F?F.id:""}`},re=[];re.push("| preview     | identifier                        | default codicon ID                | description"),re.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const K=Object.keys(this.iconsById).map(F=>this.iconsById[F]);for(const F of K.filter(N=>!!N.description).sort(Re))re.push(`|<i class="${Ae(F)}"></i>|${F.id}|${P.L.isThemeIcon(F.defaults)?F.defaults.id:F.id}|${F.description||""}|`);re.push("| preview     | identifier                        "),re.push("| ----------- | --------------------------------- |");for(const F of K.filter(N=>!P.L.isThemeIcon(N.defaults)).sort(Re))re.push(`|<i class="${Ae(F)}"></i>|${F.id}|`);return re.join(`
`)}}const m=new d;b.O.add(C.IconContribution,m);function S(ve,Re,Ae,re){return m.registerIcon(ve,Re,Ae,re)}function D(){return m}function E(){const ve=(0,U.J)();for(const Re in ve){const Ae="\\"+ve[Re].toString(16);m.registerIcon(Re,{fontCharacter:Ae})}}E();const B="vscode://schemas/icons",R=b.O.as(I.F.JSONContribution);R.registerSchema(B,m.getIconSchema());const z=new u.uC(()=>R.notifySchemaChanged(B),200);m.onDidChange(()=>{z.isScheduled()||z.schedule()});const W=S("widget-close",G.W.close,(0,A.kg)("widgetClose","Icon for the close action in widgets.")),$=S("goto-previous-location",G.W.arrowUp,(0,A.kg)("previousChangeIcon","Icon for goto previous editor location.")),Q=S("goto-next-location",G.W.arrowDown,(0,A.kg)("nextChangeIcon","Icon for goto next editor location.")),q=P.L.modify(G.W.sync,"spin"),ne=P.L.modify(G.W.loading,"spin")},34435:(Mt,He,c)=>{c.d(He,{W:()=>u,j:()=>G});function u(U){return U<0?0:U>255?255:U|0}function G(U){return U<0?0:U>4294967295?4294967295:U|0}},34593:(Mt,He,c)=>{c.d(He,{T:()=>U,x:()=>G});const u=[];function G(P){u.push(P)}function U(){return u.slice(0)}},34596:(Mt,He,c)=>{c.d(He,{N:()=>z});var u=c(31938),G=c(17577),U=c(67538),P=c(53897),M=c(60599),w=c(63886),O=c(61353),A=c(42640),I=c(33902),b=c(49349),C=c(47223),v=c(33924),_=c(69504),d=c(98414),m=c(9709),S=c(45573),D=c(81545),E=function(Q,q,ne,ve){var Re=arguments.length,Ae=Re<3?q:ve===null?ve=Object.getOwnPropertyDescriptor(q,ne):ve,re;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ae=Reflect.decorate(Q,q,ne,ve);else for(var K=Q.length-1;K>=0;K--)(re=Q[K])&&(Ae=(Re<3?re(Ae):Re>3?re(q,ne,Ae):re(q,ne))||Ae);return Re>3&&Ae&&Object.defineProperty(q,ne,Ae),Ae},B=function(Q,q){return function(ne,ve){q(ne,ve,Q)}},R;let z=class extends M.jG{static{R=this}static{this._breadcrumbsSourceFactory=(0,w.FY)(R,()=>({dispose(){},getBreadcrumbItems(q,ne){return[]}}))}static setBreadcrumbsSourceFactory(q){this._breadcrumbsSourceFactory.set(q,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(q,ne,ve,Re){super(),this._editors=q,this._diffModel=ne,this._options=ve,this._instantiationService=Re,this._modifiedOutlineSource=(0,O.a0)(this,F=>{const N=this._editors.modifiedModel.read(F),j=R._breadcrumbsSourceFactory.read(F);return!N||!j?void 0:j(N,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(F=>{if(F.reason===1)return;const N=this._diffModel.get();(0,w.Rn)(j=>{for(const me of this._editors.original.getSelections()||[])N?.ensureOriginalLineIsVisible(me.getStartPosition().lineNumber,0,j),N?.ensureOriginalLineIsVisible(me.getEndPosition().lineNumber,0,j)})})),this._register(this._editors.modified.onDidChangeCursorPosition(F=>{if(F.reason===1)return;const N=this._diffModel.get();(0,w.Rn)(j=>{for(const me of this._editors.modified.getSelections()||[])N?.ensureModifiedLineIsVisible(me.getStartPosition().lineNumber,0,j),N?.ensureModifiedLineIsVisible(me.getEndPosition().lineNumber,0,j)})}));const Ae=this._diffModel.map((F,N)=>{const j=F?.unchangedRegions.read(N)??[];return j.length===1&&j[0].modifiedLineNumber===1&&j[0].lineCount===this._editors.modifiedModel.read(N)?.getLineCount()?[]:j});this.viewZones=(0,w.rm)(this,(F,N)=>{const j=this._modifiedOutlineSource.read(F);if(!j)return{origViewZones:[],modViewZones:[]};const me=[],ce=[],he=this._options.renderSideBySide.read(F),Le=this._options.compactMode.read(F),Y=Ae.read(F);for(let ae=0;ae<Y.length;ae++){const Ce=Y[ae];if(!Ce.shouldHideControls(F)&&!(Le&&(ae===0||ae===Y.length-1)))if(Le){{const Pe=(0,w.un)(this,Ke=>Ce.getHiddenOriginalRange(Ke).startLineNumber-1),ye=new C.D1(Pe,12);me.push(ye),N.add(new W(this._editors.original,ye,Ce,!he))}{const Pe=(0,w.un)(this,Ke=>Ce.getHiddenModifiedRange(Ke).startLineNumber-1),ye=new C.D1(Pe,12);ce.push(ye),N.add(new W(this._editors.modified,ye,Ce))}}else{{const Pe=(0,w.un)(this,Ke=>Ce.getHiddenOriginalRange(Ke).startLineNumber-1),ye=new C.D1(Pe,24);me.push(ye),N.add(new $(this._editors.original,ye,Ce,Ce.originalUnchangedRange,!he,j,Ke=>this._diffModel.get().ensureModifiedLineIsVisible(Ke,2,void 0),this._options))}{const Pe=(0,w.un)(this,Ke=>Ce.getHiddenModifiedRange(Ke).startLineNumber-1),ye=new C.D1(Pe,24);ce.push(ye),N.add(new $(this._editors.modified,ye,Ce,Ce.modifiedUnchangedRange,!1,j,Ke=>this._diffModel.get().ensureModifiedLineIsVisible(Ke,2,void 0),this._options))}}}return{origViewZones:me,modViewZones:ce}});const re={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},K={description:"Fold Unchanged",glyphMarginHoverMessage:new P.Bc(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown((0,S.kg)("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+A.L.asClassName(U.W.fold),zIndex:10001};this._register((0,C.pY)(this._editors.original,(0,w.un)(this,F=>{const N=Ae.read(F),j=N.map(me=>({range:me.originalUnchangedRange.toInclusiveRange(),options:re}));for(const me of N)me.shouldHideControls(F)&&j.push({range:d.Q.fromPositions(new _.y(me.originalLineNumber,1)),options:K});return j}))),this._register((0,C.pY)(this._editors.modified,(0,w.un)(this,F=>{const N=Ae.read(F),j=N.map(me=>({range:me.modifiedUnchangedRange.toInclusiveRange(),options:re}));for(const me of N)me.shouldHideControls(F)&&j.push({range:v.M.ofLength(me.modifiedLineNumber,1).toInclusiveRange(),options:K});return j}))),this._register((0,w.fm)(F=>{const N=Ae.read(F);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(N.map(j=>j.getHiddenOriginalRange(F).toInclusiveRange()).filter(I.O9)),this._editors.modified.setHiddenAreas(N.map(j=>j.getHiddenModifiedRange(F).toInclusiveRange()).filter(I.O9))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(F=>{if(!F.event.rightButton&&F.target.position&&F.target.element?.className.includes("fold-unchanged")){const N=F.target.position.lineNumber,j=this._diffModel.get();if(!j)return;const me=j.unchangedRegions.get().find(ce=>ce.modifiedUnchangedRange.includes(N));if(!me)return;me.collapseAll(void 0),F.event.stopPropagation(),F.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(F=>{if(!F.event.rightButton&&F.target.position&&F.target.element?.className.includes("fold-unchanged")){const N=F.target.position.lineNumber,j=this._diffModel.get();if(!j)return;const me=j.unchangedRegions.get().find(ce=>ce.originalUnchangedRange.includes(N));if(!me)return;me.collapseAll(void 0),F.event.stopPropagation(),F.event.preventDefault()}}))}};z=R=E([B(3,D._Y)],z);class W extends C.uN{constructor(q,ne,ve,Re=!1){const Ae=(0,u.h)("div.diff-hidden-lines-widget");super(q,ne,Ae.root),this._unchangedRegion=ve,this._hide=Re,this._nodes=(0,u.h)("div.diff-hidden-lines-compact",[(0,u.h)("div.line-left",[]),(0,u.h)("div.text@text",[]),(0,u.h)("div.line-right",[])]),Ae.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register((0,w.fm)(re=>{if(!this._hide){const K=this._unchangedRegion.getHiddenModifiedRange(re).length,F=(0,S.kg)("hiddenLines","{0} hidden lines",K);this._nodes.text.innerText=F}}))}}class $ extends C.uN{constructor(q,ne,ve,Re,Ae,re,K,F){const N=(0,u.h)("div.diff-hidden-lines-widget");super(q,ne,N.root),this._editor=q,this._unchangedRegion=ve,this._unchangedRegionRange=Re,this._hide=Ae,this._modifiedOutlineSource=re,this._revealModifiedHiddenLine=K,this._options=F,this._nodes=(0,u.h)("div.diff-hidden-lines",[(0,u.h)("div.top@top",{title:(0,S.kg)("diff.hiddenLines.top","Click or drag to show more above")}),(0,u.h)("div.center@content",{style:{display:"flex"}},[(0,u.h)("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[(0,u.$)("a",{title:(0,S.kg)("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...(0,G.n)("$(unfold)"))]),(0,u.h)("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),(0,u.h)("div.bottom@bottom",{title:(0,S.kg)("diff.bottom","Click or drag to show more below"),role:"button"})]),N.root.appendChild(this._nodes.root),this._hide?(0,u.Ln)(this._nodes.first):this._register((0,C.AV)(this._nodes.first,{width:(0,b.Ud)(this._editor).layoutInfoContentLeft})),this._register((0,w.fm)(me=>{const ce=this._unchangedRegion.visibleLineCountTop.read(me)+this._unchangedRegion.visibleLineCountBottom.read(me)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!ce),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(me)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(me)>0),this._nodes.top.classList.toggle("canMoveBottom",!ce);const he=this._unchangedRegion.isDragged.read(me),Le=this._editor.getDomNode();Le&&(Le.classList.toggle("draggingUnchangedRegion",!!he),he==="top"?(Le.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(me)>0),Le.classList.toggle("canMoveBottom",!ce)):he==="bottom"?(Le.classList.toggle("canMoveTop",!ce),Le.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(me)>0)):(Le.classList.toggle("canMoveTop",!1),Le.classList.toggle("canMoveBottom",!1)))}));const j=this._editor;this._register((0,u.ko)(this._nodes.top,"mousedown",me=>{if(me.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),me.preventDefault();const ce=me.clientY;let he=!1;const Le=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const Y=(0,u.zk)(this._nodes.top),ae=(0,u.ko)(Y,"mousemove",Pe=>{const Ke=Pe.clientY-ce;he=he||Math.abs(Ke)>2;const qe=Math.round(Ke/j.getOption(67)),Ue=Math.max(0,Math.min(Le+qe,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(Ue,void 0)}),Ce=(0,u.ko)(Y,"mouseup",Pe=>{he||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),ae.dispose(),Ce.dispose()})})),this._register((0,u.ko)(this._nodes.bottom,"mousedown",me=>{if(me.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),me.preventDefault();const ce=me.clientY;let he=!1;const Le=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const Y=(0,u.zk)(this._nodes.bottom),ae=(0,u.ko)(Y,"mousemove",Pe=>{const Ke=Pe.clientY-ce;he=he||Math.abs(Ke)>2;const qe=Math.round(Ke/j.getOption(67)),Ue=Math.max(0,Math.min(Le-qe,this._unchangedRegion.getMaxVisibleLineCountBottom())),x=this._unchangedRegionRange.endLineNumberExclusive>j.getModel().getLineCount()?j.getContentHeight():j.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(Ue,void 0);const it=this._unchangedRegionRange.endLineNumberExclusive>j.getModel().getLineCount()?j.getContentHeight():j.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);j.setScrollTop(j.getScrollTop()+(it-x))}),Ce=(0,u.ko)(Y,"mouseup",Pe=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!he){const ye=j.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const Ke=j.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);j.setScrollTop(j.getScrollTop()+(Ke-ye))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),ae.dispose(),Ce.dispose()})})),this._register((0,w.fm)(me=>{const ce=[];if(!this._hide){const he=ve.getHiddenModifiedRange(me).length,Le=(0,S.kg)("hiddenLines","{0} hidden lines",he),Y=(0,u.$)("span",{title:(0,S.kg)("diff.hiddenLines.expandAll","Double click to unfold")},Le);Y.addEventListener("dblclick",Pe=>{Pe.button===0&&(Pe.preventDefault(),this._unchangedRegion.showAll(void 0))}),ce.push(Y);const ae=this._unchangedRegion.getHiddenModifiedRange(me),Ce=this._modifiedOutlineSource.getBreadcrumbItems(ae,me);if(Ce.length>0){ce.push((0,u.$)("span",void 0,"\xA0\xA0|\xA0\xA0"));for(let Pe=0;Pe<Ce.length;Pe++){const ye=Ce[Pe],Ke=m.gP.toIcon(ye.kind),qe=(0,u.h)("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[(0,G.s)(Ke),"\xA0",ye.name,...Pe===Ce.length-1?[]:[(0,G.s)(U.W.chevronRight)]]).root;ce.push(qe),qe.onclick=()=>{this._revealModifiedHiddenLine(ye.startLineNumber)}}}}(0,u.Ln)(this._nodes.others,...ce)}))}}},34771:(Mt,He,c)=>{c.r(He),c.d(He,{ILanguageFeatureDebounceService:()=>C,LanguageFeatureDebounceService:()=>m});var u=c(79475),G=c(41461),U=c(23957),P=c(26390),M=c(73429),w=c(81545),O=c(92824),A=c(54021),I=function(S,D,E,B){var R=arguments.length,z=R<3?D:B===null?B=Object.getOwnPropertyDescriptor(D,E):B,W;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(S,D,E,B);else for(var $=S.length-1;$>=0;$--)(W=S[$])&&(z=(R<3?W(z):R>3?W(D,E,z):W(D,E))||z);return R>3&&z&&Object.defineProperty(D,E,z),z},b=function(S,D){return function(E,B){D(E,B,S)}};const C=(0,w.u1)("ILanguageFeatureDebounceService");var v;(function(S){const D=new WeakMap;let E=0;function B(R){let z=D.get(R);return z===void 0&&(z=++E,D.set(R,z)),z}S.of=B})(v||(v={}));class _{constructor(D){this._default=D}get(D){return this._default}update(D,E){return this._default}default(){return this._default}}class d{constructor(D,E,B,R,z,W){this._logService=D,this._name=E,this._registry=B,this._default=R,this._min=z,this._max=W,this._cache=new G.qK(50,.7)}_key(D){return D.id+this._registry.all(D).reduce((E,B)=>(0,u.sN)(v.of(B),E),0)}get(D){const E=this._key(D),B=this._cache.get(E);return B?(0,U.qE)(B.value,this._min,this._max):this.default()}update(D,E){const B=this._key(D);let R=this._cache.get(B);R||(R=new U.mu(6),this._cache.set(B,R));const z=(0,U.qE)(R.update(E),this._min,this._max);return(0,A.v$)(D.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${D.uri.toString()} is ${z}ms`),z}_overall(){const D=new U.Uq;for(const[,E]of this._cache)D.update(E.value);return D.value}default(){const D=this._overall()|0||this._default;return(0,U.qE)(D,this._min,this._max)}}let m=class{constructor(D,E){this._logService=D,this._data=new Map,this._isDev=E.isExtensionDevelopment||!E.isBuilt}for(D,E,B){const R=B?.min??50,z=B?.max??R**2,W=B?.key??void 0,$=`${v.of(D)},${R}${W?","+W:""}`;let Q=this._data.get($);return Q||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${E}] is disabled in developed mode`),Q=new _(R*1.5)):Q=new d(this._logService,E,D,this._overallAverage()|0||R*1.5,R,z),this._data.set($,Q)),Q}_overallAverage(){const D=new U.Uq;for(const E of this._data.values())D.update(E.default());return D.value}};m=I([b(0,O.rr),b(1,P.k)],m),(0,M.v)(C,m,1)},34918:(Mt,He,c)=>{c.d(He,{L:()=>G});var u=c(81545);const G=(0,u.u1)("workspaceTrustManagementService")},34920:(Mt,He,c)=>{c.d(He,{$J:()=>P,Q1:()=>M,bU:()=>G,hB:()=>U});function u(w,O){const A=Math.pow(10,O);return Math.round(w*A)/A}class G{constructor(O,A,I,b=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,O))|0,this.g=Math.min(255,Math.max(0,A))|0,this.b=Math.min(255,Math.max(0,I))|0,this.a=u(Math.max(Math.min(1,b),0),3)}static equals(O,A){return O.r===A.r&&O.g===A.g&&O.b===A.b&&O.a===A.a}}class U{constructor(O,A,I,b){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,O),0)|0,this.s=u(Math.max(Math.min(1,A),0),3),this.l=u(Math.max(Math.min(1,I),0),3),this.a=u(Math.max(Math.min(1,b),0),3)}static equals(O,A){return O.h===A.h&&O.s===A.s&&O.l===A.l&&O.a===A.a}static fromRGBA(O){const A=O.r/255,I=O.g/255,b=O.b/255,C=O.a,v=Math.max(A,I,b),_=Math.min(A,I,b);let d=0,m=0;const S=(_+v)/2,D=v-_;if(D>0){switch(m=Math.min(S<=.5?D/(2*S):D/(2-2*S),1),v){case A:d=(I-b)/D+(I<b?6:0);break;case I:d=(b-A)/D+2;break;case b:d=(A-I)/D+4;break}d*=60,d=Math.round(d)}return new U(d,m,S,C)}static _hue2rgb(O,A,I){return I<0&&(I+=1),I>1&&(I-=1),I<1/6?O+(A-O)*6*I:I<1/2?A:I<2/3?O+(A-O)*(2/3-I)*6:O}static toRGBA(O){const A=O.h/360,{s:I,l:b,a:C}=O;let v,_,d;if(I===0)v=_=d=b;else{const m=b<.5?b*(1+I):b+I-b*I,S=2*b-m;v=U._hue2rgb(S,m,A+1/3),_=U._hue2rgb(S,m,A),d=U._hue2rgb(S,m,A-1/3)}return new G(Math.round(v*255),Math.round(_*255),Math.round(d*255),C)}}class P{constructor(O,A,I,b){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,O),0)|0,this.s=u(Math.max(Math.min(1,A),0),3),this.v=u(Math.max(Math.min(1,I),0),3),this.a=u(Math.max(Math.min(1,b),0),3)}static equals(O,A){return O.h===A.h&&O.s===A.s&&O.v===A.v&&O.a===A.a}static fromRGBA(O){const A=O.r/255,I=O.g/255,b=O.b/255,C=Math.max(A,I,b),v=Math.min(A,I,b),_=C-v,d=C===0?0:_/C;let m;return _===0?m=0:C===A?m=((I-b)/_%6+6)%6:C===I?m=(b-A)/_+2:m=(A-I)/_+4,new P(Math.round(m*60),d,C,O.a)}static toRGBA(O){const{h:A,s:I,v:b,a:C}=O,v=b*I,_=v*(1-Math.abs(A/60%2-1)),d=b-v;let[m,S,D]=[0,0,0];return A<60?(m=v,S=_):A<120?(m=_,S=v):A<180?(S=v,D=_):A<240?(S=_,D=v):A<300?(m=_,D=v):A<=360&&(m=v,D=_),m=Math.round((m+d)*255),S=Math.round((S+d)*255),D=Math.round((D+d)*255),new G(m,S,D,C)}}class M{static fromHex(O){return M.Format.CSS.parseHex(O)||M.red}static equals(O,A){return!O&&!A?!0:!O||!A?!1:O.equals(A)}get hsla(){return this._hsla?this._hsla:U.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:P.fromRGBA(this.rgba)}constructor(O){if(O)if(O instanceof G)this.rgba=O;else if(O instanceof U)this._hsla=O,this.rgba=U.toRGBA(O);else if(O instanceof P)this._hsva=O,this.rgba=P.toRGBA(O);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(O){return!!O&&G.equals(this.rgba,O.rgba)&&U.equals(this.hsla,O.hsla)&&P.equals(this.hsva,O.hsva)}getRelativeLuminance(){const O=M._relativeLuminanceForComponent(this.rgba.r),A=M._relativeLuminanceForComponent(this.rgba.g),I=M._relativeLuminanceForComponent(this.rgba.b),b=.2126*O+.7152*A+.0722*I;return u(b,4)}static _relativeLuminanceForComponent(O){const A=O/255;return A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(O){const A=this.getRelativeLuminance(),I=O.getRelativeLuminance();return A>I}isDarkerThan(O){const A=this.getRelativeLuminance(),I=O.getRelativeLuminance();return A<I}lighten(O){return new M(new U(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*O,this.hsla.a))}darken(O){return new M(new U(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*O,this.hsla.a))}transparent(O){const{r:A,g:I,b,a:C}=this.rgba;return new M(new G(A,I,b,C*O))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new M(new G(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(O){if(this.isOpaque()||O.rgba.a!==1)return this;const{r:A,g:I,b,a:C}=this.rgba;return new M(new G(O.rgba.r-C*(O.rgba.r-A),O.rgba.g-C*(O.rgba.g-I),O.rgba.b-C*(O.rgba.b-b),1))}toString(){return this._toString||(this._toString=M.Format.CSS.format(this)),this._toString}static getLighterColor(O,A,I){if(O.isLighterThan(A))return O;I=I||.5;const b=O.getRelativeLuminance(),C=A.getRelativeLuminance();return I=I*(C-b)/C,O.lighten(I)}static getDarkerColor(O,A,I){if(O.isDarkerThan(A))return O;I=I||.5;const b=O.getRelativeLuminance(),C=A.getRelativeLuminance();return I=I*(b-C)/b,O.darken(I)}static{this.white=new M(new G(255,255,255,1))}static{this.black=new M(new G(0,0,0,1))}static{this.red=new M(new G(255,0,0,1))}static{this.blue=new M(new G(0,0,255,1))}static{this.green=new M(new G(0,255,0,1))}static{this.cyan=new M(new G(0,255,255,1))}static{this.lightgrey=new M(new G(211,211,211,1))}static{this.transparent=new M(new G(0,0,0,0))}}(function(w){let O;(function(A){let I;(function(b){function C(z){return z.rgba.a===1?`rgb(${z.rgba.r}, ${z.rgba.g}, ${z.rgba.b})`:w.Format.CSS.formatRGBA(z)}b.formatRGB=C;function v(z){return`rgba(${z.rgba.r}, ${z.rgba.g}, ${z.rgba.b}, ${+z.rgba.a.toFixed(2)})`}b.formatRGBA=v;function _(z){return z.hsla.a===1?`hsl(${z.hsla.h}, ${(z.hsla.s*100).toFixed(2)}%, ${(z.hsla.l*100).toFixed(2)}%)`:w.Format.CSS.formatHSLA(z)}b.formatHSL=_;function d(z){return`hsla(${z.hsla.h}, ${(z.hsla.s*100).toFixed(2)}%, ${(z.hsla.l*100).toFixed(2)}%, ${z.hsla.a.toFixed(2)})`}b.formatHSLA=d;function m(z){const W=z.toString(16);return W.length!==2?"0"+W:W}function S(z){return`#${m(z.rgba.r)}${m(z.rgba.g)}${m(z.rgba.b)}`}b.formatHex=S;function D(z,W=!1){return W&&z.rgba.a===1?w.Format.CSS.formatHex(z):`#${m(z.rgba.r)}${m(z.rgba.g)}${m(z.rgba.b)}${m(Math.round(z.rgba.a*255))}`}b.formatHexA=D;function E(z){return z.isOpaque()?w.Format.CSS.formatHex(z):w.Format.CSS.formatRGBA(z)}b.format=E;function B(z){const W=z.length;if(W===0||z.charCodeAt(0)!==35)return null;if(W===7){const $=16*R(z.charCodeAt(1))+R(z.charCodeAt(2)),Q=16*R(z.charCodeAt(3))+R(z.charCodeAt(4)),q=16*R(z.charCodeAt(5))+R(z.charCodeAt(6));return new w(new G($,Q,q,1))}if(W===9){const $=16*R(z.charCodeAt(1))+R(z.charCodeAt(2)),Q=16*R(z.charCodeAt(3))+R(z.charCodeAt(4)),q=16*R(z.charCodeAt(5))+R(z.charCodeAt(6)),ne=16*R(z.charCodeAt(7))+R(z.charCodeAt(8));return new w(new G($,Q,q,ne/255))}if(W===4){const $=R(z.charCodeAt(1)),Q=R(z.charCodeAt(2)),q=R(z.charCodeAt(3));return new w(new G(16*$+$,16*Q+Q,16*q+q))}if(W===5){const $=R(z.charCodeAt(1)),Q=R(z.charCodeAt(2)),q=R(z.charCodeAt(3)),ne=R(z.charCodeAt(4));return new w(new G(16*$+$,16*Q+Q,16*q+q,(16*ne+ne)/255))}return null}b.parseHex=B;function R(z){switch(z){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(I=A.CSS||(A.CSS={}))})(O=w.Format||(w.Format={}))})(M||(M={}))},35946:(Mt,He,c)=>{c.d(He,{DO:()=>Xe,KP:()=>F,RD:()=>ae,vD:()=>Y,w0:()=>K});var u=c(31938),G=c(89530),U=c(15625),P=c(80074),M=c(78398),w=c(79766),O=c(63074),A=c(84546),I=c(47896),b=c(51473),C=c(37852),v=c(43860),_=c(93009),d=c(37519),m=c(67538),S=c(42640),D=c(41461),E=c(56491),B=c(5262),R=c(60599),z=c(23957),W=c(33902),$=c(45573),Q=c(15903),q=c(63886),ne=c(78690);class ve extends O.ur{constructor(te){super(te.elements.map(oe=>oe.element)),this.data=te}}function Re(pe){return pe instanceof O.ur?new ve(pe):pe}class Ae{constructor(te,oe){this.modelProvider=te,this.dnd=oe,this.autoExpandDisposable=R.jG.None,this.disposables=new R.Cm}getDragURI(te){return this.dnd.getDragURI(te.element)}getDragLabel(te,oe){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(te.map(Te=>Te.element),oe)}onDragStart(te,oe){this.dnd.onDragStart?.(Re(te),oe)}onDragOver(te,oe,Te,Ve,We,dt=!0){const Ye=this.dnd.onDragOver(Re(te),oe&&oe.element,Te,Ve,We),mt=this.autoExpandNode!==oe;if(mt&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=oe),typeof oe>"u")return Ye;if(mt&&typeof Ye!="boolean"&&Ye.autoExpand&&(this.autoExpandDisposable=(0,d.EQ)(()=>{const ri=this.modelProvider(),ke=ri.getNodeLocation(oe);ri.isCollapsed(ke)&&ri.setCollapsed(ke,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof Ye=="boolean"||!Ye.accept||typeof Ye.bubble>"u"||Ye.feedback){if(!dt){const ri=typeof Ye=="boolean"?Ye:Ye.accept,ke=typeof Ye=="boolean"?void 0:Ye.effect;return{accept:ri,effect:ke,feedback:[Te]}}return Ye}if(Ye.bubble===1){const ri=this.modelProvider(),ke=ri.getNodeLocation(oe),Z=ri.getParentNodeLocation(ke),Fe=ri.getNode(Z),pt=Z&&ri.getListIndex(Z);return this.onDragOver(te,Fe,pt,Ve,We,!1)}const Dt=this.modelProvider(),Se=Dt.getNodeLocation(oe),we=Dt.getListIndex(Se),Xt=Dt.getListRenderCount(Se);return{...Ye,feedback:(0,_.y1)(we,we+Xt)}}drop(te,oe,Te,Ve,We){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(Re(te),oe&&oe.element,Te,Ve,We)}onDragEnd(te){this.dnd.onDragEnd?.(te)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function re(pe,te){return te&&{...te,identityProvider:te.identityProvider&&{getId(oe){return te.identityProvider.getId(oe.element)}},dnd:te.dnd&&new Ae(pe,te.dnd),multipleSelectionController:te.multipleSelectionController&&{isSelectionSingleChangeEvent(oe){return te.multipleSelectionController.isSelectionSingleChangeEvent({...oe,element:oe.element})},isSelectionRangeChangeEvent(oe){return te.multipleSelectionController.isSelectionRangeChangeEvent({...oe,element:oe.element})}},accessibilityProvider:te.accessibilityProvider&&{...te.accessibilityProvider,getSetSize(oe){const Te=pe(),Ve=Te.getNodeLocation(oe),We=Te.getParentNodeLocation(Ve);return Te.getNode(We).visibleChildrenCount},getPosInSet(oe){return oe.visibleChildIndex+1},isChecked:te.accessibilityProvider&&te.accessibilityProvider.isChecked?oe=>te.accessibilityProvider.isChecked(oe.element):void 0,getRole:te.accessibilityProvider&&te.accessibilityProvider.getRole?oe=>te.accessibilityProvider.getRole(oe.element):()=>"treeitem",getAriaLabel(oe){return te.accessibilityProvider.getAriaLabel(oe.element)},getWidgetAriaLabel(){return te.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:te.accessibilityProvider&&te.accessibilityProvider.getWidgetRole?()=>te.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:te.accessibilityProvider&&te.accessibilityProvider.getAriaLevel?oe=>te.accessibilityProvider.getAriaLevel(oe.element):oe=>oe.depth,getActiveDescendantId:te.accessibilityProvider.getActiveDescendantId&&(oe=>te.accessibilityProvider.getActiveDescendantId(oe.element))},keyboardNavigationLabelProvider:te.keyboardNavigationLabelProvider&&{...te.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(oe){return te.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(oe.element)}}}}class K{constructor(te){this.delegate=te}getHeight(te){return this.delegate.getHeight(te.element)}getTemplateId(te){return this.delegate.getTemplateId(te.element)}hasDynamicHeight(te){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(te.element)}setDynamicHeight(te,oe){this.delegate.setDynamicHeight?.(te.element,oe)}}var F;(function(pe){pe.None="none",pe.OnHover="onHover",pe.Always="always"})(F||(F={}));class N{get elements(){return this._elements}constructor(te,oe=[]){this._elements=oe,this.disposables=new R.Cm,this.onDidChange=E.Jh.forEach(te,Te=>this._elements=Te,this.disposables)}dispose(){this.disposables.dispose()}}class j{static{this.DefaultIndent=8}constructor(te,oe,Te,Ve,We,dt={}){this.renderer=te,this.modelProvider=oe,this.activeNodes=Ve,this.renderedIndentGuides=We,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=j.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=R.jG.None,this.disposables=new R.Cm,this.templateId=te.templateId,this.updateOptions(dt),E.Jh.map(Te,Ye=>Ye.node)(this.onDidChangeNodeTwistieState,this,this.disposables),te.onDidChangeTwistieState?.(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(te={}){if(typeof te.indent<"u"){const oe=(0,z.qE)(te.indent,0,40);if(oe!==this.indent){this.indent=oe;for(const[Te,Ve]of this.renderedNodes)this.renderTreeElement(Te,Ve)}}if(typeof te.renderIndentGuides<"u"){const oe=te.renderIndentGuides!==F.None;if(oe!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=oe;for(const[Te,Ve]of this.renderedNodes)this._renderIndentGuides(Te,Ve);if(this.indentGuidesDisposable.dispose(),oe){const Te=new R.Cm;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,Te),this.indentGuidesDisposable=Te,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof te.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=te.hideTwistiesOfChildlessElements)}renderTemplate(te){const oe=(0,u.BC)(te,(0,u.$)(".monaco-tl-row")),Te=(0,u.BC)(oe,(0,u.$)(".monaco-tl-indent")),Ve=(0,u.BC)(oe,(0,u.$)(".monaco-tl-twistie")),We=(0,u.BC)(oe,(0,u.$)(".monaco-tl-contents")),dt=this.renderer.renderTemplate(We);return{container:te,indent:Te,twistie:Ve,indentGuidesDisposable:R.jG.None,templateData:dt}}renderElement(te,oe,Te,Ve){this.renderedNodes.set(te,Te),this.renderedElements.set(te.element,te),this.renderTreeElement(te,Te),this.renderer.renderElement(te,oe,Te.templateData,Ve)}disposeElement(te,oe,Te,Ve){Te.indentGuidesDisposable.dispose(),this.renderer.disposeElement?.(te,oe,Te.templateData,Ve),typeof Ve=="number"&&(this.renderedNodes.delete(te),this.renderedElements.delete(te.element))}disposeTemplate(te){this.renderer.disposeTemplate(te.templateData)}onDidChangeTwistieState(te){const oe=this.renderedElements.get(te);oe&&this.onDidChangeNodeTwistieState(oe)}onDidChangeNodeTwistieState(te){const oe=this.renderedNodes.get(te);oe&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(te,oe))}renderTreeElement(te,oe){const Te=j.DefaultIndent+(te.depth-1)*this.indent;oe.twistie.style.paddingLeft=`${Te}px`,oe.indent.style.width=`${Te+this.indent-16}px`,te.collapsible?oe.container.setAttribute("aria-expanded",String(!te.collapsed)):oe.container.removeAttribute("aria-expanded"),oe.twistie.classList.remove(...S.L.asClassNameArray(m.W.treeItemExpanded));let Ve=!1;this.renderer.renderTwistie&&(Ve=this.renderer.renderTwistie(te.element,oe.twistie)),te.collapsible&&(!this.hideTwistiesOfChildlessElements||te.visibleChildrenCount>0)?(Ve||oe.twistie.classList.add(...S.L.asClassNameArray(m.W.treeItemExpanded)),oe.twistie.classList.add("collapsible"),oe.twistie.classList.toggle("collapsed",te.collapsed)):oe.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(te,oe)}_renderIndentGuides(te,oe){if((0,u.w_)(oe.indent),oe.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const Te=new R.Cm,Ve=this.modelProvider();for(;;){const We=Ve.getNodeLocation(te),dt=Ve.getParentNodeLocation(We);if(!dt)break;const Ye=Ve.getNode(dt),mt=(0,u.$)(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(Ye)&&mt.classList.add("active"),oe.indent.childElementCount===0?oe.indent.appendChild(mt):oe.indent.insertBefore(mt,oe.indent.firstElementChild),this.renderedIndentGuides.add(Ye,mt),Te.add((0,R.s)(()=>this.renderedIndentGuides.delete(Ye,mt))),te=Ye}oe.indentGuidesDisposable=Te}_onDidChangeActiveNodes(te){if(!this.shouldRenderIndentGuides)return;const oe=new Set,Te=this.modelProvider();te.forEach(Ve=>{const We=Te.getNodeLocation(Ve);try{const dt=Te.getParentNodeLocation(We);Ve.collapsible&&Ve.children.length>0&&!Ve.collapsed?oe.add(Ve):dt&&oe.add(Te.getNode(dt))}catch{}}),this.activeIndentNodes.forEach(Ve=>{oe.has(Ve)||this.renderedIndentGuides.forEach(Ve,We=>We.classList.remove("active"))}),oe.forEach(Ve=>{this.activeIndentNodes.has(Ve)||this.renderedIndentGuides.forEach(Ve,We=>We.classList.add("active"))}),this.activeIndentNodes=oe}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),(0,R.AS)(this.disposables)}}class me{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(te,oe,Te){this.tree=te,this.keyboardNavigationLabelProvider=oe,this._filter=Te,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new R.Cm,te.onWillRefilter(this.reset,this,this.disposables)}filter(te,oe){let Te=1;if(this._filter){const dt=this._filter.filter(te,oe);if(typeof dt=="boolean"?Te=dt?1:0:(0,b.iZ)(dt)?Te=(0,b.Mn)(dt.visibility):Te=dt,Te===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:B.ne.Default,visibility:Te};const Ve=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(te),We=Array.isArray(Ve)?Ve:[Ve];for(const dt of We){const Ye=dt&&dt.toString();if(typeof Ye>"u")return{data:B.ne.Default,visibility:Te};let mt;if(this.tree.findMatchType===ae.Contiguous){const Dt=Ye.toLowerCase().indexOf(this._lowercasePattern);if(Dt>-1){mt=[Number.MAX_SAFE_INTEGER,0];for(let Se=this._lowercasePattern.length;Se>0;Se--)mt.push(Dt+Se-1)}}else mt=(0,B.dt)(this._pattern,this._lowercasePattern,0,Ye,Ye.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(mt)return this._matchCount++,We.length===1?{data:mt,visibility:Te}:{data:{label:Ye,score:mt},visibility:Te}}return this.tree.findMode===Y.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(te):2:{data:B.ne.Default,visibility:Te}}reset(){this._totalCount=0,this._matchCount=0}dispose(){(0,R.AS)(this.disposables)}}class ce extends I.l{constructor(te){super({icon:m.W.listFilter,title:(0,$.kg)("filter","Filter"),isChecked:te.isChecked??!1,hoverDelegate:te.hoverDelegate??(0,Q.nZ)("element"),inputActiveOptionBorder:te.inputActiveOptionBorder,inputActiveOptionForeground:te.inputActiveOptionForeground,inputActiveOptionBackground:te.inputActiveOptionBackground})}}class he extends I.l{constructor(te){super({icon:m.W.searchFuzzy,title:(0,$.kg)("fuzzySearch","Fuzzy Match"),isChecked:te.isChecked??!1,hoverDelegate:te.hoverDelegate??(0,Q.nZ)("element"),inputActiveOptionBorder:te.inputActiveOptionBorder,inputActiveOptionForeground:te.inputActiveOptionForeground,inputActiveOptionBackground:te.inputActiveOptionBackground})}}const Le={inputBoxStyles:w.x8,toggleStyles:I.F,listFilterWidgetBackground:void 0,listFilterWidgetNoMatchesOutline:void 0,listFilterWidgetOutline:void 0,listFilterWidgetShadow:void 0};var Y;(function(pe){pe[pe.Highlight=0]="Highlight",pe[pe.Filter=1]="Filter"})(Y||(Y={}));var ae;(function(pe){pe[pe.Fuzzy=0]="Fuzzy",pe[pe.Contiguous=1]="Contiguous"})(ae||(ae={}));class Ce extends R.jG{set mode(te){this.modeToggle.checked=te===Y.Filter,this.findInput.inputBox.setPlaceHolder(te===Y.Filter?(0,$.kg)("type to filter","Type to filter"):(0,$.kg)("type to search","Type to search"))}set matchType(te){this.matchTypeToggle.checked=te===ae.Fuzzy}constructor(te,oe,Te,Ve,We,dt){super(),this.tree=oe,this.elements=(0,u.h)(".monaco-tree-type-filter",[(0,u.h)(".monaco-tree-type-filter-grab.codicon.codicon-debug-gripper@grab",{tabIndex:0}),(0,u.h)(".monaco-tree-type-filter-input@findInput"),(0,u.h)(".monaco-tree-type-filter-actionbar@actionbar")]),this.width=0,this.right=0,this.top=0,this._onDidDisable=new E.vl,te.appendChild(this.elements.root),this._register((0,R.s)(()=>this.elements.root.remove()));const Ye=dt?.styles??Le;Ye.listFilterWidgetBackground&&(this.elements.root.style.backgroundColor=Ye.listFilterWidgetBackground),Ye.listFilterWidgetShadow&&(this.elements.root.style.boxShadow=`0 0 8px 2px ${Ye.listFilterWidgetShadow}`);const mt=this._register((0,Q.bW)());this.modeToggle=this._register(new ce({...Ye.toggleStyles,isChecked:Ve===Y.Filter,hoverDelegate:mt})),this.matchTypeToggle=this._register(new he({...Ye.toggleStyles,isChecked:We===ae.Fuzzy,hoverDelegate:mt})),this.onDidChangeMode=E.Jh.map(this.modeToggle.onChange,()=>this.modeToggle.checked?Y.Filter:Y.Highlight,this._store),this.onDidChangeMatchType=E.Jh.map(this.matchTypeToggle.onChange,()=>this.matchTypeToggle.checked?ae.Fuzzy:ae.Contiguous,this._store),this.findInput=this._register(new M.c(this.elements.findInput,Te,{label:(0,$.kg)("type to search","Type to search"),additionalToggles:[this.modeToggle,this.matchTypeToggle],showCommonFindToggles:!1,inputBoxStyles:Ye.inputBoxStyles,toggleStyles:Ye.toggleStyles,history:dt?.history})),this.actionbar=this._register(new P.E(this.elements.actionbar)),this.mode=Ve;const Dt=this._register(new G.f(this.findInput.inputBox.inputElement,"keydown")),Se=E.Jh.chain(Dt.event,ke=>ke.map(Z=>new U.Z(Z)));this._register(Se(ke=>{if(ke.equals(3)){ke.preventDefault(),ke.stopPropagation(),this.findInput.inputBox.addToHistory(),this.tree.domFocus();return}if(ke.equals(18)){ke.preventDefault(),ke.stopPropagation(),this.findInput.inputBox.isAtLastInHistory()||this.findInput.inputBox.isNowhereInHistory()?(this.findInput.inputBox.addToHistory(),this.tree.domFocus()):this.findInput.inputBox.showNextValue();return}if(ke.equals(16)){ke.preventDefault(),ke.stopPropagation(),this.findInput.inputBox.showPreviousValue();return}}));const we=this._register(new v.rc("close",(0,$.kg)("close","Close"),"codicon codicon-close",!0,()=>this.dispose()));this.actionbar.push(we,{icon:!0,label:!1});const Xt=this._register(new G.f(this.elements.grab,"mousedown"));this._register(Xt.event(ke=>{const Z=new R.Cm,Fe=Z.add(new G.f((0,u.zk)(ke),"mousemove")),pt=Z.add(new G.f((0,u.zk)(ke),"mouseup")),et=this.right,Zt=ke.pageX,bi=this.top,ci=ke.pageY;this.elements.grab.classList.add("grabbing");const Oi=this.elements.root.style.transition;this.elements.root.style.transition="unset";const Ii=yi=>{const Vt=yi.pageX-Zt;this.right=et-Vt;const _n=yi.pageY-ci;this.top=bi+_n,this.layout()};Z.add(Fe.event(Ii)),Z.add(pt.event(yi=>{Ii(yi),this.elements.grab.classList.remove("grabbing"),this.elements.root.style.transition=Oi,Z.dispose()}))}));const ri=E.Jh.chain(this._register(new G.f(this.elements.grab,"keydown")).event,ke=>ke.map(Z=>new U.Z(Z)));this._register(ri(ke=>{let Z,Fe;if(ke.keyCode===15?Z=Number.POSITIVE_INFINITY:ke.keyCode===17?Z=0:ke.keyCode===10&&(Z=this.right===0?Number.POSITIVE_INFINITY:0),ke.keyCode===16?Fe=0:ke.keyCode===18&&(Fe=Number.POSITIVE_INFINITY),Z!==void 0&&(ke.preventDefault(),ke.stopPropagation(),this.right=Z,this.layout()),Fe!==void 0){ke.preventDefault(),ke.stopPropagation(),this.top=Fe;const pt=this.elements.root.style.transition;this.elements.root.style.transition="unset",this.layout(),setTimeout(()=>{this.elements.root.style.transition=pt},0)}})),this.onDidChangeValue=this.findInput.onDidChange}layout(te=this.width){this.width=te,this.right=(0,z.qE)(this.right,0,Math.max(0,te-212)),this.elements.root.style.right=`${this.right}px`,this.top=(0,z.qE)(this.top,0,24),this.elements.root.style.top=`${this.top}px`}showMessage(te){this.findInput.showMessage(te)}clearMessage(){this.findInput.clearMessage()}async dispose(){this._onDidDisable.fire(),this.elements.root.classList.add("disabled"),await(0,d.wR)(300),super.dispose()}}class Pe{get pattern(){return this._pattern}get mode(){return this._mode}set mode(te){te!==this._mode&&(this._mode=te,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(te))}get matchType(){return this._matchType}set matchType(te){te!==this._matchType&&(this._matchType=te,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(te))}constructor(te,oe,Te,Ve,We,dt={}){this.tree=te,this.view=Te,this.filter=Ve,this.contextViewProvider=We,this.options=dt,this._pattern="",this.width=0,this._onDidChangeMode=new E.vl,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new E.vl,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new E.vl,this._onDidChangeOpenState=new E.vl,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new R.Cm,this.disposables=new R.Cm,this._mode=te.options.defaultFindMode??Y.Highlight,this._matchType=te.options.defaultFindMatchType??ae.Fuzzy,oe.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(te={}){te.defaultFindMode!==void 0&&(this.mode=te.defaultFindMode),te.defaultFindMatchType!==void 0&&(this.matchType=te.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){const te=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&te?((0,ne.xE)((0,$.kg)("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??!0?this.widget?.showMessage({type:2,content:(0,$.kg)("not found","No elements found.")}):this.widget?.showMessage({type:2})):(this.widget?.clearMessage(),this.pattern&&(0,ne.xE)((0,$.kg)("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(te){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!B.ne.isDefault(te.filterData)}layout(te){this.width=te,this.widget?.layout(te)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function ye(pe,te){return pe.position===te.position&&Ke(pe,te)}function Ke(pe,te){return pe.node.element===te.node.element&&pe.startIndex===te.startIndex&&pe.height===te.height&&pe.endIndex===te.endIndex}class qe{constructor(te=[]){this.stickyNodes=te}get count(){return this.stickyNodes.length}equal(te){return(0,_.aI)(this.stickyNodes,te.stickyNodes,ye)}lastNodePartiallyVisible(){if(this.count===0)return!1;const te=this.stickyNodes[this.count-1];if(this.count===1)return te.position!==0;const oe=this.stickyNodes[this.count-2];return oe.position+oe.height!==te.position}animationStateChanged(te){if(!(0,_.aI)(this.stickyNodes,te.stickyNodes,Ke)||this.count===0)return!1;const oe=this.stickyNodes[this.count-1],Te=te.stickyNodes[te.count-1];return oe.position!==Te.position}}class Ue{constrainStickyScrollNodes(te,oe,Te){for(let Ve=0;Ve<te.length;Ve++){const We=te[Ve];if(We.position+We.height>Te||Ve>=oe)return te.slice(0,Ve)}return te}}class x extends R.jG{constructor(te,oe,Te,Ve,We,dt={}){super(),this.tree=te,this.model=oe,this.view=Te,this.treeDelegate=We,this.maxWidgetViewRatio=.4;const Ye=this.validateStickySettings(dt);this.stickyScrollMaxItemCount=Ye.stickyScrollMaxItemCount,this.stickyScrollDelegate=dt.stickyScrollDelegate??new Ue,this._widget=this._register(new it(Te.getScrollableElement(),Te,te,Ve,We,dt.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(Te.onDidScroll(()=>this.update())),this._register(Te.onDidChangeContentHeight(()=>this.update())),this._register(te.onDidChangeCollapseState(()=>this.update())),this.update()}get height(){return this._widget.height}getNodeAtHeight(te){let oe;if(te===0?oe=this.view.firstVisibleIndex:oe=this.view.indexAt(te+this.view.scrollTop),!(oe<0||oe>=this.view.length))return this.view.element(oe)}update(){const te=this.getNodeAtHeight(0);if(!te||this.tree.scrollTop===0){this._widget.setState(void 0);return}const oe=this.findStickyState(te);this._widget.setState(oe)}findStickyState(te){const oe=[];let Te=te,Ve=0,We=this.getNextStickyNode(Te,void 0,Ve);for(;We&&(oe.push(We),Ve+=We.height,!(oe.length<=this.stickyScrollMaxItemCount&&(Te=this.getNextVisibleNode(We),!Te)));)We=this.getNextStickyNode(Te,We.node,Ve);const dt=this.constrainStickyNodes(oe);return dt.length?new qe(dt):void 0}getNextVisibleNode(te){return this.getNodeAtHeight(te.position+te.height)}getNextStickyNode(te,oe,Te){const Ve=this.getAncestorUnderPrevious(te,oe);if(Ve&&!(Ve===te&&(!this.nodeIsUncollapsedParent(te)||this.nodeTopAlignsWithStickyNodesBottom(te,Te))))return this.createStickyScrollNode(Ve,Te)}nodeTopAlignsWithStickyNodesBottom(te,oe){const Te=this.getNodeIndex(te),Ve=this.view.getElementTop(Te),We=oe;return this.view.scrollTop===Ve-We}createStickyScrollNode(te,oe){const Te=this.treeDelegate.getHeight(te),{startIndex:Ve,endIndex:We}=this.getNodeRange(te),dt=this.calculateStickyNodePosition(We,oe,Te);return{node:te,position:dt,height:Te,startIndex:Ve,endIndex:We}}getAncestorUnderPrevious(te,oe=void 0){let Te=te,Ve=this.getParentNode(Te);for(;Ve;){if(Ve===oe)return Te;Te=Ve,Ve=this.getParentNode(Te)}if(oe===void 0)return Te}calculateStickyNodePosition(te,oe,Te){let Ve=this.view.getRelativeTop(te);if(Ve===null&&this.view.firstVisibleIndex===te&&te+1<this.view.length){const Dt=this.treeDelegate.getHeight(this.view.element(te)),Se=this.view.getRelativeTop(te+1);Ve=Se?Se-Dt/this.view.renderHeight:null}if(Ve===null)return oe;const We=this.view.element(te),dt=this.treeDelegate.getHeight(We),mt=Ve*this.view.renderHeight+dt;return oe+Te>mt&&oe<=mt?mt-Te:oe}constrainStickyNodes(te){if(te.length===0)return[];const oe=this.view.renderHeight*this.maxWidgetViewRatio,Te=te[te.length-1];if(te.length<=this.stickyScrollMaxItemCount&&Te.position+Te.height<=oe)return te;const Ve=this.stickyScrollDelegate.constrainStickyScrollNodes(te,this.stickyScrollMaxItemCount,oe);if(!Ve.length)return[];const We=Ve[Ve.length-1];if(Ve.length>this.stickyScrollMaxItemCount||We.position+We.height>oe)throw new Error("stickyScrollDelegate violates constraints");return Ve}getParentNode(te){const oe=this.model.getNodeLocation(te),Te=this.model.getParentNodeLocation(oe);return Te?this.model.getNode(Te):void 0}nodeIsUncollapsedParent(te){const oe=this.model.getNodeLocation(te);return this.model.getListRenderCount(oe)>1}getNodeIndex(te){const oe=this.model.getNodeLocation(te);return this.model.getListIndex(oe)}getNodeRange(te){const oe=this.model.getNodeLocation(te),Te=this.model.getListIndex(oe);if(Te<0)throw new Error("Node not found in tree");const Ve=this.model.getListRenderCount(oe),We=Te+Ve-1;return{startIndex:Te,endIndex:We}}nodePositionTopBelowWidget(te){const oe=[];let Te=this.getParentNode(te);for(;Te;)oe.push(Te),Te=this.getParentNode(Te);let Ve=0;for(let We=0;We<oe.length&&We<this.stickyScrollMaxItemCount;We++)Ve+=this.treeDelegate.getHeight(oe[We]);return Ve}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(te={}){if(!te.stickyScrollMaxItemCount)return;const oe=this.validateStickySettings(te);this.stickyScrollMaxItemCount!==oe.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=oe.stickyScrollMaxItemCount,this.update())}validateStickySettings(te){let oe=7;return typeof te.stickyScrollMaxItemCount=="number"&&(oe=Math.max(te.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:oe}}}class it{constructor(te,oe,Te,Ve,We,dt){this.view=oe,this.tree=Te,this.treeRenderers=Ve,this.treeDelegate=We,this.accessibilityProvider=dt,this._previousElements=[],this._previousStateDisposables=new R.Cm,this._rootDomNode=(0,u.$)(".monaco-tree-sticky-container.empty"),te.appendChild(this._rootDomNode);const Ye=(0,u.$)(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(Ye),this.stickyScrollFocus=new Ze(this._rootDomNode,oe),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const te=this._previousState.stickyNodes[this._previousState.count-1];return te.position+te.height}setState(te){const oe=!!this._previousState&&this._previousState.count>0,Te=!!te&&te.count>0;if(!oe&&!Te||oe&&Te&&this._previousState.equal(te))return;if(oe!==Te&&this.setVisible(Te),!Te){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const Ve=te.stickyNodes[te.count-1];if(this._previousState&&te.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${Ve.position}px`;else{this._previousStateDisposables.clear();const We=Array(te.count);for(let dt=te.count-1;dt>=0;dt--){const Ye=te.stickyNodes[dt],{element:mt,disposable:Dt}=this.createElement(Ye,dt,te.count);We[dt]=mt,this._rootDomNode.appendChild(mt),this._previousStateDisposables.add(Dt)}this.stickyScrollFocus.updateElements(We,te),this._previousElements=We}this._previousState=te,this._rootDomNode.style.height=`${Ve.position+Ve.height}px`}createElement(te,oe,Te){const Ve=te.startIndex,We=document.createElement("div");We.style.top=`${te.position}px`,this.tree.options.setRowHeight!==!1&&(We.style.height=`${te.height}px`),this.tree.options.setRowLineHeight!==!1&&(We.style.lineHeight=`${te.height}px`),We.classList.add("monaco-tree-sticky-row"),We.classList.add("monaco-list-row"),We.setAttribute("data-index",`${Ve}`),We.setAttribute("data-parity",Ve%2===0?"even":"odd"),We.setAttribute("id",this.view.getElementID(Ve));const dt=this.setAccessibilityAttributes(We,te.node.element,oe,Te),Ye=this.treeDelegate.getTemplateId(te.node),mt=this.treeRenderers.find(Xt=>Xt.templateId===Ye);if(!mt)throw new Error(`No renderer found for template id ${Ye}`);let Dt=te.node;Dt===this.tree.getNode(this.tree.getNodeLocation(te.node))&&(Dt=new Proxy(te.node,{}));const Se=mt.renderTemplate(We);mt.renderElement(Dt,te.startIndex,Se,te.height);const we=(0,R.s)(()=>{dt.dispose(),mt.disposeElement(Dt,te.startIndex,Se,te.height),mt.disposeTemplate(Se),We.remove()});return{element:We,disposable:we}}setAccessibilityAttributes(te,oe,Te,Ve){if(!this.accessibilityProvider)return R.jG.None;this.accessibilityProvider.getSetSize&&te.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(oe,Te,Ve))),this.accessibilityProvider.getPosInSet&&te.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(oe,Te))),this.accessibilityProvider.getRole&&te.setAttribute("role",this.accessibilityProvider.getRole(oe)??"treeitem");const We=this.accessibilityProvider.getAriaLabel(oe),dt=We&&typeof We!="string"?We:(0,q.lk)(We),Ye=(0,q.fm)(Dt=>{const Se=Dt.readObservable(dt);Se?te.setAttribute("aria-label",Se):te.removeAttribute("aria-label")});typeof We=="string"||We&&te.setAttribute("aria-label",We.get());const mt=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(oe);return typeof mt=="number"&&te.setAttribute("aria-level",`${mt}`),te.setAttribute("aria-selected",String(!1)),Ye}setVisible(te){this._rootDomNode.classList.toggle("empty",!te),te||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}class Ze extends R.jG{get domHasFocus(){return this._domHasFocus}set domHasFocus(te){te!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(te),this._domHasFocus=te)}constructor(te,oe){super(),this.container=te,this.view=oe,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new E.vl,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new E.vl,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register((0,u.ko)(this.container,"focus",()=>this.onFocus())),this._register((0,u.ko)(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(Te=>this.onKeyDown(Te))),this._register(this.view.onMouseDown(Te=>this.onMouseDown(Te))),this._register(this.view.onContextMenu(Te=>this.handleContextMenu(Te)))}handleContextMenu(te){const oe=te.browserEvent.target;if(!(0,A.Es)(oe)&&!(0,A.xu)(oe)){this.focusedLast()&&this.view.domFocus();return}if(!(0,u.kx)(te.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const dt=this.state.stickyNodes.findIndex(Ye=>Ye.node.element===te.element?.element);if(dt===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(dt);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const Ve=this.state.stickyNodes[this.focusedIndex].node.element,We=this.elements[this.focusedIndex];this._onContextMenu.fire({element:Ve,anchor:We,browserEvent:te.browserEvent,isStickyScroll:!0})}onKeyDown(te){if(this.domHasFocus&&this.state){if(te.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),te.preventDefault(),te.stopPropagation();else if(te.key==="ArrowDown"||te.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const oe=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([oe]),this.scrollNodeUnderWidget(oe,this.state)}else this.setFocusedElement(this.focusedIndex+1);te.preventDefault(),te.stopPropagation()}}}onMouseDown(te){const oe=te.browserEvent.target;!(0,A.Es)(oe)&&!(0,A.xu)(oe)||(te.browserEvent.preventDefault(),te.browserEvent.stopPropagation())}updateElements(te,oe){if(oe&&oe.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(oe&&oe.count!==te.length)throw new Error("Sticky scroll focus received illigel state");const Te=this.focusedIndex;if(this.removeFocus(),this.elements=te,this.state=oe,oe){const Ve=(0,z.qE)(Te,0,oe.count-1);this.setFocus(Ve)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=oe?0:-1}setFocusedElement(te){const oe=this.state;if(!oe)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(te),!(te<oe.count-1)&&oe.lastNodePartiallyVisible()){const Te=oe.stickyNodes[te];this.scrollNodeUnderWidget(Te.endIndex+1,oe)}}scrollNodeUnderWidget(te,oe){const Te=oe.stickyNodes[oe.count-1],Ve=oe.count>1?oe.stickyNodes[oe.count-2]:void 0,We=this.view.getElementTop(te),dt=Ve?Ve.position+Ve.height+Te.height:Te.height;this.view.scrollTop=We-dt}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(te){if(0>te)throw new Error("addFocus() can not remove focus");if(!this.state&&te>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&te>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const oe=this.focusedIndex;oe>=0&&this.toggleElementFocus(this.elements[oe],!1),te>=0&&this.toggleElementFocus(this.elements[te],!0),this.focusedIndex=te}toggleElementFocus(te,oe){this.toggleElementActiveFocus(te,oe&&this.domHasFocus),this.toggleElementPassiveFocus(te,oe)}toggleCurrentElementActiveFocus(te){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],te)}toggleElementActiveFocus(te,oe){te.classList.toggle("focused",oe)}toggleElementPassiveFocus(te,oe){te.classList.toggle("passive-focused",oe)}toggleStickyScrollFocused(te){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",te)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function _t(pe){let te=C.Lx.Unknown;return(0,u.XD)(pe.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?te=C.Lx.Twistie:(0,u.XD)(pe.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?te=C.Lx.Element:(0,u.XD)(pe.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(te=C.Lx.Filter),{browserEvent:pe.browserEvent,element:pe.element?pe.element.element:null,target:te}}function ot(pe){const te=(0,A.Es)(pe.browserEvent.target);return{element:pe.element?pe.element.element:null,browserEvent:pe.browserEvent,anchor:pe.anchor,isStickyScroll:te}}function Pt(pe,te){te(pe),pe.children.forEach(oe=>Pt(oe,te))}class Wt{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(te,oe){this.getFirstViewElementWithTrait=te,this.identityProvider=oe,this.nodes=[],this._onDidChange=new E.vl,this.onDidChange=this._onDidChange.event}set(te,oe){!oe?.__forceEvent&&(0,_.aI)(this.nodes,te)||this._set(te,!1,oe)}_set(te,oe,Te){if(this.nodes=[...te],this.elements=void 0,this._nodeSet=void 0,!oe){const Ve=this;this._onDidChange.fire({get elements(){return Ve.get()},browserEvent:Te})}}get(){return this.elements||(this.elements=this.nodes.map(te=>te.element)),[...this.elements]}getNodes(){return this.nodes}has(te){return this.nodeSet.has(te)}onDidModelSplice({insertedNodes:te,deletedNodes:oe}){if(!this.identityProvider){const mt=this.createNodeSet(),Dt=Se=>mt.delete(Se);oe.forEach(Se=>Pt(Se,Dt)),this.set([...mt.values()]);return}const Te=new Set,Ve=mt=>Te.add(this.identityProvider.getId(mt.element).toString());oe.forEach(mt=>Pt(mt,Ve));const We=new Map,dt=mt=>We.set(this.identityProvider.getId(mt.element).toString(),mt);te.forEach(mt=>Pt(mt,dt));const Ye=[];for(const mt of this.nodes){const Dt=this.identityProvider.getId(mt.element).toString();if(!Te.has(Dt))Ye.push(mt);else{const we=We.get(Dt);we&&we.visible&&Ye.push(we)}}if(this.nodes.length>0&&Ye.length===0){const mt=this.getFirstViewElementWithTrait();mt&&Ye.push(mt)}this._set(Ye,!0)}createNodeSet(){const te=new Set;for(const oe of this.nodes)te.add(oe);return te}}class Rt extends A.MH{constructor(te,oe,Te){super(te),this.tree=oe,this.stickyScrollProvider=Te}onViewPointer(te){if((0,A.Bm)(te.browserEvent.target)||(0,A.B6)(te.browserEvent.target)||(0,A.bm)(te.browserEvent.target)||te.browserEvent.isHandledByList)return;const oe=te.element;if(!oe)return super.onViewPointer(te);if(this.isSelectionRangeChangeEvent(te)||this.isSelectionSingleChangeEvent(te))return super.onViewPointer(te);const Te=te.browserEvent.target,Ve=Te.classList.contains("monaco-tl-twistie")||Te.classList.contains("monaco-icon-label")&&Te.classList.contains("folder-icon")&&te.browserEvent.offsetX<16,We=(0,A.xu)(te.browserEvent.target);let dt=!1;if(We?dt=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?dt=this.tree.expandOnlyOnTwistieClick(oe.element):dt=!!this.tree.expandOnlyOnTwistieClick,We)this.handleStickyScrollMouseEvent(te,oe);else{if(dt&&!Ve&&te.browserEvent.detail!==2)return super.onViewPointer(te);if(!this.tree.expandOnDoubleClick&&te.browserEvent.detail===2)return super.onViewPointer(te)}if(oe.collapsible&&(!We||Ve)){const Ye=this.tree.getNodeLocation(oe),mt=te.browserEvent.altKey;if(this.tree.setFocus([Ye]),this.tree.toggleCollapsed(Ye,mt),Ve){te.browserEvent.isHandledByList=!0;return}}We||super.onViewPointer(te)}handleStickyScrollMouseEvent(te,oe){if((0,A.b$)(te.browserEvent.target)||(0,A.W0)(te.browserEvent.target))return;const Te=this.stickyScrollProvider();if(!Te)throw new Error("Sticky scroll controller not found");const Ve=this.list.indexOf(oe),We=this.list.getElementTop(Ve),dt=Te.nodePositionTopBelowWidget(oe);this.tree.scrollTop=We-dt,this.list.domFocus(),this.list.setFocus([Ve]),this.list.setSelection([Ve])}onDoubleClick(te){te.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||te.browserEvent.isHandledByList||super.onDoubleClick(te)}onMouseDown(te){const oe=te.browserEvent.target;if(!(0,A.Es)(oe)&&!(0,A.xu)(oe)){super.onMouseDown(te);return}}onContextMenu(te){const oe=te.browserEvent.target;if(!(0,A.Es)(oe)&&!(0,A.xu)(oe)){super.onContextMenu(te);return}}}class at extends A.B8{constructor(te,oe,Te,Ve,We,dt,Ye,mt){super(te,oe,Te,Ve,mt),this.focusTrait=We,this.selectionTrait=dt,this.anchorTrait=Ye}createMouseController(te){return new Rt(this,te.tree,te.stickyScrollProvider)}splice(te,oe,Te=[]){if(super.splice(te,oe,Te),Te.length===0)return;const Ve=[],We=[];let dt;Te.forEach((Ye,mt)=>{this.focusTrait.has(Ye)&&Ve.push(te+mt),this.selectionTrait.has(Ye)&&We.push(te+mt),this.anchorTrait.has(Ye)&&(dt=te+mt)}),Ve.length>0&&super.setFocus((0,_.dM)([...super.getFocus(),...Ve])),We.length>0&&super.setSelection((0,_.dM)([...super.getSelection(),...We])),typeof dt=="number"&&super.setAnchor(dt)}setFocus(te,oe,Te=!1){super.setFocus(te,oe),Te||this.focusTrait.set(te.map(Ve=>this.element(Ve)),oe)}setSelection(te,oe,Te=!1){super.setSelection(te,oe),Te||this.selectionTrait.set(te.map(Ve=>this.element(Ve)),oe)}setAnchor(te,oe=!1){super.setAnchor(te),oe||(typeof te>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(te)]))}}class Xe{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return E.Jh.filter(E.Jh.map(this.view.onMouseDblClick,_t),te=>te.target!==C.Lx.Filter)}get onMouseOver(){return E.Jh.map(this.view.onMouseOver,_t)}get onMouseOut(){return E.Jh.map(this.view.onMouseOut,_t)}get onContextMenu(){return E.Jh.any(E.Jh.filter(E.Jh.map(this.view.onContextMenu,ot),te=>!te.isStickyScroll),this.stickyScrollController?.onContextMenu??E.Jh.None)}get onPointer(){return E.Jh.map(this.view.onPointer,_t)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return E.Jh.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){return this.findController?.mode??Y.Highlight}set findMode(te){this.findController&&(this.findController.mode=te)}get findMatchType(){return this.findController?.matchType??ae.Fuzzy}set findMatchType(te){this.findController&&(this.findController.matchType=te)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(te,oe,Te,Ve,We={}){this._user=te,this._options=We,this.eventBufferer=new E.at,this.onDidChangeFindOpenState=E.Jh.None,this.onDidChangeStickyScrollFocused=E.Jh.None,this.disposables=new R.Cm,this._onWillRefilter=new E.vl,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new E.vl,this.treeDelegate=new K(Te);const dt=new E.Wj,Ye=new E.Wj,mt=this.disposables.add(new N(Ye.event)),Dt=new D.db;this.renderers=Ve.map(ke=>new j(ke,()=>this.model,dt.event,mt,Dt,We));for(const ke of this.renderers)this.disposables.add(ke);let Se;We.keyboardNavigationLabelProvider&&(Se=new me(this,We.keyboardNavigationLabelProvider,We.filter),We={...We,filter:Se},this.disposables.add(Se)),this.focus=new Wt(()=>this.view.getFocusedElements()[0],We.identityProvider),this.selection=new Wt(()=>this.view.getSelectedElements()[0],We.identityProvider),this.anchor=new Wt(()=>this.view.getAnchorElement(),We.identityProvider),this.view=new at(te,oe,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...re(()=>this.model,We),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(te,this.view,We),dt.input=this.model.onDidChangeCollapseState;const we=E.Jh.forEach(this.model.onDidSplice,ke=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(ke),this.selection.onDidModelSplice(ke)})},this.disposables);we(()=>null,null,this.disposables);const Xt=this.disposables.add(new E.vl),ri=this.disposables.add(new d.ve(0));if(this.disposables.add(E.Jh.any(we,this.focus.onDidChange,this.selection.onDidChange)(()=>{ri.trigger(()=>{const ke=new Set;for(const Z of this.focus.getNodes())ke.add(Z);for(const Z of this.selection.getNodes())ke.add(Z);Xt.fire([...ke.values()])})})),Ye.input=Xt.event,We.keyboardSupport!==!1){const ke=E.Jh.chain(this.view.onKeyDown,Z=>Z.filter(Fe=>!(0,A.B6)(Fe.target)).map(Fe=>new U.Z(Fe)));E.Jh.chain(ke,Z=>Z.filter(Fe=>Fe.keyCode===15))(this.onLeftArrow,this,this.disposables),E.Jh.chain(ke,Z=>Z.filter(Fe=>Fe.keyCode===17))(this.onRightArrow,this,this.disposables),E.Jh.chain(ke,Z=>Z.filter(Fe=>Fe.keyCode===10))(this.onSpace,this,this.disposables)}if((We.findWidgetEnabled??!0)&&We.keyboardNavigationLabelProvider&&We.contextViewProvider){const ke=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new Pe(this,this.model,this.view,Se,We.contextViewProvider,ke),this.focusNavigationFilter=Z=>this.findController.shouldAllowFocus(Z),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=E.Jh.None,this.onDidChangeFindMatchType=E.Jh.None;We.enableStickyScroll&&(this.stickyScrollController=new x(this,this.model,this.view,this.renderers,this.treeDelegate,We),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=(0,u.li)(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===F.Always)}updateOptions(te={}){this._options={...this._options,...te};for(const oe of this.renderers)oe.updateOptions(te);this.view.updateOptions(this._options),this.findController?.updateOptions(te),this.updateStickyScroll(te),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===F.Always)}get options(){return this._options}updateStickyScroll(te){!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new x(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=E.Jh.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),this.stickyScrollController?.updateOptions(te)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(te){this.view.scrollTop=te}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(te){this.view.ariaLabel=te}domFocus(){this.stickyScrollController?.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(te,oe){this.view.layout(te,oe),(0,W.Et)(oe)&&this.findController?.layout(oe)}style(te){const oe=`.${this.view.domId}`,Te=[];te.treeIndentGuidesStroke&&(Te.push(`.monaco-list${oe}:hover .monaco-tl-indent > .indent-guide, .monaco-list${oe}.always .monaco-tl-indent > .indent-guide  { border-color: ${te.treeInactiveIndentGuidesStroke}; }`),Te.push(`.monaco-list${oe} .monaco-tl-indent > .indent-guide.active { border-color: ${te.treeIndentGuidesStroke}; }`));const Ve=te.treeStickyScrollBackground??te.listBackground;Ve&&(Te.push(`.monaco-list${oe} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${Ve}; }`),Te.push(`.monaco-list${oe} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${Ve}; }`)),te.treeStickyScrollBorder&&Te.push(`.monaco-list${oe} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${te.treeStickyScrollBorder}; }`),te.treeStickyScrollShadow&&Te.push(`.monaco-list${oe} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${te.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),te.listFocusForeground&&(Te.push(`.monaco-list${oe}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${te.listFocusForeground}; }`),Te.push(`.monaco-list${oe}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const We=(0,u.gI)(te.listFocusAndSelectionOutline,(0,u.gI)(te.listSelectionOutline,te.listFocusOutline??""));We&&(Te.push(`.monaco-list${oe}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${We}; outline-offset: -1px;}`),Te.push(`.monaco-list${oe}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),te.listFocusOutline&&(Te.push(`.monaco-list${oe}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${te.listFocusOutline}; outline-offset: -1px; }`),Te.push(`.monaco-list${oe}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),Te.push(`.monaco-workbench.context-menu-visible .monaco-list${oe}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${te.listFocusOutline}; outline-offset: -1px; }`),Te.push(`.monaco-workbench.context-menu-visible .monaco-list${oe}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),Te.push(`.monaco-workbench.context-menu-visible .monaco-list${oe}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=Te.join(`
`),this.view.style(te)}getParentElement(te){const oe=this.model.getParentNodeLocation(te);return this.model.getNode(oe).element}getFirstElementChild(te){return this.model.getFirstElementChild(te)}getNode(te){return this.model.getNode(te)}getNodeLocation(te){return this.model.getNodeLocation(te)}collapse(te,oe=!1){return this.model.setCollapsed(te,!0,oe)}expand(te,oe=!1){return this.model.setCollapsed(te,!1,oe)}toggleCollapsed(te,oe=!1){return this.model.setCollapsed(te,void 0,oe)}isCollapsible(te){return this.model.isCollapsible(te)}setCollapsible(te,oe){return this.model.setCollapsible(te,oe)}isCollapsed(te){return this.model.isCollapsed(te)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(te,oe){this.eventBufferer.bufferEvents(()=>{const Te=te.map(We=>this.model.getNode(We));this.selection.set(Te,oe);const Ve=te.map(We=>this.model.getListIndex(We)).filter(We=>We>-1);this.view.setSelection(Ve,oe,!0)})}getSelection(){return this.selection.get()}setFocus(te,oe){this.eventBufferer.bufferEvents(()=>{const Te=te.map(We=>this.model.getNode(We));this.focus.set(Te,oe);const Ve=te.map(We=>this.model.getListIndex(We)).filter(We=>We>-1);this.view.setFocus(Ve,oe,!0)})}focusNext(te=1,oe=!1,Te,Ve=(0,u.kx)(Te)&&Te.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(te,oe,Te,Ve)}focusPrevious(te=1,oe=!1,Te,Ve=(0,u.kx)(Te)&&Te.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(te,oe,Te,Ve)}focusNextPage(te,oe=(0,u.kx)(te)&&te.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(te,oe)}focusPreviousPage(te,oe=(0,u.kx)(te)&&te.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(te,oe,()=>this.stickyScrollController?.height??0)}focusLast(te,oe=(0,u.kx)(te)&&te.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(te,oe)}focusFirst(te,oe=(0,u.kx)(te)&&te.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(te,oe)}getFocus(){return this.focus.get()}reveal(te,oe){this.model.expandTo(te);const Te=this.model.getListIndex(te);if(Te!==-1)if(!this.stickyScrollController)this.view.reveal(Te,oe);else{const Ve=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(te));this.view.reveal(Te,oe,Ve)}}onLeftArrow(te){te.preventDefault(),te.stopPropagation();const oe=this.view.getFocusedElements();if(oe.length===0)return;const Te=oe[0],Ve=this.model.getNodeLocation(Te);if(!this.model.setCollapsed(Ve,!0)){const dt=this.model.getParentNodeLocation(Ve);if(!dt)return;const Ye=this.model.getListIndex(dt);this.view.reveal(Ye),this.view.setFocus([Ye])}}onRightArrow(te){te.preventDefault(),te.stopPropagation();const oe=this.view.getFocusedElements();if(oe.length===0)return;const Te=oe[0],Ve=this.model.getNodeLocation(Te);if(!this.model.setCollapsed(Ve,!1)){if(!Te.children.some(mt=>mt.visible))return;const[dt]=this.view.getFocus(),Ye=dt+1;this.view.reveal(Ye),this.view.setFocus([Ye])}}onSpace(te){te.preventDefault(),te.stopPropagation();const oe=this.view.getFocusedElements();if(oe.length===0)return;const Te=oe[0],Ve=this.model.getNodeLocation(Te),We=te.browserEvent.altKey;this.model.setCollapsed(Ve,void 0,We)}dispose(){(0,R.AS)(this.disposables),this.stickyScrollController?.dispose(),this.view.dispose()}}},36295:(Mt,He,c)=>{c.d(He,{T:()=>_});var u=c(31938),G=c(92327),U=c(56491),P=c(60599),M=c(36612);class w{constructor(m,S){this.chr=m,this.type=S,this.width=0}fulfill(m){this.width=m}}class O{constructor(m,S){this._bareFontInfo=m,this._requests=S,this._container=null,this._testElements=null}read(m){this._createDomElements(),m.document.body.appendChild(this._container),this._readFromDomElements(),this._container?.remove(),this._container=null,this._testElements=null}_createDomElements(){const m=document.createElement("div");m.style.position="absolute",m.style.top="-50000px",m.style.width="50000px";const S=document.createElement("div");(0,M.M)(S,this._bareFontInfo),m.appendChild(S);const D=document.createElement("div");(0,M.M)(D,this._bareFontInfo),D.style.fontWeight="bold",m.appendChild(D);const E=document.createElement("div");(0,M.M)(E,this._bareFontInfo),E.style.fontStyle="italic",m.appendChild(E);const B=[];for(const R of this._requests){let z;R.type===0&&(z=S),R.type===2&&(z=D),R.type===1&&(z=E),z.appendChild(document.createElement("br"));const W=document.createElement("span");O._render(W,R),z.appendChild(W),B.push(W)}this._container=m,this._testElements=B}static _render(m,S){if(S.chr===" "){let D="\xA0";for(let E=0;E<8;E++)D+=D;m.innerText=D}else{let D=S.chr;for(let E=0;E<8;E++)D+=D;m.textContent=D}}_readFromDomElements(){for(let m=0,S=this._requests.length;m<S;m++){const D=this._requests[m],E=this._testElements[m];D.fulfill(E.offsetWidth/256)}}}function A(d,m,S){new O(m,S).read(d)}var I=c(8775),b=c(68869);class C extends P.jG{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new U.vl),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(m){const S=(0,u.Q2)(m);let D=this._cache.get(S);return D||(D=new v,this._cache.set(S,D)),D}_writeToCache(m,S,D){this._ensureCache(m).put(S,D),!D.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=m.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(m)},5e3))}_evictUntrustedReadings(m){const S=this._ensureCache(m),D=S.getValues();let E=!1;for(const B of D)B.isTrusted||(E=!0,S.remove(B));E&&this._onDidChange.fire()}readFontInfo(m,S){const D=this._ensureCache(m);if(!D.has(S)){let E=this._actualReadFontInfo(m,S);(E.typicalHalfwidthCharacterWidth<=2||E.typicalFullwidthCharacterWidth<=2||E.spaceWidth<=2||E.maxDigitWidth<=2)&&(E=new b.YJ({pixelRatio:G.c.getInstance(m).value,fontFamily:E.fontFamily,fontWeight:E.fontWeight,fontSize:E.fontSize,fontFeatureSettings:E.fontFeatureSettings,fontVariationSettings:E.fontVariationSettings,lineHeight:E.lineHeight,letterSpacing:E.letterSpacing,isMonospace:E.isMonospace,typicalHalfwidthCharacterWidth:Math.max(E.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(E.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:E.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(E.spaceWidth,5),middotWidth:Math.max(E.middotWidth,5),wsmiddotWidth:Math.max(E.wsmiddotWidth,5),maxDigitWidth:Math.max(E.maxDigitWidth,5)},!1)),this._writeToCache(m,S,E)}return D.get(S)}_createRequest(m,S,D,E){const B=new w(m,S);return D.push(B),E?.push(B),B}_actualReadFontInfo(m,S){const D=[],E=[],B=this._createRequest("n",0,D,E),R=this._createRequest("\uFF4D",0,D,null),z=this._createRequest(" ",0,D,E),W=this._createRequest("0",0,D,E),$=this._createRequest("1",0,D,E),Q=this._createRequest("2",0,D,E),q=this._createRequest("3",0,D,E),ne=this._createRequest("4",0,D,E),ve=this._createRequest("5",0,D,E),Re=this._createRequest("6",0,D,E),Ae=this._createRequest("7",0,D,E),re=this._createRequest("8",0,D,E),K=this._createRequest("9",0,D,E),F=this._createRequest("\u2192",0,D,E),N=this._createRequest("\uFFEB",0,D,null),j=this._createRequest("\xB7",0,D,E),me=this._createRequest("\u2E31",0,D,null),ce="|/-_ilm%";for(let Ce=0,Pe=ce.length;Ce<Pe;Ce++)this._createRequest(ce.charAt(Ce),0,D,E),this._createRequest(ce.charAt(Ce),1,D,E),this._createRequest(ce.charAt(Ce),2,D,E);A(m,S,D);const he=Math.max(W.width,$.width,Q.width,q.width,ne.width,ve.width,Re.width,Ae.width,re.width,K.width);let Le=S.fontFeatureSettings===I.Bc.OFF;const Y=E[0].width;for(let Ce=1,Pe=E.length;Le&&Ce<Pe;Ce++){const ye=Y-E[Ce].width;if(ye<-.001||ye>.001){Le=!1;break}}let ae=!0;return Le&&N.width!==Y&&(ae=!1),N.width>F.width&&(ae=!1),new b.YJ({pixelRatio:G.c.getInstance(m).value,fontFamily:S.fontFamily,fontWeight:S.fontWeight,fontSize:S.fontSize,fontFeatureSettings:S.fontFeatureSettings,fontVariationSettings:S.fontVariationSettings,lineHeight:S.lineHeight,letterSpacing:S.letterSpacing,isMonospace:Le,typicalHalfwidthCharacterWidth:B.width,typicalFullwidthCharacterWidth:R.width,canUseHalfwidthRightwardsArrow:ae,spaceWidth:z.width,middotWidth:j.width,wsmiddotWidth:me.width,maxDigitWidth:he},!0)}}class v{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(m){const S=m.getId();return!!this._values[S]}get(m){const S=m.getId();return this._values[S]}put(m,S){const D=m.getId();this._keys[D]=m,this._values[D]=S}remove(m){const S=m.getId();delete this._keys[S],delete this._values[S]}getValues(){return Object.keys(this._keys).map(m=>this._values[m])}}const _=new C},36389:(Mt,He,c)=>{c.d(He,{GN:()=>w,UB:()=>M,a6:()=>O,wc:()=>A});var u=c(69504),G=c(98414),U=c(42577),P=c(8775);class M{constructor(C,v,_,d,m){this.editorId=C,this.model=v,this.configuration=_,this._linesCollection=d,this._coordinatesConverter=m,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(C){const v=C.id;let _=this._decorationsCache[v];if(!_){const d=C.range,m=C.options;let S;if(m.isWholeLine){const D=this._coordinatesConverter.convertModelPositionToViewPosition(new u.y(d.startLineNumber,1),0,!1,!0),E=this._coordinatesConverter.convertModelPositionToViewPosition(new u.y(d.endLineNumber,this.model.getLineMaxColumn(d.endLineNumber)),1);S=new G.Q(D.lineNumber,D.column,E.lineNumber,E.column)}else S=this._coordinatesConverter.convertModelRangeToViewRange(d,1);_=new U.vo(S,m),this._decorationsCache[v]=_}return _}getMinimapDecorationsInRange(C){return this._getDecorationsInRange(C,!0,!1).decorations}getDecorationsViewportData(C){let v=this._cachedModelDecorationsResolver!==null;return v=v&&C.equalsRange(this._cachedModelDecorationsResolverViewRange),v||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(C,!1,!1),this._cachedModelDecorationsResolverViewRange=C),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(C,v=!1,_=!1){const d=new G.Q(C,this._linesCollection.getViewLineMinColumn(C),C,this._linesCollection.getViewLineMaxColumn(C));return this._getDecorationsInRange(d,v,_).inlineDecorations[0]}_getDecorationsInRange(C,v,_){const d=this._linesCollection.getDecorationsInRange(C,this.editorId,(0,P.$C)(this.configuration.options),v,_),m=C.startLineNumber,S=C.endLineNumber,D=[];let E=0;const B=[];for(let R=m;R<=S;R++)B[R-m]=[];for(let R=0,z=d.length;R<z;R++){const W=d[R],$=W.options;if(!w(this.model,W))continue;const Q=this._getOrCreateViewModelDecoration(W),q=Q.range;if(D[E++]=Q,$.inlineClassName){const ne=new U.kI(q,$.inlineClassName,$.inlineClassNameAffectsLetterSpacing?3:0),ve=Math.max(m,q.startLineNumber),Re=Math.min(S,q.endLineNumber);for(let Ae=ve;Ae<=Re;Ae++)B[Ae-m].push(ne)}if($.beforeContentClassName&&m<=q.startLineNumber&&q.startLineNumber<=S){const ne=new U.kI(new G.Q(q.startLineNumber,q.startColumn,q.startLineNumber,q.startColumn),$.beforeContentClassName,1);B[q.startLineNumber-m].push(ne)}if($.afterContentClassName&&m<=q.endLineNumber&&q.endLineNumber<=S){const ne=new U.kI(new G.Q(q.endLineNumber,q.endColumn,q.endLineNumber,q.endColumn),$.afterContentClassName,2);B[q.endLineNumber-m].push(ne)}}return{decorations:D,inlineDecorations:B}}}function w(b,C){return!(C.options.hideInCommentTokens&&O(b,C)||C.options.hideInStringTokens&&A(b,C))}function O(b,C){return I(b,C.range,v=>v===1)}function A(b,C){return I(b,C.range,v=>v===2)}function I(b,C,v){for(let _=C.startLineNumber;_<=C.endLineNumber;_++){const d=b.tokenization.getLineTokens(_),m=_===C.startLineNumber,S=_===C.endLineNumber;let D=m?d.findTokenIndexAtOffset(C.startColumn-1):0;for(;D<d.getCount()&&!(S&&d.getStartOffset(D)>C.endColumn-1);){if(!v(d.getStandardTokenType(D)))return!1;D++}}return!0}},36470:(Mt,He,c)=>{c.d(He,{C1:()=>P,Fp:()=>M,GK:()=>I,Ym:()=>G,dH:()=>w,kF:()=>U});var u=c(81545);const G={ctrlCmd:!1,alt:!1};var U;(function(b){b[b.Blur=1]="Blur",b[b.Gesture=2]="Gesture",b[b.Other=3]="Other"})(U||(U={}));var P;(function(b){b[b.NONE=0]="NONE",b[b.FIRST=1]="FIRST",b[b.SECOND=2]="SECOND",b[b.LAST=3]="LAST"})(P||(P={}));var M;(function(b){b[b.First=1]="First",b[b.Second=2]="Second",b[b.Last=3]="Last",b[b.Next=4]="Next",b[b.Previous=5]="Previous",b[b.NextPage=6]="NextPage",b[b.PreviousPage=7]="PreviousPage",b[b.NextSeparator=8]="NextSeparator",b[b.PreviousSeparator=9]="PreviousSeparator"})(M||(M={}));var w;(function(b){b[b.Title=1]="Title",b[b.Inline=2]="Inline"})(w||(w={}));class O{constructor(C){this.options=C}}const A=new O,I=(0,u.u1)("quickInputService")},36612:(Mt,He,c)=>{c.d(He,{M:()=>G});var u=c(53784);function G(U,P){U instanceof u.D?(U.setFontFamily(P.getMassagedFontFamily()),U.setFontWeight(P.fontWeight),U.setFontSize(P.fontSize),U.setFontFeatureSettings(P.fontFeatureSettings),U.setFontVariationSettings(P.fontVariationSettings),U.setLineHeight(P.lineHeight),U.setLetterSpacing(P.letterSpacing)):(U.style.fontFamily=P.getMassagedFontFamily(),U.style.fontWeight=P.fontWeight,U.style.fontSize=P.fontSize+"px",U.style.fontFeatureSettings=P.fontFeatureSettings,U.style.fontVariationSettings=P.fontVariationSettings,U.style.lineHeight=P.lineHeight+"px",U.style.letterSpacing=P.letterSpacing+"px")}},37076:(Mt,He,c)=>{c.d(He,{Y:()=>O,fm:()=>M,ht:()=>A,yC:()=>I,zL:()=>w});var u=c(6105),G=c(60599),U=c(3960),P=c(10137);function M(C){return new b(new U.nA(void 0,void 0,C),C,void 0,void 0)}function w(C,v){return new b(new U.nA(C.owner,C.debugName,C.debugReferenceFn??v),v,void 0,void 0)}function O(C,v){return new b(new U.nA(C.owner,C.debugName,C.debugReferenceFn??v),v,C.createEmptyChangeSummary,C.handleChange)}function A(C,v){const _=new G.Cm,d=O({owner:C.owner,debugName:C.debugName,debugReferenceFn:C.debugReferenceFn??v,createEmptyChangeSummary:C.createEmptyChangeSummary,handleChange:C.handleChange},(m,S)=>{_.clear(),v(m,S,_)});return(0,G.s)(()=>{d.dispose(),_.dispose()})}function I(C){const v=new G.Cm,_=w({owner:void 0,debugName:void 0,debugReferenceFn:C},d=>{v.clear(),C(d,v)});return(0,G.s)(()=>{_.dispose(),v.dispose()})}class b{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(v,_,d,m){this._debugNameData=v,this._runFn=_,this.createChangeSummary=d,this._handleChange=m,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=this.createChangeSummary?.(),(0,P.tZ)()?.handleAutorunCreated(this),this._runIfNeeded(),(0,G.Ay)(this)}dispose(){this.disposed=!0;for(const v of this.dependencies)v.removeObserver(this);this.dependencies.clear(),(0,G.VD)(this)}_runIfNeeded(){if(this.state===3)return;const v=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=v,this.state=3;const _=this.disposed;try{if(!_){(0,P.tZ)()?.handleAutorunTriggered(this);const d=this.changeSummary;this.changeSummary=this.createChangeSummary?.(),this._runFn(this,d)}}finally{_||(0,P.tZ)()?.handleAutorunFinished(this);for(const d of this.dependenciesToBeRemoved)d.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const v of this.dependencies)if(v.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,(0,u.Ft)(()=>this.updateCount>=0)}handlePossibleChange(v){this.state===3&&this.dependencies.has(v)&&!this.dependenciesToBeRemoved.has(v)&&(this.state=1)}handleChange(v,_){this.dependencies.has(v)&&!this.dependenciesToBeRemoved.has(v)&&(!this._handleChange||this._handleChange({changedObservable:v,change:_,didChange:m=>m===v},this.changeSummary))&&(this.state=2)}readObservable(v){if(this.disposed)return v.get();v.addObserver(this);const _=v.get();return this.dependencies.add(v),this.dependenciesToBeRemoved.delete(v),_}}(function(C){C.Observer=b})(M||(M={}))},37100:(Mt,He,c)=>{c.d(He,{T:()=>G});var u=c(81545);const G=(0,u.u1)("codeEditorService")},37145:(Mt,He,c)=>{c.d(He,{d:()=>u});class u{constructor(U){this.executor=U,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(U){this._error=U}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}},37473:(Mt,He,c)=>{c.d(He,{I:()=>E,r:()=>v});var u=c(8264),G=c(90692);const U=/^\w[\w\d+.-]*$/,P=/^\//,M=/^\/\//;function w($,Q){if(!$.scheme&&Q)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${$.authority}", path: "${$.path}", query: "${$.query}", fragment: "${$.fragment}"}`);if($.scheme&&!U.test($.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if($.path){if($.authority){if(!P.test($.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(M.test($.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function O($,Q){return!$&&!Q?"file":$}function A($,Q){switch($){case"https":case"http":case"file":Q?Q[0]!==b&&(Q=b+Q):Q=b;break}return Q}const I="",b="/",C=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class v{static isUri(Q){return Q instanceof v?!0:Q?typeof Q.authority=="string"&&typeof Q.fragment=="string"&&typeof Q.path=="string"&&typeof Q.query=="string"&&typeof Q.scheme=="string"&&typeof Q.fsPath=="string"&&typeof Q.with=="function"&&typeof Q.toString=="function":!1}constructor(Q,q,ne,ve,Re,Ae=!1){typeof Q=="object"?(this.scheme=Q.scheme||I,this.authority=Q.authority||I,this.path=Q.path||I,this.query=Q.query||I,this.fragment=Q.fragment||I):(this.scheme=O(Q,Ae),this.authority=q||I,this.path=A(this.scheme,ne||I),this.query=ve||I,this.fragment=Re||I,w(this,Ae))}get fsPath(){return E(this,!1)}with(Q){if(!Q)return this;let{scheme:q,authority:ne,path:ve,query:Re,fragment:Ae}=Q;return q===void 0?q=this.scheme:q===null&&(q=I),ne===void 0?ne=this.authority:ne===null&&(ne=I),ve===void 0?ve=this.path:ve===null&&(ve=I),Re===void 0?Re=this.query:Re===null&&(Re=I),Ae===void 0?Ae=this.fragment:Ae===null&&(Ae=I),q===this.scheme&&ne===this.authority&&ve===this.path&&Re===this.query&&Ae===this.fragment?this:new d(q,ne,ve,Re,Ae)}static parse(Q,q=!1){const ne=C.exec(Q);return ne?new d(ne[2]||I,W(ne[4]||I),W(ne[5]||I),W(ne[7]||I),W(ne[9]||I),q):new d(I,I,I,I,I)}static file(Q){let q=I;if(G.uF&&(Q=Q.replace(/\\/g,b)),Q[0]===b&&Q[1]===b){const ne=Q.indexOf(b,2);ne===-1?(q=Q.substring(2),Q=b):(q=Q.substring(2,ne),Q=Q.substring(ne)||b)}return new d("file",q,Q,I,I)}static from(Q,q){return new d(Q.scheme,Q.authority,Q.path,Q.query,Q.fragment,q)}static joinPath(Q,...q){if(!Q.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let ne;return G.uF&&Q.scheme==="file"?ne=v.file(u.IN.join(E(Q,!0),...q)).path:ne=u.SA.join(Q.path,...q),Q.with({path:ne})}toString(Q=!1){return B(this,Q)}toJSON(){return this}static revive(Q){if(Q){if(Q instanceof v)return Q;{const q=new d(Q);return q._formatted=Q.external??null,q._fsPath=Q._sep===_?Q.fsPath??null:null,q}}else return Q}}const _=G.uF?1:void 0;class d extends v{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=E(this,!1)),this._fsPath}toString(Q=!1){return Q?B(this,!0):(this._formatted||(this._formatted=B(this,!1)),this._formatted)}toJSON(){const Q={$mid:1};return this._fsPath&&(Q.fsPath=this._fsPath,Q._sep=_),this._formatted&&(Q.external=this._formatted),this.path&&(Q.path=this.path),this.scheme&&(Q.scheme=this.scheme),this.authority&&(Q.authority=this.authority),this.query&&(Q.query=this.query),this.fragment&&(Q.fragment=this.fragment),Q}}const m={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function S($,Q,q){let ne,ve=-1;for(let Re=0;Re<$.length;Re++){const Ae=$.charCodeAt(Re);if(Ae>=97&&Ae<=122||Ae>=65&&Ae<=90||Ae>=48&&Ae<=57||Ae===45||Ae===46||Ae===95||Ae===126||Q&&Ae===47||q&&Ae===91||q&&Ae===93||q&&Ae===58)ve!==-1&&(ne+=encodeURIComponent($.substring(ve,Re)),ve=-1),ne!==void 0&&(ne+=$.charAt(Re));else{ne===void 0&&(ne=$.substr(0,Re));const re=m[Ae];re!==void 0?(ve!==-1&&(ne+=encodeURIComponent($.substring(ve,Re)),ve=-1),ne+=re):ve===-1&&(ve=Re)}}return ve!==-1&&(ne+=encodeURIComponent($.substring(ve))),ne!==void 0?ne:$}function D($){let Q;for(let q=0;q<$.length;q++){const ne=$.charCodeAt(q);ne===35||ne===63?(Q===void 0&&(Q=$.substr(0,q)),Q+=m[ne]):Q!==void 0&&(Q+=$[q])}return Q!==void 0?Q:$}function E($,Q){let q;return $.authority&&$.path.length>1&&$.scheme==="file"?q=`//${$.authority}${$.path}`:$.path.charCodeAt(0)===47&&($.path.charCodeAt(1)>=65&&$.path.charCodeAt(1)<=90||$.path.charCodeAt(1)>=97&&$.path.charCodeAt(1)<=122)&&$.path.charCodeAt(2)===58?Q?q=$.path.substr(1):q=$.path[1].toLowerCase()+$.path.substr(2):q=$.path,G.uF&&(q=q.replace(/\//g,"\\")),q}function B($,Q){const q=Q?D:S;let ne="",{scheme:ve,authority:Re,path:Ae,query:re,fragment:K}=$;if(ve&&(ne+=ve,ne+=":"),(Re||ve==="file")&&(ne+=b,ne+=b),Re){let F=Re.indexOf("@");if(F!==-1){const N=Re.substr(0,F);Re=Re.substr(F+1),F=N.lastIndexOf(":"),F===-1?ne+=q(N,!1,!1):(ne+=q(N.substr(0,F),!1,!1),ne+=":",ne+=q(N.substr(F+1),!1,!0)),ne+="@"}Re=Re.toLowerCase(),F=Re.lastIndexOf(":"),F===-1?ne+=q(Re,!1,!0):(ne+=q(Re.substr(0,F),!1,!0),ne+=Re.substr(F))}if(Ae){if(Ae.length>=3&&Ae.charCodeAt(0)===47&&Ae.charCodeAt(2)===58){const F=Ae.charCodeAt(1);F>=65&&F<=90&&(Ae=`/${String.fromCharCode(F+32)}:${Ae.substr(3)}`)}else if(Ae.length>=2&&Ae.charCodeAt(1)===58){const F=Ae.charCodeAt(0);F>=65&&F<=90&&(Ae=`${String.fromCharCode(F+32)}:${Ae.substr(2)}`)}ne+=q(Ae,!0,!1)}return re&&(ne+="?",ne+=q(re,!1,!1)),K&&(ne+="#",ne+=Q?K:S(K,!1,!1)),ne}function R($){try{return decodeURIComponent($)}catch{return $.length>3?$.substr(0,3)+R($.substr(3)):$}}const z=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function W($){return $.match(z)?$.replace(z,Q=>R(Q)):$}},37486:(Mt,He,c)=>{c.d(He,{KC:()=>M,S3:()=>U,dB:()=>w,nx:()=>G,r:()=>P});var u=c(93009);const G=(A,I)=>A===I;function U(A=G){return(I,b)=>u.aI(I,b,A)}function P(){return(A,I)=>A.equals(I)}function M(A,I,b){if(b!==void 0){const C=A;return C==null||I===void 0||I===null?I===C:b(C,I)}else{const C=A;return(v,_)=>v==null||_===void 0||_===null?_===v:C(v,_)}}function w(A,I){if(A===I)return!0;if(Array.isArray(A)&&Array.isArray(I)){if(A.length!==I.length)return!1;for(let b=0;b<A.length;b++)if(!w(A[b],I[b]))return!1;return!0}if(A&&typeof A=="object"&&I&&typeof I=="object"&&Object.getPrototypeOf(A)===Object.prototype&&Object.getPrototypeOf(I)===Object.prototype){const b=A,C=I,v=Object.keys(b),_=Object.keys(C),d=new Set(_);if(v.length!==_.length)return!1;for(const m of v)if(!d.has(m)||!w(b[m],C[m]))return!1;return!0}return!1}const O=new WeakMap},37519:(Mt,He,c)=>{c.d(He,{$1:()=>D,$6:()=>z,A0:()=>$,AE:()=>ve,EQ:()=>S,F6:()=>Q,HC:()=>ne,PK:()=>I,Qg:()=>O,SS:()=>A,Th:()=>d,Zv:()=>q,b7:()=>W,bI:()=>Ae,pc:()=>E,uC:()=>R,vb:()=>B,ve:()=>_,wR:()=>m});var u=c(46204),G=c(87856),U=c(56491),P=c(60599),M=c(90692),w=c(55946);function O(re){return!!re&&typeof re.then=="function"}function A(re){const K=new u.Qi,F=re(K.token),N=new Promise((j,me)=>{const ce=K.token.onCancellationRequested(()=>{ce.dispose(),me(new G.AL)});Promise.resolve(F).then(he=>{ce.dispose(),K.dispose(),j(he)},he=>{ce.dispose(),K.dispose(),me(he)})});return new class{cancel(){K.cancel(),K.dispose()}then(j,me){return N.then(j,me)}catch(j){return this.then(void 0,j)}finally(j){return N.finally(j)}}}function I(re,K,F){return new Promise((N,j)=>{const me=K.onCancellationRequested(()=>{me.dispose(),N(F)});re.then(N,j).finally(()=>me.dispose())})}class b{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(K){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=K,!this.queuedPromise){const F=()=>{if(this.queuedPromise=null,this.isDisposed)return;const N=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,N};this.queuedPromise=new Promise(N=>{this.activePromise.then(F,F).then(N)})}return new Promise((F,N)=>{this.queuedPromise.then(F,N)})}return this.activePromise=K(),new Promise((F,N)=>{this.activePromise.then(j=>{this.activePromise=null,F(j)},j=>{this.activePromise=null,N(j)})})}dispose(){this.isDisposed=!0}}const C=(re,K)=>{let F=!0;const N=setTimeout(()=>{F=!1,K()},re);return{isTriggered:()=>F,dispose:()=>{clearTimeout(N),F=!1}}},v=re=>{let K=!0;return queueMicrotask(()=>{K&&(K=!1,re())}),{isTriggered:()=>K,dispose:()=>{K=!1}}};class _{constructor(K){this.defaultDelay=K,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(K,F=this.defaultDelay){this.task=K,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((j,me)=>{this.doResolve=j,this.doReject=me}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const j=this.task;return this.task=null,j()}}));const N=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=F===w.h?v(N):C(F,N),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new G.AL),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}class d{constructor(K){this.delayer=new _(K),this.throttler=new b}trigger(K,F){return this.delayer.trigger(()=>this.throttler.queue(K),F)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function m(re,K){return K?new Promise((F,N)=>{const j=setTimeout(()=>{me.dispose(),F()},re),me=K.onCancellationRequested(()=>{clearTimeout(j),me.dispose(),N(new G.AL)})}):A(F=>m(re,F))}function S(re,K=0,F){const N=setTimeout(()=>{re(),F&&j.dispose()},K),j=(0,P.s)(()=>{clearTimeout(N),F?.deleteAndLeak(j)});return F?.add(j),j}function D(re,K=N=>!!N,F=null){let N=0;const j=re.length,me=()=>{if(N>=j)return Promise.resolve(F);const ce=re[N++];return Promise.resolve(ce()).then(Le=>K(Le)?Promise.resolve(Le):me())};return me()}class E{constructor(K,F){this._isDisposed=!1,this._token=-1,typeof K=="function"&&typeof F=="number"&&this.setIfNotSet(K,F)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(K,F){if(this._isDisposed)throw new G.D7("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,K()},F)}setIfNotSet(K,F){if(this._isDisposed)throw new G.D7("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,K()},F))}}class B{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(K,F,N=globalThis){if(this.isDisposed)throw new G.D7("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const j=N.setInterval(()=>{K()},F);this.disposable=(0,P.s)(()=>{N.clearInterval(j),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class R{constructor(K,F){this.timeoutToken=-1,this.runner=K,this.timeout=F,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(K=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,K)}get delay(){return this.timeout}set delay(K){this.timeout=K}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}let z,W;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?W=(re,K)=>{(0,M._p)(()=>{if(F)return;const N=Date.now()+15;K(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,N-Date.now())}}))});let F=!1;return{dispose(){F||(F=!0)}}}:W=(re,K,F)=>{const N=re.requestIdleCallback(K,typeof F=="number"?{timeout:F}:void 0);let j=!1;return{dispose(){j||(j=!0,re.cancelIdleCallback(N))}}},z=re=>W(globalThis,re)})();class ${constructor(K,F){this._didRun=!1,this._executor=()=>{try{this._value=F()}catch(N){this._error=N}finally{this._didRun=!0}},this._handle=W(K,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class Q extends ${constructor(K){super(globalThis,K)}}class q{get isRejected(){return this.outcome?.outcome===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((K,F)=>{this.completeCallback=K,this.errorCallback=F})}complete(K){return new Promise(F=>{this.completeCallback(K),this.outcome={outcome:0,value:K},F()})}error(K){return new Promise(F=>{this.errorCallback(K),this.outcome={outcome:1,value:K},F()})}cancel(){return this.error(new G.AL)}}var ne;(function(re){async function K(N){let j;const me=await Promise.all(N.map(ce=>ce.then(he=>he,he=>{j||(j=he)})));if(typeof j<"u")throw j;return me}re.settled=K;function F(N){return new Promise(async(j,me)=>{try{await N(j,me)}catch(ce){me(ce)}})}re.withAsyncBody=F})(ne||(ne={}));class ve{static fromArray(K){return new ve(F=>{F.emitMany(K)})}static fromPromise(K){return new ve(async F=>{F.emitMany(await K)})}static fromPromises(K){return new ve(async F=>{await Promise.all(K.map(async N=>F.emitOne(await N)))})}static merge(K){return new ve(async F=>{await Promise.all(K.map(async N=>{for await(const j of N)F.emitOne(j)}))})}static{this.EMPTY=ve.fromArray([])}constructor(K,F){this._state=0,this._results=[],this._error=null,this._onReturn=F,this._onStateChanged=new U.vl,queueMicrotask(async()=>{const N={emitOne:j=>this.emitOne(j),emitMany:j=>this.emitMany(j),reject:j=>this.reject(j)};try{await Promise.resolve(K(N)),this.resolve()}catch(j){this.reject(j)}finally{N.emitOne=void 0,N.emitMany=void 0,N.reject=void 0}})}[Symbol.asyncIterator](){let K=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(K<this._results.length)return{done:!1,value:this._results[K++]};if(this._state===1)return{done:!0,value:void 0};await U.Jh.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(K,F){return new ve(async N=>{for await(const j of K)N.emitOne(F(j))})}map(K){return ve.map(this,K)}static filter(K,F){return new ve(async N=>{for await(const j of K)F(j)&&N.emitOne(j)})}filter(K){return ve.filter(this,K)}static coalesce(K){return ve.filter(K,F=>!!F)}coalesce(){return ve.coalesce(this)}static async toPromise(K){const F=[];for await(const N of K)F.push(N);return F}toPromise(){return ve.toPromise(this)}emitOne(K){this._state===0&&(this._results.push(K),this._onStateChanged.fire())}emitMany(K){this._state===0&&(this._results=this._results.concat(K),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(K){this._state===0&&(this._state=2,this._error=K,this._onStateChanged.fire())}}class Re extends ve{constructor(K,F){super(F),this._source=K}cancel(){this._source.cancel()}}function Ae(re){const K=new u.Qi,F=re(K.token);return new Re(K,async N=>{const j=K.token.onCancellationRequested(()=>{j.dispose(),K.dispose(),N.reject(new G.AL)});try{for await(const me of F){if(K.token.isCancellationRequested)return;N.emitOne(me)}j.dispose(),K.dispose()}catch(me){j.dispose(),K.dispose(),N.reject(me)}})}},37852:(Mt,He,c)=>{c.d(He,{Lx:()=>G,Yo:()=>u,jh:()=>U,y2:()=>P});var u;(function(M){M[M.Expanded=0]="Expanded",M[M.Collapsed=1]="Collapsed",M[M.PreserveOrExpanded=2]="PreserveOrExpanded",M[M.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(u||(u={}));var G;(function(M){M[M.Unknown=0]="Unknown",M[M.Twistie=1]="Twistie",M[M.Element=2]="Element",M[M.Filter=3]="Filter"})(G||(G={}));class U extends Error{constructor(w,O){super(`TreeError [${w}] ${O}`)}}class P{constructor(w){this.fn=w,this._map=new WeakMap}map(w){let O=this._map.get(w);return O||(O=this.fn(w),this._map.set(w,O)),O}}},38554:(Mt,He,c)=>{c.d(He,{p:()=>u,t:()=>G});class u{constructor(P,M,w){this.changes=P,this.moves=M,this.hitTimeout=w}}class G{constructor(P,M){this.lineRangeMapping=P,this.changes=M}}},38594:(Mt,He,c)=>{c.d(He,{Dy:()=>U,H8:()=>A,Qu:()=>d,Tc:()=>O,c8:()=>b,gm:()=>w,m0:()=>v,nr:()=>I,pR:()=>P});var u=c(42008);class G{constructor(){this.mapWindowIdToZoomFactor=new Map}static{this.INSTANCE=new G}getZoomFactor(S){return this.mapWindowIdToZoomFactor.get(this.getWindowId(S))??1}getWindowId(S){return S.vscodeWindowId}}function U(m,S,D){typeof S=="string"&&(S=m.matchMedia(S)),S.addEventListener("change",D)}function P(m){return G.INSTANCE.getZoomFactor(m)}const M=navigator.userAgent,w=M.indexOf("Firefox")>=0,O=M.indexOf("AppleWebKit")>=0,A=M.indexOf("Chrome")>=0,I=!A&&M.indexOf("Safari")>=0,b=!A&&!I&&O,C=M.indexOf("Electron/")>=0,v=M.indexOf("Android")>=0;let _=!1;if(typeof u.G.matchMedia=="function"){const m=u.G.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),S=u.G.matchMedia("(display-mode: fullscreen)");_=m.matches,U(u.G,m,({matches:D})=>{_&&S.matches||(_=D)})}function d(){return _}},38714:(Mt,He,c)=>{c.d(He,{_:()=>O});var u=c(31938),G=c(91779),U=c(15903),P=c(17577),M=c(60599),w=c(3223);class O extends M.jG{constructor(I,b){super(),this.options=b,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=b?.supportIcons??!1,this.domNode=u.BC(I,u.$("span.monaco-highlighted-label"))}get element(){return this.domNode}set(I,b=[],C="",v){I||(I=""),v&&(I=O.escapeNewLines(I,b)),!(this.didEverRender&&this.text===I&&this.title===C&&w.aI(this.highlights,b))&&(this.text=I,this.title=C,this.highlights=b,this.render())}render(){const I=[];let b=0;for(const C of this.highlights){if(C.end===C.start)continue;if(b<C.start){const d=this.text.substring(b,C.start);this.supportIcons?I.push(...(0,P.n)(d)):I.push(d),b=C.start}const v=this.text.substring(b,C.end),_=u.$("span.highlight",void 0,...this.supportIcons?(0,P.n)(v):[v]);C.extraClasses&&_.classList.add(...C.extraClasses),I.push(_),b=C.end}if(b<this.text.length){const C=this.text.substring(b);this.supportIcons?I.push(...(0,P.n)(C)):I.push(C)}if(u.Ln(this.domNode,...I),this.options?.hoverDelegate?.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const C=this.options?.hoverDelegate??(0,U.nZ)("mouse");this.customHover=this._register((0,G.i)().setupManagedHover(C,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(I,b){let C=0,v=0;return I.replace(/\r\n|\r|\n/g,(_,d)=>{v=_===`\r
`?-1:0,d+=C;for(const m of b)m.end<=d||(m.start>=d&&(m.start+=v),m.end>=d&&(m.end+=v));return C+=v,"\u23CE"})}}},38795:(Mt,He,c)=>{c.d(He,{Z4:()=>ve,EH:()=>ne,XF:()=>Re});var u=c(38594),G=c(95263),U=c(31938),P=c(7069),M=c(15903),w=c(89530),O=c(15625),A=c(29554),I=c(91779),b=c(84546),C=c(93009),v=c(56491),_=c(64840),d=c(60599),m=c(90692),S=c(45573);const D=U.$,E="selectOption.entry.template";class B{get templateId(){return E}renderTemplate(re){const K=Object.create(null);return K.root=re,K.text=U.BC(re,D(".option-text")),K.detail=U.BC(re,D(".option-detail")),K.decoratorRight=U.BC(re,D(".option-decorator-right")),K}renderElement(re,K,F){const N=F,j=re.text,me=re.detail,ce=re.decoratorRight,he=re.isDisabled;N.text.textContent=j,N.detail.textContent=me||"",N.decoratorRight.innerText=ce||"",he?N.root.classList.add("option-disabled"):N.root.classList.remove("option-disabled")}disposeTemplate(re){}}class R extends d.jG{static{this.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32}static{this.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2}static{this.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3}constructor(re,K,F,N,j){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=N,this.selectBoxOptions=j||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=R.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new v.vl,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(F),this.selected=K||0,re&&this.setOptions(re,K),this.initStyleSheet()}setTitle(re){!this._hover&&re?this._hover=this._register((0,I.i)().setupManagedHover((0,M.nZ)("mouse"),this.selectElement,re)):this._hover&&this._hover.update(re)}getHeight(){return 22}getTemplateId(){return E}constructSelectDropDown(re){this.contextViewProvider=re,this.selectDropDownContainer=U.$(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=U.BC(this.selectDropDownContainer,D(".select-box-details-pane"));const K=U.BC(this.selectDropDownContainer,D(".select-box-dropdown-container-width-control")),F=U.BC(K,D(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",U.BC(F,this.widthControlElement),this._dropDownPosition=0,this.styleElement=U.li(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(U.ko(this.selectDropDownContainer,U.Bx.DRAG_START,N=>{U.fs.stop(N,!0)}))}registerListeners(){this._register(U.b2(this.selectElement,"change",K=>{this.selected=K.target.selectedIndex,this._onDidSelect.fire({index:K.target.selectedIndex,selected:K.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(U.ko(this.selectElement,U.Bx.CLICK,K=>{U.fs.stop(K),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(U.ko(this.selectElement,U.Bx.MOUSE_DOWN,K=>{U.fs.stop(K)}));let re;this._register(U.ko(this.selectElement,"touchstart",K=>{re=this._isVisible})),this._register(U.ko(this.selectElement,"touchend",K=>{U.fs.stop(K),re?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(U.ko(this.selectElement,U.Bx.KEY_DOWN,K=>{const F=new O.Z(K);let N=!1;m.zx?(F.keyCode===18||F.keyCode===16||F.keyCode===10||F.keyCode===3)&&(N=!0):(F.keyCode===18&&F.altKey||F.keyCode===16&&F.altKey||F.keyCode===10||F.keyCode===3)&&(N=!0),N&&(this.showSelectDropDown(),U.fs.stop(K,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(re,K){C.aI(this.options,re)||(this.options=re,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((F,N)=>{this.selectElement.add(this.createOption(F.text,N,F.isDisabled)),typeof F.description=="string"&&(this._hasDetails=!0)})),K!==void 0&&(this.select(K),this._currentSelection=this.selected)}setOptionsList(){this.selectList?.splice(0,this.selectList.length,this.options)}select(re){re>=0&&re<this.options.length?this.selected=re:re>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(re){this.selectElement.tabIndex=re?0:-1}render(re){this.container=re,re.classList.add("select-container"),re.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const re=[];this.styles.listFocusBackground&&re.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&re.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&re.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(re.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),re.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),re.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(re.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),re.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&re.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&re.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&re.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&re.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),re.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),re.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=re.join(`
`)}styleSelectElement(){const re=this.styles.selectBackground??"",K=this.styles.selectForeground??"",F=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=re,this.selectElement.style.color=K,this.selectElement.style.borderColor=F}styleList(){const re=this.styles.selectBackground??"",K=U.gI(this.styles.selectListBackground,re);this.selectDropDownListContainer.style.backgroundColor=K,this.selectionDetailsPane.style.backgroundColor=K;const F=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=F,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(re,K,F){const N=document.createElement("option");return N.value=re,N.text=re,N.disabled=!!F,N}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:re=>this.renderSelectDropDown(re,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:re=>this.renderSelectDropDown(re),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(re){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),re&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(re,K){return re.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(K),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let re=0;return this.options.forEach((K,F)=>{this.updateDetail(F),this.selectionDetailsPane.offsetHeight>re&&(re=this.selectionDetailsPane.offsetHeight)}),re}layoutSelectDropDown(re){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const K=U.zk(this.selectElement),F=U.BK(this.selectElement),N=U.zk(this.selectElement).getComputedStyle(this.selectElement),j=parseFloat(N.getPropertyValue("--dropdown-padding-top"))+parseFloat(N.getPropertyValue("--dropdown-padding-bottom")),me=K.innerHeight-F.top-F.height-(this.selectBoxOptions.minBottomMargin||0),ce=F.top-R.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,he=this.selectElement.offsetWidth,Le=this.setWidthControlElement(this.widthControlElement),Y=Math.max(Le,Math.round(he)).toString()+"px";this.selectDropDownContainer.style.width=Y,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let ae=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const Ce=this._hasDetails?this._cachedMaxDetailsHeight:0,Pe=ae+j+Ce,ye=Math.floor((me-j-Ce)/this.getHeight()),Ke=Math.floor((ce-j-Ce)/this.getHeight());if(re)return F.top+F.height>K.innerHeight-22||F.top<R.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||ye<1&&Ke<1?!1:(ye<R.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&Ke>ye&&this.options.length>ye?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(F.top+F.height>K.innerHeight-22||F.top<R.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&ye<1||this._dropDownPosition===1&&Ke<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&ye+Ke<1)return this.hideSelectDropDown(!0),!1;Pe>me&&(ae=ye*this.getHeight())}else Pe>ce&&(ae=Ke*this.getHeight());return this.selectList.layout(ae),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=ae+j+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=ae+j+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=Y,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(re){let K=0;if(re){let F=0,N=0;this.options.forEach((j,me)=>{const ce=j.detail?j.detail.length:0,he=j.decoratorRight?j.decoratorRight.length:0,Le=j.text.length+ce+he;Le>N&&(F=me,N=Le)}),re.textContent=this.options[F].text+(this.options[F].decoratorRight?this.options[F].decoratorRight+" ":""),K=U.Tr(re)}return K}createSelectList(re){if(this.selectList)return;this.selectDropDownListContainer=U.BC(re,D(".select-box-dropdown-list-container")),this.listRenderer=new B,this.selectList=this._register(new b.B8("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:N=>{let j=N.text;return N.detail&&(j+=`. ${N.detail}`),N.decoratorRight&&(j+=`. ${N.decoratorRight}`),N.description&&(j+=`. ${N.description}`),j},getWidgetAriaLabel:()=>(0,S.kg)({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>m.zx?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const K=this._register(new w.f(this.selectDropDownListContainer,"keydown")),F=v.Jh.chain(K.event,N=>N.filter(()=>this.selectList.length>0).map(j=>new O.Z(j)));this._register(v.Jh.chain(F,N=>N.filter(j=>j.keyCode===3))(this.onEnter,this)),this._register(v.Jh.chain(F,N=>N.filter(j=>j.keyCode===2))(this.onEnter,this)),this._register(v.Jh.chain(F,N=>N.filter(j=>j.keyCode===9))(this.onEscape,this)),this._register(v.Jh.chain(F,N=>N.filter(j=>j.keyCode===16))(this.onUpArrow,this)),this._register(v.Jh.chain(F,N=>N.filter(j=>j.keyCode===18))(this.onDownArrow,this)),this._register(v.Jh.chain(F,N=>N.filter(j=>j.keyCode===12))(this.onPageDown,this)),this._register(v.Jh.chain(F,N=>N.filter(j=>j.keyCode===11))(this.onPageUp,this)),this._register(v.Jh.chain(F,N=>N.filter(j=>j.keyCode===14))(this.onHome,this)),this._register(v.Jh.chain(F,N=>N.filter(j=>j.keyCode===13))(this.onEnd,this)),this._register(v.Jh.chain(F,N=>N.filter(j=>j.keyCode>=21&&j.keyCode<=56||j.keyCode>=85&&j.keyCode<=113))(this.onCharacter,this)),this._register(U.ko(this.selectList.getHTMLElement(),U.Bx.POINTER_UP,N=>this.onPointerUp(N))),this._register(this.selectList.onMouseOver(N=>typeof N.index<"u"&&this.selectList.setFocus([N.index]))),this._register(this.selectList.onDidChangeFocus(N=>this.onListFocus(N))),this._register(U.ko(this.selectDropDownContainer,U.Bx.FOCUS_OUT,N=>{!this._isVisible||U.QX(N.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(re){if(!this.selectList.length)return;U.fs.stop(re);const K=re.target;if(!K||K.classList.contains("slider"))return;const F=K.closest(".monaco-list-row");if(!F)return;const N=Number(F.getAttribute("data-index")),j=F.classList.contains("option-disabled");N>=0&&N<this.options.length&&!j&&(this.selected=N,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(re,K){const F=j=>{for(let me=0;me<j.childNodes.length;me++){const ce=j.childNodes.item(me);(ce.tagName&&ce.tagName.toLowerCase())==="img"?ce.remove():F(ce)}},N=(0,A.Gc)({value:re,supportThemeIcons:!0},{actionHandler:K});return N.element.classList.add("select-box-description-markdown"),F(N.element),N.element}onListFocus(re){!this._isVisible||!this._hasDetails||this.updateDetail(re.indexes[0])}updateDetail(re){this.selectionDetailsPane.innerText="";const K=this.options[re],F=K?.description??"",N=K?.descriptionIsMarkdown??!1;if(F){if(N){const j=K.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(F,j))}else this.selectionDetailsPane.innerText=F;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(re){U.fs.stop(re),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(re){U.fs.stop(re),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(re){if(this.selected<this.options.length-1){U.fs.stop(re,!0);const K=this.options[this.selected+1].isDisabled;if(K&&this.options.length>this.selected+2)this.selected+=2;else{if(K)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(re){this.selected>0&&(U.fs.stop(re,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(re){U.fs.stop(re),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(re){U.fs.stop(re),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(re){U.fs.stop(re),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(re){U.fs.stop(re),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(re){const K=_.YM.toString(re.keyCode);let F=-1;for(let N=0;N<this.options.length-1;N++)if(F=(N+this.selected+1)%this.options.length,this.options[F].text.charAt(0).toUpperCase()===K&&!this.options[F].isDisabled){this.select(F),this.selectList.setFocus([F]),this.selectList.reveal(this.selectList.getFocus()[0]),U.fs.stop(re);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}}class z extends d.jG{constructor(re,K,F,N){super(),this.selected=0,this.selectBoxOptions=N||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new v.vl),this.styles=F,this.registerListeners(),this.setOptions(re,K)}registerListeners(){this._register(P.q.addTarget(this.selectElement)),[P.B.Tap].forEach(re=>{this._register(U.ko(this.selectElement,re,K=>{this.selectElement.focus()}))}),this._register(U.b2(this.selectElement,"click",re=>{U.fs.stop(re,!0)})),this._register(U.b2(this.selectElement,"change",re=>{this.selectElement.title=re.target.value,this._onDidSelect.fire({index:re.target.selectedIndex,selected:re.target.value})})),this._register(U.b2(this.selectElement,"keydown",re=>{let K=!1;m.zx?(re.keyCode===18||re.keyCode===16||re.keyCode===10)&&(K=!0):(re.keyCode===18&&re.altKey||re.keyCode===10||re.keyCode===3)&&(K=!0),K&&re.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(re,K){(!this.options||!C.aI(this.options,re))&&(this.options=re,this.selectElement.options.length=0,this.options.forEach((F,N)=>{this.selectElement.add(this.createOption(F.text,N,F.isDisabled))})),K!==void 0&&this.select(K)}select(re){this.options.length===0?this.selected=0:re>=0&&re<this.options.length?this.selected=re:re>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(re){this.selectElement.tabIndex=re?0:-1}render(re){re.classList.add("select-container"),re.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(re,K,F){const N=document.createElement("option");return N.value=re,N.text=re,N.disabled=!!F,N}}var W=c(62385);class $ extends W.x{constructor(re,K,F,N,j){super(),m.zx&&!j?.useCustomDrawn?this.selectBoxDelegate=new z(re,K,N,j):this.selectBoxDelegate=new R(re,K,F,N,j),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(re,K){this.selectBoxDelegate.setOptions(re,K)}select(re){this.selectBoxDelegate.select(re)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(re){this.selectBoxDelegate.setFocusable(re)}render(re){this.selectBoxDelegate.render(re)}}var Q=c(43860),q=c(33902);class ne extends d.jG{get action(){return this._action}constructor(re,K,F={}){super(),this.options=F,this._context=re||this,this._action=K,K instanceof Q.rc&&this._register(K.onDidChange(N=>{this.element&&this.handleActionChangeEvent(N)}))}handleActionChangeEvent(re){re.enabled!==void 0&&this.updateEnabled(),re.checked!==void 0&&this.updateChecked(),re.class!==void 0&&this.updateClass(),re.label!==void 0&&(this.updateLabel(),this.updateTooltip()),re.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Q.LN)),this._actionRunner}set actionRunner(re){this._actionRunner=re}isEnabled(){return this._action.enabled}setActionContext(re){this._context=re}render(re){const K=this.element=re;this._register(P.q.addTarget(re));const F=this.options&&this.options.draggable;F&&(re.draggable=!0,u.gm&&this._register((0,U.ko)(re,U.Bx.DRAG_START,N=>N.dataTransfer?.setData(G.t.TEXT,this._action.label)))),this._register((0,U.ko)(K,P.B.Tap,N=>this.onClick(N,!0))),this._register((0,U.ko)(K,U.Bx.MOUSE_DOWN,N=>{F||U.fs.stop(N,!0),this._action.enabled&&N.button===0&&K.classList.add("active")})),m.zx&&this._register((0,U.ko)(K,U.Bx.CONTEXT_MENU,N=>{N.button===0&&N.ctrlKey===!0&&this.onClick(N)})),this._register((0,U.ko)(K,U.Bx.CLICK,N=>{U.fs.stop(N,!0),this.options&&this.options.isMenu||this.onClick(N)})),this._register((0,U.ko)(K,U.Bx.DBLCLICK,N=>{U.fs.stop(N,!0)})),[U.Bx.MOUSE_UP,U.Bx.MOUSE_OUT].forEach(N=>{this._register((0,U.ko)(K,N,j=>{U.fs.stop(j),K.classList.remove("active")}))})}onClick(re,K=!1){U.fs.stop(re,!0);const F=q.z(this._context)?this.options?.useEventAsContext?re:{preserveFocus:K}:this._context;this.actionRunner.run(this._action,F)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(re){this.element&&(this.element.tabIndex=re?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){if(!this.element)return;const re=this.getTooltip()??"";if(this.updateAriaLabel(),this.options.hoverDelegate?.showNativeHover)this.element.title=re;else if(!this.customHover&&re!==""){const K=this.options.hoverDelegate??(0,M.nZ)("element");this.customHover=this._store.add((0,I.i)().setupManagedHover(K,this.element,re))}else this.customHover&&this.customHover.update(re)}updateAriaLabel(){if(this.element){const re=this.getTooltip()??"";this.element.setAttribute("aria-label",re)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class ve extends ne{constructor(re,K,F){super(re,K,F),this.options=F,this.options.icon=F.icon!==void 0?F.icon:!1,this.options.label=F.label!==void 0?F.label:!0,this.cssClass=""}render(re){super.render(re),q.j(this.element);const K=document.createElement("a");if(K.classList.add("action-label"),K.setAttribute("role",this.getDefaultAriaRole()),this.label=K,this.element.appendChild(K),this.options.label&&this.options.keybinding){const F=document.createElement("span");F.classList.add("keybinding"),F.textContent=this.options.keybinding,this.element.appendChild(F)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===Q.wv.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(re){this.label&&(this.label.tabIndex=re?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let re=null;return this.action.tooltip?re=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(re=this.action.label,this.options.keybinding&&(re=S.kg({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",re,this.options.keybinding))),re??void 0}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label?.classList.remove("codicon")}updateEnabled(){this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element?.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element?.classList.add("disabled"))}updateAriaLabel(){if(this.label){const re=this.getTooltip()??"";this.label.setAttribute("aria-label",re)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class Re extends ne{constructor(re,K,F,N,j,me,ce){super(re,K),this.selectBox=new $(F,N,j,me,ce),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(re){this.selectBox.select(re)}registerListeners(){this._register(this.selectBox.onDidSelect(re=>this.runAction(re.selected,re.index)))}runAction(re,K){this.actionRunner.run(this._action,this.getActionContext(re,K))}getActionContext(re,K){return re}setFocusable(re){this.selectBox.setFocusable(re)}focus(){this.selectBox?.focus()}blur(){this.selectBox?.blur()}render(re){this.selectBox.render(re)}}},39118:(Mt,He,c)=>{c.d(He,{U:()=>E,X:()=>D});var u=c(31938),G=c(89530),U=c(21594),P=c(13511),M=c(93009),w=c(34920),O=c(56491),A=c(60599),I=c(23957),b=c(1822),C=c(33902);const v={separatorBorder:w.Q1.transparent};class _{set size(R){this._size=R}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(R,z){if(R!==this.visible){R?(this.size=(0,I.qE)(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof z=="number"?z:this.size,this.size=0),this.container.classList.toggle("visible",R);try{this.view.setVisible?.(R)}catch{}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(R){this.container.style.pointerEvents=R?"":"none"}constructor(R,z,W,$){this.container=R,this.view=z,this.disposable=$,this._cachedVisibleSize=void 0,typeof W=="number"?(this._size=W,this._cachedVisibleSize=void 0,R.classList.add("visible")):(this._size=0,this._cachedVisibleSize=W.cachedVisibleSize)}layout(R,z){this.layoutContainer(R);try{this.view.layout(this.size,R,z)}catch{}}dispose(){this.disposable.dispose()}}class d extends _{layoutContainer(R){this.container.style.top=`${R}px`,this.container.style.height=`${this.size}px`}}class m extends _{layoutContainer(R){this.container.style.left=`${R}px`,this.container.style.width=`${this.size}px`}}var S;(function(B){B[B.Idle=0]="Idle",B[B.Busy=1]="Busy"})(S||(S={}));var D;(function(B){B.Distribute={type:"distribute"};function R($){return{type:"split",index:$}}B.Split=R;function z($){return{type:"auto",index:$}}B.Auto=z;function W($){return{type:"invisible",cachedVisibleSize:$}}B.Invisible=W})(D||(D={}));class E extends A.jG{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(R){for(const z of this.sashItems)z.sash.orthogonalStartSash=R;this._orthogonalStartSash=R}set orthogonalEndSash(R){for(const z of this.sashItems)z.sash.orthogonalEndSash=R;this._orthogonalEndSash=R}set startSnappingEnabled(R){this._startSnappingEnabled!==R&&(this._startSnappingEnabled=R,this.updateSashEnablement())}set endSnappingEnabled(R){this._endSnappingEnabled!==R&&(this._endSnappingEnabled=R,this.updateSashEnablement())}constructor(R,z={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=S.Idle,this._onDidSashChange=this._register(new O.vl),this._onDidSashReset=this._register(new O.vl),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=z.orientation??0,this.inverseAltBehavior=z.inverseAltBehavior??!1,this.proportionalLayout=z.proportionalLayout??!0,this.getSashOrthogonalSize=z.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),R.appendChild(this.el),this.sashContainer=(0,u.BC)(this.el,(0,u.$)(".sash-container")),this.viewContainer=(0,u.$)(".split-view-container"),this.scrollable=this._register(new b.yE({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:$=>(0,u.PG)((0,u.zk)(this.el),$)})),this.scrollableElement=this._register(new P.oO(this.viewContainer,{vertical:this.orientation===0?z.scrollbarVisibility??1:2,horizontal:this.orientation===1?z.scrollbarVisibility??1:2},this.scrollable));const W=this._register(new G.f(this.viewContainer,"scroll")).event;this._register(W($=>{const Q=this.scrollableElement.getScrollPosition(),q=Math.abs(this.viewContainer.scrollLeft-Q.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,ne=Math.abs(this.viewContainer.scrollTop-Q.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(q!==void 0||ne!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:q,scrollTop:ne})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll($=>{$.scrollTopChanged&&(this.viewContainer.scrollTop=$.scrollTop),$.scrollLeftChanged&&(this.viewContainer.scrollLeft=$.scrollLeft)})),(0,u.BC)(this.el,this.scrollableElement.getDomNode()),this.style(z.styles||v),z.descriptor&&(this.size=z.descriptor.size,z.descriptor.views.forEach(($,Q)=>{const q=C.b0($.visible)||$.visible?$.size:{type:"invisible",cachedVisibleSize:$.size},ne=$.view;this.doAddView(ne,q,Q,!0)}),this._contentSize=this.viewItems.reduce(($,Q)=>$+Q.size,0),this.saveProportions())}style(R){R.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",R.separatorBorder.toString()))}addView(R,z,W=this.viewItems.length,$){this.doAddView(R,z,W,$)}layout(R,z){const W=Math.max(this.size,this._contentSize);if(this.size=R,this.layoutContext=z,this.proportions){let $=0;for(let Q=0;Q<this.viewItems.length;Q++){const q=this.viewItems[Q],ne=this.proportions[Q];typeof ne=="number"?$+=ne:R-=q.size}for(let Q=0;Q<this.viewItems.length;Q++){const q=this.viewItems[Q],ne=this.proportions[Q];typeof ne=="number"&&$>0&&(q.size=(0,I.qE)(Math.round(ne*R/$),q.minimumSize,q.maximumSize))}}else{const $=(0,M.y1)(this.viewItems.length),Q=$.filter(ne=>this.viewItems[ne].priority===1),q=$.filter(ne=>this.viewItems[ne].priority===2);this.resize(this.viewItems.length-1,R-W,void 0,Q,q)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(R=>R.proportionalLayout&&R.visible?R.size/this._contentSize:void 0))}onSashStart({sash:R,start:z,alt:W}){for(const ne of this.viewItems)ne.enabled=!1;const $=this.sashItems.findIndex(ne=>ne.sash===R),Q=(0,A.qE)((0,u.ko)(this.el.ownerDocument.body,"keydown",ne=>q(this.sashDragState.current,ne.altKey)),(0,u.ko)(this.el.ownerDocument.body,"keyup",()=>q(this.sashDragState.current,!1))),q=(ne,ve)=>{const Re=this.viewItems.map(N=>N.size);let Ae=Number.NEGATIVE_INFINITY,re=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(ve=!ve),ve)if($===this.sashItems.length-1){const j=this.viewItems[$];Ae=(j.minimumSize-j.size)/2,re=(j.maximumSize-j.size)/2}else{const j=this.viewItems[$+1];Ae=(j.size-j.maximumSize)/2,re=(j.size-j.minimumSize)/2}let K,F;if(!ve){const N=(0,M.y1)($,-1),j=(0,M.y1)($+1,this.viewItems.length),me=N.reduce((ye,Ke)=>ye+(this.viewItems[Ke].minimumSize-Re[Ke]),0),ce=N.reduce((ye,Ke)=>ye+(this.viewItems[Ke].viewMaximumSize-Re[Ke]),0),he=j.length===0?Number.POSITIVE_INFINITY:j.reduce((ye,Ke)=>ye+(Re[Ke]-this.viewItems[Ke].minimumSize),0),Le=j.length===0?Number.NEGATIVE_INFINITY:j.reduce((ye,Ke)=>ye+(Re[Ke]-this.viewItems[Ke].viewMaximumSize),0),Y=Math.max(me,Le),ae=Math.min(he,ce),Ce=this.findFirstSnapIndex(N),Pe=this.findFirstSnapIndex(j);if(typeof Ce=="number"){const ye=this.viewItems[Ce],Ke=Math.floor(ye.viewMinimumSize/2);K={index:Ce,limitDelta:ye.visible?Y-Ke:Y+Ke,size:ye.size}}if(typeof Pe=="number"){const ye=this.viewItems[Pe],Ke=Math.floor(ye.viewMinimumSize/2);F={index:Pe,limitDelta:ye.visible?ae+Ke:ae-Ke,size:ye.size}}}this.sashDragState={start:ne,current:ne,index:$,sizes:Re,minDelta:Ae,maxDelta:re,alt:ve,snapBefore:K,snapAfter:F,disposable:Q}};q(z,W)}onSashChange({current:R}){const{index:z,start:W,sizes:$,alt:Q,minDelta:q,maxDelta:ne,snapBefore:ve,snapAfter:Re}=this.sashDragState;this.sashDragState.current=R;const Ae=R-W,re=this.resize(z,Ae,$,void 0,void 0,q,ne,ve,Re);if(Q){const K=z===this.sashItems.length-1,F=this.viewItems.map(Le=>Le.size),N=K?z:z+1,j=this.viewItems[N],me=j.size-j.maximumSize,ce=j.size-j.minimumSize,he=K?z-1:z+1;this.resize(he,-re,F,void 0,void 0,me,ce)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(R){this._onDidSashChange.fire(R),this.sashDragState.disposable.dispose(),this.saveProportions();for(const z of this.viewItems)z.enabled=!0}onViewChange(R,z){const W=this.viewItems.indexOf(R);W<0||W>=this.viewItems.length||(z=typeof z=="number"?z:R.size,z=(0,I.qE)(z,R.minimumSize,R.maximumSize),this.inverseAltBehavior&&W>0?(this.resize(W-1,Math.floor((R.size-z)/2)),this.distributeEmptySpace(),this.layoutViews()):(R.size=z,this.relayout([W],void 0)))}resizeView(R,z){if(!(R<0||R>=this.viewItems.length)){if(this.state!==S.Idle)throw new Error("Cant modify splitview");this.state=S.Busy;try{const W=(0,M.y1)(this.viewItems.length).filter(ne=>ne!==R),$=[...W.filter(ne=>this.viewItems[ne].priority===1),R],Q=W.filter(ne=>this.viewItems[ne].priority===2),q=this.viewItems[R];z=Math.round(z),z=(0,I.qE)(z,q.minimumSize,Math.min(q.maximumSize,this.size)),q.size=z,this.relayout($,Q)}finally{this.state=S.Idle}}}distributeViewSizes(){const R=[];let z=0;for(const ne of this.viewItems)ne.maximumSize-ne.minimumSize>0&&(R.push(ne),z+=ne.size);const W=Math.floor(z/R.length);for(const ne of R)ne.size=(0,I.qE)(W,ne.minimumSize,ne.maximumSize);const $=(0,M.y1)(this.viewItems.length),Q=$.filter(ne=>this.viewItems[ne].priority===1),q=$.filter(ne=>this.viewItems[ne].priority===2);this.relayout(Q,q)}getViewSize(R){return R<0||R>=this.viewItems.length?-1:this.viewItems[R].size}doAddView(R,z,W=this.viewItems.length,$){if(this.state!==S.Idle)throw new Error("Cant modify splitview");this.state=S.Busy;try{const Q=(0,u.$)(".split-view-view");W===this.viewItems.length?this.viewContainer.appendChild(Q):this.viewContainer.insertBefore(Q,this.viewContainer.children.item(W));const q=R.onDidChange(K=>this.onViewChange(Ae,K)),ne=(0,A.s)(()=>Q.remove()),ve=(0,A.qE)(q,ne);let Re;typeof z=="number"?Re=z:(z.type==="auto"&&(this.areViewsDistributed()?z={type:"distribute"}:z={type:"split",index:z.index}),z.type==="split"?Re=this.getViewSize(z.index)/2:z.type==="invisible"?Re={cachedVisibleSize:z.cachedVisibleSize}:Re=R.minimumSize);const Ae=this.orientation===0?new d(Q,R,Re,ve):new m(Q,R,Re,ve);if(this.viewItems.splice(W,0,Ae),this.viewItems.length>1){const K={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},F=this.orientation===0?new U.m(this.sashContainer,{getHorizontalSashTop:ye=>this.getSashPosition(ye),getHorizontalSashWidth:this.getSashOrthogonalSize},{...K,orientation:1}):new U.m(this.sashContainer,{getVerticalSashLeft:ye=>this.getSashPosition(ye),getVerticalSashHeight:this.getSashOrthogonalSize},{...K,orientation:0}),N=this.orientation===0?ye=>({sash:F,start:ye.startY,current:ye.currentY,alt:ye.altKey}):ye=>({sash:F,start:ye.startX,current:ye.currentX,alt:ye.altKey}),me=O.Jh.map(F.onDidStart,N)(this.onSashStart,this),he=O.Jh.map(F.onDidChange,N)(this.onSashChange,this),Y=O.Jh.map(F.onDidEnd,()=>this.sashItems.findIndex(ye=>ye.sash===F))(this.onSashEnd,this),ae=F.onDidReset(()=>{const ye=this.sashItems.findIndex(it=>it.sash===F),Ke=(0,M.y1)(ye,-1),qe=(0,M.y1)(ye+1,this.viewItems.length),Ue=this.findFirstSnapIndex(Ke),x=this.findFirstSnapIndex(qe);typeof Ue=="number"&&!this.viewItems[Ue].visible||typeof x=="number"&&!this.viewItems[x].visible||this._onDidSashReset.fire(ye)}),Ce=(0,A.qE)(me,he,Y,ae,F),Pe={sash:F,disposable:Ce};this.sashItems.splice(W-1,0,Pe)}Q.appendChild(R.element);let re;typeof z!="number"&&z.type==="split"&&(re=[z.index]),$||this.relayout([W],re),!$&&typeof z!="number"&&z.type==="distribute"&&this.distributeViewSizes()}finally{this.state=S.Idle}}relayout(R,z){const W=this.viewItems.reduce(($,Q)=>$+Q.size,0);this.resize(this.viewItems.length-1,this.size-W,void 0,R,z),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(R,z,W=this.viewItems.map(Ae=>Ae.size),$,Q,q=Number.NEGATIVE_INFINITY,ne=Number.POSITIVE_INFINITY,ve,Re){if(R<0||R>=this.viewItems.length)return 0;const Ae=(0,M.y1)(R,-1),re=(0,M.y1)(R+1,this.viewItems.length);if(Q)for(const Pe of Q)(0,M._A)(Ae,Pe),(0,M._A)(re,Pe);if($)for(const Pe of $)(0,M.r7)(Ae,Pe),(0,M.r7)(re,Pe);const K=Ae.map(Pe=>this.viewItems[Pe]),F=Ae.map(Pe=>W[Pe]),N=re.map(Pe=>this.viewItems[Pe]),j=re.map(Pe=>W[Pe]),me=Ae.reduce((Pe,ye)=>Pe+(this.viewItems[ye].minimumSize-W[ye]),0),ce=Ae.reduce((Pe,ye)=>Pe+(this.viewItems[ye].maximumSize-W[ye]),0),he=re.length===0?Number.POSITIVE_INFINITY:re.reduce((Pe,ye)=>Pe+(W[ye]-this.viewItems[ye].minimumSize),0),Le=re.length===0?Number.NEGATIVE_INFINITY:re.reduce((Pe,ye)=>Pe+(W[ye]-this.viewItems[ye].maximumSize),0),Y=Math.max(me,Le,q),ae=Math.min(he,ce,ne);let Ce=!1;if(ve){const Pe=this.viewItems[ve.index],ye=z>=ve.limitDelta;Ce=ye!==Pe.visible,Pe.setVisible(ye,ve.size)}if(!Ce&&Re){const Pe=this.viewItems[Re.index],ye=z<Re.limitDelta;Ce=ye!==Pe.visible,Pe.setVisible(ye,Re.size)}if(Ce)return this.resize(R,z,W,$,Q,q,ne);z=(0,I.qE)(z,Y,ae);for(let Pe=0,ye=z;Pe<K.length;Pe++){const Ke=K[Pe],qe=(0,I.qE)(F[Pe]+ye,Ke.minimumSize,Ke.maximumSize),Ue=qe-F[Pe];ye-=Ue,Ke.size=qe}for(let Pe=0,ye=z;Pe<N.length;Pe++){const Ke=N[Pe],qe=(0,I.qE)(j[Pe]-ye,Ke.minimumSize,Ke.maximumSize),Ue=qe-j[Pe];ye+=Ue,Ke.size=qe}return z}distributeEmptySpace(R){const z=this.viewItems.reduce((ne,ve)=>ne+ve.size,0);let W=this.size-z;const $=(0,M.y1)(this.viewItems.length-1,-1),Q=$.filter(ne=>this.viewItems[ne].priority===1),q=$.filter(ne=>this.viewItems[ne].priority===2);for(const ne of q)(0,M._A)($,ne);for(const ne of Q)(0,M.r7)($,ne);typeof R=="number"&&(0,M.r7)($,R);for(let ne=0;W!==0&&ne<$.length;ne++){const ve=this.viewItems[$[ne]],Re=(0,I.qE)(ve.size+W,ve.minimumSize,ve.maximumSize),Ae=Re-ve.size;W-=Ae,ve.size=Re}}layoutViews(){this._contentSize=this.viewItems.reduce((z,W)=>z+W.size,0);let R=0;for(const z of this.viewItems)z.layout(R,this.layoutContext),R+=z.size;this.sashItems.forEach(z=>z.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let R=!1;const z=this.viewItems.map(ve=>R=ve.size-ve.minimumSize>0||R);R=!1;const W=this.viewItems.map(ve=>R=ve.maximumSize-ve.size>0||R),$=[...this.viewItems].reverse();R=!1;const Q=$.map(ve=>R=ve.size-ve.minimumSize>0||R).reverse();R=!1;const q=$.map(ve=>R=ve.maximumSize-ve.size>0||R).reverse();let ne=0;for(let ve=0;ve<this.sashItems.length;ve++){const{sash:Re}=this.sashItems[ve],Ae=this.viewItems[ve];ne+=Ae.size;const re=!(z[ve]&&q[ve+1]),K=!(W[ve]&&Q[ve+1]);if(re&&K){const F=(0,M.y1)(ve,-1),N=(0,M.y1)(ve+1,this.viewItems.length),j=this.findFirstSnapIndex(F),me=this.findFirstSnapIndex(N),ce=typeof j=="number"&&!this.viewItems[j].visible,he=typeof me=="number"&&!this.viewItems[me].visible;ce&&Q[ve]&&(ne>0||this.startSnappingEnabled)?Re.state=1:he&&z[ve]&&(ne<this._contentSize||this.endSnappingEnabled)?Re.state=2:Re.state=0}else re&&!K?Re.state=1:!re&&K?Re.state=2:Re.state=3}}getSashPosition(R){let z=0;for(let W=0;W<this.sashItems.length;W++)if(z+=this.viewItems[W].size,this.sashItems[W].sash===R)return z;return 0}findFirstSnapIndex(R){for(const z of R){const W=this.viewItems[z];if(W.visible&&W.snap)return z}for(const z of R){const W=this.viewItems[z];if(W.visible&&W.maximumSize-W.minimumSize>0)return;if(!W.visible&&W.snap)return z}}areViewsDistributed(){let R,z;for(const W of this.viewItems)if(R=R===void 0?W.size:Math.min(R,W.size),z=z===void 0?W.size:Math.max(z,W.size),z-R>2)return!1;return!0}dispose(){this.sashDragState?.disposable.dispose(),(0,A.AS)(this.viewItems),this.viewItems=[],this.sashItems.forEach(R=>R.disposable.dispose()),this.sashItems=[],super.dispose()}}},39726:(Mt,He,c)=>{c.d(He,{X:()=>G});var u=c(81545);const G=(0,u.u1)("dialogService")},41439:(Mt,He,c)=>{c.r(He),c.d(He,{EditorWorkerHost:()=>u});class u{static{this.CHANNEL_NAME="editorWorkerHost"}static getChannel(U){return U.getChannel(u.CHANNEL_NAME)}static setChannel(U,P){U.setChannel(u.CHANNEL_NAME,P)}}},41461:(Mt,He,c)=>{c.d(He,{cO:()=>I,db:()=>b,fT:()=>M,qK:()=>A});var u,G;class U{constructor(v,_){this.uri=v,this.value=_}}function P(C){return Array.isArray(C)}class M{static{this.defaultToKey=v=>v.toString()}constructor(v,_){if(this[u]="ResourceMap",v instanceof M)this.map=new Map(v.map),this.toKey=_??M.defaultToKey;else if(P(v)){this.map=new Map,this.toKey=_??M.defaultToKey;for(const[d,m]of v)this.set(d,m)}else this.map=new Map,this.toKey=v??M.defaultToKey}set(v,_){return this.map.set(this.toKey(v),new U(v,_)),this}get(v){return this.map.get(this.toKey(v))?.value}has(v){return this.map.has(this.toKey(v))}get size(){return this.map.size}clear(){this.map.clear()}delete(v){return this.map.delete(this.toKey(v))}forEach(v,_){typeof _<"u"&&(v=v.bind(_));for(const[d,m]of this.map)v(m.value,m.uri,this)}*values(){for(const v of this.map.values())yield v.value}*keys(){for(const v of this.map.values())yield v.uri}*entries(){for(const v of this.map.values())yield[v.uri,v.value]}*[(u=Symbol.toStringTag,Symbol.iterator)](){for(const[,v]of this.map)yield[v.uri,v.value]}}class w{constructor(){this[G]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(v){return this._map.has(v)}get(v,_=0){const d=this._map.get(v);if(d)return _!==0&&this.touch(d,_),d.value}set(v,_,d=0){let m=this._map.get(v);if(m)m.value=_,d!==0&&this.touch(m,d);else{switch(m={key:v,value:_,next:void 0,previous:void 0},d){case 0:this.addItemLast(m);break;case 1:this.addItemFirst(m);break;case 2:this.addItemLast(m);break;default:this.addItemLast(m);break}this._map.set(v,m),this._size++}return this}delete(v){return!!this.remove(v)}remove(v){const _=this._map.get(v);if(_)return this._map.delete(v),this.removeItem(_),this._size--,_.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const v=this._head;return this._map.delete(v.key),this.removeItem(v),this._size--,v.value}forEach(v,_){const d=this._state;let m=this._head;for(;m;){if(_?v.bind(_)(m.value,m.key,this):v(m.value,m.key,this),this._state!==d)throw new Error("LinkedMap got modified during iteration.");m=m.next}}keys(){const v=this,_=this._state;let d=this._head;const m={[Symbol.iterator](){return m},next(){if(v._state!==_)throw new Error("LinkedMap got modified during iteration.");if(d){const S={value:d.key,done:!1};return d=d.next,S}else return{value:void 0,done:!0}}};return m}values(){const v=this,_=this._state;let d=this._head;const m={[Symbol.iterator](){return m},next(){if(v._state!==_)throw new Error("LinkedMap got modified during iteration.");if(d){const S={value:d.value,done:!1};return d=d.next,S}else return{value:void 0,done:!0}}};return m}entries(){const v=this,_=this._state;let d=this._head;const m={[Symbol.iterator](){return m},next(){if(v._state!==_)throw new Error("LinkedMap got modified during iteration.");if(d){const S={value:[d.key,d.value],done:!1};return d=d.next,S}else return{value:void 0,done:!0}}};return m}[(G=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(v){if(v>=this.size)return;if(v===0){this.clear();return}let _=this._head,d=this.size;for(;_&&d>v;)this._map.delete(_.key),_=_.next,d--;this._head=_,this._size=d,_&&(_.previous=void 0),this._state++}trimNew(v){if(v>=this.size)return;if(v===0){this.clear();return}let _=this._tail,d=this.size;for(;_&&d>v;)this._map.delete(_.key),_=_.previous,d--;this._tail=_,this._size=d,_&&(_.next=void 0),this._state++}addItemFirst(v){if(!this._head&&!this._tail)this._tail=v;else if(this._head)v.next=this._head,this._head.previous=v;else throw new Error("Invalid list");this._head=v,this._state++}addItemLast(v){if(!this._head&&!this._tail)this._head=v;else if(this._tail)v.previous=this._tail,this._tail.next=v;else throw new Error("Invalid list");this._tail=v,this._state++}removeItem(v){if(v===this._head&&v===this._tail)this._head=void 0,this._tail=void 0;else if(v===this._head){if(!v.next)throw new Error("Invalid list");v.next.previous=void 0,this._head=v.next}else if(v===this._tail){if(!v.previous)throw new Error("Invalid list");v.previous.next=void 0,this._tail=v.previous}else{const _=v.next,d=v.previous;if(!_||!d)throw new Error("Invalid list");_.previous=d,d.next=_}v.next=void 0,v.previous=void 0,this._state++}touch(v,_){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(_!==1&&_!==2)){if(_===1){if(v===this._head)return;const d=v.next,m=v.previous;v===this._tail?(m.next=void 0,this._tail=m):(d.previous=m,m.next=d),v.previous=void 0,v.next=this._head,this._head.previous=v,this._head=v,this._state++}else if(_===2){if(v===this._tail)return;const d=v.next,m=v.previous;v===this._head?(d.previous=void 0,this._head=d):(d.previous=m,m.next=d),v.next=void 0,v.previous=this._tail,this._tail.next=v,this._tail=v,this._state++}}}toJSON(){const v=[];return this.forEach((_,d)=>{v.push([d,_])}),v}fromJSON(v){this.clear();for(const[_,d]of v)this.set(_,d)}}class O extends w{constructor(v,_=1){super(),this._limit=v,this._ratio=Math.min(Math.max(0,_),1)}get limit(){return this._limit}set limit(v){this._limit=v,this.checkTrim()}get(v,_=2){return super.get(v,_)}peek(v){return super.get(v,0)}set(v,_){return super.set(v,_,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class A extends O{constructor(v,_=1){super(v,_)}trim(v){this.trimOld(v)}set(v,_){return super.set(v,_),this.checkTrim(),this}}class I{constructor(v){if(this._m1=new Map,this._m2=new Map,v)for(const[_,d]of v)this.set(_,d)}clear(){this._m1.clear(),this._m2.clear()}set(v,_){this._m1.set(v,_),this._m2.set(_,v)}get(v){return this._m1.get(v)}getKey(v){return this._m2.get(v)}delete(v){const _=this._m1.get(v);return _===void 0?!1:(this._m1.delete(v),this._m2.delete(_),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class b{constructor(){this.map=new Map}add(v,_){let d=this.map.get(v);d||(d=new Set,this.map.set(v,d)),d.add(_)}delete(v,_){const d=this.map.get(v);d&&(d.delete(_),d.size===0&&this.map.delete(v))}forEach(v,_){const d=this.map.get(v);d&&d.forEach(_)}get(v){const _=this.map.get(v);return _||new Set}}},41615:(Mt,He,c)=>{c.d(He,{$t:()=>d,gI:()=>m,ER:()=>S});var u=c(85565),G=c(98414),U=c(46204),P=c(60599),M=c(44727),w=c(25894),O=c(77714),A=c(81545),I=c(73429),b=c(45573);const C=(0,A.u1)("IEditorCancelService"),v=new w.N1("cancellableOperation",!1,(0,b.kg)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,I.v)(C,class{constructor(){this._tokens=new WeakMap}add(D,E){let B=this._tokens.get(D);B||(B=D.invokeWithinContext(z=>{const W=v.bindTo(z.get(w.fN)),$=new O.w;return{key:W,tokens:$}}),this._tokens.set(D,B));let R;return B.key.set(!0),R=B.tokens.push(E),()=>{R&&(R(),B.key.set(!B.tokens.isEmpty()),R=void 0)}}cancel(D){const E=this._tokens.get(D);if(!E)return;const B=E.tokens.pop();B&&(B.cancel(),E.key.set(!E.tokens.isEmpty()))}},1);class _ extends U.Qi{constructor(E,B){super(B),this.editor=E,this._unregister=E.invokeWithinContext(R=>R.get(C).add(E,this))}dispose(){this._unregister(),super.dispose()}}(0,M.E_)(new class extends M.DX{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:v})}runEditorCommand(D,E){D.get(C).cancel(E)}});class d{constructor(E,B){if(this.flags=B,(this.flags&1)!==0){const R=E.getModel();this.modelVersionId=R?u.GP("{0}#{1}",R.uri.toString(),R.getVersionId()):null}else this.modelVersionId=null;(this.flags&4)!==0?this.position=E.getPosition():this.position=null,(this.flags&2)!==0?this.selection=E.getSelection():this.selection=null,(this.flags&8)!==0?(this.scrollLeft=E.getScrollLeft(),this.scrollTop=E.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(E){if(!(E instanceof d))return!1;const B=E;return!(this.modelVersionId!==B.modelVersionId||this.scrollLeft!==B.scrollLeft||this.scrollTop!==B.scrollTop||!this.position&&B.position||this.position&&!B.position||this.position&&B.position&&!this.position.equals(B.position)||!this.selection&&B.selection||this.selection&&!B.selection||this.selection&&B.selection&&!this.selection.equalsRange(B.selection))}validate(E){return this._equals(new d(E,this.flags))}}class m extends _{constructor(E,B,R,z){super(E,z),this._listener=new P.Cm,B&4&&this._listener.add(E.onDidChangeCursorPosition(W=>{(!R||!G.Q.containsPosition(R,W.position))&&this.cancel()})),B&2&&this._listener.add(E.onDidChangeCursorSelection(W=>{(!R||!G.Q.containsRange(R,W.selection))&&this.cancel()})),B&8&&this._listener.add(E.onDidScrollChange(W=>this.cancel())),B&1&&(this._listener.add(E.onDidChangeModel(W=>this.cancel())),this._listener.add(E.onDidChangeModelContent(W=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class S extends U.Qi{constructor(E,B){super(B),this._listener=E.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}},41841:(Mt,He,c)=>{c.d(He,{$z:()=>d,BA:()=>S,DW:()=>m,Hh:()=>A,Qn:()=>D,dO:()=>_,i_:()=>v,nz:()=>O,wt:()=>C});var u=c(31938),G=c(61329),U=c(25334),P=c(37519),M=c(60599),w=c(19867);class O{constructor(z,W){this.x=z,this.y=W,this._pageCoordinatesBrand=void 0}toClientCoordinates(z){return new A(this.x-z.scrollX,this.y-z.scrollY)}}class A{constructor(z,W){this.clientX=z,this.clientY=W,this._clientCoordinatesBrand=void 0}toPageCoordinates(z){return new O(this.clientX+z.scrollX,this.clientY+z.scrollY)}}class I{constructor(z,W,$,Q){this.x=z,this.y=W,this.width=$,this.height=Q,this._editorPagePositionBrand=void 0}}class b{constructor(z,W){this.x=z,this.y=W,this._positionRelativeToEditorBrand=void 0}}function C(R){const z=u.BK(R);return new I(z.left,z.top,z.width,z.height)}function v(R,z,W){const $=z.width/R.offsetWidth,Q=z.height/R.offsetHeight,q=(W.x-z.x)/$,ne=(W.y-z.y)/Q;return new b(q,ne)}class _ extends U.P{constructor(z,W,$){super(u.zk($),z),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=W,this.pos=new O(this.posx,this.posy),this.editorPos=C($),this.relativePos=v($,this.editorPos,this.pos)}}class d{constructor(z){this._editorViewDomNode=z}_create(z){return new _(z,!1,this._editorViewDomNode)}onContextMenu(z,W){return u.ko(z,"contextmenu",$=>{W(this._create($))})}onMouseUp(z,W){return u.ko(z,"mouseup",$=>{W(this._create($))})}onMouseDown(z,W){return u.ko(z,u.Bx.MOUSE_DOWN,$=>{W(this._create($))})}onPointerDown(z,W){return u.ko(z,u.Bx.POINTER_DOWN,$=>{W(this._create($),$.pointerId)})}onMouseLeave(z,W){return u.ko(z,u.Bx.MOUSE_LEAVE,$=>{W(this._create($))})}onMouseMove(z,W){return u.ko(z,"mousemove",$=>W(this._create($)))}}class m{constructor(z){this._editorViewDomNode=z}_create(z){return new _(z,!1,this._editorViewDomNode)}onPointerUp(z,W){return u.ko(z,"pointerup",$=>{W(this._create($))})}onPointerDown(z,W){return u.ko(z,u.Bx.POINTER_DOWN,$=>{W(this._create($),$.pointerId)})}onPointerLeave(z,W){return u.ko(z,u.Bx.POINTER_LEAVE,$=>{W(this._create($))})}onPointerMove(z,W){return u.ko(z,"pointermove",$=>W(this._create($)))}}class S extends M.jG{constructor(z){super(),this._editorViewDomNode=z,this._globalPointerMoveMonitor=this._register(new G._),this._keydownListener=null}startMonitoring(z,W,$,Q,q){this._keydownListener=u.b2(z.ownerDocument,"keydown",ne=>{ne.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,ne.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(z,W,$,ne=>{Q(new _(ne,!0,this._editorViewDomNode))},ne=>{this._keydownListener.dispose(),q(ne)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class D{static{this._idPool=0}constructor(z){this._editor=z,this._instanceId=++D._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new P.uC(()=>this.garbageCollect(),1e3)}createClassNameRef(z){const W=this.getOrCreateRule(z);return W.increaseRefCount(),{className:W.className,dispose:()=>{W.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(z){const W=this.computeUniqueKey(z);let $=this._rules.get(W);if(!$){const Q=this._counter++;$=new E(W,`dyn-rule-${this._instanceId}-${Q}`,u.Cl(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,z),this._rules.set(W,$)}return $}computeUniqueKey(z){return JSON.stringify(z)}garbageCollect(){for(const z of this._rules.values())z.hasReferences()||(this._rules.delete(z.key),z.dispose())}}class E{constructor(z,W,$,Q){this.key=z,this.className=W,this.properties=Q,this._referenceCount=0,this._styleElementDisposables=new M.Cm,this._styleElement=u.li($,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(z,W){let $=`.${z} {`;for(const Q in W){const q=W[Q];let ne;typeof q=="object"?ne=(0,w.GuP)(q.id):ne=q;const ve=B(Q);$+=`
	${ve}: ${ne};`}return $+=`
}`,$}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function B(R){return R.replace(/(^[A-Z])/,([z])=>z.toLowerCase()).replace(/([A-Z])/g,([z])=>`-${z.toLowerCase()}`)}},42008:(Mt,He,c)=>{c.d(He,{G:()=>G,y:()=>u});function u(U,P){const M=U;typeof M.vscodeWindowId!="number"&&Object.defineProperty(M,"vscodeWindowId",{get:()=>P})}const G=window},42535:(Mt,He,c)=>{c.d(He,{T:()=>an});var u=c(31938),G=c(51922),U=c(87856),P=c(56491),M=c(60599),w=c(63886),O=c(61353),A=c(44727),I=c(37100),b=c(87207),C=c(84519),v=c(13716),_=c(80074),d=c(13511),m=c(43860),S=c(93009),D=c(67538),E=c(42640),B=c(36612),R=c(47223),z=c(8775),W=c(33924),$=c(88935),Q=c(69504),q=c(98414),ne=c(81182),ve=c(71521),Re=c(14216),Ae=c(62681),re=c(42577),K=c(45573),F=c(13656),N=c(81545),j=c(34021),me=function(Et,_e,ue,Ee){var Ie=arguments.length,ze=Ie<3?_e:Ee===null?Ee=Object.getOwnPropertyDescriptor(_e,ue):Ee,Je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ze=Reflect.decorate(Et,_e,ue,Ee);else for(var rt=Et.length-1;rt>=0;rt--)(Je=Et[rt])&&(ze=(Ie<3?Je(ze):Ie>3?Je(_e,ue,ze):Je(_e,ue))||ze);return Ie>3&&ze&&Object.defineProperty(_e,ue,ze),ze},ce=function(Et,_e){return function(ue,Ee){_e(ue,Ee,Et)}};const he=(0,j.pU)("diff-review-insert",D.W.add,(0,K.kg)("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),Le=(0,j.pU)("diff-review-remove",D.W.remove,(0,K.kg)("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),Y=(0,j.pU)("diff-review-close",D.W.close,(0,K.kg)("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));let ae=class extends M.jG{static{this._ttPolicy=(0,v.H)("diffReview",{createHTML:_e=>_e})}constructor(_e,ue,Ee,Ie,ze,Je,rt,Ct,jt){super(),this._parentNode=_e,this._visible=ue,this._setVisible=Ee,this._canClose=Ie,this._width=ze,this._height=Je,this._diffs=rt,this._models=Ct,this._instantiationService=jt,this._state=(0,w.rm)(this,(It,Ut)=>{const Bt=this._visible.read(It);if(this._parentNode.style.visibility=Bt?"visible":"hidden",!Bt)return null;const Kt=Ut.add(this._instantiationService.createInstance(Ce,this._diffs,this._models,this._setVisible,this._canClose)),ct=Ut.add(this._instantiationService.createInstance(_t,this._parentNode,Kt,this._width,this._height,this._models));return{model:Kt,view:ct}}).recomputeInitiallyAndOnChange(this._store)}next(){(0,w.Rn)(_e=>{const ue=this._visible.get();this._setVisible(!0,_e),ue&&this._state.get().model.nextGroup(_e)})}prev(){(0,w.Rn)(_e=>{this._setVisible(!0,_e),this._state.get().model.previousGroup(_e)})}close(){(0,w.Rn)(_e=>{this._setVisible(!1,_e)})}};ae=me([ce(8,N._Y)],ae);let Ce=class extends M.jG{constructor(_e,ue,Ee,Ie,ze){super(),this._diffs=_e,this._models=ue,this._setVisible=Ee,this.canClose=Ie,this._accessibilitySignalService=ze,this._groups=(0,w.FY)(this,[]),this._currentGroupIdx=(0,w.FY)(this,0),this._currentElementIdx=(0,w.FY)(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((Je,rt)=>this._groups.read(rt)[Je]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((Je,rt)=>this.currentGroup.read(rt)?.lines[Je]),this._register((0,w.fm)(Je=>{const rt=this._diffs.read(Je);if(!rt){this._groups.set([],void 0);return}const Ct=ye(rt,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());(0,w.Rn)(jt=>{const It=this._models.getModifiedPosition();if(It){const Ut=Ct.findIndex(Bt=>It?.lineNumber<Bt.range.modified.endLineNumberExclusive);Ut!==-1&&this._currentGroupIdx.set(Ut,jt)}this._groups.set(Ct,jt)})})),this._register((0,w.fm)(Je=>{const rt=this.currentElement.read(Je);rt?.type===Ke.Deleted?this._accessibilitySignalService.playSignal(F.Rh.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):rt?.type===Ke.Added&&this._accessibilitySignalService.playSignal(F.Rh.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register((0,w.fm)(Je=>{const rt=this.currentElement.read(Je);if(rt&&rt.type!==Ke.Header){const Ct=rt.modifiedLineNumber??rt.diff.modified.startLineNumber;this._models.modifiedSetSelection(q.Q.fromPositions(new Q.y(Ct,1)))}}))}_goToGroupDelta(_e,ue){const Ee=this.groups.get();!Ee||Ee.length<=1||(0,w.PO)(ue,Ie=>{this._currentGroupIdx.set($.L.ofLength(Ee.length).clipCyclic(this._currentGroupIdx.get()+_e),Ie),this._currentElementIdx.set(0,Ie)})}nextGroup(_e){this._goToGroupDelta(1,_e)}previousGroup(_e){this._goToGroupDelta(-1,_e)}_goToLineDelta(_e){const ue=this.currentGroup.get();!ue||ue.lines.length<=1||(0,w.Rn)(Ee=>{this._currentElementIdx.set($.L.ofLength(ue.lines.length).clip(this._currentElementIdx.get()+_e),Ee)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(_e){const ue=this.currentGroup.get();if(!ue)return;const Ee=ue.lines.indexOf(_e);Ee!==-1&&(0,w.Rn)(Ie=>{this._currentElementIdx.set(Ee,Ie)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const _e=this.currentElement.get();_e&&(_e.type===Ke.Deleted?this._models.originalReveal(q.Q.fromPositions(new Q.y(_e.originalLineNumber,1))):this._models.modifiedReveal(_e.type!==Ke.Header?q.Q.fromPositions(new Q.y(_e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};Ce=me([ce(4,F.Nt)],Ce);const Pe=3;function ye(Et,_e,ue){const Ee=[];for(const Ie of(0,S.n)(Et,(ze,Je)=>Je.modified.startLineNumber-ze.modified.endLineNumberExclusive<2*Pe)){const ze=[];ze.push(new Ue);const Je=new W.M(Math.max(1,Ie[0].original.startLineNumber-Pe),Math.min(Ie[Ie.length-1].original.endLineNumberExclusive+Pe,_e+1)),rt=new W.M(Math.max(1,Ie[0].modified.startLineNumber-Pe),Math.min(Ie[Ie.length-1].modified.endLineNumberExclusive+Pe,ue+1));(0,S.pN)(Ie,(It,Ut)=>{const Bt=new W.M(It?It.original.endLineNumberExclusive:Je.startLineNumber,Ut?Ut.original.startLineNumber:Je.endLineNumberExclusive),Kt=new W.M(It?It.modified.endLineNumberExclusive:rt.startLineNumber,Ut?Ut.modified.startLineNumber:rt.endLineNumberExclusive);Bt.forEach(ct=>{ze.push(new Ze(ct,Kt.startLineNumber+(ct-Bt.startLineNumber)))}),Ut&&(Ut.original.forEach(ct=>{ze.push(new x(Ut,ct))}),Ut.modified.forEach(ct=>{ze.push(new it(Ut,ct))}))});const Ct=Ie[0].modified.join(Ie[Ie.length-1].modified),jt=Ie[0].original.join(Ie[Ie.length-1].original);Ee.push(new qe(new ne.WL(Ct,jt),ze))}return Ee}var Ke;(function(Et){Et[Et.Header=0]="Header",Et[Et.Unchanged=1]="Unchanged",Et[Et.Deleted=2]="Deleted",Et[Et.Added=3]="Added"})(Ke||(Ke={}));class qe{constructor(_e,ue){this.range=_e,this.lines=ue}}class Ue{constructor(){this.type=Ke.Header}}class x{constructor(_e,ue){this.diff=_e,this.originalLineNumber=ue,this.type=Ke.Deleted,this.modifiedLineNumber=void 0}}class it{constructor(_e,ue){this.diff=_e,this.modifiedLineNumber=ue,this.type=Ke.Added,this.originalLineNumber=void 0}}class Ze{constructor(_e,ue){this.originalLineNumber=_e,this.modifiedLineNumber=ue,this.type=Ke.Unchanged}}let _t=class extends M.jG{constructor(_e,ue,Ee,Ie,ze,Je){super(),this._element=_e,this._model=ue,this._width=Ee,this._height=Ie,this._models=ze,this._languageService=Je,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const rt=document.createElement("div");rt.className="diff-review-actions",this._actionBar=this._register(new _.E(rt)),this._register((0,w.fm)(Ct=>{this._actionBar.clear(),this._model.canClose.read(Ct)&&this._actionBar.push(new m.rc("diffreview.close",(0,K.kg)("label.close","Close"),"close-diff-review "+E.L.asClassName(Y),!0,async()=>ue.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new d.MU(this._content,{})),(0,u.Ln)(this.domNode,this._scrollbar.getDomNode(),rt),this._register((0,w.fm)(Ct=>{this._height.read(Ct),this._width.read(Ct),this._scrollbar.scanDomNode()})),this._register((0,M.s)(()=>{(0,u.Ln)(this.domNode)})),this._register((0,R.AV)(this.domNode,{width:this._width,height:this._height})),this._register((0,R.AV)(this._content,{width:this._width,height:this._height})),this._register((0,w.yC)((Ct,jt)=>{this._model.currentGroup.read(Ct),this._render(jt)})),this._register((0,u.b2)(this.domNode,"keydown",Ct=>{(Ct.equals(18)||Ct.equals(2066)||Ct.equals(530))&&(Ct.preventDefault(),this._model.goToNextLine()),(Ct.equals(16)||Ct.equals(2064)||Ct.equals(528))&&(Ct.preventDefault(),this._model.goToPreviousLine()),(Ct.equals(9)||Ct.equals(2057)||Ct.equals(521)||Ct.equals(1033))&&(Ct.preventDefault(),this._model.close()),(Ct.equals(10)||Ct.equals(3))&&(Ct.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(_e){const ue=this._models.getOriginalOptions(),Ee=this._models.getModifiedOptions(),Ie=document.createElement("div");Ie.className="diff-review-table",Ie.setAttribute("role","list"),Ie.setAttribute("aria-label",(0,K.kg)("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),(0,B.M)(Ie,Ee.get(50)),(0,u.Ln)(this._content,Ie);const ze=this._models.getOriginalModel(),Je=this._models.getModifiedModel();if(!ze||!Je)return;const rt=ze.getOptions(),Ct=Je.getOptions(),jt=Ee.get(67),It=this._model.currentGroup.get();for(const Ut of It?.lines||[]){if(!It)break;let Bt;if(Ut.type===Ke.Header){const ct=document.createElement("div");ct.className="diff-review-row",ct.setAttribute("role","listitem");const Ht=It.range,Qt=this._model.currentGroupIndex.get(),fi=this._model.groups.get().length,en=Hi=>Hi===0?(0,K.kg)("no_lines_changed","no lines changed"):Hi===1?(0,K.kg)("one_line_changed","1 line changed"):(0,K.kg)("more_lines_changed","{0} lines changed",Hi),di=en(Ht.original.length),$t=en(Ht.modified.length);ct.setAttribute("aria-label",(0,K.kg)({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",Qt+1,fi,Ht.original.startLineNumber,di,Ht.modified.startLineNumber,$t));const vi=document.createElement("div");vi.className="diff-review-cell diff-review-summary",vi.appendChild(document.createTextNode(`${Qt+1}/${fi}: @@ -${Ht.original.startLineNumber},${Ht.original.length} +${Ht.modified.startLineNumber},${Ht.modified.length} @@`)),ct.appendChild(vi),Bt=ct}else Bt=this._createRow(Ut,jt,this._width.get(),ue,ze,rt,Ee,Je,Ct);Ie.appendChild(Bt);const Kt=(0,w.un)(ct=>this._model.currentElement.read(ct)===Ut);_e.add((0,w.fm)(ct=>{const Ht=Kt.read(ct);Bt.tabIndex=Ht?0:-1,Ht&&Bt.focus()})),_e.add((0,u.ko)(Bt,"focus",()=>{this._model.goToLine(Ut)}))}this._scrollbar.scanDomNode()}_createRow(_e,ue,Ee,Ie,ze,Je,rt,Ct,jt){const It=Ie.get(146),Ut=It.glyphMarginWidth+It.lineNumbersWidth,Bt=rt.get(146),Kt=10+Bt.glyphMarginWidth+Bt.lineNumbersWidth;let ct="diff-review-row",Ht="";const Qt="diff-review-spacer";let fi=null;switch(_e.type){case Ke.Added:ct="diff-review-row line-insert",Ht=" char-insert",fi=he;break;case Ke.Deleted:ct="diff-review-row line-delete",Ht=" char-delete",fi=Le;break}const en=document.createElement("div");en.style.minWidth=Ee+"px",en.className=ct,en.setAttribute("role","listitem"),en.ariaLevel="";const di=document.createElement("div");di.className="diff-review-cell",di.style.height=`${ue}px`,en.appendChild(di);const $t=document.createElement("span");$t.style.width=Ut+"px",$t.style.minWidth=Ut+"px",$t.className="diff-review-line-number"+Ht,_e.originalLineNumber!==void 0?$t.appendChild(document.createTextNode(String(_e.originalLineNumber))):$t.innerText="\xA0",di.appendChild($t);const vi=document.createElement("span");vi.style.width=Kt+"px",vi.style.minWidth=Kt+"px",vi.style.paddingRight="10px",vi.className="diff-review-line-number"+Ht,_e.modifiedLineNumber!==void 0?vi.appendChild(document.createTextNode(String(_e.modifiedLineNumber))):vi.innerText="\xA0",di.appendChild(vi);const Hi=document.createElement("span");if(Hi.className=Qt,fi){const En=document.createElement("span");En.className=E.L.asClassName(fi),En.innerText="\xA0\xA0",Hi.appendChild(En)}else Hi.innerText="\xA0\xA0";di.appendChild(Hi);let Ui;if(_e.modifiedLineNumber!==void 0){let En=this._getLineHtml(Ct,rt,jt.tabSize,_e.modifiedLineNumber,this._languageService.languageIdCodec);ae._ttPolicy&&(En=ae._ttPolicy.createHTML(En)),di.insertAdjacentHTML("beforeend",En),Ui=Ct.getLineContent(_e.modifiedLineNumber)}else{let En=this._getLineHtml(ze,Ie,Je.tabSize,_e.originalLineNumber,this._languageService.languageIdCodec);ae._ttPolicy&&(En=ae._ttPolicy.createHTML(En)),di.insertAdjacentHTML("beforeend",En),Ui=ze.getLineContent(_e.originalLineNumber)}Ui.length===0&&(Ui=(0,K.kg)("blankLine","blank"));let Yn="";switch(_e.type){case Ke.Unchanged:_e.originalLineNumber===_e.modifiedLineNumber?Yn=(0,K.kg)({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",Ui,_e.originalLineNumber):Yn=(0,K.kg)("equalLine","{0} original line {1} modified line {2}",Ui,_e.originalLineNumber,_e.modifiedLineNumber);break;case Ke.Added:Yn=(0,K.kg)("insertLine","+ {0} modified line {1}",Ui,_e.modifiedLineNumber);break;case Ke.Deleted:Yn=(0,K.kg)("deleteLine","- {0} original line {1}",Ui,_e.originalLineNumber);break}return en.setAttribute("aria-label",Yn),en}_getLineHtml(_e,ue,Ee,Ie,ze){const Je=_e.getLineContent(Ie),rt=ue.get(50),Ct=Re.f.createEmpty(Je,ze),jt=re.qL.isBasicASCII(Je,_e.mightContainNonBasicASCII()),It=re.qL.containsRTL(Je,jt,_e.mightContainRTL());return(0,Ae.Md)(new Ae.zL(rt.isMonospace&&!ue.get(33),rt.canUseHalfwidthRightwardsArrow,Je,!1,jt,It,0,Ct,[],Ee,0,rt.spaceWidth,rt.middotWidth,rt.wsmiddotWidth,ue.get(118),ue.get(100),ue.get(95),ue.get(51)!==z.Bc.OFF,null)).html}};_t=me([ce(5,ve.L)],_t);class ot{constructor(_e){this.editors=_e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(_e){this.editors.original.revealRange(_e),this.editors.original.setSelection(_e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(_e){_e&&(this.editors.modified.revealRange(_e),this.editors.modified.setSelection(_e)),this.editors.modified.focus()}modifiedSetSelection(_e){this.editors.modified.setSelection(_e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}var Pt=c(37519),Wt=c(33902),Rt=c(14998),at=c(46204),Xe=c(86527),pe=c(74040),te=c(50536),oe=c(45635),Te=c(31633),Ve=c(73405),We=c(6105),dt=function(Et,_e,ue,Ee){var Ie=arguments.length,ze=Ie<3?_e:Ee===null?Ee=Object.getOwnPropertyDescriptor(_e,ue):Ee,Je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ze=Reflect.decorate(Et,_e,ue,Ee);else for(var rt=Et.length-1;rt>=0;rt--)(Je=Et[rt])&&(ze=(Ie<3?Je(ze):Ie>3?Je(_e,ue,ze):Je(_e,ue))||ze);return Ie>3&&ze&&Object.defineProperty(_e,ue,ze),ze},Ye=function(Et,_e){return function(ue,Ee){_e(ue,Ee,Et)}};let mt=class extends M.jG{setActiveMovedText(_e){this._activeMovedText.set(_e,void 0)}constructor(_e,ue,Ee){super(),this.model=_e,this._options=ue,this._diffProviderFactoryService=Ee,this._isDiffUpToDate=(0,w.FY)(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=(0,w.FY)(this,void 0),this.diff=this._diff,this._unchangedRegions=(0,w.FY)(this,void 0),this.unchangedRegions=(0,w.un)(this,rt=>this._options.hideUnchangedRegions.read(rt)?this._unchangedRegions.read(rt)?.regions??[]:((0,w.Rn)(Ct=>{for(const jt of this._unchangedRegions.get()?.regions||[])jt.collapseAll(Ct)}),[])),this.movedTextToCompare=(0,w.FY)(this,void 0),this._activeMovedText=(0,w.FY)(this,void 0),this._hoveredMovedText=(0,w.FY)(this,void 0),this.activeMovedText=(0,w.un)(this,rt=>this.movedTextToCompare.read(rt)??this._hoveredMovedText.read(rt)??this._activeMovedText.read(rt)),this._cancellationTokenSource=new at.Qi,this._diffProvider=(0,w.un)(this,rt=>{const Ct=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(rt)}),jt=(0,w.yQ)("onDidChange",Ct.onDidChange);return{diffProvider:Ct,onChangeSignal:jt}}),this._register((0,M.s)(()=>this._cancellationTokenSource.cancel()));const Ie=(0,w.Yd)("contentChangedSignal"),ze=this._register(new Pt.uC(()=>Ie.trigger(void 0),200));this._register((0,w.fm)(rt=>{const Ct=this._unchangedRegions.read(rt);if(!Ct||Ct.regions.some(ct=>ct.isDragged.read(rt)))return;const jt=Ct.originalDecorationIds.map(ct=>_e.original.getDecorationRange(ct)).map(ct=>ct?W.M.fromRangeInclusive(ct):void 0),It=Ct.modifiedDecorationIds.map(ct=>_e.modified.getDecorationRange(ct)).map(ct=>ct?W.M.fromRangeInclusive(ct):void 0),Ut=Ct.regions.map((ct,Ht)=>!jt[Ht]||!It[Ht]?void 0:new ri(jt[Ht].startLineNumber,It[Ht].startLineNumber,jt[Ht].length,ct.visibleLineCountTop.read(rt),ct.visibleLineCountBottom.read(rt))).filter(Wt.O9),Bt=[];let Kt=!1;for(const ct of(0,S.n)(Ut,(Ht,Qt)=>Ht.getHiddenModifiedRange(rt).endLineNumberExclusive===Qt.getHiddenModifiedRange(rt).startLineNumber))if(ct.length>1){Kt=!0;const Ht=ct.reduce((fi,en)=>fi+en.lineCount,0),Qt=new ri(ct[0].originalLineNumber,ct[0].modifiedLineNumber,Ht,ct[0].visibleLineCountTop.get(),ct[ct.length-1].visibleLineCountBottom.get());Bt.push(Qt)}else Bt.push(ct[0]);if(Kt){const ct=_e.original.deltaDecorations(Ct.originalDecorationIds,Bt.map(Qt=>({range:Qt.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),Ht=_e.modified.deltaDecorations(Ct.modifiedDecorationIds,Bt.map(Qt=>({range:Qt.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));(0,w.Rn)(Qt=>{this._unchangedRegions.set({regions:Bt,originalDecorationIds:ct,modifiedDecorationIds:Ht},Qt)})}}));const Je=(rt,Ct,jt)=>{const It=ri.fromDiffs(rt.changes,_e.original.getLineCount(),_e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(jt),this._options.hideUnchangedRegionsContextLineCount.read(jt));let Ut;const Bt=this._unchangedRegions.get();if(Bt){const Qt=Bt.originalDecorationIds.map($t=>_e.original.getDecorationRange($t)).map($t=>$t?W.M.fromRangeInclusive($t):void 0),fi=Bt.modifiedDecorationIds.map($t=>_e.modified.getDecorationRange($t)).map($t=>$t?W.M.fromRangeInclusive($t):void 0);let di=(0,R.EK)(Bt.regions.map(($t,vi)=>{if(!Qt[vi]||!fi[vi])return;const Hi=Qt[vi].length;return new ri(Qt[vi].startLineNumber,fi[vi].startLineNumber,Hi,Math.min($t.visibleLineCountTop.get(),Hi),Math.min($t.visibleLineCountBottom.get(),Hi-$t.visibleLineCountTop.get()))}).filter(Wt.O9),($t,vi)=>!vi||$t.modifiedLineNumber>=vi.modifiedLineNumber+vi.lineCount&&$t.originalLineNumber>=vi.originalLineNumber+vi.lineCount).map($t=>new ne.WL($t.getHiddenOriginalRange(jt),$t.getHiddenModifiedRange(jt)));di=ne.WL.clip(di,W.M.ofLength(1,_e.original.getLineCount()),W.M.ofLength(1,_e.modified.getLineCount())),Ut=ne.WL.inverse(di,_e.original.getLineCount(),_e.modified.getLineCount())}const Kt=[];if(Ut)for(const Qt of It){const fi=Ut.filter(en=>en.original.intersectsStrict(Qt.originalUnchangedRange)&&en.modified.intersectsStrict(Qt.modifiedUnchangedRange));Kt.push(...Qt.setVisibleRanges(fi,Ct))}else Kt.push(...It);const ct=_e.original.deltaDecorations(Bt?.originalDecorationIds||[],Kt.map(Qt=>({range:Qt.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),Ht=_e.modified.deltaDecorations(Bt?.modifiedDecorationIds||[],Kt.map(Qt=>({range:Qt.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:Kt,originalDecorationIds:ct,modifiedDecorationIds:Ht},Ct)};this._register(_e.modified.onDidChangeContent(rt=>{if(this._diff.get()){const jt=oe.c.fromModelContentChanges(rt.changes),It=(this._lastDiff,_e.original,_e.modified,void 0);It&&(this._lastDiff=It,(0,w.Rn)(Ut=>{this._diff.set(we.fromDiffResult(this._lastDiff),Ut),Je(It,Ut);const Bt=this.movedTextToCompare.get();this.movedTextToCompare.set(Bt?this._lastDiff.moves.find(Kt=>Kt.lineRangeMapping.modified.intersect(Bt.lineRangeMapping.modified)):void 0,Ut)}))}this._isDiffUpToDate.set(!1,void 0),ze.schedule()})),this._register(_e.original.onDidChangeContent(rt=>{if(this._diff.get()){const jt=oe.c.fromModelContentChanges(rt.changes),It=(this._lastDiff,_e.original,_e.modified,void 0);It&&(this._lastDiff=It,(0,w.Rn)(Ut=>{this._diff.set(we.fromDiffResult(this._lastDiff),Ut),Je(It,Ut);const Bt=this.movedTextToCompare.get();this.movedTextToCompare.set(Bt?this._lastDiff.moves.find(Kt=>Kt.lineRangeMapping.modified.intersect(Bt.lineRangeMapping.modified)):void 0,Ut)}))}this._isDiffUpToDate.set(!1,void 0),ze.schedule()})),this._register((0,w.yC)(async(rt,Ct)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(rt),this._options.hideUnchangedRegionsContextLineCount.read(rt),ze.cancel(),Ie.read(rt);const jt=this._diffProvider.read(rt);jt.onChangeSignal.read(rt),(0,pe.b)(te.D8,rt),(0,pe.b)(Ve.NC,rt),this._isDiffUpToDate.set(!1,void 0);let It=[];Ct.add(_e.original.onDidChangeContent(Kt=>{const ct=oe.c.fromModelContentChanges(Kt.changes);It=(0,Te.M)(It,ct)}));let Ut=[];Ct.add(_e.modified.onDidChangeContent(Kt=>{const ct=oe.c.fromModelContentChanges(Kt.changes);Ut=(0,Te.M)(Ut,ct)}));let Bt=await jt.diffProvider.computeDiff(_e.original,_e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(rt),maxComputationTimeMs:this._options.maxComputationTimeMs.read(rt),computeMoves:this._options.showMoves.read(rt)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||_e.original.isDisposed()||_e.modified.isDisposed()||(Bt=Dt(Bt,_e.original,_e.modified),Bt=(_e.original,_e.modified,void 0)??Bt,Bt=(_e.original,_e.modified,void 0)??Bt,(0,w.Rn)(Kt=>{Je(Bt,Kt),this._lastDiff=Bt;const ct=we.fromDiffResult(Bt);this._diff.set(ct,Kt),this._isDiffUpToDate.set(!0,Kt);const Ht=this.movedTextToCompare.get();this.movedTextToCompare.set(Ht?this._lastDiff.moves.find(Qt=>Qt.lineRangeMapping.modified.intersect(Ht.lineRangeMapping.modified)):void 0,Kt)}))}))}ensureModifiedLineIsVisible(_e,ue,Ee){if(this.diff.get()?.mappings.length===0)return;const Ie=this._unchangedRegions.get()?.regions||[];for(const ze of Ie)if(ze.getHiddenModifiedRange(void 0).contains(_e)){ze.showModifiedLine(_e,ue,Ee);return}}ensureOriginalLineIsVisible(_e,ue,Ee){if(this.diff.get()?.mappings.length===0)return;const Ie=this._unchangedRegions.get()?.regions||[];for(const ze of Ie)if(ze.getHiddenOriginalRange(void 0).contains(_e)){ze.showOriginalLine(_e,ue,Ee);return}}async waitForDiff(){await(0,w.oJ)(this.isDiffUpToDate,_e=>_e)}serializeState(){return{collapsedRegions:this._unchangedRegions.get()?.regions.map(ue=>({range:ue.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(_e){const ue=_e.collapsedRegions?.map(Ie=>W.M.deserialize(Ie.range)),Ee=this._unchangedRegions.get();!Ee||!ue||(0,w.Rn)(Ie=>{for(const ze of Ee.regions)for(const Je of ue)if(ze.modifiedUnchangedRange.intersect(Je)){ze.setHiddenModifiedRange(Je,Ie);break}})}};mt=dt([Ye(2,Xe.Hg)],mt);function Dt(Et,_e,ue){return{changes:Et.changes.map(Ee=>new ne.wm(Ee.original,Ee.modified,Ee.innerChanges?Ee.innerChanges.map(Ie=>Se(Ie,_e,ue)):void 0)),moves:Et.moves,identical:Et.identical,quitEarly:Et.quitEarly}}function Se(Et,_e,ue){let Ee=Et.originalRange,Ie=Et.modifiedRange;return Ee.startColumn===1&&Ie.startColumn===1&&(Ee.endColumn!==1||Ie.endColumn!==1)&&Ee.endColumn===_e.getLineMaxColumn(Ee.endLineNumber)&&Ie.endColumn===ue.getLineMaxColumn(Ie.endLineNumber)&&Ee.endLineNumber<_e.getLineCount()&&Ie.endLineNumber<ue.getLineCount()&&(Ee=Ee.setEndPosition(Ee.endLineNumber+1,1),Ie=Ie.setEndPosition(Ie.endLineNumber+1,1)),new ne.q6(Ee,Ie)}class we{static fromDiffResult(_e){return new we(_e.changes.map(ue=>new Xt(ue)),_e.moves||[],_e.identical,_e.quitEarly)}constructor(_e,ue,Ee,Ie){this.mappings=_e,this.movedTexts=ue,this.identical=Ee,this.quitEarly=Ie}}class Xt{constructor(_e){this.lineRangeMapping=_e}}class ri{static fromDiffs(_e,ue,Ee,Ie,ze){const Je=ne.wm.inverse(_e,ue,Ee),rt=[];for(const Ct of Je){let jt=Ct.original.startLineNumber,It=Ct.modified.startLineNumber,Ut=Ct.original.length;const Bt=jt===1&&It===1,Kt=jt+Ut===ue+1&&It+Ut===Ee+1;(Bt||Kt)&&Ut>=ze+Ie?(Bt&&!Kt&&(Ut-=ze),Kt&&!Bt&&(jt+=ze,It+=ze,Ut-=ze),rt.push(new ri(jt,It,Ut,0,0))):Ut>=ze*2+Ie&&(jt+=ze,It+=ze,Ut-=ze*2,rt.push(new ri(jt,It,Ut,0,0)))}return rt}get originalUnchangedRange(){return W.M.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return W.M.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(_e,ue,Ee,Ie,ze){this.originalLineNumber=_e,this.modifiedLineNumber=ue,this.lineCount=Ee,this._visibleLineCountTop=(0,w.FY)(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=(0,w.FY)(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=(0,w.un)(this,Ct=>this.visibleLineCountTop.read(Ct)+this.visibleLineCountBottom.read(Ct)===this.lineCount&&!this.isDragged.read(Ct)),this.isDragged=(0,w.FY)(this,void 0);const Je=Math.max(Math.min(Ie,this.lineCount),0),rt=Math.max(Math.min(ze,this.lineCount-Ie),0);(0,We.V7)(Ie===Je),(0,We.V7)(ze===rt),this._visibleLineCountTop.set(Je,void 0),this._visibleLineCountBottom.set(rt,void 0)}setVisibleRanges(_e,ue){const Ee=[],Ie=new W.S(_e.map(Ct=>Ct.modified)).subtractFrom(this.modifiedUnchangedRange);let ze=this.originalLineNumber,Je=this.modifiedLineNumber;const rt=this.modifiedLineNumber+this.lineCount;if(Ie.ranges.length===0)this.showAll(ue),Ee.push(this);else{let Ct=0;for(const jt of Ie.ranges){const It=Ct===Ie.ranges.length-1;Ct++;const Ut=(It?rt:jt.endLineNumberExclusive)-Je,Bt=new ri(ze,Je,Ut,0,0);Bt.setHiddenModifiedRange(jt,ue),Ee.push(Bt),ze=Bt.originalUnchangedRange.endLineNumberExclusive,Je=Bt.modifiedUnchangedRange.endLineNumberExclusive}}return Ee}shouldHideControls(_e){return this._shouldHideControls.read(_e)}getHiddenOriginalRange(_e){return W.M.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(_e),this.lineCount-this._visibleLineCountTop.read(_e)-this._visibleLineCountBottom.read(_e))}getHiddenModifiedRange(_e){return W.M.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(_e),this.lineCount-this._visibleLineCountTop.read(_e)-this._visibleLineCountBottom.read(_e))}setHiddenModifiedRange(_e,ue){const Ee=_e.startLineNumber-this.modifiedLineNumber,Ie=this.modifiedLineNumber+this.lineCount-_e.endLineNumberExclusive;this.setState(Ee,Ie,ue)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(_e=10,ue){const Ee=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+_e,Ee),ue)}showMoreBelow(_e=10,ue){const Ee=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+_e,Ee),ue)}showAll(_e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),_e)}showModifiedLine(_e,ue,Ee){const Ie=_e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),ze=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-_e;ue===0&&Ie<ze||ue===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+Ie,Ee):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+ze,Ee)}showOriginalLine(_e,ue,Ee){const Ie=_e-this.originalLineNumber,ze=this.originalLineNumber+this.lineCount-_e;ue===0&&Ie<ze||ue===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+ze-Ie,this.getMaxVisibleLineCountTop()),Ee):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+Ie-ze,this.getMaxVisibleLineCountBottom()),Ee)}collapseAll(_e){this._visibleLineCountTop.set(0,_e),this._visibleLineCountBottom.set(0,_e)}setState(_e,ue,Ee){_e=Math.max(Math.min(_e,this.lineCount),0),ue=Math.max(Math.min(ue,this.lineCount-_e),0),this._visibleLineCountTop.set(_e,Ee),this._visibleLineCountBottom.set(ue,Ee)}}function ke(Et,_e,ue,Ee){}function Z(Et,_e,ue,Ee){}var Fe=c(90692);class pt extends M.jG{get visibility(){return this._visibility}set visibility(_e){this._visibility!==_e&&(this._visibility=_e,this._diffActions.style.visibility=_e?"visible":"hidden")}constructor(_e,ue,Ee,Ie,ze,Je,rt,Ct,jt){super(),this._getViewZoneId=_e,this._marginDomNode=ue,this._modifiedEditor=Ee,this._diff=Ie,this._editor=ze,this._viewLineCounts=Je,this._originalTextModel=rt,this._contextMenuService=Ct,this._clipboardService=jt,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=E.L.asClassName(D.W.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const It=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${It}px`,this._diffActions.style.lineHeight=`${It}px`,this._marginDomNode.appendChild(this._diffActions);let Ut=0;const Bt=Ee.getOption(128)&&!Fe.un,Kt=(ct,Ht)=>{this._contextMenuService.showContextMenu({domForShadowRoot:Bt?Ee.getDomNode()??void 0:void 0,getAnchor:()=>({x:ct,y:Ht}),getActions:()=>{const Qt=[],fi=Ie.modified.isEmpty;return Qt.push(new m.rc("diff.clipboard.copyDeletedContent",fi?Ie.original.length>1?(0,K.kg)("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):(0,K.kg)("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):Ie.original.length>1?(0,K.kg)("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):(0,K.kg)("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{const di=this._originalTextModel.getValueInRange(Ie.original.toExclusiveRange());await this._clipboardService.writeText(di)})),Ie.original.length>1&&Qt.push(new m.rc("diff.clipboard.copyDeletedLineContent",fi?(0,K.kg)("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",Ie.original.startLineNumber+Ut):(0,K.kg)("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",Ie.original.startLineNumber+Ut),void 0,!0,async()=>{let di=this._originalTextModel.getLineContent(Ie.original.startLineNumber+Ut);di===""&&(di=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(di)})),Ee.getOption(92)||Qt.push(new m.rc("diff.inline.revertChange",(0,K.kg)("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),Qt},autoSelectFirstItem:!0})};this._register((0,u.b2)(this._diffActions,"mousedown",ct=>{if(!ct.leftButton)return;const{top:Ht,height:Qt}=(0,u.BK)(this._diffActions),fi=Math.floor(It/3);ct.preventDefault(),Kt(ct.posx,Ht+Qt+fi)})),this._register(Ee.onMouseMove(ct=>{(ct.target.type===8||ct.target.type===5)&&ct.target.detail.viewZoneId===this._getViewZoneId()?(Ut=this._updateLightBulbPosition(this._marginDomNode,ct.event.browserEvent.y,It),this.visibility=!0):this.visibility=!1})),this._register(Ee.onMouseDown(ct=>{ct.event.leftButton&&(ct.target.type===8||ct.target.type===5)&&ct.target.detail.viewZoneId===this._getViewZoneId()&&(ct.event.preventDefault(),Ut=this._updateLightBulbPosition(this._marginDomNode,ct.event.browserEvent.y,It),Kt(ct.event.posx,ct.event.posy+It))}))}_updateLightBulbPosition(_e,ue,Ee){const{top:Ie}=(0,u.BK)(_e),ze=ue-Ie,Je=Math.floor(ze/Ee),rt=Je*Ee;if(this._diffActions.style.top=`${rt}px`,this._viewLineCounts){let Ct=0;for(let jt=0;jt<this._viewLineCounts.length;jt++)if(Ct+=this._viewLineCounts[jt],Je<Ct)return jt}return Je}}var et=c(81275),Zt=c(19154);const bi=(0,v.H)("diffEditorWidget",{createHTML:Et=>Et});function ci(Et,_e,ue,Ee){(0,B.M)(Ee,_e.fontInfo);const Ie=ue.length>0,ze=new et.fe(1e4);let Je=0,rt=0;const Ct=[];for(let Bt=0;Bt<Et.lineTokens.length;Bt++){const Kt=Bt+1,ct=Et.lineTokens[Bt],Ht=Et.lineBreakData[Bt],Qt=Zt.d.filter(ue,Kt,1,Number.MAX_SAFE_INTEGER);if(Ht){let fi=0;for(const en of Ht.breakOffsets){const di=ct.sliceAndInflate(fi,en,0);Je=Math.max(Je,yi(rt,di,Zt.d.extractWrapped(Qt,fi,en),Ie,Et.mightContainNonBasicASCII,Et.mightContainRTL,_e,ze)),rt++,fi=en}Ct.push(Ht.breakOffsets.length)}else Ct.push(1),Je=Math.max(Je,yi(rt,ct,Qt,Ie,Et.mightContainNonBasicASCII,Et.mightContainRTL,_e,ze)),rt++}Je+=_e.scrollBeyondLastColumn;const jt=ze.build(),It=bi?bi.createHTML(jt):jt;Ee.innerHTML=It;const Ut=Je*_e.typicalHalfwidthCharacterWidth;return{heightInLines:rt,minWidthInPx:Ut,viewLineCounts:Ct}}class Oi{constructor(_e,ue,Ee,Ie){this.lineTokens=_e,this.lineBreakData=ue,this.mightContainNonBasicASCII=Ee,this.mightContainRTL=Ie}}class Ii{static fromEditor(_e){const ue=_e.getOptions(),Ee=ue.get(50),Ie=ue.get(146);return new Ii(_e.getModel()?.getOptions().tabSize||0,Ee,ue.get(33),Ee.typicalHalfwidthCharacterWidth,ue.get(105),ue.get(67),Ie.decorationsWidth,ue.get(118),ue.get(100),ue.get(95),ue.get(51))}constructor(_e,ue,Ee,Ie,ze,Je,rt,Ct,jt,It,Ut){this.tabSize=_e,this.fontInfo=ue,this.disableMonospaceOptimizations=Ee,this.typicalHalfwidthCharacterWidth=Ie,this.scrollBeyondLastColumn=ze,this.lineHeight=Je,this.lineDecorationsWidth=rt,this.stopRenderingLineAfter=Ct,this.renderWhitespace=jt,this.renderControlCharacters=It,this.fontLigatures=Ut}}function yi(Et,_e,ue,Ee,Ie,ze,Je,rt){rt.appendString('<div class="view-line'),Ee||rt.appendString(" char-delete"),rt.appendString('" style="top:'),rt.appendString(String(Et*Je.lineHeight)),rt.appendString('px;width:1000000px;">');const Ct=_e.getLineContent(),jt=re.qL.isBasicASCII(Ct,Ie),It=re.qL.containsRTL(Ct,jt,ze),Ut=(0,Ae.UW)(new Ae.zL(Je.fontInfo.isMonospace&&!Je.disableMonospaceOptimizations,Je.fontInfo.canUseHalfwidthRightwardsArrow,Ct,!1,jt,It,0,_e,ue,Je.tabSize,0,Je.fontInfo.spaceWidth,Je.fontInfo.middotWidth,Je.fontInfo.wsmiddotWidth,Je.stopRenderingLineAfter,Je.renderWhitespace,Je.renderControlCharacters,Je.fontLigatures!==z.Bc.OFF,null),rt);return rt.appendString("</div>"),Ut.characterMapping.getHorizontalOffset(Ut.characterMapping.length)}var Vt=c(85653),_n=c(4879),oi=function(Et,_e,ue,Ee){var Ie=arguments.length,ze=Ie<3?_e:Ee===null?Ee=Object.getOwnPropertyDescriptor(_e,ue):Ee,Je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ze=Reflect.decorate(Et,_e,ue,Ee);else for(var rt=Et.length-1;rt>=0;rt--)(Je=Et[rt])&&(ze=(Ie<3?Je(ze):Ie>3?Je(_e,ue,ze):Je(_e,ue))||ze);return Ie>3&&ze&&Object.defineProperty(_e,ue,ze),ze},Ne=function(Et,_e){return function(ue,Ee){_e(ue,Ee,Et)}};let gt=class extends M.jG{constructor(_e,ue,Ee,Ie,ze,Je,rt,Ct,jt,It){super(),this._targetWindow=_e,this._editors=ue,this._diffModel=Ee,this._options=Ie,this._diffEditorWidget=ze,this._canIgnoreViewZoneUpdateEvent=Je,this._origViewZonesToIgnore=rt,this._modViewZonesToIgnore=Ct,this._clipboardService=jt,this._contextMenuService=It,this._originalTopPadding=(0,w.FY)(this,0),this._originalScrollOffset=(0,w.FY)(this,0),this._originalScrollOffsetAnimated=(0,R.Nu)(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=(0,w.FY)(this,0),this._modifiedScrollOffset=(0,w.FY)(this,0),this._modifiedScrollOffsetAnimated=(0,R.Nu)(this._targetWindow,this._modifiedScrollOffset,this._store);const Ut=(0,w.FY)("invalidateAlignmentsState",0),Bt=this._register(new Pt.uC(()=>{Ut.set(Ut.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(di=>{this._canIgnoreViewZoneUpdateEvent()||Bt.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(di=>{this._canIgnoreViewZoneUpdateEvent()||Bt.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(di=>{(di.hasChanged(147)||di.hasChanged(67))&&Bt.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(di=>{(di.hasChanged(147)||di.hasChanged(67))&&Bt.schedule()}));const Kt=this._diffModel.map(di=>di?(0,w.y0)(this,di.model.original.onDidChangeTokens,()=>di.model.original.tokenization.backgroundTokenizationState===2):void 0).map((di,$t)=>di?.read($t)),ct=(0,w.un)(di=>{const $t=this._diffModel.read(di),vi=$t?.diff.read(di);if(!$t||!vi)return null;Ut.read(di);const Ui=this._options.renderSideBySide.read(di);return ei(this._editors.original,this._editors.modified,vi.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,Ui)}),Ht=(0,w.un)(di=>{const $t=this._diffModel.read(di)?.movedTextToCompare.read(di);if(!$t)return null;Ut.read(di);const vi=$t.changes.map(Hi=>new Xt(Hi));return ei(this._editors.original,this._editors.modified,vi,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function Qt(){const di=document.createElement("div");return di.className="diagonal-fill",di}const fi=this._register(new M.Cm);this.viewZones=(0,w.rm)(this,(di,$t)=>{fi.clear();const vi=ct.read(di)||[],Hi=[],Ui=[],Yn=this._modifiedTopPadding.read(di);Yn>0&&Ui.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:Yn,showInHiddenAreas:!0,suppressMouseDown:!0});const En=this._originalTopPadding.read(di);En>0&&Hi.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:En,showInHiddenAreas:!0,suppressMouseDown:!0});const ys=this._options.renderSideBySide.read(di),zn=ys?void 0:this._editors.modified._getViewModel()?.createLineBreaksComputer();if(zn){const xn=this._editors.original.getModel();for(const ks of vi)if(ks.diff)for(let Gs=ks.originalRange.startLineNumber;Gs<ks.originalRange.endLineNumberExclusive;Gs++){if(Gs>xn.getLineCount())return{orig:Hi,mod:Ui};zn?.addRequest(xn.getLineContent(Gs),null,null)}}const Hn=zn?.finalize()??[];let ds=0;const Vi=this._editors.modified.getOption(67),mn=this._diffModel.read(di)?.movedTextToCompare.read(di),Ri=this._editors.original.getModel()?.mightContainNonBasicASCII()??!1,gs=this._editors.original.getModel()?.mightContainRTL()??!1,zs=Ii.fromEditor(this._editors.modified);for(const xn of vi)if(xn.diff&&!ys&&(!this._options.useTrueInlineDiffRendering.read(di)||!Ci(xn.diff))){if(!xn.originalRange.isEmpty){Kt.read(di);const Gs=document.createElement("div");Gs.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const Po=this._editors.original.getModel();if(xn.originalRange.endLineNumberExclusive-1>Po.getLineCount())return{orig:Hi,mod:Ui};const zi=new Oi(xn.originalRange.mapToLineArray(Is=>Po.tokenization.getLineTokens(Is)),xn.originalRange.mapToLineArray(Is=>Hn[ds++]),Ri,gs),Ps=[];for(const Is of xn.diff.innerChanges||[])Ps.push(new re.kI(Is.originalRange.delta(-(xn.diff.original.startLineNumber-1)),Rt.Zb.className,0));const Qs=ci(zi,zs,Ps,Gs),wr=document.createElement("div");if(wr.className="inline-deleted-margin-view-zone",(0,B.M)(wr,zs.fontInfo),this._options.renderIndicators.read(di))for(let Is=0;Is<Qs.heightInLines;Is++){const Ls=document.createElement("div");Ls.className=`delete-sign ${E.L.asClassName(Rt.dv)}`,Ls.setAttribute("style",`position:absolute;top:${Is*Vi}px;width:${zs.lineDecorationsWidth}px;height:${Vi}px;right:0;`),wr.appendChild(Ls)}let xo;fi.add(new pt(()=>(0,Wt.eU)(xo),wr,this._editors.modified,xn.diff,this._diffEditorWidget,Qs.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let Is=0;Is<Qs.viewLineCounts.length;Is++){const Ls=Qs.viewLineCounts[Is];Ls>1&&Hi.push({afterLineNumber:xn.originalRange.startLineNumber+Is,domNode:Qt(),heightInPx:(Ls-1)*Vi,showInHiddenAreas:!0,suppressMouseDown:!0})}Ui.push({afterLineNumber:xn.modifiedRange.startLineNumber-1,domNode:Gs,heightInPx:Qs.heightInLines*Vi,minWidthInPx:Qs.minWidthInPx,marginDomNode:wr,setZoneId(Is){xo=Is},showInHiddenAreas:!0,suppressMouseDown:!0})}const ks=document.createElement("div");ks.className="gutter-delete",Hi.push({afterLineNumber:xn.originalRange.endLineNumberExclusive-1,domNode:Qt(),heightInPx:xn.modifiedHeightInPx,marginDomNode:ks,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const ks=xn.modifiedHeightInPx-xn.originalHeightInPx;if(ks>0){if(mn?.lineRangeMapping.original.delta(-1).deltaLength(2).contains(xn.originalRange.endLineNumberExclusive-1))continue;Hi.push({afterLineNumber:xn.originalRange.endLineNumberExclusive-1,domNode:Qt(),heightInPx:ks,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let Gs=function(){const zi=document.createElement("div");return zi.className="arrow-revert-change "+E.L.asClassName(D.W.arrowRight),$t.add((0,u.ko)(zi,"mousedown",Ps=>Ps.stopPropagation())),$t.add((0,u.ko)(zi,"click",Ps=>{Ps.stopPropagation(),ze.revert(xn.diff)})),(0,u.$)("div",{},zi)};if(mn?.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(xn.modifiedRange.endLineNumberExclusive-1))continue;let Po;xn.diff&&xn.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(di)&&(Po=Gs()),Ui.push({afterLineNumber:xn.modifiedRange.endLineNumberExclusive-1,domNode:Qt(),heightInPx:-ks,marginDomNode:Po,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const xn of Ht.read(di)??[]){if(!mn?.lineRangeMapping.original.intersect(xn.originalRange)||!mn?.lineRangeMapping.modified.intersect(xn.modifiedRange))continue;const ks=xn.modifiedHeightInPx-xn.originalHeightInPx;ks>0?Hi.push({afterLineNumber:xn.originalRange.endLineNumberExclusive-1,domNode:Qt(),heightInPx:ks,showInHiddenAreas:!0,suppressMouseDown:!0}):Ui.push({afterLineNumber:xn.modifiedRange.endLineNumberExclusive-1,domNode:Qt(),heightInPx:-ks,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:Hi,mod:Ui}});let en=!1;this._register(this._editors.original.onDidScrollChange(di=>{di.scrollLeftChanged&&!en&&(en=!0,this._editors.modified.setScrollLeft(di.scrollLeft),en=!1)})),this._register(this._editors.modified.onDidScrollChange(di=>{di.scrollLeftChanged&&!en&&(en=!0,this._editors.original.setScrollLeft(di.scrollLeft),en=!1)})),this._originalScrollTop=(0,w.y0)(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=(0,w.y0)(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register((0,w.fm)(di=>{const $t=this._originalScrollTop.read(di)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(di))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(di));$t!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop($t,1)})),this._register((0,w.fm)(di=>{const $t=this._modifiedScrollTop.read(di)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(di))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(di));$t!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop($t,1)})),this._register((0,w.fm)(di=>{const $t=this._diffModel.read(di)?.movedTextToCompare.read(di);let vi=0;if($t){const Hi=this._editors.original.getTopForLineNumber($t.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();vi=this._editors.modified.getTopForLineNumber($t.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-Hi}vi>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(vi,void 0)):vi<0?(this._modifiedTopPadding.set(-vi,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-vi,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+vi,void 0,!0)}))}};gt=oi([Ne(8,Vt.h),Ne(9,_n.Z)],gt);function ei(Et,_e,ue,Ee,Ie,ze){const Je=new S.j3(ai(Et,Ee)),rt=new S.j3(ai(_e,Ie)),Ct=Et.getOption(67),jt=_e.getOption(67),It=[];let Ut=0,Bt=0;function Kt(ct,Ht){for(;;){let Qt=Je.peek(),fi=rt.peek();if(Qt&&Qt.lineNumber>=ct&&(Qt=void 0),fi&&fi.lineNumber>=Ht&&(fi=void 0),!Qt&&!fi)break;const en=Qt?Qt.lineNumber-Ut:Number.MAX_VALUE,di=fi?fi.lineNumber-Bt:Number.MAX_VALUE;en<di?(Je.dequeue(),fi={lineNumber:Qt.lineNumber-Ut+Bt,heightInPx:0}):en>di?(rt.dequeue(),Qt={lineNumber:fi.lineNumber-Bt+Ut,heightInPx:0}):(Je.dequeue(),rt.dequeue()),It.push({originalRange:W.M.ofLength(Qt.lineNumber,1),modifiedRange:W.M.ofLength(fi.lineNumber,1),originalHeightInPx:Ct+Qt.heightInPx,modifiedHeightInPx:jt+fi.heightInPx,diff:void 0})}}for(const ct of ue){let Ht=function($t,vi,Hi=!1){if($t<di||vi<en)return;if(fi)fi=!1;else if(!Hi&&($t===di||vi===en))return;const Ui=new W.M(di,$t),Yn=new W.M(en,vi);if(Ui.isEmpty&&Yn.isEmpty)return;const En=Je.takeWhile(zn=>zn.lineNumber<$t)?.reduce((zn,Hn)=>zn+Hn.heightInPx,0)??0,ys=rt.takeWhile(zn=>zn.lineNumber<vi)?.reduce((zn,Hn)=>zn+Hn.heightInPx,0)??0;It.push({originalRange:Ui,modifiedRange:Yn,originalHeightInPx:Ui.length*Ct+En,modifiedHeightInPx:Yn.length*jt+ys,diff:ct.lineRangeMapping}),di=$t,en=vi};const Qt=ct.lineRangeMapping;Kt(Qt.original.startLineNumber,Qt.modified.startLineNumber);let fi=!0,en=Qt.modified.startLineNumber,di=Qt.original.startLineNumber;if(ze)for(const $t of Qt.innerChanges||[]){$t.originalRange.startColumn>1&&$t.modifiedRange.startColumn>1&&Ht($t.originalRange.startLineNumber,$t.modifiedRange.startLineNumber);const vi=Et.getModel(),Hi=$t.originalRange.endLineNumber<=vi.getLineCount()?vi.getLineMaxColumn($t.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;$t.originalRange.endColumn<Hi&&Ht($t.originalRange.endLineNumber,$t.modifiedRange.endLineNumber)}Ht(Qt.original.endLineNumberExclusive,Qt.modified.endLineNumberExclusive,!0),Ut=Qt.original.endLineNumberExclusive,Bt=Qt.modified.endLineNumberExclusive}return Kt(Number.MAX_VALUE,Number.MAX_VALUE),It}function ai(Et,_e){const ue=[],Ee=[],Ie=Et.getOption(147).wrappingColumn!==-1,ze=Et._getViewModel().coordinatesConverter,Je=Et.getOption(67);if(Ie)for(let Ct=1;Ct<=Et.getModel().getLineCount();Ct++){const jt=ze.getModelLineViewLineCount(Ct);jt>1&&Ee.push({lineNumber:Ct,heightInPx:Je*(jt-1)})}for(const Ct of Et.getWhitespaces()){if(_e.has(Ct.id))continue;const jt=Ct.afterLineNumber===0?0:ze.convertViewPositionToModelPosition(new Q.y(Ct.afterLineNumber,1)).lineNumber;ue.push({lineNumber:jt,heightInPx:Ct.height})}return(0,R.Am)(ue,Ee,Ct=>Ct.lineNumber,(Ct,jt)=>({lineNumber:Ct.lineNumber,heightInPx:Ct.heightInPx+jt.heightInPx}))}function Ci(Et){return Et.innerChanges?Et.innerChanges.every(_e=>wi(_e.modifiedRange)&&wi(_e.originalRange)||_e.originalRange.equalsRange(new q.Q(1,1,1,1))):!1}function wi(Et){return Et.startLineNumber===Et.endLineNumber}class ji extends M.jG{static{this.movedCodeBlockPadding=4}constructor(_e,ue,Ee,Ie,ze){super(),this._rootElement=_e,this._diffModel=ue,this._originalEditorLayoutInfo=Ee,this._modifiedEditorLayoutInfo=Ie,this._editors=ze,this._originalScrollTop=(0,w.y0)(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=(0,w.y0)(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=(0,w.yQ)("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=(0,w.FY)(this,0),this._modifiedViewZonesChangedSignal=(0,w.yQ)("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=(0,w.yQ)("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=(0,w.rm)(this,(It,Ut)=>{this._element.replaceChildren();const Bt=this._diffModel.read(It),Kt=Bt?.diff.read(It)?.movedTexts;if(!Kt||Kt.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(It);const ct=this._originalEditorLayoutInfo.read(It),Ht=this._modifiedEditorLayoutInfo.read(It);if(!ct||!Ht){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(It),this._originalViewZonesChangedSignal.read(It);const Qt=Kt.map(Ui=>{function Yn(gs,zs){const xn=zs.getTopForLineNumber(gs.startLineNumber,!0),ks=zs.getTopForLineNumber(gs.endLineNumberExclusive,!0);return(xn+ks)/2}const En=Yn(Ui.lineRangeMapping.original,this._editors.original),ys=this._originalScrollTop.read(It),zn=Yn(Ui.lineRangeMapping.modified,this._editors.modified),Hn=this._modifiedScrollTop.read(It),ds=En-ys,Vi=zn-Hn,mn=Math.min(En,zn),Ri=Math.max(En,zn);return{range:new $.L(mn,Ri),from:ds,to:Vi,fromWithoutScroll:En,toWithoutScroll:zn,move:Ui}});Qt.sort((0,S.nH)((0,S.VE)(Ui=>Ui.fromWithoutScroll>Ui.toWithoutScroll,S.TS),(0,S.VE)(Ui=>Ui.fromWithoutScroll>Ui.toWithoutScroll?Ui.fromWithoutScroll:-Ui.toWithoutScroll,S.U9)));const fi=Di.compute(Qt.map(Ui=>Ui.range)),en=10,di=ct.verticalScrollbarWidth,$t=(fi.getTrackCount()-1)*10+en*2,vi=di+$t+(Ht.contentLeft-ji.movedCodeBlockPadding);let Hi=0;for(const Ui of Qt){const Yn=fi.getTrack(Hi),En=di+en+Yn*10,ys=15,zn=15,Hn=vi,ds=Ht.glyphMarginWidth+Ht.lineNumbersWidth,Vi=18,mn=document.createElementNS("http://www.w3.org/2000/svg","rect");mn.classList.add("arrow-rectangle"),mn.setAttribute("x",`${Hn-ds}`),mn.setAttribute("y",`${Ui.to-Vi/2}`),mn.setAttribute("width",`${ds}`),mn.setAttribute("height",`${Vi}`),this._element.appendChild(mn);const Ri=document.createElementNS("http://www.w3.org/2000/svg","g"),gs=document.createElementNS("http://www.w3.org/2000/svg","path");gs.setAttribute("d",`M 0 ${Ui.from} L ${En} ${Ui.from} L ${En} ${Ui.to} L ${Hn-zn} ${Ui.to}`),gs.setAttribute("fill","none"),Ri.appendChild(gs);const zs=document.createElementNS("http://www.w3.org/2000/svg","polygon");zs.classList.add("arrow"),Ut.add((0,w.fm)(xn=>{gs.classList.toggle("currentMove",Ui.move===Bt.activeMovedText.read(xn)),zs.classList.toggle("currentMove",Ui.move===Bt.activeMovedText.read(xn))})),zs.setAttribute("points",`${Hn-zn},${Ui.to-ys/2} ${Hn},${Ui.to} ${Hn-zn},${Ui.to+ys/2}`),Ri.appendChild(zs),this._element.appendChild(Ri),Hi++}this.width.set($t,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register((0,M.s)(()=>this._element.remove())),this._register((0,w.fm)(It=>{const Ut=this._originalEditorLayoutInfo.read(It),Bt=this._modifiedEditorLayoutInfo.read(It);!Ut||!Bt||(this._element.style.left=`${Ut.width-Ut.verticalScrollbarWidth}px`,this._element.style.height=`${Ut.height}px`,this._element.style.width=`${Ut.verticalScrollbarWidth+Ut.contentLeft-ji.movedCodeBlockPadding+this.width.read(It)}px`)})),this._register((0,w.OI)(this._state));const Je=(0,w.un)(It=>{const Bt=this._diffModel.read(It)?.diff.read(It);return Bt?Bt.movedTexts.map(Kt=>({move:Kt,original:new R.D1((0,w.lk)(Kt.lineRangeMapping.original.startLineNumber-1),18),modified:new R.D1((0,w.lk)(Kt.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register((0,R.Vs)(this._editors.original,Je.map(It=>It.map(Ut=>Ut.original)))),this._register((0,R.Vs)(this._editors.modified,Je.map(It=>It.map(Ut=>Ut.modified)))),this._register((0,w.yC)((It,Ut)=>{const Bt=Je.read(It);for(const Kt of Bt)Ut.add(new dn(this._editors.original,Kt.original,Kt.move,"original",this._diffModel.get())),Ut.add(new dn(this._editors.modified,Kt.modified,Kt.move,"modified",this._diffModel.get()))}));const rt=(0,w.yQ)("original.onDidFocusEditorWidget",It=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>It(void 0),0))),Ct=(0,w.yQ)("modified.onDidFocusEditorWidget",It=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>It(void 0),0)));let jt="modified";this._register((0,w.Y)({createEmptyChangeSummary:()=>{},handleChange:(It,Ut)=>(It.didChange(rt)&&(jt="original"),It.didChange(Ct)&&(jt="modified"),!0)},It=>{rt.read(It),Ct.read(It);const Ut=this._diffModel.read(It);if(!Ut)return;const Bt=Ut.diff.read(It);let Kt;if(Bt&&jt==="original"){const ct=this._editors.originalCursor.read(It);ct&&(Kt=Bt.movedTexts.find(Ht=>Ht.lineRangeMapping.original.contains(ct.lineNumber)))}if(Bt&&jt==="modified"){const ct=this._editors.modifiedCursor.read(It);ct&&(Kt=Bt.movedTexts.find(Ht=>Ht.lineRangeMapping.modified.contains(ct.lineNumber)))}Kt!==Ut.movedTextToCompare.get()&&Ut.movedTextToCompare.set(void 0,void 0),Ut.setActiveMovedText(Kt)}))}}class Di{static compute(_e){const ue=[],Ee=[];for(const Ie of _e){let ze=ue.findIndex(Je=>!Je.intersectsStrict(Ie));ze===-1&&(ue.length>=6?ze=(0,G.TM)(ue,(0,S.VE)(rt=>rt.intersectWithRangeLength(Ie),S.U9)):(ze=ue.length,ue.push(new $.h))),ue[ze].addRange(Ie),Ee.push(ze)}return new Di(ue.length,Ee)}constructor(_e,ue){this._trackCount=_e,this.trackPerLineIdx=ue}getTrack(_e){return this.trackPerLineIdx[_e]}getTrackCount(){return this._trackCount}}class dn extends R.uN{constructor(_e,ue,Ee,Ie,ze){const Je=(0,u.h)("div.diff-hidden-lines-widget");super(_e,ue,Je.root),this._editor=_e,this._move=Ee,this._kind=Ie,this._diffModel=ze,this._nodes=(0,u.h)("div.diff-moved-code-block",{style:{marginRight:"4px"}},[(0,u.h)("div.text-content@textContent"),(0,u.h)("div.action-bar@actionBar")]),Je.root.appendChild(this._nodes.root);const rt=(0,w.y0)(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register((0,R.AV)(this._nodes.root,{paddingRight:rt.map(Bt=>Bt.verticalScrollbarWidth)}));let Ct;Ee.changes.length>0?Ct=this._kind==="original"?(0,K.kg)("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,K.kg)("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):Ct=this._kind==="original"?(0,K.kg)("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,K.kg)("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const jt=this._register(new _.E(this._nodes.actionBar,{highlightToggledItems:!0})),It=new m.rc("",Ct,"",!1);jt.push(It,{icon:!1,label:!0});const Ut=new m.rc("","Compare",E.L.asClassName(D.W.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===Ee?void 0:this._move,void 0)});this._register((0,w.fm)(Bt=>{const Kt=this._diffModel.movedTextToCompare.read(Bt)===Ee;Ut.checked=Kt})),jt.push(Ut,{icon:!1,label:!0})}}class nn extends M.jG{constructor(_e,ue,Ee,Ie){super(),this._editors=_e,this._diffModel=ue,this._options=Ee,this._decorations=(0,w.un)(this,ze=>{const Je=this._diffModel.read(ze),rt=Je?.diff.read(ze);if(!rt)return null;const Ct=this._diffModel.read(ze).movedTextToCompare.read(ze),jt=this._options.renderIndicators.read(ze),It=this._options.showEmptyDecorations.read(ze),Ut=[],Bt=[];if(!Ct)for(const ct of rt.mappings)if(ct.lineRangeMapping.original.isEmpty||Ut.push({range:ct.lineRangeMapping.original.toInclusiveRange(),options:jt?Rt.Ob:Rt.XT}),ct.lineRangeMapping.modified.isEmpty||Bt.push({range:ct.lineRangeMapping.modified.toInclusiveRange(),options:jt?Rt.Kl:Rt.Zw}),ct.lineRangeMapping.modified.isEmpty||ct.lineRangeMapping.original.isEmpty)ct.lineRangeMapping.original.isEmpty||Ut.push({range:ct.lineRangeMapping.original.toInclusiveRange(),options:Rt.KL}),ct.lineRangeMapping.modified.isEmpty||Bt.push({range:ct.lineRangeMapping.modified.toInclusiveRange(),options:Rt.Ou});else{const Ht=this._options.useTrueInlineDiffRendering.read(ze)&&Ci(ct.lineRangeMapping);for(const Qt of ct.lineRangeMapping.innerChanges||[])if(ct.lineRangeMapping.original.contains(Qt.originalRange.startLineNumber)&&Ut.push({range:Qt.originalRange,options:Qt.originalRange.isEmpty()&&It?Rt.wp:Rt.Zb}),ct.lineRangeMapping.modified.contains(Qt.modifiedRange.startLineNumber)&&Bt.push({range:Qt.modifiedRange,options:Qt.modifiedRange.isEmpty()&&It&&!Ht?Rt.GM:Rt.bk}),Ht){const fi=Je.model.original.getValueInRange(Qt.originalRange);Bt.push({range:Qt.modifiedRange,options:{description:"deleted-text",before:{content:fi,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(Ct)for(const ct of Ct.changes){const Ht=ct.original.toInclusiveRange();Ht&&Ut.push({range:Ht,options:jt?Rt.Ob:Rt.XT});const Qt=ct.modified.toInclusiveRange();Qt&&Bt.push({range:Qt,options:jt?Rt.Kl:Rt.Zw});for(const fi of ct.innerChanges||[])Ut.push({range:fi.originalRange,options:Rt.Zb}),Bt.push({range:fi.modifiedRange,options:Rt.bk})}const Kt=this._diffModel.read(ze).activeMovedText.read(ze);for(const ct of rt.movedTexts)Ut.push({range:ct.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(ct===Kt?" currentMove":""),blockPadding:[ji.movedCodeBlockPadding,0,ji.movedCodeBlockPadding,ji.movedCodeBlockPadding]}}),Bt.push({range:ct.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(ct===Kt?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:Ut,modifiedDecorations:Bt}}),this._register((0,R.pY)(this._editors.original,this._decorations.map(ze=>ze?.originalDecorations||[]))),this._register((0,R.pY)(this._editors.modified,this._decorations.map(ze=>ze?.modifiedDecorations||[])))}}var Dn=c(21594);class Mi{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(_e,ue){this._options=_e,this.dimensions=ue,this.sashLeft=(0,O.dQ)(this,Ee=>{const Ie=this._sashRatio.read(Ee)??this._options.splitViewDefaultRatio.read(Ee);return this._computeSashLeft(Ie,Ee)},(Ee,Ie)=>{const ze=this.dimensions.width.get();this._sashRatio.set(Ee/ze,Ie)}),this._sashRatio=(0,w.FY)(this,void 0)}_computeSashLeft(_e,ue){const Ee=this.dimensions.width.read(ue),Ie=Math.floor(this._options.splitViewDefaultRatio.read(ue)*Ee),ze=this._options.enableSplitViewResizing.read(ue)?Math.floor(_e*Ee):Ie,Je=100;return Ee<=Je*2?Ie:ze<Je?Je:ze>Ee-Je?Ee-Je:ze}}class Zn extends M.jG{constructor(_e,ue,Ee,Ie,ze,Je){super(),this._domNode=_e,this._dimensions=ue,this._enabled=Ee,this._boundarySashes=Ie,this.sashLeft=ze,this._resetSash=Je,this._sash=this._register(new Dn.m(this._domNode,{getVerticalSashTop:rt=>0,getVerticalSashLeft:rt=>this.sashLeft.get(),getVerticalSashHeight:rt=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(rt=>{this.sashLeft.set(this._startSashPosition+(rt.currentX-rt.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register((0,w.fm)(rt=>{const Ct=this._boundarySashes.read(rt);Ct&&(this._sash.orthogonalEndSash=Ct.bottom)})),this._register((0,w.fm)(rt=>{const Ct=this._enabled.read(rt);this._sash.state=Ct?3:0,this.sashLeft.read(rt),this._dimensions.height.read(rt),this._sash.layout()}))}}class us extends M.jG{constructor(_e,ue,Ee){super(),this._editor=_e,this._domNode=ue,this.itemProvider=Ee,this.scrollTop=(0,w.y0)(this,this._editor.onDidScrollChange,Je=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(Je=>Je===0),this.modelAttached=(0,w.y0)(this,this._editor.onDidChangeModel,Je=>this._editor.hasModel()),this.editorOnDidChangeViewZones=(0,w.yQ)("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=(0,w.yQ)("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=(0,w.Yd)("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const Ie=this._domNode.appendChild((0,u.h)("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),ze=new ResizeObserver(()=>{(0,w.Rn)(Je=>{this.domNodeSizeChanged.trigger(Je)})});ze.observe(this._domNode),this._register((0,M.s)(()=>ze.disconnect())),this._register((0,w.fm)(Je=>{Ie.className=this.isScrollTopZero.read(Je)?"":"scroll-decoration"})),this._register((0,w.fm)(Je=>this.render(Je)))}dispose(){super.dispose(),(0,u.Ln)(this._domNode)}render(_e){if(!this.modelAttached.read(_e))return;this.domNodeSizeChanged.read(_e),this.editorOnDidChangeViewZones.read(_e),this.editorOnDidContentSizeChange.read(_e);const ue=this.scrollTop.read(_e),Ee=this._editor.getVisibleRanges(),Ie=new Set(this.views.keys()),ze=$.L.ofStartAndLength(0,this._domNode.clientHeight);if(!ze.isEmpty)for(const Je of Ee){const rt=new W.M(Je.startLineNumber,Je.endLineNumber+1),Ct=this.itemProvider.getIntersectingGutterItems(rt,_e);(0,w.Rn)(jt=>{for(const It of Ct){if(!It.range.intersect(rt))continue;Ie.delete(It.id);let Ut=this.views.get(It.id);if(Ut)Ut.item.set(It,jt);else{const Ht=document.createElement("div");this._domNode.appendChild(Ht);const Qt=(0,w.FY)("item",It),fi=this.itemProvider.createView(Qt,Ht);Ut=new xs(Qt,fi,Ht),this.views.set(It.id,Ut)}const Bt=It.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(It.range.startLineNumber,!0)-ue:this._editor.getBottomForLineNumber(It.range.startLineNumber-1,!1)-ue,ct=(It.range.endLineNumberExclusive===1?Math.max(Bt,this._editor.getTopForLineNumber(It.range.startLineNumber,!1)-ue):Math.max(Bt,this._editor.getBottomForLineNumber(It.range.endLineNumberExclusive-1,!0)-ue))-Bt;Ut.domNode.style.top=`${Bt}px`,Ut.domNode.style.height=`${ct}px`,Ut.gutterItemView.layout($.L.ofStartAndLength(Bt,ct),ze)}})}for(const Je of Ie){const rt=this.views.get(Je);rt.gutterItemView.dispose(),rt.domNode.remove(),this.views.delete(Je)}}}class xs{constructor(_e,ue,Ee){this.item=_e,this.gutterItemView=ue,this.domNode=Ee}}var Wn=c(12634),Rn=c(86968),Bn=c(43228);class ws extends Rn.CO{constructor(_e){super(),this._textModel=_e}getValueOfRange(_e){return this._textModel.getValueInRange(_e)}get length(){const _e=this._textModel.getLineCount(),ue=this._textModel.getLineLength(_e);return new Bn.W(_e-1,ue)}}var Ln=c(52906),Qn=c(76222),hi=c(25894),vt=c(13199),ui=function(Et,_e,ue,Ee){var Ie=arguments.length,ze=Ie<3?_e:Ee===null?Ee=Object.getOwnPropertyDescriptor(_e,ue):Ee,Je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ze=Reflect.decorate(Et,_e,ue,Ee);else for(var rt=Et.length-1;rt>=0;rt--)(Je=Et[rt])&&(ze=(Ie<3?Je(ze):Ie>3?Je(_e,ue,ze):Je(_e,ue))||ze);return Ie>3&&ze&&Object.defineProperty(_e,ue,ze),ze},wt=function(Et,_e){return function(ue,Ee){_e(ue,Ee,Et)}};const In=[],Ki=35;let Tt=class extends M.jG{constructor(_e,ue,Ee,Ie,ze,Je,rt,Ct,jt){super(),this._diffModel=ue,this._editors=Ee,this._options=Ie,this._sashLayout=ze,this._boundarySashes=Je,this._instantiationService=rt,this._contextKeyService=Ct,this._menuService=jt,this._menu=this._register(this._menuService.createMenu(Qn.D8.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=(0,w.y0)(this,this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(It=>It.length>0),this._showSash=(0,w.un)(this,It=>this._options.renderSideBySide.read(It)&&this._hasActions.read(It)),this.width=(0,w.un)(this,It=>this._hasActions.read(It)?Ki:0),this.elements=(0,u.h)("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:Ki+"px"}},[]),this._currentDiff=(0,w.un)(this,It=>{const Ut=this._diffModel.read(It);if(!Ut)return;const Bt=Ut.diff.read(It)?.mappings,Kt=this._editors.modifiedCursor.read(It);if(Kt)return Bt?.find(ct=>ct.lineRangeMapping.modified.contains(Kt.lineNumber))}),this._selectedDiffs=(0,w.un)(this,It=>{const Bt=this._diffModel.read(It)?.diff.read(It);if(!Bt)return In;const Kt=this._editors.modifiedSelections.read(It);if(Kt.every(fi=>fi.isEmpty()))return In;const ct=new W.S(Kt.map(fi=>W.M.fromRangeInclusive(fi))),Qt=Bt.mappings.filter(fi=>fi.lineRangeMapping.innerChanges&&ct.intersects(fi.lineRangeMapping.modified)).map(fi=>({mapping:fi,rangeMappings:fi.lineRangeMapping.innerChanges.filter(en=>Kt.some(di=>q.Q.areIntersecting(en.modifiedRange,di)))}));return Qt.length===0||Qt.every(fi=>fi.rangeMappings.length===0)?In:Qt}),this._register((0,R.$y)(_e,this.elements.root)),this._register((0,u.ko)(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register((0,R.AV)(this.elements.root,{display:this._hasActions.map(It=>It?"block":"none")})),(0,O.a0)(this,It=>this._showSash.read(It)?new Zn(_e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,(0,O.dQ)(this,Bt=>this._sashLayout.sashLeft.read(Bt)-Ki,(Bt,Kt)=>this._sashLayout.sashLeft.set(Bt+Ki,Kt)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store),this._register(new us(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(It,Ut)=>{const Bt=this._diffModel.read(Ut);if(!Bt)return[];const Kt=Bt.diff.read(Ut);if(!Kt)return[];const ct=this._selectedDiffs.read(Ut);if(ct.length>0){const Qt=ne.wm.fromRangeMappings(ct.flatMap(fi=>fi.rangeMappings));return[new $i(Qt,!0,Qn.D8.DiffEditorSelectionToolbar,void 0,Bt.model.original.uri,Bt.model.modified.uri)]}const Ht=this._currentDiff.read(Ut);return Kt.mappings.map(Qt=>new $i(Qt.lineRangeMapping.withInnerChangesFromLineRanges(),Qt.lineRangeMapping===Ht?.lineRangeMapping,Qn.D8.DiffEditorHunkToolbar,void 0,Bt.model.original.uri,Bt.model.modified.uri))},createView:(It,Ut)=>this._instantiationService.createInstance(St,It,Ut,this)})),this._register((0,u.ko)(this.elements.gutter,u.Bx.MOUSE_WHEEL,It=>{this._editors.modified.getOption(104).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(It)},{passive:!1}))}computeStagedValue(_e){const ue=_e.innerChanges??[],Ee=new ws(this._editors.modifiedModel.get()),Ie=new ws(this._editors.original.getModel());return new Rn.mF(ue.map(rt=>rt.toTextEdit(Ee))).apply(Ie)}layout(_e){this.elements.gutter.style.left=_e+"px"}};Tt=ui([wt(6,N._Y),wt(7,hi.fN),wt(8,Qn.ez)],Tt);class $i{constructor(_e,ue,Ee,Ie,ze,Je){this.mapping=_e,this.showAlways=ue,this.menuId=Ee,this.rangeOverride=Ie,this.originalUri=ze,this.modifiedUri=Je}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let St=class extends M.jG{constructor(_e,ue,Ee,Ie){super(),this._item=_e,this._elements=(0,u.h)("div.gutterItem",{style:{height:"20px",width:"34px"}},[(0,u.h)("div.background@background",{},[]),(0,u.h)("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,Je=>Je.showAlways),this._menuId=this._item.map(this,Je=>Je.menuId),this._isSmall=(0,w.FY)(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const ze=this._register(Ie.createInstance(vt.fO,"element",!0,{position:{hoverPosition:1}}));this._register((0,R.rX)(ue,this._elements.root)),this._register((0,w.fm)(Je=>{const rt=this._showAlways.read(Je);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",rt),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register((0,w.yC)((Je,rt)=>{this._elements.buttons.replaceChildren();const Ct=rt.add(Ie.createInstance(Ln.m,this._elements.buttons,this._menuId.read(Je),{orientation:1,hoverDelegate:ze,toolbarOptions:{primaryGroup:jt=>jt.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(Je)?1:3},hiddenItemStrategy:0,actionRunner:new Wn.I(()=>{const jt=this._item.get(),It=jt.mapping;return{mapping:It,originalWithModifiedChanges:Ee.computeStagedValue(It),originalUri:jt.originalUri,modifiedUri:jt.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));rt.add(Ct.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(_e,ue){this._lastItemRange=_e,this._lastViewRange=ue;let Ee=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&_e.length<30,void 0),Ee=this._elements.buttons.clientHeight;const Ie=_e.length/2-Ee/2,ze=Ee;let Je=_e.start+Ie;const rt=$.L.tryCreate(ze,ue.endExclusive-ze-Ee),Ct=$.L.tryCreate(_e.start+ze,_e.endExclusive-Ee-ze);Ct&&rt&&Ct.start<Ct.endExclusive&&(Je=rt.clip(Je),Je=Ct.clip(Je)),this._elements.buttons.style.top=`${Je-_e.start}px`}};St=ui([wt(3,N._Y)],St);var yt=c(34596),Yt=c(53784),ii=c(70033),Li=c(76322),Bi=c(19867),Pi=c(41403),un=function(Et,_e,ue,Ee){var Ie=arguments.length,ze=Ie<3?_e:Ee===null?Ee=Object.getOwnPropertyDescriptor(_e,ue):Ee,Je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ze=Reflect.decorate(Et,_e,ue,Ee);else for(var rt=Et.length-1;rt>=0;rt--)(Je=Et[rt])&&(ze=(Ie<3?Je(ze):Ie>3?Je(_e,ue,ze):Je(_e,ue))||ze);return Ie>3&&ze&&Object.defineProperty(_e,ue,ze),ze},Cn=function(Et,_e){return function(ue,Ee){_e(ue,Ee,Et)}},sn;let yn=class extends M.jG{static{sn=this}static{this.ONE_OVERVIEW_WIDTH=15}static{this.ENTIRE_DIFF_OVERVIEW_WIDTH=this.ONE_OVERVIEW_WIDTH*2}constructor(_e,ue,Ee,Ie,ze,Je,rt){super(),this._editors=_e,this._rootElement=ue,this._diffModel=Ee,this._rootWidth=Ie,this._rootHeight=ze,this._modifiedEditorLayoutInfo=Je,this._themeService=rt,this.width=sn.ENTIRE_DIFF_OVERVIEW_WIDTH;const Ct=(0,w.y0)(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),jt=(0,w.un)(Bt=>{const Kt=Ct.read(Bt),ct=Kt.getColor(Bi.ld8)||(Kt.getColor(Bi.Gj6)||Bi.EY1).transparent(2),Ht=Kt.getColor(Bi.$BZ)||(Kt.getColor(Bi.GNm)||Bi.ZEf).transparent(2);return{insertColor:ct,removeColor:Ht}}),It=(0,Yt.Z)(document.createElement("div"));It.setClassName("diffViewport"),It.setPosition("absolute");const Ut=(0,u.h)("div.diffOverview",{style:{position:"absolute",top:"0px",width:sn.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register((0,R.rX)(Ut,It.domNode)),this._register((0,u.b2)(Ut,u.Bx.POINTER_DOWN,Bt=>{this._editors.modified.delegateVerticalScrollbarPointerDown(Bt)})),this._register((0,u.ko)(Ut,u.Bx.MOUSE_WHEEL,Bt=>{this._editors.modified.delegateScrollFromMouseWheelEvent(Bt)},{passive:!1})),this._register((0,R.rX)(this._rootElement,Ut)),this._register((0,w.yC)((Bt,Kt)=>{const ct=this._diffModel.read(Bt),Ht=this._editors.original.createOverviewRuler("original diffOverviewRuler");Ht&&(Kt.add(Ht),Kt.add((0,R.rX)(Ut,Ht.getDomNode())));const Qt=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(Qt&&(Kt.add(Qt),Kt.add((0,R.rX)(Ut,Qt.getDomNode()))),!Ht||!Qt)return;const fi=(0,w.yQ)("viewZoneChanged",this._editors.original.onDidChangeViewZones),en=(0,w.yQ)("viewZoneChanged",this._editors.modified.onDidChangeViewZones),di=(0,w.yQ)("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),$t=(0,w.yQ)("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);Kt.add((0,w.fm)(vi=>{fi.read(vi),en.read(vi),di.read(vi),$t.read(vi);const Hi=jt.read(vi),Ui=ct?.diff.read(vi)?.mappings;function Yn(zn,Hn,ds){const Vi=ds._getViewModel();return Vi?zn.filter(mn=>mn.length>0).map(mn=>{const Ri=Vi.coordinatesConverter.convertModelPositionToViewPosition(new Q.y(mn.startLineNumber,1)),gs=Vi.coordinatesConverter.convertModelPositionToViewPosition(new Q.y(mn.endLineNumberExclusive,1)),zs=gs.lineNumber-Ri.lineNumber;return new Li.iE(Ri.lineNumber,gs.lineNumber,zs,Hn.toString())}):[]}const En=Yn((Ui||[]).map(zn=>zn.lineRangeMapping.original),Hi.removeColor,this._editors.original),ys=Yn((Ui||[]).map(zn=>zn.lineRangeMapping.modified),Hi.insertColor,this._editors.modified);Ht?.setZones(En),Qt?.setZones(ys)})),Kt.add((0,w.fm)(vi=>{const Hi=this._rootHeight.read(vi),Ui=this._rootWidth.read(vi),Yn=this._modifiedEditorLayoutInfo.read(vi);if(Yn){const En=sn.ENTIRE_DIFF_OVERVIEW_WIDTH-2*sn.ONE_OVERVIEW_WIDTH;Ht.setLayout({top:0,height:Hi,right:En+sn.ONE_OVERVIEW_WIDTH,width:sn.ONE_OVERVIEW_WIDTH}),Qt.setLayout({top:0,height:Hi,right:0,width:sn.ONE_OVERVIEW_WIDTH});const ys=this._editors.modifiedScrollTop.read(vi),zn=this._editors.modifiedScrollHeight.read(vi),Hn=this._editors.modified.getOption(104),ds=new ii.m(Hn.verticalHasArrows?Hn.arrowSize:0,Hn.verticalScrollbarSize,0,Yn.height,zn,ys);It.setTop(ds.getSliderPosition()),It.setHeight(ds.getSliderSize())}else It.setTop(0),It.setHeight(0);Ut.style.height=Hi+"px",Ut.style.left=Ui-sn.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",It.setWidth(sn.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}};yn=sn=un([Cn(6,Pi.Gy)],yn);var fs=c(17577),cs=c(26342);const _s=[];class Mn extends M.jG{constructor(_e,ue,Ee,Ie){super(),this._editors=_e,this._diffModel=ue,this._options=Ee,this._widget=Ie,this._selectedDiffs=(0,w.un)(this,ze=>{const rt=this._diffModel.read(ze)?.diff.read(ze);if(!rt)return _s;const Ct=this._editors.modifiedSelections.read(ze);if(Ct.every(Bt=>Bt.isEmpty()))return _s;const jt=new W.S(Ct.map(Bt=>W.M.fromRangeInclusive(Bt))),Ut=rt.mappings.filter(Bt=>Bt.lineRangeMapping.innerChanges&&jt.intersects(Bt.lineRangeMapping.modified)).map(Bt=>({mapping:Bt,rangeMappings:Bt.lineRangeMapping.innerChanges.filter(Kt=>Ct.some(ct=>q.Q.areIntersecting(Kt.modifiedRange,ct)))}));return Ut.length===0||Ut.every(Bt=>Bt.rangeMappings.length===0)?_s:Ut}),this._register((0,w.yC)((ze,Je)=>{if(!this._options.shouldRenderOldRevertArrows.read(ze))return;const rt=this._diffModel.read(ze),Ct=rt?.diff.read(ze);if(!rt||!Ct||rt.movedTextToCompare.read(ze))return;const jt=[],It=this._selectedDiffs.read(ze),Ut=new Set(It.map(Bt=>Bt.mapping));if(It.length>0){const Bt=this._editors.modifiedSelections.read(ze),Kt=Je.add(new vs(Bt[Bt.length-1].positionLineNumber,this._widget,It.flatMap(ct=>ct.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(Kt),jt.push(Kt)}for(const Bt of Ct.mappings)if(!Ut.has(Bt)&&!Bt.lineRangeMapping.modified.isEmpty&&Bt.lineRangeMapping.innerChanges){const Kt=Je.add(new vs(Bt.lineRangeMapping.modified.startLineNumber,this._widget,Bt.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(Kt),jt.push(Kt)}Je.add((0,M.s)(()=>{for(const Bt of jt)this._editors.modified.removeGlyphMarginWidget(Bt)}))}))}}class vs extends M.jG{static{this.counter=0}getId(){return this._id}constructor(_e,ue,Ee,Ie){super(),this._lineNumber=_e,this._widget=ue,this._diffs=Ee,this._revertSelection=Ie,this._id=`revertButton${vs.counter++}`,this._domNode=(0,u.h)("div.revertButton",{title:this._revertSelection?(0,K.kg)("revertSelectedChanges","Revert Selected Changes"):(0,K.kg)("revertChange","Revert Change")},[(0,fs.s)(D.W.arrowRight)]).root,this._register((0,u.ko)(this._domNode,u.Bx.MOUSE_DOWN,ze=>{ze.button!==2&&(ze.stopPropagation(),ze.preventDefault())})),this._register((0,u.ko)(this._domNode,u.Bx.MOUSE_UP,ze=>{ze.stopPropagation(),ze.preventDefault()})),this._register((0,u.ko)(this._domNode,u.Bx.CLICK,ze=>{this._diffs instanceof ne.WL?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),ze.stopPropagation(),ze.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:cs.ZS.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}}var Xi=c(16612),Fi=c(74719),os=c(89464),no=c(68624),so=c(67933),co=c(49349),$n=c(87386),Kn=function(Et,_e,ue,Ee){var Ie=arguments.length,ze=Ie<3?_e:Ee===null?Ee=Object.getOwnPropertyDescriptor(_e,ue):Ee,Je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ze=Reflect.decorate(Et,_e,ue,Ee);else for(var rt=Et.length-1;rt>=0;rt--)(Je=Et[rt])&&(ze=(Ie<3?Je(ze):Ie>3?Je(_e,ue,ze):Je(_e,ue))||ze);return Ie>3&&ze&&Object.defineProperty(_e,ue,ze),ze},Xn=function(Et,_e){return function(ue,Ee){_e(ue,Ee,Et)}};let zt=class extends M.jG{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(_e,ue,Ee,Ie,ze,Je,rt){super(),this.originalEditorElement=_e,this.modifiedEditorElement=ue,this._options=Ee,this._argCodeEditorWidgetOptions=Ie,this._createInnerEditor=ze,this._instantiationService=Je,this._keybindingService=rt,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new P.vl),this.modifiedScrollTop=(0,w.y0)(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=(0,w.y0)(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedObs=(0,co.Ud)(this.modified),this.originalObs=(0,co.Ud)(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=(0,w.y0)(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]),this.modifiedCursor=(0,w.C)({owner:this,equalsFn:Q.y.equals},Ct=>this.modifiedSelections.read(Ct)[0]?.getPosition()??new Q.y(1,1)),this.originalCursor=(0,w.y0)(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new Q.y(1,1)),this._argCodeEditorWidgetOptions=null,this._register((0,w.Y)({createEmptyChangeSummary:()=>({}),handleChange:(Ct,jt)=>(Ct.didChange(Ee.editorOptions)&&Object.assign(jt,Ct.change.changedOptions),!0)},(Ct,jt)=>{Ee.editorOptions.read(Ct),this._options.renderSideBySide.read(Ct),this.modified.updateOptions(this._adjustOptionsForRightHandSide(Ct,jt)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(Ct,jt))}))}_createLeftHandSideEditor(_e,ue){const Ee=this._adjustOptionsForLeftHandSide(void 0,_e),Ie=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,Ee,ue);return Ie.setContextValue("isInDiffLeftEditor",!0),Ie}_createRightHandSideEditor(_e,ue){const Ee=this._adjustOptionsForRightHandSide(void 0,_e),Ie=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,Ee,ue);return Ie.setContextValue("isInDiffRightEditor",!0),Ie}_constructInnerEditor(_e,ue,Ee,Ie){const ze=this._createInnerEditor(_e,ue,Ee,Ie);return this._register(ze.onDidContentSizeChange(Je=>{const rt=this.original.getContentWidth()+this.modified.getContentWidth()+yn.ENTIRE_DIFF_OVERVIEW_WIDTH,Ct=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:Ct,contentWidth:rt,contentHeightChanged:Je.contentHeightChanged,contentWidthChanged:Je.contentWidthChanged})})),ze}_adjustOptionsForLeftHandSide(_e,ue){const Ee=this._adjustOptionsForSubEditor(ue);return this._options.renderSideBySide.get()?(Ee.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},Ee.wordWrapOverride1=this._options.diffWordWrap.get()):(Ee.wordWrapOverride1="off",Ee.wordWrapOverride2="off",Ee.stickyScroll={enabled:!1},Ee.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),Ee.glyphMargin=this._options.renderSideBySide.get(),ue.originalAriaLabel&&(Ee.ariaLabel=ue.originalAriaLabel),Ee.ariaLabel=this._updateAriaLabel(Ee.ariaLabel),Ee.readOnly=!this._options.originalEditable.get(),Ee.dropIntoEditor={enabled:!Ee.readOnly},Ee.extraEditorClassName="original-in-monaco-diff-editor",Ee}_adjustOptionsForRightHandSide(_e,ue){const Ee=this._adjustOptionsForSubEditor(ue);return ue.modifiedAriaLabel&&(Ee.ariaLabel=ue.modifiedAriaLabel),Ee.ariaLabel=this._updateAriaLabel(Ee.ariaLabel),Ee.wordWrapOverride1=this._options.diffWordWrap.get(),Ee.revealHorizontalRightPadding=z.qB.revealHorizontalRightPadding.defaultValue+yn.ENTIRE_DIFF_OVERVIEW_WIDTH,Ee.scrollbar.verticalHasArrows=!1,Ee.extraEditorClassName="modified-in-monaco-diff-editor",Ee}_adjustOptionsForSubEditor(_e){const ue={..._e,dimension:{height:0,width:0}};return ue.inDiffEditor=!0,ue.automaticLayout=!1,ue.scrollbar={...ue.scrollbar||{}},ue.folding=!1,ue.codeLens=this._options.diffCodeLens.get(),ue.fixedOverflowWidgets=!0,ue.minimap={...ue.minimap||{}},ue.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?ue.stickyScroll={enabled:!1}:ue.stickyScroll=this._options.editorOptions.get().stickyScroll,ue}_updateAriaLabel(_e){_e||(_e="");const ue=(0,K.kg)("diff-aria-navigation-tip"," use {0} to open the accessibility help.",this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp")?.getAriaLabel());return this._options.accessibilityVerbose.get()?_e+ue:_e?_e.replaceAll(ue,""):""}};zt=Kn([Xn(5,N._Y),Xn(6,$n.b)],zt);class le extends M.jG{constructor(){super(...arguments),this._id=++le.idCounter,this._onDidDispose=this._register(new P.vl),this.onDidDispose=this._onDidDispose.event}static{this.idCounter=0}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(_e){return this._targetEditor.getVisibleColumnFromPosition(_e)}getPosition(){return this._targetEditor.getPosition()}setPosition(_e,ue="api"){this._targetEditor.setPosition(_e,ue)}revealLine(_e,ue=0){this._targetEditor.revealLine(_e,ue)}revealLineInCenter(_e,ue=0){this._targetEditor.revealLineInCenter(_e,ue)}revealLineInCenterIfOutsideViewport(_e,ue=0){this._targetEditor.revealLineInCenterIfOutsideViewport(_e,ue)}revealLineNearTop(_e,ue=0){this._targetEditor.revealLineNearTop(_e,ue)}revealPosition(_e,ue=0){this._targetEditor.revealPosition(_e,ue)}revealPositionInCenter(_e,ue=0){this._targetEditor.revealPositionInCenter(_e,ue)}revealPositionInCenterIfOutsideViewport(_e,ue=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(_e,ue)}revealPositionNearTop(_e,ue=0){this._targetEditor.revealPositionNearTop(_e,ue)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(_e,ue="api"){this._targetEditor.setSelection(_e,ue)}setSelections(_e,ue="api"){this._targetEditor.setSelections(_e,ue)}revealLines(_e,ue,Ee=0){this._targetEditor.revealLines(_e,ue,Ee)}revealLinesInCenter(_e,ue,Ee=0){this._targetEditor.revealLinesInCenter(_e,ue,Ee)}revealLinesInCenterIfOutsideViewport(_e,ue,Ee=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(_e,ue,Ee)}revealLinesNearTop(_e,ue,Ee=0){this._targetEditor.revealLinesNearTop(_e,ue,Ee)}revealRange(_e,ue=0,Ee=!1,Ie=!0){this._targetEditor.revealRange(_e,ue,Ee,Ie)}revealRangeInCenter(_e,ue=0){this._targetEditor.revealRangeInCenter(_e,ue)}revealRangeInCenterIfOutsideViewport(_e,ue=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(_e,ue)}revealRangeNearTop(_e,ue=0){this._targetEditor.revealRangeNearTop(_e,ue)}revealRangeNearTopIfOutsideViewport(_e,ue=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(_e,ue)}revealRangeAtTop(_e,ue=0){this._targetEditor.revealRangeAtTop(_e,ue)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(_e,ue,Ee){this._targetEditor.trigger(_e,ue,Ee)}createDecorationsCollection(_e){return this._targetEditor.createDecorationsCollection(_e)}changeDecorations(_e){return this._targetEditor.changeDecorations(_e)}}var Be=c(80129),ht=c(13522),Ft=c(73240),Ot=function(Et,_e,ue,Ee){var Ie=arguments.length,ze=Ie<3?_e:Ee===null?Ee=Object.getOwnPropertyDescriptor(_e,ue):Ee,Je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ze=Reflect.decorate(Et,_e,ue,Ee);else for(var rt=Et.length-1;rt>=0;rt--)(Je=Et[rt])&&(ze=(Ie<3?Je(ze):Ie>3?Je(_e,ue,ze):Je(_e,ue))||ze);return Ie>3&&ze&&Object.defineProperty(_e,ue,ze),ze},qt=function(Et,_e){return function(ue,Ee){_e(ue,Ee,Et)}};let Si=class{get editorOptions(){return this._options}constructor(_e,ue){this._accessibilityService=ue,this._diffEditorWidth=(0,w.FY)(this,0),this._screenReaderMode=(0,w.y0)(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=(0,w.un)(this,Ie=>this._options.read(Ie).renderSideBySide&&this._diffEditorWidth.read(Ie)<=this._options.read(Ie).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=(0,w.un)(this,Ie=>this._options.read(Ie).renderOverviewRuler),this.renderSideBySide=(0,w.un)(this,Ie=>this.compactMode.read(Ie)&&this.shouldRenderInlineViewInSmartMode.read(Ie)?!1:this._options.read(Ie).renderSideBySide&&!(this._options.read(Ie).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(Ie)&&!this._screenReaderMode.read(Ie))),this.readOnly=(0,w.un)(this,Ie=>this._options.read(Ie).readOnly),this.shouldRenderOldRevertArrows=(0,w.un)(this,Ie=>!(!this._options.read(Ie).renderMarginRevertIcon||!this.renderSideBySide.read(Ie)||this.readOnly.read(Ie)||this.shouldRenderGutterMenu.read(Ie))),this.shouldRenderGutterMenu=(0,w.un)(this,Ie=>this._options.read(Ie).renderGutterMenu),this.renderIndicators=(0,w.un)(this,Ie=>this._options.read(Ie).renderIndicators),this.enableSplitViewResizing=(0,w.un)(this,Ie=>this._options.read(Ie).enableSplitViewResizing),this.splitViewDefaultRatio=(0,w.un)(this,Ie=>this._options.read(Ie).splitViewDefaultRatio),this.ignoreTrimWhitespace=(0,w.un)(this,Ie=>this._options.read(Ie).ignoreTrimWhitespace),this.maxComputationTimeMs=(0,w.un)(this,Ie=>this._options.read(Ie).maxComputationTime),this.showMoves=(0,w.un)(this,Ie=>this._options.read(Ie).experimental.showMoves&&this.renderSideBySide.read(Ie)),this.isInEmbeddedEditor=(0,w.un)(this,Ie=>this._options.read(Ie).isInEmbeddedEditor),this.diffWordWrap=(0,w.un)(this,Ie=>this._options.read(Ie).diffWordWrap),this.originalEditable=(0,w.un)(this,Ie=>this._options.read(Ie).originalEditable),this.diffCodeLens=(0,w.un)(this,Ie=>this._options.read(Ie).diffCodeLens),this.accessibilityVerbose=(0,w.un)(this,Ie=>this._options.read(Ie).accessibilityVerbose),this.diffAlgorithm=(0,w.un)(this,Ie=>this._options.read(Ie).diffAlgorithm),this.showEmptyDecorations=(0,w.un)(this,Ie=>this._options.read(Ie).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=(0,w.un)(this,Ie=>this._options.read(Ie).onlyShowAccessibleDiffViewer),this.compactMode=(0,w.un)(this,Ie=>this._options.read(Ie).compactMode),this.trueInlineDiffRenderingEnabled=(0,w.un)(this,Ie=>this._options.read(Ie).experimental.useTrueInlineView),this.useTrueInlineDiffRendering=(0,w.un)(this,Ie=>!this.renderSideBySide.read(Ie)&&this.trueInlineDiffRenderingEnabled.read(Ie)),this.hideUnchangedRegions=(0,w.un)(this,Ie=>this._options.read(Ie).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=(0,w.un)(this,Ie=>this._options.read(Ie).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=(0,w.un)(this,Ie=>this._options.read(Ie).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=(0,w.un)(this,Ie=>this._options.read(Ie).hideUnchangedRegions.minimumLineCount),this._model=(0,w.FY)(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,Ie=>(0,Be.t)(this,ze=>{const Je=Ie?.diff.read(ze);return Je?mi(Je,this.trueInlineDiffRenderingEnabled.read(ze)):void 0})).flatten().map(this,Ie=>!!Ie),this.inlineViewHideOriginalLineNumbers=this.compactMode;const Ee={..._e,...Ei(_e,ht.q)};this._options=(0,w.FY)(this,Ee)}updateOptions(_e){const ue=Ei(_e,this._options.get()),Ee={...this._options.get(),..._e,...ue};this._options.set(Ee,void 0,{changedOptions:_e})}setWidth(_e){this._diffEditorWidth.set(_e,void 0)}setModel(_e){this._model.set(_e,void 0)}};Si=Ot([qt(1,Ft.j)],Si);function mi(Et,_e){return Et.mappings.every(ue=>qi(ue.lineRangeMapping)||Wi(ue.lineRangeMapping)||_e&&Ci(ue.lineRangeMapping))}function qi(Et){return Et.original.length===0}function Wi(Et){return Et.modified.length===0}function Ei(Et,_e){return{enableSplitViewResizing:(0,z.zM)(Et.enableSplitViewResizing,_e.enableSplitViewResizing),splitViewDefaultRatio:(0,z.ls)(Et.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:(0,z.zM)(Et.renderSideBySide,_e.renderSideBySide),renderMarginRevertIcon:(0,z.zM)(Et.renderMarginRevertIcon,_e.renderMarginRevertIcon),maxComputationTime:(0,z.wA)(Et.maxComputationTime,_e.maxComputationTime,0,1073741824),maxFileSize:(0,z.wA)(Et.maxFileSize,_e.maxFileSize,0,1073741824),ignoreTrimWhitespace:(0,z.zM)(Et.ignoreTrimWhitespace,_e.ignoreTrimWhitespace),renderIndicators:(0,z.zM)(Et.renderIndicators,_e.renderIndicators),originalEditable:(0,z.zM)(Et.originalEditable,_e.originalEditable),diffCodeLens:(0,z.zM)(Et.diffCodeLens,_e.diffCodeLens),renderOverviewRuler:(0,z.zM)(Et.renderOverviewRuler,_e.renderOverviewRuler),diffWordWrap:(0,z.O4)(Et.diffWordWrap,_e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:(0,z.O4)(Et.diffAlgorithm,_e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:(0,z.zM)(Et.accessibilityVerbose,_e.accessibilityVerbose),experimental:{showMoves:(0,z.zM)(Et.experimental?.showMoves,_e.experimental.showMoves),showEmptyDecorations:(0,z.zM)(Et.experimental?.showEmptyDecorations,_e.experimental.showEmptyDecorations),useTrueInlineView:(0,z.zM)(Et.experimental?.useTrueInlineView,_e.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:(0,z.zM)(Et.hideUnchangedRegions?.enabled??Et.experimental?.collapseUnchangedRegions,_e.hideUnchangedRegions.enabled),contextLineCount:(0,z.wA)(Et.hideUnchangedRegions?.contextLineCount,_e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:(0,z.wA)(Et.hideUnchangedRegions?.minimumLineCount,_e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:(0,z.wA)(Et.hideUnchangedRegions?.revealLineCount,_e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:(0,z.zM)(Et.isInEmbeddedEditor,_e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:(0,z.zM)(Et.onlyShowAccessibleDiffViewer,_e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:(0,z.wA)(Et.renderSideBySideInlineBreakpoint,_e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:(0,z.zM)(Et.useInlineViewWhenSpaceIsLimited,_e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:(0,z.zM)(Et.renderGutterMenu,_e.renderGutterMenu),compactMode:(0,z.zM)(Et.compactMode,_e.compactMode)}}var Qi=function(Et,_e,ue,Ee){var Ie=arguments.length,ze=Ie<3?_e:Ee===null?Ee=Object.getOwnPropertyDescriptor(_e,ue):Ee,Je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ze=Reflect.decorate(Et,_e,ue,Ee);else for(var rt=Et.length-1;rt>=0;rt--)(Je=Et[rt])&&(ze=(Ie<3?Je(ze):Ie>3?Je(_e,ue,ze):Je(_e,ue))||ze);return Ie>3&&ze&&Object.defineProperty(_e,ue,ze),ze},on=function(Et,_e){return function(ue,Ee){_e(ue,Ee,Et)}};let an=class extends le{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(_e,ue,Ee,Ie,ze,Je,rt,Ct){super(),this._domElement=_e,this._parentContextKeyService=Ie,this._parentInstantiationService=ze,this._accessibilitySignalService=rt,this._editorProgressService=Ct,this.elements=(0,u.h)("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[(0,u.h)("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),(0,u.h)("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),(0,u.h)("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register((0,w.X2)(this,void 0)),this._diffModel=(0,w.un)(this,$t=>this._diffModelSrc.read($t)?.object),this.onDidChangeModel=P.Jh.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new no.a([hi.fN,this._contextKeyService]))),this._boundarySashes=(0,w.FY)(this,void 0),this._accessibleDiffViewerShouldBeVisible=(0,w.FY)(this,!1),this._accessibleDiffViewerVisible=(0,w.un)(this,$t=>this._options.onlyShowAccessibleDiffViewer.read($t)?!0:this._accessibleDiffViewerShouldBeVisible.read($t)),this._movedBlocksLinesPart=(0,w.FY)(this,void 0),this._layoutInfo=(0,w.un)(this,$t=>{const vi=this._rootSizeObserver.width.read($t),Hi=this._rootSizeObserver.height.read($t);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=Hi+"px";const Ui=this._sash.read($t),Yn=this._gutter.read($t),En=Yn?.width.read($t)??0,ys=this._overviewRulerPart.read($t)?.width??0;let zn,Hn,ds,Vi,mn;if(!!Ui){const gs=Ui.sashLeft.read($t),zs=this._movedBlocksLinesPart.read($t)?.width.read($t)??0;zn=0,Hn=gs-En-zs,mn=gs-En,ds=gs,Vi=vi-ds-ys}else{mn=0;const gs=this._options.inlineViewHideOriginalLineNumbers.read($t);zn=En,gs?Hn=0:Hn=Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read($t)),ds=En+Hn,Vi=vi-ds-ys}return this.elements.original.style.left=zn+"px",this.elements.original.style.width=Hn+"px",this._editors.original.layout({width:Hn,height:Hi},!0),Yn?.layout(mn),this.elements.modified.style.left=ds+"px",this.elements.modified.style.width=Vi+"px",this._editors.modified.layout({width:Vi,height:Hi},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map(($t,vi)=>$t?.diff.read(vi)),this.onDidUpdateDiff=P.Jh.fromObservableLight(this._diffValue),Je.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register((0,M.s)(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new R.pN(this.elements.root,ue.dimension)),this._rootSizeObserver.setAutomaticLayout(ue.automaticLayout??!1),this._options=this._instantiationService.createInstance(Si,ue),this._register((0,w.fm)($t=>{this._options.setWidth(this._rootSizeObserver.width.read($t))})),this._contextKeyService.createKey(os.R.isEmbeddedDiffEditor.key,!1),this._register((0,Xi.w)(os.R.isEmbeddedDiffEditor,this._contextKeyService,$t=>this._options.isInEmbeddedEditor.read($t))),this._register((0,Xi.w)(os.R.comparingMovedCode,this._contextKeyService,$t=>!!this._diffModel.read($t)?.movedTextToCompare.read($t))),this._register((0,Xi.w)(os.R.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,$t=>this._options.couldShowInlineViewBecauseOfSize.read($t))),this._register((0,Xi.w)(os.R.diffEditorInlineMode,this._contextKeyService,$t=>!this._options.renderSideBySide.read($t))),this._register((0,Xi.w)(os.R.hasChanges,this._contextKeyService,$t=>(this._diffModel.read($t)?.diff.read($t)?.mappings.length??0)>0)),this._editors=this._register(this._instantiationService.createInstance(zt,this.elements.original,this.elements.modified,this._options,Ee,($t,vi,Hi,Ui)=>this._createInnerEditor($t,vi,Hi,Ui))),this._register((0,Xi.w)(os.R.diffEditorOriginalWritable,this._contextKeyService,$t=>this._options.originalEditable.read($t))),this._register((0,Xi.w)(os.R.diffEditorModifiedWritable,this._contextKeyService,$t=>!this._options.readOnly.read($t))),this._register((0,Xi.w)(os.R.diffEditorOriginalUri,this._contextKeyService,$t=>this._diffModel.read($t)?.model.original.uri.toString()??"")),this._register((0,Xi.w)(os.R.diffEditorModifiedUri,this._contextKeyService,$t=>this._diffModel.read($t)?.model.modified.uri.toString()??"")),this._overviewRulerPart=(0,O.a0)(this,$t=>this._options.renderOverviewRuler.read($t)?this._instantiationService.createInstance((0,pe.b)(yn,$t),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(vi=>vi.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const jt={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map(($t,vi)=>$t-(this._overviewRulerPart.read(vi)?.width??0))};this._sashLayout=new Mi(this._options,jt),this._sash=(0,O.a0)(this,$t=>{const vi=this._options.renderSideBySide.read($t);return this.elements.root.classList.toggle("side-by-side",vi),vi?new Zn(this.elements.root,jt,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const It=(0,O.a0)(this,$t=>this._instantiationService.createInstance((0,pe.b)(yt.N,$t),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);(0,O.a0)(this,$t=>this._instantiationService.createInstance((0,pe.b)(nn,$t),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const Ut=new Set,Bt=new Set;let Kt=!1;const ct=(0,O.a0)(this,$t=>this._instantiationService.createInstance((0,pe.b)(gt,$t),(0,u.zk)(this._domElement),this._editors,this._diffModel,this._options,this,()=>Kt||It.get().isUpdatingHiddenAreas,Ut,Bt)).recomputeInitiallyAndOnChange(this._store),Ht=(0,w.un)(this,$t=>{const vi=ct.read($t).viewZones.read($t).orig,Hi=It.read($t).viewZones.read($t).origViewZones;return vi.concat(Hi)}),Qt=(0,w.un)(this,$t=>{const vi=ct.read($t).viewZones.read($t).mod,Hi=It.read($t).viewZones.read($t).modViewZones;return vi.concat(Hi)});this._register((0,R.Vs)(this._editors.original,Ht,$t=>{Kt=$t},Ut));let fi;this._register((0,R.Vs)(this._editors.modified,Qt,$t=>{Kt=$t,Kt?fi=b.D.capture(this._editors.modified):(fi?.restore(this._editors.modified),fi=void 0)},Bt)),this._accessibleDiffViewer=(0,O.a0)(this,$t=>this._instantiationService.createInstance((0,pe.b)(ae,$t),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(vi,Hi)=>this._accessibleDiffViewerShouldBeVisible.set(vi,Hi),this._options.onlyShowAccessibleDiffViewer.map(vi=>!vi),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((vi,Hi)=>vi?.diff.read(Hi)?.mappings.map(Ui=>Ui.lineRangeMapping)),new ot(this._editors))).recomputeInitiallyAndOnChange(this._store);const en=this._accessibleDiffViewerVisible.map($t=>$t?"hidden":"visible");this._register((0,R.AV)(this.elements.modified,{visibility:en})),this._register((0,R.AV)(this.elements.original,{visibility:en})),this._createDiffEditorContributions(),Je.addDiffEditor(this),this._gutter=(0,O.a0)(this,$t=>this._options.shouldRenderGutterMenu.read($t)?this._instantiationService.createInstance((0,pe.b)(Tt,$t),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register((0,w.OI)(this._layoutInfo)),(0,O.a0)(this,$t=>new((0,pe.b)(ji,$t))(this.elements.root,this._diffModel,this._layoutInfo.map(vi=>vi.originalEditor),this._layoutInfo.map(vi=>vi.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,$t=>{this._movedBlocksLinesPart.set($t,void 0)}),this._register(P.Jh.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,$t=>this._handleCursorPositionChange($t,!0))),this._register(P.Jh.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,$t=>this._handleCursorPositionChange($t,!1)));const di=this._diffModel.map(this,($t,vi)=>{if($t)return $t.diff.read(vi)===void 0&&!$t.isDiffUpToDate.read(vi)});this._register((0,w.yC)(($t,vi)=>{if(di.read($t)===!0){const Hi=this._editorProgressService.show(!0,1e3);vi.add((0,M.s)(()=>Hi.done()))}})),this._register((0,w.yC)(($t,vi)=>{vi.add(new((0,pe.b)(Mn,$t))(this._editors,this._diffModel,this._options,this))})),this._register((0,w.yC)(($t,vi)=>{const Hi=this._diffModel.read($t);if(Hi)for(const Ui of[Hi.model.original,Hi.model.modified])vi.add(Ui.onWillDispose(Yn=>{(0,U.dz)(new U.D7("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register((0,w.fm)($t=>{this._options.setModel(this._diffModel.read($t))}))}_createInnerEditor(_e,ue,Ee,Ie){return _e.createInstance(C.x,ue,Ee,Ie)}_createDiffEditorContributions(){const _e=A.dS.getDiffEditorContributions();for(const ue of _e)try{this._register(this._instantiationService.createInstance(ue.ctor,this))}catch(Ee){(0,U.dz)(Ee)}}get _targetEditor(){return this._editors.modified}getEditorType(){return Fi._.IDiffEditor}layout(_e){this._rootSizeObserver.observe(_e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){const _e=this._editors.original.saveViewState(),ue=this._editors.modified.saveViewState();return{original:_e,modified:ue,modelState:this._diffModel.get()?.serializeState()}}restoreViewState(_e){if(_e&&_e.original&&_e.modified){const ue=_e;this._editors.original.restoreViewState(ue.original),this._editors.modified.restoreViewState(ue.modified),ue.modelState&&this._diffModel.get()?.restoreSerializedState(ue.modelState)}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(_e){return this._instantiationService.createInstance(mt,_e,this._options)}getModel(){return this._diffModel.get()?.model??null}setModel(_e){const ue=_e?"model"in _e?R.O8.create(_e).createNewRef(this):R.O8.create(this.createViewModel(_e),this):null;this.setDiffModel(ue)}setDiffModel(_e,ue){const Ee=this._diffModel.get();!_e&&Ee&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==_e?.object&&(0,w.PO)(ue,Ie=>{const ze=_e?.object;w.y0.batchEventsGlobally(Ie,()=>{this._editors.original.setModel(ze?ze.model.original:null),this._editors.modified.setModel(ze?ze.model.modified:null)});const Je=this._diffModelSrc.get()?.createNewRef(this);this._diffModelSrc.set(_e?.createNewRef(this),Ie),setTimeout(()=>{Je?.dispose()},0)})}updateOptions(_e){this._options.updateOptions(_e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){const _e=this._diffModel.get()?.diff.get();return _e?Zi(_e):null}revert(_e){const ue=this._diffModel.get();!ue||!ue.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:_e.modified.toExclusiveRange(),text:ue.model.original.getValueInRange(_e.original.toExclusiveRange())}])}revertRangeMappings(_e){const ue=this._diffModel.get();if(!ue||!ue.isDiffUpToDate.get())return;const Ee=_e.map(Ie=>({range:Ie.modifiedRange,text:ue.model.original.getValueInRange(Ie.originalRange)}));this._editors.modified.executeEdits("diffEditor",Ee)}_goTo(_e){this._editors.modified.setPosition(new Q.y(_e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(_e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(_e){const ue=this._diffModel.get()?.diff.get()?.mappings;if(!ue||ue.length===0)return;const Ee=this._editors.modified.getPosition().lineNumber;let Ie;_e==="next"?Ie=ue.find(ze=>ze.lineRangeMapping.modified.startLineNumber>Ee)??ue[0]:Ie=(0,G.Uk)(ue,ze=>ze.lineRangeMapping.modified.startLineNumber<Ee)??ue[ue.length-1],this._goTo(Ie),Ie.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(F.Rh.diffLineDeleted,{source:"diffEditor.goToDiff"}):Ie.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(F.Rh.diffLineInserted,{source:"diffEditor.goToDiff"}):Ie&&this._accessibilitySignalService.playSignal(F.Rh.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const _e=this._diffModel.get();_e&&this.waitForDiff().then(()=>{const ue=_e.diff.get()?.mappings;!ue||ue.length===0||this._goTo(ue[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const _e=this._diffModel.get();_e&&await _e.waitForDiff()}mapToOtherSide(){const _e=this._editors.modified.hasWidgetFocus(),ue=_e?this._editors.modified:this._editors.original,Ee=_e?this._editors.original:this._editors.modified;let Ie;const ze=ue.getSelection();if(ze){const Je=this._diffModel.get()?.diff.get()?.mappings.map(rt=>_e?rt.lineRangeMapping.flip():rt.lineRangeMapping);if(Je){const rt=(0,R.Mu)(ze.getStartPosition(),Je),Ct=(0,R.Mu)(ze.getEndPosition(),Je);Ie=q.Q.plusRange(rt,Ct)}}return{destination:Ee,destinationSelection:Ie}}switchSide(){const{destination:_e,destinationSelection:ue}=this.mapToOtherSide();_e.focus(),ue&&_e.setSelection(ue)}exitCompareMove(){const _e=this._diffModel.get();_e&&_e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){const _e=this._diffModel.get()?.unchangedRegions.get();_e&&(0,w.Rn)(ue=>{for(const Ee of _e)Ee.collapseAll(ue)})}showAllUnchangedRegions(){const _e=this._diffModel.get()?.unchangedRegions.get();_e&&(0,w.Rn)(ue=>{for(const Ee of _e)Ee.showAll(ue)})}_handleCursorPositionChange(_e,ue){if(_e?.reason===3){const Ee=this._diffModel.get()?.diff.get()?.mappings.find(Ie=>ue?Ie.lineRangeMapping.modified.contains(_e.position.lineNumber):Ie.lineRangeMapping.original.contains(_e.position.lineNumber));Ee?.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(F.Rh.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):Ee?.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(F.Rh.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):Ee&&this._accessibilitySignalService.playSignal(F.Rh.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};an=Qi([on(3,hi.fN),on(4,N._Y),on(5,I.T),on(6,F.Nt),on(7,so.N8)],an);function Zi(Et){return Et.mappings.map(_e=>{const ue=_e.lineRangeMapping;let Ee,Ie,ze,Je,rt=ue.innerChanges;return ue.original.isEmpty?(Ee=ue.original.startLineNumber-1,Ie=0,rt=void 0):(Ee=ue.original.startLineNumber,Ie=ue.original.endLineNumberExclusive-1),ue.modified.isEmpty?(ze=ue.modified.startLineNumber-1,Je=0,rt=void 0):(ze=ue.modified.startLineNumber,Je=ue.modified.endLineNumberExclusive-1),{originalStartLineNumber:Ee,originalEndLineNumber:Ie,modifiedStartLineNumber:ze,modifiedEndLineNumber:Je,charChanges:rt?.map(Ct=>({originalStartLineNumber:Ct.originalRange.startLineNumber,originalStartColumn:Ct.originalRange.startColumn,originalEndLineNumber:Ct.originalRange.endLineNumber,originalEndColumn:Ct.originalRange.endColumn,modifiedStartLineNumber:Ct.modifiedRange.startLineNumber,modifiedStartColumn:Ct.modifiedRange.startColumn,modifiedEndLineNumber:Ct.modifiedRange.endLineNumber,modifiedEndColumn:Ct.modifiedRange.endColumn}))}})}},42577:(Mt,He,c)=>{c.d(He,{GP:()=>w,LM:()=>P,Uv:()=>C,kI:()=>A,nt:()=>M,or:()=>I,qL:()=>O,vo:()=>b});var u=c(93009),G=c(85565),U=c(98414);class P{constructor(_,d,m,S){this._viewportBrand=void 0,this.top=_|0,this.left=d|0,this.width=m|0,this.height=S|0}}class M{constructor(_,d){this.tabSize=_,this.data=d}}class w{constructor(_,d,m,S,D,E,B){this._viewLineDataBrand=void 0,this.content=_,this.continuesWithWrappedLine=d,this.minColumn=m,this.maxColumn=S,this.startVisibleColumn=D,this.tokens=E,this.inlineDecorations=B}}class O{constructor(_,d,m,S,D,E,B,R,z,W){this.minColumn=_,this.maxColumn=d,this.content=m,this.continuesWithWrappedLine=S,this.isBasicASCII=O.isBasicASCII(m,E),this.containsRTL=O.containsRTL(m,this.isBasicASCII,D),this.tokens=B,this.inlineDecorations=R,this.tabSize=z,this.startVisibleColumn=W}static isBasicASCII(_,d){return d?G.aC(_):!0}static containsRTL(_,d,m){return!d&&m?G.E_(_):!1}}class A{constructor(_,d,m){this.range=_,this.inlineClassName=d,this.type=m}}class I{constructor(_,d,m,S){this.startOffset=_,this.endOffset=d,this.inlineClassName=m,this.inlineClassNameAffectsLetterSpacing=S}toInlineDecoration(_){return new A(new U.Q(_,this.startOffset+1,_,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class b{constructor(_,d){this._viewModelDecorationBrand=void 0,this.range=_,this.options=d}}class C{constructor(_,d,m){this.color=_,this.zIndex=d,this.data=m}static compareByRenderingProps(_,d){return _.zIndex===d.zIndex?_.color<d.color?-1:_.color>d.color?1:0:_.zIndex-d.zIndex}static equals(_,d){return _.color===d.color&&_.zIndex===d.zIndex&&u.aI(_.data,d.data)}static equalsArr(_,d){return u.aI(_,d,C.equals)}}},42640:(Mt,He,c)=>{c.d(He,{L:()=>U});var u=c(67538),G;(function(P){function M(w){return w&&typeof w=="object"&&typeof w.id=="string"}P.isThemeColor=M})(G||(G={}));var U;(function(P){P.iconNameSegment="[A-Za-z0-9]+",P.iconNameExpression="[A-Za-z0-9-]+",P.iconModifierExpression="~[A-Za-z]+",P.iconNameCharacter="[A-Za-z0-9~-]";const M=new RegExp(`^(${P.iconNameExpression})(${P.iconModifierExpression})?$`);function w(S){const D=M.exec(S.id);if(!D)return w(u.W.error);const[,E,B]=D,R=["codicon","codicon-"+E];return B&&R.push("codicon-modifier-"+B.substring(1)),R}P.asClassNameArray=w;function O(S){return w(S).join(" ")}P.asClassName=O;function A(S){return"."+w(S).join(".")}P.asCSSSelector=A;function I(S){return S&&typeof S=="object"&&typeof S.id=="string"&&(typeof S.color>"u"||G.isThemeColor(S.color))}P.isThemeIcon=I;const b=new RegExp(`^\\$\\((${P.iconNameExpression}(?:${P.iconModifierExpression})?)\\)$`);function C(S){const D=b.exec(S);if(!D)return;const[,E]=D;return{id:E}}P.fromString=C;function v(S){return{id:S}}P.fromId=v;function _(S,D){let E=S.id;const B=E.lastIndexOf("~");return B!==-1&&(E=E.substring(0,B)),D&&(E=`${E}~${D}`),{id:E}}P.modify=_;function d(S){const D=S.id.lastIndexOf("~");if(D!==-1)return S.id.substring(D+1)}P.getModifier=d;function m(S,D){return S.id===D.id&&S.color?.id===D.color?.id}P.isEqual=m})(U||(U={}))},43228:(Mt,He,c)=>{c.d(He,{W:()=>U});var u=c(69504),G=c(98414);class U{static{this.zero=new U(0,0)}static betweenPositions(M,w){return M.lineNumber===w.lineNumber?new U(0,w.column-M.column):new U(w.lineNumber-M.lineNumber,w.column-1)}static ofRange(M){return U.betweenPositions(M.getStartPosition(),M.getEndPosition())}static ofText(M){let w=0,O=0;for(const A of M)A===`
`?(w++,O=0):O++;return new U(w,O)}constructor(M,w){this.lineCount=M,this.columnCount=w}isGreaterThanOrEqualTo(M){return this.lineCount!==M.lineCount?this.lineCount>M.lineCount:this.columnCount>=M.columnCount}createRange(M){return this.lineCount===0?new G.Q(M.lineNumber,M.column,M.lineNumber,M.column+this.columnCount):new G.Q(M.lineNumber,M.column,M.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(M){return this.lineCount===0?new u.y(M.lineNumber,M.column+this.columnCount):new u.y(M.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}}},43860:(Mt,He,c)=>{c.d(He,{HJ:()=>A,LN:()=>M,YH:()=>O,ih:()=>I,rc:()=>P,wv:()=>w});var u=c(56491),G=c(60599),U=c(45573);class P extends G.jG{constructor(C,v="",_="",d=!0,m){super(),this._onDidChange=this._register(new u.vl),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=C,this._label=v,this._cssClass=_,this._enabled=d,this._actionCallback=m}get id(){return this._id}get label(){return this._label}set label(C){this._setLabel(C)}_setLabel(C){this._label!==C&&(this._label=C,this._onDidChange.fire({label:C}))}get tooltip(){return this._tooltip||""}set tooltip(C){this._setTooltip(C)}_setTooltip(C){this._tooltip!==C&&(this._tooltip=C,this._onDidChange.fire({tooltip:C}))}get class(){return this._cssClass}set class(C){this._setClass(C)}_setClass(C){this._cssClass!==C&&(this._cssClass=C,this._onDidChange.fire({class:C}))}get enabled(){return this._enabled}set enabled(C){this._setEnabled(C)}_setEnabled(C){this._enabled!==C&&(this._enabled=C,this._onDidChange.fire({enabled:C}))}get checked(){return this._checked}set checked(C){this._setChecked(C)}_setChecked(C){this._checked!==C&&(this._checked=C,this._onDidChange.fire({checked:C}))}async run(C,v){this._actionCallback&&await this._actionCallback(C)}}class M extends G.jG{constructor(){super(...arguments),this._onWillRun=this._register(new u.vl),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new u.vl),this.onDidRun=this._onDidRun.event}async run(C,v){if(!C.enabled)return;this._onWillRun.fire({action:C});let _;try{await this.runAction(C,v)}catch(d){_=d}this._onDidRun.fire({action:C,error:_})}async runAction(C,v){await C.run(v)}}class w{constructor(){this.id=w.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...C){let v=[];for(const _ of C)_.length&&(v.length?v=[...v,new w,..._]:v=_);return v}static{this.ID="vs.actions.separator"}async run(){}}class O{get actions(){return this._actions}constructor(C,v,_,d){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=C,this.label=v,this.class=d,this._actions=_}async run(){}}class A extends P{static{this.ID="vs.actions.empty"}constructor(){super(A.ID,U.kg("submenu.empty","(empty)"),void 0,!1)}}function I(b){return{id:b.id,label:b.label,tooltip:b.tooltip??b.label,class:b.class,enabled:b.enabled??!0,checked:b.checked,run:async(...C)=>b.run(...C)}}},43872:(Mt,He,c)=>{c.r(He),c.d(He,{ISemanticTokensStylingService:()=>G});var u=c(81545);const G=(0,u.u1)("semanticTokensStylingService")},44727:(Mt,He,c)=>{c.d(He,{DX:()=>R,E_:()=>q,Fl:()=>ne,HW:()=>Ae,PF:()=>W,aU:()=>j,dS:()=>re,fE:()=>E,gW:()=>ve,ih:()=>me,ke:()=>Q,ks:()=>z,qO:()=>$,tc:()=>ce,uB:()=>D,xX:()=>Re});var u=c(45573),G=c(37473),U=c(37100),P=c(69504),M=c(65365),w=c(59105),O=c(76222),A=c(93750),I=c(25894),b=c(81545),C=c(3478),v=c(39642),_=c(91090),d=c(33902),m=c(92824),S=c(31938);class D{constructor(Le){this.id=Le.id,this.precondition=Le.precondition,this._kbOpts=Le.kbOpts,this._menuOpts=Le.menuOpts,this.metadata=Le.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const Le=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const Y of Le){let ae=Y.kbExpr;this.precondition&&(ae?ae=I.M$.and(ae,this.precondition):ae=this.precondition);const Ce={id:this.id,weight:Y.weight,args:Y.args,when:ae,primary:Y.primary,secondary:Y.secondary,win:Y.win,linux:Y.linux,mac:Y.mac};C.f.registerKeybindingRule(Ce)}}A.w.registerCommand({id:this.id,handler:(Le,Y)=>this.runCommand(Le,Y),metadata:this.metadata})}_registerMenuItem(Le){O.ZG.appendMenuItem(Le.menuId,{group:Le.group,command:{id:this.id,title:Le.title,icon:Le.icon,precondition:this.precondition},when:Le.when,order:Le.order})}}class E extends D{constructor(){super(...arguments),this._implementations=[]}addImplementation(Le,Y,ae,Ce){return this._implementations.push({priority:Le,name:Y,implementation:ae,when:Ce}),this._implementations.sort((Pe,ye)=>ye.priority-Pe.priority),{dispose:()=>{for(let Pe=0;Pe<this._implementations.length;Pe++)if(this._implementations[Pe].implementation===ae){this._implementations.splice(Pe,1);return}}}}runCommand(Le,Y){const ae=Le.get(m.rr),Ce=Le.get(I.fN);ae.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const Pe of this._implementations){if(Pe.when){const Ke=Ce.getContext((0,S.bq)());if(!Pe.when.evaluate(Ke))continue}const ye=Pe.implementation(Le,Y);if(ye)return ae.trace(`Command '${this.id}' was handled by '${Pe.name}'.`),typeof ye=="boolean"?void 0:ye}ae.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class B extends D{constructor(Le,Y){super(Y),this.command=Le}runCommand(Le,Y){return this.command.runCommand(Le,Y)}}class R extends D{static bindToContribution(Le){return class extends R{constructor(ae){super(ae),this._callback=ae.handler}runEditorCommand(ae,Ce,Pe){const ye=Le(Ce);ye&&this._callback(ye,Pe)}}}static runEditorCommand(Le,Y,ae,Ce){const Pe=Le.get(U.T),ye=Pe.getFocusedCodeEditor()||Pe.getActiveCodeEditor();if(ye)return ye.invokeWithinContext(Ke=>{if(Ke.get(I.fN).contextMatchesRules(ae??void 0))return Ce(Ke,ye,Y)})}runCommand(Le,Y){return R.runEditorCommand(Le,Y,this.precondition,(ae,Ce,Pe)=>this.runEditorCommand(ae,Ce,Pe))}}class z extends R{static convertOptions(Le){let Y;Array.isArray(Le.menuOpts)?Y=Le.menuOpts:Le.menuOpts?Y=[Le.menuOpts]:Y=[];function ae(Ce){return Ce.menuId||(Ce.menuId=O.D8.EditorContext),Ce.title||(Ce.title=Le.label),Ce.when=I.M$.and(Le.precondition,Ce.when),Ce}return Array.isArray(Le.contextMenuOpts)?Y.push(...Le.contextMenuOpts.map(ae)):Le.contextMenuOpts&&Y.push(ae(Le.contextMenuOpts)),Le.menuOpts=Y,Le}constructor(Le){super(z.convertOptions(Le)),this.label=Le.label,this.alias=Le.alias}runEditorCommand(Le,Y,ae){return this.reportTelemetry(Le,Y),this.run(Le,Y,ae||{})}reportTelemetry(Le,Y){Le.get(_.k).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class W extends z{constructor(){super(...arguments),this._implementations=[]}addImplementation(Le,Y){return this._implementations.push([Le,Y]),this._implementations.sort((ae,Ce)=>Ce[0]-ae[0]),{dispose:()=>{for(let ae=0;ae<this._implementations.length;ae++)if(this._implementations[ae][1]===Y){this._implementations.splice(ae,1);return}}}}run(Le,Y,ae){for(const Ce of this._implementations){const Pe=Ce[1](Le,Y,ae);if(Pe)return typeof Pe=="boolean"?void 0:Pe}}}class $ extends O.L{run(Le,...Y){const ae=Le.get(U.T),Ce=ae.getFocusedCodeEditor()||ae.getActiveCodeEditor();if(Ce)return Ce.invokeWithinContext(Pe=>{const ye=Pe.get(I.fN),Ke=Pe.get(m.rr);if(!ye.contextMatchesRules(this.desc.precondition??void 0)){Ke.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,this.desc.precondition?.serialize());return}return this.runEditorCommand(Pe,Ce,...Y)})}}function Q(he,Le){A.w.registerCommand(he,function(Y,...ae){const Ce=Y.get(b._Y),[Pe,ye]=ae;(0,d.j)(G.r.isUri(Pe)),(0,d.j)(P.y.isIPosition(ye));const Ke=Y.get(M.IModelService).getModel(Pe);if(Ke){const qe=P.y.lift(ye);return Ce.invokeFunction(Le,Ke,qe,...ae.slice(2))}return Y.get(w.ITextModelService).createModelReference(Pe).then(qe=>new Promise((Ue,x)=>{try{const it=Ce.invokeFunction(Le,qe.object.textEditorModel,P.y.lift(ye),ae.slice(2));Ue(it)}catch(it){x(it)}}).finally(()=>{qe.dispose()}))})}function q(he){return F.INSTANCE.registerEditorCommand(he),he}function ne(he){const Le=new he;return F.INSTANCE.registerEditorAction(Le),Le}function ve(he){return F.INSTANCE.registerEditorAction(he),he}function Re(he){F.INSTANCE.registerEditorAction(he)}function Ae(he,Le,Y){F.INSTANCE.registerEditorContribution(he,Le,Y)}var re;(function(he){function Le(ye){return F.INSTANCE.getEditorCommand(ye)}he.getEditorCommand=Le;function Y(){return F.INSTANCE.getEditorActions()}he.getEditorActions=Y;function ae(){return F.INSTANCE.getEditorContributions()}he.getEditorContributions=ae;function Ce(ye){return F.INSTANCE.getEditorContributions().filter(Ke=>ye.indexOf(Ke.id)>=0)}he.getSomeEditorContributions=Ce;function Pe(){return F.INSTANCE.getDiffEditorContributions()}he.getDiffEditorContributions=Pe})(re||(re={}));const K={EditorCommonContributions:"editor.contributions"};class F{static{this.INSTANCE=new F}constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(Le,Y,ae){this.editorContributions.push({id:Le,ctor:Y,instantiation:ae})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(Le){Le.register(),this.editorActions.push(Le)}getEditorActions(){return this.editorActions}registerEditorCommand(Le){Le.register(),this.editorCommands[Le.id]=Le}getEditorCommand(Le){return this.editorCommands[Le]||null}}v.O.add(K.EditorCommonContributions,F.INSTANCE);function N(he){return he.register(),he}const j=N(new E({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:O.D8.MenubarEditMenu,group:"1_do",title:u.kg({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:O.D8.CommandPalette,group:"",title:u.kg("undo","Undo"),order:1}]}));N(new B(j,{id:"default:undo",precondition:void 0}));const me=N(new E({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:O.D8.MenubarEditMenu,group:"1_do",title:u.kg({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:O.D8.CommandPalette,group:"",title:u.kg("redo","Redo"),order:1}]}));N(new B(me,{id:"default:redo",precondition:void 0}));const ce=N(new E({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:O.D8.MenubarSelectionMenu,group:"1_basic",title:u.kg({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:O.D8.CommandPalette,group:"",title:u.kg("selectAll","Select All"),order:1}]}))},45338:(Mt,He,c)=>{c.d(He,{u:()=>P});var u=c(60599),G=c(56491),U=c(31938);class P extends u.jG{constructor(w,O){super(),this._onDidChange=this._register(new G.vl),this.onDidChange=this._onDidChange.event,this._referenceDomElement=w,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,O)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let w=null;const O=()=>{w?this.observe({width:w.width,height:w.height}):this.observe()};let A=!1,I=!1;const b=()=>{if(A&&!I)try{A=!1,I=!0,O()}finally{(0,U.PG)((0,U.zk)(this._referenceDomElement),()=>{I=!1,b()})}};this._resizeObserver=new ResizeObserver(C=>{C&&C[0]&&C[0].contentRect?w={width:C[0].contentRect.width,height:C[0].contentRect.height}:w=null,A=!0,b()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(w){this.measureReferenceDomElement(!0,w)}measureReferenceDomElement(w,O){let A=0,I=0;O?(A=O.width,I=O.height):this._referenceDomElement&&(A=this._referenceDomElement.clientWidth,I=this._referenceDomElement.clientHeight),A=Math.max(5,A),I=Math.max(5,I),(this._width!==A||this._height!==I)&&(this._width=A,this._height=I,w&&this._onDidChange.fire())}}},45573:(Mt,He,c)=>{c.d(He,{i8:()=>G,Ec:()=>u,kg:()=>M,aS:()=>O});function u(){return globalThis._VSCODE_NLS_MESSAGES}function G(){return globalThis._VSCODE_NLS_LANGUAGE}const U=G()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function P(A,I){let b;return I.length===0?b=A:b=A.replace(/\{(\d+)\}/g,(C,v)=>{const _=v[0],d=I[_];let m=C;return typeof d=="string"?m=d:(typeof d=="number"||typeof d=="boolean"||d===void 0||d===null)&&(m=String(d)),m}),U&&(b="\uFF3B"+b.replace(/[aouei]/g,"$&$&")+"\uFF3D"),b}function M(A,I,...b){return P(typeof A=="number"?w(A,I):I,b)}function w(A,I){const b=u()?.[A];if(typeof b!="string"){if(typeof I=="string")return I;throw new Error(`!!! NLS MISSING: ${A} !!!`)}return b}function O(A,I,...b){let C;typeof A=="number"?C=w(A,I):C=I;const v=P(C,b);return{value:v,original:I===C?v:P(I,b)}}},45892:(Mt,He,c)=>{c.r(He),c.d(He,{KeyMod:()=>b,createMonacoBaseAPI:()=>C});var u=c(46204),G=c(56491),U=c(64840),P=c(37473),M=c(69504),w=c(98414),O=c(47545),A=c(9709),I=c(59548);class b{static{this.CtrlCmd=2048}static{this.Shift=1024}static{this.Alt=512}static{this.WinCtrl=256}static chord(_,d){return(0,U.m5)(_,d)}}function C(){return{editor:void 0,languages:void 0,CancellationTokenSource:u.Qi,Emitter:G.vl,KeyCode:I.DD,KeyMod:b,Position:M.y,Range:w.Q,Selection:O.L,SelectionDirection:I.SB,MarkerSeverity:I.cj,MarkerTag:I.d_,Uri:P.r,Token:A.ou}}},46204:(Mt,He,c)=>{c.d(He,{Qi:()=>M,XO:()=>U,bs:()=>w});var u=c(56491);const G=Object.freeze(function(O,A){const I=setTimeout(O.bind(A),0);return{dispose(){clearTimeout(I)}}});var U;(function(O){function A(I){return I===O.None||I===O.Cancelled||I instanceof P?!0:!I||typeof I!="object"?!1:typeof I.isCancellationRequested=="boolean"&&typeof I.onCancellationRequested=="function"}O.isCancellationToken=A,O.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:u.Jh.None}),O.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:G})})(U||(U={}));class P{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?G:(this._emitter||(this._emitter=new u.vl),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class M{constructor(A){this._token=void 0,this._parentListener=void 0,this._parentListener=A&&A.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new P),this._token}cancel(){this._token?this._token instanceof P&&this._token.cancel():this._token=U.Cancelled}dispose(A=!1){A&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof P&&this._token.dispose():this._token=U.None}}function w(O){const A=new M;return O.add({dispose(){A.cancel()}}),A.token}},46454:(Mt,He,c)=>{c.d(He,{FW:()=>O,Zv:()=>G,dG:()=>P,z5:()=>A});var u=c(87856);function G(I,b){if(typeof I=="number"){if(I===0)return null;const C=(I&65535)>>>0,v=(I&4294901760)>>>16;return v!==0?new w([U(C,b),U(v,b)]):new w([U(C,b)])}else{const C=[];for(let v=0;v<I.length;v++)C.push(U(I[v],b));return new w(C)}}function U(I,b){const C=!!(I&2048),v=!!(I&256),_=b===2?v:C,d=!!(I&1024),m=!!(I&512),S=b===2?C:v,D=I&255;return new P(_,d,m,S,D)}class P{constructor(b,C,v,_,d){this.ctrlKey=b,this.shiftKey=C,this.altKey=v,this.metaKey=_,this.keyCode=d}equals(b){return b instanceof P&&this.ctrlKey===b.ctrlKey&&this.shiftKey===b.shiftKey&&this.altKey===b.altKey&&this.metaKey===b.metaKey&&this.keyCode===b.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class M{constructor(b,C,v,_,d){this.ctrlKey=b,this.shiftKey=C,this.altKey=v,this.metaKey=_,this.scanCode=d}isDuplicateModifierCase(){return this.ctrlKey&&(this.scanCode===157||this.scanCode===161)||this.shiftKey&&(this.scanCode===158||this.scanCode===162)||this.altKey&&(this.scanCode===159||this.scanCode===163)||this.metaKey&&(this.scanCode===160||this.scanCode===164)}}class w{constructor(b){if(b.length===0)throw(0,u.Qg)("chords");this.chords=b}}class O{constructor(b,C,v,_,d,m){this.ctrlKey=b,this.shiftKey=C,this.altKey=v,this.metaKey=_,this.keyLabel=d,this.keyAriaLabel=m}}class A{}},46625:(Mt,He,c)=>{c.d(He,{$w:()=>dt,SV:()=>Ye,aj:()=>oe});const{entries:u,setPrototypeOf:G,isFrozen:U,getPrototypeOf:P,getOwnPropertyDescriptor:M}=Object;let{freeze:w,seal:O,create:A}=Object,{apply:I,construct:b}=typeof Reflect<"u"&&Reflect;w||(w=function(we){return we}),O||(O=function(we){return we}),I||(I=function(we,Xt,ri){return we.apply(Xt,ri)}),b||(b=function(we,Xt){return new we(...Xt)});const C=$(Array.prototype.forEach),v=$(Array.prototype.pop),_=$(Array.prototype.push),d=$(String.prototype.toLowerCase),m=$(String.prototype.toString),S=$(String.prototype.match),D=$(String.prototype.replace),E=$(String.prototype.indexOf),B=$(String.prototype.trim),R=$(Object.prototype.hasOwnProperty),z=$(RegExp.prototype.test),W=Q(TypeError);function $(Se){return function(we){for(var Xt=arguments.length,ri=new Array(Xt>1?Xt-1:0),ke=1;ke<Xt;ke++)ri[ke-1]=arguments[ke];return I(Se,we,ri)}}function Q(Se){return function(){for(var we=arguments.length,Xt=new Array(we),ri=0;ri<we;ri++)Xt[ri]=arguments[ri];return b(Se,Xt)}}function q(Se,we){let Xt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d;G&&G(Se,null);let ri=we.length;for(;ri--;){let ke=we[ri];if(typeof ke=="string"){const Z=Xt(ke);Z!==ke&&(U(we)||(we[ri]=Z),ke=Z)}Se[ke]=!0}return Se}function ne(Se){for(let we=0;we<Se.length;we++)R(Se,we)||(Se[we]=null);return Se}function ve(Se){const we=A(null);for(const[Xt,ri]of u(Se))R(Se,Xt)&&(Array.isArray(ri)?we[Xt]=ne(ri):ri&&typeof ri=="object"&&ri.constructor===Object?we[Xt]=ve(ri):we[Xt]=ri);return we}function Re(Se,we){for(;Se!==null;){const ri=M(Se,we);if(ri){if(ri.get)return $(ri.get);if(typeof ri.value=="function")return $(ri.value)}Se=P(Se)}function Xt(){return null}return Xt}const Ae=w(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),re=w(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),K=w(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),F=w(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),N=w(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),j=w(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),me=w(["#text"]),ce=w(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),he=w(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Le=w(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Y=w(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ae=O(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ce=O(/<%[\w\W]*|[\w\W]*%>/gm),Pe=O(/\${[\w\W]*}/gm),ye=O(/^data-[\-\w.\u00B7-\uFFFF]/),Ke=O(/^aria-[\-\w]+$/),qe=O(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ue=O(/^(?:\w+script|data):/i),x=O(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),it=O(/^html$/i),Ze=O(/^[a-z][.\w]*(-[.\w]+)+$/i);var _t=Object.freeze({__proto__:null,MUSTACHE_EXPR:ae,ERB_EXPR:Ce,TMPLIT_EXPR:Pe,DATA_ATTR:ye,ARIA_ATTR:Ke,IS_ALLOWED_URI:qe,IS_SCRIPT_OR_DATA:Ue,ATTR_WHITESPACE:x,DOCTYPE_NAME:it,CUSTOM_ELEMENT:Ze});const ot={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Pt=function(){return typeof window>"u"?null:window},Wt=function(we,Xt){if(typeof we!="object"||typeof we.createPolicy!="function")return null;let ri=null;const ke="data-tt-policy-suffix";Xt&&Xt.hasAttribute(ke)&&(ri=Xt.getAttribute(ke));const Z="dompurify"+(ri?"#"+ri:"");try{return we.createPolicy(Z,{createHTML(Fe){return Fe},createScriptURL(Fe){return Fe}})}catch{return null}};function Rt(){let Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pt();const we=Kt=>Rt(Kt);if(we.version="3.1.7",we.removed=[],!Se||!Se.document||Se.document.nodeType!==ot.document)return we.isSupported=!1,we;let{document:Xt}=Se;const ri=Xt,ke=ri.currentScript,{DocumentFragment:Z,HTMLTemplateElement:Fe,Node:pt,Element:et,NodeFilter:Zt,NamedNodeMap:bi=Se.NamedNodeMap||Se.MozNamedAttrMap,HTMLFormElement:ci,DOMParser:Oi,trustedTypes:Ii}=Se,yi=et.prototype,Vt=Re(yi,"cloneNode"),_n=Re(yi,"remove"),oi=Re(yi,"nextSibling"),Ne=Re(yi,"childNodes"),gt=Re(yi,"parentNode");if(typeof Fe=="function"){const Kt=Xt.createElement("template");Kt.content&&Kt.content.ownerDocument&&(Xt=Kt.content.ownerDocument)}let ei,ai="";const{implementation:Ci,createNodeIterator:wi,createDocumentFragment:ji,getElementsByTagName:Di}=Xt,{importNode:dn}=ri;let nn={};we.isSupported=typeof u=="function"&&typeof gt=="function"&&Ci&&Ci.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Dn,ERB_EXPR:Mi,TMPLIT_EXPR:Zn,DATA_ATTR:us,ARIA_ATTR:xs,IS_SCRIPT_OR_DATA:Wn,ATTR_WHITESPACE:Rn,CUSTOM_ELEMENT:Bn}=_t;let{IS_ALLOWED_URI:ws}=_t,Ln=null;const Qn=q({},[...Ae,...re,...K,...N,...me]);let hi=null;const vt=q({},[...ce,...he,...Le,...Y]);let ui=Object.seal(A(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),wt=null,In=null,Ki=!0,Tt=!0,$i=!1,St=!0,yt=!1,Yt=!0,ii=!1,Li=!1,Bi=!1,Pi=!1,un=!1,Cn=!1,sn=!0,yn=!1;const fs="user-content-";let cs=!0,_s=!1,Mn={},vs=null;const Xi=q({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Fi=null;const os=q({},["audio","video","img","source","image","track"]);let no=null;const so=q({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),co="http://www.w3.org/1998/Math/MathML",$n="http://www.w3.org/2000/svg",Kn="http://www.w3.org/1999/xhtml";let Xn=Kn,zt=!1,le=null;const Be=q({},[co,$n,Kn],m);let ht=null;const Ft=["application/xhtml+xml","text/html"],Ot="text/html";let qt=null,Si=null;const mi=Xt.createElement("form"),qi=function(ct){return ct instanceof RegExp||ct instanceof Function},Wi=function(){let ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Si&&Si===ct)){if((!ct||typeof ct!="object")&&(ct={}),ct=ve(ct),ht=Ft.indexOf(ct.PARSER_MEDIA_TYPE)===-1?Ot:ct.PARSER_MEDIA_TYPE,qt=ht==="application/xhtml+xml"?m:d,Ln=R(ct,"ALLOWED_TAGS")?q({},ct.ALLOWED_TAGS,qt):Qn,hi=R(ct,"ALLOWED_ATTR")?q({},ct.ALLOWED_ATTR,qt):vt,le=R(ct,"ALLOWED_NAMESPACES")?q({},ct.ALLOWED_NAMESPACES,m):Be,no=R(ct,"ADD_URI_SAFE_ATTR")?q(ve(so),ct.ADD_URI_SAFE_ATTR,qt):so,Fi=R(ct,"ADD_DATA_URI_TAGS")?q(ve(os),ct.ADD_DATA_URI_TAGS,qt):os,vs=R(ct,"FORBID_CONTENTS")?q({},ct.FORBID_CONTENTS,qt):Xi,wt=R(ct,"FORBID_TAGS")?q({},ct.FORBID_TAGS,qt):{},In=R(ct,"FORBID_ATTR")?q({},ct.FORBID_ATTR,qt):{},Mn=R(ct,"USE_PROFILES")?ct.USE_PROFILES:!1,Ki=ct.ALLOW_ARIA_ATTR!==!1,Tt=ct.ALLOW_DATA_ATTR!==!1,$i=ct.ALLOW_UNKNOWN_PROTOCOLS||!1,St=ct.ALLOW_SELF_CLOSE_IN_ATTR!==!1,yt=ct.SAFE_FOR_TEMPLATES||!1,Yt=ct.SAFE_FOR_XML!==!1,ii=ct.WHOLE_DOCUMENT||!1,Pi=ct.RETURN_DOM||!1,un=ct.RETURN_DOM_FRAGMENT||!1,Cn=ct.RETURN_TRUSTED_TYPE||!1,Bi=ct.FORCE_BODY||!1,sn=ct.SANITIZE_DOM!==!1,yn=ct.SANITIZE_NAMED_PROPS||!1,cs=ct.KEEP_CONTENT!==!1,_s=ct.IN_PLACE||!1,ws=ct.ALLOWED_URI_REGEXP||qe,Xn=ct.NAMESPACE||Kn,ui=ct.CUSTOM_ELEMENT_HANDLING||{},ct.CUSTOM_ELEMENT_HANDLING&&qi(ct.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ui.tagNameCheck=ct.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ct.CUSTOM_ELEMENT_HANDLING&&qi(ct.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ui.attributeNameCheck=ct.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ct.CUSTOM_ELEMENT_HANDLING&&typeof ct.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ui.allowCustomizedBuiltInElements=ct.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),yt&&(Tt=!1),un&&(Pi=!0),Mn&&(Ln=q({},me),hi=[],Mn.html===!0&&(q(Ln,Ae),q(hi,ce)),Mn.svg===!0&&(q(Ln,re),q(hi,he),q(hi,Y)),Mn.svgFilters===!0&&(q(Ln,K),q(hi,he),q(hi,Y)),Mn.mathMl===!0&&(q(Ln,N),q(hi,Le),q(hi,Y))),ct.ADD_TAGS&&(Ln===Qn&&(Ln=ve(Ln)),q(Ln,ct.ADD_TAGS,qt)),ct.ADD_ATTR&&(hi===vt&&(hi=ve(hi)),q(hi,ct.ADD_ATTR,qt)),ct.ADD_URI_SAFE_ATTR&&q(no,ct.ADD_URI_SAFE_ATTR,qt),ct.FORBID_CONTENTS&&(vs===Xi&&(vs=ve(vs)),q(vs,ct.FORBID_CONTENTS,qt)),cs&&(Ln["#text"]=!0),ii&&q(Ln,["html","head","body"]),Ln.table&&(q(Ln,["tbody"]),delete wt.tbody),ct.TRUSTED_TYPES_POLICY){if(typeof ct.TRUSTED_TYPES_POLICY.createHTML!="function")throw W('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ct.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw W('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ei=ct.TRUSTED_TYPES_POLICY,ai=ei.createHTML("")}else ei===void 0&&(ei=Wt(Ii,ke)),ei!==null&&typeof ai=="string"&&(ai=ei.createHTML(""));w&&w(ct),Si=ct}},Ei=q({},["mi","mo","mn","ms","mtext"]),Qi=q({},["annotation-xml"]),on=q({},["title","style","font","a","script"]),an=q({},[...re,...K,...F]),Zi=q({},[...N,...j]),Et=function(ct){let Ht=gt(ct);(!Ht||!Ht.tagName)&&(Ht={namespaceURI:Xn,tagName:"template"});const Qt=d(ct.tagName),fi=d(Ht.tagName);return le[ct.namespaceURI]?ct.namespaceURI===$n?Ht.namespaceURI===Kn?Qt==="svg":Ht.namespaceURI===co?Qt==="svg"&&(fi==="annotation-xml"||Ei[fi]):!!an[Qt]:ct.namespaceURI===co?Ht.namespaceURI===Kn?Qt==="math":Ht.namespaceURI===$n?Qt==="math"&&Qi[fi]:!!Zi[Qt]:ct.namespaceURI===Kn?Ht.namespaceURI===$n&&!Qi[fi]||Ht.namespaceURI===co&&!Ei[fi]?!1:!Zi[Qt]&&(on[Qt]||!an[Qt]):!!(ht==="application/xhtml+xml"&&le[ct.namespaceURI]):!1},_e=function(ct){_(we.removed,{element:ct});try{gt(ct).removeChild(ct)}catch{_n(ct)}},ue=function(ct,Ht){try{_(we.removed,{attribute:Ht.getAttributeNode(ct),from:Ht})}catch{_(we.removed,{attribute:null,from:Ht})}if(Ht.removeAttribute(ct),ct==="is"&&!hi[ct])if(Pi||un)try{_e(Ht)}catch{}else try{Ht.setAttribute(ct,"")}catch{}},Ee=function(ct){let Ht=null,Qt=null;if(Bi)ct="<remove></remove>"+ct;else{const di=S(ct,/^[\r\n\t ]+/);Qt=di&&di[0]}ht==="application/xhtml+xml"&&Xn===Kn&&(ct='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ct+"</body></html>");const fi=ei?ei.createHTML(ct):ct;if(Xn===Kn)try{Ht=new Oi().parseFromString(fi,ht)}catch{}if(!Ht||!Ht.documentElement){Ht=Ci.createDocument(Xn,"template",null);try{Ht.documentElement.innerHTML=zt?ai:fi}catch{}}const en=Ht.body||Ht.documentElement;return ct&&Qt&&en.insertBefore(Xt.createTextNode(Qt),en.childNodes[0]||null),Xn===Kn?Di.call(Ht,ii?"html":"body")[0]:ii?Ht.documentElement:en},Ie=function(ct){return wi.call(ct.ownerDocument||ct,ct,Zt.SHOW_ELEMENT|Zt.SHOW_COMMENT|Zt.SHOW_TEXT|Zt.SHOW_PROCESSING_INSTRUCTION|Zt.SHOW_CDATA_SECTION,null)},ze=function(ct){return ct instanceof ci&&(typeof ct.nodeName!="string"||typeof ct.textContent!="string"||typeof ct.removeChild!="function"||!(ct.attributes instanceof bi)||typeof ct.removeAttribute!="function"||typeof ct.setAttribute!="function"||typeof ct.namespaceURI!="string"||typeof ct.insertBefore!="function"||typeof ct.hasChildNodes!="function")},Je=function(ct){return typeof pt=="function"&&ct instanceof pt},rt=function(ct,Ht,Qt){nn[ct]&&C(nn[ct],fi=>{fi.call(we,Ht,Qt,Si)})},Ct=function(ct){let Ht=null;if(rt("beforeSanitizeElements",ct,null),ze(ct))return _e(ct),!0;const Qt=qt(ct.nodeName);if(rt("uponSanitizeElement",ct,{tagName:Qt,allowedTags:Ln}),ct.hasChildNodes()&&!Je(ct.firstElementChild)&&z(/<[/\w]/g,ct.innerHTML)&&z(/<[/\w]/g,ct.textContent)||ct.nodeType===ot.progressingInstruction||Yt&&ct.nodeType===ot.comment&&z(/<[/\w]/g,ct.data))return _e(ct),!0;if(!Ln[Qt]||wt[Qt]){if(!wt[Qt]&&It(Qt)&&(ui.tagNameCheck instanceof RegExp&&z(ui.tagNameCheck,Qt)||ui.tagNameCheck instanceof Function&&ui.tagNameCheck(Qt)))return!1;if(cs&&!vs[Qt]){const fi=gt(ct)||ct.parentNode,en=Ne(ct)||ct.childNodes;if(en&&fi){const di=en.length;for(let $t=di-1;$t>=0;--$t){const vi=Vt(en[$t],!0);vi.__removalCount=(ct.__removalCount||0)+1,fi.insertBefore(vi,oi(ct))}}}return _e(ct),!0}return ct instanceof et&&!Et(ct)||(Qt==="noscript"||Qt==="noembed"||Qt==="noframes")&&z(/<\/no(script|embed|frames)/i,ct.innerHTML)?(_e(ct),!0):(yt&&ct.nodeType===ot.text&&(Ht=ct.textContent,C([Dn,Mi,Zn],fi=>{Ht=D(Ht,fi," ")}),ct.textContent!==Ht&&(_(we.removed,{element:ct.cloneNode()}),ct.textContent=Ht)),rt("afterSanitizeElements",ct,null),!1)},jt=function(ct,Ht,Qt){if(sn&&(Ht==="id"||Ht==="name")&&(Qt in Xt||Qt in mi))return!1;if(!(Tt&&!In[Ht]&&z(us,Ht))){if(!(Ki&&z(xs,Ht))){if(!hi[Ht]||In[Ht]){if(!(It(ct)&&(ui.tagNameCheck instanceof RegExp&&z(ui.tagNameCheck,ct)||ui.tagNameCheck instanceof Function&&ui.tagNameCheck(ct))&&(ui.attributeNameCheck instanceof RegExp&&z(ui.attributeNameCheck,Ht)||ui.attributeNameCheck instanceof Function&&ui.attributeNameCheck(Ht))||Ht==="is"&&ui.allowCustomizedBuiltInElements&&(ui.tagNameCheck instanceof RegExp&&z(ui.tagNameCheck,Qt)||ui.tagNameCheck instanceof Function&&ui.tagNameCheck(Qt))))return!1}else if(!no[Ht]){if(!z(ws,D(Qt,Rn,""))){if(!((Ht==="src"||Ht==="xlink:href"||Ht==="href")&&ct!=="script"&&E(Qt,"data:")===0&&Fi[ct])){if(!($i&&!z(Wn,D(Qt,Rn,"")))){if(Qt)return!1}}}}}}return!0},It=function(ct){return ct!=="annotation-xml"&&S(ct,Bn)},Ut=function(ct){rt("beforeSanitizeAttributes",ct,null);const{attributes:Ht}=ct;if(!Ht)return;const Qt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:hi};let fi=Ht.length;for(;fi--;){const en=Ht[fi],{name:di,namespaceURI:$t,value:vi}=en,Hi=qt(di);let Ui=di==="value"?vi:B(vi);if(Qt.attrName=Hi,Qt.attrValue=Ui,Qt.keepAttr=!0,Qt.forceKeepAttr=void 0,rt("uponSanitizeAttribute",ct,Qt),Ui=Qt.attrValue,Qt.forceKeepAttr||(ue(di,ct),!Qt.keepAttr))continue;if(!St&&z(/\/>/i,Ui)){ue(di,ct);continue}yt&&C([Dn,Mi,Zn],En=>{Ui=D(Ui,En," ")});const Yn=qt(ct.nodeName);if(jt(Yn,Hi,Ui)){if(yn&&(Hi==="id"||Hi==="name")&&(ue(di,ct),Ui=fs+Ui),Yt&&z(/((--!?|])>)|<\/(style|title)/i,Ui)){ue(di,ct);continue}if(ei&&typeof Ii=="object"&&typeof Ii.getAttributeType=="function"&&!$t)switch(Ii.getAttributeType(Yn,Hi)){case"TrustedHTML":{Ui=ei.createHTML(Ui);break}case"TrustedScriptURL":{Ui=ei.createScriptURL(Ui);break}}try{$t?ct.setAttributeNS($t,di,Ui):ct.setAttribute(di,Ui),ze(ct)?_e(ct):v(we.removed)}catch{}}}rt("afterSanitizeAttributes",ct,null)},Bt=function Kt(ct){let Ht=null;const Qt=Ie(ct);for(rt("beforeSanitizeShadowDOM",ct,null);Ht=Qt.nextNode();)rt("uponSanitizeShadowNode",Ht,null),!Ct(Ht)&&(Ht.content instanceof Z&&Kt(Ht.content),Ut(Ht));rt("afterSanitizeShadowDOM",ct,null)};return we.sanitize=function(Kt){let ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ht=null,Qt=null,fi=null,en=null;if(zt=!Kt,zt&&(Kt="<!-->"),typeof Kt!="string"&&!Je(Kt))if(typeof Kt.toString=="function"){if(Kt=Kt.toString(),typeof Kt!="string")throw W("dirty is not a string, aborting")}else throw W("toString is not a function");if(!we.isSupported)return Kt;if(Li||Wi(ct),we.removed=[],typeof Kt=="string"&&(_s=!1),_s){if(Kt.nodeName){const vi=qt(Kt.nodeName);if(!Ln[vi]||wt[vi])throw W("root node is forbidden and cannot be sanitized in-place")}}else if(Kt instanceof pt)Ht=Ee("<!---->"),Qt=Ht.ownerDocument.importNode(Kt,!0),Qt.nodeType===ot.element&&Qt.nodeName==="BODY"||Qt.nodeName==="HTML"?Ht=Qt:Ht.appendChild(Qt);else{if(!Pi&&!yt&&!ii&&Kt.indexOf("<")===-1)return ei&&Cn?ei.createHTML(Kt):Kt;if(Ht=Ee(Kt),!Ht)return Pi?null:Cn?ai:""}Ht&&Bi&&_e(Ht.firstChild);const di=Ie(_s?Kt:Ht);for(;fi=di.nextNode();)Ct(fi)||(fi.content instanceof Z&&Bt(fi.content),Ut(fi));if(_s)return Kt;if(Pi){if(un)for(en=ji.call(Ht.ownerDocument);Ht.firstChild;)en.appendChild(Ht.firstChild);else en=Ht;return(hi.shadowroot||hi.shadowrootmode)&&(en=dn.call(ri,en,!0)),en}let $t=ii?Ht.outerHTML:Ht.innerHTML;return ii&&Ln["!doctype"]&&Ht.ownerDocument&&Ht.ownerDocument.doctype&&Ht.ownerDocument.doctype.name&&z(it,Ht.ownerDocument.doctype.name)&&($t="<!DOCTYPE "+Ht.ownerDocument.doctype.name+`>
`+$t),yt&&C([Dn,Mi,Zn],vi=>{$t=D($t,vi," ")}),ei&&Cn?ei.createHTML($t):$t},we.setConfig=function(){let Kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wi(Kt),Li=!0},we.clearConfig=function(){Si=null,Li=!1},we.isValidAttribute=function(Kt,ct,Ht){Si||Wi({});const Qt=qt(Kt),fi=qt(ct);return jt(Qt,fi,Ht)},we.addHook=function(Kt,ct){typeof ct=="function"&&(nn[Kt]=nn[Kt]||[],_(nn[Kt],ct))},we.removeHook=function(Kt){if(nn[Kt])return v(nn[Kt])},we.removeHooks=function(Kt){nn[Kt]&&(nn[Kt]=[])},we.removeAllHooks=function(){nn={}},we}var at=Rt(),Xe=null;const pe=at.version,te=at.isSupported,oe=at.sanitize,Te=at.setConfig,Ve=at.clearConfig,We=at.isValidAttribute,dt=at.addHook,Ye=at.removeHook,mt=at.removeHooks,Dt=at.removeAllHooks},46797:(Mt,He,c)=>{c.d(He,{EN:()=>u.editor,eo:()=>u.languages});var u=c(65068);var G=Object.defineProperty,U=Object.getOwnPropertyDescriptor,P=Object.getOwnPropertyNames,M=Object.prototype.hasOwnProperty,w=(h,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of P(e))!M.call(h,s)&&s!==t&&G(h,s,{get:()=>e[s],enumerable:!(i=U(e,s))||i.enumerable});return h},O=(h,e,t)=>(w(h,e,"default"),t&&w(t,e,"default")),A={};O(A,u);var I={},b={},C=class n1{static getOrCreate(e){return b[e]||(b[e]=new n1(e)),b[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,i)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=i})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,I[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}};async function v(h){await C.getOrCreate(h).load(),A.editor.createModel("",h).dispose()}function _(h){const e=h.id;I[e]=h,A.languages.register(h);const t=C.getOrCreate(e);A.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),A.languages.onLanguageEncountered(e,async()=>{const i=await t.load();A.languages.setLanguageConfiguration(e,i.conf)})}_({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>c.e(91905).then(c.bind(c,91905))});_({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>c.e(2793).then(c.bind(c,2793))});_({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>c.e(2879).then(c.bind(c,2879))});_({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>c.e(63447).then(c.bind(c,63447))});_({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>c.e(63751).then(c.bind(c,63751))});_({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>c.e(48039).then(c.bind(c,48039))});_({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>c.e(61391).then(c.bind(c,61391))});_({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>c.e(50785).then(c.bind(c,50785))});_({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>c.e(91187).then(c.bind(c,91187))}),_({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>c.e(91187).then(c.bind(c,91187))});_({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>c.e(45111).then(c.bind(c,45111))});_({id:"csp",extensions:[".csp"],aliases:["CSP","csp"],loader:()=>c.e(96639).then(c.bind(c,96639))});_({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>c.e(24612).then(c.bind(c,24612))});_({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>c.e(74451).then(c.bind(c,74451))});_({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>c.e(56087).then(c.bind(c,56087))});_({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>c.e(70505).then(c.bind(c,70505))});_({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>c.e(14679).then(c.bind(c,14679))});_({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>c.e(50175).then(c.bind(c,50175))});_({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>c.e(10599).then(c.bind(c,10599))});_({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>c.e(48121).then(c.bind(c,70502))});_({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>c.e(83191).then(c.bind(c,83191)).then(h=>h.TagAutoInterpolationDollar)}),_({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>c.e(83191).then(c.bind(c,83191)).then(h=>h.TagAngleInterpolationDollar)}),_({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>c.e(83191).then(c.bind(c,83191)).then(h=>h.TagBracketInterpolationDollar)}),_({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>c.e(83191).then(c.bind(c,83191)).then(h=>h.TagAngleInterpolationBracket)}),_({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>c.e(83191).then(c.bind(c,83191)).then(h=>h.TagBracketInterpolationBracket)}),_({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>c.e(83191).then(c.bind(c,83191)).then(h=>h.TagAutoInterpolationDollar)}),_({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>c.e(83191).then(c.bind(c,83191)).then(h=>h.TagAutoInterpolationBracket)});_({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>c.e(31213).then(c.bind(c,53594))});_({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>c.e(23127).then(c.bind(c,23127))});_({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>c.e(25717).then(c.bind(c,25717))});_({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>c.e(29783).then(c.bind(c,52164))});_({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>c.e(31095).then(c.bind(c,31095))});_({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>c.e(51847).then(c.bind(c,51847))});_({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>c.e(27633).then(c.bind(c,27633))});_({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>c.e(23767).then(c.bind(c,23767))});_({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>c.e(29659).then(c.bind(c,29659))});_({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>c.e(33391).then(c.bind(c,33391))});_({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>c.e(30935).then(c.bind(c,30935))});_({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>c.e(82467).then(c.bind(c,82467))});_({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>c.e(7187).then(c.bind(c,7187))});_({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>c.e(92753).then(c.bind(c,92753))});_({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>c.e(20485).then(c.bind(c,20485))});_({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>c.e(3111).then(c.bind(c,3111))});_({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:()=>c.e(22599).then(c.bind(c,22599))});_({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>c.e(22935).then(c.bind(c,22935))});_({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>c.e(59907).then(c.bind(c,59907))});_({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>c.e(76795).then(c.bind(c,76795))});_({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>c.e(89703).then(c.bind(c,89703))});_({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>c.e(71637).then(c.bind(c,71637))});_({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>c.e(98407).then(c.bind(c,98407))});_({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:()=>c.e(31415).then(c.bind(c,31415))});_({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>c.e(77447).then(c.bind(c,77447))});_({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>c.e(58551).then(c.bind(c,58551))});_({id:"pla",extensions:[".pla"],loader:()=>c.e(9175).then(c.bind(c,9175))});_({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>c.e(65671).then(c.bind(c,65671))});_({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>c.e(41547).then(c.bind(c,41547))});_({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>c.e(33335).then(c.bind(c,33335))});_({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>c.e(88455).then(c.bind(c,88455))});_({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>c.e(69603).then(c.bind(c,69603))});_({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>c.e(89957).then(c.bind(c,89957))});_({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>c.e(72407).then(c.bind(c,72407))});_({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>c.e(7339).then(c.bind(c,7339))});_({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>c.e(67651).then(c.bind(c,67651))});_({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>c.e(37143).then(c.bind(c,37143))});_({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>c.e(26103).then(c.bind(c,26103))});_({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>c.e(57215).then(c.bind(c,57215))});_({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>c.e(84721).then(c.bind(c,84721))});_({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>c.e(89937).then(c.bind(c,89937))});_({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>c.e(83975).then(c.bind(c,83975))});_({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>c.e(18647).then(c.bind(c,18647))});_({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>c.e(35563).then(c.bind(c,35563))});_({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>c.e(16169).then(c.bind(c,16169))});_({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>c.e(45923).then(c.bind(c,45923))});_({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>c.e(11095).then(c.bind(c,11095))});_({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>c.e(34197).then(c.bind(c,34197))});_({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>c.e(58647).then(c.bind(c,58647))});_({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>c.e(21235).then(c.bind(c,21235))});_({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:()=>c.e(88759).then(c.bind(c,88759))});_({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>c.e(68151).then(c.bind(c,68151))});_({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>c.e(74719).then(c.bind(c,97100))}),_({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>c.e(74719).then(c.bind(c,97100))});_({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>c.e(22135).then(c.bind(c,22135))});_({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>c.e(57623).then(c.bind(c,57623))});_({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>c.e(86231).then(c.bind(c,8612))});_({id:"typespec",extensions:[".tsp"],aliases:["TypeSpec"],loader:()=>c.e(27483).then(c.bind(c,27483))});_({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>c.e(87429).then(c.bind(c,87429))});_({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:()=>c.e(72135).then(c.bind(c,72135))});_({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>c.e(28255).then(c.bind(c,28255))});_({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>c.e(85691).then(c.bind(c,85691))});var d=Object.defineProperty,m=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,D=Object.prototype.hasOwnProperty,E=(h,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of S(e))!D.call(h,s)&&s!==t&&d(h,s,{get:()=>e[s],enumerable:!(i=m(e,s))||i.enumerable});return h},B=(h,e,t)=>(E(h,e,"default"),t&&E(t,e,"default")),R={};B(R,u);var z=class{constructor(h,e,t){this._onDidChange=new R.Emitter,this._languageId=h,this.setOptions(e),this.setModeConfiguration(t)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(h){this._options=h||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(h){this.setOptions(h)}setModeConfiguration(h){this._modeConfiguration=h||Object.create(null),this._onDidChange.fire(this)}},W={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},$={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},Q=new z("css",W,$),q=new z("scss",W,$),ne=new z("less",W,$);R.languages.css={cssDefaults:Q,lessDefaults:ne,scssDefaults:q};function ve(){return c.e(39550).then(c.bind(c,39550))}R.languages.onLanguage("less",()=>{ve().then(h=>h.setupMode(ne))}),R.languages.onLanguage("scss",()=>{ve().then(h=>h.setupMode(q))}),R.languages.onLanguage("css",()=>{ve().then(h=>h.setupMode(Q))});var Re=Object.defineProperty,Ae=Object.getOwnPropertyDescriptor,re=Object.getOwnPropertyNames,K=Object.prototype.hasOwnProperty,F=(h,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of re(e))!K.call(h,s)&&s!==t&&Re(h,s,{get:()=>e[s],enumerable:!(i=Ae(e,s))||i.enumerable});return h},N=(h,e,t)=>(F(h,e,"default"),t&&F(t,e,"default")),j={};N(j,u);var me=class{constructor(h,e,t){this._onDidChange=new j.Emitter,this._languageId=h,this.setOptions(e),this.setModeConfiguration(t)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(h){this._options=h||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(h){this._modeConfiguration=h||Object.create(null),this._onDidChange.fire(this)}},ce={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},he={format:ce,suggest:{},data:{useDefaultDataProvider:!0}};function Le(h){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:h===Y,documentFormattingEdits:h===Y,documentRangeFormattingEdits:h===Y}}var Y="html",ae="handlebars",Ce="razor",Pe=Ze(Y,he,Le(Y)),ye=Pe.defaults,Ke=Ze(ae,he,Le(ae)),qe=Ke.defaults,Ue=Ze(Ce,he,Le(Ce)),x=Ue.defaults;j.languages.html={htmlDefaults:ye,razorDefaults:x,handlebarDefaults:qe,htmlLanguageService:Pe,handlebarLanguageService:Ke,razorLanguageService:Ue,registerHTMLLanguageService:Ze};function it(){return c.e(34878).then(c.bind(c,34878))}function Ze(h,e=he,t=Le(h)){const i=new me(h,e,t);let s;const o=j.languages.onLanguage(h,async()=>{s=(await it()).setupMode(i)});return{defaults:i,dispose(){o.dispose(),s?.dispose(),s=void 0}}}var _t=Object.defineProperty,ot=Object.getOwnPropertyDescriptor,Pt=Object.getOwnPropertyNames,Wt=Object.prototype.hasOwnProperty,Rt=(h,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Pt(e))!Wt.call(h,s)&&s!==t&&_t(h,s,{get:()=>e[s],enumerable:!(i=ot(e,s))||i.enumerable});return h},at=(h,e,t)=>(Rt(h,e,"default"),t&&Rt(t,e,"default")),Xe={};at(Xe,u);var pe=class{constructor(h,e,t){this._onDidChange=new Xe.Emitter,this._languageId=h,this.setDiagnosticsOptions(e),this.setModeConfiguration(t)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(h){this._diagnosticsOptions=h||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(h){this._modeConfiguration=h||Object.create(null),this._onDidChange.fire(this)}},te={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},oe={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},Te=new pe("json",te,oe),Ve=()=>We().then(h=>h.getWorker());Xe.languages.json={jsonDefaults:Te,getWorker:Ve};function We(){return c.e(95084).then(c.bind(c,95084))}Xe.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]}),Xe.languages.onLanguage("json",()=>{We().then(h=>h.setupMode(Te))});var dt=c(3621),Ye=c(61423),mt=c(84519),Dt=c(67538),Se=c(31938),we=c(44727),Xt=c(37100),ri=c(42535),ke=c(89464),Z=c(45573),Fe=c(76222),pt=c(54752),et=c(25894),Zt=c(14998);class bi extends Fe.L{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:(0,Z.aS)("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),icon:Dt.W.map,toggled:et.M$.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:et.M$.has("isInDiffEditor"),menu:{when:et.M$.has("isInDiffEditor"),id:Fe.D8.EditorTitle,order:22,group:"navigation"}})}run(e,...t){const i=e.get(pt.pG),s=!i.getValue("diffEditor.hideUnchangedRegions.enabled");i.updateValue("diffEditor.hideUnchangedRegions.enabled",s)}}class ci extends Fe.L{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:(0,Z.aS)("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),precondition:et.M$.has("isInDiffEditor")})}run(e,...t){const i=e.get(pt.pG),s=!i.getValue("diffEditor.experimental.showMoves");i.updateValue("diffEditor.experimental.showMoves",s)}}class Oi extends Fe.L{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:(0,Z.aS)("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),precondition:et.M$.has("isInDiffEditor")})}run(e,...t){const i=e.get(pt.pG),s=!i.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");i.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",s)}}const Ii=(0,Z.aS)("diffEditor","Diff Editor");class yi extends we.qO{constructor(){super({id:"diffEditor.switchSide",title:(0,Z.aS)("switchSide","Switch Side"),icon:Dt.W.arrowSwap,precondition:et.M$.has("isInDiffEditor"),f1:!0,category:Ii})}runEditorCommand(e,t,i){const s=wi(e);if(s instanceof ri.T){if(i&&i.dryRun)return{destinationSelection:s.mapToOtherSide().destinationSelection};s.switchSide()}}}class Vt extends we.qO{constructor(){super({id:"diffEditor.exitCompareMove",title:(0,Z.aS)("exitCompareMove","Exit Compare Move"),icon:Dt.W.close,precondition:ke.R.comparingMovedCode,f1:!1,category:Ii,keybinding:{weight:1e4,primary:9}})}runEditorCommand(e,t,...i){const s=wi(e);s instanceof ri.T&&s.exitCompareMove()}}class _n extends we.qO{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:(0,Z.aS)("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),icon:Dt.W.fold,precondition:et.M$.has("isInDiffEditor"),f1:!0,category:Ii})}runEditorCommand(e,t,...i){const s=wi(e);s instanceof ri.T&&s.collapseAllUnchangedRegions()}}class oi extends we.qO{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:(0,Z.aS)("showAllUnchangedRegions","Show All Unchanged Regions"),icon:Dt.W.unfold,precondition:et.M$.has("isInDiffEditor"),f1:!0,category:Ii})}runEditorCommand(e,t,...i){const s=wi(e);s instanceof ri.T&&s.showAllUnchangedRegions()}}class Ne extends Fe.L{constructor(){super({id:"diffEditor.revert",title:(0,Z.aS)("revert","Revert"),f1:!1,category:Ii})}run(e,t){const i=Ci(e,t.originalUri,t.modifiedUri);i instanceof ri.T&&i.revertRangeMappings(t.mapping.innerChanges??[])}}const gt=(0,Z.aS)("accessibleDiffViewer","Accessible Diff Viewer");class ei extends Fe.L{static{this.id="editor.action.accessibleDiffViewer.next"}constructor(){super({id:ei.id,title:(0,Z.aS)("editor.action.accessibleDiffViewer.next","Go to Next Difference"),category:gt,precondition:et.M$.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(e){wi(e)?.accessibleDiffViewerNext()}}class ai extends Fe.L{static{this.id="editor.action.accessibleDiffViewer.prev"}constructor(){super({id:ai.id,title:(0,Z.aS)("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),category:gt,precondition:et.M$.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(e){wi(e)?.accessibleDiffViewerPrev()}}function Ci(h,e,t){return h.get(Xt.T).listDiffEditors().find(o=>{const l=o.getModifiedEditor(),g=o.getOriginalEditor();return l&&l.getModel()?.uri.toString()===t.toString()&&g&&g.getModel()?.uri.toString()===e.toString()})||null}function wi(h){const t=h.get(Xt.T).listDiffEditors(),i=(0,Se.bq)();if(i)for(const s of t){const o=s.getContainerDomNode();if(ji(o,i))return s}return null}function ji(h,e){let t=e;for(;t;){if(t===h)return!0;t=t.parentElement}return!1}var Di=c(93750);(0,Fe.ug)(bi),(0,Fe.ug)(ci),(0,Fe.ug)(Oi),Fe.ZG.appendMenuItem(Fe.D8.EditorTitle,{command:{id:new Oi().desc.id,title:(0,Z.kg)("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:et.M$.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:et.M$.has("isInDiffEditor")},order:11,group:"1_diff",when:et.M$.and(ke.R.diffEditorRenderSideBySideInlineBreakpointReached,et.M$.has("isInDiffEditor"))}),Fe.ZG.appendMenuItem(Fe.D8.EditorTitle,{command:{id:new ci().desc.id,title:(0,Z.kg)("showMoves","Show Moved Code Blocks"),icon:Dt.W.move,toggled:et.f1.create("config.diffEditor.experimental.showMoves",!0),precondition:et.M$.has("isInDiffEditor")},order:10,group:"1_diff",when:et.M$.has("isInDiffEditor")}),(0,Fe.ug)(Ne);for(const h of[{icon:Dt.W.arrowRight,key:ke.R.diffEditorInlineMode.toNegated()},{icon:Dt.W.discard,key:ke.R.diffEditorInlineMode}])Fe.ZG.appendMenuItem(Fe.D8.DiffEditorHunkToolbar,{command:{id:new Ne().desc.id,title:(0,Z.kg)("revertHunk","Revert Block"),icon:h.icon},when:et.M$.and(ke.R.diffEditorModifiedWritable,h.key),order:5,group:"primary"}),Fe.ZG.appendMenuItem(Fe.D8.DiffEditorSelectionToolbar,{command:{id:new Ne().desc.id,title:(0,Z.kg)("revertSelection","Revert Selection"),icon:h.icon},when:et.M$.and(ke.R.diffEditorModifiedWritable,h.key),order:5,group:"primary"});(0,Fe.ug)(yi),(0,Fe.ug)(Vt),(0,Fe.ug)(_n),(0,Fe.ug)(oi),Fe.ZG.appendMenuItem(Fe.D8.EditorTitle,{command:{id:ei.id,title:(0,Z.kg)("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:et.M$.has("isInDiffEditor")},order:10,group:"2_diff",when:et.M$.and(ke.R.accessibleDiffViewerVisible.negate(),et.M$.has("isInDiffEditor"))}),Di.w.registerCommandAlias("editor.action.diffReview.next",ei.id),(0,Fe.ug)(ei),Di.w.registerCommandAlias("editor.action.diffReview.prev",ai.id),(0,Fe.ug)(ai);var dn=c(78690),nn=c(53897),Dn=c(64840),Mi=c(47545),Zn=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},us=function(h,e){return function(t,i){e(t,i,h)}},xs;const Wn=new et.N1("selectionAnchorSet",!1);let Rn=class{static{xs=this}static{this.ID="editor.contrib.selectionAnchorController"}static get(e){return e.getContribution(xs.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=Wn.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(Mi.L.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new nn.Bc().appendText((0,Z.kg)("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,dn.xE)((0,Z.kg)("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(Mi.L.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};Rn=xs=Zn([us(1,et.fN)],Rn);class Bn extends we.ks{constructor(){super({id:"editor.action.setSelectionAnchor",label:(0,Z.kg)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2080),weight:100}})}async run(e,t){Rn.get(t)?.setSelectionAnchor()}}class ws extends we.ks{constructor(){super({id:"editor.action.goToSelectionAnchor",label:(0,Z.kg)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:Wn})}async run(e,t){Rn.get(t)?.goToSelectionAnchor()}}class Ln extends we.ks{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:(0,Z.kg)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:Wn,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2089),weight:100}})}async run(e,t){Rn.get(t)?.selectFromAnchorToCursor()}}class Qn extends we.ks{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:(0,Z.kg)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:Wn,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:9,weight:100}})}async run(e,t){Rn.get(t)?.cancelSelectionAnchor()}}(0,we.HW)(Rn.ID,Rn,4),(0,we.Fl)(Bn),(0,we.Fl)(ws),(0,we.Fl)(Ln),(0,we.Fl)(Qn);var hi=c(37519),vt=c(60599),ui=c(69504),wt=c(98414),In=c(26342),Ki=c(87451),Tt=c(19867),$i=c(41403);const St=(0,Tt.x1A)("editorOverviewRuler.bracketMatchForeground","#A0A0A0",Z.kg("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class yt extends we.ks{constructor(){super({id:"editor.action.jumpToBracket",label:Z.kg("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:3165,weight:100}})}run(e,t){Bi.get(t)?.jumpToBracket()}}class Yt extends we.ks{constructor(){super({id:"editor.action.selectToBracket",label:Z.kg("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:Z.aS("smartSelect.selectToBracketDescription","Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,i){let s=!0;i&&i.selectBrackets===!1&&(s=!1),Bi.get(t)?.selectToBracket(s)}}class ii extends we.ks{constructor(){super({id:"editor.action.removeBrackets",label:Z.kg("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:2561,weight:100}})}run(e,t){Bi.get(t)?.removeBrackets(this.id)}}class Li{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}}class Bi extends vt.jG{static{this.ID="editor.contrib.bracketMatchingController"}static get(e){return e.getContribution(Bi.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new hi.uC(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(72),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(72)&&(this._matchBrackets=this._editor.getOption(72),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(i=>{const s=i.getStartPosition(),o=e.bracketPairs.matchBracket(s);let l=null;if(o)o[0].containsPosition(s)&&!o[1].containsPosition(s)?l=o[1].getStartPosition():o[1].containsPosition(s)&&(l=o[0].getStartPosition());else{const g=e.bracketPairs.findEnclosingBrackets(s);if(g)l=g[1].getStartPosition();else{const k=e.bracketPairs.findNextBracket(s);k&&k.range&&(l=k.range.getStartPosition())}}return l?new Mi.L(l.lineNumber,l.column,l.lineNumber,l.column):new Mi.L(s.lineNumber,s.column,s.lineNumber,s.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=[];this._editor.getSelections().forEach(s=>{const o=s.getStartPosition();let l=t.bracketPairs.matchBracket(o);if(!l&&(l=t.bracketPairs.findEnclosingBrackets(o),!l)){const H=t.bracketPairs.findNextBracket(o);H&&H.range&&(l=t.bracketPairs.matchBracket(H.range.getStartPosition()))}let g=null,k=null;if(l){l.sort(wt.Q.compareRangesUsingStarts);const[H,ee]=l;if(g=e?H.getStartPosition():H.getEndPosition(),k=e?ee.getEndPosition():ee.getStartPosition(),ee.containsPosition(o)){const ie=g;g=k,k=ie}}g&&k&&i.push(new Mi.L(g.lineNumber,g.column,k.lineNumber,k.column))}),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach(i=>{const s=i.getPosition();let o=t.bracketPairs.matchBracket(s);o||(o=t.bracketPairs.findEnclosingBrackets(s)),o&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:o[0],text:""},{range:o[1],text:""}]),this._editor.pushUndoStop())})}static{this._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=Ki.kI.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,$i.Yf)(St),position:In.A5.Center}})}static{this._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=Ki.kI.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"})}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const e=[];let t=0;for(const i of this._lastBracketsData){const s=i.brackets;s&&(e[t++]={range:s[0],options:i.options},e[t++]={range:s[1],options:i.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),i=t.getVersionId();let s=[];this._lastVersionId===i&&(s=this._lastBracketsData);const o=[];let l=0;for(let ie=0,fe=e.length;ie<fe;ie++){const Me=e[ie];Me.isEmpty()&&(o[l++]=Me.getStartPosition())}o.length>1&&o.sort(ui.y.compare);const g=[];let k=0,H=0;const ee=s.length;for(let ie=0,fe=o.length;ie<fe;ie++){const Me=o[ie];for(;H<ee&&s[H].position.isBefore(Me);)H++;if(H<ee&&s[H].position.equals(Me))g[k++]=s[H];else{let xe=t.bracketPairs.matchBracket(Me,20),Qe=Bi._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!xe&&this._matchBrackets==="always"&&(xe=t.bracketPairs.findEnclosingBrackets(Me,20),Qe=Bi._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),g[k++]=new Li(Me,xe,Qe)}}this._lastBracketsData=g,this._lastVersionId=i}}(0,we.HW)(Bi.ID,Bi,1),(0,we.Fl)(Yt),(0,we.Fl)(yt),(0,we.Fl)(ii),Fe.ZG.appendMenuItem(Fe.D8.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:Z.kg({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class Pi{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const i=this._selection.startLineNumber,s=this._selection.startColumn,o=this._selection.endColumn;if(!(this._isMovingLeft&&s===1)&&!(!this._isMovingLeft&&o===e.getLineMaxColumn(i)))if(this._isMovingLeft){const l=new wt.Q(i,s-1,i,s),g=e.getValueInRange(l);t.addEditOperation(l,null),t.addEditOperation(new wt.Q(i,o,i,o),g)}else{const l=new wt.Q(i,o,i,o+1),g=e.getValueInRange(l);t.addEditOperation(l,null),t.addEditOperation(new wt.Q(i,s,i,s),g)}}computeCursorState(e,t){return this._isMovingLeft?new Mi.L(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new Mi.L(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class un extends we.ks{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const i=[],s=t.getSelections();for(const o of s)i.push(new Pi(o,this.left));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class Cn extends un{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:Z.kg("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:ke.R.writable})}}class sn extends un{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:Z.kg("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:ke.R.writable})}}(0,we.Fl)(Cn),(0,we.Fl)(sn);var yn=c(47917),fs=c(85613);class cs extends we.ks{constructor(){super({id:"editor.action.transposeLetters",label:Z.kg("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const i=t.getModel(),s=[],o=t.getSelections();for(const l of o){if(!l.isEmpty())continue;const g=l.startLineNumber,k=l.startColumn,H=i.getLineMaxColumn(g);if(g===1&&(k===1||k===2&&H===2))continue;const ee=k===H?l.getPosition():fs.I.rightPosition(i,l.getPosition().lineNumber,l.getPosition().column),ie=fs.I.leftPosition(i,ee),fe=fs.I.leftPosition(i,ie),Me=i.getValueInRange(wt.Q.fromPositions(fe,ie)),xe=i.getValueInRange(wt.Q.fromPositions(ie,ee)),Qe=wt.Q.fromPositions(fe,ee);s.push(new yn.iu(Qe,xe+Me))}s.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop())}}(0,we.Fl)(cs);var _s=c(38594),Mn=c(90692),vs=c(81669),Xi=c(93009),Fi=c(46204),os=c(13697);const no=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let h;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?h=crypto.getRandomValues.bind(crypto):h=function(i){for(let s=0;s<i.length;s++)i[s]=Math.floor(Math.random()*256);return i};const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){h(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let s=0,o="";return o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o}}();function so(h){return{asString:async()=>h,asFile:()=>{},value:typeof h=="string"?h:void 0}}function co(h,e,t){const i={id:no(),name:h,uri:e,data:t};return{asString:async()=>"",asFile:()=>i,value:void 0}}class $n{constructor(){this._entries=new Map}get size(){let e=0;for(const t of this._entries)e++;return e}has(e){return this._entries.has(this.toKey(e))}matches(e){const t=[...this._entries.keys()];return os.f.some(this,([i,s])=>s.asFile())&&t.push("files"),zt(Kn(e),t)}get(e){return this._entries.get(this.toKey(e))?.[0]}append(e,t){const i=this._entries.get(e);i?i.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*[Symbol.iterator](){for(const[e,t]of this._entries)for(const i of t)yield[e,i]}toKey(e){return Kn(e)}}function Kn(h){return h.toLowerCase()}function Xn(h,e){return zt(Kn(h),e.map(Kn))}function zt(h,e){if(h==="*/*")return e.length>0;if(e.includes(h))return!0;const t=h.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!t)return!1;const[i,s,o]=t;return o==="*"?e.some(l=>l.startsWith(s+"/")):!1}const le=Object.freeze({create:h=>(0,Xi.dM)(h.map(e=>e.toString())).join(`\r
`),split:h=>h.split(`\r
`),parse:h=>le.split(h).filter(e=>!e.startsWith("#"))});class Be{static{this.sep="."}static{this.None=new Be("@@none@@")}static{this.Empty=new Be("")}constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+Be.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new Be((this.value?[this.value,...e]:e).join(Be.sep))}}var ht=c(36035),Ft=c(95263),Ot=c(37473),qt=c(39642);const Si={EDITORS:"CodeEditors",FILES:"CodeFiles"};class mi{}const qi={DragAndDropContribution:"workbench.contributions.dragAndDrop"};qt.O.add(qi.DragAndDropContribution,new mi);class Wi{static{this.INSTANCE=new Wi}constructor(){}static getInstance(){return Wi.INSTANCE}hasData(e){return e&&e===this.proto}getData(e){if(this.hasData(e))return this.data}}function Ei(h){const e=new $n;for(const t of h.items){const i=t.type;if(t.kind==="string"){const s=new Promise(o=>t.getAsString(o));e.append(i,so(s))}else if(t.kind==="file"){const s=t.getAsFile();s&&e.append(i,Qi(s))}}return e}function Qi(h){const e=h.path?Ot.r.parse(h.path):void 0;return co(h.name,e,async()=>new Uint8Array(await h.arrayBuffer()))}const on=Object.freeze([Si.EDITORS,Si.FILES,Ft.t.RESOURCES,Ft.t.INTERNAL_URI_LIST]);function an(h,e=!1){const t=Ei(h),i=t.get(Ft.t.INTERNAL_URI_LIST);if(i)t.replace(ht.K.uriList,i);else if(e||!t.has(ht.K.uriList)){const s=[];for(const o of h.items){const l=o.getAsFile();if(l){const g=l.path;try{g?s.push(Ot.r.file(g).toString()):s.push(Ot.r.parse(l.name,!0).toString())}catch{}}}s.length&&t.replace(ht.K.uriList,so(le.create(s)))}for(const s of on)t.delete(s);return t}var Zi=c(69708),Et=c(9709),_e=c(84139),ue=c(54021),Ee=c(38266),Ie=c(32182),ze=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Je=function(h,e){return function(t,i){e(t,i,h)}};class rt{async provideDocumentPasteEdits(e,t,i,s,o){const l=await this.getEdit(i,o);if(l)return{edits:[{insertText:l.insertText,title:l.title,kind:l.kind,handledMimeType:l.handledMimeType,yieldTo:l.yieldTo}],dispose(){}}}async provideDocumentDropEdits(e,t,i,s){const o=await this.getEdit(i,s);if(o)return{edits:[{insertText:o.insertText,title:o.title,kind:o.kind,handledMimeType:o.handledMimeType,yieldTo:o.yieldTo}],dispose(){}}}}class Ct extends rt{constructor(){super(...arguments),this.kind=Ct.kind,this.dropMimeTypes=[ht.K.text],this.pasteMimeTypes=[ht.K.text]}static{this.id="text"}static{this.kind=new Be("text.plain")}async getEdit(e,t){const i=e.get(ht.K.text);if(!i||e.has(ht.K.uriList))return;const s=await i.asString();return{handledMimeType:ht.K.text,title:(0,Z.kg)("text.label","Insert Plain Text"),insertText:s,kind:this.kind}}}class jt extends rt{constructor(){super(...arguments),this.kind=new Be("uri.absolute"),this.dropMimeTypes=[ht.K.uriList],this.pasteMimeTypes=[ht.K.uriList]}async getEdit(e,t){const i=await Bt(e);if(!i.length||t.isCancellationRequested)return;let s=0;const o=i.map(({uri:g,originalText:k})=>g.scheme===ue.ny.file?g.fsPath:(s++,k)).join(" ");let l;return s>0?l=i.length>1?(0,Z.kg)("defaultDropProvider.uriList.uris","Insert Uris"):(0,Z.kg)("defaultDropProvider.uriList.uri","Insert Uri"):l=i.length>1?(0,Z.kg)("defaultDropProvider.uriList.paths","Insert Paths"):(0,Z.kg)("defaultDropProvider.uriList.path","Insert Path"),{handledMimeType:ht.K.uriList,insertText:o,title:l,kind:this.kind}}}let It=class extends rt{constructor(e){super(),this._workspaceContextService=e,this.kind=new Be("uri.relative"),this.dropMimeTypes=[ht.K.uriList],this.pasteMimeTypes=[ht.K.uriList]}async getEdit(e,t){const i=await Bt(e);if(!i.length||t.isCancellationRequested)return;const s=(0,Xi.Yc)(i.map(({uri:o})=>{const l=this._workspaceContextService.getWorkspaceFolder(o);return l?(0,Ee.iZ)(l.uri,o):void 0}));if(s.length)return{handledMimeType:ht.K.uriList,insertText:s.join(" "),title:i.length>1?(0,Z.kg)("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):(0,Z.kg)("defaultDropProvider.uriList.relativePath","Insert Relative Path"),kind:this.kind}}};It=ze([Je(0,Ie.VR)],It);class Ut{constructor(){this.kind=new Be("html"),this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:ht.K.text}]}async provideDocumentPasteEdits(e,t,i,s,o){if(s.triggerKind!==Et.FX.PasteAs&&!s.only?.contains(this.kind))return;const g=await i.get("text/html")?.asString();if(!(!g||o.isCancellationRequested))return{dispose(){},edits:[{insertText:g,yieldTo:this._yieldTo,title:(0,Z.kg)("pasteHtmlLabel","Insert HTML"),kind:this.kind}]}}}async function Bt(h){const e=h.get(ht.K.uriList);if(!e)return[];const t=await e.asString(),i=[];for(const s of le.parse(t))try{i.push({uri:Ot.r.parse(s),originalText:s})}catch{}return i}let Kt=class extends vt.jG{constructor(e,t){super(),this._register(e.documentDropEditProvider.register("*",new Ct)),this._register(e.documentDropEditProvider.register("*",new jt)),this._register(e.documentDropEditProvider.register("*",new It(t)))}};Kt=ze([Je(0,_e.ILanguageFeaturesService),Je(1,Ie.VR)],Kt);let ct=class extends vt.jG{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register("*",new Ct)),this._register(e.documentPasteEditProvider.register("*",new jt)),this._register(e.documentPasteEditProvider.register("*",new It(t))),this._register(e.documentPasteEditProvider.register("*",new Ut))}};ct=ze([Je(0,_e.ILanguageFeaturesService),Je(1,Ie.VR)],ct);class Ht{constructor(){this.value="",this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t=0,i=this.value.charCodeAt(e),s;if(s=Ht._table[i],typeof s=="number")return this.pos+=1,{type:s,pos:e,len:1};if(Ht.isDigitCharacter(i)){s=8;do t+=1,i=this.value.charCodeAt(e+t);while(Ht.isDigitCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}if(Ht.isVariableCharacter(i)){s=9;do i=this.value.charCodeAt(e+ ++t);while(Ht.isVariableCharacter(i)||Ht.isDigitCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}s=10;do t+=1,i=this.value.charCodeAt(e+t);while(!isNaN(i)&&typeof Ht._table[i]>"u"&&!Ht.isDigitCharacter(i)&&!Ht.isVariableCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}}class Qt{constructor(){this._children=[]}appendChild(e){return e instanceof fi&&this._children[this._children.length-1]instanceof fi?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:i}=e,s=i.children.indexOf(e),o=i.children.slice(0);o.splice(s,1,...t),i._children=o,function l(g,k){for(const H of g)H.parent=k,l(H.children,H)}(t,i)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof En)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class fi extends Qt{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new fi(this.value)}}class en extends Qt{}class di extends en{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}constructor(e){super(),this.index=e}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof $t?this._children[0]:void 0}clone(){const e=new di(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class $t extends Qt{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof fi&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new $t;return this.options.forEach(e.appendChild,e),e}}class vi extends Qt{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let i=!1,s=e.replace(this.regexp,function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(o=>o instanceof Hi&&!!o.elseValue)&&(s=this._replace([])),s}_replace(e){let t="";for(const i of this._children)if(i instanceof Hi){let s=e[i.index]||"";s=i.resolve(s),t+=s}else t+=i.toString();return t}toString(){return""}clone(){const e=new vi;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class Hi extends Qt{constructor(e,t,i,s){super(),this.index=e,this.shorthandName=t,this.ifValue=i,this.elseValue=s}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(i=>i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((i,s)=>s===0?i.charAt(0).toLowerCase()+i.substr(1):i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}clone(){return new Hi(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class Ui extends en{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new fi(t)],!0):!1}clone(){const e=new Ui(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function Yn(h,e){const t=[...h];for(;t.length>0;){const i=t.shift();if(!e(i))break;t.unshift(...i.children)}}class En extends Qt{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk(function(i){return i instanceof di&&(e.push(i),t=!t||t.index<i.index?i:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,i=!1;return this.walk(s=>s===e?(i=!0,!1):(t+=s.len(),!0)),i?t:-1}fullLen(e){let t=0;return Yn([e],i=>(t+=i.len(),!0)),t}enclosingPlaceholders(e){const t=[];let{parent:i}=e;for(;i;)i instanceof di&&t.push(i),i=i.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof Ui&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new En;return this._children=this.children.map(t=>t.clone()),e}walk(e){Yn(this.children,e)}}class ys{constructor(){this._scanner=new Ht,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,i){const s=new En;return this.parseFragment(e,s),this.ensureFinalTabstop(s,i??!1,t??!1),s}parseFragment(e,t){const i=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const s=new Map,o=[];t.walk(k=>(k instanceof di&&(k.isFinalTabstop?s.set(0,void 0):!s.has(k.index)&&k.children.length>0?s.set(k.index,k.children):o.push(k)),!0));const l=(k,H)=>{const ee=s.get(k.index);if(!ee)return;const ie=new di(k.index);ie.transform=k.transform;for(const fe of ee){const Me=fe.clone();ie.appendChild(Me),Me instanceof di&&s.has(Me.index)&&!H.has(Me.index)&&(H.add(Me.index),l(Me,H),H.delete(Me.index))}t.replace(k,[ie])},g=new Set;for(const k of o)l(k,g);return t.children.slice(i)}ensureFinalTabstop(e,t,i){(t||i&&e.placeholders.length>0)&&(e.placeholders.find(o=>o.index===0)||e.appendChild(new di(0)))}_accept(e,t){if(e===void 0||this._token.type===e){const i=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),i}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const s=this._scanner.next();if(s.type!==0&&s.type!==4&&s.type!==5)return!1}this._token=this._scanner.next()}const i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new fi(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const i=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new di(Number(t)):new Ui(t)),!0):this._backTo(i)}_parseComplexPlaceholder(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(i);const o=new di(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new fi("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){const l=new $t;for(;;){if(this._parseChoiceElement(l)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(l),this._accept(4)))return e.appendChild(o),!0}return this._backTo(i),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(i)}_parseChoiceElement(e){const t=this._token,i=[];for(;!(this._token.type===2||this._token.type===7);){let s;if((s=this._accept(5,!0))?s=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||s:s=this._accept(void 0,!0),!s)return this._backTo(t),!1;i.push(s)}return i.length===0?(this._backTo(t),!1):(e.appendChild(new fi(i.join(""))),!0)}_parseComplexVariable(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(i);const o=new Ui(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new fi("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(i)}_parseTransform(e){const t=new vi;let i="",s="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,i+=o;continue}if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new fi(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){s+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(i,s)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let i=!1;this._accept(3)&&(i=!0);const s=this._accept(8,!0);if(s)if(i){if(this._accept(4))return e.appendChild(new Hi(Number(s))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Hi(Number(s))),!0;else return this._backTo(t),!1;if(this._accept(6)){const o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Hi(Number(s),o)),!0)}else if(this._accept(11)){const o=this._until(4);if(o)return e.appendChild(new Hi(Number(s),void 0,o,void 0)),!0}else if(this._accept(12)){const o=this._until(4);if(o)return e.appendChild(new Hi(Number(s),void 0,void 0,o)),!0}else if(this._accept(13)){const o=this._until(1);if(o){const l=this._until(4);if(l)return e.appendChild(new Hi(Number(s),void 0,o,l)),!0}}else{const o=this._until(4);if(o)return e.appendChild(new Hi(Number(s),void 0,void 0,o)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new fi(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}function zn(h,e,t){return(typeof t.insertText=="string"?t.insertText==="":t.insertText.snippet==="")?{edits:t.additionalEdit?.edits??[]}:{edits:[...e.map(i=>new Zi.cw(h,{range:i,text:typeof t.insertText=="string"?ys.escape(t.insertText)+"$0":t.insertText.snippet,insertAsSnippet:!0})),...t.additionalEdit?.edits??[]]}}function Hn(h){function e(l,g){return"mimeType"in l?l.mimeType===g.handledMimeType:!!g.kind&&l.kind.contains(g.kind)}const t=new Map;for(const l of h)for(const g of l.yieldTo??[])for(const k of h)if(k!==l&&e(g,k)){let H=t.get(l);H||(H=[],t.set(l,H)),H.push(k)}if(!t.size)return Array.from(h);const i=new Set,s=[];function o(l){if(!l.length)return[];const g=l[0];if(s.includes(g))return l;if(i.has(g))return o(l.slice(1));let k=[];const H=t.get(g);return H&&(s.push(g),k=o(H),s.pop()),i.add(g),[...k,g,...o(l.slice(1))]}return o(Array.from(h))}var ds=c(41615),Vi=c(85565),mn=c(42640),Ri=c(81545),gs=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},zs=function(h,e){return function(t,i){e(t,i,h)}};const xn=Ki.kI.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:Vi.S8,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}});class ks extends vt.jG{static{this.baseId="editor.widget.inlineProgressWidget"}constructor(e,t,i,s,o){super(),this.typeId=e,this.editor=t,this.range=i,this.delegate=o,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(s),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=Se.$(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;const t=Se.$("span.icon");this.domNode.append(t),t.classList.add(...mn.L.asClassNameArray(Dt.W.loading),"codicon-modifier-spin");const i=()=>{const s=this.editor.getOption(67);this.domNode.style.height=`${s}px`,this.domNode.style.width=`${Math.ceil(.8*s)}px`};i(),this._register(this.editor.onDidChangeConfiguration(s=>{(s.hasChanged(52)||s.hasChanged(67))&&i()})),this._register(Se.ko(this.domNode,Se.Bx.CLICK,s=>{this.delegate.cancel()}))}getId(){return ks.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}}let Gs=class extends vt.jG{constructor(e,t,i){super(),this.id=e,this._editor=t,this._instantiationService=i,this._showDelay=500,this._showPromise=this._register(new vt.HE),this._currentWidget=this._register(new vt.HE),this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}dispose(){super.dispose(),this._currentDecorations.clear()}async showWhile(e,t,i,s,o){const l=this._operationIdPool++;this._currentOperation=l,this.clear(),this._showPromise.value=(0,hi.EQ)(()=>{const g=wt.Q.fromPositions(e);this._currentDecorations.set([{range:g,options:xn}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(ks,this.id,this._editor,g,t,s))},o??this._showDelay);try{return await i}finally{this._currentOperation===l&&(this.clear(),this._currentOperation=void 0)}}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};Gs=gs([zs(2,Ri._Y)],Gs);var Po=c(29554),zi=c(56491),Ps=c(73659),Qs=c(74990),wr=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},xo=function(h,e){return function(t,i){e(t,i,h)}},Is;let Ls=class{static{Is=this}static{this.ID="editor.contrib.messageController"}static{this.MESSAGE_VISIBLE=new et.N1("messageVisible",!1,Z.kg("messageVisible","Whether the editor is currently showing an inline message"))}static get(e){return e.getContribution(Is.ID)}constructor(e,t,i){this._openerService=i,this._messageWidget=new vt.HE,this._messageListeners=new vt.Cm,this._mouseOverMessage=!1,this._editor=e,this._visible=Is.MESSAGE_VISIBLE.bindTo(t)}dispose(){this._message?.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){(0,dn.xE)((0,nn.VS)(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=(0,nn.VS)(e)?(0,Po.Gc)(e,{actionHandler:{callback:s=>{this.closeMessage(),(0,Ps.i)(this._openerService,s,(0,nn.VS)(e)?e.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new pa(this._editor,t,typeof e=="string"?e:this._message.element),this._messageListeners.add(zi.Jh.debounce(this._editor.onDidBlurEditorText,(s,o)=>o,0)(()=>{this._mouseOverMessage||this._messageWidget.value&&Se.QX(Se.bq(),this._messageWidget.value.getDomNode())||this.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(Se.ko(this._messageWidget.value.getDomNode(),Se.Bx.MOUSE_ENTER,()=>this._mouseOverMessage=!0,!0)),this._messageListeners.add(Se.ko(this._messageWidget.value.getDomNode(),Se.Bx.MOUSE_LEAVE,()=>this._mouseOverMessage=!1,!0));let i;this._messageListeners.add(this._editor.onMouseMove(s=>{s.target.position&&(i?i.containsPosition(s.target.position)||this.closeMessage():i=new wt.Q(t.lineNumber-3,1,s.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(pa.fadeOut(this._messageWidget.value))}};Ls=Is=wr([xo(1,et.fN),xo(2,Qs.C)],Ls);const Ec=we.DX.bindToContribution(Ls.get);(0,we.E_)(new Ec({id:"leaveEditorMessage",precondition:Ls.MESSAGE_VISIBLE,handler:h=>h.closeMessage(),kbOpts:{weight:130,primary:9}}));class pa{static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(i),e.getDomNode().removeEventListener("animationend",t)},i=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,{lineNumber:t,column:i},s){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const l=document.createElement("div");typeof s=="string"?(l.classList.add("message"),l.textContent=s):(s.classList.add("message"),l.appendChild(s)),this._domNode.appendChild(l);const g=document.createElement("div");g.classList.add("anchor","below"),this._domNode.appendChild(g),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}}(0,we.HW)(Ls.ID,Ls,4);var lr=c(85653),Bs=c(67933),js=c(36470),_a=c(95660),Js=c(43860),hn=c(33902);function Ys(h,e){return e&&(h.stack||h.stacktrace)?Z.kg("stackTrace.format","{0}: {1}",qd(h),Nl(h.stack)||Nl(h.stacktrace)):qd(h)}function Nl(h){return Array.isArray(h)?h.join(`
`):h}function qd(h){return h.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${h.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof h.code=="string"&&typeof h.errno=="number"&&typeof h.syscall=="string"?Z.kg("nodeExceptionMessage","A system error occurred ({0})",h.message):h.message||Z.kg("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function yr(h=null,e=!1){if(!h)return Z.kg("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(h)){const t=Xi.Yc(h),i=yr(t[0],e);return t.length>1?Z.kg("error.moreErrors","{0} ({1} errors in total)",i,t.length):i}if(hn.Kg(h))return h;if(h.detail){const t=h.detail;if(t.error)return Ys(t.error,e);if(t.exception)return Ys(t.exception,e)}return h.stack?Ys(h,e):h.message?h.message:Z.kg("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var Ni=c(87856),vn=c(4879),ms=c(87386),As=c(22250),Ga=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Vr=function(h,e){return function(t,i){e(t,i,h)}},Lr;let va=class extends vt.jG{static{Lr=this}static{this.baseId="editor.widget.postEditWidget"}constructor(e,t,i,s,o,l,g,k,H,ee){super(),this.typeId=e,this.editor=t,this.showCommand=s,this.range=o,this.edits=l,this.onSelectNewEdit=g,this._contextMenuService=k,this._keybindingService=ee,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=i.bindTo(H),this.visibleContext.set(!0),this._register((0,vt.s)(()=>this.visibleContext.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register((0,vt.s)(()=>this.editor.removeContentWidget(this))),this._register(this.editor.onDidChangeCursorPosition(ie=>{o.containsPosition(ie.position)||this.dispose()})),this._register(zi.Jh.runAndSubscribe(ee.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){const e=this._keybindingService.lookupKeybinding(this.showCommand.id)?.getLabel();this.button.element.title=this.showCommand.label+(e?` (${e})`:"")}create(){this.domNode=Se.$(".post-edit-widget"),this.button=this._register(new _a.$(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(Se.ko(this.domNode,Se.Bx.CLICK,()=>this.showSelector()))}getId(){return Lr.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{const e=Se.BK(this.button.element);return{x:e.left+e.width,y:e.top+e.height}},getActions:()=>this.edits.allEdits.map((e,t)=>(0,Js.ih)({id:"",label:e.title,checked:t===this.edits.activeEditIndex,run:()=>{if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}}))})}};va=Lr=Ga([Vr(7,vn.Z),Vr(8,et.fN),Vr(9,ms.b)],va);let Qa=class extends vt.jG{constructor(e,t,i,s,o,l,g){super(),this._id=e,this._editor=t,this._visibleContext=i,this._showCommand=s,this._instantiationService=o,this._bulkEditService=l,this._notificationService=g,this._currentWidget=this._register(new vt.HE),this._register(zi.Jh.any(t.onDidChangeModel,t.onDidChangeModelContent)(()=>this.clear()))}async applyEditAndShowIfNeeded(e,t,i,s,o){const l=this._editor.getModel();if(!l||!e.length)return;const g=t.allEdits.at(t.activeEditIndex);if(!g)return;const k=async ut=>{const Lt=this._editor.getModel();Lt&&(await Lt.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:ut,allEdits:t.allEdits},i,s,o))},H=(ut,Lt)=>{(0,Ni.MB)(ut)||(this._notificationService.error(Lt),i&&this.show(e[0],t,k))};let ee;try{ee=await s(g,o)}catch(ut){return H(ut,(0,Z.kg)("resolveError",`Error resolving edit '{0}':
{1}`,g.title,yr(ut)))}if(o.isCancellationRequested)return;const ie=zn(l.uri,e,ee),fe=e[0],Me=l.deltaDecorations([],[{range:fe,options:{description:"paste-line-suffix",stickiness:0}}]);this._editor.focus();let xe,Qe;try{xe=await this._bulkEditService.apply(ie,{editor:this._editor,token:o}),Qe=l.getDecorationRange(Me[0])}catch(ut){return H(ut,(0,Z.kg)("applyError",`Error applying edit '{0}':
{1}`,g.title,yr(ut)))}finally{l.deltaDecorations(Me,[])}o.isCancellationRequested||i&&xe.isApplied&&t.allEdits.length>1&&this.show(Qe??fe,t,k)}show(e,t,i){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(va,this._id,this._editor,this._visibleContext,this._showCommand,e,t,i))}clear(){this._currentWidget.clear()}tryShowSelector(){this._currentWidget.value?.showSelector()}};Qa=Ga([Vr(4,Ri._Y),Vr(5,Zi.nu),Vr(6,As.Ot)],Qa);var Tl=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ur=function(h,e){return function(t,i){e(t,i,h)}},cr;const Jn="editor.changePasteType",Rl=new et.N1("pasteWidgetVisible",!1,(0,Z.kg)("pasteWidgetVisible","Whether the paste widget is showing")),zr="application/vnd.code.copyMetadata";let Zo=class extends vt.jG{static{cr=this}static{this.ID="editor.contrib.copyPasteActionController"}static get(e){return e.getContribution(cr.ID)}constructor(e,t,i,s,o,l,g){super(),this._bulkEditService=i,this._clipboardService=s,this._languageFeaturesService=o,this._quickInputService=l,this._progressService=g,this._editor=e;const k=e.getContainerDomNode();this._register((0,Se.ko)(k,"copy",H=>this.handleCopy(H))),this._register((0,Se.ko)(k,"cut",H=>this.handleCopy(H))),this._register((0,Se.ko)(k,"paste",H=>this.handlePaste(H),!0)),this._pasteProgressManager=this._register(new Gs("pasteIntoEditor",e,t)),this._postPasteWidgetManager=this._register(t.createInstance(Qa,"pasteIntoEditor",e,Rl,{id:Jn,label:(0,Z.kg)("postPasteWidgetTitle","Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(e){this._editor.focus();try{this._pasteAsActionContext={preferred:e},(0,Se.a)().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}clearWidgets(){this._postPasteWidgetManager.clear()}isPasteAsEnabled(){return this._editor.getOption(85).enabled}async finishedPaste(){await this._currentPasteOperation}handleCopy(e){if(!this._editor.hasTextFocus()||(this._clipboardService.clearInternalState?.(),!e.clipboardData||!this.isPasteAsEnabled()))return;const t=this._editor.getModel(),i=this._editor.getSelections();if(!t||!i?.length)return;const s=this._editor.getOption(37);let o=i;const l=i.length===1&&i[0].isEmpty();if(l){if(!s)return;o=[new wt.Q(o[0].startLineNumber,1,o[0].startLineNumber,1+t.getLineLength(o[0].startLineNumber))]}const g=this._editor._getViewModel()?.getPlainTextToCopy(i,s,Mn.uF),H={multicursorText:Array.isArray(g)?g:null,pasteOnNewLine:l,mode:null},ee=this._languageFeaturesService.documentPasteEditProvider.ordered(t).filter(Qe=>!!Qe.prepareDocumentPaste);if(!ee.length){this.setCopyMetadata(e.clipboardData,{defaultPastePayload:H});return}const ie=Ei(e.clipboardData),fe=ee.flatMap(Qe=>Qe.copyMimeTypes??[]),Me=no();this.setCopyMetadata(e.clipboardData,{id:Me,providerCopyMimeTypes:fe,defaultPastePayload:H});const xe=(0,hi.SS)(async Qe=>{const ut=(0,Xi.Yc)(await Promise.all(ee.map(async Lt=>{try{return await Lt.prepareDocumentPaste(t,o,ie,Qe)}catch{return}})));ut.reverse();for(const Lt of ut)for(const[kt,ni]of Lt)ie.replace(kt,ni);return ie});cr._currentCopyOperation?.dataTransferPromise.cancel(),cr._currentCopyOperation={handle:Me,dataTransferPromise:xe}}async handlePaste(e){if(!e.clipboardData||!this._editor.hasTextFocus())return;Ls.get(this._editor)?.closeMessage(),this._currentPasteOperation?.cancel(),this._currentPasteOperation=void 0;const t=this._editor.getModel(),i=this._editor.getSelections();if(!i?.length||!t||this._editor.getOption(92)||!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return;const s=this.fetchCopyMetadata(e),o=an(e.clipboardData);o.delete(zr);const l=[...e.clipboardData.types,...s?.providerCopyMimeTypes??[],ht.K.uriList],g=this._languageFeaturesService.documentPasteEditProvider.ordered(t).filter(k=>{const H=this._pasteAsActionContext?.preferred;return H&&k.providedPasteEditKinds&&!this.providerMatchesPreference(k,H)?!1:k.pasteMimeTypes?.some(ee=>Xn(ee,l))});if(!g.length){this._pasteAsActionContext?.preferred&&this.showPasteAsNoEditMessage(i,this._pasteAsActionContext.preferred);return}e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferred,g,i,o,s):this.doPasteInline(g,i,o,s,e)}showPasteAsNoEditMessage(e,t){Ls.get(this._editor)?.showMessage((0,Z.kg)("pasteAsError","No paste edits for '{0}' found",t instanceof Be?t.value:t.providerId),e[0].getStartPosition())}doPasteInline(e,t,i,s,o){const l=this._editor;if(!l.hasModel())return;const g=new ds.gI(l,3,void 0),k=(0,hi.SS)(async H=>{const ee=this._editor;if(!ee.hasModel())return;const ie=ee.getModel(),fe=new vt.Cm,Me=fe.add(new Fi.Qi(H));fe.add(g.token.onCancellationRequested(()=>Me.cancel()));const xe=Me.token;try{if(await this.mergeInDataFromCopy(i,s,xe),xe.isCancellationRequested)return;const Qe=e.filter(kt=>this.isSupportedPasteProvider(kt,i));if(!Qe.length||Qe.length===1&&Qe[0]instanceof Ct)return this.applyDefaultPasteHandler(i,s,xe,o);const ut={triggerKind:Et.FX.Automatic},Lt=await this.getPasteEdits(Qe,i,ie,t,ut,xe);if(fe.add(Lt),xe.isCancellationRequested)return;if(Lt.edits.length===1&&Lt.edits[0].provider instanceof Ct)return this.applyDefaultPasteHandler(i,s,xe,o);if(Lt.edits.length){const kt=ee.getOption(85).showPasteSelector==="afterPaste";return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:Lt.edits},kt,(ni,gi)=>new Promise((pi,pn)=>{(async()=>{try{const ln=ni.provider.resolveDocumentPasteEdit?.(ni,gi),Fn=new hi.Zv,Ws=ln&&await this._pasteProgressManager.showWhile(t[0].getEndPosition(),(0,Z.kg)("resolveProcess","Resolving paste edit. Click to cancel"),Promise.race([Fn.p,ln]),{cancel:()=>(Fn.cancel(),pn(new Ni.AL))},0);return Ws&&(ni.additionalEdit=Ws.additionalEdit),pi(ni)}catch(ln){return pn(ln)}})()}),xe)}await this.applyDefaultPasteHandler(i,s,xe,o)}finally{fe.dispose(),this._currentPasteOperation===k&&(this._currentPasteOperation=void 0)}});this._pasteProgressManager.showWhile(t[0].getEndPosition(),(0,Z.kg)("pasteIntoEditorProgress","Running paste handlers. Click to cancel and do basic paste"),k,{cancel:async()=>{try{if(k.cancel(),g.token.isCancellationRequested)return;await this.applyDefaultPasteHandler(i,s,g.token,o)}finally{g.dispose()}}}).then(()=>{g.dispose()}),this._currentPasteOperation=k}showPasteAsPick(e,t,i,s,o){const l=(0,hi.SS)(async g=>{const k=this._editor;if(!k.hasModel())return;const H=k.getModel(),ee=new vt.Cm,ie=ee.add(new ds.gI(k,3,void 0,g));try{if(await this.mergeInDataFromCopy(s,o,ie.token),ie.token.isCancellationRequested)return;let fe=t.filter(Lt=>this.isSupportedPasteProvider(Lt,s,e));e&&(fe=fe.filter(Lt=>this.providerMatchesPreference(Lt,e)));const Me={triggerKind:Et.FX.PasteAs,only:e&&e instanceof Be?e:void 0};let xe=ee.add(await this.getPasteEdits(fe,s,H,i,Me,ie.token));if(ie.token.isCancellationRequested)return;if(e&&(xe={edits:xe.edits.filter(Lt=>e instanceof Be?e.contains(Lt.kind):e.providerId===Lt.provider.id),dispose:xe.dispose}),!xe.edits.length){Me.only&&this.showPasteAsNoEditMessage(i,Me.only);return}let Qe;if(e?Qe=xe.edits.at(0):Qe=(await this._quickInputService.pick(xe.edits.map(kt=>({label:kt.title,description:kt.kind?.value,edit:kt})),{placeHolder:(0,Z.kg)("pasteAsPickerPlaceholder","Select Paste Action")}))?.edit,!Qe)return;const ut=zn(H.uri,i,Qe);await this._bulkEditService.apply(ut,{editor:this._editor})}finally{ee.dispose(),this._currentPasteOperation===l&&(this._currentPasteOperation=void 0)}});this._progressService.withProgress({location:10,title:(0,Z.kg)("pasteAsProgress","Running paste handlers")},()=>l)}setCopyMetadata(e,t){e.setData(zr,JSON.stringify(t))}fetchCopyMetadata(e){if(!e.clipboardData)return;const t=e.clipboardData.getData(zr);if(t)try{return JSON.parse(t)}catch{return}const[i,s]=vs.Mz.getTextData(e.clipboardData);if(s)return{defaultPastePayload:{mode:s.mode,multicursorText:s.multicursorText??null,pasteOnNewLine:!!s.isFromEmptySelection}}}async mergeInDataFromCopy(e,t,i){if(t?.id&&cr._currentCopyOperation?.handle===t.id){const s=await cr._currentCopyOperation.dataTransferPromise;if(i.isCancellationRequested)return;for(const[o,l]of s)e.replace(o,l)}if(!e.has(ht.K.uriList)){const s=await this._clipboardService.readResources();if(i.isCancellationRequested)return;s.length&&e.append(ht.K.uriList,so(le.create(s)))}}async getPasteEdits(e,t,i,s,o,l){const g=new vt.Cm,k=await(0,hi.PK)(Promise.all(e.map(async ee=>{try{const ie=await ee.provideDocumentPasteEdits?.(i,s,t,o,l);return ie&&g.add(ie),ie?.edits?.map(fe=>({...fe,provider:ee}))}catch(ie){(0,Ni.MB)(ie);return}})),l),H=(0,Xi.Yc)(k??[]).flat().filter(ee=>!o.only||o.only.contains(ee.kind));return{edits:Hn(H),dispose:()=>g.dispose()}}async applyDefaultPasteHandler(e,t,i,s){const l=await(e.get(ht.K.text)??e.get("text"))?.asString()??"";if(i.isCancellationRequested)return;const g={clipboardEvent:s,text:l,pasteOnNewLine:t?.defaultPastePayload.pasteOnNewLine??!1,multicursorText:t?.defaultPastePayload.multicursorText??null,mode:null};this._editor.trigger("keyboard","paste",g)}isSupportedPasteProvider(e,t,i){return e.pasteMimeTypes?.some(s=>t.matches(s))?!i||this.providerMatchesPreference(e,i):!1}providerMatchesPreference(e,t){return t instanceof Be?e.providedPasteEditKinds?e.providedPasteEditKinds.some(i=>t.contains(i)):!0:e.id===t.providerId}};Zo=cr=Tl([Ur(1,Ri._Y),Ur(2,Zi.nu),Ur(3,lr.h),Ur(4,_e.ILanguageFeaturesService),Ur(5,js.GK),Ur(6,Bs.G5)],Zo);const Dr="9_cutcopypaste",Er=Mn.ib||document.queryCommandSupported("cut"),xc=Mn.ib||document.queryCommandSupported("copy"),Pl=typeof navigator.clipboard>"u"||_s.gm?document.queryCommandSupported("paste"):!0;function jr(h){return h.register(),h}const kc=Er?jr(new we.fE({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Mn.ib?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:Fe.D8.MenubarEditMenu,group:"2_ccp",title:Z.kg({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:Fe.D8.EditorContext,group:Dr,title:Z.kg("actions.clipboard.cutLabel","Cut"),when:ke.R.writable,order:1},{menuId:Fe.D8.CommandPalette,group:"",title:Z.kg("actions.clipboard.cutLabel","Cut"),order:1},{menuId:Fe.D8.SimpleEditorContext,group:Dr,title:Z.kg("actions.clipboard.cutLabel","Cut"),when:ke.R.writable,order:1}]})):void 0,eh=xc?jr(new we.fE({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Mn.ib?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:Fe.D8.MenubarEditMenu,group:"2_ccp",title:Z.kg({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:Fe.D8.EditorContext,group:Dr,title:Z.kg("actions.clipboard.copyLabel","Copy"),order:2},{menuId:Fe.D8.CommandPalette,group:"",title:Z.kg("actions.clipboard.copyLabel","Copy"),order:1},{menuId:Fe.D8.SimpleEditorContext,group:Dr,title:Z.kg("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;Fe.ZG.appendMenuItem(Fe.D8.MenubarEditMenu,{submenu:Fe.D8.MenubarCopy,title:Z.aS("copy as","Copy As"),group:"2_ccp",order:3}),Fe.ZG.appendMenuItem(Fe.D8.EditorContext,{submenu:Fe.D8.EditorContextCopy,title:Z.aS("copy as","Copy As"),group:Dr,order:3}),Fe.ZG.appendMenuItem(Fe.D8.EditorContext,{submenu:Fe.D8.EditorContextShare,title:Z.aS("share","Share"),group:"11_share",order:-1,when:et.M$.and(et.M$.notEquals("resourceScheme","output"),ke.R.editorTextFocus)}),Fe.ZG.appendMenuItem(Fe.D8.ExplorerContext,{submenu:Fe.D8.ExplorerContextShare,title:Z.aS("share","Share"),group:"11_share",order:-1});const xr=Pl?jr(new we.fE({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Mn.ib?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:Fe.D8.MenubarEditMenu,group:"2_ccp",title:Z.kg({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:Fe.D8.EditorContext,group:Dr,title:Z.kg("actions.clipboard.pasteLabel","Paste"),when:ke.R.writable,order:4},{menuId:Fe.D8.CommandPalette,group:"",title:Z.kg("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:Fe.D8.SimpleEditorContext,group:Dr,title:Z.kg("actions.clipboard.pasteLabel","Paste"),when:ke.R.writable,order:4}]})):void 0;class Al extends we.ks{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:Z.kg("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:ke.R.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(37)&&t.getSelection().isEmpty()||(vs.Eq.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),vs.Eq.forceCopyWithSyntaxHighlighting=!1)}}function Ya(h,e){h&&(h.addImplementation(1e4,"code-editor",(t,i)=>{const s=t.get(Xt.T).getFocusedCodeEditor();if(s&&s.hasTextFocus()){const o=s.getOption(37),l=s.getSelection();return l&&l.isEmpty()&&!o||s.getContainerDomNode().ownerDocument.execCommand(e),!0}return!1}),h.addImplementation(0,"generic-dom",(t,i)=>((0,Se.a)().execCommand(e),!0)))}Ya(kc,"cut"),Ya(eh,"copy"),xr&&(xr.addImplementation(1e4,"code-editor",(h,e)=>{const t=h.get(Xt.T),i=h.get(lr.h),s=t.getFocusedCodeEditor();return s&&s.hasTextFocus()?s.getContainerDomNode().ownerDocument.execCommand("paste")?Zo.get(s)?.finishedPaste()??Promise.resolve():Mn.HZ?(async()=>{const l=await i.readText();if(l!==""){const g=vs.bs.INSTANCE.get(l);let k=!1,H=null,ee=null;g&&(k=s.getOption(37)&&!!g.isFromEmptySelection,H=typeof g.multicursorText<"u"?g.multicursorText:null,ee=g.mode),s.trigger("keyboard","paste",{text:l,pasteOnNewLine:k,multicursorText:H,mode:ee})}})():!0:!1}),xr.addImplementation(0,"generic-dom",(h,e)=>((0,Se.a)().execCommand("paste"),!0))),xc&&(0,we.Fl)(Al);var Kr=c(98020),Zs=c(65365),is=c(91090);const On=new class{constructor(){this.QuickFix=new Be("quickfix"),this.Refactor=new Be("refactor"),this.RefactorExtract=this.Refactor.append("extract"),this.RefactorInline=this.Refactor.append("inline"),this.RefactorMove=this.Refactor.append("move"),this.RefactorRewrite=this.Refactor.append("rewrite"),this.Notebook=new Be("notebook"),this.Source=new Be("source"),this.SourceOrganizeImports=this.Source.append("organizeImports"),this.SourceFixAll=this.Source.append("fixAll"),this.SurroundWith=this.Refactor.append("surround")}};var Ks;(function(h){h.Refactor="refactor",h.RefactorPreview="refactor preview",h.Lightbulb="lightbulb",h.Default="other (default)",h.SourceAction="source action",h.QuickFix="quick fix action",h.FixAll="fix all",h.OrganizeImports="organize imports",h.AutoFix="auto fix",h.QuickFixHover="quick fix hover window",h.OnSave="save participants",h.ProblemsView="problems view"})(Ks||(Ks={}));function Ca(h,e){return!(h.include&&!h.include.intersects(e)||h.excludes&&h.excludes.some(t=>Xo(e,t,h.include))||!h.includeSourceActions&&On.Source.contains(e))}function th(h,e){const t=e.kind?new Be(e.kind):void 0;return!(h.include&&(!t||!h.include.contains(t))||h.excludes&&t&&h.excludes.some(i=>Xo(t,i,h.include))||!h.includeSourceActions&&t&&On.Source.contains(t)||h.onlyIncludePreferredActions&&!e.isPreferred)}function Xo(h,e,t){return!(!e.contains(h)||t&&e.contains(t))}class Do{static fromUser(e,t){return!e||typeof e!="object"?new Do(t.kind,t.apply,!1):new Do(Do.getKindFromUser(e,t.kind),Do.getApplyFromUser(e,t.apply),Do.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new Be(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}}class Ic{constructor(e,t,i){this.action=e,this.provider=t,this.highlightRange=i}async resolve(e){if(this.provider?.resolveCodeAction&&!this.action.edit){let t;try{t=await this.provider.resolveCodeAction(this.action,e)}catch(i){(0,Ni.M_)(i)}t&&(this.action.edit=t.edit)}return this}}const Ol="editor.action.codeAction",Za="editor.action.quickFix",Xa="editor.action.autoFix",Ao="editor.action.refactor",$r="editor.action.sourceAction",ba="editor.action.organizeImports",Fl="editor.action.fixAll";class dr extends vt.jG{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator({action:e},{action:t}){return e.isAI&&!t.isAI?1:!e.isAI&&t.isAI?-1:(0,Xi.EI)(e.diagnostics)?(0,Xi.EI)(t.diagnostics)?dr.codeActionsPreferredComparator(e,t):-1:(0,Xi.EI)(t.diagnostics)?1:dr.codeActionsPreferredComparator(e,t)}constructor(e,t,i){super(),this.documentation=t,this._register(i),this.allActions=[...e].sort(dr.codeActionsComparator),this.validActions=this.allActions.filter(({action:s})=>!s.disabled)}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&On.QuickFix.contains(new Be(e.kind))&&!!e.isPreferred)}get hasAIFix(){return this.validActions.some(({action:e})=>!!e.isAI)}get allAIFixes(){return this.validActions.every(({action:e})=>!!e.isAI)}}const Wl={actions:[],documentation:void 0};async function Oo(h,e,t,i,s,o){const l=i.filter||{},g={...l,excludes:[...l.excludes||[],On.Notebook]},k={only:l.include?.value,trigger:i.type},H=new ds.ER(e,o),ee=i.type===2,ie=Ja(h,e,ee?g:l),fe=new vt.Cm,Me=ie.map(async Qe=>{try{s.report(Qe);const ut=await Qe.provideCodeActions(e,t,k,H.token);if(ut&&fe.add(ut),H.token.isCancellationRequested)return Wl;const Lt=(ut?.actions||[]).filter(ni=>ni&&th(l,ni)),kt=ih(Qe,Lt,l.include);return{actions:Lt.map(ni=>new Ic(ni,Qe)),documentation:kt}}catch(ut){if((0,Ni.MB)(ut))throw ut;return(0,Ni.M_)(ut),Wl}}),xe=h.onDidChange(()=>{const Qe=h.all(e);(0,Xi.aI)(Qe,ie)||H.cancel()});try{const Qe=await Promise.all(Me),ut=Qe.map(kt=>kt.actions).flat(),Lt=[...(0,Xi.Yc)(Qe.map(kt=>kt.documentation)),...Sa(h,e,i,ut)];return new dr(ut,Lt,fe)}finally{xe.dispose(),H.dispose()}}function Ja(h,e,t){return h.all(e).filter(i=>i.providedCodeActionKinds?i.providedCodeActionKinds.some(s=>Ca(t,new Be(s))):!0)}function*Sa(h,e,t,i){if(e&&i.length)for(const s of h.all(e))s._getAdditionalMenuItems&&(yield*s._getAdditionalMenuItems?.({trigger:t.type,only:t.filter?.include?.value},i.map(o=>o.action)))}function ih(h,e,t){if(!h.documentation)return;const i=h.documentation.map(s=>({kind:new Be(s.kind),command:s.command}));if(t){let s;for(const o of i)o.kind.contains(t)&&(s?s.kind.contains(o.kind)&&(s=o):s=o);if(s)return s?.command}for(const s of e)if(s.kind){for(const o of i)if(o.kind.contains(new Be(s.kind)))return o.command}}var Fo;(function(h){h.OnSave="onSave",h.FromProblemsView="fromProblemsView",h.FromCodeActions="fromCodeActions",h.FromAILightbulb="fromAILightbulb"})(Fo||(Fo={}));async function Mc(h,e,t,i,s=Fi.XO.None){const o=h.get(Zi.nu),l=h.get(Di.d),g=h.get(is.k),k=h.get(As.Ot);if(g.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),await e.resolve(s),!s.isCancellationRequested&&!(e.action.edit?.edits.length&&!(await o.apply(e.action.edit,{editor:i?.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:t!==Fo.OnSave,showPreview:i?.preview})).isApplied)&&e.action.command)try{await l.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(H){const ee=xu(H);k.error(typeof ee=="string"?ee:Z.kg("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}function xu(h){return typeof h=="string"?h:h instanceof Error&&typeof h.message=="string"?h.message:void 0}Di.w.registerCommand("_executeCodeActionProvider",async function(h,e,t,i,s){if(!(e instanceof Ot.r))throw(0,Ni.Qg)();const{codeActionProvider:o}=h.get(_e.ILanguageFeaturesService),l=h.get(Zs.IModelService).getModel(e);if(!l)throw(0,Ni.Qg)();const g=Mi.L.isISelection(t)?Mi.L.liftSelection(t):wt.Q.isIRange(t)?l.validateRange(t):void 0;if(!g)throw(0,Ni.Qg)();const k=typeof i=="string"?new Be(i):void 0,H=await Oo(o,l,g,{type:1,triggerAction:Ks.Default,filter:{includeSourceActions:!0,include:k}},Bs.ke.None,Fi.XO.None),ee=[],ie=Math.min(H.validActions.length,typeof s=="number"?s:0);for(let fe=0;fe<ie;fe++)ee.push(H.validActions[fe].resolve(Fi.XO.None));try{return await Promise.all(ee),H.validActions.map(fe=>fe.action)}finally{setTimeout(()=>H.dispose(),100)}});var Nc=c(37145),nh=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},sh=function(h,e){return function(t,i){e(t,i,h)}},wa;let ya=class{static{wa=this}static{this.codeActionCommands=[Ao,Ol,$r,ba,Fl]}constructor(e){this.keybindingService=e}getResolver(){const e=new Nc.d(()=>this.keybindingService.getKeybindings().filter(t=>wa.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let i=t.commandArgs;return t.command===ba?i={kind:On.SourceOrganizeImports.value}:t.command===Fl&&(i={kind:On.SourceFixAll.value}),{resolvedKeybinding:t.resolvedKeybinding,...Do.fromUser(i,{kind:Be.None,apply:"never"})}}));return t=>{if(t.kind)return this.bestKeybindingForCodeAction(t,e.value)?.resolvedKeybinding}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const i=new Be(e.kind);return t.filter(s=>s.kind.contains(i)).filter(s=>s.preferred?e.isPreferred:!0).reduceRight((s,o)=>s?s.kind.contains(o.kind)?o:s:o,void 0)}};ya=wa=nh([sh(0,ms.b)],ya);const qn=(0,Tt.x1A)("symbolIcon.arrayForeground",Tt.CU6,(0,Z.kg)("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Bl=(0,Tt.x1A)("symbolIcon.booleanForeground",Tt.CU6,(0,Z.kg)("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Tc=(0,Tt.x1A)("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,Z.kg)("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),La=(0,Tt.x1A)("symbolIcon.colorForeground",Tt.CU6,(0,Z.kg)("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Wo=(0,Tt.x1A)("symbolIcon.constantForeground",Tt.CU6,(0,Z.kg)("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),oh=(0,Tt.x1A)("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,Z.kg)("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),$s=(0,Tt.x1A)("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,Z.kg)("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jo=(0,Tt.x1A)("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,Z.kg)("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Gr=(0,Tt.x1A)("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,Z.kg)("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ku=(0,Tt.x1A)("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,Z.kg)("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Iu=(0,Tt.x1A)("symbolIcon.fileForeground",Tt.CU6,(0,Z.kg)("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),rh=(0,Tt.x1A)("symbolIcon.folderForeground",Tt.CU6,(0,Z.kg)("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),kr=(0,Tt.x1A)("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,Z.kg)("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),qa=(0,Tt.x1A)("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,Z.kg)("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),el=(0,Tt.x1A)("symbolIcon.keyForeground",Tt.CU6,(0,Z.kg)("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Mu=(0,Tt.x1A)("symbolIcon.keywordForeground",Tt.CU6,(0,Z.kg)("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Da=(0,Tt.x1A)("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,Z.kg)("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Nu=(0,Tt.x1A)("symbolIcon.moduleForeground",Tt.CU6,(0,Z.kg)("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Tu=(0,Tt.x1A)("symbolIcon.namespaceForeground",Tt.CU6,(0,Z.kg)("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ah=(0,Tt.x1A)("symbolIcon.nullForeground",Tt.CU6,(0,Z.kg)("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ho=(0,Tt.x1A)("symbolIcon.numberForeground",Tt.CU6,(0,Z.kg)("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Hl=(0,Tt.x1A)("symbolIcon.objectForeground",Tt.CU6,(0,Z.kg)("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Vl=(0,Tt.x1A)("symbolIcon.operatorForeground",Tt.CU6,(0,Z.kg)("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),po=(0,Tt.x1A)("symbolIcon.packageForeground",Tt.CU6,(0,Z.kg)("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ea=(0,Tt.x1A)("symbolIcon.propertyForeground",Tt.CU6,(0,Z.kg)("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),lh=(0,Tt.x1A)("symbolIcon.referenceForeground",Tt.CU6,(0,Z.kg)("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ru=(0,Tt.x1A)("symbolIcon.snippetForeground",Tt.CU6,(0,Z.kg)("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Rc=(0,Tt.x1A)("symbolIcon.stringForeground",Tt.CU6,(0,Z.kg)("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Pc=(0,Tt.x1A)("symbolIcon.structForeground",Tt.CU6,(0,Z.kg)("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),qs=(0,Tt.x1A)("symbolIcon.textForeground",Tt.CU6,(0,Z.kg)("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ac=(0,Tt.x1A)("symbolIcon.typeParameterForeground",Tt.CU6,(0,Z.kg)("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ul=(0,Tt.x1A)("symbolIcon.unitForeground",Tt.CU6,(0,Z.kg)("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ir=(0,Tt.x1A)("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,Z.kg)("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Qr=Object.freeze({kind:Be.Empty,title:(0,Z.kg)("codeAction.widget.id.more","More Actions...")}),Oc=Object.freeze([{kind:On.QuickFix,title:(0,Z.kg)("codeAction.widget.id.quickfix","Quick Fix")},{kind:On.RefactorExtract,title:(0,Z.kg)("codeAction.widget.id.extract","Extract"),icon:Dt.W.wrench},{kind:On.RefactorInline,title:(0,Z.kg)("codeAction.widget.id.inline","Inline"),icon:Dt.W.wrench},{kind:On.RefactorRewrite,title:(0,Z.kg)("codeAction.widget.id.convert","Rewrite"),icon:Dt.W.wrench},{kind:On.RefactorMove,title:(0,Z.kg)("codeAction.widget.id.move","Move"),icon:Dt.W.wrench},{kind:On.SurroundWith,title:(0,Z.kg)("codeAction.widget.id.surround","Surround With"),icon:Dt.W.surroundWith},{kind:On.Source,title:(0,Z.kg)("codeAction.widget.id.source","Source Action"),icon:Dt.W.symbolFile},Qr]);function Fc(h,e,t){if(!e)return h.map(o=>({kind:"action",item:o,group:Qr,disabled:!!o.action.disabled,label:o.action.disabled||o.action.title,canPreview:!!o.action.edit?.edits.length}));const i=Oc.map(o=>({group:o,actions:[]}));for(const o of h){const l=o.action.kind?new Be(o.action.kind):Be.None;for(const g of i)if(g.group.kind.contains(l)){g.actions.push(o);break}}const s=[];for(const o of i)if(o.actions.length){s.push({kind:"header",group:o.group});for(const l of o.actions){const g=o.group;s.push({kind:"action",item:l,group:l.action.isAI?{title:g.title,kind:g.kind,icon:Dt.W.sparkle}:g,label:l.action.title,disabled:!!l.action.disabled,keybinding:t(l.action)})}}return s}var qo=c(7069),xa=c(95312),rs=c(34021),Yr=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},tl=function(h,e){return function(t,i){e(t,i,h)}},Zr;const _o=(0,rs.pU)("gutter-lightbulb",Dt.W.lightBulb,Z.kg("gutterLightbulbWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor.")),Wc=(0,rs.pU)("gutter-lightbulb-auto-fix",Dt.W.lightbulbAutofix,Z.kg("gutterLightbulbAutoFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and a quick fix is available.")),Bo=(0,rs.pU)("gutter-lightbulb-sparkle",Dt.W.lightbulbSparkle,Z.kg("gutterLightbulbAIFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix is available.")),il=(0,rs.pU)("gutter-lightbulb-aifix-auto-fix",Dt.W.lightbulbSparkleAutofix,Z.kg("gutterLightbulbAIFixAutoFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.")),Bc=(0,rs.pU)("gutter-lightbulb-sparkle-filled",Dt.W.sparkleFilled,Z.kg("gutterLightbulbSparkleFilledWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available."));var ko;(function(h){h.Hidden={type:0};class e{constructor(i,s,o,l){this.actions=i,this.trigger=s,this.editorPosition=o,this.widgetPosition=l,this.type=1}}h.Showing=e})(ko||(ko={}));let Mr=class extends vt.jG{static{Zr=this}static{this.GUTTER_DECORATION=Ki.kI.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:mn.L.asClassName(Dt.W.lightBulb),glyphMargin:{position:In.ZS.Left},stickiness:1})}static{this.ID="editor.contrib.lightbulbWidget"}static{this._posPref=[0]}constructor(e,t){super(),this._editor=e,this._keybindingService=t,this._onClick=this._register(new zi.vl),this.onClick=this._onClick.event,this._state=ko.Hidden,this._gutterState=ko.Hidden,this._iconClasses=[],this.lightbulbClasses=["codicon-"+_o.id,"codicon-"+il.id,"codicon-"+Wc.id,"codicon-"+Bo.id,"codicon-"+Bc.id],this.gutterDecoration=Zr.GUTTER_DECORATION,this._domNode=Se.$("div.lightBulbWidget"),this._domNode.role="listbox",this._register(qo.q.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(i=>{const s=this._editor.getModel();(this.state.type!==1||!s||this.state.editorPosition.lineNumber>=s.getLineCount())&&this.hide(),(this.gutterState.type!==1||!s||this.gutterState.editorPosition.lineNumber>=s.getLineCount())&&this.gutterHide()})),this._register(Se.Xc(this._domNode,i=>{if(this.state.type!==1)return;this._editor.focus(),i.preventDefault();const{top:s,height:o}=Se.BK(this._domNode),l=this._editor.getOption(67);let g=Math.floor(l/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(g+=l),this._onClick.fire({x:i.posx,y:s+o+g,actions:this.state.actions,trigger:this.state.trigger})})),this._register(Se.ko(this._domNode,"mouseenter",i=>{(i.buttons&1)===1&&this.hide()})),this._register(zi.Jh.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings,()=>{this._preferredKbLabel=this._keybindingService.lookupKeybinding(Xa)?.getLabel()??void 0,this._quickFixKbLabel=this._keybindingService.lookupKeybinding(Za)?.getLabel()??void 0,this._updateLightBulbTitleAndIcon()})),this._register(this._editor.onMouseDown(async i=>{if(!i.target.element||!this.lightbulbClasses.some(k=>i.target.element&&i.target.element.classList.contains(k))||this.gutterState.type!==1)return;this._editor.focus();const{top:s,height:o}=Se.BK(i.target.element),l=this._editor.getOption(67);let g=Math.floor(l/3);this.gutterState.widgetPosition.position!==null&&this.gutterState.widgetPosition.position.lineNumber<this.gutterState.editorPosition.lineNumber&&(g+=l),this._onClick.fire({x:i.event.posx,y:s+o+g,actions:this.gutterState.actions,trigger:this.gutterState.trigger})}))}dispose(){super.dispose(),this._editor.removeContentWidget(this),this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,i){if(e.validActions.length<=0)return this.gutterHide(),this.hide();if(!this._editor.hasTextFocus())return this.gutterHide(),this.hide();if(!this._editor.getOptions().get(65).enabled)return this.gutterHide(),this.hide();const l=this._editor.getModel();if(!l)return this.gutterHide(),this.hide();const{lineNumber:g,column:k}=l.validatePosition(i),H=l.getOptions().tabSize,ee=this._editor.getOptions().get(50),ie=l.getLineContent(g),fe=(0,xa.G)(ie,H),Me=ee.spaceWidth*fe>22,xe=pi=>pi>2&&this._editor.getTopForLineNumber(pi)===this._editor.getTopForLineNumber(pi-1),Qe=this._editor.getLineDecorations(g);let ut=!1;if(Qe)for(const pi of Qe){const pn=pi.options.glyphMarginClassName;if(pn&&!this.lightbulbClasses.some(ln=>pn.includes(ln))){ut=!0;break}}let Lt=g,kt=1;if(!Me){const pi=pn=>{const ln=l.getLineContent(pn);return/^\s*$|^\s+/.test(ln)||ln.length<=kt};if(g>1&&!xe(g-1)){const pn=l.getLineCount(),ln=g===pn,Fn=g>1&&pi(g-1),Ws=!ln&&pi(g+1),Rs=pi(g),Yo=!Ws&&!Fn;if(!Ws&&!Fn&&!ut)return this.gutterState=new ko.Showing(e,t,i,{position:{lineNumber:Lt,column:kt},preference:Zr._posPref}),this.renderGutterLightbub(),this.hide();Fn||ln||Fn&&!Rs?Lt-=1:(Ws||Yo&&Rs)&&(Lt+=1)}else if(g===1&&(g===l.getLineCount()||!pi(g+1)&&!pi(g)))if(this.gutterState=new ko.Showing(e,t,i,{position:{lineNumber:Lt,column:kt},preference:Zr._posPref}),ut)this.gutterHide();else return this.renderGutterLightbub(),this.hide();else if(g<l.getLineCount()&&!xe(g+1))Lt+=1;else if(k*ee.spaceWidth<22)return this.hide();kt=/^\S\s*$/.test(l.getLineContent(Lt))?2:1}this.state=new ko.Showing(e,t,i,{position:{lineNumber:Lt,column:kt},preference:Zr._posPref}),this._gutterDecorationID&&(this._removeGutterDecoration(this._gutterDecorationID),this.gutterHide());const ni=e.validActions,gi=e.validActions[0].action.kind;if(ni.length!==1||!gi){this._editor.layoutContentWidget(this);return}this._editor.layoutContentWidget(this)}hide(){this.state!==ko.Hidden&&(this.state=ko.Hidden,this._editor.layoutContentWidget(this))}gutterHide(){this.gutterState!==ko.Hidden&&(this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID),this.gutterState=ko.Hidden)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}get gutterState(){return this._gutterState}set gutterState(e){this._gutterState=e,this._updateGutterLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this._domNode.classList.remove(...this._iconClasses),this._iconClasses=[],this.state.type!==1)return;let e,t=!1;this.state.actions.allAIFixes?(e=Dt.W.sparkleFilled,this.state.actions.validActions.length===1&&(t=!0)):this.state.actions.hasAutoFix?this.state.actions.hasAIFix?e=Dt.W.lightbulbSparkleAutofix:e=Dt.W.lightbulbAutofix:this.state.actions.hasAIFix?e=Dt.W.lightbulbSparkle:e=Dt.W.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,t),this._iconClasses=mn.L.asClassNameArray(e),this._domNode.classList.add(...this._iconClasses)}_updateGutterLightBulbTitleAndIcon(){if(this.gutterState.type!==1)return;let e,t=!1;this.gutterState.actions.allAIFixes?(e=Bc,this.gutterState.actions.validActions.length===1&&(t=!0)):this.gutterState.actions.hasAutoFix?this.gutterState.actions.hasAIFix?e=il:e=Wc:this.gutterState.actions.hasAIFix?e=Bo:e=_o,this._updateLightbulbTitle(this.gutterState.actions.hasAutoFix,t);const i=Ki.kI.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:mn.L.asClassName(e),glyphMargin:{position:In.ZS.Left},stickiness:1});this.gutterDecoration=i}renderGutterLightbub(){const e=this._editor.getSelection();e&&(this._gutterDecorationID===void 0?this._addGutterDecoration(e.startLineNumber):this._updateGutterDecoration(this._gutterDecorationID,e.startLineNumber))}_addGutterDecoration(e){this._editor.changeDecorations(t=>{this._gutterDecorationID=t.addDecoration(new wt.Q(e,0,e,0),this.gutterDecoration)})}_removeGutterDecoration(e){this._editor.changeDecorations(t=>{t.removeDecoration(e),this._gutterDecorationID=void 0})}_updateGutterDecoration(e,t){this._editor.changeDecorations(i=>{i.changeDecoration(e,new wt.Q(t,0,t,0)),i.changeDecorationOptions(e,this.gutterDecoration)})}_updateLightbulbTitle(e,t){this.state.type===1&&(t?this.title=Z.kg("codeActionAutoRun","Run: {0}",this.state.actions.validActions[0].action.title):e&&this._preferredKbLabel?this.title=Z.kg("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):!e&&this._quickFixKbLabel?this.title=Z.kg("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):e||(this.title=Z.kg("codeAction","Show Code Actions")))}set title(e){this._domNode.title=e}};Mr=Zr=Yr([tl(1,ms.b)],Mr);var Xr=c(80074),Nr=c(49418),nl=c(84546),Io=c(7285),sl=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},hr=function(h,e){return function(t,i){e(t,i,h)}};const zl="acceptSelectedCodeAction",Hc="previewSelectedCodeAction";class Vc{get templateId(){return"header"}renderTemplate(e){e.classList.add("group-header");const t=document.createElement("span");return e.append(t),{container:e,text:t}}renderElement(e,t,i){i.text.textContent=e.group?.title??""}disposeTemplate(e){}}let ur=class{get templateId(){return"action"}constructor(e,t){this._supportsPreview=e,this._keybindingService=t}renderTemplate(e){e.classList.add(this.templateId);const t=document.createElement("div");t.className="icon",e.append(t);const i=document.createElement("span");i.className="title",e.append(i);const s=new Nr.x(e,Mn.OS);return{container:e,icon:t,text:i,keybinding:s}}renderElement(e,t,i){if(e.group?.icon?(i.icon.className=mn.L.asClassName(e.group.icon),e.group.icon.color&&(i.icon.style.color=(0,Tt.GuP)(e.group.icon.color.id))):(i.icon.className=mn.L.asClassName(Dt.W.lightBulb),i.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!e.item||!e.label)return;i.text.textContent=Kl(e.label),i.keybinding.set(e.keybinding),Se.bo(!!e.keybinding,i.keybinding.element);const s=this._keybindingService.lookupKeybinding(zl)?.getLabel(),o=this._keybindingService.lookupKeybinding(Hc)?.getLabel();i.container.classList.toggle("option-disabled",e.disabled),e.disabled?i.container.title=e.label:s&&o?this._supportsPreview&&e.canPreview?i.container.title=(0,Z.kg)({key:"label-preview",comment:['placeholders are keybindings, e.g "F2 to Apply, Shift+F2 to Preview"']},"{0} to Apply, {1} to Preview",s,o):i.container.title=(0,Z.kg)({key:"label",comment:['placeholder is a keybinding, e.g "F2 to Apply"']},"{0} to Apply",s):i.container.title=""}disposeTemplate(e){e.keybinding.dispose()}};ur=sl([hr(1,ms.b)],ur);class jl extends UIEvent{constructor(){super("acceptSelectedAction")}}class oo extends UIEvent{constructor(){super("previewSelectedAction")}}function Ho(h){if(h.kind==="action")return h.label}let ka=class extends vt.jG{constructor(e,t,i,s,o,l){super(),this._delegate=s,this._contextViewService=o,this._keybindingService=l,this._actionLineHeight=24,this._headerLineHeight=26,this.cts=this._register(new Fi.Qi),this.domNode=document.createElement("div"),this.domNode.classList.add("actionList");const g={getHeight:k=>k.kind==="header"?this._headerLineHeight:this._actionLineHeight,getTemplateId:k=>k.kind};this._list=this._register(new nl.B8(e,this.domNode,g,[new ur(t,this._keybindingService),new Vc],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:Ho},accessibilityProvider:{getAriaLabel:k=>{if(k.kind==="action"){let H=k.label?Kl(k?.label):"";return k.disabled&&(H=(0,Z.kg)({key:"customQuickFixWidget.labels",comment:["Action widget labels for accessibility."]},"{0}, Disabled Reason: {1}",H,k.disabled)),H}return null},getWidgetAriaLabel:()=>(0,Z.kg)({key:"customQuickFixWidget",comment:["An action widget option"]},"Action Widget"),getRole:k=>k.kind==="action"?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style(Io.IN),this._register(this._list.onMouseClick(k=>this.onListClick(k))),this._register(this._list.onMouseOver(k=>this.onListHover(k))),this._register(this._list.onDidChangeFocus(()=>this.onFocus())),this._register(this._list.onDidChangeSelection(k=>this.onListSelection(k))),this._allMenuItems=i,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(e){return!e.disabled&&e.kind==="action"}hide(e){this._delegate.onHide(e),this.cts.cancel(),this._contextViewService.hideContextView()}layout(e){const t=this._allMenuItems.filter(k=>k.kind==="header").length,s=this._allMenuItems.length*this._actionLineHeight+t*this._headerLineHeight-t*this._actionLineHeight;this._list.layout(s);let o=e;if(this._allMenuItems.length>=50)o=380;else{const k=this._allMenuItems.map((H,ee)=>{const ie=this.domNode.ownerDocument.getElementById(this._list.getElementID(ee));if(ie){ie.style.width="auto";const fe=ie.getBoundingClientRect().width;return ie.style.width="",fe}return 0});o=Math.max(...k,e)}const g=Math.min(s,this.domNode.ownerDocument.body.clientHeight*.7);return this._list.layout(g,o),this.domNode.style.height=`${g}px`,this._list.domFocus(),o}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(e){const t=this._list.getFocus();if(t.length===0)return;const i=t[0],s=this._list.element(i);if(!this.focusCondition(s))return;const o=e?new oo:new jl;this._list.setSelection([i],o)}onListSelection(e){if(!e.elements.length)return;const t=e.elements[0];t.item&&this.focusCondition(t)?this._delegate.onSelect(t.item,e.browserEvent instanceof oo):this._list.setSelection([])}onFocus(){const e=this._list.getFocus();if(e.length===0)return;const t=e[0],i=this._list.element(t);this._delegate.onFocus?.(i.item)}async onListHover(e){const t=e.element;if(t&&t.item&&this.focusCondition(t)){if(this._delegate.onHover&&!t.disabled&&t.kind==="action"){const i=await this._delegate.onHover(t.item,this.cts.token);t.canPreview=i?i.canPreview:void 0}e.index&&this._list.splice(e.index,1,[t])}this._list.setFocus(typeof e.index=="number"?[e.index]:[])}onListClick(e){e.element&&this.focusCondition(e.element)&&this._list.setFocus([])}};ka=sl([hr(4,vn.l),hr(5,ms.b)],ka);function Kl(h){return h.replace(/\r\n|\r|\n/g," ")}var er=c(73429),Uc=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Hs=function(h,e){return function(t,i){e(t,i,h)}};(0,Tt.x1A)("actionBar.toggledBackground",Tt.c1f,(0,Z.kg)("actionBar.toggledBackground","Background color for toggled action items in action bar."));const gr={Visible:new et.N1("codeActionMenuVisible",!1,(0,Z.kg)("codeActionMenuVisible","Whether the action widget list is visible"))},tr=(0,Ri.u1)("actionWidgetService");let Tr=class extends vt.jG{get isVisible(){return gr.Visible.getValue(this._contextKeyService)||!1}constructor(e,t,i){super(),this._contextViewService=e,this._contextKeyService=t,this._instantiationService=i,this._list=this._register(new vt.HE)}show(e,t,i,s,o,l,g){const k=gr.Visible.bindTo(this._contextKeyService),H=this._instantiationService.createInstance(ka,e,t,i,s);this._contextViewService.showContextView({getAnchor:()=>o,render:ee=>(k.set(!0),this._renderWidget(ee,H,g??[])),onHide:ee=>{k.reset(),this._onWidgetClosed(ee)}},l,!1)}acceptSelected(e){this._list.value?.acceptSelected(e)}focusPrevious(){this._list?.value?.focusPrevious()}focusNext(){this._list?.value?.focusNext()}hide(e){this._list.value?.hide(e),this._list.clear()}_renderWidget(e,t,i){const s=document.createElement("div");if(s.classList.add("action-widget"),e.appendChild(s),this._list.value=t,this._list.value)s.appendChild(this._list.value.domNode);else throw new Error("List has no value");const o=new vt.Cm,l=document.createElement("div"),g=e.appendChild(l);g.classList.add("context-view-block"),o.add(Se.ko(g,Se.Bx.MOUSE_DOWN,Me=>Me.stopPropagation()));const k=document.createElement("div"),H=e.appendChild(k);H.classList.add("context-view-pointerBlock"),o.add(Se.ko(H,Se.Bx.POINTER_MOVE,()=>H.remove())),o.add(Se.ko(H,Se.Bx.MOUSE_DOWN,()=>H.remove()));let ee=0;if(i.length){const Me=this._createActionBar(".action-widget-action-bar",i);Me&&(s.appendChild(Me.getContainer().parentElement),o.add(Me),ee=Me.getContainer().offsetWidth)}const ie=this._list.value?.layout(ee);s.style.width=`${ie}px`;const fe=o.add(Se.w5(e));return o.add(fe.onDidBlur(()=>this.hide(!0))),o}_createActionBar(e,t){if(!t.length)return;const i=Se.$(e),s=new Xr.E(i);return s.push(t,{icon:!1,label:!0}),s}_onWidgetClosed(e){this._list.value?.hide(e)}};Tr=Uc([Hs(0,vn.l),Hs(1,et.fN),Hs(2,Ri._Y)],Tr),(0,er.v)(tr,Tr,1);const Ia=1100;(0,Fe.ug)(class extends Fe.L{constructor(){super({id:"hideCodeActionWidget",title:(0,Z.aS)("hideCodeActionWidget.title","Hide action widget"),precondition:gr.Visible,keybinding:{weight:Ia,primary:9,secondary:[1033]}})}run(h){h.get(tr).hide(!0)}}),(0,Fe.ug)(class extends Fe.L{constructor(){super({id:"selectPrevCodeAction",title:(0,Z.aS)("selectPrevCodeAction.title","Select previous action"),precondition:gr.Visible,keybinding:{weight:Ia,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(h){const e=h.get(tr);e instanceof Tr&&e.focusPrevious()}}),(0,Fe.ug)(class extends Fe.L{constructor(){super({id:"selectNextCodeAction",title:(0,Z.aS)("selectNextCodeAction.title","Select next action"),precondition:gr.Visible,keybinding:{weight:Ia,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(h){const e=h.get(tr);e instanceof Tr&&e.focusNext()}}),(0,Fe.ug)(class extends Fe.L{constructor(){super({id:zl,title:(0,Z.aS)("acceptSelected.title","Accept selected action"),precondition:gr.Visible,keybinding:{weight:Ia,primary:3,secondary:[2137]}})}run(h){const e=h.get(tr);e instanceof Tr&&e.acceptSelected()}}),(0,Fe.ug)(class extends Fe.L{constructor(){super({id:Hc,title:(0,Z.aS)("previewSelected.title","Preview selected action"),precondition:gr.Visible,keybinding:{weight:Ia,primary:2051}})}run(h){const e=h.get(tr);e instanceof Tr&&e.acceptSelected(!0)}});var Ms=c(21358),Rr=c(64246),ns=c(8775),eo=c(4156);const $l=new et.N1("supportedCodeAction",""),Ma="_typescript.applyFixAllCodeAction";class st extends vt.jG{constructor(e,t,i,s=250){super(),this._editor=e,this._markerService=t,this._signalChange=i,this._delay=s,this._autoTriggerTimer=this._register(new hi.pc),this._register(this._markerService.onMarkerChanged(o=>this._onMarkerChanges(o))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(i=>(0,Ee.n4)(i,t.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:Ks.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getSelection();if(e.type===1)return t;const i=this._editor.getOption(65).enabled;if(i!==ns.jT.Off){{if(i===ns.jT.On)return t;if(i===ns.jT.OnCode){if(!t.isEmpty())return t;const o=this._editor.getModel(),{lineNumber:l,column:g}=t.getPosition(),k=o.getLineContent(l);if(k.length===0)return;if(g===1){if(/\s/.test(k[0]))return}else if(g===o.getLineMaxColumn(l)){if(/\s/.test(k[k.length-1]))return}else if(/\s/.test(k[g-2])&&/\s/.test(k[g-1]))return}}return t}}}var n;(function(h){h.Empty={type:0};class e{constructor(i,s,o){this.trigger=i,this.position=s,this._cancellablePromise=o,this.type=1,this.actions=o.catch(l=>{if((0,Ni.MB)(l))return a;throw l})}cancel(){this._cancellablePromise.cancel()}}h.Triggered=e})(n||(n={}));const a=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1});class f extends vt.jG{constructor(e,t,i,s,o,l,g){super(),this._editor=e,this._registry=t,this._markerService=i,this._progressService=o,this._configurationService=l,this._telemetryService=g,this._codeActionOracle=this._register(new vt.HE),this._state=n.Empty,this._onDidChangeState=this._register(new zi.vl),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=$l.bindTo(s),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._register(this._editor.onDidChangeConfiguration(k=>{k.hasChanged(65)&&this._update()})),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(n.Empty,!0))}_settingEnabledNearbyQuickfixes(){const e=this._editor?.getModel();return this._configurationService?this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickFixes",{resource:e?.uri}):!1}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(n.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(92)){const t=this._registry.all(e).flatMap(i=>i.providedCodeActionKinds??[]);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new st(this._editor,this._markerService,i=>{if(!i){this.setState(n.Empty);return}const s=i.selection.getStartPosition(),o=(0,hi.SS)(async k=>{if(this._settingEnabledNearbyQuickfixes()&&i.trigger.type===1&&(i.trigger.triggerAction===Ks.QuickFix||i.trigger.filter?.include?.contains(On.QuickFix))){const H=await Oo(this._registry,e,i.selection,i.trigger,Bs.ke.None,k),ee=[...H.allActions];if(k.isCancellationRequested)return a;const ie=H.validActions?.some(Me=>Me.action.kind?On.QuickFix.contains(new Be(Me.action.kind)):!1),fe=this._markerService.read({resource:e.uri});if(ie){for(const Me of H.validActions)Me.action.command?.arguments?.some(xe=>typeof xe=="string"&&xe.includes(Ma))&&(Me.action.diagnostics=[...fe.filter(xe=>xe.relatedInformation)]);return{validActions:H.validActions,allActions:ee,documentation:H.documentation,hasAutoFix:H.hasAutoFix,hasAIFix:H.hasAIFix,allAIFixes:H.allAIFixes,dispose:()=>{H.dispose()}}}else if(!ie&&fe.length>0){const Me=i.selection.getPosition();let xe=Me,Qe=Number.MAX_VALUE;const ut=[...H.validActions];for(const kt of fe){const ni=kt.endColumn,gi=kt.endLineNumber,pi=kt.startLineNumber;if(gi===Me.lineNumber||pi===Me.lineNumber){xe=new ui.y(gi,ni);const pn={type:i.trigger.type,triggerAction:i.trigger.triggerAction,filter:{include:i.trigger.filter?.include?i.trigger.filter?.include:On.QuickFix},autoApply:i.trigger.autoApply,context:{notAvailableMessage:i.trigger.context?.notAvailableMessage||"",position:xe}},ln=new Mi.L(xe.lineNumber,xe.column,xe.lineNumber,xe.column),Fn=await Oo(this._registry,e,ln,pn,Bs.ke.None,k);if(Fn.validActions.length!==0){for(const Ws of Fn.validActions)Ws.action.command?.arguments?.some(Rs=>typeof Rs=="string"&&Rs.includes(Ma))&&(Ws.action.diagnostics=[...fe.filter(Rs=>Rs.relatedInformation)]);H.allActions.length===0&&ee.push(...Fn.allActions),Math.abs(Me.column-ni)<Qe?ut.unshift(...Fn.validActions):ut.push(...Fn.validActions)}Qe=Math.abs(Me.column-ni)}}const Lt=ut.filter((kt,ni,gi)=>gi.findIndex(pi=>pi.action.title===kt.action.title)===ni);return Lt.sort((kt,ni)=>kt.action.isPreferred&&!ni.action.isPreferred?-1:!kt.action.isPreferred&&ni.action.isPreferred||kt.action.isAI&&!ni.action.isAI?1:!kt.action.isAI&&ni.action.isAI?-1:0),{validActions:Lt,allActions:ee,documentation:H.documentation,hasAutoFix:H.hasAutoFix,hasAIFix:H.hasAIFix,allAIFixes:H.allAIFixes,dispose:()=>{H.dispose()}}}}if(i.trigger.type===1){const H=new eo.W,ee=await Oo(this._registry,e,i.selection,i.trigger,Bs.ke.None,k);return this._telemetryService&&this._telemetryService.publicLog2("codeAction.invokedDurations",{codeActions:ee.validActions.length,duration:H.elapsed()}),ee}return Oo(this._registry,e,i.selection,i.trigger,Bs.ke.None,k)});i.trigger.type===1&&this._progressService?.showWhile(o,250);const l=new n.Triggered(i.trigger,s,o);let g=!1;this._state.type===1&&(g=this._state.trigger.type===1&&l.type===1&&l.trigger.type===2&&this._state.position!==l.position),g?setTimeout(()=>{this.setState(l)},500):this.setState(l)},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:Ks.Default})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value?.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!this._disposed&&this._onDidChangeState.fire(e))}}var y=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},T=function(h,e){return function(t,i){e(t,i,h)}},J;const se="quickfix-edit-highlight";let be=class extends vt.jG{static{J=this}static{this.ID="editor.contrib.codeActionController"}static get(e){return e.getContribution(J.ID)}constructor(e,t,i,s,o,l,g,k,H,ee,ie){super(),this._commandService=g,this._configurationService=k,this._actionWidgetService=H,this._instantiationService=ee,this._telemetryService=ie,this._activeCodeActions=this._register(new vt.HE),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new f(this._editor,o.codeActionProvider,t,i,l,k,this._telemetryService)),this._register(this._model.onDidChangeState(fe=>this.update(fe))),this._lightBulbWidget=new Nc.d(()=>{const fe=this._editor.getContribution(Mr.ID);return fe&&this._register(fe.onClick(Me=>this.showCodeActionsFromLightbulb(Me.actions,Me))),fe}),this._resolver=s.createInstance(ya),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){this._disposed=!0,super.dispose()}async showCodeActionsFromLightbulb(e,t){if(e.allAIFixes&&e.validActions.length===1){const i=e.validActions[0],s=i.action.command;s&&s.id==="inlineChat.start"&&s.arguments&&s.arguments.length>=1&&(s.arguments[0]={...s.arguments[0],autoSend:!1}),await this._applyCodeAction(i,!1,!1,Fo.FromAILightbulb);return}await this.showCodeActionList(e,t,{includeDisabledActions:!1,fromLightbulb:!0})}showCodeActions(e,t,i){return this.showCodeActionList(t,i,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,i,s){if(!this._editor.hasModel())return;Ls.get(this._editor)?.closeMessage();const o=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:i,autoApply:s,context:{notAvailableMessage:e,position:o}})}_trigger(e){return this._model.trigger(e)}async _applyCodeAction(e,t,i,s){try{await this._instantiationService.invokeFunction(Mc,e,s,{preview:i,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:Ks.QuickFix,filter:{}})}}hideLightBulbWidget(){this._lightBulbWidget.rawValue?.hide(),this._lightBulbWidget.rawValue?.gutterHide()}async update(e){if(e.type!==1){this.hideLightBulbWidget();return}let t;try{t=await e.actions}catch(s){(0,Ni.dz)(s);return}if(!(this._disposed||this._editor.getSelection()?.startLineNumber!==e.position.lineNumber))if(this._lightBulbWidget.value?.update(t,e.trigger,e.position),e.trigger.type===1){if(e.trigger.filter?.include){const o=this.tryGetValidActionToApply(e.trigger,t);if(o){try{this.hideLightBulbWidget(),await this._applyCodeAction(o,!1,!1,Fo.FromCodeActions)}finally{t.dispose()}return}if(e.trigger.context){const l=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,t);if(l&&l.action.disabled){Ls.get(this._editor)?.showMessage(l.action.disabled,e.trigger.context.position),t.dispose();return}}}const s=!!e.trigger.filter?.include;if(e.trigger.context&&(!t.allActions.length||!s&&!t.validActions.length)){Ls.get(this._editor)?.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=t,t.dispose();return}this._activeCodeActions.value=t,this.showCodeActionList(t,this.toCoords(e.position),{includeDisabledActions:s,fromLightbulb:!1})}else this._actionWidgetService.isVisible?t.dispose():this._activeCodeActions.value=t}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:i})=>i.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}static{this.DECORATION=Ki.kI.register({description:"quickfix-highlight",className:se})}async showCodeActionList(e,t,i){const s=this._editor.createDecorationsCollection(),o=this._editor.getDomNode();if(!o)return;const l=i.includeDisabledActions&&(this._showDisabled||e.validActions.length===0)?e.allActions:e.validActions;if(!l.length)return;const g=ui.y.isIPosition(t)?this.toCoords(t):t,k={onSelect:async(H,ee)=>{this._applyCodeAction(H,!0,!!ee,i.fromLightbulb?Fo.FromAILightbulb:Fo.FromCodeActions),this._actionWidgetService.hide(!1),s.clear()},onHide:H=>{this._editor?.focus(),s.clear()},onHover:async(H,ee)=>{if(ee.isCancellationRequested)return;let ie=!1;const fe=H.action.kind;if(fe){const Me=new Be(fe);ie=[On.RefactorExtract,On.RefactorInline,On.RefactorRewrite,On.RefactorMove,On.Source].some(Qe=>Qe.contains(Me))}return{canPreview:ie||!!H.action.edit?.edits.length}},onFocus:H=>{if(H&&H.action){const ee=H.action.ranges,ie=H.action.diagnostics;if(s.clear(),ee&&ee.length>0){const fe=ie&&ie?.length>1?ie.map(Me=>({range:Me,options:J.DECORATION})):ee.map(Me=>({range:Me,options:J.DECORATION}));s.set(fe)}else if(ie&&ie.length>0){const fe=ie.map(xe=>({range:xe,options:J.DECORATION}));s.set(fe);const Me=ie[0];if(Me.startLineNumber&&Me.startColumn){const xe=this._editor.getModel()?.getWordAtPosition({lineNumber:Me.startLineNumber,column:Me.startColumn})?.word;dn.h5((0,Z.kg)("editingNewSelection","Context: {0} at line {1} and column {2}.",xe,Me.startLineNumber,Me.startColumn))}}}else s.clear()}};this._actionWidgetService.show("codeActionWidget",!0,Fc(l,this._shouldShowHeaders(),this._resolver.getResolver()),k,g,o,this._getActionBarActions(e,t,i))}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),i=(0,Se.BK)(this._editor.getDomNode()),s=i.left+t.left,o=i.top+t.top+t.height;return{x:s,y:o}}_shouldShowHeaders(){const e=this._editor?.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:e?.uri})}_getActionBarActions(e,t,i){if(i.fromLightbulb)return[];const s=e.documentation.map(o=>({id:o.id,label:o.title,tooltip:o.tooltip??"",class:void 0,enabled:!0,run:()=>this._commandService.executeCommand(o.id,...o.arguments??[])}));return i.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&s.push(this._showDisabled?{id:"hideMoreActions",label:(0,Z.kg)("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,i))}:{id:"showMoreActions",label:(0,Z.kg)("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,i))}),s}};be=J=y([T(1,Ms.DR),T(2,et.fN),T(3,Ri._Y),T(4,_e.ILanguageFeaturesService),T(5,Bs.N8),T(6,Di.d),T(7,pt.pG),T(8,tr),T(9,Ri._Y),T(10,is.k)],be),(0,$i.zy)((h,e)=>{((s,o)=>{o&&e.addRule(`.monaco-editor ${s} { background-color: ${o}; }`)})(".quickfix-edit-highlight",h.getColor(Tt.Ubg));const i=h.getColor(Tt.ECk);i&&e.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${(0,Rr.Bb)(h.type)?"dotted":"solid"} ${i}; box-sizing: border-box; }`)});function Oe(h){return et.M$.regex($l.keys()[0],new RegExp("(\\s|^)"+(0,Vi.bm)(h.value)+"\\b"))}const Ge={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:Z.kg("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:Z.kg("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[Z.kg("args.schema.apply.first","Always apply the first returned code action."),Z.kg("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),Z.kg("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:Z.kg("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function je(h,e,t,i,s=Ks.Default){h.hasModel()&&be.get(h)?.manualTriggerAtCurrentPosition(e,s,t,i)}class nt extends we.ks{constructor(){super({id:Za,label:Z.kg("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:et.M$.and(ke.R.writable,ke.R.hasCodeActionsProvider),kbOpts:{kbExpr:ke.R.textInputFocus,primary:2137,weight:100}})}run(e,t){return je(t,Z.kg("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,Ks.QuickFix)}}class lt extends we.DX{constructor(){super({id:Ol,precondition:et.M$.and(ke.R.writable,ke.R.hasCodeActionsProvider),metadata:{description:"Trigger a code action",args:[{name:"args",schema:Ge}]}})}runEditorCommand(e,t,i){const s=Do.fromUser(i,{kind:Be.Empty,apply:"ifSingle"});return je(t,typeof i?.kind=="string"?s.preferred?Z.kg("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",i.kind):Z.kg("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",i.kind):s.preferred?Z.kg("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):Z.kg("editor.action.codeAction.noneMessage","No code actions available"),{include:s.kind,includeSourceActions:!0,onlyIncludePreferredActions:s.preferred},s.apply)}}class bt extends we.ks{constructor(){super({id:Ao,label:Z.kg("refactor.label","Refactor..."),alias:"Refactor...",precondition:et.M$.and(ke.R.writable,ke.R.hasCodeActionsProvider),kbOpts:{kbExpr:ke.R.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:et.M$.and(ke.R.writable,Oe(On.Refactor))},metadata:{description:"Refactor...",args:[{name:"args",schema:Ge}]}})}run(e,t,i){const s=Do.fromUser(i,{kind:On.Refactor,apply:"never"});return je(t,typeof i?.kind=="string"?s.preferred?Z.kg("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",i.kind):Z.kg("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",i.kind):s.preferred?Z.kg("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):Z.kg("editor.action.refactor.noneMessage","No refactorings available"),{include:On.Refactor.contains(s.kind)?s.kind:Be.None,onlyIncludePreferredActions:s.preferred},s.apply,Ks.Refactor)}}class xt extends we.ks{constructor(){super({id:$r,label:Z.kg("source.label","Source Action..."),alias:"Source Action...",precondition:et.M$.and(ke.R.writable,ke.R.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:et.M$.and(ke.R.writable,Oe(On.Source))},metadata:{description:"Source Action...",args:[{name:"args",schema:Ge}]}})}run(e,t,i){const s=Do.fromUser(i,{kind:On.Source,apply:"never"});return je(t,typeof i?.kind=="string"?s.preferred?Z.kg("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",i.kind):Z.kg("editor.action.source.noneMessage.kind","No source actions for '{0}' available",i.kind):s.preferred?Z.kg("editor.action.source.noneMessage.preferred","No preferred source actions available"):Z.kg("editor.action.source.noneMessage","No source actions available"),{include:On.Source.contains(s.kind)?s.kind:Be.None,includeSourceActions:!0,onlyIncludePreferredActions:s.preferred},s.apply,Ks.SourceAction)}}class At extends we.ks{constructor(){super({id:ba,label:Z.kg("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:et.M$.and(ke.R.writable,Oe(On.SourceOrganizeImports)),kbOpts:{kbExpr:ke.R.textInputFocus,primary:1581,weight:100}})}run(e,t){return je(t,Z.kg("editor.action.organize.noneMessage","No organize imports action available"),{include:On.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",Ks.OrganizeImports)}}class Gt extends we.ks{constructor(){super({id:Fl,label:Z.kg("fixAll.label","Fix All"),alias:"Fix All",precondition:et.M$.and(ke.R.writable,Oe(On.SourceFixAll))})}run(e,t){return je(t,Z.kg("fixAll.noneMessage","No fix all action available"),{include:On.SourceFixAll,includeSourceActions:!0},"ifSingle",Ks.FixAll)}}class ti extends we.ks{constructor(){super({id:Xa,label:Z.kg("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:et.M$.and(ke.R.writable,Oe(On.QuickFix)),kbOpts:{kbExpr:ke.R.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return je(t,Z.kg("editor.action.autoFix.noneMessage","No auto fixes available"),{include:On.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",Ks.AutoFix)}}var li=c(96523);(0,we.HW)(be.ID,be,3),(0,we.HW)(Mr.ID,Mr,4),(0,we.Fl)(nt),(0,we.Fl)(bt),(0,we.Fl)(xt),(0,we.Fl)(At),(0,we.Fl)(ti),(0,we.Fl)(Gt),(0,we.E_)(new lt),qt.O.as(li.Fd.Configuration).registerConfiguration({...Kr.JJ,properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:Z.kg("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}}),qt.O.as(li.Fd.Configuration).registerConfiguration({...Kr.JJ,properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:"boolean",scope:5,description:Z.kg("includeNearbyQuickFixes","Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic."),default:!0}}}),qt.O.as(li.Fd.Configuration).registerConfiguration({...Kr.JJ,properties:{"editor.codeActions.triggerOnFocusChange":{type:"boolean",scope:5,markdownDescription:Z.kg("triggerOnFocusChange","Enable triggering {0} when {1} is set to {2}. Code Actions must be set to {3} to be triggered for window and focus changes.","`#editor.codeActionsOnSave#`","`#files.autoSave#`","`afterDelay`","`always`"),default:!1}}});var ki=c(87207);class Ti{constructor(){this.lenses=[],this._disposables=new vt.Cm}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const i of e.lenses)this.lenses.push({symbol:i,provider:t})}}async function Yi(h,e,t){const i=h.ordered(e),s=new Map,o=new Ti,l=i.map(async(g,k)=>{s.set(g,k);try{const H=await Promise.resolve(g.provideCodeLenses(e,t));H&&o.add(H,g)}catch(H){(0,Ni.M_)(H)}});return await Promise.all(l),o.lenses=o.lenses.sort((g,k)=>g.symbol.range.startLineNumber<k.symbol.range.startLineNumber?-1:g.symbol.range.startLineNumber>k.symbol.range.startLineNumber?1:s.get(g.provider)<s.get(k.provider)?-1:s.get(g.provider)>s.get(k.provider)?1:g.symbol.range.startColumn<k.symbol.range.startColumn?-1:g.symbol.range.startColumn>k.symbol.range.startColumn?1:0),o}Di.w.registerCommand("_executeCodeLensProvider",function(h,...e){let[t,i]=e;(0,hn.j)(Ot.r.isUri(t)),(0,hn.j)(typeof i=="number"||!i);const{codeLensProvider:s}=h.get(_e.ILanguageFeaturesService),o=h.get(Zs.IModelService).getModel(t);if(!o)throw(0,Ni.Qg)();const l=[],g=new vt.Cm;return Yi(s,o,Fi.XO.None).then(k=>{g.add(k);const H=[];for(const ee of k.lenses)i==null||ee.symbol.command?l.push(ee.symbol):i-- >0&&ee.provider.resolveCodeLens&&H.push(Promise.resolve(ee.provider.resolveCodeLens(o,ee.symbol,Fi.XO.None)).then(ie=>l.push(ie||ee.symbol)));return Promise.all(H)}).then(()=>l).finally(()=>{setTimeout(()=>g.dispose(),100)})});var Ai=c(41461),Ji=c(68669),xi=c(42008),cn=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},rn=function(h,e){return function(t,i){e(t,i,h)}};const gn=(0,Ri.u1)("ICodeLensCache");class Sn{constructor(e,t){this.lineCount=e,this.data=t}}let Vn=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new Ai.qK(20,.75);const t="codelens/cache";(0,Se.U3)(xi.G,()=>e.remove(t,1));const i="codelens/cache2",s=e.get(i,1,"{}");this._deserialize(s);const o=zi.Jh.filter(e.onWillSaveState,l=>l.reason===Ji.LP.SHUTDOWN);zi.Jh.once(o)(l=>{e.store(i,this._serialize(),1,1)})}put(e,t){const i=t.lenses.map(l=>({range:l.symbol.range,command:l.symbol.command&&{id:"",title:l.symbol.command?.title}})),s=new Ti;s.add({lenses:i,dispose:()=>{}},this._fakeProvider);const o=new Sn(e.getLineCount(),s);this._cache.set(e.uri.toString(),o)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,i]of this._cache){const s=new Set;for(const o of i.data.lenses)s.add(o.symbol.range.startLineNumber);e[t]={lineCount:i.lineCount,lines:[...s.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const i in t){const s=t[i],o=[];for(const g of s.lines)o.push({range:new wt.Q(g,1,g,11)});const l=new Ti;l.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(i,new Sn(s.lineCount,l))}}catch{}}};Vn=cn([rn(0,Ji.CS)],Vn),(0,er.v)(gn,Vn,1);var jn=c(17577);class Ns{constructor(e,t,i){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class Cs{static{this._idPool=0}constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${Cs._idPool++}`,this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const i=[];let s=!1;for(let o=0;o<e.length;o++){const l=e[o];if(l&&(s=!0,l.command)){const g=(0,jn.n)(l.command.title.trim());if(l.command.id){const k=`c${Cs._idPool++}`;i.push(Se.$("a",{id:k,title:l.command.tooltip,role:"button"},...g)),this._commands.set(k,l.command)}else i.push(Se.$("span",{title:l.command.tooltip},...g));o+1<e.length&&i.push(Se.$("span",void 0,"\xA0|\xA0"))}}s?(Se.Ln(this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):Se.Ln(this._domNode,Se.$("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}class Os{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let i=0,s=t.length;i<s;i++)this._addDecorationsCallbacks[i](t[i])}}const es=Ki.kI.register({collapseOnReplaceEdit:!0,description:"codelens"});class to{constructor(e,t,i,s,o,l){this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];let g;const k=[];this._data.forEach((H,ee)=>{H.symbol.command&&k.push(H.symbol),i.addDecoration({range:H.symbol.range,options:es},ie=>this._decorationIds[ee]=ie),g?g=wt.Q.plusRange(g,H.symbol.range):g=wt.Q.lift(H.symbol.range)}),this._viewZone=new Ns(g.startLineNumber-1,o,l),this._viewZoneId=s.addZone(this._viewZone),k.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(k,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new Cs(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t?.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const i=this._editor.getModel().getDecorationRange(e),s=this._data[t].symbol;return!!(i&&wt.Q.isEmpty(s.range)===i.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((i,s)=>{t.addDecoration({range:i.symbol.range,options:es},o=>this._decorationIds[s]=o)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const i=e.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const i=e[t];if(i){const{symbol:s}=this._data[t];s.command=i.command||s.command}}}getCommand(e){return this._contentWidget?.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var Vs=c(34771),ch=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Gl=function(h,e){return function(t,i){e(t,i,h)}};let Ql=class{static{this.ID="css.editor.codeLens"}constructor(e,t,i,s,o,l){this._editor=e,this._languageFeaturesService=t,this._commandService=s,this._notificationService=o,this._codeLensCache=l,this._disposables=new vt.Cm,this._localToDispose=new vt.Cm,this._lenses=[],this._oldCodeLensModels=new vt.Cm,this._provideCodeLensDebounce=i.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=i.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new hi.uC(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(g=>{(g.hasChanged(50)||g.hasChanged(19)||g.hasChanged(18))&&this._updateLensStyle(),g.hasChanged(17)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),this._currentCodeLensModel?.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52));let t=this._editor.getOption(19);return(!t||t<5)&&(t=this._editor.getOption(52)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(18),s=this._editor.getOption(50),{style:o}=this._editor.getContainerDomNode();o.setProperty("--vscode-editorCodeLens-lineHeight",`${e}px`),o.setProperty("--vscode-editorCodeLens-fontSize",`${t}px`),o.setProperty("--vscode-editorCodeLens-fontFeatureSettings",s.fontFeatureSettings),i&&(o.setProperty("--vscode-editorCodeLens-fontFamily",i),o.setProperty("--vscode-editorCodeLens-fontFamilyDefault",ns.jU.fontFamily)),this._editor.changeViewZones(l=>{for(const g of this._lenses)g.updateHeight(e,l)})}_localDispose(){this._getCodeLensModelPromise?.cancel(),this._getCodeLensModelPromise=void 0,this._resolveCodeLensesPromise?.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),this._currentCodeLensModel?.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(17)||e.isTooLargeForTokenization())return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&(0,hi.EQ)(()=>{const s=this._codeLensCache.get(e);t===s&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3,this._localToDispose);return}for(const s of this._languageFeaturesService.codeLensProvider.all(e))if(typeof s.onDidChange=="function"){const o=s.onDidChange(()=>i.schedule());this._localToDispose.add(o)}const i=new hi.uC(()=>{const s=Date.now();this._getCodeLensModelPromise?.cancel(),this._getCodeLensModelPromise=(0,hi.SS)(o=>Yi(this._languageFeaturesService.codeLensProvider,e,o)),this._getCodeLensModelPromise.then(o=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=o,this._codeLensCache.put(e,o);const l=this._provideCodeLensDebounce.update(e,Date.now()-s);i.delay=l,this._renderCodeLensSymbols(o),this._resolveCodeLensesInViewportSoon()},Ni.dz)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(i),this._localToDispose.add((0,vt.s)(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(s=>{this._editor.changeViewZones(o=>{const l=[];let g=-1;this._lenses.forEach(H=>{!H.isValid()||g===H.getLineNumber()?l.push(H):(H.update(o),g=H.getLineNumber())});const k=new Os;l.forEach(H=>{H.dispose(k,o),this._lenses.splice(this._lenses.indexOf(H),1)}),k.commit(s)})}),i.schedule(),this._resolveCodeLensesScheduler.cancel(),this._resolveCodeLensesPromise?.cancel(),this._resolveCodeLensesPromise=void 0})),this._localToDispose.add(this._editor.onDidFocusEditorText(()=>{i.schedule()})),this._localToDispose.add(this._editor.onDidBlurEditorText(()=>{i.cancel()})),this._localToDispose.add(this._editor.onDidScrollChange(s=>{s.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add((0,vt.s)(()=>{if(this._editor.getModel()){const s=ki.D.capture(this._editor);this._editor.changeDecorations(o=>{this._editor.changeViewZones(l=>{this._disposeAllLenses(o,l)})}),s.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(s=>{if(s.target.type!==9)return;let o=s.target.element;if(o?.tagName==="SPAN"&&(o=o.parentElement),o?.tagName==="A")for(const l of this._lenses){const g=l.getCommand(o);if(g){this._commandService.executeCommand(g.id,...g.arguments||[]).catch(k=>this._notificationService.error(k));break}}})),i.schedule()}_disposeAllLenses(e,t){const i=new Os;for(const s of this._lenses)s.dispose(i,t);e&&i.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),i=[];let s;for(const g of e.lenses){const k=g.symbol.range.startLineNumber;k<1||k>t||(s&&s[s.length-1].symbol.range.startLineNumber===k?s.push(g):(s=[g],i.push(s)))}if(!i.length&&!this._lenses.length)return;const o=ki.D.capture(this._editor),l=this._getLayoutInfo();this._editor.changeDecorations(g=>{this._editor.changeViewZones(k=>{const H=new Os;let ee=0,ie=0;for(;ie<i.length&&ee<this._lenses.length;){const fe=i[ie][0].symbol.range.startLineNumber,Me=this._lenses[ee].getLineNumber();Me<fe?(this._lenses[ee].dispose(H,k),this._lenses.splice(ee,1)):Me===fe?(this._lenses[ee].updateCodeLensSymbols(i[ie],H),ie++,ee++):(this._lenses.splice(ee,0,new to(i[ie],this._editor,H,k,l.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),ee++,ie++)}for(;ee<this._lenses.length;)this._lenses[ee].dispose(H,k),this._lenses.splice(ee,1);for(;ie<i.length;)this._lenses.push(new to(i[ie],this._editor,H,k,l.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),ie++;H.commit(g)})}),o.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){this._resolveCodeLensesPromise?.cancel(),this._resolveCodeLensesPromise=void 0;const e=this._editor.getModel();if(!e)return;const t=[],i=[];if(this._lenses.forEach(l=>{const g=l.computeIfNecessary(e);g&&(t.push(g),i.push(l))}),t.length===0)return;const s=Date.now(),o=(0,hi.SS)(l=>{const g=t.map((k,H)=>{const ee=new Array(k.length),ie=k.map((fe,Me)=>!fe.symbol.command&&typeof fe.provider.resolveCodeLens=="function"?Promise.resolve(fe.provider.resolveCodeLens(e,fe.symbol,l)).then(xe=>{ee[Me]=xe},Ni.M_):(ee[Me]=fe.symbol,Promise.resolve(void 0)));return Promise.all(ie).then(()=>{!l.isCancellationRequested&&!i[H].isDisposed()&&i[H].updateCommands(ee)})});return Promise.all(g)});this._resolveCodeLensesPromise=o,this._resolveCodeLensesPromise.then(()=>{const l=this._resolveCodeLensesDebounce.update(e,Date.now()-s);this._resolveCodeLensesScheduler.delay=l,this._currentCodeLensModel&&this._codeLensCache.put(e,this._currentCodeLensModel),this._oldCodeLensModels.clear(),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},l=>{(0,Ni.dz)(l),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}async getModel(){return await this._getCodeLensModelPromise,await this._resolveCodeLensesPromise,this._currentCodeLensModel?.isDisposed?void 0:this._currentCodeLensModel}};Ql=ch([Gl(1,_e.ILanguageFeaturesService),Gl(2,Vs.ILanguageFeatureDebounceService),Gl(3,Di.d),Gl(4,As.Ot),Gl(5,gn)],Ql),(0,we.HW)(Ql.ID,Ql,1),(0,we.Fl)(class extends we.ks{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:ke.R.hasCodeLensProvider,label:(0,Z.kg)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}async run(e,t){if(!t.hasModel())return;const i=e.get(js.GK),s=e.get(Di.d),o=e.get(As.Ot),l=t.getSelection().positionLineNumber,g=t.getContribution(Ql.ID);if(!g)return;const k=await g.getModel();if(!k)return;const H=[];for(const fe of k.lenses)fe.symbol.command&&fe.symbol.range.startLineNumber===l&&H.push({label:fe.symbol.command.title,command:fe.symbol.command});if(H.length===0)return;const ee=await i.pick(H,{canPickMany:!1,placeHolder:(0,Z.kg)("placeHolder","Select a command")});if(!ee)return;let ie=ee.command;if(k.isDisposed){const Me=(await g.getModel())?.lenses.find(xe=>xe.symbol.range.startLineNumber===l&&xe.symbol.command?.title===ie.title);if(!Me||!Me.symbol.command)return;ie=Me.symbol.command}try{await s.executeCommand(ie.id,...ie.arguments||[])}catch(fe){o.error(fe)}}});var wn=c(34920),zc=c(41841),Jr=c(34593),ir=c(69393),Pu=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},tn=function(h,e){return function(t,i){e(t,i,h)}};let Yl=class{constructor(e){this._editorWorkerService=e}async provideDocumentColors(e,t){return this._editorWorkerService.computeDefaultDocumentColors(e.uri)}provideColorPresentations(e,t,i){const s=t.range,o=t.color,l=o.alpha,g=new wn.Q1(new wn.bU(Math.round(255*o.red),Math.round(255*o.green),Math.round(255*o.blue),l)),k=l?wn.Q1.Format.CSS.formatRGB(g):wn.Q1.Format.CSS.formatRGBA(g),H=l?wn.Q1.Format.CSS.formatHSL(g):wn.Q1.Format.CSS.formatHSLA(g),ee=l?wn.Q1.Format.CSS.formatHex(g):wn.Q1.Format.CSS.formatHexA(g),ie=[];return ie.push({label:k,textEdit:{range:s,text:k}}),ie.push({label:H,textEdit:{range:s,text:H}}),ie.push({label:ee,textEdit:{range:s,text:ee}}),ie}};Yl=Pu([tn(0,ir.IEditorWorkerService)],Yl);let dh=class extends vt.jG{constructor(e,t){super(),this._register(e.colorProvider.register("*",new Yl(t)))}};dh=Pu([tn(0,_e.ILanguageFeaturesService),tn(1,ir.IEditorWorkerService)],dh),(0,Jr.x)(dh);async function Au(h,e,t,i=!0){return qr(new Of,h,e,t,i)}function hh(h,e,t,i){return Promise.resolve(t.provideColorPresentations(h,e,i))}class Of{constructor(){}async compute(e,t,i,s){const o=await e.provideDocumentColors(t,i);if(Array.isArray(o))for(const l of o)s.push({colorInfo:l,provider:e});return Array.isArray(o)}}class Ds{constructor(){}async compute(e,t,i,s){const o=await e.provideDocumentColors(t,i);if(Array.isArray(o))for(const l of o)s.push({range:l.range,color:[l.color.red,l.color.green,l.color.blue,l.color.alpha]});return Array.isArray(o)}}class jc{constructor(e){this.colorInfo=e}async compute(e,t,i,s){const o=await e.provideColorPresentations(t,this.colorInfo,Fi.XO.None);return Array.isArray(o)&&s.push(...o),Array.isArray(o)}}async function qr(h,e,t,i,s){let o=!1,l;const g=[],k=e.ordered(t);for(let H=k.length-1;H>=0;H--){const ee=k[H];if(ee instanceof Yl)l=ee;else try{await h.compute(ee,t,i,g)&&(o=!0)}catch(ie){(0,Ni.M_)(ie)}}return o?g:l&&s?(await h.compute(l,t,i,g),g):[]}function uh(h,e){const{colorProvider:t}=h.get(_e.ILanguageFeaturesService),i=h.get(Zs.IModelService).getModel(e);if(!i)throw(0,Ni.Qg)();const s=h.get(pt.pG).getValue("editor.defaultColorDecorators",{resource:e});return{model:i,colorProviderRegistry:t,isDefaultColorDecoratorsEnabled:s}}Di.w.registerCommand("_executeDocumentColorProvider",function(h,...e){const[t]=e;if(!(t instanceof Ot.r))throw(0,Ni.Qg)();const{model:i,colorProviderRegistry:s,isDefaultColorDecoratorsEnabled:o}=uh(h,t);return qr(new Ds,s,i,Fi.XO.None,o)}),Di.w.registerCommand("_executeColorPresentationProvider",function(h,...e){const[t,i]=e,{uri:s,range:o}=i;if(!(s instanceof Ot.r)||!Array.isArray(t)||t.length!==4||!wt.Q.isIRange(o))throw(0,Ni.Qg)();const{model:l,colorProviderRegistry:g,isDefaultColorDecoratorsEnabled:k}=uh(h,s),[H,ee,ie,fe]=t;return qr(new jc({range:o,color:{red:H,green:ee,blue:ie,alpha:fe}}),g,l,Fi.XO.None,k)});var An=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Zl=function(h,e){return function(t,i){e(t,i,h)}},ea;const Na=Object.create({});let ol=class extends vt.jG{static{ea=this}static{this.ID="editor.contrib.colorDetector"}static{this.RECOMPUTE_TIME=1e3}constructor(e,t,i,s){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=i,this._localToDispose=this._register(new vt.Cm),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new zc.Qn(this._editor),this._decoratorLimitReporter=new Ff,this._colorDecorationClassRefs=this._register(new vt.Cm),this._debounceInformation=s.for(i.colorProvider,"Document Colors",{min:ea.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()})),this._register(e.onDidChangeModelLanguage(()=>this.updateColors())),this._register(i.colorProvider.onDidChange(()=>this.updateColors())),this._register(e.onDidChangeConfiguration(o=>{const l=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(148);const g=l!==this._isColorDecoratorsEnabled||o.hasChanged(21),k=o.hasChanged(148);(g||k)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(148),this.updateColors()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),i=this._configurationService.getValue(t);if(i&&typeof i=="object"){const s=i.colorDecorators;if(s&&s.enable!==void 0&&!s.enable)return s.enable}return this._editor.getOption(20)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new hi.pc,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}async beginCompute(){this._computePromise=(0,hi.SS)(async e=>{const t=this._editor.getModel();if(!t)return[];const i=new eo.W(!1),s=await Au(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,i.elapsed()),s});try{const e=await this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){(0,Ni.dz)(e)}}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(i=>({range:{startLineNumber:i.colorInfo.range.startLineNumber,startColumn:i.colorInfo.range.startColumn,endLineNumber:i.colorInfo.range.endLineNumber,endColumn:i.colorInfo.range.endColumn},options:Ki.kI.EMPTY}));this._editor.changeDecorations(i=>{this._decorationsIds=i.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((s,o)=>this._colorDatas.set(s,e[o]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],i=this._editor.getOption(21);for(let o=0;o<e.length&&t.length<i;o++){const{red:l,green:g,blue:k,alpha:H}=e[o].colorInfo.color,ee=new wn.bU(Math.round(l*255),Math.round(g*255),Math.round(k*255),H),ie=`rgba(${ee.r}, ${ee.g}, ${ee.b}, ${ee.a})`,fe=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:ie}));t.push({range:{startLineNumber:e[o].colorInfo.range.startLineNumber,startColumn:e[o].colorInfo.range.startColumn,endLineNumber:e[o].colorInfo.range.endLineNumber,endColumn:e[o].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:Vi.S8,inlineClassName:`${fe.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:Na}}})}const s=i<e.length?i:!1;this._decoratorLimitReporter.update(e.length,s),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const i=t.getDecorationsInRange(wt.Q.fromPositions(e,e)).filter(s=>this._colorDatas.has(s.id));return i.length===0?null:this._colorDatas.get(i[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}};ol=ea=An([Zl(1,pt.pG),Zl(2,_e.ILanguageFeaturesService),Zl(3,Vs.ILanguageFeatureDebounceService)],ol);class Ff{constructor(){this._onDidChange=new zi.vl,this._computed=0,this._limited=!1}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}(0,we.HW)(ol.ID,ol,1);class Ou{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,i){this.presentationIndex=i,this._onColorFlushed=new zi.vl,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new zi.vl,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new zi.vl,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let i=-1;for(let s=0;s<this.colorPresentations.length;s++)if(t.toLowerCase()===this.colorPresentations[s].label){i=s;break}if(i===-1){const s=t.split("(")[0].toLowerCase();for(let o=0;o<this.colorPresentations.length;o++)if(this.colorPresentations[o].label.toLowerCase().startsWith(s)){i=o;break}}i!==-1&&i!==this.presentationIndex&&(this.presentationIndex=i,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}var Fu=c(92327),ta=c(61329),Mo=c(62385);const vo=Se.$;class zv extends vt.jG{constructor(e,t,i,s=!1){super(),this.model=t,this.showingStandaloneColorPicker=s,this._closeButton=null,this._domNode=vo(".colorpicker-header"),Se.BC(e,this._domNode),this._pickedColorNode=Se.BC(this._domNode,vo(".picked-color")),Se.BC(this._pickedColorNode,vo("span.codicon.codicon-color-mode")),this._pickedColorPresentation=Se.BC(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const o=(0,Z.kg)("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",o),this._originalColorNode=Se.BC(this._domNode,vo(".original-color")),this._originalColorNode.style.backgroundColor=wn.Q1.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=i.getColorTheme().getColor(Tt.WfR)||wn.Q1.white,this._register(i.onDidColorThemeChange(l=>{this.backgroundColor=l.getColor(Tt.WfR)||wn.Q1.white})),this._register(Se.ko(this._pickedColorNode,Se.Bx.CLICK,()=>this.model.selectNextColorPresentation())),this._register(Se.ko(this._originalColorNode,Se.Bx.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=wn.Q1.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new ss(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=wn.Q1.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}class ss extends vt.jG{constructor(e){super(),this._onClicked=this._register(new zi.vl),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),Se.BC(e,this._button);const t=document.createElement("div");t.classList.add("close-button-inner-div"),Se.BC(this._button,t),Se.BC(t,vo(".button"+mn.L.asCSSSelector((0,rs.pU)("color-picker-close",Dt.W.close,(0,Z.kg)("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._register(Se.ko(this._button,Se.Bx.CLICK,()=>{this._onClicked.fire()}))}}class ia extends vt.jG{constructor(e,t,i,s=!1){super(),this.model=t,this.pixelRatio=i,this._insertButton=null,this._domNode=vo(".colorpicker-body"),Se.BC(e,this._domNode),this._saturationBox=new Wf(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new Bf(this._domNode,this.model,s),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new Hf(this._domNode,this.model,s),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),s&&(this._insertButton=this._register(new Vf(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const i=this.model.color.hsva;this.model.color=new wn.Q1(new wn.$J(i.h,e,t,i.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new wn.Q1(new wn.$J(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,i=(1-e)*360;this.model.color=new wn.Q1(new wn.$J(i===360?0:i,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class Wf extends vt.jG{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this._onDidChange=new zi.vl,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new zi.vl,this.onColorFlushed=this._onColorFlushed.event,this._domNode=vo(".saturation-wrap"),Se.BC(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",Se.BC(this._domNode,this._canvas),this.selection=vo(".saturation-selection"),Se.BC(this._domNode,this.selection),this.layout(),this._register(Se.ko(this._domNode,Se.Bx.POINTER_DOWN,s=>this.onPointerDown(s))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new ta._);const t=Se.BK(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>this.onDidChangePosition(s.pageX-t.left,s.pageY-t.top),()=>null);const i=Se.ko(e.target.ownerDocument,Se.Bx.POINTER_UP,()=>{this._onColorFlushed.fire(),i.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const i=Math.max(0,Math.min(1,e/this.width)),s=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(i,s),this._onDidChange.fire({s:i,v:s})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new wn.Q1(new wn.$J(e.h,1,1,1)),i=this._canvas.getContext("2d"),s=i.createLinearGradient(0,0,this._canvas.width,0);s.addColorStop(0,"rgba(255, 255, 255, 1)"),s.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),s.addColorStop(1,"rgba(255, 255, 255, 0)");const o=i.createLinearGradient(0,0,0,this._canvas.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this._canvas.width,this._canvas.height),i.fillStyle=wn.Q1.Format.CSS.format(t),i.fill(),i.fillStyle=s,i.fill(),i.fillStyle=o,i.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const t=e.hsva;this.paintSelection(t.s,t.v)}}class Xl extends vt.jG{constructor(e,t,i=!1){super(),this.model=t,this._onDidChange=new zi.vl,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new zi.vl,this.onColorFlushed=this._onColorFlushed.event,i?(this.domNode=Se.BC(e,vo(".standalone-strip")),this.overlay=Se.BC(this.domNode,vo(".standalone-overlay"))):(this.domNode=Se.BC(e,vo(".strip")),this.overlay=Se.BC(this.domNode,vo(".overlay"))),this.slider=Se.BC(this.domNode,vo(".slider")),this.slider.style.top="0px",this._register(Se.ko(this.domNode,Se.Bx.POINTER_DOWN,s=>this.onPointerDown(s))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){const t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new ta._),i=Se.BK(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,o=>this.onDidChangeTop(o.pageY-i.top),()=>null);const s=Se.ko(e.target.ownerDocument,Se.Bx.POINTER_UP,()=>{this._onColorFlushed.fire(),s.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class Bf extends Xl{constructor(e,t,i=!1){super(e,t,i),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);const{r:t,g:i,b:s}=e.rgba,o=new wn.Q1(new wn.bU(t,i,s,1)),l=new wn.Q1(new wn.bU(t,i,s,0));this.overlay.style.background=`linear-gradient(to bottom, ${o} 0%, ${l} 100%)`}getValue(e){return e.hsva.a}}class Hf extends Xl{constructor(e,t,i=!1){super(e,t,i),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class Vf extends vt.jG{constructor(e){super(),this._onClicked=this._register(new zi.vl),this.onClicked=this._onClicked.event,this._button=Se.BC(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._register(Se.ko(this._button,Se.Bx.CLICK,()=>{this._onClicked.fire()}))}get button(){return this._button}}class gh extends Mo.x{constructor(e,t,i,s,o=!1){super(),this.model=t,this.pixelRatio=i,this._register(Fu.c.getInstance(Se.zk(e)).onDidChange(()=>this.layout())),this._domNode=vo(".colorpicker-widget"),e.appendChild(this._domNode),this.header=this._register(new zv(this._domNode,this.model,s,o)),this.body=this._register(new ia(this._domNode,this.model,this.pixelRatio,o))}layout(){this.body.layout()}get domNode(){return this._domNode}}class Kc{constructor(e,t,i,s){this.priority=e,this.range=t,this.initialMousePosX=i,this.initialMousePosY=s,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class na{constructor(e,t,i,s,o,l){this.priority=e,this.owner=t,this.range=i,this.initialMousePosX=s,this.initialMousePosY=o,this.supportsMarkerHover=l,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}class Vo{constructor(e){this.renderedHoverParts=e}dispose(){for(const e of this.renderedHoverParts)e.dispose()}}const Uo=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}};var Pr=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},rl=function(h,e){return function(t,i){e(t,i,h)}};class Uf{constructor(e,t,i,s){this.owner=e,this.range=t,this.model=i,this.provider=s,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let sa=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,i){return hi.AE.fromPromise(this._computeAsync(e,t,i))}async _computeAsync(e,t,i){if(!this._editor.hasModel())return[];const s=ol.get(this._editor);if(!s)return[];for(const o of t){if(!s.isColorDecoration(o))continue;const l=s.getColorData(o.range.getStartPosition());if(l)return[await Wu(this,this._editor.getModel(),l.colorInfo,l.provider)]}return[]}renderHoverParts(e,t){const i=$c(this,this._editor,this._themeService,t,e);if(!i)return new Vo([]);this._colorPicker=i.colorPicker;const s={hoverPart:i.hoverPart,hoverElement:this._colorPicker.domNode,dispose(){i.disposables.dispose()}};return new Vo([s])}handleResize(){this._colorPicker?.layout()}isColorPickerVisible(){return!!this._colorPicker}};sa=Pr([rl(1,$i.Gy)],sa);class Jl{constructor(e,t,i,s){this.owner=e,this.range=t,this.model=i,this.provider=s}}let ql=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}async createColorHover(e,t,i){if(!this._editor.hasModel()||!ol.get(this._editor))return null;const o=await Au(i,this._editor.getModel(),Fi.XO.None);let l=null,g=null;for(const ie of o){const fe=ie.colorInfo;wt.Q.containsRange(fe.range,e.range)&&(l=fe,g=ie.provider)}const k=l??e,H=g??t,ee=!!l;return{colorHover:await Wu(this,this._editor.getModel(),k,H),foundInEditor:ee}}async updateEditorModel(e){if(!this._editor.hasModel())return;const t=e.model;let i=new wt.Q(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(await ec(this._editor.getModel(),t,this._color,i,e),i=Bu(this._editor,i,t))}renderHoverParts(e,t){return $c(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};ql=Pr([rl(1,$i.Gy)],ql);async function Wu(h,e,t,i){const s=e.getValueInRange(t.range),{red:o,green:l,blue:g,alpha:k}=t.color,H=new wn.bU(Math.round(o*255),Math.round(l*255),Math.round(g*255),k),ee=new wn.Q1(H),ie=await hh(e,t,i,Fi.XO.None),fe=new Ou(ee,[],0);return fe.colorPresentations=ie||[],fe.guessColorPresentation(ee,s),h instanceof sa?new Uf(h,wt.Q.lift(t.range),fe,i):new Jl(h,wt.Q.lift(t.range),fe,i)}function $c(h,e,t,i,s){if(i.length===0||!e.hasModel())return;if(s.setMinimumDimensions){const fe=e.getOption(67)+8;s.setMinimumDimensions(new Se.fg(302,fe))}const o=new vt.Cm,l=i[0],g=e.getModel(),k=l.model,H=o.add(new gh(s.fragment,k,e.getOption(144),t,h instanceof ql));let ee=!1,ie=new wt.Q(l.range.startLineNumber,l.range.startColumn,l.range.endLineNumber,l.range.endColumn);if(h instanceof ql){const fe=l.model.color;h.color=fe,ec(g,k,fe,ie,l),o.add(k.onColorFlushed(Me=>{h.color=Me}))}else o.add(k.onColorFlushed(async fe=>{await ec(g,k,fe,ie,l),ee=!0,ie=Bu(e,ie,k)}));return o.add(k.onDidChangeColor(fe=>{ec(g,k,fe,ie,l)})),o.add(e.onDidChangeModelContent(fe=>{ee?ee=!1:(s.hide(),e.focus())})),{hoverPart:l,colorPicker:H,disposables:o}}function Bu(h,e,t){const i=[],s=t.presentation.textEdit??{range:e,text:t.presentation.label,forceMoveMarkers:!1};i.push(s),t.presentation.additionalTextEdits&&i.push(...t.presentation.additionalTextEdits);const o=wt.Q.lift(s.range),l=h.getModel()._setTrackedRange(null,o,3);return h.executeEdits("colorpicker",i),h.pushUndoStop(),h.getModel()._getTrackedRange(l)??o}async function ec(h,e,t,i,s){const o=await hh(h,{range:i,color:{red:t.rgba.r/255,green:t.rgba.g/255,blue:t.rgba.b/255,alpha:t.rgba.a}},s.provider,Fi.XO.None);e.colorPresentations=o||[]}const Hu="editor.action.showHover",zf="editor.action.showDefinitionPreviewHover",jf="editor.action.scrollUpHover",Vu="editor.action.scrollDownHover",Kf="editor.action.scrollLeftHover",$f="editor.action.scrollRightHover",fh="editor.action.pageUpHover",ts="editor.action.pageDownHover",Gf="editor.action.goToTopHover",Uu="editor.action.goToBottomHover",Gc="editor.action.increaseHoverVerbosityLevel",Qc=Z.kg({key:"increaseHoverVerbosityLevel",comment:["Label for action that will increase the hover verbosity level."]},"Increase Hover Verbosity Level"),al="editor.action.decreaseHoverVerbosityLevel",mh=Z.kg({key:"decreaseHoverVerbosityLevel",comment:["Label for action that will decrease the hover verbosity level."]},"Decrease Hover Verbosity Level");var Yc=c(38795),si=c(63886),No=c(61353);const zu="editor.action.inlineSuggest.commit",Co="editor.action.inlineSuggest.showPrevious",ju="editor.action.inlineSuggest.showNext";var Ta=c(4857),tc=c(52906),ph=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},To=function(h,e){return function(t,i){e(t,i,h)}},ic;let _h=class extends vt.jG{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=(0,si.y0)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).showToolbar==="always"),this.sessionPosition=void 0,this.position=(0,si.un)(this,s=>{const o=this.model.read(s)?.primaryGhostText.read(s);if(!this.alwaysShowToolbar.read(s)||!o||o.parts.length===0)return this.sessionPosition=void 0,null;const l=o.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==o.lineNumber&&(this.sessionPosition=void 0);const g=new ui.y(o.lineNumber,Math.min(l,this.sessionPosition?.column??Number.MAX_SAFE_INTEGER));return this.sessionPosition=g,g}),this._register((0,si.yC)((s,o)=>{const l=this.model.read(s);if(!l||!this.alwaysShowToolbar.read(s))return;const g=(0,No.rm)((H,ee)=>{const ie=ee.add(this.instantiationService.createInstance(Ra,this.editor,!0,this.position,l.selectedInlineCompletionIndex,l.inlineCompletionsCount,l.activeCommands));return e.addContentWidget(ie),ee.add((0,vt.s)(()=>e.removeContentWidget(ie))),ee.add((0,si.fm)(fe=>{this.position.read(fe)&&l.lastTriggerKind.read(fe)!==Et.qw.Explicit&&l.triggerExplicitly()})),ie}),k=(0,si.ZX)(this,(H,ee)=>!!this.position.read(H)||!!ee);o.add((0,si.fm)(H=>{k.read(H)&&g.read(H)}))}))}};_h=ph([To(2,Ri._Y)],_h);const Qf=(0,rs.pU)("inline-suggestion-hints-next",Dt.W.chevronRight,(0,Z.kg)("parameterHintsNextIcon","Icon for show next parameter hint.")),Yf=(0,rs.pU)("inline-suggestion-hints-previous",Dt.W.chevronLeft,(0,Z.kg)("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let Ra=class extends vt.jG{static{ic=this}static{this._dropDownVisible=!1}static get dropDownVisible(){return this._dropDownVisible}static{this.id=0}createCommandAction(e,t,i){const s=new Js.rc(e,t,i,!0,()=>this._commandService.executeCommand(e)),o=this.keybindingService.lookupKeybinding(e,this._contextKeyService);let l=t;return o&&(l=(0,Z.kg)({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,o.getLabel())),s.tooltip=l,s}constructor(e,t,i,s,o,l,g,k,H,ee,ie){super(),this.editor=e,this.withBorder=t,this._position=i,this._currentSuggestionIdx=s,this._suggestionCount=o,this._extraCommands=l,this._commandService=g,this.keybindingService=H,this._contextKeyService=ee,this._menuService=ie,this.id=`InlineSuggestionHintsContentWidget${ic.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=(0,Se.h)("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[(0,Se.h)("div@toolBar")]),this.previousAction=this.createCommandAction(Co,(0,Z.kg)("previous","Previous"),mn.L.asClassName(Yf)),this.availableSuggestionCountAction=new Js.rc("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(ju,(0,Z.kg)("next","Next"),mn.L.asClassName(Qf)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(Fe.D8.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new hi.uC(()=>{this.availableSuggestionCountAction.label=""},100)),this.disableButtonsDebounced=this._register(new hi.uC(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this.toolBar=this._register(k.createInstance(vh,this.nodes.toolBar,Fe.D8.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:fe=>fe.startsWith("primary")},actionViewItemProvider:(fe,Me)=>{if(fe instanceof Fe.Xe)return k.createInstance(Zc,fe,void 0);if(fe===this.availableSuggestionCountAction){const xe=new Zf(void 0,fe,{label:!0,icon:!1});return xe.setClass("availableSuggestionCount"),xe}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility(fe=>{ic._dropDownVisible=fe})),this._register((0,si.fm)(fe=>{this._position.read(fe),this.editor.layoutContentWidget(this)})),this._register((0,si.fm)(fe=>{const Me=this._suggestionCount.read(fe),xe=this._currentSuggestionIdx.read(fe);Me!==void 0?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${xe+1}/${Me}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),Me!==void 0&&Me>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()})),this._register((0,si.fm)(fe=>{const xe=this._extraCommands.read(fe).map(Qe=>({class:void 0,id:Qe.id,enabled:!0,tooltip:Qe.tooltip||"",label:Qe.title,run:ut=>this._commandService.executeCommand(Qe.id)}));for(const[Qe,ut]of this.inlineCompletionsActionsMenus.getActions())for(const Lt of ut)Lt instanceof Fe.Xe&&xe.push(Lt);xe.length>0&&xe.unshift(new Js.wv),this.toolBar.setAdditionalSecondaryActions(xe)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};Ra=ic=ph([To(6,Di.d),To(7,Ri._Y),To(8,ms.b),To(9,et.fN),To(10,Fe.ez)],Ra);class Zf extends Yc.Z4{constructor(){super(...arguments),this._className=void 0}setClass(e){this._className=e}render(e){super.render(e),this._className&&e.classList.add(this._className)}updateTooltip(){}}class Zc extends Ta.oq{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=(0,Se.h)("div.keybinding").root;this._register(new Nr.x(t,Mn.OS,{disableTitle:!0,...Nr.l})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}updateTooltip(){}}let vh=class extends tc.p{constructor(e,t,i,s,o,l,g,k,H){super(e,{resetMenu:t,...i},s,o,l,g,k,H),this.menuId=t,this.options2=i,this.menuService=s,this.contextKeyService=o,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){const e=[],t=[];(0,Ta.Ot)(this.menu,this.options2?.menuOptions,{primary:e,secondary:t},this.options2?.toolbarOptions?.primaryGroup,this.options2?.toolbarOptions?.shouldInlineSubmenu,this.options2?.toolbarOptions?.useSeparatorsInPrimaryActions),t.push(...this.additionalActions),e.unshift(...this.prependedPrimaryActions),this.setActions(e,t)}setPrependedPrimaryActions(e){(0,Xi.aI)(this.prependedPrimaryActions,e,(t,i)=>t===i)||(this.prependedPrimaryActions=e,this.updateToolbar())}setAdditionalSecondaryActions(e){(0,Xi.aI)(this.additionalActions,e,(t,i)=>t===i)||(this.additionalActions=e,this.updateToolbar())}};vh=ph([To(3,Fe.ez),To(4,et.fN),To(5,vn.Z),To(6,ms.b),To(7,Di.d),To(8,is.k)],vh);function Xc(h,e,t){const i=Se.BK(h);return!(e<i.left||e>i.left+i.width||t<i.top||t>i.top+i.height)}class Ku{constructor(e,t,i){this.value=e,this.isComplete=t,this.hasLoadingMessage=i}}class Jc extends vt.jG{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new zi.vl),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new hi.uC(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new hi.uC(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new hi.uC(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(60).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=(0,hi.bI)(e=>this._computer.computeAsync(e)),(async()=>{try{for await(const e of this._asyncIterable)e&&(this._result.push(e),this._fireResult());this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(e){(0,Ni.dz)(e)}})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const e=this._state===0,t=this._state===4;this._onResult.fire(new Ku(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}var oa=c(21594);class $u{constructor(){this._onDidWillResize=new zi.vl,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new zi.vl,this.onDidResize=this._onDidResize.event,this._sashListener=new vt.Cm,this._size=new Se.fg(0,0),this._minSize=new Se.fg(0,0),this._maxSize=new Se.fg(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new oa.m(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new oa.m(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new oa.m(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:oa.B.North}),this._southSash=new oa.m(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:oa.B.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,i=0;this._sashListener.add(zi.Jh.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,i=0)})),this._sashListener.add(zi.Jh.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,i=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(s=>{e&&(i=s.currentX-s.startX,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(s=>{e&&(i=-(s.currentX-s.startX),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(s=>{e&&(t=-(s.currentY-s.startY),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(s=>{e&&(t=s.currentY-s.startY,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(zi.Jh.any(this._eastSash.onDidReset,this._westSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(zi.Jh.any(this._northSash.onDidReset,this._southSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,i,s){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=i?3:0,this._westSash.state=s?3:0}layout(e=this.size.height,t=this.size.width){const{height:i,width:s}=this._minSize,{height:o,width:l}=this._maxSize;e=Math.max(i,Math.min(o,e)),t=Math.max(s,Math.min(l,t));const g=new Se.fg(t,e);Se.fg.equals(g,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=g,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}const jv=30,Kv=24;class Xf extends vt.jG{constructor(e,t=new Se.fg(10,10)){super(),this._editor=e,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new $u),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=Se.fg.lift(t),this._resizableNode.layout(t.height,t.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize(i=>{this._resize(new Se.fg(i.dimension.width,i.dimension.height)),i.done&&(this._isResizing=!1)})),this._register(this._resizableNode.onDidWillResize(()=>{this._isResizing=!0}))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){return this._contentPosition?.position?ui.y.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);return!t||!i?void 0:Se.BK(t).top+i.top-jv}_availableVerticalSpaceBelow(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);if(!t||!i)return;const s=Se.BK(t),o=Se.tG(t.ownerDocument.body),l=s.top+i.top+i.height;return o.height-l-Kv}_findPositionPreference(e,t){const i=Math.min(this._availableVerticalSpaceBelow(t)??1/0,e),s=Math.min(this._availableVerticalSpaceAbove(t)??1/0,e),o=Math.min(Math.max(s,i),e),l=Math.min(e,o);let g;return this._editor.getOption(60).above?g=l<=s?1:2:g=l<=i?2:1,g===1?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),g}_resize(e){this._resizableNode.layout(e.height,e.width)}}var ra=c(73240),aa=c(59890),Jf=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},qc=function(h,e){return function(t,i){e(t,i,h)}},fr;const Gu=30,qf=6;let Ch=class extends Xf{static{fr=this}static{this.ID="editor.contrib.resizableContentHoverWidget"}static{this._lastDimensions=new Se.fg(0,0)}get isVisibleFromKeyboard(){return this._renderedHover?.source===1}get isVisible(){return this._hoverVisibleKey.get()??!1}get isFocused(){return this._hoverFocusedKey.get()??!1}constructor(e,t,i,s,o){const l=e.getOption(67)+8,g=150,k=new Se.fg(g,l);super(e,k),this._configurationService=i,this._accessibilityService=s,this._keybindingService=o,this._hover=this._register(new aa.N4),this._onDidResize=this._register(new zi.vl),this.onDidResize=this._onDidResize.event,this._minimumSize=k,this._hoverVisibleKey=ke.R.hoverVisible.bindTo(t),this._hoverFocusedKey=ke.R.hoverFocused.bindTo(t),Se.BC(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange(()=>{this.isVisible&&this._updateMaxDimensions()})),this._register(this._editor.onDidChangeConfiguration(ee=>{ee.hasChanged(50)&&this._updateFont()}));const H=this._register(Se.w5(this._resizableNode.domNode));this._register(H.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(H.onDidBlur(()=>{this._hoverFocusedKey.set(!1)})),this._setRenderedHover(void 0),this._editor.addContentWidget(this)}dispose(){super.dispose(),this._renderedHover?.dispose(),this._editor.removeContentWidget(this)}getId(){return fr.ID}static _applyDimensions(e,t,i){const s=typeof t=="number"?`${t}px`:t,o=typeof i=="number"?`${i}px`:i;e.style.width=s,e.style.height=o}_setContentsDomNodeDimensions(e,t){const i=this._hover.contentsDomNode;return fr._applyDimensions(i,e,t)}_setContainerDomNodeDimensions(e,t){const i=this._hover.containerDomNode;return fr._applyDimensions(i,e,t)}_setHoverWidgetDimensions(e,t){this._setContentsDomNodeDimensions(e,t),this._setContainerDomNodeDimensions(e,t),this._layoutContentWidget()}static _applyMaxDimensions(e,t,i){const s=typeof t=="number"?`${t}px`:t,o=typeof i=="number"?`${i}px`:i;e.style.maxWidth=s,e.style.maxHeight=o}_setHoverWidgetMaxDimensions(e,t){fr._applyMaxDimensions(this._hover.contentsDomNode,e,t),fr._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth",typeof e=="number"?`${e}px`:e),this._layoutContentWidget()}_setAdjustedHoverWidgetDimensions(e){this._setHoverWidgetMaxDimensions("none","none");const t=e.width,i=e.height;this._setHoverWidgetDimensions(t,i)}_updateResizableNodeMaxDimensions(){const e=this._findMaximumRenderingWidth()??1/0,t=this._findMaximumRenderingHeight()??1/0;this._resizableNode.maxSize=new Se.fg(e,t),this._setHoverWidgetMaxDimensions(e,t)}_resize(e){fr._lastDimensions=new Se.fg(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),this._onDidResize.fire()}_findAvailableSpaceVertically(){const e=this._renderedHover?.showAtPosition;if(e)return this._positionPreference===1?this._availableVerticalSpaceAbove(e):this._availableVerticalSpaceBelow(e)}_findMaximumRenderingHeight(){const e=this._findAvailableSpaceVertically();if(!e)return;let t=qf;return Array.from(this._hover.contentsDomNode.children).forEach(i=>{t+=i.clientHeight}),Math.min(e,t)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");const e=Array.from(this._hover.contentsDomNode.children).some(t=>t.scrollWidth>t.clientWidth);return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),e}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;const e=this._isHoverTextOverflowing(),t=typeof this._contentWidth>"u"?0:this._contentWidth-2;return e||this._hover.containerDomNode.clientWidth<t?Se.tG(this._hover.containerDomNode.ownerDocument.body).width-14:this._hover.containerDomNode.clientWidth+2}isMouseGettingCloser(e,t){if(!this._renderedHover)return!1;if(this._renderedHover.initialMousePosX===void 0||this._renderedHover.initialMousePosY===void 0)return this._renderedHover.initialMousePosX=e,this._renderedHover.initialMousePosY=t,!1;const i=Se.BK(this.getDomNode());this._renderedHover.closestMouseDistance===void 0&&(this._renderedHover.closestMouseDistance=Qu(this._renderedHover.initialMousePosX,this._renderedHover.initialMousePosY,i.left,i.top,i.width,i.height));const s=Qu(e,t,i.left,i.top,i.width,i.height);return s>this._renderedHover.closestMouseDistance+4?!1:(this._renderedHover.closestMouseDistance=Math.min(this._renderedHover.closestMouseDistance,s),!0)}_setRenderedHover(e){this._renderedHover?.dispose(),this._renderedHover=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle("hidden",!e)}_updateFont(){const{fontSize:e,lineHeight:t}=this._editor.getOption(50),i=this._hover.contentsDomNode;i.style.fontSize=`${e}px`,i.style.lineHeight=`${t/e}`,Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(o=>this._editor.applyFontInfo(o))}_updateContent(e){const t=this._hover.contentsDomNode;t.style.paddingBottom="",t.textContent="",t.appendChild(e)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){const e=Math.max(this._editor.getLayoutInfo().height/4,250,fr._lastDimensions.height),t=Math.max(this._editor.getLayoutInfo().width*.66,500,fr._lastDimensions.width);this._setHoverWidgetMaxDimensions(t,e)}_render(e){this._setRenderedHover(e),this._updateFont(),this._updateContent(e.domNode),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){return this._renderedHover?{position:this._renderedHover.showAtPosition,secondaryPosition:this._renderedHover.showAtSecondaryPosition,positionAffinity:this._renderedHover.shouldAppearBeforeContent?3:void 0,preference:[this._positionPreference??1]}:null}show(e){if(!this._editor||!this._editor.hasModel())return;this._render(e);const t=Se.OK(this._hover.containerDomNode),i=e.showAtPosition;this._positionPreference=this._findPositionPreference(t,i)??1,this.onContentsChanged(),e.shouldFocus&&this._hover.containerDomNode.focus(),this._onDidResize.fire();const o=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&(0,aa.vr)(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel()??"");o&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+o)}hide(){if(!this._renderedHover)return;const e=this._renderedHover.shouldFocus||this._hoverFocusedKey.get();this._setRenderedHover(void 0),this._resizableNode.maxSize=new Se.fg(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}_removeConstraintsRenderNormally(){const e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions("auto","auto")}setMinimumDimensions(e){this._minimumSize=new Se.fg(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}_updateMinimumWidth(){const e=typeof this._contentWidth>"u"?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new Se.fg(e,this._minimumSize.height)}onContentsChanged(){this._removeConstraintsRenderNormally();const e=this._hover.containerDomNode;let t=Se.OK(e),i=Se.Tr(e);if(this._resizableNode.layout(t,i),this._setHoverWidgetDimensions(i,t),t=Se.OK(e),i=Se.Tr(e),this._contentWidth=i,this._updateMinimumWidth(),this._resizableNode.layout(t,i),this._renderedHover?.showAtPosition){const s=Se.OK(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(s,this._renderedHover.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-Gu})}scrollRight(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+Gu})}pageUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}};Ch=fr=Jf([qc(1,et.fN),qc(2,pt.pG),qc(3,ra.j),qc(4,ms.b)],Ch);function Qu(h,e,t,i,s,o){const l=t+s/2,g=i+o/2,k=Math.max(Math.abs(h-l)-s/2,0),H=Math.max(Math.abs(e-g)-o/2,0);return Math.sqrt(k*k+H*H)}class ed{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(t.type!==1&&!t.supportsMarkerHover)return[];const i=e.getModel(),s=t.range.startLineNumber;if(s>i.getLineCount())return[];const o=i.getLineMaxColumn(s);return e.getLineDecorations(s).filter(l=>{if(l.options.isWholeLine)return!0;const g=l.range.startLineNumber===s?l.range.startColumn:1,k=l.range.endLineNumber===s?l.range.endColumn:o;if(l.options.showIfCollapsed){if(g>t.range.startColumn+1||t.range.endColumn-1>k)return!1}else if(g>t.range.startColumn||t.range.endColumn>k)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return hi.AE.EMPTY;const i=ed._getLineDecorations(this._editor,t);return hi.AE.merge(this._participants.map(s=>s.computeAsync?s.computeAsync(t,i,e):hi.AE.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=ed._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return(0,Xi.Yc)(t)}}class Yu{constructor(e,t,i){this.anchor=e,this.hoverParts=t,this.isComplete=i}filter(e){const t=this.hoverParts.filter(i=>i.isValidForHoverAnchor(e));return t.length===this.hoverParts.length?this:new em(this,this.anchor,t,this.isComplete)}}class em extends Yu{constructor(e,t,i,s){super(t,i,s),this.original=e}filter(e){return this.original.filter(e)}}var Zu=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},tm=function(h,e){return function(t,i){e(t,i,h)}};const Xu=Se.$;let td=class extends vt.jG{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this.actions=[],this._hasContent=!1,this.hoverElement=Xu("div.hover-row.status-bar"),this.hoverElement.tabIndex=0,this.actionsElement=Se.BC(this.hoverElement,Xu("div.actions"))}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;this._hasContent=!0;const s=this._register(aa.jQ.render(this.actionsElement,e,i));return this.actions.push(s),s}append(e){const t=Se.BC(this.actionsElement,e);return this._hasContent=!0,t}};td=Zu([tm(0,ms.b)],td);var nr=c(71521),ll=c(13199);class im{constructor(e,t,i){this.provider=e,this.hover=t,this.ordinal=i}}async function nm(h,e,t,i,s){const o=await Promise.resolve(h.provideHover(t,i,s)).catch(Ni.M_);if(!(!o||!sm(o)))return new im(h,o,e)}function bh(h,e,t,i,s=!1){const l=h.ordered(e,s).map((g,k)=>nm(g,k,e,t,i));return hi.AE.fromPromises(l).coalesce()}function Ju(h,e,t,i,s=!1){return bh(h,e,t,i,s).map(o=>o.hover).toPromise()}(0,we.ke)("_executeHoverProvider",(h,e,t)=>{const i=h.get(_e.ILanguageFeaturesService);return Ju(i.hoverProvider,e,t,Fi.XO.None)}),(0,we.ke)("_executeHoverProvider_recursive",(h,e,t)=>{const i=h.get(_e.ILanguageFeaturesService);return Ju(i.hoverProvider,e,t,Fi.XO.None,!0)});function sm(h){const e=typeof h.range<"u",t=typeof h.contents<"u"&&h.contents&&h.contents.length>0;return e&&t}var om=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Pa=function(h,e){return function(t,i){e(t,i,h)}};const cl=Se.$,rm=(0,rs.pU)("hover-increase-verbosity",Dt.W.add,Z.kg("increaseHoverVerbosity","Icon for increaseing hover verbosity.")),am=(0,rs.pU)("hover-decrease-verbosity",Dt.W.remove,Z.kg("decreaseHoverVerbosity","Icon for decreasing hover verbosity."));class zo{constructor(e,t,i,s,o,l=void 0){this.owner=e,this.range=t,this.contents=i,this.isBeforeContent=s,this.ordinal=o,this.source=l}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}class qu{constructor(e,t,i){this.hover=e,this.hoverProvider=t,this.hoverPosition=i}supportsVerbosityAction(e){switch(e){case Et.M$.Increase:return this.hover.canIncreaseVerbosity??!1;case Et.M$.Decrease:return this.hover.canDecreaseVerbosity??!1}}}let nc=class{constructor(e,t,i,s,o,l,g,k){this._editor=e,this._languageService=t,this._openerService=i,this._configurationService=s,this._languageFeaturesService=o,this._keybindingService=l,this._hoverService=g,this._commandService=k,this.hoverOrdinal=3}createLoadingMessage(e){return new zo(this,e.range,[new nn.Bc().appendText(Z.kg("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),s=e.range.startLineNumber,o=i.getLineMaxColumn(s),l=[];let g=1e3;const k=i.getLineLength(s),H=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),ee=this._editor.getOption(118),ie=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:H});let fe=!1;ee>=0&&k>ee&&e.range.startColumn>=ee&&(fe=!0,l.push(new zo(this,e.range,[{value:Z.kg("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,g++))),!fe&&typeof ie=="number"&&k>=ie&&l.push(new zo(this,e.range,[{value:Z.kg("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,g++));let Me=!1;for(const xe of t){const Qe=xe.range.startLineNumber===s?xe.range.startColumn:1,ut=xe.range.endLineNumber===s?xe.range.endColumn:o,Lt=xe.options.hoverMessage;if(!Lt||(0,nn.it)(Lt))continue;xe.options.beforeContentClassName&&(Me=!0);const kt=new wt.Q(e.range.startLineNumber,Qe,e.range.startLineNumber,ut);l.push(new zo(this,kt,(0,Xi._j)(Lt),Me,g++))}return l}computeAsync(e,t,i){if(!this._editor.hasModel()||e.type!==1)return hi.AE.EMPTY;const s=this._editor.getModel(),o=this._languageFeaturesService.hoverProvider;return o.has(s)?this._getMarkdownHovers(o,s,e,i):hi.AE.EMPTY}_getMarkdownHovers(e,t,i,s){const o=i.range.getStartPosition();return bh(e,t,o,s).filter(k=>!(0,nn.it)(k.hover.contents)).map(k=>{const H=k.hover.range?wt.Q.lift(k.hover.range):i.range,ee=new qu(k.hover,k.provider,o);return new zo(this,H,k.hover.contents,!1,k.ordinal,ee)})}renderHoverParts(e,t){return this._renderedHoverParts=new lm(t,e.fragment,this,this._editor,this._languageService,this._openerService,this._commandService,this._keybindingService,this._hoverService,this._configurationService,e.onContentsChanged),this._renderedHoverParts}updateMarkdownHoverVerbosityLevel(e,t,i){return Promise.resolve(this._renderedHoverParts?.updateMarkdownHoverPartVerbosityLevel(e,t,i))}};nc=om([Pa(1,nr.L),Pa(2,Qs.C),Pa(3,pt.pG),Pa(4,_e.ILanguageFeaturesService),Pa(5,ms.b),Pa(6,ll.TN),Pa(7,Di.d)],nc);class id{constructor(e,t,i){this.hoverPart=e,this.hoverElement=t,this.disposables=i}dispose(){this.disposables.dispose()}}class lm{constructor(e,t,i,s,o,l,g,k,H,ee,ie){this._hoverParticipant=i,this._editor=s,this._languageService=o,this._openerService=l,this._commandService=g,this._keybindingService=k,this._hoverService=H,this._configurationService=ee,this._onFinishedRendering=ie,this._ongoingHoverOperations=new Map,this._disposables=new vt.Cm,this.renderedHoverParts=this._renderHoverParts(e,t,this._onFinishedRendering),this._disposables.add((0,vt.s)(()=>{this.renderedHoverParts.forEach(fe=>{fe.dispose()}),this._ongoingHoverOperations.forEach(fe=>{fe.tokenSource.dispose(!0)})}))}_renderHoverParts(e,t,i){return e.sort((0,Xi.VE)(s=>s.ordinal,Xi.U9)),e.map(s=>{const o=this._renderHoverPart(s,i);return t.appendChild(o.hoverElement),o})}_renderHoverPart(e,t){const i=this._renderMarkdownHover(e,t),s=i.hoverElement,o=e.source,l=new vt.Cm;if(l.add(i),!o)return new id(e,s,l);const g=o.supportsVerbosityAction(Et.M$.Increase),k=o.supportsVerbosityAction(Et.M$.Decrease);if(!g&&!k)return new id(e,s,l);const H=cl("div.verbosity-actions");return s.prepend(H),l.add(this._renderHoverExpansionAction(H,Et.M$.Increase,g)),l.add(this._renderHoverExpansionAction(H,Et.M$.Decrease,k)),new id(e,s,l)}_renderMarkdownHover(e,t){return eg(this._editor,e,this._languageService,this._openerService,t)}_renderHoverExpansionAction(e,t,i){const s=new vt.Cm,o=t===Et.M$.Increase,l=Se.BC(e,cl(mn.L.asCSSSelector(o?rm:am)));l.tabIndex=0;const g=new ll.fO("mouse",!1,{target:e,position:{hoverPosition:0}},this._configurationService,this._hoverService);if(s.add(this._hoverService.setupManagedHover(g,l,dm(this._keybindingService,t))),!i)return l.classList.add("disabled"),s;l.classList.add("enabled");const k=()=>this._commandService.executeCommand(t===Et.M$.Increase?Gc:al);return s.add(new aa.vV(l,k)),s.add(new aa.M4(l,k,[3,10])),s}async updateMarkdownHoverPartVerbosityLevel(e,t,i=!0){const s=this._editor.getModel();if(!s)return;const o=this._getRenderedHoverPartAtIndex(t),l=o?.hoverPart.source;if(!o||!l?.supportsVerbosityAction(e))return;const g=await this._fetchHover(l,s,e);if(!g)return;const k=new qu(g,l.hoverProvider,l.hoverPosition),H=o.hoverPart,ee=new zo(this._hoverParticipant,H.range,g.contents,H.isBeforeContent,H.ordinal,k),ie=this._renderHoverPart(ee,this._onFinishedRendering);return this._replaceRenderedHoverPartAtIndex(t,ie,ee),i&&this._focusOnHoverPartWithIndex(t),{hoverPart:ee,hoverElement:ie.hoverElement}}async _fetchHover(e,t,i){let s=i===Et.M$.Increase?1:-1;const o=e.hoverProvider,l=this._ongoingHoverOperations.get(o);l&&(l.tokenSource.cancel(),s+=l.verbosityDelta);const g=new Fi.Qi;this._ongoingHoverOperations.set(o,{verbosityDelta:s,tokenSource:g});const k={verbosityRequest:{verbosityDelta:s,previousHover:e.hover}};let H;try{H=await Promise.resolve(o.provideHover(t,e.hoverPosition,g.token,k))}catch(ee){(0,Ni.M_)(ee)}return g.dispose(),this._ongoingHoverOperations.delete(o),H}_replaceRenderedHoverPartAtIndex(e,t,i){if(e>=this.renderedHoverParts.length||e<0)return;const s=this.renderedHoverParts[e],o=s.hoverElement,l=t.hoverElement,g=Array.from(l.children);o.replaceChildren(...g);const k=new id(i,o,t.disposables);o.focus(),s.dispose(),this.renderedHoverParts[e]=k}_focusOnHoverPartWithIndex(e){this.renderedHoverParts[e].hoverElement.focus()}_getRenderedHoverPartAtIndex(e){return this.renderedHoverParts[e]}dispose(){this._disposables.dispose()}}function cm(h,e,t,i,s){e.sort((0,Xi.VE)(l=>l.ordinal,Xi.U9));const o=[];for(const l of e)o.push(eg(t,l,i,s,h.onContentsChanged));return new Vo(o)}function eg(h,e,t,i,s){const o=new vt.Cm,l=cl("div.hover-row"),g=cl("div.hover-row-contents");l.appendChild(g);const k=e.contents;for(const ee of k){if((0,nn.it)(ee))continue;const ie=cl("div.markdown-hover"),fe=Se.BC(ie,cl("div.hover-contents")),Me=o.add(new Ps.T({editor:h},t,i));o.add(Me.onDidRenderAsync(()=>{fe.className="hover-contents code-hover-contents",s()}));const xe=o.add(Me.render(ee));fe.appendChild(xe.element),g.appendChild(ie)}return{hoverPart:e,hoverElement:l,dispose(){o.dispose()}}}function dm(h,e){switch(e){case Et.M$.Increase:{const t=h.lookupKeybinding(Gc);return t?Z.kg("increaseVerbosityWithKb","Increase Hover Verbosity ({0})",t.getLabel()):Z.kg("increaseVerbosity","Increase Hover Verbosity")}case Et.M$.Decrease:{const t=h.lookupKeybinding(al);return t?Z.kg("decreaseVerbosityWithKb","Decrease Hover Verbosity ({0})",t.getLabel()):Z.kg("decreaseVerbosity","Decrease Hover Verbosity")}}}var sr=c(59105),ps=c(76350);function Sh(h,e){return!!h[e]}class dl{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=Sh(e.event,t.triggerModifier),this.hasSideBySideModifier=Sh(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class wh{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=Sh(e,t.triggerModifier)}}class nd{constructor(e,t,i,s){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=s}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function yh(h){return h==="altKey"?Mn.zx?new nd(57,"metaKey",6,"altKey"):new nd(5,"ctrlKey",6,"altKey"):Mn.zx?new nd(6,"altKey",57,"metaKey"):new nd(6,"altKey",5,"ctrlKey")}class hl extends vt.jG{constructor(e,t){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new zi.vl),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new zi.vl),this.onExecute=this._onExecute.event,this._onCancel=this._register(new zi.vl),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=t?.extractLineNumberFromMouseEvent??(i=>i.target.position?i.target.position.lineNumber:0),this._opts=yh(this._editor.getOption(78)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(i=>{if(i.hasChanged(78)){const s=yh(this._editor.getOption(78));if(this._opts.equals(s))return;this._opts=s,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(i=>this._onEditorMouseMove(new dl(i,this._opts)))),this._register(this._editor.onMouseDown(i=>this._onEditorMouseDown(new dl(i,this._opts)))),this._register(this._editor.onMouseUp(i=>this._onEditorMouseUp(new dl(i,this._opts)))),this._register(this._editor.onKeyDown(i=>this._onEditorKeyDown(new wh(i,this._opts)))),this._register(this._editor.onKeyUp(i=>this._onEditorKeyUp(new wh(i,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(i=>this._onDidChangeCursorSelection(i))),this._register(this._editor.onDidChangeModel(i=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(i=>{(i.scrollTopChanged||i.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){const t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}class tg{constructor(e,t){this.range=e,this.direction=t}}class Lh{constructor(e,t,i){this.hint=e,this.anchor=t,this.provider=i,this._isResolved=!1}with(e){const t=new Lh(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}async resolve(e){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return await this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),await this._currentResolve}}async _doResolve(e){try{const t=await Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=t?.tooltip??this.hint.tooltip,this.hint.label=t?.label??this.hint.label,this.hint.textEdits=t?.textEdits??this.hint.textEdits,this._isResolved=!0}catch(t){(0,Ni.M_)(t),this._isResolved=!1}}}class la{static{this._emptyInlayHintList=Object.freeze({dispose(){},hints:[]})}static async create(e,t,i,s){const o=[],l=e.ordered(t).reverse().map(g=>i.map(async k=>{try{const H=await g.provideInlayHints(t,k,s);(H?.hints.length||g.onDidChangeInlayHints)&&o.push([H??la._emptyInlayHintList,g])}catch(H){(0,Ni.M_)(H)}}));if(await Promise.all(l.flat()),s.isCancellationRequested||t.isDisposed())throw new Ni.AL;return new la(i,o,t)}constructor(e,t,i){this._disposables=new vt.Cm,this.ranges=e,this.provider=new Set;const s=[];for(const[o,l]of t){this._disposables.add(o),this.provider.add(l);for(const g of o.hints){const k=i.validatePosition(g.position);let H="before";const ee=la._getRangeAtPosition(i,k);let ie;ee.getStartPosition().isBefore(k)?(ie=wt.Q.fromPositions(ee.getStartPosition(),k),H="after"):(ie=wt.Q.fromPositions(k,ee.getEndPosition()),H="before"),s.push(new Lh(g,new tg(ie,H),l))}}this.items=s.sort((o,l)=>ui.y.compare(o.hint.position,l.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const i=t.lineNumber,s=e.getWordAtPosition(t);if(s)return new wt.Q(i,s.startColumn,i,s.endColumn);e.tokenization.tokenizeIfCheap(i);const o=e.tokenization.getLineTokens(i),l=t.column-1,g=o.findTokenIndexAtOffset(l);let k=o.getStartOffset(g),H=o.getEndOffset(g);return H-k===1&&(k===l&&g>1?(k=o.getStartOffset(g-1),H=o.getEndOffset(g-1)):H===l&&g<o.getCount()-1&&(k=o.getStartOffset(g+1),H=o.getEndOffset(g+1))),new wt.Q(i,k+1,i,H+1)}}function hm(h){return Ot.r.from({scheme:ue.ny.command,path:h.id,query:h.arguments&&encodeURIComponent(JSON.stringify(h.arguments))}).toString()}var Aa=c(60153),sd=c(3223),Us=c(61231),um=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ar=function(h,e){return function(t,i){e(t,i,h)}};let jo=class extends mt.x{constructor(e,t,i,s,o,l,g,k,H,ee,ie,fe,Me){super(e,{...s.getRawOptions(),overflowWidgetsDomNode:s.getOverflowWidgetsDomNode()},i,o,l,g,k,H,ee,ie,fe,Me),this._parentEditor=s,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(s.onDidChangeConfiguration(xe=>this._onParentConfigurationChanged(xe)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){sd.co(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};jo=um([Ar(4,Ri._Y),Ar(5,Xt.T),Ar(6,Di.d),Ar(7,et.fN),Ar(8,$i.Gy),Ar(9,As.Ot),Ar(10,ra.j),Ar(11,Us.JZ),Ar(12,_e.ILanguageFeaturesService)],jo);var ig=c(6113);const ng=new wn.Q1(new wn.bU(0,122,204)),sc={showArrow:!0,showFrame:!0,className:"",frameColor:ng,arrowColor:ng,keepEditorSelection:!1},gm="vs.editor.contrib.zoneWidget";class fm{constructor(e,t,i,s,o,l,g,k){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=i,this.heightInLines=s,this.showInHiddenAreas=g,this.ordinal=k,this._onDomNodeTop=o,this._onComputedHeight=l}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class sg{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class Dh{static{this._IdGenerator=new ig.n(".arrow-decoration-")}constructor(e){this._editor=e,this._ruleName=Dh._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),Se.U2(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){Se.U2(this._ruleName),Se.Wt(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px !important; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:wt.Q.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}}class og{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new vt.Cm,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=sd.Go(t),sd.co(this.options,sc,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(i=>{const s=this._getWidth(i);this.domNode.style.width=s+"px",this.domNode.style.left=this._getLeft(i)+"px",this._onWidth(s)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new Dh(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){const e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){const t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const i=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(i))}this._resizeSash?.layout()}get position(){const e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){const i=wt.Q.isIRange(e)?wt.Q.lift(e):wt.Q.fromPositions(e);this._isShowing=!0,this._showImpl(i,t),this._isShowing=!1,this._positionMarkerId.set([{range:i,options:Ki.kI.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow?.hide(),this._positionMarkerId.clear()}_decoratingElementsHeight(){const e=this.editor.getOption(67);let t=0;if(this.options.showArrow){const i=Math.round(e/3);t+=2*i}if(this.options.showFrame){const i=Math.round(e/9);t+=2*i}return t}_showImpl(e,t){const i=e.getStartPosition(),s=this.editor.getLayoutInfo(),o=this._getWidth(s);this.domNode.style.width=`${o}px`,this.domNode.style.left=this._getLeft(s)+"px";const l=document.createElement("div");l.style.overflow="hidden";const g=this.editor.getOption(67);if(!this.options.allowUnlimitedHeight){const fe=Math.max(12,this.editor.getLayoutInfo().height/g*.8);t=Math.min(t,fe)}let k=0,H=0;if(this._arrow&&this.options.showArrow&&(k=Math.round(g/3),this._arrow.height=k,this._arrow.show(i)),this.options.showFrame&&(H=Math.round(g/9)),this.editor.changeViewZones(fe=>{this._viewZone&&fe.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new fm(l,i.lineNumber,i.column,t,Me=>this._onViewZoneTop(Me),Me=>this._onViewZoneHeight(Me),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=fe.addZone(this._viewZone),this._overlayWidget=new sg(gm+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const fe=this.options.frameWidth?this.options.frameWidth:H;this.container.style.borderTopWidth=fe+"px",this.container.style.borderBottomWidth=fe+"px"}const ee=t*g-this._decoratingElementsHeight();this.container&&(this.container.style.top=k+"px",this.container.style.height=ee+"px",this.container.style.overflow="hidden"),this._doLayout(ee,o),this.options.keepEditorSelection||this.editor.setSelection(e);const ie=this.editor.getModel();if(ie){const fe=ie.validateRange(new wt.Q(e.startLineNumber,1,e.endLineNumber+1,1));this.revealRange(fe,fe.startLineNumber===ie.getLineCount())}}revealRange(e,t){t?this.editor.revealLineNearTop(e.endLineNumber,0):this.editor.revealRange(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new oa.m(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){const i=(t.currentY-e.startY)/this.editor.getOption(67),s=i<0?Math.ceil(i):Math.floor(i),o=e.heightInLines+s;o>5&&o<35&&this._relayout(o)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}var od=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},rg=function(h,e){return function(t,i){e(t,i,h)}};const ag=(0,Ri.u1)("IPeekViewService");(0,er.v)(ag,class{constructor(){this._widgets=new Map}addExclusiveWidget(h,e){const t=this._widgets.get(h);t&&(t.listener.dispose(),t.widget.dispose());const i=()=>{const s=this._widgets.get(h);s&&s.widget===e&&(s.listener.dispose(),this._widgets.delete(h))};this._widgets.set(h,{widget:e,listener:e.onDidClose(i)})}},1);var uo;(function(h){h.inPeekEditor=new et.N1("inReferenceSearchEditor",!0,Z.kg("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),h.notInPeekEditor=h.inPeekEditor.toNegated()})(uo||(uo={}));let rd=class{static{this.ID="editor.contrib.referenceController"}constructor(e,t){e instanceof jo&&uo.inPeekEditor.bindTo(t)}dispose(){}};rd=od([rg(1,et.fN)],rd),(0,we.HW)(rd.ID,rd,0);function mm(h){const e=h.get(Xt.T).getFocusedCodeEditor();return e instanceof jo?e.getParentEditor():e}const pm={headerBackgroundColor:wn.Q1.white,primaryHeadingColor:wn.Q1.fromHex("#333333"),secondaryHeadingColor:wn.Q1.fromHex("#6c6c6cb3")};let ad=class extends og{constructor(e,t,i){super(e,t),this.instantiationService=i,this._onDidClose=new zi.vl,this.onDidClose=this._onDidClose.event,sd.co(this.options,pm,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=Se.$(".head"),this._bodyElement=Se.$(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=Se.$(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),Se.b2(this._titleElement,"click",o=>this._onTitleClick(o))),Se.BC(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=Se.$("span.filename"),this._secondaryHeading=Se.$("span.dirname"),this._metaHeading=Se.$("span.meta"),Se.BC(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const i=Se.$(".peekview-actions");Se.BC(this._headElement,i);const s=this._getActionBarOptions();this._actionbarWidget=new Xr.E(i,s),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new Js.rc("peekview.close",Z.kg("label.close","Close"),mn.L.asClassName(Dt.W.close),!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:Ta.rN.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Se.w_(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Se.WU(this._metaHeading)):Se.jD(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const i=Math.ceil(this.editor.getOption(67)*1.2),s=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(s,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};ad=od([rg(2,Ri._Y)],ad);const _m=(0,Tt.x1A)("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:wn.Q1.black,hcLight:wn.Q1.white},Z.kg("peekViewTitleBackground","Background color of the peek view title area.")),lg=(0,Tt.x1A)("peekViewTitleLabel.foreground",{dark:wn.Q1.white,light:wn.Q1.black,hcDark:wn.Q1.white,hcLight:Tt.By2},Z.kg("peekViewTitleForeground","Color of the peek view title.")),cg=(0,Tt.x1A)("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},Z.kg("peekViewTitleInfoForeground","Color of the peek view title info.")),vm=(0,Tt.x1A)("peekView.border",{dark:Tt.pOz,light:Tt.pOz,hcDark:Tt.b1q,hcLight:Tt.b1q},Z.kg("peekViewBorder","Color of the peek view borders and arrow.")),Cm=(0,Tt.x1A)("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:wn.Q1.black,hcLight:wn.Q1.white},Z.kg("peekViewResultsBackground","Background color of the peek view result list.")),$v=(0,Tt.x1A)("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:wn.Q1.white,hcLight:Tt.By2},Z.kg("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),Gv=(0,Tt.x1A)("peekViewResult.fileForeground",{dark:wn.Q1.white,light:"#1E1E1E",hcDark:wn.Q1.white,hcLight:Tt.By2},Z.kg("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),Qv=(0,Tt.x1A)("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},Z.kg("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),Yv=(0,Tt.x1A)("peekViewResult.selectionForeground",{dark:wn.Q1.white,light:"#6C6C6C",hcDark:wn.Q1.white,hcLight:Tt.By2},Z.kg("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),dg=(0,Tt.x1A)("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:wn.Q1.black,hcLight:wn.Q1.white},Z.kg("peekViewEditorBackground","Background color of the peek view editor.")),Zv=(0,Tt.x1A)("peekViewEditorGutter.background",dg,Z.kg("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),Xv=(0,Tt.x1A)("peekViewEditorStickyScroll.background",dg,Z.kg("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor.")),Jv=(0,Tt.x1A)("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},Z.kg("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),qv=(0,Tt.x1A)("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},Z.kg("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),e0=(0,Tt.x1A)("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:Tt.buw,hcLight:Tt.buw},Z.kg("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var mr=c(3478),pr=c(88360);class ca{constructor(e,t,i,s){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=s,this.id=ig.r.nextId()}get uri(){return this.link.uri}get range(){return this._range??this.link.targetSelectionRange??this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){const e=this.parent.getPreview(this)?.preview(this.range);return e?(0,Z.kg)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"{0} in {1} on line {2} at column {3}",e.value,(0,Ee.P8)(this.uri),this.range.startLineNumber,this.range.startColumn):(0,Z.kg)("aria.oneReference","in {0} on line {1} at column {2}",(0,Ee.P8)(this.uri),this.range.startLineNumber,this.range.startColumn)}}class bm{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:s,startColumn:o,endLineNumber:l,endColumn:g}=e,k=i.getWordUntilPosition({lineNumber:s,column:o-t}),H=new wt.Q(s,k.startColumn,s,o),ee=new wt.Q(l,g,l,1073741824),ie=i.getValueInRange(H).replace(/^\s+/,""),fe=i.getValueInRange(e),Me=i.getValueInRange(ee).replace(/\s+$/,"");return{value:ie+fe+Me,highlight:{start:ie.length,end:ie.length+fe.length}}}}class oc{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new Ai.fT}dispose(){(0,vt.AS)(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?(0,Z.kg)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,Ee.P8)(this.uri),this.uri.fsPath):(0,Z.kg)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,(0,Ee.P8)(this.uri),this.uri.fsPath)}async resolve(e){if(this._previews.size!==0)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const i=await e.createModelReference(t.uri);this._previews.set(t.uri,new bm(i))}catch(i){(0,Ni.dz)(i)}return this}}class bo{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new zi.vl,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;e.sort(bo._compareReferences);let s;for(const o of e)if((!s||!Ee.er.isEqual(s.uri,o.uri,!0))&&(s=new oc(this,o.uri),this.groups.push(s)),s.children.length===0||bo._compareReferences(o,s.children[s.children.length-1])!==0){const l=new ca(i===o,s,o,g=>this._onDidChangeReferenceRange.fire(g));this.references.push(l),s.children.push(l)}}dispose(){(0,vt.AS)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new bo(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?(0,Z.kg)("aria.result.0","No results found"):this.references.length===1?(0,Z.kg)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?(0,Z.kg)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,Z.kg)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:i}=e;let s=i.children.indexOf(e);const o=i.children.length,l=i.parent.groups.length;return l===1||t&&s+1<o||!t&&s>0?(t?s=(s+1)%o:s=(s+o-1)%o,i.children[s]):(s=i.parent.groups.indexOf(i),t?(s=(s+1)%l,i.parent.groups[s].children[0]):(s=(s+l-1)%l,i.parent.groups[s].children[i.parent.groups[s].children.length-1]))}nearestReference(e,t){const i=this.references.map((s,o)=>({idx:o,prefixLen:Vi.Qp(s.uri.toString(),e.toString()),offsetDist:Math.abs(s.range.startLineNumber-t.lineNumber)*100+Math.abs(s.range.startColumn-t.column)})).sort((s,o)=>s.prefixLen>o.prefixLen?-1:s.prefixLen<o.prefixLen?1:s.offsetDist<o.offsetDist?-1:s.offsetDist>o.offsetDist?1:0)[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&wt.Q.containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Ee.er.compare(e.uri,t.uri)||wt.Q.compareRangesUsingStarts(e.range,t.range)}}var Eh=c(39118),ld=c(49896),Sm=c(94528),ro=c(38714),hg=c(8954),Xs=c(5262),rc=c(47484),cd=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},dd=function(h,e){return function(t,i){e(t,i,h)}},xh;let kh=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof bo||e instanceof oc}getChildren(e){if(e instanceof bo)return e.groups;if(e instanceof oc)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};kh=cd([dd(0,sr.ITextModelService)],kh);class wm{getHeight(){return 23}getTemplateId(e){return e instanceof oc?hd.id:ud.id}}let Ih=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){if(e instanceof ca){const t=e.parent.getPreview(e)?.preview(e.range);if(t)return t.value}return(0,Ee.P8)(e.uri)}};Ih=cd([dd(0,ms.b)],Ih);class ym{getId(e){return e instanceof ca?e.id:e.uri}}let Mh=class extends vt.jG{constructor(e,t){super(),this._labelService=t;const i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new hg.s(i,{supportHighlights:!0})),this.badge=new Sm.x(Se.BC(i,Se.$(".count")),{},Io.m$),e.appendChild(i)}set(e,t){const i=(0,Ee.pD)(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(i,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const s=e.children.length;this.badge.setCount(s),s>1?this.badge.setTitleFormat((0,Z.kg)("referencesCount","{0} references",s)):this.badge.setTitleFormat((0,Z.kg)("referenceCount","{0} reference",s))}};Mh=cd([dd(1,rc.L)],Mh);let hd=class{static{xh=this}static{this.id="FileReferencesRenderer"}constructor(e){this._instantiationService=e,this.templateId=xh.id}renderTemplate(e){return this._instantiationService.createInstance(Mh,e)}renderElement(e,t,i){i.set(e.element,(0,Xs.WJ)(e.filterData))}disposeTemplate(e){e.dispose()}};hd=xh=cd([dd(0,Ri._Y)],hd);class Lm extends vt.jG{constructor(e){super(),this.label=this._register(new ro._(e))}set(e,t){const i=e.parent.getPreview(e)?.preview(e.range);if(!i||!i.value)this.label.set(`${(0,Ee.P8)(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:s,highlight:o}=i;t&&!Xs.ne.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(s,(0,Xs.WJ)(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(s,[o]))}}}class ud{constructor(){this.templateId=ud.id}static{this.id="OneReferenceRenderer"}renderTemplate(e){return new Lm(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(e){e.dispose()}}class t0{getWidgetAriaLabel(){return(0,Z.kg)("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var de=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},r=function(h,e){return function(t,i){e(t,i,h)}};class p{static{this.DecorationOptions=Ki.kI.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"})}constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new vt.Cm,this._callOnModelChange=new vt.Cm,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(const t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],i=[];for(let s=0,o=e.children.length;s<o;s++){const l=e.children[s];this._decorationIgnoreSet.has(l.id)||l.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:l.range,options:p.DecorationOptions}),i.push(s))}this._editor.changeDecorations(s=>{const o=s.deltaDecorations([],t);for(let l=0;l<o.length;l++)this._decorations.set(o[l],e.children[i[l]])})}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[i,s]of this._decorations){const o=t.getDecorationRange(i);if(!o)continue;let l=!1;if(!wt.Q.equalsRange(o,s.range)){if(wt.Q.spansMultipleLines(o))l=!0;else{const g=s.range.endColumn-s.range.startColumn,k=o.endColumn-o.startColumn;g!==k&&(l=!0)}l?(this._decorationIgnoreSet.add(s.id),e.push(i)):s.range=o}}for(let i=0,s=e.length;i<s;i++)this._decorations.delete(e[i]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}}class L{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const s=JSON.parse(e);t=s.ratio,i=s.heightInLines}catch{}return{ratio:t||.7,heightInLines:i||18}}}class V extends pr.er{}let X=class extends ad{constructor(e,t,i,s,o,l,g,k,H){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},l),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=o,this._instantiationService=l,this._peekViewService=g,this._uriLabel=k,this._keybindingService=H,this._disposeOnNewModel=new vt.Cm,this._callOnDispose=new vt.Cm,this._onDidSelectReference=new zi.vl,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new Se.fg(0,0),this._isClosing=!1,this._applyTheme(s.getColorTheme()),this._callOnDispose.add(s.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}get isClosing(){return this._isClosing}dispose(){this._isClosing=!0,this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,vt.AS)(this._preview),(0,vt.AS)(this._previewNotAvailableMessage),(0,vt.AS)(this._tree),(0,vt.AS)(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(vm)||wn.Q1.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(_m)||wn.Q1.transparent,primaryHeadingColor:e.getColor(lg),secondaryHeadingColor:e.getColor(cg)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=Se.BC(e,Se.$("div.messages")),Se.jD(this._messageContainer),this._splitView=new Eh.U(e,{orientation:1}),this._previewContainer=Se.BC(e,Se.$("div.preview.inline"));const t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(jo,this._previewContainer,t,{},this.editor),Se.jD(this._previewContainer),this._previewNotAvailableMessage=this._instantiationService.createInstance(Ki.Bz,Z.kg("missingPreviewMessage","no preview available"),ld.vH,Ki.Bz.DEFAULT_CREATION_OPTIONS,null),this._treeContainer=Se.BC(e,Se.$("div.ref-tree.inline"));const i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new t0,keyboardNavigationLabelProvider:this._instantiationService.createInstance(Ih),identityProvider:new ym,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:Cm}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Se.b2(this._treeContainer,"keydown",o=>{o.equals(9)&&(this._keybindingService.dispatchEvent(o,o.target),o.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(V,"ReferencesWidget",this._treeContainer,new wm,[this._instantiationService.createInstance(hd),this._instantiationService.createInstance(ud)],this._instantiationService.createInstance(kh),i),this._splitView.addView({onDidChange:zi.Jh.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:o=>{this._preview.layout({height:this._dim.height,width:o})}},Eh.X.Distribute),this._splitView.addView({onDidChange:zi.Jh.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:o=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${o}px`,this._tree.layout(this._dim.height,o)}},Eh.X.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));const s=(o,l)=>{o instanceof ca&&(l==="show"&&this._revealReference(o,!1),this._onDidSelectReference.fire({element:o,kind:l,source:"tree"}))};this._disposables.add(this._tree.onDidOpen(o=>{o.sideBySide?s(o.element,"side"):o.editorOptions.pinned?s(o.element,"goto"):s(o.element,"show")})),Se.jD(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new Se.fg(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=Z.kg("noResults","No results"),Se.WU(this._messageContainer),Promise.resolve(void 0)):(Se.jD(this._messageContainer),this._decorationsManager=new p(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:i}=e;if(t.detail!==2)return;const s=this._getFocusedReference();s&&this._onDidSelectReference.fire({element:{uri:s.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Se.WU(this._treeContainer),Se.WU(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof ca)return e;if(e instanceof oc&&e.children.length>0)return e.children[0]}async revealReference(e){await this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}async _revealReference(e,t){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==ue.ny.inMemory?this.setTitle((0,Ee.Pi)(e.uri),this._uriLabel.getUriLabel((0,Ee.pD)(e.uri))):this.setTitle(Z.kg("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),await this._tree.expand(e.parent),this._tree.reveal(e));const s=await i;if(!this._model){s.dispose();return}(0,vt.AS)(this._previewModelReference);const o=s.object;if(o){const l=this._preview.getModel()===o.textEditorModel?0:1,g=wt.Q.lift(e.range).collapseToStart();this._previewModelReference=s,this._preview.setModel(o.textEditorModel),this._preview.setSelection(g),this._preview.revealRangeInCenter(g,l)}else this._preview.setModel(this._previewNotAvailableMessage),s.dispose()}};X=de([r(3,$i.Gy),r(4,sr.ITextModelService),r(5,Ri._Y),r(6,ag),r(7,rc.L),r(8,ms.b)],X);var ge=c(4977),De=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},$e=function(h,e){return function(t,i){e(t,i,h)}},tt;const ft=new et.N1("referenceSearchVisible",!1,Z.kg("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let Nt=class{static{tt=this}static{this.ID="editor.contrib.referencesController"}static get(e){return e.getContribution(tt.ID)}constructor(e,t,i,s,o,l,g,k){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=s,this._notificationService=o,this._instantiationService=l,this._storageService=g,this._configurationService=k,this._disposables=new vt.Cm,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=ft.bindTo(i)}dispose(){this._referenceSearchVisible.reset(),this._disposables.dispose(),this._widget?.dispose(),this._model?.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let s;if(this._widget&&(s=this._widget.position),this.closeWidget(),s&&e.containsPosition(s))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const o="peekViewLayout",l=L.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(X,this._editor,this._defaultTreeKeyboardSupport,l),this._widget.setTitle(Z.kg("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget?(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget.isClosing||this.closeWidget(),this._widget=void 0):this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(k=>{const{element:H,kind:ee}=k;if(H)switch(ee){case"open":(k.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(H,!1,!1);break;case"side":this.openReference(H,!0,!1);break;case"goto":i?this._gotoReference(H,!0):this.openReference(H,!1,!0);break}}));const g=++this._requestIdPool;t.then(k=>{if(g!==this._requestIdPool||!this._widget){k.dispose();return}return this._model?.dispose(),this._model=k,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(Z.kg("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const H=this._editor.getModel().uri,ee=new ui.y(e.startLineNumber,e.startColumn),ie=this._model.nearestReference(H,ee);if(ie)return this._widget.setSelection(ie).then(()=>{this._widget&&this._editor.getOption(87)==="editor"&&this._widget.focusOnPreviewEditor()})}})},k=>{this._notificationService.error(k)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}async goToNextOrPreviousReference(e){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const s=this._model.nextOrPreviousReference(i,e),o=this._editor.hasTextFocus(),l=this._widget.isPreviewEditorFocused();await this._widget.setSelection(s),await this._gotoReference(s,!1),o?this._editor.focus():this._widget&&l&&this._widget.focusOnPreviewEditor()}async revealReference(e){!this._editor.hasModel()||!this._model||!this._widget||await this._widget.revealReference(e)}closeWidget(e=!0){this._widget?.dispose(),this._model?.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){this._widget?.hide(),this._ignoreModelChangeEvent=!0;const i=wt.Q.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:i,selectionSource:"code.jump",pinned:t}},this._editor).then(s=>{if(this._ignoreModelChangeEvent=!1,!s||!this._widget){this.closeWidget();return}if(this._editor===s)this._widget.show(i),this._widget.focusOnReferenceTree();else{const o=tt.get(s),l=this._model.clone();this.closeWidget(),s.focus(),o?.toggleWidget(i,(0,hi.SS)(g=>Promise.resolve(l)),this._peekMode??!1)}},s=>{this._ignoreModelChangeEvent=!1,(0,Ni.dz)(s)})}openReference(e,t,i){t||this.closeWidget();const{uri:s,range:o}=e;this._editorService.openCodeEditor({resource:s,options:{selection:o,selectionSource:"code.jump",pinned:i}},this._editor,t)}};Nt=tt=De([$e(2,et.fN),$e(3,Xt.T),$e(4,As.Ot),$e(5,Ri._Y),$e(6,Ji.CS),$e(7,pt.pG)],Nt);function Jt(h,e){const t=mm(h);if(!t)return;const i=Nt.get(t);i&&e(i)}mr.f.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,Dn.m5)(2089,60),when:et.M$.or(ft,uo.inPeekEditor),handler(h){Jt(h,e=>{e.changeFocusBetweenPreviewAndReferences()})}}),mr.f.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:et.M$.or(ft,uo.inPeekEditor),handler(h){Jt(h,e=>{e.goToNextOrPreviousReference(!0)})}}),mr.f.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:et.M$.or(ft,uo.inPeekEditor),handler(h){Jt(h,e=>{e.goToNextOrPreviousReference(!1)})}}),Di.w.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),Di.w.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),Di.w.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),Di.w.registerCommand("closeReferenceSearch",h=>Jt(h,e=>e.closeWidget())),mr.f.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:et.M$.and(uo.inPeekEditor,et.M$.not("config.editor.stablePeek"))}),mr.f.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:et.M$.and(ft,et.M$.not("config.editor.stablePeek"),et.M$.or(ke.R.editorTextFocus,ge.J7.negate()))}),mr.f.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:et.M$.and(ft,pr.YD,pr.Nf.negate(),pr.cH.negate()),handler(h){const t=h.get(pr.PE).lastFocusedList?.getFocus();Array.isArray(t)&&t[0]instanceof ca&&Jt(h,i=>i.revealReference(t[0]))}}),mr.f.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:et.M$.and(ft,pr.YD,pr.Nf.negate(),pr.cH.negate()),handler(h){const t=h.get(pr.PE).lastFocusedList?.getFocus();Array.isArray(t)&&t[0]instanceof ca&&Jt(h,i=>i.openReference(t[0],!0,!0))}}),Di.w.registerCommand("openReference",h=>{const t=h.get(pr.PE).lastFocusedList?.getFocus();Array.isArray(t)&&t[0]instanceof ca&&Jt(h,i=>i.openReference(t[0],!1,!0))});var _i=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Gi=function(h,e){return function(t,i){e(t,i,h)}};const kn=new et.N1("hasSymbols",!1,(0,Z.kg)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),Gn=(0,Ri.u1)("ISymbolNavigationService");let Pn=class{constructor(e,t,i,s){this._editorService=t,this._notificationService=i,this._keybindingService=s,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=kn.bindTo(e)}reset(){this._ctxHasSymbols.reset(),this._currentState?.dispose(),this._currentMessage?.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new as(this._editorService),s=i.onDidChange(o=>{if(this._ignoreEditorChange)return;const l=this._editorService.getActiveCodeEditor();if(!l)return;const g=l.getModel(),k=l.getPosition();if(!g||!k)return;let H=!1,ee=!1;for(const ie of t.references)if((0,Ee.n4)(ie.uri,g.uri))H=!0,ee=ee||wt.Q.containsPosition(ie.range,k);else if(H)break;(!H||!ee)&&this.reset()});this._currentState=(0,vt.qE)(i,s)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:wt.Q.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){this._currentMessage?.dispose();const e=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),t=e?(0,Z.kg)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,e.getLabel()):(0,Z.kg)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(t)}};Pn=_i([Gi(0,et.fN),Gi(1,Xt.T),Gi(2,As.Ot),Gi(3,ms.b)],Pn),(0,er.v)(Gn,Pn,1),(0,we.E_)(new class extends we.DX{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:kn,kbOpts:{weight:100,primary:70}})}runEditorCommand(h,e){return h.get(Gn).revealNext(e)}}),mr.f.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:kn,primary:9,handler(h){h.get(Gn).reset()}});let as=class{constructor(e){this._listener=new Map,this._disposables=new vt.Cm,this._onDidChange=new zi.vl,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),(0,vt.AS)(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,(0,vt.qE)(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){this._listener.get(e)?.dispose(),this._listener.delete(e)}};as=_i([Gi(0,Xt.T)],as);function Nn(h,e){return e.uri.scheme===h.uri.scheme?!0:!(0,ue.fV)(e.uri,ue.ny.walkThroughSnippet,ue.ny.vscodeChatCodeBlock,ue.ny.vscodeChatCodeCompareBlock)}async function fn(h,e,t,i,s){const l=t.ordered(h,i).map(k=>Promise.resolve(s(k,h,e)).then(void 0,H=>{(0,Ni.M_)(H)})),g=await Promise.all(l);return(0,Xi.Yc)(g.flat()).filter(k=>Nn(h,k))}function hs(h,e,t,i,s){return fn(e,t,h,i,(o,l,g)=>o.provideDefinition(l,g,s))}function So(h,e,t,i,s){return fn(e,t,h,i,(o,l,g)=>o.provideDeclaration(l,g,s))}function Ts(h,e,t,i,s){return fn(e,t,h,i,(o,l,g)=>o.provideImplementation(l,g,s))}function Oa(h,e,t,i,s){return fn(e,t,h,i,(o,l,g)=>o.provideTypeDefinition(l,g,s))}function Un(h,e,t,i,s,o){return fn(e,t,h,s,async(l,g,k)=>{const H=(await l.provideReferences(g,k,{includeDeclaration:!0},o))?.filter(ie=>Nn(g,ie));if(!i||!H||H.length!==2)return H;const ee=(await l.provideReferences(g,k,{includeDeclaration:!1},o))?.filter(ie=>Nn(g,ie));return ee&&ee.length===1?ee:H})}async function bs(h){const e=await h(),t=new bo(e,""),i=t.references.map(s=>s.link);return t.dispose(),i}(0,we.ke)("_executeDefinitionProvider",(h,e,t)=>{const i=h.get(_e.ILanguageFeaturesService),s=hs(i.definitionProvider,e,t,!1,Fi.XO.None);return bs(()=>s)}),(0,we.ke)("_executeDefinitionProvider_recursive",(h,e,t)=>{const i=h.get(_e.ILanguageFeaturesService),s=hs(i.definitionProvider,e,t,!0,Fi.XO.None);return bs(()=>s)}),(0,we.ke)("_executeTypeDefinitionProvider",(h,e,t)=>{const i=h.get(_e.ILanguageFeaturesService),s=Oa(i.typeDefinitionProvider,e,t,!1,Fi.XO.None);return bs(()=>s)}),(0,we.ke)("_executeTypeDefinitionProvider_recursive",(h,e,t)=>{const i=h.get(_e.ILanguageFeaturesService),s=Oa(i.typeDefinitionProvider,e,t,!0,Fi.XO.None);return bs(()=>s)}),(0,we.ke)("_executeDeclarationProvider",(h,e,t)=>{const i=h.get(_e.ILanguageFeaturesService),s=So(i.declarationProvider,e,t,!1,Fi.XO.None);return bs(()=>s)}),(0,we.ke)("_executeDeclarationProvider_recursive",(h,e,t)=>{const i=h.get(_e.ILanguageFeaturesService),s=So(i.declarationProvider,e,t,!0,Fi.XO.None);return bs(()=>s)}),(0,we.ke)("_executeReferenceProvider",(h,e,t)=>{const i=h.get(_e.ILanguageFeaturesService),s=Un(i.referenceProvider,e,t,!1,!1,Fi.XO.None);return bs(()=>s)}),(0,we.ke)("_executeReferenceProvider_recursive",(h,e,t)=>{const i=h.get(_e.ILanguageFeaturesService),s=Un(i.referenceProvider,e,t,!1,!0,Fi.XO.None);return bs(()=>s)}),(0,we.ke)("_executeImplementationProvider",(h,e,t)=>{const i=h.get(_e.ILanguageFeaturesService),s=Ts(i.implementationProvider,e,t,!1,Fi.XO.None);return bs(()=>s)}),(0,we.ke)("_executeImplementationProvider_recursive",(h,e,t)=>{const i=h.get(_e.ILanguageFeaturesService),s=Ts(i.implementationProvider,e,t,!0,Fi.XO.None);return bs(()=>s)}),Fe.ZG.appendMenuItem(Fe.D8.EditorContext,{submenu:Fe.D8.EditorContextPeek,title:Z.kg("peek.submenu","Peek"),group:"navigation",order:100});class ao{static is(e){return!e||typeof e!="object"?!1:!!(e instanceof ao||ui.y.isIPosition(e.position)&&e.model)}constructor(e,t){this.model=e,this.position=t}}class Ss extends we.qO{static{this._allSymbolNavigationCommands=new Map}static{this._activeAlternativeCommands=new Set}static all(){return Ss._allSymbolNavigationCommands.values()}static _patchConfig(e){const t={...e,f1:!0};if(t.menu)for(const i of os.f.wrap(t.menu))(i.id===Fe.D8.EditorContext||i.id===Fe.D8.EditorContextPeek)&&(i.when=et.M$.and(e.precondition,i.when));return t}constructor(e,t){super(Ss._patchConfig(t)),this.configuration=e,Ss._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,i,s){if(!t.hasModel())return Promise.resolve(void 0);const o=e.get(As.Ot),l=e.get(Xt.T),g=e.get(Bs.N8),k=e.get(Gn),H=e.get(_e.ILanguageFeaturesService),ee=e.get(Ri._Y),ie=t.getModel(),fe=t.getPosition(),Me=ao.is(i)?i:new ao(ie,fe),xe=new ds.gI(t,5),Qe=(0,hi.PK)(this._getLocationModel(H,Me.model,Me.position,xe.token),xe.token).then(async ut=>{if(!ut||xe.token.isCancellationRequested)return;(0,dn.xE)(ut.ariaMessage);let Lt;if(ut.referenceAt(ie.uri,fe)){const ni=this._getAlternativeCommand(t);!Ss._activeAlternativeCommands.has(ni)&&Ss._allSymbolNavigationCommands.has(ni)&&(Lt=Ss._allSymbolNavigationCommands.get(ni))}const kt=ut.references.length;if(kt===0){if(!this.configuration.muteMessage){const ni=ie.getWordAtPosition(fe);Ls.get(t)?.showMessage(this._getNoResultFoundMessage(ni),fe)}}else if(kt===1&&Lt)Ss._activeAlternativeCommands.add(this.desc.id),ee.invokeFunction(ni=>Lt.runEditorCommand(ni,t,i,s).finally(()=>{Ss._activeAlternativeCommands.delete(this.desc.id)}));else return this._onResult(l,k,t,ut,s)},ut=>{o.error(ut)}).finally(()=>{xe.dispose()});return g.showWhile(Qe,250),Qe}async _onResult(e,t,i,s,o){const l=this._getGoToPreference(i);if(!(i instanceof jo)&&(this.configuration.openInPeek||l==="peek"&&s.references.length>1))this._openInPeek(i,s,o);else{const g=s.firstReference(),k=s.references.length>1&&l==="gotoAndPeek",H=await this._openReference(i,e,g,this.configuration.openToSide,!k);k&&H?this._openInPeek(H,s,o):s.dispose(),l==="goto"&&t.put(g)}}async _openReference(e,t,i,s,o){let l;if((0,Et.Iu)(i)&&(l=i.targetSelectionRange),l||(l=i.range),!l)return;const g=await t.openCodeEditor({resource:i.uri,options:{selection:wt.Q.collapseToStart(l),selectionRevealType:3,selectionSource:"code.jump"}},e,s);if(g){if(o){const k=g.getModel(),H=g.createDecorationsCollection([{range:l,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{g.getModel()===k&&H.clear()},350)}return g}}_openInPeek(e,t,i){const s=Nt.get(e);s&&e.hasModel()?s.toggleWidget(i??e.getSelection(),(0,hi.SS)(o=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}}class ul extends Ss{async _getLocationModel(e,t,i,s){return new bo(await hs(e.definitionProvider,t,i,!1,s),Z.kg("def.title","Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?Z.kg("noResultWord","No definition found for '{0}'",e.word):Z.kg("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleDefinitions}}(0,Fe.ug)(class Hv extends ul{static{this.id="editor.action.revealDefinition"}constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Hv.id,title:{...Z.aS("actions.goToDecl.label","Go to Definition"),mnemonicTitle:Z.kg({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:ke.R.hasDefinitionProvider,keybinding:[{when:ke.R.editorTextFocus,primary:70,weight:100},{when:et.M$.and(ke.R.editorTextFocus,ge.W0),primary:2118,weight:100}],menu:[{id:Fe.D8.EditorContext,group:"navigation",order:1.1},{id:Fe.D8.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),Di.w.registerCommandAlias("editor.action.goToDeclaration",Hv.id)}}),(0,Fe.ug)(class Vv extends ul{static{this.id="editor.action.revealDefinitionAside"}constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:Vv.id,title:Z.aS("actions.goToDeclToSide.label","Open Definition to the Side"),precondition:et.M$.and(ke.R.hasDefinitionProvider,ke.R.isInEmbeddedEditor.toNegated()),keybinding:[{when:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,70),weight:100},{when:et.M$.and(ke.R.editorTextFocus,ge.W0),primary:(0,Dn.m5)(2089,2118),weight:100}]}),Di.w.registerCommandAlias("editor.action.openDeclarationToTheSide",Vv.id)}}),(0,Fe.ug)(class Uv extends ul{static{this.id="editor.action.peekDefinition"}constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Uv.id,title:Z.aS("actions.previewDecl.label","Peek Definition"),precondition:et.M$.and(ke.R.hasDefinitionProvider,uo.notInPeekEditor,ke.R.isInEmbeddedEditor.toNegated()),keybinding:{when:ke.R.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:Fe.D8.EditorContextPeek,group:"peek",order:2}}),Di.w.registerCommandAlias("editor.action.previewDeclaration",Uv.id)}});class Tn extends Ss{async _getLocationModel(e,t,i,s){return new bo(await So(e.declarationProvider,t,i,!1,s),Z.kg("decl.title","Declarations"))}_getNoResultFoundMessage(e){return e&&e.word?Z.kg("decl.noResultWord","No declaration found for '{0}'",e.word):Z.kg("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(58).multipleDeclarations}}(0,Fe.ug)(class s1 extends Tn{static{this.id="editor.action.revealDeclaration"}constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:s1.id,title:{...Z.aS("actions.goToDeclaration.label","Go to Declaration"),mnemonicTitle:Z.kg({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:et.M$.and(ke.R.hasDeclarationProvider,ke.R.isInEmbeddedEditor.toNegated()),menu:[{id:Fe.D8.EditorContext,group:"navigation",order:1.3},{id:Fe.D8.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?Z.kg("decl.noResultWord","No declaration found for '{0}'",e.word):Z.kg("decl.generic.noResults","No declaration found")}}),(0,Fe.ug)(class extends Tn{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:Z.aS("actions.peekDecl.label","Peek Declaration"),precondition:et.M$.and(ke.R.hasDeclarationProvider,uo.notInPeekEditor,ke.R.isInEmbeddedEditor.toNegated()),menu:{id:Fe.D8.EditorContextPeek,group:"peek",order:3}})}});class go extends Ss{async _getLocationModel(e,t,i,s){return new bo(await Oa(e.typeDefinitionProvider,t,i,!1,s),Z.kg("typedef.title","Type Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?Z.kg("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):Z.kg("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleTypeDefinitions}}(0,Fe.ug)(class o1 extends go{static{this.ID="editor.action.goToTypeDefinition"}constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:o1.ID,title:{...Z.aS("actions.goToTypeDefinition.label","Go to Type Definition"),mnemonicTitle:Z.kg({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:ke.R.hasTypeDefinitionProvider,keybinding:{when:ke.R.editorTextFocus,primary:0,weight:100},menu:[{id:Fe.D8.EditorContext,group:"navigation",order:1.4},{id:Fe.D8.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}}),(0,Fe.ug)(class r1 extends go{static{this.ID="editor.action.peekTypeDefinition"}constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:r1.ID,title:Z.aS("actions.peekTypeDefinition.label","Peek Type Definition"),precondition:et.M$.and(ke.R.hasTypeDefinitionProvider,uo.notInPeekEditor,ke.R.isInEmbeddedEditor.toNegated()),menu:{id:Fe.D8.EditorContextPeek,group:"peek",order:4}})}});class da extends Ss{async _getLocationModel(e,t,i,s){return new bo(await Ts(e.implementationProvider,t,i,!1,s),Z.kg("impl.title","Implementations"))}_getNoResultFoundMessage(e){return e&&e.word?Z.kg("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):Z.kg("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(58).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(58).multipleImplementations}}(0,Fe.ug)(class a1 extends da{static{this.ID="editor.action.goToImplementation"}constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:a1.ID,title:{...Z.aS("actions.goToImplementation.label","Go to Implementations"),mnemonicTitle:Z.kg({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:ke.R.hasImplementationProvider,keybinding:{when:ke.R.editorTextFocus,primary:2118,weight:100},menu:[{id:Fe.D8.EditorContext,group:"navigation",order:1.45},{id:Fe.D8.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}}),(0,Fe.ug)(class l1 extends da{static{this.ID="editor.action.peekImplementation"}constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:l1.ID,title:Z.aS("actions.peekImplementation.label","Peek Implementations"),precondition:et.M$.and(ke.R.hasImplementationProvider,uo.notInPeekEditor,ke.R.isInEmbeddedEditor.toNegated()),keybinding:{when:ke.R.editorTextFocus,primary:3142,weight:100},menu:{id:Fe.D8.EditorContextPeek,group:"peek",order:5}})}});class i0 extends Ss{_getNoResultFoundMessage(e){return e?Z.kg("references.no","No references found for '{0}'",e.word):Z.kg("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(58).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(58).multipleReferences}}(0,Fe.ug)(class extends i0{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{...Z.aS("goToReferences.label","Go to References"),mnemonicTitle:Z.kg({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:et.M$.and(ke.R.hasReferenceProvider,uo.notInPeekEditor,ke.R.isInEmbeddedEditor.toNegated()),keybinding:{when:ke.R.editorTextFocus,primary:1094,weight:100},menu:[{id:Fe.D8.EditorContext,group:"navigation",order:1.45},{id:Fe.D8.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}async _getLocationModel(e,t,i,s){return new bo(await Un(e.referenceProvider,t,i,!0,!1,s),Z.kg("ref.title","References"))}}),(0,Fe.ug)(class extends i0{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:Z.aS("references.action.label","Peek References"),precondition:et.M$.and(ke.R.hasReferenceProvider,uo.notInPeekEditor,ke.R.isInEmbeddedEditor.toNegated()),menu:{id:Fe.D8.EditorContextPeek,group:"peek",order:6}})}async _getLocationModel(e,t,i,s){return new bo(await Un(e.referenceProvider,t,i,!1,!1,s),Z.kg("ref.title","References"))}});class d1 extends Ss{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",title:Z.aS("label.generic","Go to Any Symbol"),precondition:et.M$.and(uo.notInPeekEditor,ke.R.isInEmbeddedEditor.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}async _getLocationModel(e,t,i,s){return new bo(this._references,Z.kg("generic.title","Locations"))}_getNoResultFoundMessage(e){return e&&Z.kg("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){return this._gotoMultipleBehaviour??e.getOption(58).multipleReferences}_getAlternativeCommand(){return""}}Di.w.registerCommand({id:"editor.action.goToLocations",metadata:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Ot.r},{name:"position",description:"The position at which to start",constraint:ui.y.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:async(h,e,t,i,s,o,l)=>{(0,hn.j)(Ot.r.isUri(e)),(0,hn.j)(ui.y.isIPosition(t)),(0,hn.j)(Array.isArray(i)),(0,hn.j)(typeof s>"u"||typeof s=="string"),(0,hn.j)(typeof l>"u"||typeof l=="boolean");const g=h.get(Xt.T),k=await g.openCodeEditor({resource:e},g.getFocusedCodeEditor());if((0,Aa.z9)(k))return k.setPosition(t),k.revealPositionInCenterIfOutsideViewport(t,0),k.invokeWithinContext(H=>{const ee=new class extends d1{_getNoResultFoundMessage(ie){return o||super._getNoResultFoundMessage(ie)}}({muteMessage:!o,openInPeek:!!l,openToSide:!1},i,s);H.get(Ri._Y).invokeFunction(ee.run.bind(ee),k)})}}),Di.w.registerCommand({id:"editor.action.peekLocations",metadata:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Ot.r},{name:"position",description:"The position at which to start",constraint:ui.y.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:async(h,e,t,i,s)=>{h.get(Di.d).executeCommand("editor.action.goToLocations",e,t,i,s,void 0,!0)}}),Di.w.registerCommand({id:"editor.action.findReferences",handler:(h,e,t)=>{(0,hn.j)(Ot.r.isUri(e)),(0,hn.j)(ui.y.isIPosition(t));const i=h.get(_e.ILanguageFeaturesService),s=h.get(Xt.T);return s.openCodeEditor({resource:e},s.getFocusedCodeEditor()).then(o=>{if(!(0,Aa.z9)(o)||!o.hasModel())return;const l=Nt.get(o);if(!l)return;const g=(0,hi.SS)(H=>Un(i.referenceProvider,o.getModel(),ui.y.lift(t),!1,!1,H).then(ee=>new bo(ee,Z.kg("ref.title","References")))),k=new wt.Q(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(l.toggleWidget(k,g,!1))})}}),Di.w.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");async function h1(h,e,t,i){const s=h.get(sr.ITextModelService),o=h.get(vn.Z),l=h.get(Di.d),g=h.get(Ri._Y),k=h.get(As.Ot);if(await i.item.resolve(Fi.XO.None),!i.part.location)return;const H=i.part.location,ee=[],ie=new Set(Fe.ZG.getMenuItems(Fe.D8.EditorContext).map(Me=>(0,Fe.is)(Me)?Me.command.id:no()));for(const Me of Ss.all())ie.has(Me.desc.id)&&ee.push(new Js.rc(Me.desc.id,Fe.Xe.label(Me.desc,{renderShortTitle:!0}),void 0,!0,async()=>{const xe=await s.createModelReference(H.uri);try{const Qe=new ao(xe.object.textEditorModel,wt.Q.getStartPosition(H.range)),ut=i.item.anchor.range;await g.invokeFunction(Me.runEditorCommand.bind(Me),e,Qe,ut)}finally{xe.dispose()}}));if(i.part.command){const{command:Me}=i.part;ee.push(new Js.wv),ee.push(new Js.rc(Me.id,Me.title,void 0,!0,async()=>{try{await l.executeCommand(Me.id,...Me.arguments??[])}catch(xe){k.notify({severity:As.AI.Error,source:i.item.provider.displayName,message:xe})}}))}const fe=e.getOption(128);o.showContextMenu({domForShadowRoot:fe?e.getDomNode()??void 0:void 0,getAnchor:()=>{const Me=Se.BK(t);return{x:Me.left,y:Me.top+Me.height+8}},getActions:()=>ee,onHide:()=>{e.focus()},autoSelectFirstItem:!0})}async function n0(h,e,t,i){const o=await h.get(sr.ITextModelService).createModelReference(i.uri);await t.invokeWithinContext(async l=>{const g=e.hasSideBySideModifier,k=l.get(et.fN),H=uo.inPeekEditor.getValue(k),ee=!g&&t.getOption(89)&&!H;return new ul({openToSide:g,openInPeek:ee,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(l,new ao(o.object.textEditorModel,wt.Q.getStartPosition(i.range)),wt.Q.lift(i.range))}),o.dispose()}var u1=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},gd=function(h,e){return function(t,i){e(t,i,h)}},fd;class ug{constructor(){this._entries=new Ai.qK(50)}get(e){const t=ug._key(e);return this._entries.get(t)}set(e,t){const i=ug._key(e);this._entries.set(i,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}const s0=(0,Ri.u1)("IInlayHintsCache");(0,er.v)(s0,ug,1);class Dm{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}}class g1{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}let Nh=class{static{fd=this}static{this.ID="editor.contrib.InlayHints"}static{this._MAX_DECORATORS=1500}static{this._MAX_LABEL_LEN=43}static get(e){return e.getContribution(fd.ID)??void 0}constructor(e,t,i,s,o,l,g){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=s,this._commandService=o,this._notificationService=l,this._instaService=g,this._disposables=new vt.Cm,this._sessionDisposables=new vt.Cm,this._decorationsMetadata=new Map,this._ruleFactory=new zc.Qn(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(k=>{k.hasChanged(142)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(142);if(e.enabled==="off")return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;if(e.enabled==="on")this._activeRenderMode=0;else{let g,k;e.enabled==="onUnlessPressed"?(g=0,k=1):(g=1,k=0),this._activeRenderMode=g,this._sessionDisposables.add(Se.Di.getInstance().event(H=>{if(!this._editor.hasModel())return;const ee=H.altKey&&H.ctrlKey&&!(H.shiftKey||H.metaKey)?k:g;if(ee!==this._activeRenderMode){this._activeRenderMode=ee;const ie=this._editor.getModel(),fe=this._copyInlayHintsWithCurrentAnchor(ie);this._updateHintsDecorators([ie.getFullModelRange()],fe),l.schedule(0)}}))}const i=this._inlayHintsCache.get(t);i&&this._updateHintsDecorators([t.getFullModelRange()],i),this._sessionDisposables.add((0,vt.s)(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let s;const o=new Set,l=new hi.uC(async()=>{const g=Date.now();s?.dispose(!0),s=new Fi.Qi;const k=t.onWillDispose(()=>s?.cancel());try{const H=s.token,ee=await la.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),H);if(l.delay=this._debounceInfo.update(t,Date.now()-g),H.isCancellationRequested){ee.dispose();return}for(const ie of ee.provider)typeof ie.onDidChangeInlayHints=="function"&&!o.has(ie)&&(o.add(ie),this._sessionDisposables.add(ie.onDidChangeInlayHints(()=>{l.isScheduled()||l.schedule()})));this._sessionDisposables.add(ee),this._updateHintsDecorators(ee.ranges,ee.items),this._cacheHintsForFastRestore(t)}catch(H){(0,Ni.dz)(H)}finally{s.dispose(),k.dispose()}},this._debounceInfo.get(t));this._sessionDisposables.add(l),this._sessionDisposables.add((0,vt.s)(()=>s?.dispose(!0))),l.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(g=>{(g.scrollTopChanged||!l.isScheduled())&&l.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(g=>{s?.cancel();const k=Math.max(l.delay,1250);l.schedule(k)})),this._sessionDisposables.add(this._installDblClickGesture(()=>l.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new vt.Cm,t=e.add(new hl(this._editor)),i=new vt.Cm;return e.add(i),e.add(t.onMouseMoveOrRelevantKeyDown(s=>{const[o]=s,l=this._getInlayHintLabelPart(o),g=this._editor.getModel();if(!l||!g){i.clear();return}const k=new Fi.Qi;i.add((0,vt.s)(()=>k.dispose(!0))),l.item.resolve(k.token),this._activeInlayHintPart=l.part.command||l.part.location?new g1(l,o.hasTriggerModifier):void 0;const H=g.validatePosition(l.item.hint.position).lineNumber,ee=new wt.Q(H,1,H,g.getLineMaxColumn(H)),ie=this._getInlineHintsForRange(ee);this._updateHintsDecorators([ee],ie),i.add((0,vt.s)(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([ee],ie)}))})),e.add(t.onCancel(()=>i.clear())),e.add(t.onExecute(async s=>{const o=this._getInlayHintLabelPart(s);if(o){const l=o.part;l.location?this._instaService.invokeFunction(n0,s,this._editor,l.location):Et.uB.is(l.command)&&await this._invokeCommand(l.command,o.item)}})),e}_getInlineHintsForRange(e){const t=new Set;for(const i of this._decorationsMetadata.values())e.containsRange(i.item.anchor.range)&&t.add(i.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(async t=>{if(t.event.detail!==2)return;const i=this._getInlayHintLabelPart(t);if(i&&(t.event.preventDefault(),await i.item.resolve(Fi.XO.None),(0,Xi.EI)(i.item.hint.textEdits))){const s=i.item.hint.textEdits.map(o=>ps.k.replace(wt.Q.lift(o.range),o.text));this._editor.executeEdits("inlayHint.default",s),e()}})}_installContextMenu(){return this._editor.onContextMenu(async e=>{if(!(0,Se.sb)(e.event.target))return;const t=this._getInlayHintLabelPart(e);t&&await this._instaService.invokeFunction(h1,this._editor,e.event.target,t)})}_getInlayHintLabelPart(e){if(e.target.type!==6)return;const t=e.target.detail.injectedText?.options;if(t instanceof Ki.Ho&&t?.attachedData instanceof Dm)return t.attachedData}async _invokeCommand(e,t){try{await this._commandService.executeCommand(e.id,...e.arguments??[])}catch(i){this._notificationService.notify({severity:As.AI.Error,source:t.provider.displayName,message:i})}}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[i,s]of this._decorationsMetadata){if(t.has(s.item))continue;const o=e.getDecorationRange(i);if(o){const l=new tg(o,s.item.anchor.direction),g=s.item.with({anchor:l});t.set(s.item,g)}}return Array.from(t.values())}_getHintsRanges(){const t=this._editor.getModel(),i=this._editor.getVisibleRangesPlusViewportAboveBelow(),s=[];for(const o of i.sort(wt.Q.compareRangesUsingStarts)){const l=t.validateRange(new wt.Q(o.startLineNumber-30,o.startColumn,o.endLineNumber+30,o.endColumn));s.length===0||!wt.Q.areIntersectingOrTouching(s[s.length-1],l)?s.push(l):s[s.length-1]=wt.Q.plusRange(s[s.length-1],l)}return s}_updateHintsDecorators(e,t){const i=[],s=(xe,Qe,ut,Lt,kt)=>{const ni={content:ut,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:Qe.className,cursorStops:Lt,attachedData:kt};i.push({item:xe,classNameRef:Qe,decoration:{range:xe.anchor.range,options:{description:"InlayHint",showIfCollapsed:xe.anchor.range.isEmpty(),collapseOnReplaceEdit:!xe.anchor.range.isEmpty(),stickiness:0,[xe.anchor.direction]:this._activeRenderMode===0?ni:void 0}}})},o=(xe,Qe)=>{const ut=this._ruleFactory.createClassNameRef({width:`${l/3|0}px`,display:"inline-block"});s(xe,ut,"\u200A",Qe?In.VW.Right:In.VW.None)},{fontSize:l,fontFamily:g,padding:k,isUniform:H}=this._getLayoutInfo(),ee="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(ee,g);let ie={line:0,totalLen:0};for(const xe of t){if(ie.line!==xe.anchor.range.startLineNumber&&(ie={line:xe.anchor.range.startLineNumber,totalLen:0}),ie.totalLen>fd._MAX_LABEL_LEN)continue;xe.hint.paddingLeft&&o(xe,!1);const Qe=typeof xe.hint.label=="string"?[{label:xe.hint.label}]:xe.hint.label;for(let ut=0;ut<Qe.length;ut++){const Lt=Qe[ut],kt=ut===0,ni=ut===Qe.length-1,gi={fontSize:`${l}px`,fontFamily:`var(${ee}), ${ns.jU.fontFamily}`,verticalAlign:H?"baseline":"middle",unicodeBidi:"isolate"};(0,Xi.EI)(xe.hint.textEdits)&&(gi.cursor="default"),this._fillInColors(gi,xe.hint),(Lt.command||Lt.location)&&this._activeInlayHintPart?.part.item===xe&&this._activeInlayHintPart.part.index===ut&&(gi.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(gi.color=(0,$i.Yf)(Tt.Ztu),gi.cursor="pointer")),k&&(kt&&ni?(gi.padding=`1px ${Math.max(1,l/4)|0}px`,gi.borderRadius=`${l/4|0}px`):kt?(gi.padding=`1px 0 1px ${Math.max(1,l/4)|0}px`,gi.borderRadius=`${l/4|0}px 0 0 ${l/4|0}px`):ni?(gi.padding=`1px ${Math.max(1,l/4)|0}px 1px 0`,gi.borderRadius=`0 ${l/4|0}px ${l/4|0}px 0`):gi.padding="1px 0 1px 0");let pi=Lt.label;ie.totalLen+=pi.length;let pn=!1;const ln=ie.totalLen-fd._MAX_LABEL_LEN;if(ln>0&&(pi=pi.slice(0,-ln)+"\u2026",pn=!0),s(xe,this._ruleFactory.createClassNameRef(gi),f1(pi),ni&&!xe.hint.paddingRight?In.VW.Right:In.VW.None,new Dm(xe,ut)),pn)break}if(xe.hint.paddingRight&&o(xe,!0),i.length>fd._MAX_DECORATORS)break}const fe=[];for(const[xe,Qe]of this._decorationsMetadata){const ut=this._editor.getModel()?.getDecorationRange(xe);ut&&e.some(Lt=>Lt.containsRange(ut))&&(fe.push(xe),Qe.classNameRef.dispose(),this._decorationsMetadata.delete(xe))}const Me=ki.D.capture(this._editor);this._editor.changeDecorations(xe=>{const Qe=xe.deltaDecorations(fe,i.map(ut=>ut.decoration));for(let ut=0;ut<Qe.length;ut++){const Lt=i[ut];this._decorationsMetadata.set(Qe[ut],Lt)}}),Me.restore(this._editor)}_fillInColors(e,t){t.kind===Et.r4.Parameter?(e.backgroundColor=(0,$i.Yf)(Tt.B2L),e.color=(0,$i.Yf)(Tt.sjA)):t.kind===Et.r4.Type?(e.backgroundColor=(0,$i.Yf)(Tt._pU),e.color=(0,$i.Yf)(Tt.HwT)):(e.backgroundColor=(0,$i.Yf)(Tt.WL6),e.color=(0,$i.Yf)(Tt.P6i))}_getLayoutInfo(){const e=this._editor.getOption(142),t=e.padding,i=this._editor.getOption(52),s=this._editor.getOption(49);let o=e.fontSize;(!o||o<5||o>i)&&(o=i);const l=e.fontFamily||s;return{fontSize:o,fontFamily:l,padding:t,isUniform:!t&&l===s&&o===i}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}};Nh=fd=u1([gd(1,_e.ILanguageFeaturesService),gd(2,Vs.ILanguageFeatureDebounceService),gd(3,s0),gd(4,Di.d),gd(5,As.Ot),gd(6,Ri._Y)],Nh);function f1(h){return h.replace(/[ \t]/g,"\xA0")}Di.w.registerCommand("_executeInlayHintProvider",async(h,...e)=>{const[t,i]=e;(0,hn.j)(Ot.r.isUri(t)),(0,hn.j)(wt.Q.isIRange(i));const{inlayHintsProvider:s}=h.get(_e.ILanguageFeaturesService),o=await h.get(sr.ITextModelService).createModelReference(t);try{const l=await la.create(s,o.object.textEditorModel,[wt.Q.lift(i)],Fi.XO.None),g=l.items.map(k=>k.hint);return setTimeout(()=>l.dispose(),0),g}finally{o.dispose()}});var m1=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},gl=function(h,e){return function(t,i){e(t,i,h)}};class o0 extends na{constructor(e,t,i,s){super(10,t,e.item.anchor.range,i,s,!0),this.part=e}}let gg=class extends nc{constructor(e,t,i,s,o,l,g,k,H){super(e,t,i,l,k,s,o,H),this._resolverService=g,this.hoverOrdinal=6}suggestHoverAnchor(e){if(!Nh.get(this._editor)||e.target.type!==6)return null;const i=e.target.detail.injectedText?.options;return i instanceof Ki.Ho&&i.attachedData instanceof Dm?new o0(i.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,i){return e instanceof o0?new hi.AE(async s=>{const{part:o}=e;if(await o.item.resolve(i),i.isCancellationRequested)return;let l;typeof o.item.hint.tooltip=="string"?l=new nn.Bc().appendText(o.item.hint.tooltip):o.item.hint.tooltip&&(l=o.item.hint.tooltip),l&&s.emitOne(new zo(this,e.range,[l],!1,0)),(0,Xi.EI)(o.item.hint.textEdits)&&s.emitOne(new zo(this,e.range,[new nn.Bc().appendText((0,Z.kg)("hint.dbl","Double-click to insert"))],!1,10001));let g;if(typeof o.part.tooltip=="string"?g=new nn.Bc().appendText(o.part.tooltip):o.part.tooltip&&(g=o.part.tooltip),g&&s.emitOne(new zo(this,e.range,[g],!1,1)),o.part.location||o.part.command){let H;const ie=this._editor.getOption(78)==="altKey"?Mn.zx?(0,Z.kg)("links.navigate.kb.meta.mac","cmd + click"):(0,Z.kg)("links.navigate.kb.meta","ctrl + click"):Mn.zx?(0,Z.kg)("links.navigate.kb.alt.mac","option + click"):(0,Z.kg)("links.navigate.kb.alt","alt + click");o.part.location&&o.part.command?H=new nn.Bc().appendText((0,Z.kg)("hint.defAndCommand","Go to Definition ({0}), right click for more",ie)):o.part.location?H=new nn.Bc().appendText((0,Z.kg)("hint.def","Go to Definition ({0})",ie)):o.part.command&&(H=new nn.Bc(`[${(0,Z.kg)("hint.cmd","Execute Command")}](${hm(o.part.command)} "${o.part.command.title}") (${ie})`,{isTrusted:!0})),H&&s.emitOne(new zo(this,e.range,[H],!1,1e4))}const k=await this._resolveInlayHintLabelPartHover(o,i);for await(const H of k)s.emitOne(H)}):hi.AE.EMPTY}async _resolveInlayHintLabelPartHover(e,t){if(!e.part.location)return hi.AE.EMPTY;const{uri:i,range:s}=e.part.location,o=await this._resolverService.createModelReference(i);try{const l=o.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(l)?bh(this._languageFeaturesService.hoverProvider,l,new ui.y(s.startLineNumber,s.startColumn),t).filter(g=>!(0,nn.it)(g.hover.contents)).map(g=>new zo(this,e.item.anchor.range,g.hover.contents,!1,2+g.ordinal)):hi.AE.EMPTY}finally{o.dispose()}}};gg=m1([gl(1,nr.L),gl(2,Qs.C),gl(3,ms.b),gl(4,ll.TN),gl(5,pt.pG),gl(6,sr.ITextModelService),gl(7,_e.ILanguageFeaturesService),gl(8,Di.d)],gg);class Em extends vt.jG{constructor(e,t,i,s,o,l){super();const g=t.anchor,k=t.hoverParts;this._renderedHoverParts=this._register(new xm(e,i,k,l,o));const{showAtPosition:H,showAtSecondaryPosition:ee}=Em.computeHoverPositions(e,g.range,k);this.shouldAppearBeforeContent=k.some(ie=>ie.isBeforeContent),this.showAtPosition=H,this.showAtSecondaryPosition=ee,this.initialMousePosX=g.initialMousePosX,this.initialMousePosY=g.initialMousePosY,this.shouldFocus=s.shouldFocus,this.source=s.source}get domNode(){return this._renderedHoverParts.domNode}get domNodeHasChildren(){return this._renderedHoverParts.domNodeHasChildren}get focusedHoverPartIndex(){return this._renderedHoverParts.focusedHoverPartIndex}async updateHoverVerbosityLevel(e,t,i){this._renderedHoverParts.updateHoverVerbosityLevel(e,t,i)}isColorPickerVisible(){return this._renderedHoverParts.isColorPickerVisible()}static computeHoverPositions(e,t,i){let s=1;if(e.hasModel()){const ee=e._getViewModel(),ie=ee.coordinatesConverter,fe=ie.convertModelRangeToViewRange(t),Me=ee.getLineMinColumn(fe.startLineNumber),xe=new ui.y(fe.startLineNumber,Me);s=ie.convertViewPositionToModelPosition(xe).column}const o=t.startLineNumber;let l=t.startColumn,g;for(const ee of i){const ie=ee.range,fe=ie.startLineNumber===o,Me=ie.endLineNumber===o;if(fe&&Me){const Qe=ie.startColumn,ut=Math.min(l,Qe);l=Math.max(ut,s)}ee.forceShowAtRange&&(g=ie)}let k,H;if(g){const ee=g.getStartPosition();k=ee,H=ee}else k=t.getStartPosition(),H=new ui.y(o,l);return{showAtPosition:k,showAtSecondaryPosition:H}}}class p1{constructor(e,t){this._statusBar=t,e.appendChild(this._statusBar.hoverElement)}get hoverElement(){return this._statusBar.hoverElement}get actions(){return this._statusBar.actions}dispose(){this._statusBar.dispose()}}class xm extends vt.jG{static{this._DECORATION_OPTIONS=Ki.kI.register({description:"content-hover-highlight",className:"hoverHighlight"})}constructor(e,t,i,s,o){super(),this._renderedParts=[],this._focusedHoverPartIndex=-1,this._context=o,this._fragment=document.createDocumentFragment(),this._register(this._renderParts(t,i,o,s)),this._register(this._registerListenersOnRenderedParts()),this._register(this._createEditorDecorations(e,i)),this._updateMarkdownAndColorParticipantInfo(t)}_createEditorDecorations(e,t){if(t.length===0)return vt.jG.None;let i=t[0].range;for(const o of t){const l=o.range;i=wt.Q.plusRange(i,l)}const s=e.createDecorationsCollection();return s.set([{range:i,options:xm._DECORATION_OPTIONS}]),(0,vt.s)(()=>{s.clear()})}_renderParts(e,t,i,s){const o=new td(s),l={fragment:this._fragment,statusBar:o,...i},g=new vt.Cm;for(const H of e){const ee=this._renderHoverPartsForParticipant(t,H,l);g.add(ee);for(const ie of ee.renderedHoverParts)this._renderedParts.push({type:"hoverPart",participant:H,hoverPart:ie.hoverPart,hoverElement:ie.hoverElement})}const k=this._renderStatusBar(this._fragment,o);return k&&(g.add(k),this._renderedParts.push({type:"statusBar",hoverElement:k.hoverElement,actions:k.actions})),(0,vt.s)(()=>{g.dispose()})}_renderHoverPartsForParticipant(e,t,i){const s=e.filter(l=>l.owner===t);return s.length>0?t.renderHoverParts(i,s):new Vo([])}_renderStatusBar(e,t){if(t.hasContent)return new p1(e,t)}_registerListenersOnRenderedParts(){const e=new vt.Cm;return this._renderedParts.forEach((t,i)=>{const s=t.hoverElement;s.tabIndex=0,e.add(Se.ko(s,Se.Bx.FOCUS_IN,o=>{o.stopPropagation(),this._focusedHoverPartIndex=i})),e.add(Se.ko(s,Se.Bx.FOCUS_OUT,o=>{o.stopPropagation(),this._focusedHoverPartIndex=-1}))}),e}_updateMarkdownAndColorParticipantInfo(e){const t=e.find(i=>i instanceof nc&&!(i instanceof gg));t&&(this._markdownHoverParticipant=t),this._colorHoverParticipant=e.find(i=>i instanceof sa)}async updateHoverVerbosityLevel(e,t,i){if(!this._markdownHoverParticipant)return;const s=this._normalizedIndexToMarkdownHoverIndexRange(this._markdownHoverParticipant,t);if(s===void 0)return;const o=await this._markdownHoverParticipant.updateMarkdownHoverVerbosityLevel(e,s,i);o&&(this._renderedParts[t]={type:"hoverPart",participant:this._markdownHoverParticipant,hoverPart:o.hoverPart,hoverElement:o.hoverElement},this._context.onContentsChanged())}isColorPickerVisible(){return this._colorHoverParticipant?.isColorPickerVisible()??!1}_normalizedIndexToMarkdownHoverIndexRange(e,t){const i=this._renderedParts[t];if(!i||i.type!=="hoverPart"||!(i.participant===e))return;const o=this._renderedParts.findIndex(l=>l.type==="hoverPart"&&l.participant===e);if(o===-1)throw new Ni.D7;return t-o}get domNode(){return this._fragment}get domNodeHasChildren(){return this._fragment.hasChildNodes()}get focusedHoverPartIndex(){return this._focusedHoverPartIndex}}var _1=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},r0=function(h,e){return function(t,i){e(t,i,h)}};let km=class extends vt.jG{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._currentResult=null,this._onContentsChanged=this._register(new zi.vl),this.onContentsChanged=this._onContentsChanged.event,this._contentHoverWidget=this._register(this._instantiationService.createInstance(Ch,this._editor)),this._participants=this._initializeHoverParticipants(),this._computer=new ed(this._editor,this._participants),this._hoverOperation=this._register(new Jc(this._editor,this._computer)),this._registerListeners()}_initializeHoverParticipants(){const e=[];for(const t of Uo.getAll()){const i=this._instantiationService.createInstance(t,this._editor);e.push(i)}return e.sort((t,i)=>t.hoverOrdinal-i.hoverOrdinal),this._register(this._contentHoverWidget.onDidResize(()=>{this._participants.forEach(t=>t.handleResize?.())})),e}_registerListeners(){this._register(this._hoverOperation.onResult(t=>{if(!this._computer.anchor)return;const i=t.hasLoadingMessage?this._addLoadingMessage(t.value):t.value;this._withResult(new Yu(this._computer.anchor,i,t.isComplete))}));const e=this._contentHoverWidget.getDomNode();this._register(Se.b2(e,"keydown",t=>{t.equals(9)&&this.hide()})),this._register(Se.b2(e,"mouseleave",t=>{this._onMouseLeave(t)})),this._register(Et.dG.onDidChange(()=>{this._contentHoverWidget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)}))}_startShowingOrUpdateHover(e,t,i,s,o){if(!(this._contentHoverWidget.position&&this._currentResult))return e?(this._startHoverOperationIfNecessary(e,t,i,s,!1),!0):!1;const g=this._editor.getOption(60).sticky,k=o&&this._contentHoverWidget.isMouseGettingCloser(o.event.posx,o.event.posy);return g&&k?(e&&this._startHoverOperationIfNecessary(e,t,i,s,!0),!0):e?this._currentResult.anchor.equals(e)?!0:e.canAdoptVisibleHover(this._currentResult.anchor,this._contentHoverWidget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,i,s,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,i,s,!1),!0):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,i,s,o){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=s,this._computer.source=i,this._computer.insistOnKeepingHoverVisible=o,this._hoverOperation.start(t))}_setCurrentResult(e){let t=e;if(this._currentResult===t)return;t&&t.hoverParts.length===0&&(t=null),this._currentResult=t,this._currentResult?this._showHover(this._currentResult):this._hideHover()}_addLoadingMessage(e){if(!this._computer.anchor)return e;for(const t of this._participants){if(!t.createLoadingMessage)continue;const i=t.createLoadingMessage(this._computer.anchor);if(i)return e.slice(0).concat([i])}return e}_withResult(e){if(this._contentHoverWidget.position&&this._currentResult&&this._currentResult.isComplete||this._setCurrentResult(e),!e.isComplete)return;const s=e.hoverParts.length===0,o=this._computer.insistOnKeepingHoverVisible;s&&o||this._setCurrentResult(e)}_showHover(e){const t=this._getHoverContext();this._renderedContentHover=new Em(this._editor,e,this._participants,this._computer,t,this._keybindingService),this._renderedContentHover.domNodeHasChildren?this._contentHoverWidget.show(this._renderedContentHover):this._renderedContentHover.dispose()}_hideHover(){this._contentHoverWidget.hide()}_getHoverContext(){return{hide:()=>{this.hide()},onContentsChanged:()=>{this._onContentsChanged.fire(),this._contentHoverWidget.onContentsChanged()},setMinimumDimensions:s=>{this._contentHoverWidget.setMinimumDimensions(s)}}}showsOrWillShow(e){if(this._contentHoverWidget.isResizing)return!0;const i=this._findHoverAnchorCandidates(e);if(!(i.length>0))return this._startShowingOrUpdateHover(null,0,0,!1,e);const o=i[0];return this._startShowingOrUpdateHover(o,0,0,!1,e)}_findHoverAnchorCandidates(e){const t=[];for(const s of this._participants){if(!s.suggestHoverAnchor)continue;const o=s.suggestHoverAnchor(e);o&&t.push(o)}const i=e.target;switch(i.type){case 6:{t.push(new Kc(0,i.range,e.event.posx,e.event.posy));break}case 7:{const s=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;if(!(!i.detail.isAfterLines&&typeof i.detail.horizontalDistanceToText=="number"&&i.detail.horizontalDistanceToText<s))break;t.push(new Kc(0,i.range,e.event.posx,e.event.posy));break}}return t.sort((s,o)=>o.priority-s.priority),t}_onMouseLeave(e){const t=this._editor.getDomNode();(!t||!Xc(t,e.x,e.y))&&this.hide()}startShowingAtRange(e,t,i,s){this._startShowingOrUpdateHover(new Kc(0,e,void 0,void 0),t,i,s,null)}async updateHoverVerbosityLevel(e,t,i){this._renderedContentHover?.updateHoverVerbosityLevel(e,t,i)}focusedHoverPartIndex(){return this._renderedContentHover?.focusedHoverPartIndex??-1}containsNode(e){return e?this._contentHoverWidget.getDomNode().contains(e):!1}focus(){this._contentHoverWidget.focus()}scrollUp(){this._contentHoverWidget.scrollUp()}scrollDown(){this._contentHoverWidget.scrollDown()}scrollLeft(){this._contentHoverWidget.scrollLeft()}scrollRight(){this._contentHoverWidget.scrollRight()}pageUp(){this._contentHoverWidget.pageUp()}pageDown(){this._contentHoverWidget.pageDown()}goToTop(){this._contentHoverWidget.goToTop()}goToBottom(){this._contentHoverWidget.goToBottom()}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}getDomNode(){return this._contentHoverWidget.getDomNode()}get isColorPickerVisible(){return this._renderedContentHover?.isColorPickerVisible()??!1}get isVisibleFromKeyboard(){return this._contentHoverWidget.isVisibleFromKeyboard}get isVisible(){return this._contentHoverWidget.isVisible}get isFocused(){return this._contentHoverWidget.isFocused}get isResizing(){return this._contentHoverWidget.isResizing}get widget(){return this._contentHoverWidget}};km=_1([r0(1,Ri._Y),r0(2,ms.b)],km);var v1=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},a0=function(h,e){return function(t,i){e(t,i,h)}},Im;const fg=!1;let fo=class extends vt.jG{static{Im=this}static{this.ID="editor.contrib.contentHover"}constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._onHoverContentsChanged=this._register(new zi.vl),this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new vt.Cm,this._hoverState={mouseDown:!1,activatedByDecoratorClick:!1},this._reactToEditorMouseMoveRunner=this._register(new hi.uC(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}static get(e){return e.getContribution(Im.ID)}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.hidingDelay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))):(this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))),this._listenersStore.add(this._editor.onMouseLeave(t=>this._onEditorMouseLeave(t))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(t=>this._onEditorScrollChanged(t)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0,!this._shouldNotHideCurrentHoverWidget(e)&&this._hideWidgets()}_shouldNotHideCurrentHoverWidget(e){return this._isMouseOnContentHoverWidget(e)||this._isContentWidgetResizing()}_isMouseOnContentHoverWidget(e){const t=this._contentWidget?.getDomNode();return t?Xc(t,e.event.posx,e.event.posy):!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._shouldNotHideCurrentHoverWidget(e))||fg||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){const t=this._hoverSettings.sticky,i=(l,g)=>{const k=this._isMouseOnContentHoverWidget(l);return g&&k},s=l=>{const g=this._isMouseOnContentHoverWidget(l),k=this._contentWidget?.isColorPickerVisible??!1;return g&&k},o=(l,g)=>(g&&this._contentWidget?.containsNode(l.event.browserEvent.view?.document.activeElement)&&!l.event.browserEvent.view?.getSelection()?.isCollapsed)??!1;return i(e,t)||s(e)||o(e,t)}_onEditorMouseMove(e){if(this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._mouseMoveEvent=e,this._contentWidget?.isFocused||this._contentWidget?.isResizing))return;const t=this._hoverSettings.sticky;if(t&&this._contentWidget?.isVisibleFromKeyboard)return;if(this._shouldNotRecomputeCurrentHoverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}const s=this._hoverSettings.hidingDelay;if(this._contentWidget?.isVisible&&t&&s>0){this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(s);return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){if(!e)return;const i=e.target.element?.classList.contains("colorpicker-color-decoration"),s=this._editor.getOption(149),o=this._hoverSettings.enabled,l=this._hoverState.activatedByDecoratorClick;if(i&&(s==="click"&&!l||s==="hover"&&!o&&!fg||s==="clickAndHover"&&!o&&!l)||!i&&!o&&!l){this._hideWidgets();return}this._tryShowHoverWidget(e)||fg||this._hideWidgets()}_tryShowHoverWidget(e){return this._getOrCreateContentWidget().showsOrWillShow(e)}_onKeyDown(e){if(!this._editor.hasModel())return;const t=this._keybindingService.softDispatch(e,this._editor.getDomNode()),i=t.kind===1||t.kind===2&&(t.commandId===Hu||t.commandId===Gc||t.commandId===al)&&this._contentWidget?.isVisible;e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||i||this._hideWidgets()}_hideWidgets(){fg||this._hoverState.mouseDown&&this._contentWidget?.isColorPickerVisible||Ra.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,this._contentWidget?.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(km,this._editor),this._listenersStore.add(this._contentWidget.onContentsChanged(()=>this._onHoverContentsChanged.fire()))),this._contentWidget}showContentHover(e,t,i,s,o=!1){this._hoverState.activatedByDecoratorClick=o,this._getOrCreateContentWidget().startShowingAtRange(e,t,i,s)}_isContentWidgetResizing(){return this._contentWidget?.widget.isResizing||!1}focusedHoverPartIndex(){return this._getOrCreateContentWidget().focusedHoverPartIndex()}updateHoverVerbosityLevel(e,t,i){this._getOrCreateContentWidget().updateHoverVerbosityLevel(e,t,i)}focus(){this._contentWidget?.focus()}scrollUp(){this._contentWidget?.scrollUp()}scrollDown(){this._contentWidget?.scrollDown()}scrollLeft(){this._contentWidget?.scrollLeft()}scrollRight(){this._contentWidget?.scrollRight()}pageUp(){this._contentWidget?.pageUp()}pageDown(){this._contentWidget?.pageDown()}goToTop(){this._contentWidget?.goToTop()}goToBottom(){this._contentWidget?.goToBottom()}get isColorPickerVisible(){return this._contentWidget?.isColorPickerVisible}get isHoverVisible(){return this._contentWidget?.isVisible}dispose(){super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),this._contentWidget?.dispose()}};fo=Im=v1([a0(1,Ri._Y),a0(2,ms.b)],fo);class l0 extends vt.jG{static{this.ID="editor.contrib.colorContribution"}constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){const t=this._editor.getOption(149);if(t!=="click"&&t!=="clickAndHover")return;const i=e.target;if(i.type!==6||!i.detail.injectedText||i.detail.injectedText.options.attachedData!==Na||!i.range)return;const s=this._editor.getContribution(fo.ID);if(s&&!s.isColorPickerVisible){const o=new wt.Q(i.range.startLineNumber,i.range.startColumn+1,i.range.endLineNumber,i.range.endColumn+1);s.showContentHover(o,1,0,!1,!0)}}}(0,we.HW)(l0.ID,l0,2),Uo.register(sa);var c0=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},md=function(h,e){return function(t,i){e(t,i,h)}},Mm,Nm;let ac=class extends vt.jG{static{Mm=this}static{this.ID="editor.contrib.standaloneColorPickerController"}constructor(e,t,i){super(),this._editor=e,this._instantiationService=i,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=ke.R.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=ke.R.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||this._standaloneColorPickerWidget?.focus():this._standaloneColorPickerWidget=this._instantiationService.createInstance(Tm,this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused))}hide(){this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerWidget?.hide(),this._editor.focus()}insertColor(){this._standaloneColorPickerWidget?.updateEditor(),this.hide()}static get(e){return e.getContribution(Mm.ID)}};ac=Mm=c0([md(1,et.fN),md(2,Ri._Y)],ac),(0,we.HW)(ac.ID,ac,1);const d0=8,C1=22;let Tm=class extends vt.jG{static{Nm=this}static{this.ID="editor.contrib.standaloneColorPickerWidget"}constructor(e,t,i,s,o,l,g){super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=i,this._keybindingService=o,this._languageFeaturesService=l,this._editorWorkerService=g,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new zi.vl),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=s.createInstance(ql,this._editor),this._position=this._editor._getViewModel()?.getPrimaryCursorState().modelState.position;const k=this._editor.getSelection(),H=k?{startLineNumber:k.startLineNumber,startColumn:k.startColumn,endLineNumber:k.endLineNumber,endColumn:k.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},ee=this._register(Se.w5(this._body));this._register(ee.onDidBlur(ie=>{this.hide()})),this._register(ee.onDidFocus(ie=>{this.focus()})),this._register(this._editor.onDidChangeCursorPosition(()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()})),this._register(this._editor.onMouseMove(ie=>{const fe=ie.target.element?.classList;fe&&fe.contains("colorpicker-color-decoration")&&this.hide()})),this._register(this.onResult(ie=>{this._render(ie.value,ie.foundInEditor)})),this._start(H),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return Nm.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}async _start(e){const t=await this._computeAsync(e);t&&this._onResult.fire(new b1(t.result,t.foundInEditor))}async _computeAsync(e){if(!this._editor.hasModel())return null;const t={range:e,color:{red:0,green:0,blue:0,alpha:1}},i=await this._standaloneColorPickerParticipant.createColorHover(t,new Yl(this._editorWorkerService),this._languageFeaturesService.colorProvider);return i?{result:i.colorHover,foundInEditor:i.foundInEditor}:null}_render(e,t){const i=document.createDocumentFragment(),s=this._register(new td(this._keybindingService)),o={fragment:i,statusBar:s,onContentsChanged:()=>{},hide:()=>this.hide()};this._colorHover=e;const l=this._standaloneColorPickerParticipant.renderHoverParts(o,[e]);if(!l)return;this._register(l.disposables);const g=l.colorPicker;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(this._editor.getLayoutInfo().width*.66,500)+"px",this._body.tabIndex=0,this._body.appendChild(i),g.layout();const k=g.body,H=k.saturationBox.domNode.clientWidth,ee=k.domNode.clientWidth-H-C1-d0,ie=g.body.enterButton;ie?.onClicked(()=>{this.updateEditor(),this.hide()});const fe=g.header,Me=fe.pickedColorNode;Me.style.width=H+d0+"px";const xe=fe.originalColorNode;xe.style.width=ee+"px",g.header.closeButton?.onClicked(()=>{this.hide()}),t&&(ie&&(ie.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}};Tm=Nm=c0([md(3,Ri._Y),md(4,ms.b),md(5,_e.ILanguageFeaturesService),md(6,ir.IEditorWorkerService)],Tm);class b1{constructor(e,t){this.value=e,this.foundInEditor=t}}class S1 extends we.qO{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{...(0,Z.aS)("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:(0,Z.kg)({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker")},precondition:void 0,menu:[{id:Fe.D8.CommandPalette}],metadata:{description:(0,Z.aS)("showOrFocusStandaloneColorPickerDescription","Show or focus a standalone color picker which uses the default color provider. It displays hex/rgb/hsl colors.")}})}runEditorCommand(e,t){ac.get(t)?.showOrFocus()}}class w1 extends we.ks{constructor(){super({id:"editor.action.hideColorPicker",label:(0,Z.kg)({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:ke.R.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100},metadata:{description:(0,Z.aS)("hideColorPickerDescription","Hide the standalone color picker.")}})}run(e,t){ac.get(t)?.hide()}}class y1 extends we.ks{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:(0,Z.kg)({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:ke.R.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100},metadata:{description:(0,Z.aS)("insertColorWithStandaloneColorPickerDescription","Insert hex/rgb/hsl colors with the focused standalone color picker.")}})}run(e,t){ac.get(t)?.insertColor()}}(0,we.Fl)(w1),(0,we.Fl)(y1),(0,Fe.ug)(S1);class fl{constructor(e,t,i){this.languageConfigurationService=i,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,i){if(i<0)return!1;const s=t.length,o=e.length;if(i+s>o)return!1;for(let l=0;l<s;l++){const g=e.charCodeAt(i+l),k=t.charCodeAt(l);if(g!==k&&!(g>=65&&g<=90&&g+32===k)&&!(k>=65&&k<=90&&k+32===g))return!1}return!0}_createOperationsForBlockComment(e,t,i,s,o,l){const g=e.startLineNumber,k=e.startColumn,H=e.endLineNumber,ee=e.endColumn,ie=o.getLineContent(g),fe=o.getLineContent(H);let Me=ie.lastIndexOf(t,k-1+t.length),xe=fe.indexOf(i,ee-1-i.length);if(Me!==-1&&xe!==-1)if(g===H)ie.substring(Me+t.length,xe).indexOf(i)>=0&&(Me=-1,xe=-1);else{const ut=ie.substring(Me+t.length),Lt=fe.substring(0,xe);(ut.indexOf(i)>=0||Lt.indexOf(i)>=0)&&(Me=-1,xe=-1)}let Qe;Me!==-1&&xe!==-1?(s&&Me+t.length<ie.length&&ie.charCodeAt(Me+t.length)===32&&(t=t+" "),s&&xe>0&&fe.charCodeAt(xe-1)===32&&(i=" "+i,xe-=1),Qe=fl._createRemoveBlockCommentOperations(new wt.Q(g,Me+t.length+1,H,xe+1),t,i)):(Qe=fl._createAddBlockCommentOperations(e,t,i,this._insertSpace),this._usedEndToken=Qe.length===1?i:null);for(const ut of Qe)l.addTrackedEditOperation(ut.range,ut.text)}static _createRemoveBlockCommentOperations(e,t,i){const s=[];return wt.Q.isEmpty(e)?s.push(ps.k.delete(new wt.Q(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(s.push(ps.k.delete(new wt.Q(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),s.push(ps.k.delete(new wt.Q(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),s}static _createAddBlockCommentOperations(e,t,i,s){const o=[];return wt.Q.isEmpty(e)?o.push(ps.k.replace(new wt.Q(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+i)):(o.push(ps.k.insert(new ui.y(e.startLineNumber,e.startColumn),t+(s?" ":""))),o.push(ps.k.insert(new ui.y(e.endLineNumber,e.endColumn),(s?" ":"")+i))),o}getEditOperations(e,t){const i=this._selection.startLineNumber,s=this._selection.startColumn;e.tokenization.tokenizeIfCheap(i);const o=e.getLanguageIdAtPosition(i,s),l=this.languageConfigurationService.getLanguageConfiguration(o).comments;!l||!l.blockCommentStartToken||!l.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,l.blockCommentStartToken,l.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length===2){const s=i[0],o=i[1];return new Mi.L(s.range.endLineNumber,s.range.endColumn,o.range.startLineNumber,o.range.startColumn)}else{const s=i[0].range,o=this._usedEndToken?-this._usedEndToken.length-1:0;return new Mi.L(s.endLineNumber,s.endColumn+o,s.endLineNumber,s.endColumn+o)}}}class Fa{constructor(e,t,i,s,o,l,g){this.languageConfigurationService=e,this._selection=t,this._indentSize=i,this._type=s,this._insertSpace=o,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=l,this._ignoreFirstLine=g||!1}static _gatherPreflightCommentStrings(e,t,i,s){e.tokenization.tokenizeIfCheap(t);const o=e.getLanguageIdAtPosition(t,1),l=s.getLanguageConfiguration(o).comments,g=l?l.lineCommentToken:null;if(!g)return null;const k=[];for(let H=0,ee=i-t+1;H<ee;H++)k[H]={ignore:!1,commentStr:g,commentStrOffset:0,commentStrLength:g.length};return k}static _analyzeLines(e,t,i,s,o,l,g,k){let H=!0,ee;e===0?ee=!0:e===1?ee=!1:ee=!0;for(let ie=0,fe=s.length;ie<fe;ie++){const Me=s[ie],xe=o+ie;if(xe===o&&g){Me.ignore=!0;continue}const Qe=i.getLineContent(xe),ut=Vi.HG(Qe);if(ut===-1){Me.ignore=l,Me.commentStrOffset=Qe.length;continue}if(H=!1,Me.ignore=!1,Me.commentStrOffset=ut,ee&&!fl._haystackHasNeedleAtOffset(Qe,Me.commentStr,ut)&&(e===0?ee=!1:e===1||(Me.ignore=!0)),ee&&t){const Lt=ut+Me.commentStrLength;Lt<Qe.length&&Qe.charCodeAt(Lt)===32&&(Me.commentStrLength+=1)}}if(e===0&&H){ee=!1;for(let ie=0,fe=s.length;ie<fe;ie++)s[ie].ignore=!1}return{supported:!0,shouldRemoveComments:ee,lines:s}}static _gatherPreflightData(e,t,i,s,o,l,g,k){const H=Fa._gatherPreflightCommentStrings(i,s,o,k);return H===null?{supported:!1}:Fa._analyzeLines(e,t,i,H,s,l,g,k)}_executeLineComments(e,t,i,s){let o;i.shouldRemoveComments?o=Fa._createRemoveLineCommentsOperations(i.lines,s.startLineNumber):(Fa._normalizeInsertionPoint(e,i.lines,s.startLineNumber,this._indentSize),o=this._createAddLineCommentsOperations(i.lines,s.startLineNumber));const l=new ui.y(s.positionLineNumber,s.positionColumn);for(let g=0,k=o.length;g<k;g++)t.addEditOperation(o[g].range,o[g].text),wt.Q.isEmpty(o[g].range)&&wt.Q.getStartPosition(o[g].range).equals(l)&&e.getLineContent(l.lineNumber).length+1===l.column&&(this._deltaColumn=(o[g].text||"").length);this._selectionId=t.trackSelection(s)}_attemptRemoveBlockComment(e,t,i,s){let o=t.startLineNumber,l=t.endLineNumber;const g=s.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let k=e.getLineContent(o).lastIndexOf(i,g-1),H=e.getLineContent(l).indexOf(s,t.endColumn-1-i.length);return k!==-1&&H===-1&&(H=e.getLineContent(o).indexOf(s,k+i.length),l=o),k===-1&&H!==-1&&(k=e.getLineContent(l).lastIndexOf(i,H),o=l),t.isEmpty()&&(k===-1||H===-1)&&(k=e.getLineContent(o).indexOf(i),k!==-1&&(H=e.getLineContent(o).indexOf(s,k+i.length))),k!==-1&&e.getLineContent(o).charCodeAt(k+i.length)===32&&(i+=" "),H!==-1&&e.getLineContent(l).charCodeAt(H-1)===32&&(s=" "+s,H-=1),k!==-1&&H!==-1?fl._createRemoveBlockCommentOperations(new wt.Q(o,k+i.length+1,l,H+1),i,s):null}_executeBlockComment(e,t,i){e.tokenization.tokenizeIfCheap(i.startLineNumber);const s=e.getLanguageIdAtPosition(i.startLineNumber,1),o=this.languageConfigurationService.getLanguageConfiguration(s).comments;if(!o||!o.blockCommentStartToken||!o.blockCommentEndToken)return;const l=o.blockCommentStartToken,g=o.blockCommentEndToken;let k=this._attemptRemoveBlockComment(e,i,l,g);if(!k){if(i.isEmpty()){const H=e.getLineContent(i.startLineNumber);let ee=Vi.HG(H);ee===-1&&(ee=H.length),k=fl._createAddBlockCommentOperations(new wt.Q(i.startLineNumber,ee+1,i.startLineNumber,H.length+1),l,g,this._insertSpace)}else k=fl._createAddBlockCommentOperations(new wt.Q(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),l,g,this._insertSpace);k.length===1&&(this._deltaColumn=l.length+1)}this._selectionId=t.trackSelection(i);for(const H of k)t.addEditOperation(H.range,H.text)}getEditOperations(e,t){let i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new wt.Q(i.startLineNumber,e.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(i);return}i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const s=Fa._gatherPreflightData(this._type,this._insertSpace,e,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return s.supported?this._executeLineComments(e,t,s,i):this._executeBlockComment(e,t,i)}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new Mi.L(i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const i=[];for(let s=0,o=e.length;s<o;s++){const l=e[s];l.ignore||i.push(ps.k.delete(new wt.Q(t+s,l.commentStrOffset+1,t+s,l.commentStrOffset+l.commentStrLength+1)))}return i}_createAddLineCommentsOperations(e,t){const i=[],s=this._insertSpace?" ":"";for(let o=0,l=e.length;o<l;o++){const g=e[o];g.ignore||i.push(ps.k.insert(new ui.y(t+o,g.commentStrOffset+1),g.commentStr+s))}return i}static nextVisibleColumn(e,t,i,s){return i?e+(t-e%t):e+s}static _normalizeInsertionPoint(e,t,i,s){let o=1073741824,l,g;for(let k=0,H=t.length;k<H;k++){if(t[k].ignore)continue;const ee=e.getLineContent(i+k);let ie=0;for(let fe=0,Me=t[k].commentStrOffset;ie<o&&fe<Me;fe++)ie=Fa.nextVisibleColumn(ie,s,ee.charCodeAt(fe)===9,1);ie<o&&(o=ie)}o=Math.floor(o/s)*s;for(let k=0,H=t.length;k<H;k++){if(t[k].ignore)continue;const ee=e.getLineContent(i+k);let ie=0;for(l=0,g=t[k].commentStrOffset;ie<o&&l<g;l++)ie=Fa.nextVisibleColumn(ie,s,ee.charCodeAt(l)===9,1);ie>o?t[k].commentStrOffset=l-1:t[k].commentStrOffset=l}}}class Rm extends we.ks{constructor(e,t){super(t),this._type=e}run(e,t){const i=e.get(Us.JZ);if(!t.hasModel())return;const s=t.getModel(),o=[],l=s.getOptions(),g=t.getOption(23),k=t.getSelections().map((ee,ie)=>({selection:ee,index:ie,ignoreFirstLine:!1}));k.sort((ee,ie)=>wt.Q.compareRangesUsingStarts(ee.selection,ie.selection));let H=k[0];for(let ee=1;ee<k.length;ee++){const ie=k[ee];H.selection.endLineNumber===ie.selection.startLineNumber&&(H.index<ie.index?ie.ignoreFirstLine=!0:(H.ignoreFirstLine=!0,H=ie))}for(const ee of k)o.push(new Fa(i,ee.selection,l.indentSize,this._type,g.insertSpace,g.ignoreEmptyLines,ee.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class L1 extends Rm{constructor(){super(0,{id:"editor.action.commentLine",label:Z.kg("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:Fe.D8.MenubarEditMenu,group:"5_insert",title:Z.kg({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class D1 extends Rm{constructor(){super(1,{id:"editor.action.addCommentLine",label:Z.kg("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2081),weight:100}})}}class E1 extends Rm{constructor(){super(2,{id:"editor.action.removeCommentLine",label:Z.kg("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2099),weight:100}})}}class x1 extends we.ks{constructor(){super({id:"editor.action.blockComment",label:Z.kg("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:Fe.D8.MenubarEditMenu,group:"5_insert",title:Z.kg({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const i=e.get(Us.JZ);if(!t.hasModel())return;const s=t.getOption(23),o=[],l=t.getSelections();for(const g of l)o.push(new fl(g,s.insertSpace,i));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}(0,we.Fl)(L1),(0,we.Fl)(D1),(0,we.Fl)(E1),(0,we.Fl)(x1);var k1=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},lc=function(h,e){return function(t,i){e(t,i,h)}},Pm;let pd=class{static{Pm=this}static{this.ID="editor.contrib.contextmenu"}static get(e){return e.getContribution(Pm.ID)}constructor(e,t,i,s,o,l,g,k){this._contextMenuService=t,this._contextViewService=i,this._contextKeyService=s,this._keybindingService=o,this._menuService=l,this._configurationService=g,this._workspaceContextService=k,this._toDispose=new vt.Cm,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(H=>this._onContextMenu(H))),this._toDispose.add(this._editor.onMouseWheel(H=>{if(this._contextMenuIsBeingShownCount>0){const ee=this._contextViewService.getContextViewElement(),ie=H.srcElement;ie.shadowRoot&&Se.jG(ee)===ie.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(H=>{this._editor.getOption(24)&&H.keyCode===58&&(H.preventDefault(),H.stopPropagation(),this.showContextMenu())}))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu(e.event);if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let i=!1;for(const s of this._editor.getSelections())if(s.containsPosition(e.target.position)){i=!0;break}i||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24)||!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.contextMenuId);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const i=[],s=this._menuService.getMenuActions(t,this._contextKeyService,{arg:e.uri});for(const o of s){const[,l]=o;let g=0;for(const k of l)if(k instanceof Fe.nI){const H=this._getMenuActions(e,k.item.submenu);H.length>0&&(i.push(new Js.YH(k.id,k.label,H)),g++)}else i.push(k),g++;g&&i.push(new Js.wv)}return i.length&&i.pop(),i}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const i=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let s=t;if(!s){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const l=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),g=Se.BK(this._editor.getDomNode()),k=g.left+l.left,H=g.top+l.top+l.height;s={x:k,y:H}}const o=this._editor.getOption(128)&&!Mn.un;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:o?this._editor.getOverflowWidgetsDomNode()??this._editor.getDomNode():void 0,getAnchor:()=>s,getActions:()=>e,getActionViewItem:l=>{const g=this._keybindingFor(l);if(g)return new Yc.Z4(l,l,{label:!0,keybinding:g.getLabel(),isMenu:!0});const k=l;return typeof k.getActionViewItem=="function"?k.getActionViewItem():new Yc.Z4(l,l,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:l=>this._keybindingFor(l),onHide:l=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:i})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel()||(0,Ie.ct)(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(73);let i=0;const s=H=>({id:`menu-action-${++i}`,label:H.label,tooltip:"",class:void 0,enabled:typeof H.enabled>"u"?!0:H.enabled,checked:H.checked,run:H.run}),o=(H,ee)=>new Js.YH(`menu-action-${++i}`,H,ee,void 0),l=(H,ee,ie,fe,Me)=>{if(!ee)return s({label:H,enabled:ee,run:()=>{}});const xe=ut=>()=>{this._configurationService.updateValue(ie,ut)},Qe=[];for(const ut of Me)Qe.push(s({label:ut.label,checked:fe===ut.value,run:xe(ut.value)}));return o(H,Qe)},g=[];g.push(s({label:Z.kg("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),g.push(new Js.wv),g.push(s({label:Z.kg("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),g.push(l(Z.kg("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:Z.kg("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:Z.kg("context.minimap.size.fill","Fill"),value:"fill"},{label:Z.kg("context.minimap.size.fit","Fit"),value:"fit"}])),g.push(l(Z.kg("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:Z.kg("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:Z.kg("context.minimap.slider.always","Always"),value:"always"}]));const k=this._editor.getOption(128)&&!Mn.un;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:k?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>g,onHide:H=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};pd=Pm=k1([lc(1,vn.Z),lc(2,vn.l),lc(3,et.fN),lc(4,ms.b),lc(5,Fe.ez),lc(6,pt.pG),lc(7,Ie.VR)],pd);class I1 extends we.ks{constructor(){super({id:"editor.action.showContextMenu",label:Z.kg("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:ke.R.textInputFocus,primary:1092,weight:100}})}run(e,t){pd.get(t)?.showContextMenu()}}(0,we.HW)(pd.ID,pd,2),(0,we.Fl)(I1);class Am{constructor(e){this.selections=e}equals(e){const t=this.selections.length,i=e.selections.length;if(t!==i)return!1;for(let s=0;s<t;s++)if(!this.selections[s].equalsSelection(e.selections[s]))return!1;return!0}}class Om{constructor(e,t,i){this.cursorState=e,this.scrollTop=t,this.scrollLeft=i}}class _d extends vt.jG{static{this.ID="editor.contrib.cursorUndoRedoController"}static get(e){return e.getContribution(_d.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const i=new Am(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(i)||(this._undoStack.push(new Om(i,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new Om(new Am(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new Om(new Am(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}class M1 extends we.ks{constructor(){super({id:"cursorUndo",label:Z.kg("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:ke.R.textInputFocus,primary:2099,weight:100}})}run(e,t,i){_d.get(t)?.cursorUndo()}}class N1 extends we.ks{constructor(){super({id:"cursorRedo",label:Z.kg("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,i){_d.get(t)?.cursorRedo()}}(0,we.HW)(_d.ID,_d,0),(0,we.Fl)(M1),(0,we.Fl)(N1);class T1{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){const i=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new wt.Q(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new Mi.L(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new Mi.L(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new Mi.L(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new Mi.L(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new Mi.L(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function vd(h){return Mn.zx?h.altKey:h.ctrlKey}class Cd extends vt.jG{static{this.ID="editor.contrib.dragAndDrop"}static{this.TRIGGER_KEY_VALUE=Mn.zx?6:5}constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(35)||this._editor.getOption(22)||(vd(e)&&(this._modifierPressed=!0),this._mouseDown&&vd(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(35)||this._editor.getOption(22)||(vd(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===Cd.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(this._dragSelection===null){const s=(this._editor.getSelections()||[]).filter(o=>t.position&&o.containsPosition(t.position));if(s.length===1)this._dragSelection=s[0];else return}vd(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new ui.y(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let i=null;if(e.event.shiftKey){const s=this._editor.getSelection();if(s){const{selectionStartLineNumber:o,selectionStartColumn:l}=s;i=[new Mi.L(o,l,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map(s=>s.containsPosition(t)?new Mi.L(t.lineNumber,t.column,t.lineNumber,t.column):s);this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(vd(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(Cd.ID,new T1(this._dragSelection,t,vd(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}static{this._DECORATION_OPTIONS=Ki.kI.register({description:"dnd-target",className:"dnd-target"})}showAt(e){this._dndDecorationIds.set([{range:new wt.Q(e.lineNumber,e.column,e.lineNumber,e.column),options:Cd._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}(0,we.HW)(Cd.ID,Cd,2),(0,we.HW)(Zo.ID,Zo,0),(0,Jr.x)(ct),(0,we.E_)(new class extends we.DX{constructor(){super({id:Jn,precondition:Rl,kbOpts:{weight:100,primary:2137}})}runEditorCommand(h,e){return Zo.get(e)?.changePasteType()}}),(0,we.E_)(new class extends we.DX{constructor(){super({id:"editor.hidePasteWidget",precondition:Rl,kbOpts:{weight:100,primary:9}})}runEditorCommand(h,e){Zo.get(e)?.clearWidgets()}}),(0,we.Fl)(class c1 extends we.ks{static{this.argsSchema={type:"object",properties:{kind:{type:"string",description:Z.kg("pasteAs.kind","The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.")}}}}constructor(){super({id:"editor.action.pasteAs",label:Z.kg("pasteAs","Paste As..."),alias:"Paste As...",precondition:ke.R.writable,metadata:{description:"Paste as",args:[{name:"args",schema:c1.argsSchema}]}})}run(e,t,i){let s=typeof i?.kind=="string"?i.kind:void 0;return!s&&i&&(s=typeof i.id=="string"?i.id:void 0),Zo.get(t)?.pasteAs(s?new Be(s):void 0)}}),(0,we.Fl)(class extends we.ks{constructor(){super({id:"editor.action.pasteAsText",label:Z.kg("pasteAsText","Paste as Text"),alias:"Paste as Text",precondition:ke.R.writable})}run(h,e){return Zo.get(e)?.pasteAs({providerId:Ct.id})}});var h0=c(26902),R1=c(75745),P1=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},mg=function(h,e){return function(t,i){e(t,i,h)}},Fm;const u0="editor.experimental.dropIntoEditor.defaultProvider",g0="editor.changeDropType",Wm=new et.N1("dropWidgetVisible",!1,(0,Z.kg)("dropWidgetVisible","Whether the drop widget is showing"));let bd=class extends vt.jG{static{Fm=this}static{this.ID="editor.contrib.dropIntoEditorController"}static get(e){return e.getContribution(Fm.ID)}constructor(e,t,i,s,o){super(),this._configService=i,this._languageFeaturesService=s,this._treeViewsDragAndDropService=o,this.treeItemsTransfer=Wi.getInstance(),this._dropProgressManager=this._register(t.createInstance(Gs,"dropIntoEditor",e)),this._postDropWidgetManager=this._register(t.createInstance(Qa,"dropIntoEditor",e,Wm,{id:g0,label:(0,Z.kg)("postDropWidgetTitle","Show drop options...")})),this._register(e.onDropIntoEditor(l=>this.onDropIntoEditor(e,l.position,l.event)))}clearWidgets(){this._postDropWidgetManager.clear()}changeDropType(){this._postDropWidgetManager.tryShowSelector()}async onDropIntoEditor(e,t,i){if(!i.dataTransfer||!e.hasModel())return;this._currentOperation?.cancel(),e.focus(),e.setPosition(t);const s=(0,hi.SS)(async o=>{const l=new vt.Cm,g=l.add(new ds.gI(e,1,void 0,o));try{const k=await this.extractDataTransferData(i);if(k.size===0||g.token.isCancellationRequested)return;const H=e.getModel();if(!H)return;const ee=this._languageFeaturesService.documentDropEditProvider.ordered(H).filter(fe=>fe.dropMimeTypes?fe.dropMimeTypes.some(Me=>k.matches(Me)):!0),ie=l.add(await this.getDropEdits(ee,H,t,k,g));if(g.token.isCancellationRequested)return;if(ie.edits.length){const fe=this.getInitialActiveEditIndex(H,ie.edits),Me=e.getOption(36).showDropSelector==="afterDrop";await this._postDropWidgetManager.applyEditAndShowIfNeeded([wt.Q.fromPositions(t)],{activeEditIndex:fe,allEdits:ie.edits},Me,async xe=>xe,o)}}finally{l.dispose(),this._currentOperation===s&&(this._currentOperation=void 0)}});this._dropProgressManager.showWhile(t,(0,Z.kg)("dropIntoEditorProgress","Running drop handlers. Click to cancel"),s,{cancel:()=>s.cancel()}),this._currentOperation=s}async getDropEdits(e,t,i,s,o){const l=new vt.Cm,g=await(0,hi.PK)(Promise.all(e.map(async H=>{try{const ee=await H.provideDocumentDropEdits(t,i,s,o.token);return ee&&l.add(ee),ee?.edits.map(ie=>({...ie,providerId:H.id}))}catch{}})),o.token),k=(0,Xi.Yc)(g??[]).flat();return{edits:Hn(k),dispose:()=>l.dispose()}}getInitialActiveEditIndex(e,t){const i=this._configService.getValue(u0,{resource:e.uri});for(const[s,o]of Object.entries(i)){const l=new Be(o),g=t.findIndex(k=>l.value===k.providerId&&k.handledMimeType&&Xn(s,[k.handledMimeType]));if(g>=0)return g}return 0}async extractDataTransferData(e){if(!e.dataTransfer)return new $n;const t=an(e.dataTransfer);if(this.treeItemsTransfer.hasData(h0.DraggedTreeItemsIdentifier.prototype)){const i=this.treeItemsTransfer.getData(h0.DraggedTreeItemsIdentifier.prototype);if(Array.isArray(i))for(const s of i){const o=await this._treeViewsDragAndDropService.removeDragOperationTransfer(s.identifier);if(o)for(const[l,g]of o)t.replace(l,g)}}return t}};bd=Fm=P1([mg(1,Ri._Y),mg(2,pt.pG),mg(3,_e.ILanguageFeaturesService),mg(4,R1.ITreeViewsDnDService)],bd),(0,we.HW)(bd.ID,bd,2),(0,Jr.x)(Kt),(0,we.E_)(new class extends we.DX{constructor(){super({id:g0,precondition:Wm,kbOpts:{weight:100,primary:2137}})}runEditorCommand(h,e,t){bd.get(e)?.changeDropType()}}),(0,we.E_)(new class extends we.DX{constructor(){super({id:"editor.hideDropWidget",precondition:Wm,kbOpts:{weight:100,primary:9}})}runEditorCommand(h,e,t){bd.get(e)?.clearWidgets()}}),qt.O.as(li.Fd.Configuration).registerConfiguration({...Kr.JJ,properties:{[u0]:{type:"object",scope:5,description:Z.kg("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}});var Bm=c(54656),Th=c(51922),A1=c(8909);class _r{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){const t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const i of t){const s=i.options;if(s===_r._FIND_MATCH_DECORATION||s===_r._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(i.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let s=0,o=this._decorations.length;s<o;s++){const l=this._editor.getModel().getDecorationRange(this._decorations[s]);if(e.equalsRange(l)){t=this._decorations[s],i=s+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(s=>{if(this._highlightedDecorationId!==null&&(s.changeDecorationOptions(this._highlightedDecorationId,_r._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,s.changeDecorationOptions(this._highlightedDecorationId,_r._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(s.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let o=this._editor.getModel().getDecorationRange(t);if(o.startLineNumber!==o.endLineNumber&&o.endColumn===1){const l=o.endLineNumber-1,g=this._editor.getModel().getLineMaxColumn(l);o=new wt.Q(o.startLineNumber,o.startColumn,l,g)}this._rangeHighlightDecorationId=s.addDecoration(o,_r._RANGE_HIGHLIGHT_DECORATION)}}),i}set(e,t){this._editor.changeDecorations(i=>{let s=_r._FIND_MATCH_DECORATION;const o=[];if(e.length>1e3){s=_r._FIND_MATCH_NO_OVERVIEW_DECORATION;const g=this._editor.getModel().getLineCount(),H=this._editor.getLayoutInfo().height/g,ee=Math.max(2,Math.ceil(3/H));let ie=e[0].range.startLineNumber,fe=e[0].range.endLineNumber;for(let Me=1,xe=e.length;Me<xe;Me++){const Qe=e[Me].range;fe+ee>=Qe.startLineNumber?Qe.endLineNumber>fe&&(fe=Qe.endLineNumber):(o.push({range:new wt.Q(ie,1,fe,1),options:_r._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),ie=Qe.startLineNumber,fe=Qe.endLineNumber)}o.push({range:new wt.Q(ie,1,fe,1),options:_r._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const l=new Array(e.length);for(let g=0,k=e.length;g<k;g++)l[g]={range:e[g].range,options:s};this._decorations=i.deltaDecorations(this._decorations,l),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,o),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(g=>i.removeDecoration(g)),this._findScopeDecorationIds=[]),t?.length&&(this._findScopeDecorationIds=t.map(g=>i.addDecoration(g,_r._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){const i=this._decorations[t],s=this._editor.getModel().getDecorationRange(i);if(!(!s||s.endLineNumber>e.lineNumber)){if(s.endLineNumber<e.lineNumber)return s;if(!(s.endColumn>e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,i=this._decorations.length;t<i;t++){const s=this._decorations[t],o=this._editor.getModel().getDecorationRange(s);if(!(!o||o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}static{this._CURRENT_FIND_MATCH_DECORATION=Ki.kI.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",inlineClassName:"currentFindMatchInline",showIfCollapsed:!0,overviewRuler:{color:(0,$i.Yf)(Tt.fAP),position:In.A5.Center},minimap:{color:(0,$i.Yf)(Tt.AjU),position:1}})}static{this._FIND_MATCH_DECORATION=Ki.kI.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",inlineClassName:"findMatchInline",showIfCollapsed:!0,overviewRuler:{color:(0,$i.Yf)(Tt.fAP),position:In.A5.Center},minimap:{color:(0,$i.Yf)(Tt.AjU),position:1}})}static{this._FIND_MATCH_NO_OVERVIEW_DECORATION=Ki.kI.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0})}static{this._FIND_MATCH_ONLY_OVERVIEW_DECORATION=Ki.kI.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:(0,$i.Yf)(Tt.fAP),position:In.A5.Center}})}static{this._RANGE_HIGHLIGHT_DECORATION=Ki.kI.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0})}static{this._FIND_SCOPE_DECORATION=Ki.kI.register({description:"find-scope",className:"findScope",isWholeLine:!0})}}class O1{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const i=[];for(let l=0;l<this._ranges.length;l++)i.push({range:this._ranges[l],text:this._replaceStrings[l]});i.sort((l,g)=>wt.Q.compareRangesUsingStarts(l.range,g.range));const s=[];let o=i[0];for(let l=1;l<i.length;l++)o.range.endLineNumber===i[l].range.startLineNumber&&o.range.endColumn===i[l].range.startColumn?(o.range=o.range.plusRange(i[l].range),o.text=o.text+i[l].text):(s.push(o),o=i[l]);s.push(o);for(const l of s)t.addEditOperation(l.range,l.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function f0(h,e){if(h&&h[0]!==""){const t=m0(h,e,"-"),i=m0(h,e,"_");return t&&!i?p0(h,e,"-"):!t&&i?p0(h,e,"_"):h[0].toUpperCase()===h[0]?e.toUpperCase():h[0].toLowerCase()===h[0]?e.toLowerCase():Vi.zY(h[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):h[0][0].toUpperCase()!==h[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function m0(h,e,t){return h[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&h[0].split(t).length===e.split(t).length}function p0(h,e,t){const i=e.split(t),s=h[0].split(t);let o="";return i.forEach((l,g)=>{o+=f0([s[g]],l)+t}),o.slice(0,-1)}class _0{constructor(e){this.staticValue=e,this.kind=0}}class F1{constructor(e){this.pieces=e,this.kind=1}}class Sd{static fromStaticValue(e){return new Sd([cc.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(e){!e||e.length===0?this._state=new _0(""):e.length===1&&e[0].staticValue!==null?this._state=new _0(e[0].staticValue):this._state=new F1(e)}buildReplaceString(e,t){if(this._state.kind===0)return t?f0(e,this._state.staticValue):this._state.staticValue;let i="";for(let s=0,o=this._state.pieces.length;s<o;s++){const l=this._state.pieces[s];if(l.staticValue!==null){i+=l.staticValue;continue}let g=Sd._substitute(l.matchIndex,e);if(l.caseOps!==null&&l.caseOps.length>0){const k=[],H=l.caseOps.length;let ee=0;for(let ie=0,fe=g.length;ie<fe;ie++){if(ee>=H){k.push(g.slice(ie));break}switch(l.caseOps[ee]){case"U":k.push(g[ie].toUpperCase());break;case"u":k.push(g[ie].toUpperCase()),ee++;break;case"L":k.push(g[ie].toLowerCase());break;case"l":k.push(g[ie].toLowerCase()),ee++;break;default:k.push(g[ie])}}g=k.join("")}i+=g}return i}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let i="";for(;e>0;){if(e<t.length)return(t[e]||"")+i;i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}class cc{static staticValue(e){return new cc(e,-1,null)}static caseOps(e,t){return new cc(null,e,t)}constructor(e,t,i){this.staticValue=e,this.matchIndex=t,!i||i.length===0?this.caseOps=null:this.caseOps=i.slice(0)}}class W1{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=cc.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=cc.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=cc.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new Sd(this._result)}}function B1(h){if(!h||h.length===0)return new Sd(null);const e=[],t=new W1(h);for(let i=0,s=h.length;i<s;i++){const o=h.charCodeAt(i);if(o===92){if(i++,i>=s)break;const l=h.charCodeAt(i);switch(l){case 92:t.emitUnchanged(i-1),t.emitStatic("\\",i+1);break;case 110:t.emitUnchanged(i-1),t.emitStatic(`
`,i+1);break;case 116:t.emitUnchanged(i-1),t.emitStatic("	",i+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(i-1),t.emitStatic("",i+1),e.push(String.fromCharCode(l));break}continue}if(o===36){if(i++,i>=s)break;const l=h.charCodeAt(i);if(l===36){t.emitUnchanged(i-1),t.emitStatic("$",i+1);continue}if(l===48||l===38){t.emitUnchanged(i-1),t.emitMatchIndex(0,i+1,e),e.length=0;continue}if(49<=l&&l<=57){let g=l-48;if(i+1<s){const k=h.charCodeAt(i+1);if(48<=k&&k<=57){i++,g=g*10+(k-48),t.emitUnchanged(i-2),t.emitMatchIndex(g,i+1,e),e.length=0;continue}}t.emitUnchanged(i-1),t.emitMatchIndex(g,i+1,e),e.length=0;continue}}}return t.finalize()}const Wa=new et.N1("findWidgetVisible",!1),nI=Wa.toNegated(),pg=new et.N1("findInputFocussed",!1),Hm=new et.N1("replaceInputFocussed",!1),_g={primary:545,mac:{primary:2593}},vg={primary:565,mac:{primary:2613}},Cg={primary:560,mac:{primary:2608}},bg={primary:554,mac:{primary:2602}},Sg={primary:558,mac:{primary:2606}},ls={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",GoToMatchFindAction:"editor.action.goToMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},ml=19999,H1=240;class Rh{constructor(e,t){this._toDispose=new vt.Cm,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new hi.pc,this._decorations=new _r(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new hi.uC(()=>{if(this._editor.hasModel())return this.research(!1)},100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(i=>{(i.reason===3||i.reason===5||i.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(i=>{this._ignoreModelContentChanged||(i.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(i=>this._onStateChanged(i))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,(0,vt.AS)(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},H1)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;typeof t<"u"?t!==null&&(Array.isArray(t)?i=t:i=[t]):i=this._decorations.getFindScopes(),i!==null&&(i=i.map(g=>{if(g.startLineNumber!==g.endLineNumber){let k=g.endLineNumber;return g.endColumn===1&&(k=k-1),new wt.Q(g.startLineNumber,1,k,this._editor.getModel().getLineMaxColumn(k))}return g}));const s=this._findMatches(i,!1,ml);this._decorations.set(s,i);const o=this._editor.getSelection();let l=this._decorations.getCurrentMatchesPosition(o);if(l===0&&s.length>0){const g=(0,Th.hw)(s.map(k=>k.range),k=>wt.Q.compareRangesUsingStarts(k,o)>=0);l=g>0?g-1+1:l}this._state.changeMatchInfo(l,this._decorations.getCount(),void 0),e&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:s}=e;const o=this._editor.getModel();return t||s===1?(i===1?i=o.getLineCount():i--,s=o.getLineMaxColumn(i)):s--,new ui.y(i,s)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const ee=this._decorations.matchAfterPosition(e);ee&&this._setCurrentFindMatch(ee);return}if(this._decorations.getCount()<ml){let ee=this._decorations.matchBeforePosition(e);ee&&ee.isEmpty()&&ee.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),ee=this._decorations.matchBeforePosition(e)),ee&&this._setCurrentFindMatch(ee);return}if(this._cannotFind())return;const i=this._decorations.getFindScope(),s=Rh._getSearchRange(this._editor.getModel(),i);s.getEndPosition().isBefore(e)&&(e=s.getEndPosition()),e.isBefore(s.getStartPosition())&&(e=s.getEndPosition());const{lineNumber:o,column:l}=e,g=this._editor.getModel();let k=new ui.y(o,l),H=g.findPreviousMatch(this._state.searchString,k,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1);if(H&&H.range.isEmpty()&&H.range.getStartPosition().equals(k)&&(k=this._prevSearchPosition(k),H=g.findPreviousMatch(this._state.searchString,k,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1)),!!H){if(!t&&!s.containsRange(H.range))return this._moveToPrevMatch(H.range.getStartPosition(),!0);this._setCurrentFindMatch(H.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:s}=e;const o=this._editor.getModel();return t||s===o.getLineMaxColumn(i)?(i===o.getLineCount()?i=1:i++,s=1):s++,new ui.y(i,s)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const i=this._decorations.matchBeforePosition(e);i&&this._setCurrentFindMatch(i);return}if(this._decorations.getCount()<ml){let i=this._decorations.matchAfterPosition(e);i&&i.isEmpty()&&i.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),i=this._decorations.matchAfterPosition(e)),i&&this._setCurrentFindMatch(i);return}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,s=!1){if(this._cannotFind())return null;const o=this._decorations.getFindScope(),l=Rh._getSearchRange(this._editor.getModel(),o);l.getEndPosition().isBefore(e)&&(e=l.getStartPosition()),e.isBefore(l.getStartPosition())&&(e=l.getStartPosition());const{lineNumber:g,column:k}=e,H=this._editor.getModel();let ee=new ui.y(g,k),ie=H.findNextMatch(this._state.searchString,ee,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t);return i&&ie&&ie.range.isEmpty()&&ie.range.getStartPosition().equals(ee)&&(ee=this._nextSearchPosition(ee),ie=H.findNextMatch(this._state.searchString,ee,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t)),ie?!s&&!l.containsRange(ie.range)?this._getNextMatch(ie.range.getEndPosition(),t,i,!0):ie:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){const t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?B1(this._state.replaceString):Sd.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){const s=e.buildReplaceString(i.matches,this._state.preserveCase),o=new yn.iu(t,s);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new ui.y(t.startLineNumber,t.startColumn+s.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){const s=(e||[null]).map(o=>Rh._getSearchRange(this._editor.getModel(),o));return this._editor.getModel().findMatches(this._state.searchString,s,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t,i)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=ml?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new A1.lt(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null).parseSearchRequest();if(!t)return;let i=t.regex;if(!i.multiline){let ie="mu";i.ignoreCase&&(ie+="i"),i.global&&(ie+="g"),i=new RegExp(i.source,ie)}const s=this._editor.getModel(),o=s.getValue(1),l=s.getFullModelRange(),g=this._getReplacePattern();let k;const H=this._state.preserveCase;g.hasReplacementPatterns||H?k=o.replace(i,function(){return g.buildReplaceString(arguments,H)}):k=o.replace(i,g.buildReplaceString(null,H));const ee=new yn.ui(l,k,this._editor.getSelection());this._executeEditorCommand("replaceAll",ee)}_regularReplaceAll(e){const t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),s=[];for(let l=0,g=i.length;l<g;l++)s[l]=t.buildReplaceString(i[l].matches,this._state.preserveCase);const o=new O1(this._editor.getSelection(),i.map(l=>l.range),s);this._executeEditorCommand("replaceAll",o)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let i=this._findMatches(e,!1,1073741824).map(o=>new Mi.L(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn));const s=this._editor.getSelection();for(let o=0,l=i.length;o<l;o++)if(i[o].equalsRange(s)){i=[s].concat(i.slice(0,o)).concat(i.slice(o+1));break}this._editor.setSelections(i)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}var Vm=c(53397),dc=c(15903);class Um extends Mo.x{static{this.ID="editor.contrib.findOptionsWidget"}constructor(e,t,i){super(),this._hideSoon=this._register(new hi.uC(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const s={inputActiveOptionBorder:(0,Tt.GuP)(Tt.uNK),inputActiveOptionForeground:(0,Tt.GuP)(Tt.$$0),inputActiveOptionBackground:(0,Tt.GuP)(Tt.c1f)},o=this._register((0,dc.bW)());this.caseSensitive=this._register(new Vm.bc({appendTitle:this._keybindingLabelFor(ls.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,hoverDelegate:o,...s})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new Vm.nV({appendTitle:this._keybindingLabelFor(ls.ToggleWholeWordCommand),isChecked:this._state.wholeWord,hoverDelegate:o,...s})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new Vm.Ix({appendTitle:this._keybindingLabelFor(ls.ToggleRegexCommand),isChecked:this._state.isRegex,hoverDelegate:o,...s})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(l=>{let g=!1;l.isRegex&&(this.regex.checked=this._state.isRegex,g=!0),l.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,g=!0),l.matchCase&&(this.caseSensitive.checked=this._state.matchCase,g=!0),!this._state.isRevealed&&g&&this._revealTemporarily()})),this._register(Se.ko(this._domNode,Se.Bx.MOUSE_LEAVE,l=>this._onMouseLeave())),this._register(Se.ko(this._domNode,"mouseover",l=>this._onMouseOver()))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Um.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}}function wg(h,e){return h===1?!0:h===2?!1:e}class V1 extends vt.jG{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return wg(this._isRegexOverride,this._isRegex)}get wholeWord(){return wg(this._wholeWordOverride,this._wholeWord)}get matchCase(){return wg(this._matchCaseOverride,this._matchCase)}get preserveCase(){return wg(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new zi.vl),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,i){const s={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,s.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,s.matchesCount=!0,o=!0),typeof i<"u"&&(wt.Q.equalsRange(this._currentMatch,i)||(this._currentMatch=i,s.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(s)}change(e,t,i=!0){const s={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;const l=this.isRegex,g=this.wholeWord,k=this.matchCase,H=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,s.searchString=!0,o=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,s.replaceString=!0,o=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,s.isRevealed=!0,o=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,s.isReplaceRevealed=!0,o=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(e.searchScope?.every(ee=>this._searchScope?.some(ie=>!wt.Q.equalsRange(ie,ee)))||(this._searchScope=e.searchScope,s.searchScope=!0,o=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,s.loop=!0,o=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,s.isSearching=!0,o=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,s.filters=!0,o=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,l!==this.isRegex&&(o=!0,s.isRegex=!0),g!==this.wholeWord&&(o=!0,s.wholeWord=!0),k!==this.matchCase&&(o=!0,s.matchCase=!0),H!==this.preserveCase&&(o=!0,s.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(s)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=ml}}var v0=c(47896),U1=c(78398),z1=c(79766);const j1=Z.kg("defaultLabel","input"),K1=Z.kg("label.preserveCaseToggle","Preserve Case");class $1 extends v0.l{constructor(e){super({icon:Dt.W.preserveCase,title:K1+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??(0,dc.nZ)("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class G1 extends Mo.x{constructor(e,t,i,s){super(),this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new zi.vl),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new zi.vl),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new zi.vl),this._onInput=this._register(new zi.vl),this._onKeyUp=this._register(new zi.vl),this._onPreserveCaseKeyDown=this._register(new zi.vl),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||j1;const o=s.appendPreserveCaseLabel||"",l=s.history||[],g=!!s.flexibleHeight,k=!!s.flexibleWidth,H=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new z1.mJ(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:l,showHistoryHint:s.showHistoryHint,flexibleHeight:g,flexibleWidth:k,flexibleMaxHeight:H,inputBoxStyles:s.inputBoxStyles})),this.preserveCase=this._register(new $1({appendTitle:o,isChecked:!1,...s.toggleStyles})),this._register(this.preserveCase.onChange(fe=>{this._onDidOptionChange.fire(fe),!fe&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(fe=>{this._onPreserveCaseKeyDown.fire(fe)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const ee=[this.preserveCase.domNode];this.onkeydown(this.domNode,fe=>{if(fe.equals(15)||fe.equals(17)||fe.equals(9)){const Me=ee.indexOf(this.domNode.ownerDocument.activeElement);if(Me>=0){let xe=-1;fe.equals(17)?xe=(Me+1)%ee.length:fe.equals(15)&&(Me===0?xe=ee.length-1:xe=Me-1),fe.equals(9)?(ee[Me].blur(),this.inputBox.focus()):xe>=0&&ee[xe].focus(),Se.fs.stop(fe,!0)}}});const ie=document.createElement("div");ie.className="controls",ie.style.display=this._showOptionButtons?"block":"none",ie.appendChild(this.preserveCase.domNode),this.domNode.appendChild(ie),e?.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,fe=>this._onKeyDown.fire(fe)),this.onkeyup(this.inputBox.inputElement,fe=>this._onKeyUp.fire(fe)),this.oninput(this.inputBox.inputElement,fe=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,fe=>this._onMouseDown.fire(fe))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox?.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var C0=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},b0=function(h,e){return function(t,i){e(t,i,h)}};const zm=new et.N1("suggestWidgetVisible",!1,(0,Z.kg)("suggestWidgetVisible","Whether suggestion are visible")),jm="historyNavigationWidgetFocus",S0="historyNavigationForwardsEnabled",w0="historyNavigationBackwardsEnabled";let Ph;const yg=[];function y0(h,e){if(yg.includes(e))throw new Error("Cannot register the same widget multiple times");yg.push(e);const t=new vt.Cm,i=new et.N1(jm,!1).bindTo(h),s=new et.N1(S0,!0).bindTo(h),o=new et.N1(w0,!0).bindTo(h),l=()=>{i.set(!0),Ph=e},g=()=>{i.set(!1),Ph===e&&(Ph=void 0)};return(0,Se.X7)(e.element)&&l(),t.add(e.onDidFocus(()=>l())),t.add(e.onDidBlur(()=>g())),t.add((0,vt.s)(()=>{yg.splice(yg.indexOf(e),1),g()})),{historyNavigationForwardsEnablement:s,historyNavigationBackwardsEnablement:o,dispose(){t.dispose()}}}let Km=class extends U1.c{constructor(e,t,i,s){super(e,t,i);const o=this._register(s.createScoped(this.inputBox.element));this._register(y0(o,this.inputBox))}};Km=C0([b0(3,et.fN)],Km);let $m=class extends G1{constructor(e,t,i,s,o=!1){super(e,t,o,i);const l=this._register(s.createScoped(this.inputBox.element));this._register(y0(l,this.inputBox))}};$m=C0([b0(3,et.fN)],$m),mr.f.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:et.M$.and(et.M$.has(jm),et.M$.equals(w0,!0),et.M$.not("isComposing"),zm.isEqualTo(!1)),primary:16,secondary:[528],handler:h=>{Ph?.showPreviousValue()}}),mr.f.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:et.M$.and(et.M$.has(jm),et.M$.equals(S0,!0),et.M$.not("isComposing"),zm.isEqualTo(!1)),primary:18,secondary:[530],handler:h=>{Ph?.showNextValue()}});function L0(h){return h.lookupKeybinding("history.showPrevious")?.getElectronAccelerator()==="Up"&&h.lookupKeybinding("history.showNext")?.getElectronAccelerator()==="Down"}const D0=(0,rs.pU)("find-collapsed",Dt.W.chevronRight,Z.kg("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),E0=(0,rs.pU)("find-expanded",Dt.W.chevronDown,Z.kg("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),Q1=(0,rs.pU)("find-selection",Dt.W.selection,Z.kg("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Y1=(0,rs.pU)("find-replace",Dt.W.replace,Z.kg("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Z1=(0,rs.pU)("find-replace-all",Dt.W.replaceAll,Z.kg("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),X1=(0,rs.pU)("find-previous-match",Dt.W.arrowUp,Z.kg("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),J1=(0,rs.pU)("find-next-match",Dt.W.arrowDown,Z.kg("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),q1=Z.kg("label.findDialog","Find / Replace"),eS=Z.kg("label.find","Find"),tS=Z.kg("placeholder.find","Find"),iS=Z.kg("label.previousMatchButton","Previous Match"),nS=Z.kg("label.nextMatchButton","Next Match"),sS=Z.kg("label.toggleSelectionFind","Find in Selection"),oS=Z.kg("label.closeButton","Close"),rS=Z.kg("label.replace","Replace"),aS=Z.kg("placeholder.replace","Replace"),lS=Z.kg("label.replaceButton","Replace"),cS=Z.kg("label.replaceAllButton","Replace All"),dS=Z.kg("label.toggleReplaceButton","Toggle Replace"),hS=Z.kg("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",ml),uS=Z.kg("label.matchesLocation","{0} of {1}"),x0=Z.kg("label.noResults","No results"),ha=419,gS=275-54;let Ah=69;const fS=33,k0="ctrlEnterReplaceAll.windows.donotask",I0=Mn.zx?256:2048;class Gm{constructor(e){this.afterLineNumber=e,this.heightInPx=fS,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function M0(h,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionStart>0){h.stopPropagation();return}}function N0(h,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionEnd<t.value.length){h.stopPropagation();return}}class Qm extends Mo.x{static{this.ID="editor.contrib.findWidget"}constructor(e,t,i,s,o,l,g,k,H,ee){super(),this._hoverService=ee,this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=s,this._keybindingService=o,this._contextKeyService=l,this._storageService=k,this._notificationService=H,this._ctrlEnterReplaceAllWarningPrompted=!!k.getBoolean(k0,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new hi.ve(500),this._register((0,vt.s)(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(ie=>this._onStateChanged(ie))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(ie=>{if(ie.hasChanged(92)&&(this._codeEditor.getOption(92)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),ie.hasChanged(146)&&this._tryUpdateWidgetWidth(),ie.hasChanged(2)&&this.updateAccessibilitySupport(),ie.hasChanged(41)){const fe=this._codeEditor.getOption(41).loop;this._state.change({loop:fe},!1);const Me=this._codeEditor.getOption(41).addExtraSpaceOnTop;Me&&!this._viewZone&&(this._viewZone=new Gm(0),this._showViewZone()),!Me&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(async()=>{if(this._isVisible){const ie=await this._controller.getGlobalBufferTerm();ie&&ie!==this._state.searchString&&(this._state.change({searchString:ie},!1),this._findInput.select())}})),this._findInputFocused=pg.bindTo(l),this._findFocusTracker=this._register(Se.w5(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=Hm.bindTo(l),this._replaceFocusTracker=this._register(Se.w5(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(41).addExtraSpaceOnTop&&(this._viewZone=new Gm(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(ie=>{if(ie.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return Qm.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(92)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Se.Tr(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Ni.dz)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=Ah+"px",this._state.matchesCount>=ml?this._matchesCount.title=hS:this._matchesCount.title="",this._matchesCount.firstChild?.remove();let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=ml&&(t+="+");let i=String(this._state.matchesPosition);i==="0"&&(i="?"),e=Vi.GP(uS,i,t)}else e=x0;this._matchesCount.appendChild(document.createTextNode(e)),(0,dn.xE)(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),Ah=Math.max(Ah,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===x0)return i===""?Z.kg("ariaSearchNoResultEmpty","{0} found",e):Z.kg("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){const s=Z.kg("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();return o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1?`${o.getLineContent(t.startLineNumber)}, ${s}`:s}return Z.kg("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const i=!this._codeEditor.getOption(92);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const i=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=i;break}default:break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&e){const i=this._codeEditor.getDomNode();if(i){const s=Se.BK(i),o=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),l=s.left+(o?o.left:0),g=o?o.top:0;if(this._viewZone&&g<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const k=Se.cL(this._domNode).left;l>k&&(t=!1);const H=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());s.left+(H?H.left:0)>k&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(41).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const i=this._viewZone;this._viewZoneId!==void 0||!i||this._codeEditor.changeViewZones(s=>{i.heightInPx=this._getHeight(),this._viewZoneId=s.addZone(i),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+i.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(41).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new Gm(0));const i=this._viewZone;this._codeEditor.changeViewZones(s=>{if(this._viewZoneId!==void 0){const o=this._getHeight();if(o===i.heightInPx)return;const l=o-i.heightInPx;i.heightInPx=o,s.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+l);return}else{let o=this._getHeight();if(o-=this._codeEditor.getOption(84).top,o<=0)return;i.heightInPx=o,this._viewZoneId=s.addZone(i),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!this._domNode.isConnected)return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const i=e.width,s=e.minimap.minimapWidth;let o=!1,l=!1,g=!1;if(this._resized&&Se.Tr(this._domNode)>ha){this._domNode.style.maxWidth=`${i-28-s-15}px`,this._replaceInput.width=Se.Tr(this._findInput.domNode);return}if(ha+28+s>=i&&(l=!0),ha+28+s-Ah>=i&&(g=!0),ha+28+s-Ah>=i+50&&(o=!0),this._domNode.classList.toggle("collapsed-find-widget",o),this._domNode.classList.toggle("narrow-find-widget",g),this._domNode.classList.toggle("reduced-find-widget",l),!g&&!o&&(this._domNode.style.maxWidth=`${i-28-s-15}px`),this._findInput.layout({collapsedFindWidget:o,narrowFindWidget:g,reducedFindWidget:l}),this._resized){const k=this._findInput.inputBox.element.clientWidth;k>0&&(this._replaceInput.width=k)}else this._isReplaceVisible&&(this._replaceInput.width=Se.Tr(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const i=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!wt.Q.equalsRange(t,i)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(I0|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return M0(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return N0(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(I0|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{Mn.uF&&Mn.ib&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(Z.kg("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(k0,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return M0(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return N0(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new Km(null,this._contextViewProvider,{width:gS,label:eS,placeholder:tS,appendCaseSensitiveLabel:this._keybindingLabelFor(ls.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(ls.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(ls.ToggleRegexCommand),validation:ee=>{if(ee.length===0||!this._findInput.getRegex())return null;try{return new RegExp(ee,"gu"),null}catch(ie){return{content:ie.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>L0(this._keybindingService),inputBoxStyles:Io.ho,toggleStyles:Io.mk},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(ee=>this._onFindInputKeyDown(ee))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(ee=>{ee.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),ee.preventDefault())})),this._register(this._findInput.onRegexKeyDown(ee=>{ee.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),ee.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(ee=>{this._tryUpdateHeight()&&this._showViewZone()})),Mn.j9&&this._register(this._findInput.onMouseDown(ee=>this._onFindInputMouseDown(ee))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount();const i=this._register((0,dc.bW)());this._prevBtn=this._register(new wd({label:iS+this._keybindingLabelFor(ls.PreviousMatchFindAction),icon:X1,hoverDelegate:i,onTrigger:()=>{(0,hn.eU)(this._codeEditor.getAction(ls.PreviousMatchFindAction)).run().then(void 0,Ni.dz)}},this._hoverService)),this._nextBtn=this._register(new wd({label:nS+this._keybindingLabelFor(ls.NextMatchFindAction),icon:J1,hoverDelegate:i,onTrigger:()=>{(0,hn.eU)(this._codeEditor.getAction(ls.NextMatchFindAction)).run().then(void 0,Ni.dz)}},this._hoverService));const s=document.createElement("div");s.className="find-part",s.appendChild(this._findInput.domNode);const o=document.createElement("div");o.className="find-actions",s.appendChild(o),o.appendChild(this._matchesCount),o.appendChild(this._prevBtn.domNode),o.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new v0.l({icon:Q1,title:sS+this._keybindingLabelFor(ls.ToggleSearchScopeCommand),isChecked:!1,hoverDelegate:i,inputActiveOptionBackground:(0,Tt.GuP)(Tt.c1f),inputActiveOptionBorder:(0,Tt.GuP)(Tt.uNK),inputActiveOptionForeground:(0,Tt.GuP)(Tt.$$0)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let ee=this._codeEditor.getSelections();ee=ee.map(ie=>(ie.endColumn===1&&ie.endLineNumber>ie.startLineNumber&&(ie=ie.setEndPosition(ie.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(ie.endLineNumber-1))),ie.isEmpty()?null:ie)).filter(ie=>!!ie),ee.length&&this._state.change({searchScope:ee},!0)}}else this._state.change({searchScope:null},!0)})),o.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new wd({label:oS+this._keybindingLabelFor(ls.CloseFindWidgetCommand),icon:rs.$_,hoverDelegate:i,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:ee=>{ee.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),ee.preventDefault())}},this._hoverService)),this._replaceInput=this._register(new $m(null,void 0,{label:rS,placeholder:aS,appendPreserveCaseLabel:this._keybindingLabelFor(ls.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>L0(this._keybindingService),inputBoxStyles:Io.ho,toggleStyles:Io.mk},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(ee=>this._onReplaceInputKeyDown(ee))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(ee=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(ee=>{ee.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),ee.preventDefault())}));const l=this._register((0,dc.bW)());this._replaceBtn=this._register(new wd({label:lS+this._keybindingLabelFor(ls.ReplaceOneAction),icon:Y1,hoverDelegate:l,onTrigger:()=>{this._controller.replace()},onKeyDown:ee=>{ee.equals(1026)&&(this._closeBtn.focus(),ee.preventDefault())}},this._hoverService)),this._replaceAllBtn=this._register(new wd({label:cS+this._keybindingLabelFor(ls.ReplaceAllAction),icon:Z1,hoverDelegate:l,onTrigger:()=>{this._controller.replaceAll()}},this._hoverService));const g=document.createElement("div");g.className="replace-part",g.appendChild(this._replaceInput.domNode);const k=document.createElement("div");k.className="replace-actions",g.appendChild(k),k.appendChild(this._replaceBtn.domNode),k.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new wd({label:dS,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Se.Tr(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}},this._hoverService)),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=q1,this._domNode.role="dialog",this._domNode.style.width=`${ha}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(s),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(g),this._resizeSash=this._register(new oa.m(this._domNode,this,{orientation:0,size:2})),this._resized=!1;let H=ha;this._register(this._resizeSash.onDidStart(()=>{H=Se.Tr(this._domNode)})),this._register(this._resizeSash.onDidChange(ee=>{this._resized=!0;const ie=H+ee.startX-ee.currentX;if(ie<ha)return;const fe=parseFloat(Se.L9(this._domNode).maxWidth)||0;ie>fe||(this._domNode.style.width=`${ie}px`,this._isReplaceVisible&&(this._replaceInput.width=Se.Tr(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const ee=Se.Tr(this._domNode);if(ee<ha)return;let ie=ha;if(!this._resized||ee===ha){const fe=this._codeEditor.getLayoutInfo();ie=fe.width-28-fe.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${ie}px`,this._isReplaceVisible&&(this._replaceInput.width=Se.Tr(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}class wd extends Mo.x{constructor(e,t){super(),this._opts=e;let i="button";this._opts.className&&(i=i+" "+this._opts.className),this._opts.icon&&(i=i+" "+mn.L.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.tabIndex=0,this._domNode.className=i,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this._register(t.setupManagedHover(e.hoverDelegate??(0,dc.nZ)("element"),this._domNode,this._opts.label)),this.onclick(this._domNode,s=>{this._opts.onTrigger(),s.preventDefault()}),this.onkeydown(this._domNode,s=>{if(s.equals(10)||s.equals(3)){this._opts.onTrigger(),s.preventDefault();return}this._opts.onKeyDown?.(s)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...mn.L.asClassNameArray(D0)),this._domNode.classList.add(...mn.L.asClassNameArray(E0))):(this._domNode.classList.remove(...mn.L.asClassNameArray(E0)),this._domNode.classList.add(...mn.L.asClassNameArray(D0)))}}(0,$i.zy)((h,e)=>{const t=h.getColor(Tt.ECk);t&&e.addRule(`.monaco-editor .findMatch { border: 1px ${(0,Rr.Bb)(h.type)?"dotted":"solid"} ${t}; box-sizing: border-box; }`);const i=h.getColor(Tt.S5J);i&&e.addRule(`.monaco-editor .findScope { border: 1px ${(0,Rr.Bb)(h.type)?"dashed":"solid"} ${i}; }`);const s=h.getColor(Tt.b1q);s&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${s}; }`);const o=h.getColor(Tt.f3U);o&&e.addRule(`.monaco-editor .findMatchInline { color: ${o}; }`);const l=h.getColor(Tt.p8Y);l&&e.addRule(`.monaco-editor .currentFindMatchInline { color: ${l}; }`)});var T0=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},or=function(h,e){return function(t,i){e(t,i,h)}},Ym;const mS=524288;function Zm(h,e="single",t=!1){if(!h.hasModel())return null;const i=h.getSelection();if(e==="single"&&i.startLineNumber===i.endLineNumber||e==="multiple"){if(i.isEmpty()){const s=h.getConfiguredWordAtPosition(i.getStartPosition());if(s&&t===!1)return s.word}else if(h.getModel().getValueLengthInRange(i)<mS)return h.getModel().getValueInRange(i)}return null}let Eo=class extends vt.jG{static{Ym=this}static{this.ID="editor.contrib.findController"}get editor(){return this._editor}static get(e){return e.getContribution(Ym.ID)}constructor(e,t,i,s,o,l){super(),this._editor=e,this._findWidgetVisible=Wa.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=s,this._notificationService=o,this._hoverService=l,this._updateHistoryDelayer=new hi.ve(500),this._state=this._register(new V1),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(g=>this._onStateChanged(g))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const g=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),g&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(41).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!pg.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e=e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Vi.bm(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}async _start(e,t){if(this.disposeModel(),!this._editor.hasModel())return;const i={...t,isRevealed:!0};if(e.seedSearchStringFromSelection==="single"){const s=Zm(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);s&&(this._state.isRegex?i.searchString=Vi.bm(s):i.searchString=s)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){const s=Zm(this._editor,e.seedSearchStringFromSelection);s&&(i.searchString=s)}if(!i.searchString&&e.seedSearchStringFromGlobalClipboard){const s=await this.getGlobalBufferTerm();if(!this._editor.hasModel())return;s&&(i.searchString=s)}if(e.forceRevealReplace||i.isReplaceRevealed?i.isReplaceRevealed=!0:this._findWidgetVisible.get()||(i.isReplaceRevealed=!1),e.updateSearchScope){const s=this._editor.getSelections();s.some(o=>!o.isEmpty())&&(i.searchScope=s)}i.loop=e.loop,this._state.change(i,!1),this._model||(this._model=new Rh(this._editor,this._state))}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}goToMatch(e){return this._model?(this._model.moveToMatch(e),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?this._editor.getModel()?.isTooLargeForHeapOperation()?(this._notificationService.warn(Z.kg("too.large.for.replaceall","The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}async getGlobalBufferTerm(){return this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}setGlobalBufferTerm(e){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Eo=Ym=T0([or(1,et.fN),or(2,Ji.CS),or(3,lr.h),or(4,As.Ot),or(5,ll.TN)],Eo);let Xm=class extends Eo{constructor(e,t,i,s,o,l,g,k,H){super(e,i,g,k,l,H),this._contextViewService=t,this._keybindingService=s,this._themeService=o,this._widget=null,this._findOptionsWidget=null}async _start(e,t){this._widget||this._createFindWidget();const i=this._editor.getSelection();let s=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":{s=!!i&&i.startLineNumber!==i.endLineNumber;break}default:break}e.updateSearchScope=e.updateSearchScope||s,await super._start(e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new Qm(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService,this._hoverService)),this._findOptionsWidget=this._register(new Um(this._editor,this._state,this._keybindingService))}};Xm=T0([or(1,vn.l),or(2,et.fN),or(3,ms.b),or(4,$i.Gy),or(5,As.Ot),or(6,Ji.CS),or(7,lr.h),or(8,ll.TN)],Xm),(0,we.gW)(new we.PF({id:ls.StartFindAction,label:Z.kg("startFindAction","Find"),alias:"Find",precondition:et.M$.or(ke.R.focus,et.M$.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:Fe.D8.MenubarEditMenu,group:"3_find",title:Z.kg({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}})).addImplementation(0,(h,e,t)=>{const i=Eo.get(e);return i?i.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop}):!1});const pS={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},isRegex:{type:"boolean"},matchWholeWord:{type:"boolean"},isCaseSensitive:{type:"boolean"},preserveCase:{type:"boolean"},findInSelection:{type:"boolean"}}}}]};class _S extends we.ks{constructor(){super({id:ls.StartFindWithArgs,label:Z.kg("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:pS})}async run(e,t,i){const s=Eo.get(t);if(s){const o=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:i.replaceString!==void 0,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{};await s.start({forceRevealReplace:!1,seedSearchStringFromSelection:s.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:i?.findInSelection||!1,loop:t.getOption(41).loop},o),s.setGlobalBufferTerm(s.getState().searchString)}}}class vS extends we.ks{constructor(){super({id:ls.StartFindWithSelection,label:Z.kg("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}async run(e,t){const i=Eo.get(t);i&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),i.setGlobalBufferTerm(i.getState().searchString))}}class R0 extends we.ks{async run(e,t){const i=Eo.get(t);i&&!this._run(i)&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}}class CS extends R0{constructor(){super({id:ls.NextMatchFindAction,label:Z.kg("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:ke.R.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:et.M$.and(ke.R.focus,pg),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class bS extends R0{constructor(){super({id:ls.PreviousMatchFindAction,label:Z.kg("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:ke.R.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:et.M$.and(ke.R.focus,pg),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class SS extends we.ks{constructor(){super({id:ls.GoToMatchFindAction,label:Z.kg("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:Wa}),this._highlightDecorations=[]}run(e,t,i){const s=Eo.get(t);if(!s)return;const o=s.getState().matchesCount;if(o<1){e.get(As.Ot).notify({severity:As.AI.Warning,message:Z.kg("findMatchAction.noResults","No matches. Try searching for something else.")});return}const l=e.get(js.GK),g=new vt.Cm,k=g.add(l.createInputBox());k.placeholder=Z.kg("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",o);const H=ie=>{const fe=parseInt(ie);if(isNaN(fe))return;const Me=s.getState().matchesCount;if(fe>0&&fe<=Me)return fe-1;if(fe<0&&fe>=-Me)return Me+fe},ee=ie=>{const fe=H(ie);if(typeof fe=="number"){k.validationMessage=void 0,s.goToMatch(fe);const Me=s.getState().currentMatch;Me&&this.addDecorations(t,Me)}else k.validationMessage=Z.kg("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",s.getState().matchesCount),this.clearDecorations(t)};g.add(k.onDidChangeValue(ie=>{ee(ie)})),g.add(k.onDidAccept(()=>{const ie=H(k.value);typeof ie=="number"?(s.goToMatch(ie),k.hide()):k.validationMessage=Z.kg("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",s.getState().matchesCount)})),g.add(k.onDidHide(()=>{this.clearDecorations(t),g.dispose()})),k.show()}clearDecorations(e){e.changeDecorations(t=>{this._highlightDecorations=t.deltaDecorations(this._highlightDecorations,[])})}addDecorations(e,t){e.changeDecorations(i=>{this._highlightDecorations=i.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:(0,$i.Yf)(Bm.vp),position:In.A5.Full}}}])})}}class P0 extends we.ks{async run(e,t){const i=Eo.get(t);if(!i)return;const s=Zm(t,"single",!1);s&&i.setSearchString(s),this._run(i)||(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}}class wS extends P0{constructor(){super({id:ls.NextSelectionMatchFindAction,label:Z.kg("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:ke.R.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class yS extends P0{constructor(){super({id:ls.PreviousSelectionMatchFindAction,label:Z.kg("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:ke.R.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}(0,we.gW)(new we.PF({id:ls.StartFindReplaceAction,label:Z.kg("startReplace","Replace"),alias:"Replace",precondition:et.M$.or(ke.R.focus,et.M$.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:Fe.D8.MenubarEditMenu,group:"3_find",title:Z.kg({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}})).addImplementation(0,(h,e,t)=>{if(!e.hasModel()||e.getOption(92))return!1;const i=Eo.get(e);if(!i)return!1;const s=e.getSelection(),o=i.isFindInputFocused(),l=!s.isEmpty()&&s.startLineNumber===s.endLineNumber&&e.getOption(41).seedSearchStringFromSelection!=="never"&&!o,g=o||l?2:1;return i.start({forceRevealReplace:!0,seedSearchStringFromSelection:l?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).seedSearchStringFromSelection!=="never",shouldFocus:g,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop})}),(0,we.HW)(Eo.ID,Xm,0),(0,we.Fl)(_S),(0,we.Fl)(vS),(0,we.Fl)(CS),(0,we.Fl)(bS),(0,we.Fl)(SS),(0,we.Fl)(wS),(0,we.Fl)(yS);const Or=we.DX.bindToContribution(Eo.get);(0,we.E_)(new Or({id:ls.CloseFindWidgetCommand,precondition:Wa,handler:h=>h.closeFindWidget(),kbOpts:{weight:105,kbExpr:et.M$.and(ke.R.focus,et.M$.not("isComposing")),primary:9,secondary:[1033]}})),(0,we.E_)(new Or({id:ls.ToggleCaseSensitiveCommand,precondition:void 0,handler:h=>h.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:ke.R.focus,primary:_g.primary,mac:_g.mac,win:_g.win,linux:_g.linux}})),(0,we.E_)(new Or({id:ls.ToggleWholeWordCommand,precondition:void 0,handler:h=>h.toggleWholeWords(),kbOpts:{weight:105,kbExpr:ke.R.focus,primary:vg.primary,mac:vg.mac,win:vg.win,linux:vg.linux}})),(0,we.E_)(new Or({id:ls.ToggleRegexCommand,precondition:void 0,handler:h=>h.toggleRegex(),kbOpts:{weight:105,kbExpr:ke.R.focus,primary:Cg.primary,mac:Cg.mac,win:Cg.win,linux:Cg.linux}})),(0,we.E_)(new Or({id:ls.ToggleSearchScopeCommand,precondition:void 0,handler:h=>h.toggleSearchScope(),kbOpts:{weight:105,kbExpr:ke.R.focus,primary:bg.primary,mac:bg.mac,win:bg.win,linux:bg.linux}})),(0,we.E_)(new Or({id:ls.TogglePreserveCaseCommand,precondition:void 0,handler:h=>h.togglePreserveCase(),kbOpts:{weight:105,kbExpr:ke.R.focus,primary:Sg.primary,mac:Sg.mac,win:Sg.win,linux:Sg.linux}})),(0,we.E_)(new Or({id:ls.ReplaceOneAction,precondition:Wa,handler:h=>h.replace(),kbOpts:{weight:105,kbExpr:ke.R.focus,primary:3094}})),(0,we.E_)(new Or({id:ls.ReplaceOneAction,precondition:Wa,handler:h=>h.replace(),kbOpts:{weight:105,kbExpr:et.M$.and(ke.R.focus,Hm),primary:3}})),(0,we.E_)(new Or({id:ls.ReplaceAllAction,precondition:Wa,handler:h=>h.replaceAll(),kbOpts:{weight:105,kbExpr:ke.R.focus,primary:2563}})),(0,we.E_)(new Or({id:ls.ReplaceAllAction,precondition:Wa,handler:h=>h.replaceAll(),kbOpts:{weight:105,kbExpr:et.M$.and(ke.R.focus,Hm),primary:void 0,mac:{primary:2051}}})),(0,we.E_)(new Or({id:ls.SelectAllMatchesAction,precondition:Wa,handler:h=>h.selectAllMatches(),kbOpts:{weight:105,kbExpr:ke.R.focus,primary:515}}));const LS={0:" ",1:"u",2:"r"},A0=65535,Fr=16777215,O0=4278190080;class Jm{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,i=e%32;return(this._states[t]&1<<i)!==0}set(e,t){const i=e/32|0,s=e%32,o=this._states[i];t?this._states[i]=o|1<<s:this._states[i]=o&~(1<<s)}}class Ko{constructor(e,t,i){if(e.length!==t.length||e.length>A0)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Jm(e.length),this._userDefinedStates=new Jm(e.length),this._recoveredStates=new Jm(e.length),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=(i,s)=>{const o=e[e.length-1];return this.getStartLineNumber(o)<=i&&this.getEndLineNumber(o)>=s};for(let i=0,s=this._startIndexes.length;i<s;i++){const o=this._startIndexes[i],l=this._endIndexes[i];if(o>Fr||l>Fr)throw new Error("startLineNumber or endLineNumber must not exceed "+Fr);for(;e.length>0&&!t(o,l);)e.pop();const g=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=o+((g&255)<<24),this._endIndexes[i]=l+((g&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&Fr}getEndLineNumber(e){return this._endIndexes[e]&Fr}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let s=0;s<this._types.length;s++)this._types[s]===e&&(this.setCollapsed(s,t),i=!0);return i}toRegion(e){return new DS(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&O0)>>>24)+((this._endIndexes[e]&O0)>>>16);return t===A0?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(i===0)return-1;for(;t<i;){const s=Math.floor((t+i)/2);e<this.getStartLineNumber(s)?i=s:t=s+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]=`[${LS[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&Fr,endLineNumber:this._endIndexes[e]&Fr,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,i=new Uint32Array(t),s=new Uint32Array(t);let o=[],l=!1;for(let k=0;k<t;k++){const H=e[k];i[k]=H.startLineNumber,s[k]=H.endLineNumber,o.push(H.type),H.type&&(l=!0)}l||(o=void 0);const g=new Ko(i,s,o);for(let k=0;k<t;k++)e[k].isCollapsed&&g.setCollapsed(k,!0),g.setSource(k,e[k].source);return g}static sanitizeAndMerge(e,t,i,s){i=i??Number.MAX_VALUE;const o=(ut,Lt)=>Array.isArray(ut)?kt=>kt<Lt?ut[kt]:void 0:kt=>kt<Lt?ut.toFoldRange(kt):void 0,l=o(e,e.length),g=o(t,t.length);let k=0,H=0,ee=l(0),ie=g(0);const fe=[];let Me,xe=0;const Qe=[];for(;ee||ie;){let ut;if(ie&&(!ee||ee.startLineNumber>=ie.startLineNumber))ee&&ee.startLineNumber===ie.startLineNumber?(ie.source===1?ut=ie:(ut=ee,ut.isCollapsed=ie.isCollapsed&&(ee.endLineNumber===ie.endLineNumber||!s?.startsInside(ee.startLineNumber+1,ee.endLineNumber+1)),ut.source=0),ee=l(++k)):(ut=ie,ie.isCollapsed&&ie.source===0&&(ut.source=2)),ie=g(++H);else{let Lt=H,kt=ie;for(;;){if(!kt||kt.startLineNumber>ee.endLineNumber){ut=ee;break}if(kt.source===1&&kt.endLineNumber>ee.endLineNumber)break;kt=g(++Lt)}ee=l(++k)}if(ut){for(;Me&&Me.endLineNumber<ut.startLineNumber;)Me=fe.pop();ut.endLineNumber>ut.startLineNumber&&ut.startLineNumber>xe&&ut.endLineNumber<=i&&(!Me||Me.endLineNumber>=ut.endLineNumber)&&(Qe.push(ut),xe=ut.startLineNumber,Me&&fe.push(Me),Me=ut)}}return Qe}}class DS{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}var F0=c(79475);class ES{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new zi.vl,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new Ko(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort((i,s)=>i.regionIndex-s.regionIndex);const t={};this._decorationProvider.changeDecorations(i=>{let s=0,o=-1,l=-1;const g=k=>{for(;s<k;){const H=this._regions.getEndLineNumber(s),ee=this._regions.isCollapsed(s);if(H<=o){const ie=this.regions.getSource(s)!==0;i.changeDecorationOptions(this._editorDecorationIds[s],this._decorationProvider.getDecorationOption(ee,H<=l,ie))}ee&&H>l&&(l=H),s++}};for(const k of e){const H=k.regionIndex,ee=this._editorDecorationIds[H];if(ee&&!t[ee]){t[ee]=!0,g(H);const ie=!this._regions.isCollapsed(H);this._regions.setCollapsed(H,ie),o=Math.max(o,this._regions.getEndLineNumber(H))}}g(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,i=s=>{for(const o of e)if(!(o.startLineNumber>s.endLineNumber||s.startLineNumber>o.endLineNumber))return!0;return!1};for(let s=0;s<this._regions.length;s++){const o=this._regions.toFoldRange(s);(o.source===0||!i(o))&&t.push(o)}this.updatePost(Ko.fromFoldRanges(t))}update(e,t){const i=this._currentFoldedOrManualRanges(t),s=Ko.sanitizeAndMerge(e,i,this._textModel.getLineCount(),t);this.updatePost(Ko.fromFoldRanges(s))}updatePost(e){const t=[];let i=-1;for(let s=0,o=e.length;s<o;s++){const l=e.getStartLineNumber(s),g=e.getEndLineNumber(s),k=e.isCollapsed(s),H=e.getSource(s)!==0,ee={startLineNumber:l,startColumn:this._textModel.getLineMaxColumn(l),endLineNumber:g,endColumn:this._textModel.getLineMaxColumn(g)+1};t.push({range:ee,options:this._decorationProvider.getDecorationOption(k,g<=i,H)}),k&&g>i&&(i=g)}this._decorationProvider.changeDecorations(s=>this._editorDecorationIds=s.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e){const t=[];for(let i=0,s=this._regions.length;i<s;i++){let o=this.regions.isCollapsed(i);const l=this.regions.getSource(i);if(o||l!==0){const g=this._regions.toFoldRange(i),k=this._textModel.getDecorationRange(this._editorDecorationIds[i]);k&&(o&&e?.startsInside(k.startLineNumber+1,k.endLineNumber)&&(o=!1),t.push({startLineNumber:k.startLineNumber,endLineNumber:k.endLineNumber,type:g.type,isCollapsed:o,source:l}))}}return t}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[],i=this._textModel.getLineCount();for(let s=0,o=e.length;s<o;s++){const l=e[s];if(l.startLineNumber>=l.endLineNumber||l.startLineNumber<1||l.endLineNumber>i)continue;const g=this._getLinesChecksum(l.startLineNumber+1,l.endLineNumber);t.push({startLineNumber:l.startLineNumber,endLineNumber:l.endLineNumber,isCollapsed:l.isCollapsed,source:l.source,checksum:g})}return t.length>0?t:void 0}applyMemento(e){if(!Array.isArray(e))return;const t=[],i=this._textModel.getLineCount();for(const o of e){if(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>i)continue;const l=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);(!o.checksum||l===o.checksum)&&t.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,type:void 0,isCollapsed:o.isCollapsed??!0,source:o.source??0})}const s=Ko.sanitizeAndMerge(this._regions,t,i);this.updatePost(Ko.fromFoldRanges(s))}_getLinesChecksum(e,t){return(0,F0.tW)(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const i=[];if(this._regions){let s=this._regions.findRange(e),o=1;for(;s>=0;){const l=this._regions.toRegion(s);(!t||t(l,o))&&i.push(l),o++,s=l.parentIndex}}return i}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const i=[],s=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const l=[];for(let g=s,k=this._regions.length;g<k;g++){const H=this._regions.toRegion(g);if(this._regions.getStartLineNumber(g)<o){for(;l.length>0&&!H.containedBy(l[l.length-1]);)l.pop();l.push(H),t(H,l.length)&&i.push(H)}else break}}else for(let l=s,g=this._regions.length;l<g;l++){const k=this._regions.toRegion(l);if(this._regions.getStartLineNumber(l)<o)(!t||t(k))&&i.push(k);else break}return i}}function qm(h,e,t){const i=[];for(const s of t){const o=h.getRegionAtLine(s);if(o){const l=!o.isCollapsed;if(i.push(o),e>1){const g=h.getRegionsInside(o,(k,H)=>k.isCollapsed!==l&&H<e);i.push(...g)}}}h.toggleCollapseState(i)}function yd(h,e,t=Number.MAX_VALUE,i){const s=[];if(i&&i.length>0)for(const o of i){const l=h.getRegionAtLine(o);if(l&&(l.isCollapsed!==e&&s.push(l),t>1)){const g=h.getRegionsInside(l,(k,H)=>k.isCollapsed!==e&&H<t);s.push(...g)}}else{const o=h.getRegionsInside(null,(l,g)=>l.isCollapsed!==e&&g<t);s.push(...o)}h.toggleCollapseState(s)}function W0(h,e,t,i){const s=[];for(const o of i){const l=h.getAllRegionsAtLine(o,(g,k)=>g.isCollapsed!==e&&k<=t);s.push(...l)}h.toggleCollapseState(s)}function xS(h,e,t){const i=[];for(const s of t){const o=h.getAllRegionsAtLine(s,l=>l.isCollapsed!==e);o.length>0&&i.push(o[0])}h.toggleCollapseState(i)}function kS(h,e,t,i){const s=(l,g)=>g===e&&l.isCollapsed!==t&&!i.some(k=>l.containsLine(k)),o=h.getRegionsInside(null,s);h.toggleCollapseState(o)}function B0(h,e,t){const i=[];for(const l of t){const g=h.getAllRegionsAtLine(l,void 0);g.length>0&&i.push(g[0])}const s=l=>i.every(g=>!g.containedBy(l)&&!l.containedBy(g))&&l.isCollapsed!==e,o=h.getRegionsInside(null,s);h.toggleCollapseState(o)}function ep(h,e,t){const i=h.textModel,s=h.regions,o=[];for(let l=s.length-1;l>=0;l--)if(t!==s.isCollapsed(l)){const g=s.getStartLineNumber(l);e.test(i.getLineContent(g))&&o.push(s.toRegion(l))}h.toggleCollapseState(o)}function tp(h,e,t){const i=h.regions,s=[];for(let o=i.length-1;o>=0;o--)t!==i.isCollapsed(o)&&e===i.getType(o)&&s.push(i.toRegion(o));h.toggleCollapseState(s)}function IS(h,e){let t=null;const i=e.getRegionAtLine(h);if(i!==null&&(t=i.startLineNumber,h===t)){const s=i.parentIndex;s!==-1?t=e.regions.getStartLineNumber(s):t=null}return t}function MS(h,e){let t=e.getRegionAtLine(h);if(t!==null&&t.startLineNumber===h){if(h!==t.startLineNumber)return t.startLineNumber;{const i=t.parentIndex;let s=0;for(i!==-1&&(s=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=s)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<h)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function NS(h,e){let t=e.getRegionAtLine(h);if(t!==null&&t.startLineNumber===h){const i=t.parentIndex;let s=0;if(i!==-1)s=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;s=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=s)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>h)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}var TS=c(41135);class RS{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new zi.vl,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||(0,TS.W)(t.text)[0]!==0))}updateHiddenRanges(){let e=!1;const t=[];let i=0,s=0,o=Number.MAX_VALUE,l=-1;const g=this._foldingModel.regions;for(;i<g.length;i++){if(!g.isCollapsed(i))continue;const k=g.getStartLineNumber(i)+1,H=g.getEndLineNumber(i);o<=k&&H<=l||(!e&&s<this._hiddenRanges.length&&this._hiddenRanges[s].startLineNumber===k&&this._hiddenRanges[s].endLineNumber===H?(t.push(this._hiddenRanges[s]),s++):(e=!0,t.push(new wt.Q(k,1,H,1))),o=k,l=H)}(this._hasLineChanges||e||s<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return H0(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1;const i=this._foldingModel.textModel;let s=null;const o=l=>((!s||!PS(l,s))&&(s=H0(this._hiddenRanges,l)),s?s.startLineNumber-1:null);for(let l=0,g=e.length;l<g;l++){let k=e[l];const H=o(k.startLineNumber);H&&(k=k.setStartPosition(H,i.getLineMaxColumn(H)),t=!0);const ee=o(k.endLineNumber);ee&&(k=k.setEndPosition(ee,i.getLineMaxColumn(ee)),t=!0),e[l]=k}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function PS(h,e){return h>=e.startLineNumber&&h<=e.endLineNumber}function H0(h,e){const t=(0,Th.hw)(h,i=>e<i.startLineNumber)-1;return t>=0&&h[t].endLineNumber>=e?h[t]:null}const AS=5e3,OS="indent";class ip{constructor(e,t,i){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=i,this.id=OS}dispose(){}compute(e){const t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,i=t&&!!t.offSide,s=t&&t.markers;return Promise.resolve(BS(this.editorModel,i,s,this.foldingRangesLimit))}}class FS{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>Fr||t>Fr)return;const s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){const t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);const i=new Uint32Array(this._length),s=new Uint32Array(this._length);for(let o=this._length-1,l=0;o>=0;o--,l++)i[l]=this._startIndexes[o],s[l]=this._endIndexes[o];return new Ko(i,s)}else{this._foldingRangesLimit.update(this._length,t);let i=0,s=this._indentOccurrences.length;for(let k=0;k<this._indentOccurrences.length;k++){const H=this._indentOccurrences[k];if(H){if(H+i>t){s=k;break}i+=H}}const o=e.getOptions().tabSize,l=new Uint32Array(t),g=new Uint32Array(t);for(let k=this._length-1,H=0;k>=0;k--){const ee=this._startIndexes[k],ie=e.getLineContent(ee),fe=(0,xa.G)(ie,o);(fe<s||fe===s&&i++<t)&&(l[H]=ee,g[H]=this._endIndexes[k],H++)}return new Ko(l,g)}}}const WS={limit:AS,update:()=>{}};function BS(h,e,t,i=WS){const s=h.getOptions().tabSize,o=new FS(i);let l;t&&(l=new RegExp(`(${t.start.source})|(?:${t.end.source})`));const g=[],k=h.getLineCount()+1;g.push({indent:-1,endAbove:k,line:k});for(let H=h.getLineCount();H>0;H--){const ee=h.getLineContent(H),ie=(0,xa.G)(ee,s);let fe=g[g.length-1];if(ie===-1){e&&(fe.endAbove=H);continue}let Me;if(l&&(Me=ee.match(l)))if(Me[1]){let xe=g.length-1;for(;xe>0&&g[xe].indent!==-2;)xe--;if(xe>0){g.length=xe+1,fe=g[xe],o.insertFirst(H,fe.line,ie),fe.line=H,fe.indent=ie,fe.endAbove=H;continue}}else{g.push({indent:-2,endAbove:H,line:H});continue}if(fe.indent>ie){do g.pop(),fe=g[g.length-1];while(fe.indent>ie);const xe=fe.endAbove-1;xe-H>=1&&o.insertFirst(H,xe,ie)}fe.indent===ie?fe.endAbove=H:g.push({indent:ie,endAbove:H,line:H})}return o.toIndentRanges(h)}const HS=(0,Tt.x1A)("editor.foldBackground",{light:(0,Tt.JO0)(Tt.seu,.3),dark:(0,Tt.JO0)(Tt.seu,.3),hcDark:null,hcLight:null},(0,Z.kg)("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);(0,Tt.x1A)("editor.foldPlaceholderForeground",{light:"#808080",dark:"#808080",hcDark:null,hcLight:null},(0,Z.kg)("collapsedTextColor","Color of the collapsed text after the first line of a folded range.")),(0,Tt.x1A)("editorGutter.foldingControlForeground",Tt.t4B,(0,Z.kg)("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));const Lg=(0,rs.pU)("folding-expanded",Dt.W.chevronDown,(0,Z.kg)("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),Dg=(0,rs.pU)("folding-collapsed",Dt.W.chevronRight,(0,Z.kg)("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),V0=(0,rs.pU)("folding-manual-collapsed",Dg,(0,Z.kg)("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),U0=(0,rs.pU)("folding-manual-expanded",Lg,(0,Z.kg)("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),np={color:(0,$i.Yf)(HS),position:1},Ld=(0,Z.kg)("linesCollapsed","Click to expand the range."),Eg=(0,Z.kg)("linesExpanded","Click to collapse the range.");class $o{static{this.COLLAPSED_VISUAL_DECORATION=Ki.kI.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:Ld,firstLineDecorationClassName:mn.L.asClassName(Dg)})}static{this.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Ki.kI.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:np,isWholeLine:!0,linesDecorationsTooltip:Ld,firstLineDecorationClassName:mn.L.asClassName(Dg)})}static{this.MANUALLY_COLLAPSED_VISUAL_DECORATION=Ki.kI.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:Ld,firstLineDecorationClassName:mn.L.asClassName(V0)})}static{this.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Ki.kI.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:np,isWholeLine:!0,linesDecorationsTooltip:Ld,firstLineDecorationClassName:mn.L.asClassName(V0)})}static{this.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=Ki.kI.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:Ld})}static{this.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=Ki.kI.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:np,isWholeLine:!0,linesDecorationsTooltip:Ld})}static{this.EXPANDED_VISUAL_DECORATION=Ki.kI.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+mn.L.asClassName(Lg),linesDecorationsTooltip:Eg})}static{this.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Ki.kI.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:mn.L.asClassName(Lg),linesDecorationsTooltip:Eg})}static{this.MANUALLY_EXPANDED_VISUAL_DECORATION=Ki.kI.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+mn.L.asClassName(U0),linesDecorationsTooltip:Eg})}static{this.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Ki.kI.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:mn.L.asClassName(U0),linesDecorationsTooltip:Eg})}static{this.NO_CONTROLS_EXPANDED_RANGE_DECORATION=Ki.kI.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0})}static{this.HIDDEN_RANGE_DECORATION=Ki.kI.register({description:"folding-hidden-range-decoration",stickiness:1})}constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,i){return t?$o.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?e?this.showFoldingHighlights?$o.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:$o.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:$o.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?i?this.showFoldingHighlights?$o.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:$o.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?$o.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:$o.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?i?$o.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:$o.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:i?$o.MANUALLY_EXPANDED_VISUAL_DECORATION:$o.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}}const VS={},US="syntax";class sp{constructor(e,t,i,s,o){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=i,this.foldingRangesLimit=s,this.fallbackRangeProvider=o,this.id=US,this.disposables=new vt.Cm,o&&this.disposables.add(o);for(const l of t)typeof l.onDidChange=="function"&&this.disposables.add(l.onDidChange(i))}compute(e){return zS(this.providers,this.editorModel,e).then(t=>t?KS(t,this.foldingRangesLimit):this.fallbackRangeProvider?.compute(e)??null)}dispose(){this.disposables.dispose()}}function zS(h,e,t){let i=null;const s=h.map((o,l)=>Promise.resolve(o.provideFoldingRanges(e,VS,t)).then(g=>{if(!t.isCancellationRequested&&Array.isArray(g)){Array.isArray(i)||(i=[]);const k=e.getLineCount();for(const H of g)H.start>0&&H.end>H.start&&H.end<=k&&i.push({start:H.start,end:H.end,rank:l,kind:H.kind})}},Ni.M_));return Promise.all(s).then(o=>i)}class jS{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,s){if(e>Fr||t>Fr)return;const o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=s,this._types[o]=i,this._length++,s<30&&(this._nestingLevelCounts[s]=(this._nestingLevelCounts[s]||0)+1)}toIndentRanges(){const e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let s=0;s<this._length;s++)t[s]=this._startIndexes[s],i[s]=this._endIndexes[s];return new Ko(t,i,this._types)}else{this._foldingRangesLimit.update(this._length,e);let t=0,i=this._nestingLevelCounts.length;for(let g=0;g<this._nestingLevelCounts.length;g++){const k=this._nestingLevelCounts[g];if(k){if(k+t>e){i=g;break}t+=k}}const s=new Uint32Array(e),o=new Uint32Array(e),l=[];for(let g=0,k=0;g<this._length;g++){const H=this._nestingLevels[g];(H<i||H===i&&t++<e)&&(s[k]=this._startIndexes[g],o[k]=this._endIndexes[g],l[k]=this._types[g],k++)}return new Ko(s,o,l)}}}function KS(h,e){const t=h.sort((l,g)=>{let k=l.start-g.start;return k===0&&(k=l.rank-g.rank),k}),i=new jS(e);let s;const o=[];for(const l of t)if(!s)s=l,i.add(l.start,l.end,l.kind&&l.kind.value,o.length);else if(l.start>s.start)if(l.end<=s.end)o.push(s),s=l,i.add(l.start,l.end,l.kind&&l.kind.value,o.length);else{if(l.start>s.end){do s=o.pop();while(s&&l.start>s.end);s&&o.push(s),s=l}i.add(l.start,l.end,l.kind&&l.kind.value,o.length)}return i.toIndentRanges()}var $S=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Oh=function(h,e){return function(t,i){e(t,i,h)}},Fh;const io=new et.N1("foldingEnabled",!1);let pl=class extends vt.jG{static{Fh=this}static{this.ID="editor.contrib.folding"}static get(e){return e.getContribution(Fh.ID)}static getFoldingRangeProviders(e,t){const i=e.foldingRangeProvider.ordered(t);return Fh._foldingRangeSelector?.(i,t)??i}constructor(e,t,i,s,o,l){super(),this.contextKeyService=t,this.languageConfigurationService=i,this.languageFeaturesService=l,this.localToDispose=this._register(new vt.Cm),this.editor=e,this._foldingLimitReporter=new z0(e);const g=this.editor.getOptions();this._isEnabled=g.get(43),this._useFoldingProviders=g.get(44)!=="indentation",this._unfoldOnClickAfterEndOfLine=g.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=g.get(46),this.updateDebounceInfo=o.for(l.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new $o(e),this.foldingDecorationProvider.showFoldingControls=g.get(111),this.foldingDecorationProvider.showFoldingHighlights=g.get(45),this.foldingEnabled=io.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(k=>{if(k.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),k.hasChanged(47)&&this.onModelChanged(),k.hasChanged(111)||k.hasChanged(45)){const H=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=H.get(111),this.foldingDecorationProvider.showFoldingHighlights=H.get(45),this.triggerFoldingModelChanged()}k.hasChanged(44)&&(this._useFoldingProviders=this.editor.getOptions().get(44)!=="indentation",this.onFoldingStrategyChanged()),k.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),k.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))})),this.onModelChanged()}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new ES(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new RS(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new hi.ve(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new hi.uC(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler?.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.rangeProvider?.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider?.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;const t=new ip(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){const i=Fh.getFoldingRangeProviders(this.languageFeaturesService,e);i.length>0&&(this.rangeProvider=new sp(e,i,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){this.hiddenRangeModel?.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new eo.W,i=this.getRangeProvider(e.textModel),s=this.foldingRegionPromise=(0,hi.SS)(o=>i.compute(o));return s.then(o=>{if(o&&s===this.foldingRegionPromise){let l;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const H=o.setCollapsedAllOfType(Et.lO.Imports.value,!0);H&&(l=ki.D.capture(this.editor),this._currentModelHasFoldedImports=H)}const g=this.editor.getSelections();e.update(o,GS(g)),l?.restore(this.editor);const k=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=k)}return e})}).then(void 0,e=>((0,Ni.dz)(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){const i=this.editor.getSelections();if(i&&i.length>0){const s=[];for(const o of i){const l=o.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(l)&&s.push(...t.getAllRegionsAtLine(l,g=>g.isCollapsed&&l>g.startLineNumber))}s.length&&(t.toggleCollapseState(s),this.reveal(i[0].getPosition()))}}}).then(void 0,Ni.dz)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:{const s=e.target.detail,o=e.target.element.offsetLeft;if(s.offsetX-o<4)return;i=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const s=this.editor.getModel();if(s&&t.startColumn===s.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const i=this.mouseDownInfo.lineNumber,s=this.mouseDownInfo.iconClicked,o=e.target.range;if(!o||o.startLineNumber!==i)return;if(s){if(e.target.type!==4)return}else{const g=this.editor.getModel();if(!g||o.startColumn!==g.getLineMaxColumn(i))return}const l=t.getRegionAtLine(i);if(l&&l.startLineNumber===i){const g=l.isCollapsed;if(s||g){const k=e.event.altKey;let H=[];if(k){const ee=fe=>!fe.containedBy(l)&&!l.containedBy(fe),ie=t.getRegionsInside(null,ee);for(const fe of ie)fe.isCollapsed&&H.push(fe);H.length===0&&(H=ie)}else{const ee=e.event.middleButton||e.event.shiftKey;if(ee)for(const ie of t.getRegionsInside(l))ie.isCollapsed===g&&H.push(ie);(g||!ee||H.length===0)&&H.push(l)}t.toggleCollapseState(H),this.reveal({lineNumber:i,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};pl=Fh=$S([Oh(1,et.fN),Oh(2,Us.JZ),Oh(3,As.Ot),Oh(4,Vs.ILanguageFeatureDebounceService),Oh(5,_e.ILanguageFeaturesService)],pl);class z0{constructor(e){this.editor=e,this._onDidChange=new zi.vl,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}class lo extends we.ks{runEditorCommand(e,t,i){const s=e.get(Us.JZ),o=pl.get(t);if(!o)return;const l=o.getFoldingModel();if(l)return this.reportTelemetry(e,t),l.then(g=>{if(g){this.invoke(o,g,t,i,s);const k=t.getSelection();k&&o.reveal(k.getStartPosition())}})}getSelectedLines(e){const t=e.getSelections();return t?t.map(i=>i.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(i=>i+1):this.getSelectedLines(t)}run(e,t){}}function GS(h){return!h||h.length===0?{startsInside:()=>!1}:{startsInside(e,t){for(const i of h){const s=i.startLineNumber;if(s>=e&&s<=t)return!0}return!1}}}function j0(h){if(!hn.b0(h)){if(!hn.Gv(h))return!1;const e=h;if(!hn.b0(e.levels)&&!hn.Et(e.levels)||!hn.b0(e.direction)&&!hn.Kg(e.direction)||!hn.b0(e.selectionLines)&&(!Array.isArray(e.selectionLines)||!e.selectionLines.every(hn.Et)))return!1}return!0}class QS extends lo{constructor(){super({id:"editor.unfold",label:Z.kg("unfoldAction.label","Unfold"),alias:"Unfold",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:j0,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,s){const o=s&&s.levels||1,l=this.getLineNumbers(s,i);s&&s.direction==="up"?W0(t,!1,o,l):yd(t,!1,o,l)}}class YS extends lo{constructor(){super({id:"editor.unfoldRecursively",label:Z.kg("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2142),weight:100}})}invoke(e,t,i,s){yd(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}class ZS extends lo{constructor(){super({id:"editor.fold",label:Z.kg("foldAction.label","Fold"),alias:"Fold",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:j0,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,s){const o=this.getLineNumbers(s,i),l=s&&s.levels,g=s&&s.direction;typeof l!="number"&&typeof g!="string"?xS(t,!0,o):g==="up"?W0(t,!0,l||1,o):yd(t,!0,l||1,o)}}class XS extends lo{constructor(){super({id:"editor.toggleFold",label:Z.kg("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2090),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);qm(t,1,s)}}class JS extends lo{constructor(){super({id:"editor.foldRecursively",label:Z.kg("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2140),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);yd(t,!0,Number.MAX_VALUE,s)}}class qS extends lo{constructor(){super({id:"editor.toggleFoldRecursively",label:Z.kg("toggleFoldRecursivelyAction.label","Toggle Fold Recursively"),alias:"Toggle Fold Recursively",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,3114),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);qm(t,Number.MAX_VALUE,s)}}class ew extends lo{constructor(){super({id:"editor.foldAllBlockComments",label:Z.kg("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2138),weight:100}})}invoke(e,t,i,s,o){if(t.regions.hasTypes())tp(t,Et.lO.Comment.value,!0);else{const l=i.getModel();if(!l)return;const g=o.getLanguageConfiguration(l.getLanguageId()).comments;if(g&&g.blockCommentStartToken){const k=new RegExp("^\\s*"+(0,Vi.bm)(g.blockCommentStartToken));ep(t,k,!0)}}}}class tw extends lo{constructor(){super({id:"editor.foldAllMarkerRegions",label:Z.kg("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2077),weight:100}})}invoke(e,t,i,s,o){if(t.regions.hasTypes())tp(t,Et.lO.Region.value,!0);else{const l=i.getModel();if(!l)return;const g=o.getLanguageConfiguration(l.getLanguageId()).foldingRules;if(g&&g.markers&&g.markers.start){const k=new RegExp(g.markers.start);ep(t,k,!0)}}}}class iw extends lo{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:Z.kg("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2078),weight:100}})}invoke(e,t,i,s,o){if(t.regions.hasTypes())tp(t,Et.lO.Region.value,!1);else{const l=i.getModel();if(!l)return;const g=o.getLanguageConfiguration(l.getLanguageId()).foldingRules;if(g&&g.markers&&g.markers.start){const k=new RegExp(g.markers.start);ep(t,k,!1)}}}}class nw extends lo{constructor(){super({id:"editor.foldAllExcept",label:Z.kg("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2136),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);B0(t,!0,s)}}class sw extends lo{constructor(){super({id:"editor.unfoldAllExcept",label:Z.kg("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2134),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);B0(t,!1,s)}}class ow extends lo{constructor(){super({id:"editor.foldAll",label:Z.kg("foldAllAction.label","Fold All"),alias:"Fold All",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2069),weight:100}})}invoke(e,t,i){yd(t,!0)}}class rw extends lo{constructor(){super({id:"editor.unfoldAll",label:Z.kg("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2088),weight:100}})}invoke(e,t,i){yd(t,!1)}}class Wh extends lo{static{this.ID_PREFIX="editor.foldLevel"}static{this.ID=e=>Wh.ID_PREFIX+e}getFoldingLevel(){return parseInt(this.id.substr(Wh.ID_PREFIX.length))}invoke(e,t,i){kS(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}}class aw extends lo{constructor(){super({id:"editor.gotoParentFold",label:Z.kg("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const o=IS(s[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class lw extends lo{constructor(){super({id:"editor.gotoPreviousFold",label:Z.kg("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const o=MS(s[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class cw extends lo{constructor(){super({id:"editor.gotoNextFold",label:Z.kg("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const o=NS(s[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class dw extends lo{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:Z.kg("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2135),weight:100}})}invoke(e,t,i){const s=[],o=i.getSelections();if(o){for(const l of o){let g=l.endLineNumber;l.endColumn===1&&--g,g>l.startLineNumber&&(s.push({startLineNumber:l.startLineNumber,endLineNumber:g,type:void 0,isCollapsed:!0,source:1}),i.setSelection({startLineNumber:l.startLineNumber,startColumn:1,endLineNumber:l.startLineNumber,endColumn:1}))}if(s.length>0){s.sort((g,k)=>g.startLineNumber-k.startLineNumber);const l=Ko.sanitizeAndMerge(t.regions,s,i.getModel()?.getLineCount());t.updatePost(Ko.fromFoldRanges(l))}}}}class hw extends lo{constructor(){super({id:"editor.removeManualFoldingRanges",label:Z.kg("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2137),weight:100}})}invoke(e,t,i){const s=i.getSelections();if(s){const o=[];for(const l of s){const{startLineNumber:g,endLineNumber:k}=l;o.push(k>=g?{startLineNumber:g,endLineNumber:k}:{endLineNumber:k,startLineNumber:g})}t.removeManualRanges(o),e.triggerFoldingModelChanged()}}}(0,we.HW)(pl.ID,pl,0),(0,we.Fl)(QS),(0,we.Fl)(YS),(0,we.Fl)(ZS),(0,we.Fl)(JS),(0,we.Fl)(qS),(0,we.Fl)(ow),(0,we.Fl)(rw),(0,we.Fl)(ew),(0,we.Fl)(tw),(0,we.Fl)(iw),(0,we.Fl)(nw),(0,we.Fl)(sw),(0,we.Fl)(XS),(0,we.Fl)(aw),(0,we.Fl)(lw),(0,we.Fl)(cw),(0,we.Fl)(dw),(0,we.Fl)(hw);for(let h=1;h<=7;h++)(0,we.xX)(new Wh({id:Wh.ID(h),label:Z.kg("foldLevelAction.label","Fold Level {0}",h),alias:`Fold Level ${h}`,precondition:io,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2048|21+h),weight:100}}));Di.w.registerCommand("_executeFoldingRangeProvider",async function(h,...e){const[t]=e;if(!(t instanceof Ot.r))throw(0,Ni.Qg)();const i=h.get(_e.ILanguageFeaturesService),s=h.get(Zs.IModelService).getModel(t);if(!s)throw(0,Ni.Qg)();const o=h.get(pt.pG);if(!o.getValue("editor.folding",{resource:t}))return[];const l=h.get(Us.JZ),g=o.getValue("editor.foldingStrategy",{resource:t}),k={get limit(){return o.getValue("editor.foldingMaximumRegions",{resource:t})},update:(Me,xe)=>{}},H=new ip(s,l,k);let ee=H;if(g!=="indentation"){const Me=pl.getFoldingRangeProviders(i,s);Me.length&&(ee=new sp(s,Me,()=>{},k,H))}const ie=await ee.compute(Fi.XO.None),fe=[];try{if(ie)for(let Me=0;Me<ie.length;Me++){const xe=ie.getType(Me);fe.push({start:ie.getStartLineNumber(Me),end:ie.getEndLineNumber(Me),kind:xe?Et.lO.fromValue(xe):void 0})}return fe}finally{ee.dispose()}});var Bh=c(75942);class uw extends we.ks{constructor(){super({id:"editor.action.fontZoomIn",label:Z.kg("EditorFontZoomIn.label","Increase Editor Font Size"),alias:"Increase Editor Font Size",precondition:void 0})}run(e,t){Bh.D.setZoomLevel(Bh.D.getZoomLevel()+1)}}class gw extends we.ks{constructor(){super({id:"editor.action.fontZoomOut",label:Z.kg("EditorFontZoomOut.label","Decrease Editor Font Size"),alias:"Decrease Editor Font Size",precondition:void 0})}run(e,t){Bh.D.setZoomLevel(Bh.D.getZoomLevel()-1)}}class fw extends we.ks{constructor(){super({id:"editor.action.fontZoomReset",label:Z.kg("EditorFontZoomReset.label","Reset Editor Font Size"),alias:"Reset Editor Font Size",precondition:void 0})}run(e,t){Bh.D.setZoomLevel(0)}}(0,we.Fl)(uw),(0,we.Fl)(gw),(0,we.Fl)(fw);var xg=c(79821),kg=c(2352),mw=c(52229),Ig=c(13656),K0=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Hh=function(h,e){return function(t,i){e(t,i,h)}};let Mg=class{static{this.ID="editor.contrib.autoFormat"}constructor(e,t,i,s){this._editor=e,this._languageFeaturesService=t,this._workerService=i,this._accessibilitySignalService=s,this._disposables=new vt.Cm,this._sessionDisposables=new vt.Cm,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(o=>{o.hasChanged(56)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const i=new xg.y;for(const s of t.autoFormatTriggerCharacters)i.add(s.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(s=>{const o=s.charCodeAt(s.length-1);i.has(o)&&this._trigger(String.fromCharCode(o))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),i=this._editor.getPosition(),s=new Fi.Qi,o=this._editor.onDidChangeModelContent(l=>{if(l.isFlush){s.cancel(),o.dispose();return}for(let g=0,k=l.changes.length;g<k;g++)if(l.changes[g].range.endLineNumber<=i.lineNumber){s.cancel(),o.dispose();return}});(0,kg._V)(this._workerService,this._languageFeaturesService,t,i,e,t.getFormattingOptions(),s.token).then(l=>{s.token.isCancellationRequested||(0,Xi.EI)(l)&&(this._accessibilitySignalService.playSignal(Ig.Rh.format,{userGesture:!1}),mw.c.execute(this._editor,l,!0))}).finally(()=>{o.dispose()})}};Mg=K0([Hh(1,_e.ILanguageFeaturesService),Hh(2,ir.IEditorWorkerService),Hh(3,Ig.Nt)],Mg);let Ng=class{static{this.ID="editor.contrib.formatOnPaste"}constructor(e,t,i){this.editor=e,this._languageFeaturesService=t,this._instantiationService=i,this._callOnDispose=new vt.Cm,this._callOnModel=new vt.Cm,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(kg.jX,this.editor,e,2,Bs.ke.None,Fi.XO.None,!1).catch(Ni.dz))}};Ng=K0([Hh(1,_e.ILanguageFeaturesService),Hh(2,Ri._Y)],Ng);class pw extends we.ks{constructor(){super({id:"editor.action.formatDocument",label:Z.kg("formatDocument.label","Format Document"),alias:"Format Document",precondition:et.M$.and(ke.R.notInCompositeEditor,ke.R.writable,ke.R.hasDocumentFormattingProvider),kbOpts:{kbExpr:ke.R.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}async run(e,t){if(t.hasModel()){const i=e.get(Ri._Y);await e.get(Bs.N8).showWhile(i.invokeFunction(kg.vg,t,1,Bs.ke.None,Fi.XO.None,!0),250)}}}class _w extends we.ks{constructor(){super({id:"editor.action.formatSelection",label:Z.kg("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:et.M$.and(ke.R.writable,ke.R.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2084),weight:100},contextMenuOpts:{when:ke.R.hasNonEmptySelection,group:"1_modification",order:1.31}})}async run(e,t){if(!t.hasModel())return;const i=e.get(Ri._Y),s=t.getModel(),o=t.getSelections().map(g=>g.isEmpty()?new wt.Q(g.startLineNumber,1,g.startLineNumber,s.getLineMaxColumn(g.startLineNumber)):g);await e.get(Bs.N8).showWhile(i.invokeFunction(kg.jX,t,o,1,Bs.ke.None,Fi.XO.None,!0),250)}}(0,we.HW)(Mg.ID,Mg,2),(0,we.HW)(Ng.ID,Ng,2),(0,we.Fl)(pw),(0,we.Fl)(_w),Di.w.registerCommand("editor.action.format",async h=>{const e=h.get(Xt.T).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=h.get(Di.d);e.getSelection().isEmpty()?await t.executeCommand("editor.action.formatDocument"):await t.executeCommand("editor.action.formatSelection")});var vw=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},op=function(h,e){return function(t,i){e(t,i,h)}};class Dd{remove(){this.parent?.children.delete(this.id)}static findId(e,t){let i;typeof e=="string"?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,t.children.get(i)!==void 0&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let s=i;for(let o=0;t.children.get(s)!==void 0;o++)s=`${i}_${o}`;return s}static empty(e){return e.children.size===0}}class rp extends Dd{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class $0 extends Dd{constructor(e,t,i,s){super(),this.id=e,this.parent=t,this.label=i,this.order=s,this.children=new Map}}class Ba extends Dd{static create(e,t,i){const s=new Fi.Qi(i),o=new Ba(t.uri),l=e.ordered(t),g=l.map((H,ee)=>{const ie=Dd.findId(`provider_${ee}`,o),fe=new $0(ie,o,H.displayName??"Unknown Outline Provider",ee);return Promise.resolve(H.provideDocumentSymbols(t,s.token)).then(Me=>{for(const xe of Me||[])Ba._makeOutlineElement(xe,fe);return fe},Me=>((0,Ni.M_)(Me),fe)).then(Me=>{Dd.empty(Me)?Me.remove():o._groups.set(ie,Me)})}),k=e.onDidChange(()=>{const H=e.ordered(t);(0,Xi.aI)(H,l)||s.cancel()});return Promise.all(g).then(()=>s.token.isCancellationRequested&&!i.isCancellationRequested?Ba.create(e,t,i):o._compact()).finally(()=>{s.dispose(),k.dispose(),s.dispose()})}static _makeOutlineElement(e,t){const i=Dd.findId(e,t),s=new rp(i,t,e);if(e.children)for(const o of e.children)Ba._makeOutlineElement(o,s);t.children.set(s.id,s)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,i]of this._groups)i.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=os.f.first(this._groups.values());for(const[,i]of t.children)i.parent=this,this.children.set(i.id,i)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof rp?e.push(t.symbol):e.push(...os.f.map(t.children.values(),i=>i.symbol));return e.sort((t,i)=>wt.Q.compareRangesUsingStarts(t.range,i.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return Ba._flattenDocumentSymbols(t,e,""),t.sort((i,s)=>ui.y.compare(wt.Q.getStartPosition(i.range),wt.Q.getStartPosition(s.range))||ui.y.compare(wt.Q.getEndPosition(s.range),wt.Q.getEndPosition(i.range)))}static _flattenDocumentSymbols(e,t,i){for(const s of t)e.push({kind:s.kind,tags:s.tags,name:s.name,detail:s.detail,containerName:s.containerName||i,range:s.range,selectionRange:s.selectionRange,children:void 0}),s.children&&Ba._flattenDocumentSymbols(e,s.children,s.name)}}const Vh=(0,Ri.u1)("IOutlineModelService");let ap=class{constructor(e,t,i){this._languageFeaturesService=e,this._disposables=new vt.Cm,this._cache=new Ai.qK(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(i.onModelRemoved(s=>{this._cache.delete(s.id)}))}dispose(){this._disposables.dispose()}async getOrCreate(e,t){const i=this._languageFeaturesService.documentSymbolProvider,s=i.ordered(e);let o=this._cache.get(e.id);if(!o||o.versionId!==e.getVersionId()||!(0,Xi.aI)(o.provider,s)){const g=new Fi.Qi;o={versionId:e.getVersionId(),provider:s,promiseCnt:0,source:g,promise:Ba.create(i,e,g.token),model:void 0},this._cache.set(e.id,o);const k=Date.now();o.promise.then(H=>{o.model=H,this._debounceInformation.update(e,Date.now()-k)}).catch(H=>{this._cache.delete(e.id)})}if(o.model)return o.model;o.promiseCnt+=1;const l=t.onCancellationRequested(()=>{--o.promiseCnt===0&&(o.source.cancel(),this._cache.delete(e.id))});try{return await o.promise}finally{l.dispose()}}};ap=vw([op(0,_e.ILanguageFeaturesService),op(1,Vs.ILanguageFeatureDebounceService),op(2,Zs.IModelService)],ap),(0,er.v)(Vh,ap,1),Di.w.registerCommand("_executeDocumentSymbolProvider",async function(h,...e){const[t]=e;(0,hn.j)(Ot.r.isUri(t));const i=h.get(Vh),o=await h.get(sr.ITextModelService).createModelReference(t);try{return(await i.getOrCreate(o.object.textEditorModel,Fi.XO.None)).getTopLevelSymbols()}finally{o.dispose()}});var G0=c(70679),Cw=c(23418);class mo extends vt.jG{static{this.inlineSuggestionVisible=new et.N1("inlineSuggestionVisible",!1,(0,Z.kg)("inlineSuggestionVisible","Whether an inline suggestion is visible"))}static{this.inlineSuggestionHasIndentation=new et.N1("inlineSuggestionHasIndentation",!1,(0,Z.kg)("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"))}static{this.inlineSuggestionHasIndentationLessThanTabSize=new et.N1("inlineSuggestionHasIndentationLessThanTabSize",!0,(0,Z.kg)("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"))}static{this.suppressSuggestions=new et.N1("inlineSuggestionSuppressSuggestions",void 0,(0,Z.kg)("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"))}constructor(e,t){super(),this.contextKeyService=e,this.model=t,this.inlineCompletionVisible=mo.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=mo.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=mo.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=mo.suppressSuggestions.bindTo(this.contextKeyService),this._register((0,si.fm)(i=>{const o=this.model.read(i)?.state.read(i),l=!!o?.inlineCompletion&&o?.primaryGhostText!==void 0&&!o?.primaryGhostText.isEmpty();this.inlineCompletionVisible.set(l),o?.primaryGhostText&&o?.inlineCompletion&&this.suppressSuggestions.set(o.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register((0,si.fm)(i=>{const s=this.model.read(i);let o=!1,l=!0;const g=s?.primaryGhostText.read(i);if(s?.selectedSuggestItem&&g&&g.parts.length>0){const{column:k,lines:H}=g.parts[0],ee=H[0],ie=s.textModel.getLineIndentColumn(g.lineNumber);if(k<=ie){let Me=(0,Vi.HG)(ee);Me===-1&&(Me=ee.length-1),o=Me>0;const xe=s.textModel.getOptions().tabSize;l=Cw.A.visibleColumnFromColumn(ee,Me+1,xe)<xe}}this.inlineCompletionSuggestsIndentation.set(o),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(l)}))}}function bw(h){const e=new vt.Cm,t=e.add((0,Se.jh)());return e.add((0,si.fm)(i=>{t.setStyle(h.read(i))})),e}var Q0=c(80129),rr=c(49349),Y0=c(13716),Z0=c(36612),X0=c(81275),J0=c(14216),Uh=c(19154),Tg=c(62681),Wr=c(86968);class zh{constructor(e,t){this.lineNumber=e,this.parts=t}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((t,i)=>t.equals(e.parts[i]))}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],i=e.substr(0,t.column-1);return new Wr.mF([...this.parts.map(o=>new Wr.WR(wt.Q.fromPositions(new ui.y(1,o.column)),o.lines.join(`
`)))]).applyToString(i).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}get lineCount(){return 1+this.parts.reduce((e,t)=>e+t.lines.length-1,0)}}class Rg{constructor(e,t,i){this.column=e,this.text=t,this.preview=i,this.lines=(0,Vi.uz)(this.text)}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((t,i)=>t===e.lines[i])}}class lp{constructor(e,t,i,s=0){this.lineNumber=e,this.columnRange=t,this.text=i,this.additionalReservedLineCount=s,this.parts=[new Rg(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=(0,Vi.uz)(this.text)}renderForScreenReader(e){return this.newLines.join(`
`)}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every(e=>e.lines.length===0)}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((t,i)=>t===e.newLines[i])&&this.additionalReservedLineCount===e.additionalReservedLineCount}}function q0(h,e){return(0,Xi.aI)(h,e,eC)}function eC(h,e){return h===e?!0:!h||!e?!1:h instanceof zh&&e instanceof zh||h instanceof lp&&e instanceof lp?h.equals(e):!1}const Sw=[];function ww(){return Sw}class tC{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new Ni.D7(`startColumn ${e} cannot be after endColumnExclusive ${t}`)}toRange(e){return new wt.Q(e,this.startColumn,e,this.endColumnExclusive)}equals(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}}function iC(h,e){const t=new vt.Cm,i=h.createDecorationsCollection();return t.add((0,si.zL)({debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const o=e.read(s);i.set(o)})),t.add({dispose:()=>{i.clear()}}),t}function yw(h,e){return new ui.y(h.lineNumber+e.lineNumber-1,e.lineNumber===1?h.column+e.column-1:e.column)}function nC(h,e){return new ui.y(h.lineNumber-e.lineNumber+1,h.lineNumber-e.lineNumber===0?h.column-e.column+1:h.column)}var Lw=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Dw=function(h,e){return function(t,i){e(t,i,h)}};const sC="ghost-text";let cp=class extends vt.jG{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=(0,si.FY)(this,!1),this.currentTextModel=(0,si.y0)(this,this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=(0,si.un)(this,s=>{if(this.isDisposed.read(s))return;const o=this.currentTextModel.read(s);if(o!==this.model.targetTextModel.read(s))return;const l=this.model.ghostText.read(s);if(!l)return;const g=l instanceof lp?l.columnRange:void 0,k=[],H=[];function ee(Qe,ut){if(H.length>0){const Lt=H[H.length-1];ut&&Lt.decorations.push(new Uh.d(Lt.content.length+1,Lt.content.length+1+Qe[0].length,ut,0)),Lt.content+=Qe[0],Qe=Qe.slice(1)}for(const Lt of Qe)H.push({content:Lt,decorations:ut?[new Uh.d(1,Lt.length+1,ut,0)]:[]})}const ie=o.getLineContent(l.lineNumber);let fe,Me=0;for(const Qe of l.parts){let ut=Qe.lines;fe===void 0?(k.push({column:Qe.column,text:ut[0],preview:Qe.preview}),ut=ut.slice(1)):ee([ie.substring(Me,Qe.column-1)],void 0),ut.length>0&&(ee(ut,sC),fe===void 0&&Qe.column<=ie.length&&(fe=Qe.column)),Me=Qe.column-1}fe!==void 0&&ee([ie.substring(Me)],void 0);const xe=fe!==void 0?new tC(fe,ie.length+1):void 0;return{replacedRange:g,inlineTexts:k,additionalLines:H,hiddenRange:xe,lineNumber:l.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(s),targetTextModel:o}}),this.decorations=(0,si.un)(this,s=>{const o=this.uiState.read(s);if(!o)return[];const l=[];o.replacedRange&&l.push({range:o.replacedRange.toRange(o.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),o.hiddenRange&&l.push({range:o.hiddenRange.toRange(o.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(const g of o.inlineTexts)l.push({range:wt.Q.fromPositions(new ui.y(o.lineNumber,g.column)),options:{description:sC,after:{content:g.text,inlineClassName:g.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:In.VW.Left},showIfCollapsed:!0}});return l}),this.additionalLinesWidget=this._register(new Ew(this.editor,this.languageService.languageIdCodec,(0,si.un)(s=>{const o=this.uiState.read(s);return o?{lineNumber:o.lineNumber,additionalLines:o.additionalLines,minReservedLineCount:o.additionalReservedLineCount,targetTextModel:o.targetTextModel}:void 0}))),this._register((0,vt.s)(()=>{this.isDisposed.set(!0,void 0)})),this._register(iC(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};cp=Lw([Dw(2,nr.L)],cp);class Ew extends vt.jG{get viewZoneId(){return this._viewZoneId}constructor(e,t,i){super(),this.editor=e,this.languageIdCodec=t,this.lines=i,this._viewZoneId=void 0,this.editorOptionsChanged=(0,si.yQ)("editorOptionChanged",zi.Jh.filter(this.editor.onDidChangeConfiguration,s=>s.hasChanged(33)||s.hasChanged(118)||s.hasChanged(100)||s.hasChanged(95)||s.hasChanged(51)||s.hasChanged(50)||s.hasChanged(67))),this._register((0,si.fm)(s=>{const o=this.lines.read(s);this.editorOptionsChanged.read(s),o?this.updateLines(o.lineNumber,o.additionalLines,o.minReservedLineCount):this.clear()}))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,i){const s=this.editor.getModel();if(!s)return;const{tabSize:o}=s.getOptions();this.editor.changeViewZones(l=>{this._viewZoneId&&(l.removeZone(this._viewZoneId),this._viewZoneId=void 0);const g=Math.max(t.length,i);if(g>0){const k=document.createElement("div");xw(k,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=l.addZone({afterLineNumber:e,heightInLines:g,domNode:k,afterColumnAffinity:1})}})}}function xw(h,e,t,i,s){const o=i.get(33),l=i.get(118),g="none",k=i.get(95),H=i.get(51),ee=i.get(50),ie=i.get(67),fe=new X0.fe(1e4);fe.appendString('<div class="suggest-preview-text">');for(let Qe=0,ut=t.length;Qe<ut;Qe++){const Lt=t[Qe],kt=Lt.content;fe.appendString('<div class="view-line'),fe.appendString('" style="top:'),fe.appendString(String(Qe*ie)),fe.appendString('px;width:1000000px;">');const ni=Vi.aC(kt),gi=Vi.E_(kt),pi=J0.f.createEmpty(kt,s);(0,Tg.UW)(new Tg.zL(ee.isMonospace&&!o,ee.canUseHalfwidthRightwardsArrow,kt,!1,ni,gi,0,pi,Lt.decorations,e,0,ee.spaceWidth,ee.middotWidth,ee.wsmiddotWidth,l,g,k,H!==ns.Bc.OFF,null),fe),fe.appendString("</div>")}fe.appendString("</div>"),(0,Z0.M)(h,ee);const Me=fe.build(),xe=oC?oC.createHTML(Me):Me;h.innerHTML=xe}const oC=(0,Y0.H)("editorGhostText",{createHTML:h=>h});var hc=c(37486),Pg=c(43228),kw=c(6105),Iw=c(84715),_l=c(78386),Mw=c(6006),Nw=c(67083),Tw=c(69977);function Rw(h,e){const t=new Nw.Mg,i=new Iw.Z(t,H=>e.getLanguageConfiguration(H)),s=new Tw.tk(new Pw([h]),i),o=(0,Mw.T)(s,[],void 0,!0);let l="";const g=h.getLineContent();function k(H,ee){if(H.kind===2)if(k(H.openingBracket,ee),ee=(0,_l.QB)(ee,H.openingBracket.length),H.child&&(k(H.child,ee),ee=(0,_l.QB)(ee,H.child.length)),H.closingBracket)k(H.closingBracket,ee),ee=(0,_l.QB)(ee,H.closingBracket.length);else{const fe=i.getSingleLanguageBracketTokens(H.openingBracket.languageId).findClosingTokenText(H.openingBracket.bracketIds);l+=fe}else if(H.kind!==3){if(H.kind===0||H.kind===1)l+=g.substring((0,_l.sS)(ee),(0,_l.sS)((0,_l.QB)(ee,H.length)));else if(H.kind===4)for(const ie of H.children)k(ie,ee),ee=(0,_l.QB)(ee,ie.length)}}return k(o,_l.Vp),l}class Pw{constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}}async function rC(h,e,t,i,s=Fi.XO.None,o){const l=e instanceof ui.y?Fw(e,t):e,g=h.all(t),k=new Ai.db;for(const Lt of g)Lt.groupId&&k.add(Lt.groupId,Lt);function H(Lt){if(!Lt.yieldsToGroupIds)return[];const kt=[];for(const ni of Lt.yieldsToGroupIds||[]){const gi=k.get(ni);for(const pi of gi)kt.push(pi)}return kt}const ee=new Map,ie=new Set;function fe(Lt,kt){if(kt=[...kt,Lt],ie.has(Lt))return kt;ie.add(Lt);try{const ni=H(Lt);for(const gi of ni){const pi=fe(gi,kt);if(pi)return pi}}finally{ie.delete(Lt)}}function Me(Lt){const kt=ee.get(Lt);if(kt)return kt;const ni=fe(Lt,[]);ni&&(0,Ni.M_)(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${ni.map(pi=>pi.toString?pi.toString():""+pi).join(" -> ")}`));const gi=new hi.Zv;return ee.set(Lt,gi.p),(async()=>{if(!ni){const pi=H(Lt);for(const pn of pi){const ln=await Me(pn);if(ln&&ln.items.length>0)return}}try{return e instanceof ui.y?await Lt.provideInlineCompletions(t,e,i,s):await Lt.provideInlineEdits?.(t,e,i,s)}catch(pi){(0,Ni.M_)(pi);return}})().then(pi=>gi.complete(pi),pi=>gi.error(pi)),gi.p}const xe=await Promise.all(g.map(async Lt=>({provider:Lt,completions:await Me(Lt)}))),Qe=new Map,ut=[];for(const Lt of xe){const kt=Lt.completions;if(!kt)continue;const ni=new Ow(kt,Lt.provider);ut.push(ni);for(const gi of kt.items){const pi=Ag.from(gi,ni,l,t,o);Qe.set(pi.hash(),pi)}}return new Aw(Array.from(Qe.values()),new Set(Qe.keys()),ut)}class Aw{constructor(e,t,i){this.completions=e,this.hashs=t,this.providerResults=i}has(e){return this.hashs.has(e.hash())}dispose(){for(const e of this.providerResults)e.removeRef()}}class Ow{constructor(e,t){this.inlineCompletions=e,this.provider=t,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)}}class Ag{static from(e,t,i,s,o){let l,g,k=e.range?wt.Q.lift(e.range):i;if(typeof e.insertText=="string"){if(l=e.insertText,o&&e.completeBracketPairs){l=aC(l,k.getStartPosition(),s,o);const H=l.length-e.insertText.length;H!==0&&(k=new wt.Q(k.startLineNumber,k.startColumn,k.endLineNumber,k.endColumn+H))}g=void 0}else if("snippet"in e.insertText){const H=e.insertText.snippet.length;if(o&&e.completeBracketPairs){e.insertText.snippet=aC(e.insertText.snippet,k.getStartPosition(),s,o);const ie=e.insertText.snippet.length-H;ie!==0&&(k=new wt.Q(k.startLineNumber,k.startColumn,k.endLineNumber,k.endColumn+ie))}const ee=new ys().parse(e.insertText.snippet);ee.children.length===1&&ee.children[0]instanceof fi?(l=ee.children[0].value,g=void 0):(l=ee.toString(),g={snippet:e.insertText.snippet,range:k})}else(0,kw.xb)(e.insertText);return new Ag(l,e.command,k,l,g,e.additionalTextEdits||ww(),e,t)}constructor(e,t,i,s,o,l,g,k){this.filterText=e,this.command=t,this.range=i,this.insertText=s,this.snippetInfo=o,this.additionalTextEdits=l,this.sourceInlineCompletion=g,this.source=k,e=e.replace(/\r\n|\r/g,`
`),s=e.replace(/\r\n|\r/g,`
`)}withRange(e){return new Ag(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}toSingleTextEdit(){return new Wr.WR(this.range,this.insertText)}}function Fw(h,e){const t=e.getWordAtPosition(h),i=e.getLineMaxColumn(h.lineNumber);return t?new wt.Q(h.lineNumber,t.startColumn,h.lineNumber,i):wt.Q.fromPositions(h,h.with(void 0,i))}function aC(h,e,t,i){const o=t.getLineContent(e.lineNumber).substring(0,e.column-1)+h,g=t.tokenization.tokenizeLineWithEdit(e,o.length-(e.column-1),h)?.sliceAndInflate(e.column-1,o.length,0);return g?Rw(g,i):h}var Ww=c(96835);function uc(h,e,t){const i=t?h.range.intersectRanges(t):h.range;if(!i)return h;const s=e.getValueInRange(i,1),o=(0,Vi.Qp)(s,h.text),l=Pg.W.ofText(s.substring(0,o)).addToPosition(h.range.getStartPosition()),g=h.text.substring(o),k=wt.Q.fromPositions(l,h.range.getEndPosition());return new Wr.WR(k,g)}function lC(h,e){return h.text.startsWith(e.text)&&Bw(h.range,e.range)}function cC(h,e,t,i,s=0){let o=uc(h,e);if(o.range.endLineNumber!==o.range.startLineNumber)return;const l=e.getLineContent(o.range.startLineNumber),g=(0,Vi.UU)(l).length;if(o.range.startColumn-1<=g){const xe=(0,Vi.UU)(o.text).length,Qe=l.substring(o.range.startColumn-1,g),[ut,Lt]=[o.range.getStartPosition(),o.range.getEndPosition()],kt=ut.column+Qe.length<=Lt.column?ut.delta(0,Qe.length):Lt,ni=wt.Q.fromPositions(kt,Lt),gi=o.text.startsWith(Qe)?o.text.substring(Qe.length):o.text.substring(xe);o=new Wr.WR(ni,gi)}const H=e.getValueInRange(o.range),ee=Hw(H,o.text);if(!ee)return;const ie=o.range.startLineNumber,fe=new Array;if(t==="prefix"){const xe=ee.filter(Qe=>Qe.originalLength===0);if(xe.length>1||xe.length===1&&xe[0].originalStart!==H.length)return}const Me=o.text.length-s;for(const xe of ee){const Qe=o.range.startColumn+xe.originalStart+xe.originalLength;if(t==="subwordSmart"&&i&&i.lineNumber===o.range.startLineNumber&&Qe<i.column||xe.originalLength>0)return;if(xe.modifiedLength===0)continue;const ut=xe.modifiedStart+xe.modifiedLength,Lt=Math.max(xe.modifiedStart,Math.min(ut,Me)),kt=o.text.substring(xe.modifiedStart,Lt),ni=o.text.substring(Lt,Math.max(xe.modifiedStart,ut));kt.length>0&&fe.push(new Rg(Qe,kt,!1)),ni.length>0&&fe.push(new Rg(Qe,ni,!0))}return new zh(ie,fe)}function Bw(h,e){return e.getStartPosition().equals(h.getStartPosition())&&e.getEndPosition().isBeforeOrEqual(h.getEndPosition())}let Og;function Hw(h,e){if(Og?.originalValue===h&&Og?.newValue===e)return Og?.changes;{let t=hC(h,e,!0);if(t){const i=dC(t);if(i>0){const s=hC(h,e,!1);s&&dC(s)<i&&(t=s)}}return Og={originalValue:h,newValue:e,changes:t},t}}function dC(h){let e=0;for(const t of h)e+=t.originalLength;return e}function hC(h,e,t){if(h.length>5e3||e.length>5e3)return;function i(H){let ee=0;for(let ie=0,fe=H.length;ie<fe;ie++){const Me=H.charCodeAt(ie);Me>ee&&(ee=Me)}return ee}const s=Math.max(i(h),i(e));function o(H){if(H<0)throw new Error("unexpected");return s+H+1}function l(H){let ee=0,ie=0;const fe=new Int32Array(H.length);for(let Me=0,xe=H.length;Me<xe;Me++)if(t&&H[Me]==="("){const Qe=ie*100+ee;fe[Me]=o(2*Qe),ee++}else if(t&&H[Me]===")"){ee=Math.max(ee-1,0);const Qe=ie*100+ee;fe[Me]=o(2*Qe+1),ee===0&&ie++}else fe[Me]=H.charCodeAt(Me);return fe}const g=l(h),k=l(e);return new Ww.uP({getElements:()=>g},{getElements:()=>k}).ComputeDiff(!1).changes}var Vw=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},uC=function(h,e){return function(t,i){e(t,i,h)}};let dp=class extends vt.jG{constructor(e,t,i,s,o){super(),this.textModel=e,this.versionId=t,this._debounceValue=i,this.languageFeaturesService=s,this.languageConfigurationService=o,this._updateOperation=this._register(new vt.HE),this.inlineCompletions=(0,si.X2)("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=(0,si.X2)("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent(()=>{this._updateOperation.clear()}))}fetch(e,t,i){const s=new zw(e,t,this.textModel.getVersionId()),o=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(this._updateOperation.value?.request.satisfies(s))return this._updateOperation.value.promise;if(o.get()?.request.satisfies(s))return Promise.resolve(!0);const l=!!this._updateOperation.value;this._updateOperation.clear();const g=new Fi.Qi,k=(async()=>{if((l||t.triggerKind===Et.qw.Automatic)&&await Uw(this._debounceValue.get(this.textModel),g.token),g.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==s.versionId)return!1;const ie=new Date,fe=await rC(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,g.token,this.languageConfigurationService);if(g.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==s.versionId)return!1;const Me=new Date;this._debounceValue.update(this.textModel,Me.getTime()-ie.getTime());const xe=new Kw(fe,s,this.textModel,this.versionId);if(i){const Qe=i.toInlineCompletion(void 0);i.canBeReused(this.textModel,e)&&!fe.has(Qe)&&xe.prepend(i.inlineCompletion,Qe.range,!0)}return this._updateOperation.clear(),(0,si.Rn)(Qe=>{o.set(xe,Qe)}),!0})(),H=new jw(s,g,k);return this._updateOperation.value=H,k}clear(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}clearSuggestWidgetInlineCompletions(e){this._updateOperation.value?.request.context.selectedSuggestionInfo&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}cancelUpdate(){this._updateOperation.clear()}};dp=Vw([uC(3,_e.ILanguageFeaturesService),uC(4,Us.JZ)],dp);function Uw(h,e){return new Promise(t=>{let i;const s=setTimeout(()=>{i&&i.dispose(),t()},h);e&&(i=e.onCancellationRequested(()=>{clearTimeout(s),i&&i.dispose(),t()}))})}class zw{constructor(e,t,i){this.position=e,this.context=t,this.versionId=i}satisfies(e){return this.position.equals(e.position)&&(0,hc.KC)(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,(0,hc.r)())&&(e.context.triggerKind===Et.qw.Automatic||this.context.triggerKind===Et.qw.Explicit)&&this.versionId===e.versionId}}class jw{constructor(e,t,i){this.request=e,this.cancellationTokenSource=t,this.promise=i}dispose(){this.cancellationTokenSource.cancel()}}class Kw{get inlineCompletions(){return this._inlineCompletions}constructor(e,t,i,s){this.inlineCompletionProviderResult=e,this.request=t,this._textModel=i,this._versionId=s,this._refCount=1,this._prependedInlineCompletionItems=[];const o=i.deltaDecorations([],e.completions.map(l=>({range:l.range,options:{description:"inline-completion-tracking-range"}})));this._inlineCompletions=e.completions.map((l,g)=>new gC(l,o[g],this._textModel,this._versionId))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,this._refCount===0){setTimeout(()=>{this._textModel.isDisposed()||this._textModel.deltaDecorations(this._inlineCompletions.map(e=>e.decorationId),[])},0),this.inlineCompletionProviderResult.dispose();for(const e of this._prependedInlineCompletionItems)e.source.removeRef()}}prepend(e,t,i){i&&e.source.addRef();const s=this._textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new gC(e,s,this._textModel,this._versionId)),this._prependedInlineCompletionItems.push(e)}}class gC{get forwardStable(){return this.inlineCompletion.source.inlineCompletions.enableForwardStability??!1}constructor(e,t,i,s){this.inlineCompletion=e,this.decorationId=t,this._textModel=i,this._modelVersion=s,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._updatedRange=(0,si.C)({owner:this,equalsFn:wt.Q.equalsRange},o=>(this._modelVersion.read(o),this._textModel.getDecorationRange(this.decorationId)))}toInlineCompletion(e){return this.inlineCompletion.withRange(this._updatedRange.read(e)??hp)}toSingleTextEdit(e){return new Wr.WR(this._updatedRange.read(e)??hp,this.inlineCompletion.insertText)}isVisible(e,t,i){const s=uc(this._toFilterTextReplacement(i),e),o=this._updatedRange.read(i);if(!o||!this.inlineCompletion.range.getStartPosition().equals(o.getStartPosition())||t.lineNumber!==s.range.startLineNumber)return!1;const l=e.getValueInRange(s.range,1),g=s.text,k=Math.max(0,t.column-s.range.startColumn);let H=g.substring(0,k),ee=g.substring(k),ie=l.substring(0,k),fe=l.substring(k);const Me=e.getLineIndentColumn(s.range.startLineNumber);return s.range.startColumn<=Me&&(ie=ie.trimStart(),ie.length===0&&(fe=fe.trimStart()),H=H.trimStart(),H.length===0&&(ee=ee.trimStart())),H.startsWith(ie)&&!!(0,Xs.dE)(fe,ee)}canBeReused(e,t){const i=this._updatedRange.read(void 0);return!!i&&i.containsPosition(t)&&this.isVisible(e,t,void 0)&&Pg.W.ofRange(i).isGreaterThanOrEqualTo(Pg.W.ofRange(this.inlineCompletion.range))}_toFilterTextReplacement(e){return new Wr.WR(this._updatedRange.read(e)??hp,this.inlineCompletion.filterText)}}const hp=new wt.Q(1,1,1,1),bn={Visible:zm,HasFocusedSuggestion:new et.N1("suggestWidgetHasFocusedSuggestion",!1,(0,Z.kg)("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new et.N1("suggestWidgetDetailsVisible",!1,(0,Z.kg)("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new et.N1("suggestWidgetMultipleSuggestions",!1,(0,Z.kg)("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new et.N1("suggestionMakesTextEdit",!0,(0,Z.kg)("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new et.N1("acceptSuggestionOnEnter",!0,(0,Z.kg)("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new et.N1("suggestionHasInsertAndReplaceRange",!1,(0,Z.kg)("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new et.N1("suggestionInsertMode",void 0,{type:"string",description:(0,Z.kg)("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new et.N1("suggestionCanResolve",!1,(0,Z.kg)("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},vl=new Fe.D8("suggestWidgetStatusBar");class $w{constructor(e,t,i,s){this.position=e,this.completion=t,this.container=i,this.provider=s,this.isInvalid=!1,this.score=Xs.ne.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label?.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,wt.Q.isIRange(t.range)?(this.editStart=new ui.y(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new ui.y(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new ui.y(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||wt.Q.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new ui.y(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new ui.y(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new ui.y(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||wt.Q.spansMultipleLines(t.range.insert)||wt.Q.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof s.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration!==void 0?this._resolveDuration:-1}async resolve(e){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),i=new eo.W(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(s=>{Object.assign(this.completion,s),this._resolveDuration=i.elapsed()},s=>{(0,Ni.MB)(s)&&(this._resolveCache=void 0,this._resolveDuration=void 0)}).finally(()=>{t.dispose()})}return this._resolveCache}}class jh{static{this.default=new jh}constructor(e=2,t=new Set,i=new Set,s=new Map,o=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=i,this.providerItemsToReuse=s,this.showDeprecated=o}}let Ed;function Gw(){return Ed}class Qw{constructor(e,t,i,s){this.items=e,this.needsClipboard=t,this.durations=i,this.disposable=s}}async function up(h,e,t,i=jh.default,s={triggerKind:0},o=Fi.XO.None){const l=new eo.W;t=t.clone();const g=e.getWordAtPosition(t),k=g?new wt.Q(t.lineNumber,g.startColumn,t.lineNumber,g.endColumn):wt.Q.fromPositions(t),H={replace:k,insert:k.setEndPosition(t.lineNumber,t.column)},ee=[],ie=new vt.Cm,fe=[];let Me=!1;const xe=(ut,Lt,kt)=>{let ni=!1;if(!Lt)return ni;for(const gi of Lt.suggestions)if(!i.kindFilter.has(gi.kind)){if(!i.showDeprecated&&gi?.tags?.includes(1))continue;gi.range||(gi.range=H),gi.sortText||(gi.sortText=typeof gi.label=="string"?gi.label:gi.label.label),!Me&&gi.insertTextRules&&gi.insertTextRules&4&&(Me=ys.guessNeedsClipboard(gi.insertText)),ee.push(new $w(t,gi,Lt,ut)),ni=!0}return(0,vt.Xm)(Lt)&&ie.add(Lt),fe.push({providerName:ut._debugDisplayName??"unknown_provider",elapsedProvider:Lt.duration??-1,elapsedOverall:kt.elapsed()}),ni},Qe=(async()=>{if(!Ed||i.kindFilter.has(27))return;const ut=i.providerItemsToReuse.get(Ed);if(ut){ut.forEach(ni=>ee.push(ni));return}if(i.providerFilter.size>0&&!i.providerFilter.has(Ed))return;const Lt=new eo.W,kt=await Ed.provideCompletionItems(e,t,s,o);xe(Ed,kt,Lt)})();for(const ut of h.orderedGroups(e)){let Lt=!1;if(await Promise.all(ut.map(async kt=>{if(i.providerItemsToReuse.has(kt)){const ni=i.providerItemsToReuse.get(kt);ni.forEach(gi=>ee.push(gi)),Lt=Lt||ni.length>0;return}if(!(i.providerFilter.size>0&&!i.providerFilter.has(kt)))try{const ni=new eo.W,gi=await kt.provideCompletionItems(e,t,s,o);Lt=xe(kt,gi,ni)||Lt}catch(ni){(0,Ni.M_)(ni)}})),Lt||o.isCancellationRequested)break}return await Qe,o.isCancellationRequested?(ie.dispose(),Promise.reject(new Ni.AL)):new Qw(ee.sort(Xw(i.snippetSortOrder)),Me,{entries:fe,elapsed:l.elapsed()},ie)}function gp(h,e){if(h.sortTextLow&&e.sortTextLow){if(h.sortTextLow<e.sortTextLow)return-1;if(h.sortTextLow>e.sortTextLow)return 1}return h.textLabel<e.textLabel?-1:h.textLabel>e.textLabel?1:h.completion.kind-e.completion.kind}function Yw(h,e){if(h.completion.kind!==e.completion.kind){if(h.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return gp(h,e)}function Zw(h,e){if(h.completion.kind!==e.completion.kind){if(h.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return gp(h,e)}const Fg=new Map;Fg.set(0,Yw),Fg.set(2,Zw),Fg.set(1,gp);function Xw(h){return Fg.get(h)}Di.w.registerCommand("_executeCompletionItemProvider",async(h,...e)=>{const[t,i,s,o]=e;(0,hn.j)(Ot.r.isUri(t)),(0,hn.j)(ui.y.isIPosition(i)),(0,hn.j)(typeof s=="string"||!s),(0,hn.j)(typeof o=="number"||!o);const{completionProvider:l}=h.get(_e.ILanguageFeaturesService),g=await h.get(sr.ITextModelService).createModelReference(t);try{const k={incomplete:!1,suggestions:[]},H=[],ee=g.object.textEditorModel.validatePosition(i),ie=await up(l,g.object.textEditorModel,ee,void 0,{triggerCharacter:s??void 0,triggerKind:s?1:0});for(const fe of ie.items)H.length<(o??0)&&H.push(fe.resolve(Fi.XO.None)),k.incomplete=k.incomplete||fe.container.incomplete,k.suggestions.push(fe.completion);try{return await Promise.all(H),k}finally{setTimeout(()=>ie.disposable.dispose(),100)}}finally{g.dispose()}});function Jw(h,e){h.getContribution("editor.contrib.suggestController")?.triggerSuggest(new Set().add(e),void 0,!0)}class xd{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}var gc=c(92824),qw=c(27919);function fC(h,e=Mn.uF){return(0,qw.No)(h,e)?h.charAt(0).toUpperCase()+h.slice(1):h}let aI=null;var Ha=c(8264),ey=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ty=function(h,e){return function(t,i){e(t,i,h)}};const lI=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,CURRENT_TIMEZONE_OFFSET:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,CURSOR_INDEX:!0,CURSOR_NUMBER:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});class mC{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){const i=t.resolve(e);if(i!==void 0)return i}}}class pC{constructor(e,t,i,s){this._model=e,this._selection=t,this._selectionIdx=i,this._overtypingCapturer=s}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let i=this._model.getValueInRange(this._selection)||void 0,s=this._selection.startLineNumber!==this._selection.endLineNumber;if(!i&&this._overtypingCapturer){const o=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);o&&(i=o.value,s=o.multiline)}if(i&&s&&e.snippet){const o=this._model.getLineContent(this._selection.startLineNumber),l=(0,Vi.UU)(o,0,this._selection.startColumn-1);let g=l;e.snippet.walk(H=>H===e?!1:(H instanceof fi&&(g=(0,Vi.UU)((0,Vi.uz)(H.value).pop())),!0));const k=(0,Vi.Qp)(g,l);i=i.replace(/(\r\n|\r|\n)(.*)/g,(H,ee,ie)=>`${ee}${g.substr(k)}${ie}`)}return i}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const i=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return i&&i.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}}class _C{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return Ha.P8(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const i=Ha.P8(this._model.uri.fsPath),s=i.lastIndexOf(".");return s<=0?i:i.slice(0,s)}else{if(t==="TM_DIRECTORY")return Ha.pD(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel((0,Ee.pD)(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class vC{constructor(e,t,i,s){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=i,this._spread=s}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const i=t.split(/\r\n|\n|\r/).filter(s=>!(0,Vi.AV)(s));if(i.length===this._selectionCount)return i[this._selectionIdx]}return t}}}let Wg=class{constructor(e,t,i){this._model=e,this._selection=t,this._languageConfigurationService=i}resolve(e){const{name:t}=e,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),s=this._languageConfigurationService.getLanguageConfiguration(i).comments;if(s){if(t==="LINE_COMMENT")return s.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return s.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return s.blockCommentEndToken||void 0}}};Wg=ey([ty(2,Us.JZ)],Wg);class fc{constructor(){this._date=new Date}static{this.dayNames=[Z.kg("Sunday","Sunday"),Z.kg("Monday","Monday"),Z.kg("Tuesday","Tuesday"),Z.kg("Wednesday","Wednesday"),Z.kg("Thursday","Thursday"),Z.kg("Friday","Friday"),Z.kg("Saturday","Saturday")]}static{this.dayNamesShort=[Z.kg("SundayShort","Sun"),Z.kg("MondayShort","Mon"),Z.kg("TuesdayShort","Tue"),Z.kg("WednesdayShort","Wed"),Z.kg("ThursdayShort","Thu"),Z.kg("FridayShort","Fri"),Z.kg("SaturdayShort","Sat")]}static{this.monthNames=[Z.kg("January","January"),Z.kg("February","February"),Z.kg("March","March"),Z.kg("April","April"),Z.kg("May","May"),Z.kg("June","June"),Z.kg("July","July"),Z.kg("August","August"),Z.kg("September","September"),Z.kg("October","October"),Z.kg("November","November"),Z.kg("December","December")]}static{this.monthNamesShort=[Z.kg("JanuaryShort","Jan"),Z.kg("FebruaryShort","Feb"),Z.kg("MarchShort","Mar"),Z.kg("AprilShort","Apr"),Z.kg("MayShort","May"),Z.kg("JuneShort","Jun"),Z.kg("JulyShort","Jul"),Z.kg("AugustShort","Aug"),Z.kg("SeptemberShort","Sep"),Z.kg("OctoberShort","Oct"),Z.kg("NovemberShort","Nov"),Z.kg("DecemberShort","Dec")]}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return fc.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return fc.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return fc.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return fc.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(t==="CURRENT_TIMEZONE_OFFSET"){const i=this._date.getTimezoneOffset(),s=i>0?"-":"+",o=Math.trunc(Math.abs(i/60)),l=o<10?"0"+o:o,g=Math.abs(i)-o*60,k=g<10?"0"+g:g;return s+l+":"+k}}}class CC{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=(0,Ie.Q_)(this._workspaceService.getWorkspace());if(!(0,Ie.A7)(t)){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if((0,Ie.jB)(e))return Ha.P8(e.uri.path);let t=Ha.P8(e.configPath.path);return t.endsWith(Ie.kF)&&(t=t.substr(0,t.length-Ie.kF.length-1)),t}_resoveWorkspacePath(e){if((0,Ie.jB)(e))return fC(e.uri.fsPath);const t=Ha.P8(e.configPath.path);let i=e.configPath.fsPath;return i.endsWith(t)&&(i=i.substr(0,i.length-t.length-1)),i?fC(i):"/"}}class bC{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return no()}}var iy=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ny=function(h,e){return function(t,i){e(t,i,h)}},Br;class vr{static{this._decor={active:Ki.kI.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:Ki.kI.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:Ki.kI.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:Ki.kI.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})}}constructor(e,t,i){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=i,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=(0,Xi.$z)(t.placeholders,di.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const i of this._snippet.placeholders){const s=this._snippet.offset(i),o=this._snippet.fullLen(i),l=wt.Q.fromPositions(e.getPositionAt(this._offset+s),e.getPositionAt(this._offset+s+o)),g=i.isFinalTabstop?vr._decor.inactiveFinal:vr._decor.inactive,k=t.addDecoration(l,g);this._placeholderDecorations.set(i,k)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const s=[];for(const o of this._placeholderGroups[this._placeholderGroupsIdx])if(o.transform){const l=this._placeholderDecorations.get(o),g=this._editor.getModel().getDecorationRange(l),k=this._editor.getModel().getValueInRange(g),H=o.transform.resolve(k).split(/\r\n|\r|\n/);for(let ee=1;ee<H.length;ee++)H[ee]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+H[ee]);s.push(ps.k.replace(g,H.join(this._editor.getModel().getEOL())))}s.length>0&&this._editor.executeEdits("snippet.placeholderTransform",s)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const i=this._editor.getModel().changeDecorations(s=>{const o=new Set,l=[];for(const g of this._placeholderGroups[this._placeholderGroupsIdx]){const k=this._placeholderDecorations.get(g),H=this._editor.getModel().getDecorationRange(k);l.push(new Mi.L(H.startLineNumber,H.startColumn,H.endLineNumber,H.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(g),s.changeDecorationOptions(k,g.isFinalTabstop?vr._decor.activeFinal:vr._decor.active),o.add(g);for(const ee of this._snippet.enclosingPlaceholders(g)){const ie=this._placeholderDecorations.get(ee);s.changeDecorationOptions(ie,ee.isFinalTabstop?vr._decor.activeFinal:vr._decor.active),o.add(ee)}}for(const[g,k]of this._placeholderDecorations)o.has(g)||s.changeDecorationOptions(k,g.isFinalTabstop?vr._decor.inactiveFinal:vr._decor.inactive);return l});return t?this.move(e):i??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof di){const i=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(i).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){const[e]=this._snippet.placeholders;if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let i;for(const s of t){if(s.isFinalTabstop)break;i||(i=[],e.set(s.index,i));const o=this._placeholderDecorations.get(s),l=this._editor.getModel().getDecorationRange(o);if(!l){e.delete(s.index);break}i.push(l)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;const e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!e?.choice)return;const t=this._placeholderDecorations.get(e);if(!t)return;const i=this._editor.getModel().getDecorationRange(t);if(i)return{range:i,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof $t,!e)),e}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(i=>{for(const s of this._placeholderGroups[this._placeholderGroupsIdx]){const o=e.shift(),l=o._snippet.placeholderInfo.last.index;for(const k of o._snippet.placeholderInfo.all)k.isFinalTabstop?k.index=s.index+(l+1)/this._nestingLevel:k.index=s.index+k.index/this._nestingLevel;this._snippet.replace(s,o._snippet.children);const g=this._placeholderDecorations.get(s);i.removeDecoration(g),this._placeholderDecorations.delete(s);for(const k of o._snippet.placeholders){const H=o._snippet.offset(k),ee=o._snippet.fullLen(k),ie=wt.Q.fromPositions(t.getPositionAt(o._offset+H),t.getPositionAt(o._offset+H+ee)),fe=i.addDecoration(ie,vr._decor.inactive);this._placeholderDecorations.set(k,fe)}}this._placeholderGroups=(0,Xi.$z)(this._snippet.placeholders,di.compareByIndex)})}}const SC={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Bg=Br=class{static adjustWhitespace(e,t,i,s,o){const l=e.getLineContent(t.lineNumber),g=(0,Vi.UU)(l,0,t.column-1);let k;return s.walk(H=>{if(!(H instanceof fi)||H.parent instanceof $t||o&&!o.has(H))return!0;const ee=H.value.split(/\r\n|\r|\n/);if(i){const fe=s.offset(H);if(fe===0)ee[0]=e.normalizeIndentation(ee[0]);else{k=k??s.toString();const Me=k.charCodeAt(fe-1);(Me===10||Me===13)&&(ee[0]=e.normalizeIndentation(g+ee[0]))}for(let Me=1;Me<ee.length;Me++)ee[Me]=e.normalizeIndentation(g+ee[Me])}const ie=ee.join(e.getEOL());return ie!==H.value&&(H.parent.replace(H,[new fi(ie)]),k=void 0),!0}),g}static adjustSelection(e,t,i,s){if(i!==0||s!==0){const{positionLineNumber:o,positionColumn:l}=t,g=l-i,k=l+s,H=e.validateRange({startLineNumber:o,startColumn:g,endLineNumber:o,endColumn:k});t=Mi.L.createWithDirection(H.startLineNumber,H.startColumn,H.endLineNumber,H.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,i,s,o,l,g,k,H){const ee=[],ie=[];if(!e.hasModel())return{edits:ee,snippets:ie};const fe=e.getModel(),Me=e.invokeWithinContext(gi=>gi.get(Ie.VR)),xe=e.invokeWithinContext(gi=>new _C(gi.get(rc.L),fe)),Qe=()=>g,ut=fe.getValueInRange(Br.adjustSelection(fe,e.getSelection(),i,0)),Lt=fe.getValueInRange(Br.adjustSelection(fe,e.getSelection(),0,s)),kt=fe.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),ni=e.getSelections().map((gi,pi)=>({selection:gi,idx:pi})).sort((gi,pi)=>wt.Q.compareRangesUsingStarts(gi.selection,pi.selection));for(const{selection:gi,idx:pi}of ni){let pn=Br.adjustSelection(fe,gi,i,0),ln=Br.adjustSelection(fe,gi,0,s);ut!==fe.getValueInRange(pn)&&(pn=gi),Lt!==fe.getValueInRange(ln)&&(ln=gi);const Fn=gi.setStartPosition(pn.startLineNumber,pn.startColumn).setEndPosition(ln.endLineNumber,ln.endColumn),Ws=new ys().parse(t,!0,o),Rs=Fn.getStartPosition(),Yo=Br.adjustWhitespace(fe,Rs,l||pi>0&&kt!==fe.getLineFirstNonWhitespaceColumn(gi.positionLineNumber),Ws);Ws.resolveVariables(new mC([xe,new vC(Qe,pi,ni.length,e.getOption(79)==="spread"),new pC(fe,gi,pi,k),new Wg(fe,gi,H),new fc,new CC(Me),new bC])),ee[pi]=ps.k.replace(Fn,Ws.toString()),ee[pi].identifier={major:pi,minor:0},ee[pi]._isTracked=!0,ie[pi]=new vr(e,Ws,Yo)}return{edits:ee,snippets:ie}}static createEditsAndSnippetsFromEdits(e,t,i,s,o,l,g){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};const k=[],H=e.getModel(),ee=new ys,ie=new En,fe=new mC([e.invokeWithinContext(xe=>new _C(xe.get(rc.L),H)),new vC(()=>o,0,e.getSelections().length,e.getOption(79)==="spread"),new pC(H,e.getSelection(),0,l),new Wg(H,e.getSelection(),g),new fc,new CC(e.invokeWithinContext(xe=>xe.get(Ie.VR))),new bC]);t=t.sort((xe,Qe)=>wt.Q.compareRangesUsingStarts(xe.range,Qe.range));let Me=0;for(let xe=0;xe<t.length;xe++){const{range:Qe,template:ut}=t[xe];if(xe>0){const pi=t[xe-1].range,pn=wt.Q.fromPositions(pi.getEndPosition(),Qe.getStartPosition()),ln=new fi(H.getValueInRange(pn));ie.appendChild(ln),Me+=ln.value.length}const Lt=ee.parseFragment(ut,ie);Br.adjustWhitespace(H,Qe.getStartPosition(),!0,ie,new Set(Lt)),ie.resolveVariables(fe);const kt=ie.toString(),ni=kt.slice(Me);Me=kt.length;const gi=ps.k.replace(Qe,ni);gi.identifier={major:xe,minor:0},gi._isTracked=!0,k.push(gi)}return ee.ensureFinalTabstop(ie,i,!0),{edits:k,snippets:[new vr(e,ie,"")]}}constructor(e,t,i=SC,s){this._editor=e,this._template=t,this._options=i,this._languageConfigurationService=s,this._templateMerges=[],this._snippets=[]}dispose(){(0,vt.AS)(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=typeof this._template=="string"?Br.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):Br.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,i=>{const s=i.filter(o=>!!o.identifier);for(let o=0;o<t.length;o++)t[o].initialize(s[o].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):s.map(o=>Mi.L.fromPositions(o.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=SC){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:i,snippets:s}=Br.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",i,o=>{const l=o.filter(k=>!!k.identifier);for(let k=0;k<s.length;k++)s[k].initialize(l[k].textChange);const g=s[0].isTrivialSnippet;if(!g)for(const k of this._snippets)k.merge(s);return this._snippets[0].hasPlaceholder&&!g?this._move(void 0):l.map(k=>Mi.L.fromPositions(k.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const i of this._snippets){const s=i.move(e);t.push(...s)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;const t=new Map;for(const i of this._snippets){const s=i.computePossibleSelections();if(t.size===0)for(const[o,l]of s){l.sort(wt.Q.compareRangesUsingStarts);for(const g of e)if(l[0].containsRange(g)){t.set(o,[]);break}}if(t.size===0)return!1;t.forEach((o,l)=>{o.push(...s.get(l))})}e.sort(wt.Q.compareRangesUsingStarts);for(const[i,s]of t){if(s.length!==e.length){t.delete(i);continue}s.sort(wt.Q.compareRangesUsingStarts);for(let o=0;o<s.length;o++)if(!s[o].containsRange(e[o])){t.delete(i);continue}}return t.size>0}};Bg=Br=iy([ny(3,Us.JZ)],Bg);var sy=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Hg=function(h,e){return function(t,i){e(t,i,h)}},kd;const wC={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let wo=class{static{kd=this}static{this.ID="snippetController2"}static get(e){return e.getContribution(kd.ID)}static{this.InSnippetMode=new et.N1("inSnippetMode",!1,(0,Z.kg)("inSnippetMode","Whether the editor in current in snippet mode"))}static{this.HasNextTabstop=new et.N1("hasNextTabstop",!1,(0,Z.kg)("hasNextTabstop","Whether there is a next tab stop when in snippet mode"))}static{this.HasPrevTabstop=new et.N1("hasPrevTabstop",!1,(0,Z.kg)("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"))}constructor(e,t,i,s,o){this._editor=e,this._logService=t,this._languageFeaturesService=i,this._languageConfigurationService=o,this._snippetListener=new vt.Cm,this._modelVersionId=-1,this._inSnippet=kd.InSnippetMode.bindTo(s),this._hasNextTabstop=kd.HasNextTabstop.bindTo(s),this._hasPrevTabstop=kd.HasPrevTabstop.bindTo(s)}dispose(){this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._session?.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?wC:{...wC,...t})}catch(i){this.cancel(),this._logService.error(i),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?((0,hn.j)(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new Bg(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._session?.hasChoice){const i={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(H,ee)=>{if(!this._session||H!==this._editor.getModel()||!ui.y.equals(this._editor.getPosition(),ee))return;const{activeChoice:ie}=this._session;if(!ie||ie.choice.options.length===0)return;const fe=H.getValueInRange(ie.range),Me=!!ie.choice.options.find(Qe=>Qe.value===fe),xe=[];for(let Qe=0;Qe<ie.choice.options.length;Qe++){const ut=ie.choice.options[Qe];xe.push({kind:13,label:ut.value,insertText:ut.value,sortText:"a".repeat(Qe+1),range:ie.range,filterText:Me?`${fe}_${ut.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:(0,Z.kg)("next","Go to next placeholder...")}})}return{suggestions:xe}}},s=this._editor.getModel();let o,l=!1;const g=()=>{o?.dispose(),l=!1},k=()=>{l||(o=this._languageFeaturesService.completionProvider.register({language:s.getLanguageId(),pattern:s.uri.fsPath,scheme:s.uri.scheme,exclusive:!0},i),this._snippetListener.add(o),l=!0)};this._choiceCompletions={provider:i,enable:k,disable:g}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(i=>i.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{activeChoice:e}=this._session;if(!e||!this._choiceCompletions){this._choiceCompletions?.disable(),this._currentChoice=void 0;return}this._currentChoice!==e.choice&&(this._currentChoice=e.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{Jw(this._editor,this._choiceCompletions.provider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,this._session?.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session?.prev(),this._updateState()}next(){this._session?.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};wo=kd=sy([Hg(1,gc.rr),Hg(2,_e.ILanguageFeaturesService),Hg(3,et.fN),Hg(4,Us.JZ)],wo),(0,we.HW)(wo.ID,wo,4);const Vg=we.DX.bindToContribution(wo.get);(0,we.E_)(new Vg({id:"jumpToNextSnippetPlaceholder",precondition:et.M$.and(wo.InSnippetMode,wo.HasNextTabstop),handler:h=>h.next(),kbOpts:{weight:130,kbExpr:ke.R.textInputFocus,primary:2}})),(0,we.E_)(new Vg({id:"jumpToPrevSnippetPlaceholder",precondition:et.M$.and(wo.InSnippetMode,wo.HasPrevTabstop),handler:h=>h.prev(),kbOpts:{weight:130,kbExpr:ke.R.textInputFocus,primary:1026}})),(0,we.E_)(new Vg({id:"leaveSnippet",precondition:wo.InSnippetMode,handler:h=>h.cancel(!0),kbOpts:{weight:130,kbExpr:ke.R.textInputFocus,primary:9,secondary:[1033]}})),(0,we.E_)(new Vg({id:"acceptSnippet",precondition:wo.InSnippetMode,handler:h=>h.finish()}));var oy=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},fp=function(h,e){return function(t,i){e(t,i,h)}};let mp=class extends vt.jG{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(e,t,i,s,o,l,g,k,H,ee,ie,fe){super(),this.textModel=e,this.selectedSuggestItem=t,this._textModelVersionId=i,this._positions=s,this._debounceValue=o,this._suggestPreviewEnabled=l,this._suggestPreviewMode=g,this._inlineSuggestMode=k,this._enabled=H,this._instantiationService=ee,this._commandService=ie,this._languageConfigurationService=fe,this._source=this._register(this._instantiationService.createInstance(dp,this.textModel,this._textModelVersionId,this._debounceValue)),this._isActive=(0,si.FY)(this,!1),this._forceUpdateExplicitlySignal=(0,si.Yd)(this),this._selectedInlineCompletionId=(0,si.FY)(this,void 0),this._primaryPosition=(0,si.un)(this,xe=>this._positions.read(xe)[0]??new ui.y(1,1)),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([Va.Redo,Va.Undo,Va.AcceptWord]),this._fetchInlineCompletionsPromise=(0,si.nb)({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:Et.qw.Automatic}),handleChange:(xe,Qe)=>(xe.didChange(this._textModelVersionId)&&this._preserveCurrentCompletionReasons.has(this._getReason(xe.change))?Qe.preserveCurrentCompletion=!0:xe.didChange(this._forceUpdateExplicitlySignal)&&(Qe.inlineCompletionTriggerKind=Et.qw.Explicit),!0)},(xe,Qe)=>{if(this._forceUpdateExplicitlySignal.read(xe),!(this._enabled.read(xe)&&this.selectedSuggestItem.read(xe)||this._isActive.read(xe))){this._source.cancelUpdate();return}this._textModelVersionId.read(xe);const Lt=this._source.suggestWidgetInlineCompletions.get(),kt=this.selectedSuggestItem.read(xe);if(Lt&&!kt){const ln=this._source.inlineCompletions.get();(0,si.Rn)(Fn=>{(!ln||Lt.request.versionId>ln.request.versionId)&&this._source.inlineCompletions.set(Lt.clone(),Fn),this._source.clearSuggestWidgetInlineCompletions(Fn)})}const ni=this._primaryPosition.read(xe),gi={triggerKind:Qe.inlineCompletionTriggerKind,selectedSuggestionInfo:kt?.toSelectedSuggestionInfo()},pi=this.selectedInlineCompletion.get(),pn=Qe.preserveCurrentCompletion||pi?.forwardStable?pi:void 0;return this._source.fetch(ni,gi,pn)}),this._filteredInlineCompletionItems=(0,si.C)({owner:this,equalsFn:(0,hc.S3)()},xe=>{const Qe=this._source.inlineCompletions.read(xe);if(!Qe)return[];const ut=this._primaryPosition.read(xe);return Qe.inlineCompletions.filter(kt=>kt.isVisible(this.textModel,ut,xe))}),this.selectedInlineCompletionIndex=(0,si.un)(this,xe=>{const Qe=this._selectedInlineCompletionId.read(xe),ut=this._filteredInlineCompletionItems.read(xe),Lt=this._selectedInlineCompletionId===void 0?-1:ut.findIndex(kt=>kt.semanticId===Qe);return Lt===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):Lt}),this.selectedInlineCompletion=(0,si.un)(this,xe=>{const Qe=this._filteredInlineCompletionItems.read(xe),ut=this.selectedInlineCompletionIndex.read(xe);return Qe[ut]}),this.activeCommands=(0,si.C)({owner:this,equalsFn:(0,hc.S3)()},xe=>this.selectedInlineCompletion.read(xe)?.inlineCompletion.source.inlineCompletions.commands??[]),this.lastTriggerKind=this._source.inlineCompletions.map(this,xe=>xe?.request.context.triggerKind),this.inlineCompletionsCount=(0,si.un)(this,xe=>{if(this.lastTriggerKind.read(xe)===Et.qw.Explicit)return this._filteredInlineCompletionItems.read(xe).length}),this.state=(0,si.C)({owner:this,equalsFn:(xe,Qe)=>!xe||!Qe?xe===Qe:q0(xe.ghostTexts,Qe.ghostTexts)&&xe.inlineCompletion===Qe.inlineCompletion&&xe.suggestItem===Qe.suggestItem},xe=>{const Qe=this.textModel,ut=this.selectedSuggestItem.read(xe);if(ut){const Lt=uc(ut.toSingleTextEdit(),Qe),kt=this._computeAugmentation(Lt,xe);if(!this._suggestPreviewEnabled.read(xe)&&!kt)return;const gi=kt?.edit??Lt,pi=kt?kt.edit.text.length-Lt.text.length:0,pn=this._suggestPreviewMode.read(xe),ln=this._positions.read(xe),Fn=[gi,...pp(this.textModel,ln,gi)],Ws=Fn.map((Yo,iI)=>cC(Yo,Qe,pn,ln[iI],pi)).filter(hn.O9),Rs=Ws[0]??new zh(gi.range.endLineNumber,[]);return{edits:Fn,primaryGhostText:Rs,ghostTexts:Ws,inlineCompletion:kt?.completion,suggestItem:ut}}else{if(!this._isActive.read(xe))return;const Lt=this.selectedInlineCompletion.read(xe);if(!Lt)return;const kt=Lt.toSingleTextEdit(xe),ni=this._inlineSuggestMode.read(xe),gi=this._positions.read(xe),pi=[kt,...pp(this.textModel,gi,kt)],pn=pi.map((ln,Fn)=>cC(ln,Qe,ni,gi[Fn],0)).filter(hn.O9);return pn[0]?{edits:pi,primaryGhostText:pn[0],ghostTexts:pn,inlineCompletion:Lt,suggestItem:void 0}:void 0}}),this.ghostTexts=(0,si.C)({owner:this,equalsFn:q0},xe=>{const Qe=this.state.read(xe);if(Qe)return Qe.ghostTexts}),this.primaryGhostText=(0,si.C)({owner:this,equalsFn:eC},xe=>{const Qe=this.state.read(xe);if(Qe)return Qe?.primaryGhostText}),this._register((0,si.OI)(this._fetchInlineCompletionsPromise));let Me;this._register((0,si.fm)(xe=>{const ut=this.state.read(xe)?.inlineCompletion;if(ut?.semanticId!==Me?.semanticId&&(Me=ut,ut)){const Lt=ut.inlineCompletion,kt=Lt.source;kt.provider.handleItemDidShow?.(kt.inlineCompletions,Lt.sourceInlineCompletion,Lt.insertText)}}))}_getReason(e){return e?.isUndoing?Va.Undo:e?.isRedoing?Va.Redo:this.isAcceptingPartially?Va.AcceptWord:Va.Other}async trigger(e){this._isActive.set(!0,e),await this._fetchInlineCompletionsPromise.get()}async triggerExplicitly(e){(0,si.PO)(e,t=>{this._isActive.set(!0,t),this._forceUpdateExplicitlySignal.trigger(t)}),await this._fetchInlineCompletionsPromise.get()}stop(e){(0,si.PO)(e,t=>{this._isActive.set(!1,t),this._source.clear(t)})}_computeAugmentation(e,t){const i=this.textModel,s=this._source.suggestWidgetInlineCompletions.read(t),o=s?s.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(hn.O9);return(0,Th.oH)(o,g=>{let k=g.toSingleTextEdit(t);return k=uc(k,i,wt.Q.fromPositions(k.range.getStartPosition(),e.range.getEndPosition())),lC(k,e)?{completion:g,edit:k}:void 0})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();const t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){const i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){if(e.getModel()!==this.textModel)throw new Ni.D7;const t=this.state.get();if(!t||t.primaryGhostText.isEmpty()||!t.inlineCompletion)return;const i=t.inlineCompletion.toInlineCompletion(void 0);if(i.command&&i.source.addRef(),e.pushUndoStop(),i.snippetInfo)e.executeEdits("inlineSuggestion.accept",[ps.k.replace(i.range,""),...i.additionalTextEdits]),e.setPosition(i.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),wo.get(e)?.insert(i.snippetInfo.snippet,{undoStopBefore:!1});else{const s=t.edits,o=yC(s).map(l=>Mi.L.fromPositions(l));e.executeEdits("inlineSuggestion.accept",[...s.map(l=>ps.k.replace(l.range,l.text)),...i.additionalTextEdits]),e.setSelections(o,"inlineCompletionAccept")}this.stop(),i.command&&(await this._commandService.executeCommand(i.command.id,...i.command.arguments||[]).then(void 0,Ni.M_),i.source.removeRef())}async acceptNextWord(e){await this._acceptNext(e,(t,i)=>{const s=this.textModel.getLanguageIdAtPosition(t.lineNumber,t.column),o=this._languageConfigurationService.getLanguageConfiguration(s),l=new RegExp(o.wordDefinition.source,o.wordDefinition.flags.replace("g","")),g=i.match(l);let k=0;g&&g.index!==void 0?g.index===0?k=g[0].length:k=g.index:k=i.length;const ee=/\s+/g.exec(i);return ee&&ee.index!==void 0&&ee.index+ee[0].length<k&&(k=ee.index+ee[0].length),k},0)}async acceptNextLine(e){await this._acceptNext(e,(t,i)=>{const s=i.match(/\n/);return s&&s.index!==void 0?s.index+1:i.length},1)}async _acceptNext(e,t,i){if(e.getModel()!==this.textModel)throw new Ni.D7;const s=this.state.get();if(!s||s.primaryGhostText.isEmpty()||!s.inlineCompletion)return;const o=s.primaryGhostText,l=s.inlineCompletion.toInlineCompletion(void 0);if(l.snippetInfo||l.filterText!==l.insertText){await this.accept(e);return}const g=o.parts[0],k=new ui.y(o.lineNumber,g.column),H=g.text,ee=t(k,H);if(ee===H.length&&o.parts.length===1){this.accept(e);return}const ie=H.substring(0,ee),fe=this._positions.get(),Me=fe[0];l.source.addRef();try{this._isAcceptingPartially=!0;try{e.pushUndoStop();const xe=wt.Q.fromPositions(Me,k),Qe=e.getModel().getValueInRange(xe)+ie,ut=new Wr.WR(xe,Qe),Lt=[ut,...pp(this.textModel,fe,ut)],kt=yC(Lt).map(ni=>Mi.L.fromPositions(ni));e.executeEdits("inlineSuggestion.accept",Lt.map(ni=>ps.k.replace(ni.range,ni.text))),e.setSelections(kt,"inlineCompletionPartialAccept"),e.revealPositionInCenterIfOutsideViewport(e.getPosition(),1)}finally{this._isAcceptingPartially=!1}if(l.source.provider.handlePartialAccept){const xe=wt.Q.fromPositions(l.range.getStartPosition(),Pg.W.ofText(ie).addToPosition(k)),Qe=e.getModel().getValueInRange(xe,1);l.source.provider.handlePartialAccept(l.source.inlineCompletions,l.sourceInlineCompletion,Qe.length,{kind:i})}}finally{l.source.removeRef()}}handleSuggestAccepted(e){const t=uc(e.toSingleTextEdit(),this.textModel),i=this._computeAugmentation(t,void 0);if(!i)return;const s=i.completion.inlineCompletion;s.source.provider.handlePartialAccept?.(s.source.inlineCompletions,s.sourceInlineCompletion,t.text.length,{kind:2})}};mp=oy([fp(9,Ri._Y),fp(10,Di.d),fp(11,Us.JZ)],mp);var Va;(function(h){h[h.Undo=0]="Undo",h[h.Redo=1]="Redo",h[h.AcceptWord=2]="AcceptWord",h[h.Other=3]="Other"})(Va||(Va={}));function pp(h,e,t){if(e.length===1)return[];const i=e[0],s=e.slice(1),o=t.range.getStartPosition(),l=t.range.getEndPosition(),g=h.getValueInRange(wt.Q.fromPositions(i,l)),k=nC(i,o);if(k.lineNumber<1)return(0,Ni.dz)(new Ni.D7(`positionWithinTextEdit line number should be bigger than 0.
			Invalid subtraction between ${i.toString()} and ${o.toString()}`)),[];const H=ry(t.text,k);return s.map(ee=>{const ie=yw(nC(ee,o),l),fe=h.getValueInRange(wt.Q.fromPositions(ee,ie)),Me=(0,Vi.Qp)(g,fe),xe=wt.Q.fromPositions(ee,ee.delta(0,Me));return new Wr.WR(xe,H)})}function ry(h,e){let t="";const i=(0,Vi.en)(h);for(let s=e.lineNumber-1;s<i.length;s++)t+=i[s].substring(s===e.lineNumber-1?e.column-1:0);return t}function yC(h){const e=Xi.t9.createSortPermutation(h,(0,Xi.VE)(o=>o.range,wt.Q.compareRangesUsingStarts)),i=new Wr.mF(e.apply(h)).getNewRanges();return e.inverse().apply(i).map(o=>o.getEndPosition())}var LC=c(46454),ay=c(70264),ly=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},DC=function(h,e){return function(t,i){e(t,i,h)}},Kh;class _p{constructor(e){this.name=e}select(e,t,i){if(i.length===0)return 0;const s=i[0].score[0];for(let o=0;o<i.length;o++){const{score:l,completion:g}=i[o];if(l[0]!==s)break;if(g.preselect)return o}return 0}}class EC extends _p{constructor(){super("first")}memorize(e,t,i){}toJSON(){}fromJSON(){}}class cy extends _p{constructor(){super("recentlyUsed"),this._cache=new Ai.qK(300,.66),this._seq=0}memorize(e,t,i){const s=`${e.getLanguageId()}/${i.textLabel}`;this._cache.set(s,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(e,t,i){if(i.length===0)return 0;const s=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(s))return super.select(e,t,i);const o=i[0].score[0];let l=-1,g=-1,k=-1;for(let H=0;H<i.length&&i[H].score[0]===o;H++){const ee=`${e.getLanguageId()}/${i[H].textLabel}`,ie=this._cache.peek(ee);if(ie&&ie.touch>k&&ie.type===i[H].completion.kind&&ie.insertText===i[H].completion.insertText&&(k=ie.touch,g=H),i[H].completion.preselect&&l===-1)return l=H}return g!==-1?g:l!==-1?l:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();const t=0;for(const[i,s]of e)s.touch=t,s.type=typeof s.type=="number"?s.type:Et.HC.fromString(s.type),this._cache.set(i,s);this._seq=this._cache.size}}class dy extends _p{constructor(){super("recentlyUsedByPrefix"),this._trie=ay.cB.forStrings(),this._seq=0}memorize(e,t,i){const{word:s}=e.getWordUntilPosition(t),o=`${e.getLanguageId()}/${s}`;this._trie.set(o,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(e,t,i){const{word:s}=e.getWordUntilPosition(t);if(!s)return super.select(e,t,i);const o=`${e.getLanguageId()}/${s}`;let l=this._trie.get(o);if(l||(l=this._trie.findSubstr(o)),l)for(let g=0;g<i.length;g++){const{kind:k,insertText:H}=i[g].completion;if(k===l.type&&H===l.insertText)return g}return super.select(e,t,i)}toJSON(){const e=[];return this._trie.forEach((t,i)=>e.push([i,t])),e.sort((t,i)=>-(t[1].touch-i[1].touch)).forEach((t,i)=>t[1].touch=i),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,i]of e)i.type=typeof i.type=="number"?i.type:Et.HC.fromString(i.type),this._trie.set(t,i)}}}let vp=class{static{Kh=this}static{this._strategyCtors=new Map([["recentlyUsedByPrefix",dy],["recentlyUsed",cy],["first",EC]])}static{this._storagePrefix="suggest/memories"}constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new vt.Cm,this._persistSoon=new hi.uC(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(i=>{i.reason===Ji.LP.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}select(e,t,i){return this._withStrategy(e,t).select(e,t,i)}_withStrategy(e,t){const i=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(this._strategy?.name!==i){this._saveState();const s=Kh._strategyCtors.get(i)||EC;this._strategy=new s;try{const l=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,g=this._storageService.get(`${Kh._storagePrefix}/${i}`,l);g&&this._strategy.fromJSON(JSON.parse(g))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store(`${Kh._storagePrefix}/${this._strategy.name}`,i,t,1)}}};vp=Kh=ly([DC(0,Ji.CS),DC(1,pt.pG)],vp);const Ug=(0,Ri.u1)("ISuggestMemories");(0,er.v)(Ug,vp,1);var hy=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},uy=function(h,e){return function(t,i){e(t,i,h)}},Cp;let zg=class{static{Cp=this}static{this.AtEnd=new et.N1("atEndOfWord",!1)}constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=Cp.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(i=>i.hasChanged(124)&&this._update()),this._update()}dispose(){this._configListener.dispose(),this._selectionListener?.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(124)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const i=this._editor.getModel(),s=this._editor.getSelection(),o=i.getWordAtPosition(s.getStartPosition());if(!o){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(o.endColumn===s.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};zg=Cp=hy([uy(1,et.fN)],zg);var gy=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},fy=function(h,e){return function(t,i){e(t,i,h)}},$h;let Id=class{static{$h=this}static{this.OtherSuggestions=new et.N1("hasOtherSuggestions",!1)}constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=$h.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){this._ckOtherSuggestions.reset(),this._listener?.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},i){if(e.items.length===0){this.reset();return}if($h._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=i,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,i){let s=i;for(let o=t.items.length;o>0&&(s=(s+t.items.length+(e?1:-1))%t.items.length,!(s===i||!t.items[s].completion.additionalTextEdits));o--);return s}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=$h._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};Id=$h=gy([fy(1,et.fN)],Id);class my{constructor(e,t,i,s){this._disposables=new vt.Cm,this._disposables.add(i.onDidSuggest(o=>{o.completionModel.items.length===0&&this.reset()})),this._disposables.add(i.onDidCancel(o=>{this.reset()})),this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(o=>{if(this._active&&!t.isFrozen()&&i.state!==0){const l=o.charCodeAt(o.length-1);this._active.acceptCharacters.has(l)&&e.getOption(0)&&s(this._active.item)}}))}_onItem(e){if(!e||!(0,Xi.EI)(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new xg.y;for(const i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var xC=c(77714);class Cr{async provideSelectionRanges(e,t){const i=[];for(const s of t){const o=[];i.push(o);const l=new Map;await new Promise(g=>Cr._bracketsRightYield(g,0,e,s,l)),await new Promise(g=>Cr._bracketsLeftYield(g,0,e,s,l,o))}return i}static{this._maxDuration=30}static{this._maxRounds=2}static _bracketsRightYield(e,t,i,s,o){const l=new Map,g=Date.now();for(;;){if(t>=Cr._maxRounds){e();break}if(!s){e();break}const k=i.bracketPairs.findNextBracket(s);if(!k){e();break}if(Date.now()-g>Cr._maxDuration){setTimeout(()=>Cr._bracketsRightYield(e,t+1,i,s,o));break}if(k.bracketInfo.isOpeningBracket){const ee=k.bracketInfo.bracketText,ie=l.has(ee)?l.get(ee):0;l.set(ee,ie+1)}else{const ee=k.bracketInfo.getOpeningBrackets()[0].bracketText;let ie=l.has(ee)?l.get(ee):0;if(ie-=1,l.set(ee,Math.max(0,ie)),ie<0){let fe=o.get(ee);fe||(fe=new xC.w,o.set(ee,fe)),fe.push(k.range)}}s=k.range.getEndPosition()}}static _bracketsLeftYield(e,t,i,s,o,l){const g=new Map,k=Date.now();for(;;){if(t>=Cr._maxRounds&&o.size===0){e();break}if(!s){e();break}const H=i.bracketPairs.findPrevBracket(s);if(!H){e();break}if(Date.now()-k>Cr._maxDuration){setTimeout(()=>Cr._bracketsLeftYield(e,t+1,i,s,o,l));break}if(H.bracketInfo.isOpeningBracket){const ie=H.bracketInfo.bracketText;let fe=g.has(ie)?g.get(ie):0;if(fe-=1,g.set(ie,Math.max(0,fe)),fe<0){const Me=o.get(ie);if(Me){const xe=Me.shift();Me.size===0&&o.delete(ie);const Qe=wt.Q.fromPositions(H.range.getEndPosition(),xe.getStartPosition()),ut=wt.Q.fromPositions(H.range.getStartPosition(),xe.getEndPosition());l.push({range:Qe}),l.push({range:ut}),Cr._addBracketLeading(i,ut,l)}}}else{const ie=H.bracketInfo.getOpeningBrackets()[0].bracketText,fe=g.has(ie)?g.get(ie):0;g.set(ie,fe+1)}s=H.range.getStartPosition()}}static _addBracketLeading(e,t,i){if(t.startLineNumber===t.endLineNumber)return;const s=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(s);o!==0&&o!==t.startColumn&&(i.push({range:wt.Q.fromPositions(new ui.y(s,o),t.getEndPosition())}),i.push({range:wt.Q.fromPositions(new ui.y(s,1),t.getEndPosition())}));const l=s-1;if(l>0){const g=e.getLineFirstNonWhitespaceColumn(l);g===t.startColumn&&g!==e.getLineLastNonWhitespaceColumn(l)&&(i.push({range:wt.Q.fromPositions(new ui.y(l,g),t.getEndPosition())}),i.push({range:wt.Q.fromPositions(new ui.y(l,1),t.getEndPosition())}))}}}class ua{static{this.None=new class extends ua{distance(){return 0}}}static async create(e,t){if(!t.getOption(119).localityBonus||!t.hasModel())return ua.None;const i=t.getModel(),s=t.getPosition();if(!e.canComputeWordRanges(i.uri))return ua.None;const[o]=await new Cr().provideSelectionRanges(i,[s]);if(o.length===0)return ua.None;const l=await e.computeWordRanges(i.uri,o[0].range);if(!l)return ua.None;const g=i.getWordUntilPosition(s);return delete l[g.word],new class extends ua{distance(k,H){if(!s.equals(t.getPosition()))return 0;if(H.kind===17)return 2<<20;const ee=typeof H.label=="string"?H.label:H.label.label,ie=l[ee];if((0,Xi.Ct)(ie))return 2<<20;const fe=(0,Xi.El)(ie,wt.Q.fromPositions(k),wt.Q.compareRangesUsingStarts),Me=fe>=0?ie[fe]:ie[Math.max(0,~fe-1)];let xe=o.length;for(const Qe of o){if(!wt.Q.containsRange(Qe.range,Me))break;xe-=1}return xe}}}}class kC{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}}class Cl{constructor(e,t,i,s,o,l,g=Xs.Nd.default,k=void 0){this.clipboardText=k,this._snippetCompareFn=Cl._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=s,this._options=o,this._refilterKind=1,this._lineContext=i,this._fuzzyScoreOptions=g,l==="top"?this._snippetCompareFn=Cl._compareCompletionItemsSnippetsUp:l==="bottom"&&(this._snippetCompareFn=Cl._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();const e=new Set;for(const[t,i]of this.getItemsByProvider())i.length>0&&i[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;const e=[],{leadingLineContent:t,characterCountDelta:i}=this._lineContext;let s="",o="";const l=this._refilterKind===1?this._items:this._filteredItems,g=[],k=!this._options.filterGraceful||l.length>2e3?Xs.dt:Xs.uU;for(let H=0;H<l.length;H++){const ee=l[H];if(ee.isInvalid)continue;const ie=this._itemsByProvider.get(ee.provider);ie?ie.push(ee):this._itemsByProvider.set(ee.provider,[ee]);const fe=ee.position.column-ee.editStart.column,Me=fe+i-(ee.position.column-this._column);if(s.length!==Me&&(s=Me===0?"":t.slice(-Me),o=s.toLowerCase()),ee.word=s,Me===0)ee.score=Xs.ne.Default;else{let xe=0;for(;xe<fe;){const Qe=s.charCodeAt(xe);if(Qe===32||Qe===9)xe+=1;else break}if(xe>=Me)ee.score=Xs.ne.Default;else if(typeof ee.completion.filterText=="string"){const Qe=k(s,o,xe,ee.completion.filterText,ee.filterTextLow,0,this._fuzzyScoreOptions);if(!Qe)continue;(0,Vi.W1)(ee.completion.filterText,ee.textLabel)===0?ee.score=Qe:(ee.score=(0,Xs.Jo)(s,o,xe,ee.textLabel,ee.labelLow,0),ee.score[0]=Qe[0])}else{const Qe=k(s,o,xe,ee.textLabel,ee.labelLow,0,this._fuzzyScoreOptions);if(!Qe)continue;ee.score=Qe}}ee.idx=H,ee.distance=this._wordDistance.distance(ee.position,ee.completion),g.push(ee),e.push(ee.textLabel.length)}this._filteredItems=g.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?(0,Xi.SO)(e.length-.85,e,(H,ee)=>H-ee):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return Cl._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return Cl._compareCompletionItems(e,t)}}var py=c(26390),_y=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},bl=function(h,e){return function(t,i){e(t,i,h)}},bp;class mc{static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),i=e.getPosition();t.tokenization.tokenizeIfCheap(i.lineNumber);const s=t.getWordAtPosition(i);return!(!s||s.endColumn!==i.column&&s.startColumn+1!==i.column||!isNaN(Number(s.word)))}constructor(e,t,i){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=i}}function vy(h,e,t){if(!e.getContextKeyValue(mo.inlineSuggestionVisible.key))return!0;const i=e.getContextKeyValue(mo.suppressSuggestions.key);return i!==void 0?!i:!h.getOption(62).suppressSuggestions}function Cy(h,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const i=e.getContextKeyValue(mo.suppressSuggestions.key);return i!==void 0?!i:!h.getOption(62).suppressSuggestions}let jg=bp=class{constructor(e,t,i,s,o,l,g,k,H){this._editor=e,this._editorWorkerService=t,this._clipboardService=i,this._telemetryService=s,this._logService=o,this._contextKeyService=l,this._configurationService=g,this._languageFeaturesService=k,this._envService=H,this._toDispose=new vt.Cm,this._triggerCharacterListener=new vt.Cm,this._triggerQuickSuggest=new hi.pc,this._triggerState=void 0,this._completionDisposables=new vt.Cm,this._onDidCancel=new zi.vl,this._onDidTrigger=new zi.vl,this._onDidSuggest=new zi.vl,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Mi.L(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let ee=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{ee=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{ee=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(ie=>{ee||this._onCursorChange(ie)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{!ee&&this._triggerState!==void 0&&this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){(0,vt.AS)(this._triggerCharacterListener),(0,vt.AS)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(92)||!this._editor.hasModel()||!this._editor.getOption(122))return;const e=new Map;for(const i of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const s of i.triggerCharacters||[]){let o=e.get(s);if(!o){o=new Set;const l=Gw();l&&o.add(l),e.set(s,o)}o.add(i)}const t=i=>{if(!Cy(this._editor,this._contextKeyService,this._configurationService)||mc.shouldAutoTrigger(this._editor))return;if(!i){const l=this._editor.getPosition();i=this._editor.getModel().getLineContent(l.lineNumber).substr(0,l.column-1)}let s="";(0,Vi.LJ)(i.charCodeAt(i.length-1))?(0,Vi.pc)(i.charCodeAt(i.length-2))&&(s=i.substr(i.length-2)):s=i.charAt(i.length-1);const o=e.get(s);if(o){const l=new Map;if(this._completionModel)for(const[g,k]of this._completionModel.getItemsByProvider())o.has(g)||l.set(g,k);this.trigger({auto:!0,triggerKind:1,triggerCharacter:s,retrigger:!!this._completionModel,clipboardText:this._completionModel?.clipboardText,completionOptions:{providerFilter:o,providerItemsToReuse:l}})}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),this._requestToken?.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._triggerState.auto,retrigger:!0}))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._triggerState===void 0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){xd.isAllOff(this._editor.getOption(90))||this._editor.getOption(119).snippetsPreventQuickSuggestions&&wo.get(this._editor)?.isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!mc.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const e=this._editor.getModel(),t=this._editor.getPosition(),i=this._editor.getOption(90);if(!xd.isAllOff(i)){if(!xd.isAllOn(i)){e.tokenization.tokenizeIfCheap(t.lineNumber);const s=e.tokenization.getLineTokens(t.lineNumber),o=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(xd.valueFor(i,o)!=="on")return}vy(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(e)&&this.trigger({auto:!0})}},this._editor.getOption(91)))}_refilterCompletionItems(){(0,hn.j)(this._editor.hasModel()),(0,hn.j)(this._triggerState!==void 0);const e=this._editor.getModel(),t=this._editor.getPosition(),i=new mc(e,t,{...this._triggerState,refilter:!0});this._onNewContext(i)}trigger(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=new mc(t,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:e.shy??!1,position:this._editor.getPosition()}),this._context=i;let s={triggerKind:e.triggerKind??0};e.triggerCharacter&&(s={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new Fi.Qi;const o=this._editor.getOption(113);let l=1;switch(o){case"top":l=0;break;case"bottom":l=2;break}const{itemKind:g,showDeprecated:k}=bp.createSuggestFilter(this._editor),H=new jh(l,e.completionOptions?.kindFilter??g,e.completionOptions?.providerFilter,e.completionOptions?.providerItemsToReuse,k),ee=ua.create(this._editorWorkerService,this._editor),ie=up(this._languageFeaturesService.completionProvider,t,this._editor.getPosition(),H,s,this._requestToken.token);Promise.all([ie,ee]).then(async([fe,Me])=>{if(this._requestToken?.dispose(),!this._editor.hasModel())return;let xe=e?.clipboardText;if(!xe&&fe.needsClipboard&&(xe=await this._clipboardService.readText()),this._triggerState===void 0)return;const Qe=this._editor.getModel(),ut=new mc(Qe,this._editor.getPosition(),e),Lt={...Xs.Nd.default,firstMatchCanBeWeak:!this._editor.getOption(119).matchOnWordStartOnly};if(this._completionModel=new Cl(fe.items,this._context.column,{leadingLineContent:ut.leadingLineContent,characterCountDelta:ut.column-this._context.column},Me,this._editor.getOption(119),this._editor.getOption(113),Lt,xe),this._completionDisposables.add(fe.disposable),this._onNewContext(ut),this._reportDurationsTelemetry(fe.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(const kt of fe.items)kt.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${kt.provider._debugDisplayName}`,kt.completion)}).catch(Ni.dz)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static createSuggestFilter(e){const t=new Set;e.getOption(113)==="none"&&t.add(27);const s=e.getOption(119);return s.showMethods||t.add(0),s.showFunctions||t.add(1),s.showConstructors||t.add(2),s.showFields||t.add(3),s.showVariables||t.add(4),s.showClasses||t.add(5),s.showStructs||t.add(6),s.showInterfaces||t.add(7),s.showModules||t.add(8),s.showProperties||t.add(9),s.showEvents||t.add(10),s.showOperators||t.add(11),s.showUnits||t.add(12),s.showValues||t.add(13),s.showConstants||t.add(14),s.showEnums||t.add(15),s.showEnumMembers||t.add(16),s.showKeywords||t.add(17),s.showWords||t.add(18),s.showColors||t.add(19),s.showFiles||t.add(20),s.showReferences||t.add(21),s.showColors||t.add(22),s.showFolders||t.add(23),s.showTypeParameters||t.add(24),s.showSnippets||t.add(27),s.showUsers||t.add(25),s.showIssues||t.add(26),{itemKind:t,showDeprecated:s.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if((0,Vi.UU)(e.leadingLineContent)!==(0,Vi.UU)(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(mc.shouldAutoTrigger(this._editor)&&this._context){const i=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:i}})}return}if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&e.leadingWord.word.length!==0){const t=new Map,i=new Set;for(const[s,o]of this._completionModel.getItemsByProvider())o.length>0&&o[0].container.incomplete?i.add(s):t.set(s,o);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:i,providerItemsToReuse:t}})}else{const t=this._completionModel.lineContext;let i=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){const s=mc.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(s&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto){this.cancel();return}else if(this._completionModel.lineContext=t,i=this._completionModel.items.length>0,i&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:i})}}}}};jg=bp=_y([bl(1,ir.IEditorWorkerService),bl(2,lr.h),bl(3,is.k),bl(4,gc.rr),bl(5,et.fN),bl(6,pt.pG),bl(7,_e.ILanguageFeaturesService),bl(8,py.k)],jg);class Sp{static{this._maxSelectionLength=51200}constructor(e,t){this._disposables=new vt.Cm,this._lastOvertyped=[],this._locked=!1,this._disposables.add(e.onWillType(()=>{if(this._locked||!e.hasModel())return;const i=e.getSelections(),s=i.length;let o=!1;for(let g=0;g<s;g++)if(!i[g].isEmpty()){o=!0;break}if(!o){this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];const l=e.getModel();for(let g=0;g<s;g++){const k=i[g];if(l.getValueLengthInRange(k)>Sp._maxSelectionLength)return;this._lastOvertyped[g]={value:l.getValueInRange(k),multiline:k.startLineNumber!==k.endLineNumber}}})),this._disposables.add(t.onDidTrigger(i=>{this._locked=!0})),this._disposables.add(t.onDidCancel(i=>{this._locked=!1}))}getLastOvertypedInfo(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}var by=c(23957),Sy=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},wp=function(h,e){return function(t,i){e(t,i,h)}};let yp=class{constructor(e,t,i,s,o){this._menuId=t,this._menuService=s,this._contextKeyService=o,this._menuDisposables=new vt.Cm,this.element=Se.BC(e,Se.$(".suggest-status-bar"));const l=g=>g instanceof Fe.Xe?i.createInstance(Ta.rr,g,{useComma:!0}):void 0;this._leftActions=new Xr.E(this.element,{actionViewItemProvider:l}),this._rightActions=new Xr.E(this.element,{actionViewItemProvider:l}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(this._menuId,this._contextKeyService),t=()=>{const i=[],s=[];for(const[o,l]of e.getActions())o==="left"?i.push(...l):s.push(...l);this._leftActions.clear(),this._leftActions.push(i),this._rightActions.clear(),this._rightActions.push(s)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};yp=Sy([wp(2,Ri._Y),wp(3,Fe.ez),wp(4,et.fN)],yp);var Lp=c(13511),wy=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},yy=function(h,e){return function(t,i){e(t,i,h)}};function Dp(h){return!!h&&!!(h.completion.documentation||h.completion.detail&&h.completion.detail!==h.completion.label)}let Ep=class{constructor(e,t){this._editor=e,this._onDidClose=new zi.vl,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new zi.vl,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new vt.Cm,this._renderDisposeable=new vt.Cm,this._borderWidth=1,this._size=new Se.fg(330,0),this.domNode=Se.$(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(Ps.T,{editor:e}),this._body=Se.$(".body"),this._scrollbar=new Lp.MU(this._body,{alwaysConsumeMouseWheel:!0}),Se.BC(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=Se.BC(this._body,Se.$(".header")),this._close=Se.BC(this._header,Se.$("span"+mn.L.asCSSSelector(Dt.W.close))),this._close.title=Z.kg("details.close","Close"),this._type=Se.BC(this._header,Se.$("p.type")),this._docs=Se.BC(this._body,Se.$("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(50)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(50),i=t.getMassagedFontFamily(),s=e.get(120)||t.fontSize,o=e.get(121)||t.lineHeight,l=t.fontWeight,g=`${s}px`,k=`${o}px`;this.domNode.style.fontSize=g,this.domNode.style.lineHeight=`${o/s}`,this.domNode.style.fontWeight=l,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=k,this._close.style.width=k}getLayoutInfo(){const e=this._editor.getOption(121)||this._editor.getOption(50).lineHeight,t=this._borderWidth,i=t*2;return{lineHeight:e,borderWidth:t,borderHeight:i,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=Z.kg("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){this._renderDisposeable.clear();let{detail:i,documentation:s}=e.completion;if(t){let o="";o+=`score: ${e.score[0]}
`,o+=`prefix: ${e.word??"(no prefix)"}
`,o+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,o+=`distance: ${e.distance} (localityBonus-setting)
`,o+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,o+=`commit_chars: ${e.completion.commitCharacters?.join("")}
`,s=new nn.Bc().appendCodeblock("empty",o),i=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!Dp(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),i){const o=i.length>1e5?`${i.substr(0,1e5)}\u2026`:i;this._type.textContent=o,this._type.title=o,Se.WU(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(o))}else Se.w_(this._type),this._type.title="",Se.jD(this._type),this.domNode.classList.add("no-type");if(Se.w_(this._docs),typeof s=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=s;else if(s){this._docs.classList.add("markdown-docs"),Se.w_(this._docs);const o=this._markdownRenderer.render(s);this._docs.appendChild(o.element),this._renderDisposeable.add(o),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=o=>{o.preventDefault(),o.stopPropagation()},this._close.onclick=o=>{o.preventDefault(),o.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get isEmpty(){return this.domNode.classList.contains("no-docs")}get size(){return this._size}layout(e,t){const i=new Se.fg(e,t);Se.fg.equals(i,this._size)||(this._size=i,Se.Ej(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};Ep=wy([yy(1,Ri._Y)],Ep);class Ly{constructor(e,t){this.widget=e,this._editor=t,this.allowEditorOverflow=!0,this._disposables=new vt.Cm,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new $u,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let i,s,o=0,l=0;this._disposables.add(this._resizable.onDidWillResize(()=>{i=this._topLeft,s=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(g=>{if(i&&s){this.widget.layout(g.dimension.width,g.dimension.height);let k=!1;g.west&&(l=s.width-g.dimension.width,k=!0),g.north&&(o=s.height-g.dimension.height,k=!0),k&&this._applyTopLeft({top:i.top+o,left:i.left+l})}g.done&&(i=void 0,s=void 0,o=0,l=0,this._userSize=g.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{this._anchorBox&&this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){const i=e.getBoundingClientRect();this._anchorBox=i,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,t)}_placeAtAnchor(e,t,i){const s=Se.tG(this.getDomNode().ownerDocument.body),o=this.widget.getLayoutInfo(),l=new Se.fg(220,2*o.lineHeight),g=e.top,k=function(){const pi=s.width-(e.left+e.width+o.borderWidth+o.horizontalPadding),pn=-o.borderWidth+e.left+e.width,ln=new Se.fg(pi,s.height-e.top-o.borderHeight-o.verticalPadding),Fn=ln.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:g,left:pn,fit:pi-t.width,maxSizeTop:ln,maxSizeBottom:Fn,minSize:l.with(Math.min(pi,l.width))}}(),H=function(){const pi=e.left-o.borderWidth-o.horizontalPadding,pn=Math.max(o.horizontalPadding,e.left-t.width-o.borderWidth),ln=new Se.fg(pi,s.height-e.top-o.borderHeight-o.verticalPadding),Fn=ln.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:g,left:pn,fit:pi-t.width,maxSizeTop:ln,maxSizeBottom:Fn,minSize:l.with(Math.min(pi,l.width))}}(),ee=function(){const pi=e.left,pn=-o.borderWidth+e.top+e.height,ln=new Se.fg(e.width-o.borderHeight,s.height-e.top-e.height-o.verticalPadding);return{top:pn,left:pi,fit:ln.height-t.height,maxSizeBottom:ln,maxSizeTop:ln,minSize:l.with(ln.width)}}(),ie=[k,H,ee],fe=ie.find(pi=>pi.fit>=0)??ie.sort((pi,pn)=>pn.fit-pi.fit)[0],Me=e.top+e.height-o.borderHeight;let xe,Qe=t.height;const ut=Math.max(fe.maxSizeTop.height,fe.maxSizeBottom.height);Qe>ut&&(Qe=ut);let Lt;i?Qe<=fe.maxSizeTop.height?(xe=!0,Lt=fe.maxSizeTop):(xe=!1,Lt=fe.maxSizeBottom):Qe<=fe.maxSizeBottom.height?(xe=!1,Lt=fe.maxSizeBottom):(xe=!0,Lt=fe.maxSizeTop);let{top:kt,left:ni}=fe;!xe&&Qe>e.height&&(kt=Me-Qe);const gi=this._editor.getDomNode();if(gi){const pi=gi.getBoundingClientRect();kt-=pi.top,ni-=pi.left}this._applyTopLeft({left:ni,top:kt}),this._resizable.enableSashes(!xe,fe===k,xe,fe!==k),this._resizable.minSize=fe.minSize,this._resizable.maxSize=Lt,this._resizable.layout(Qe,Math.min(Lt.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this._editor.layoutOverlayWidget(this)}}var Kg=c(2009),$g=c(55766),Dy=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},xp=function(h,e){return function(t,i){e(t,i,h)}};function IC(h){return`suggest-aria-id:${h}`}const Ey=(0,rs.pU)("suggest-more-info",Dt.W.chevronRight,Z.kg("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),xy=new class Eu{static{this._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/}static{this._regexStrict=new RegExp(`^${Eu._regexRelaxed.source}$`,"i")}extract(e,t){if(e.textLabel.match(Eu._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(Eu._regexStrict))return t[0]=e.completion.detail,!0;if(e.completion.documentation){const i=typeof e.completion.documentation=="string"?e.completion.documentation:e.completion.documentation.value,s=Eu._regexRelaxed.exec(i);if(s&&(s.index===0||s.index+s[0].length===i.length))return t[0]=s[0],!0}return!1}};let kp=class{constructor(e,t,i,s){this._editor=e,this._modelService=t,this._languageService=i,this._themeService=s,this._onDidToggleDetails=new zi.vl,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=new vt.Cm,i=e;i.classList.add("show-file-icons");const s=(0,Se.BC)(e,(0,Se.$)(".icon")),o=(0,Se.BC)(s,(0,Se.$)("span.colorspan")),l=(0,Se.BC)(e,(0,Se.$)(".contents")),g=(0,Se.BC)(l,(0,Se.$)(".main")),k=(0,Se.BC)(g,(0,Se.$)(".icon-label.codicon")),H=(0,Se.BC)(g,(0,Se.$)("span.left")),ee=(0,Se.BC)(g,(0,Se.$)("span.right")),ie=new hg.s(H,{supportHighlights:!0,supportIcons:!0});t.add(ie);const fe=(0,Se.BC)(H,(0,Se.$)("span.signature-label")),Me=(0,Se.BC)(H,(0,Se.$)("span.qualifier-label")),xe=(0,Se.BC)(ee,(0,Se.$)("span.details-label")),Qe=(0,Se.BC)(ee,(0,Se.$)("span.readMore"+mn.L.asCSSSelector(Ey)));return Qe.title=Z.kg("readMore","Read More"),{root:i,left:H,right:ee,icon:s,colorspan:o,iconLabel:ie,iconContainer:k,parametersLabel:fe,qualifierLabel:Me,detailsLabel:xe,readMore:Qe,disposables:t,configureFont:()=>{const Lt=this._editor.getOptions(),kt=Lt.get(50),ni=kt.getMassagedFontFamily(),gi=kt.fontFeatureSettings,pi=Lt.get(120)||kt.fontSize,pn=Lt.get(121)||kt.lineHeight,ln=kt.fontWeight,Fn=kt.letterSpacing,Ws=`${pi}px`,Rs=`${pn}px`,Yo=`${Fn}px`;i.style.fontSize=Ws,i.style.fontWeight=ln,i.style.letterSpacing=Yo,g.style.fontFamily=ni,g.style.fontFeatureSettings=gi,g.style.lineHeight=Rs,s.style.height=Rs,s.style.width=Rs,Qe.style.height=Rs,Qe.style.width=Rs}}}renderElement(e,t,i){i.configureFont();const{completion:s}=e;i.root.id=IC(t),i.colorspan.style.backgroundColor="";const o={labelEscapeNewLines:!0,matches:(0,Xs.WJ)(e.score)},l=[];if(s.kind===19&&xy.extract(e,l))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=l[0];else if(s.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";const g=(0,Kg.getIconClasses)(this._modelService,this._languageService,Ot.r.from({scheme:"fake",path:e.textLabel}),$g.p.FILE),k=(0,Kg.getIconClasses)(this._modelService,this._languageService,Ot.r.from({scheme:"fake",path:s.detail}),$g.p.FILE);o.extraClasses=g.length>k.length?g:k}else s.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(i.icon.className="icon hide",i.iconContainer.className="icon hide",o.extraClasses=[(0,Kg.getIconClasses)(this._modelService,this._languageService,Ot.r.from({scheme:"fake",path:e.textLabel}),$g.p.FOLDER),(0,Kg.getIconClasses)(this._modelService,this._languageService,Ot.r.from({scheme:"fake",path:s.detail}),$g.p.FOLDER)].flat()):(i.icon.className="icon hide",i.iconContainer.className="",i.iconContainer.classList.add("suggest-icon",...mn.L.asClassNameArray(Et.HC.toIcon(s.kind))));s.tags&&s.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,o),typeof s.label=="string"?(i.parametersLabel.textContent="",i.detailsLabel.textContent=Ip(s.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=Ip(s.label.detail||""),i.detailsLabel.textContent=Ip(s.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(119).showInlineDetails?(0,Se.WU)(i.detailsLabel):(0,Se.jD)(i.detailsLabel),Dp(e)?(i.right.classList.add("can-expand-details"),(0,Se.WU)(i.readMore),i.readMore.onmousedown=g=>{g.stopPropagation(),g.preventDefault()},i.readMore.onclick=g=>{g.stopPropagation(),g.preventDefault(),this._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),(0,Se.jD)(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};kp=Dy([xp(1,Zs.IModelService),xp(2,nr.L),xp(3,$i.Gy)],kp);function Ip(h){return h.replace(/\r\n|\r|\n/g,"")}var ky=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Gg=function(h,e){return function(t,i){e(t,i,h)}},Md;(0,Tt.x1A)("editorSuggestWidget.background",Tt.CgL,Z.kg("editorSuggestWidgetBackground","Background color of the suggest widget.")),(0,Tt.x1A)("editorSuggestWidget.border",Tt.sIe,Z.kg("editorSuggestWidgetBorder","Border color of the suggest widget."));const Iy=(0,Tt.x1A)("editorSuggestWidget.foreground",Tt.By2,Z.kg("editorSuggestWidgetForeground","Foreground color of the suggest widget."));(0,Tt.x1A)("editorSuggestWidget.selectedForeground",Tt.nH,Z.kg("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),(0,Tt.x1A)("editorSuggestWidget.selectedIconForeground",Tt.c7i,Z.kg("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const My=(0,Tt.x1A)("editorSuggestWidget.selectedBackground",Tt.AlL,Z.kg("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));(0,Tt.x1A)("editorSuggestWidget.highlightForeground",Tt.QI5,Z.kg("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),(0,Tt.x1A)("editorSuggestWidget.focusHighlightForeground",Tt.eMz,Z.kg("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused.")),(0,Tt.x1A)("editorSuggestWidgetStatus.foreground",(0,Tt.JO0)(Iy,.5),Z.kg("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class Ny{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof jo}`}restore(){const e=this._service.get(this._key,0)??"";try{const t=JSON.parse(e);if(Se.fg.is(t))return Se.fg.lift(t)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let Mp=class{static{Md=this}static{this.LOADING_MESSAGE=Z.kg("suggestWidget.loading","Loading...")}static{this.NO_SUGGESTIONS_MESSAGE=Z.kg("suggestWidget.noSuggestions","No suggestions.")}constructor(e,t,i,s,o){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._pendingLayout=new vt.HE,this._pendingShowDetails=new vt.HE,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new hi.pc,this._disposables=new vt.Cm,this._onDidSelect=new zi.fV,this._onDidFocus=new zi.fV,this._onDidHide=new zi.vl,this._onDidShow=new zi.vl,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new zi.vl,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new $u,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new Ty(this,e),this._persistedSize=new Ny(t,e);class l{constructor(Me,xe,Qe=!1,ut=!1){this.persistedSize=Me,this.currentSize=xe,this.persistHeight=Qe,this.persistWidth=ut}}let g;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),g=new l(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(fe=>{if(this._resize(fe.dimension.width,fe.dimension.height),g&&(g.persistHeight=g.persistHeight||!!fe.north||!!fe.south,g.persistWidth=g.persistWidth||!!fe.east||!!fe.west),!!fe.done){if(g){const{itemHeight:Me,defaultSize:xe}=this.getLayoutInfo(),Qe=Math.round(Me/2);let{width:ut,height:Lt}=this.element.size;(!g.persistHeight||Math.abs(g.currentSize.height-Lt)<=Qe)&&(Lt=g.persistedSize?.height??xe.height),(!g.persistWidth||Math.abs(g.currentSize.width-ut)<=Qe)&&(ut=g.persistedSize?.width??xe.width),this._persistedSize.store(new Se.fg(ut,Lt))}this._contentWidget.unlockPreference(),g=void 0}})),this._messageElement=Se.BC(this.element.domNode,Se.$(".message")),this._listElement=Se.BC(this.element.domNode,Se.$(".tree"));const k=this._disposables.add(o.createInstance(Ep,this.editor));k.onDidClose(this.toggleDetails,this,this._disposables),this._details=new Ly(k,this.editor);const H=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(119).showIcons);H();const ee=o.createInstance(kp,this.editor);this._disposables.add(ee),this._disposables.add(ee.onDidToggleDetails(()=>this.toggleDetails())),this._list=new nl.B8("SuggestWidget",this._listElement,{getHeight:fe=>this.getLayoutInfo().itemHeight,getTemplateId:fe=>"suggestion"},[ee],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>Z.kg("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:fe=>{let Me=fe.textLabel;if(typeof fe.completion.label!="string"){const{detail:Lt,description:kt}=fe.completion.label;Lt&&kt?Me=Z.kg("label.full","{0} {1}, {2}",Me,Lt,kt):Lt?Me=Z.kg("label.detail","{0} {1}",Me,Lt):kt&&(Me=Z.kg("label.desc","{0}, {1}",Me,kt))}if(!fe.isResolved||!this._isDetailsVisible())return Me;const{documentation:xe,detail:Qe}=fe.completion,ut=Vi.GP("{0}{1}",Qe||"",xe?typeof xe=="string"?xe:xe.value:"");return Z.kg("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",Me,ut)}}}),this._list.style((0,Io.t8)({listInactiveFocusBackground:My,listInactiveFocusOutline:Tt.buw})),this._status=o.createInstance(yp,this.element.domNode,vl);const ie=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(119).showStatusBar);ie(),this._disposables.add(s.onDidColorThemeChange(fe=>this._onThemeChange(fe))),this._onThemeChange(s.getColorTheme()),this._disposables.add(this._list.onMouseDown(fe=>this._onListMouseDownOrTap(fe))),this._disposables.add(this._list.onTap(fe=>this._onListMouseDownOrTap(fe))),this._disposables.add(this._list.onDidChangeSelection(fe=>this._onListSelection(fe))),this._disposables.add(this._list.onDidChangeFocus(fe=>this._onListFocus(fe))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(fe=>{fe.hasChanged(119)&&(ie(),H()),this._completionModel&&(fe.hasChanged(50)||fe.hasChanged(120)||fe.hasChanged(121))&&this._list.splice(0,this._list.length,this._completionModel.items)})),this._ctxSuggestWidgetVisible=bn.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=bn.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=bn.MultipleSuggestions.bindTo(i),this._ctxSuggestWidgetHasFocusedSuggestion=bn.HasFocusedSuggestion.bindTo(i),this._disposables.add(Se.b2(this._details.widget.domNode,"keydown",fe=>{this._onDetailsKeydown.fire(fe)})),this._disposables.add(this.editor.onMouseDown(fe=>this._onEditorMouseDown(fe)))}dispose(){this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),this._loadingTimeout?.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=(0,Rr.Bb)(e.type)?2:1}_onListFocus(e){if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const t=e.elements[0],i=e.indexes[0];t!==this._focusedItem&&(this._currentSuggestionDetails?.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=t,this._list.reveal(i),this._currentSuggestionDetails=(0,hi.SS)(async s=>{const o=(0,hi.EQ)(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),l=s.onCancellationRequested(()=>o.dispose());try{return await t.resolve(s)}finally{o.dispose(),l.dispose()}}),this._currentSuggestionDetails.then(()=>{i>=this._list.length||t!==this._list.element(i)||(this._ignoreFocusEvents=!0,this._list.splice(i,1,[t]),this._list.setFocus([i]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:IC(i)}))}).catch(Ni.dz)),this._onDidFocus.fire({item:t,index:i,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Se.jD(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=Md.LOADING_MESSAGE,Se.jD(this._listElement,this._status.element),Se.WU(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,(0,dn.h5)(Md.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=Md.NO_SUGGESTIONS_MESSAGE,Se.jD(this._listElement,this._status.element),Se.WU(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,(0,dn.h5)(Md.NO_SUGGESTIONS_MESSAGE);break;case 3:Se.jD(this._messageElement),Se.WU(this._listElement,this._status.element),this._show();break;case 4:Se.jD(this._messageElement),Se.WU(this._listElement,this._status.element),this._show();break;case 5:Se.jD(this._messageElement),Se.WU(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=(0,hi.EQ)(()=>this._setState(1),t)))}showSuggestions(e,t,i,s,o){if(this._contentWidget.setPosition(this.editor.getPosition()),this._loadingTimeout?.dispose(),this._currentSuggestionDetails?.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&this._state!==2&&this._state!==0){this._setState(4);return}const l=this._completionModel.items.length,g=l===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(l>1),g){this._setState(s?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(t,0),this._list.setFocus(o?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=Se.Oq(Se.zk(this.element.domNode),()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(Dp(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._pendingShowDetails.value=Se.Oq(Se.zk(this.element.domNode),()=>{this._pendingShowDetails.clear(),this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._details.widget.isEmpty?this._details.hide():(this._positionDetails(),this.element.domNode.classList.add("shows-details")),this.editor.focus()})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){this._pendingLayout.clear(),this._pendingShowDetails.clear(),this._loadingTimeout?.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const e=this._persistedSize.restore(),t=Math.ceil(this.getLayoutInfo().itemHeight*4.3);e&&e.height<t&&this._persistedSize.store(e.with(void 0,t))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails())}_layout(e){if(!this.editor.hasModel()||!this.editor.getDomNode())return;const t=Se.tG(this.element.domNode.ownerDocument.body),i=this.getLayoutInfo();e||(e=i.defaultSize);let s=e.height,o=e.width;if(this._status.element.style.height=`${i.itemHeight}px`,this._state===2||this._state===1)s=i.itemHeight+i.borderHeight,o=i.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Se.fg(o,s),this._contentWidget.setPreference(2);else{const l=t.width-i.borderHeight-2*i.horizontalPadding;o>l&&(o=l);const g=this._completionModel?this._completionModel.stats.pLabelLen*i.typicalHalfwidthCharacterWidth:o,k=i.statusBarHeight+this._list.contentHeight+i.borderHeight,H=i.itemHeight+i.statusBarHeight,ee=Se.BK(this.editor.getDomNode()),ie=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),fe=ee.top+ie.top+ie.height,Me=Math.min(t.height-fe-i.verticalPadding,k),xe=ee.top+ie.top-i.verticalPadding,Qe=Math.min(xe,k);let ut=Math.min(Math.max(Qe,Me)+i.borderHeight,k);s===this._cappedHeight?.capped&&(s=this._cappedHeight.wanted),s<H&&(s=H),s>ut&&(s=ut),s>Me||this._forceRenderingAbove&&xe>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),ut=Qe):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),ut=Me),this.element.preferredSize=new Se.fg(g,i.defaultSize.height),this.element.maxSize=new Se.fg(l,ut),this.element.minSize=new Se.fg(220,H),this._cappedHeight=s===k?{wanted:this._cappedHeight?.wanted??e.height,capped:s}:void 0}this._resize(o,s)}_resize(e,t){const{width:i,height:s}=this.element.maxSize;e=Math.min(i,e),t=Math.min(s,t);const{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=`${t-o}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,this._contentWidget.getPosition()?.preference[0]===2)}getLayoutInfo(){const e=this.editor.getOption(50),t=(0,by.qE)(this.editor.getOption(121)||e.lineHeight,8,1e3),i=!this.editor.getOption(119).showStatusBar||this._state===2||this._state===1?0:t,s=this._details.widget.borderWidth,o=2*s;return{itemHeight:t,statusBarHeight:i,borderWidth:s,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Se.fg(430,i+12*t+o)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};Mp=Md=ky([Gg(1,Ji.CS),Gg(2,et.fN),Gg(3,$i.Gy),Gg(4,Ri._Y)],Mp);class Ty{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:i,horizontalPadding:s}=this._widget.getLayoutInfo();return new Se.fg(t+2*i+s,e+2*i)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var Ry=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Nd=function(h,e){return function(t,i){e(t,i,h)}},Np;const Py=!1;class Ay{constructor(e,t){if(this._model=e,this._position=t,this._decorationOptions=Ki.kI.register({description:"suggest-line-suffix",stickiness:1}),e.getLineMaxColumn(t.lineNumber)!==t.column){const s=e.getOffsetAt(t),o=e.getPositionAt(s+1);e.changeDecorations(l=>{this._marker&&l.removeDecoration(this._marker),this._marker=l.addDecoration(wt.Q.fromPositions(t,o),this._decorationOptions)})}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.changeDecorations(e=>{e.removeDecoration(this._marker),this._marker=void 0})}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let br=class{static{Np=this}static{this.ID="editor.contrib.suggestController"}static get(e){return e.getContribution(Np.ID)}constructor(e,t,i,s,o,l,g){this._memoryService=t,this._commandService=i,this._contextKeyService=s,this._instantiationService=o,this._logService=l,this._telemetryService=g,this._lineSuffix=new vt.HE,this._toDispose=new vt.Cm,this._selectors=new Oy(ie=>ie.priority),this._onWillInsertSuggestItem=new zi.vl,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=e,this.model=o.createInstance(jg,this.editor),this._selectors.register({priority:0,select:(ie,fe,Me)=>this._memoryService.select(ie,fe,Me)});const k=bn.InsertMode.bindTo(s);k.set(e.getOption(119).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>k.set(e.getOption(119).insertMode))),this.widget=this._toDispose.add(new Se.Ij((0,Se.zk)(e.getDomNode()),()=>{const ie=this._instantiationService.createInstance(Mp,this.editor);this._toDispose.add(ie),this._toDispose.add(ie.onDidSelect(ut=>this._insertSuggestion(ut,0),this));const fe=new my(this.editor,ie,this.model,ut=>this._insertSuggestion(ut,2));this._toDispose.add(fe);const Me=bn.MakesTextEdit.bindTo(this._contextKeyService),xe=bn.HasInsertAndReplaceRange.bindTo(this._contextKeyService),Qe=bn.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add((0,vt.s)(()=>{Me.reset(),xe.reset(),Qe.reset()})),this._toDispose.add(ie.onDidFocus(({item:ut})=>{const Lt=this.editor.getPosition(),kt=ut.editStart.column,ni=Lt.column;let gi=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!ut.completion.additionalTextEdits&&!(ut.completion.insertTextRules&4)&&ni-kt===ut.completion.insertText.length&&(gi=this.editor.getModel().getValueInRange({startLineNumber:Lt.lineNumber,startColumn:kt,endLineNumber:Lt.lineNumber,endColumn:ni})!==ut.completion.insertText),Me.set(gi),xe.set(!ui.y.equals(ut.editInsertEnd,ut.editReplaceEnd)),Qe.set(!!ut.provider.resolveCompletionItem||!!ut.completion.documentation||ut.completion.detail!==ut.completion.label)})),this._toDispose.add(ie.onDetailsKeyDown(ut=>{if(ut.toKeyCodeChord().equals(new LC.dG(!0,!1,!1,!1,33))||Mn.zx&&ut.toKeyCodeChord().equals(new LC.dG(!1,!1,!1,!0,33))){ut.stopPropagation();return}ut.toKeyCodeChord().isModifierKey()||this.editor.focus()})),ie})),this._overtypingCapturer=this._toDispose.add(new Se.Ij((0,Se.zk)(e.getDomNode()),()=>this._toDispose.add(new Sp(this.editor,this.model)))),this._alternatives=this._toDispose.add(new Se.Ij((0,Se.zk)(e.getDomNode()),()=>this._toDispose.add(new Id(this.editor,this._contextKeyService)))),this._toDispose.add(o.createInstance(zg,e)),this._toDispose.add(this.model.onDidTrigger(ie=>{this.widget.value.showTriggered(ie.auto,ie.shy?250:50),this._lineSuffix.value=new Ay(this.editor.getModel(),ie.position)})),this._toDispose.add(this.model.onDidSuggest(ie=>{if(ie.triggerOptions.shy)return;let fe=-1;for(const xe of this._selectors.itemsOrderedByPriorityDesc)if(fe=xe.select(this.editor.getModel(),this.editor.getPosition(),ie.completionModel.items),fe!==-1)break;if(fe===-1&&(fe=0),this.model.state===0)return;let Me=!1;if(ie.triggerOptions.auto){const xe=this.editor.getOption(119);xe.selectionMode==="never"||xe.selectionMode==="always"?Me=xe.selectionMode==="never":xe.selectionMode==="whenTriggerCharacter"?Me=ie.triggerOptions.triggerKind!==1:xe.selectionMode==="whenQuickSuggestion"&&(Me=ie.triggerOptions.triggerKind===1&&!ie.triggerOptions.refilter)}this.widget.value.showSuggestions(ie.completionModel,fe,ie.isFrozen,ie.triggerOptions.auto,Me)})),this._toDispose.add(this.model.onDidCancel(ie=>{ie.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{Py||(this.model.cancel(),this.model.clear())}));const H=bn.AcceptSuggestionsOnEnter.bindTo(s),ee=()=>{const ie=this.editor.getOption(1);H.set(ie==="on"||ie==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>ee())),ee()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const i=wo.get(this.editor);if(!i)return;this._onWillInsertSuggestItem.fire({item:e.item});const s=this.editor.getModel(),o=s.getAlternativeVersionId(),{item:l}=e,g=[],k=new Fi.Qi;t&1||this.editor.pushUndoStop();const H=this.getOverwriteInfo(l,!!(t&8));this._memoryService.memorize(s,this.editor.getPosition(),l);const ee=l.isResolved;let ie=-1,fe=-1;if(Array.isArray(l.completion.additionalTextEdits)){this.model.cancel();const xe=ki.D.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",l.completion.additionalTextEdits.map(Qe=>{let ut=wt.Q.lift(Qe.range);if(ut.startLineNumber===l.position.lineNumber&&ut.startColumn>l.position.column){const Lt=this.editor.getPosition().column-l.position.column,kt=Lt,ni=wt.Q.spansMultipleLines(ut)?0:Lt;ut=new wt.Q(ut.startLineNumber,ut.startColumn+kt,ut.endLineNumber,ut.endColumn+ni)}return ps.k.replaceMove(ut,Qe.text)})),xe.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!ee){const xe=new eo.W;let Qe;const ut=s.onDidChangeContent(gi=>{if(gi.isFlush){k.cancel(),ut.dispose();return}for(const pi of gi.changes){const pn=wt.Q.getEndPosition(pi.range);(!Qe||ui.y.isBefore(pn,Qe))&&(Qe=pn)}}),Lt=t;t|=2;let kt=!1;const ni=this.editor.onWillType(()=>{ni.dispose(),kt=!0,Lt&2||this.editor.pushUndoStop()});g.push(l.resolve(k.token).then(()=>{if(!l.completion.additionalTextEdits||k.token.isCancellationRequested)return;if(Qe&&l.completion.additionalTextEdits.some(pi=>ui.y.isBefore(Qe,wt.Q.getStartPosition(pi.range))))return!1;kt&&this.editor.pushUndoStop();const gi=ki.D.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",l.completion.additionalTextEdits.map(pi=>ps.k.replaceMove(wt.Q.lift(pi.range),pi.text))),gi.restoreRelativeVerticalPositionOfCursor(this.editor),(kt||!(Lt&2))&&this.editor.pushUndoStop(),!0}).then(gi=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",xe.elapsed(),gi),fe=gi===!0?1:gi===!1?0:-2}).finally(()=>{ut.dispose(),ni.dispose()}))}let{insertText:Me}=l.completion;if(l.completion.insertTextRules&4||(Me=ys.escape(Me)),this.model.cancel(),i.insert(Me,{overwriteBefore:H.overwriteBefore,overwriteAfter:H.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(l.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),l.completion.command)if(l.completion.command.id===Qg.id)this.model.trigger({auto:!0,retrigger:!0});else{const xe=new eo.W;g.push(this._commandService.executeCommand(l.completion.command.id,...l.completion.command.arguments?[...l.completion.command.arguments]:[]).catch(Qe=>{l.completion.extensionId?(0,Ni.M_)(Qe):(0,Ni.dz)(Qe)}).finally(()=>{ie=xe.elapsed()}))}t&4&&this._alternatives.value.set(e,xe=>{for(k.cancel();s.canUndo();){o!==s.getAlternativeVersionId()&&s.undo(),this._insertSuggestion(xe,3|(t&8?8:0));break}}),this._alertCompletionItem(l),Promise.all(g).finally(()=>{this._reportSuggestionAcceptedTelemetry(l,s,ee,ie,fe,e.index,e.model.items),this.model.clear(),k.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,i,s,o,l,g){if(Math.floor(Math.random()*100)===0)return;const k=new Map;for(let fe=0;fe<Math.min(30,g.length);fe++){const Me=g[fe].textLabel;k.has(Me)?k.get(Me).push(fe):k.set(Me,[fe])}const H=k.get(e.textLabel),ie=H&&H.length>1?H[0]:-1;this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:e.extensionId?.value??"unknown",providerId:e.provider._debugDisplayName??"unknown",kind:e.completion.kind,basenameHash:(0,F0.tW)((0,Ee.P8)(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:(0,Ee.LC)(t.uri),resolveInfo:e.provider.resolveCompletionItem?i?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:s,additionalEditsAsync:o,index:l,firstIndex:ie})}getOverwriteInfo(e,t){(0,hn.j)(this.editor.hasModel());let i=this.editor.getOption(119).insertMode==="replace";t&&(i=!i);const s=e.position.column-e.editStart.column,o=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,l=this.editor.getPosition().column-e.position.column,g=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:s+l,overwriteAfter:o+g}}_alertCompletionItem(e){if((0,Xi.EI)(e.completion.additionalTextEdits)){const t=Z.kg("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);(0,dn.xE)(t)}}triggerSuggest(e,t,i){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,completionOptions:{providerFilter:e,kindFilter:i?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),i=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},s=o=>{if(o.completion.insertTextRules&4||o.completion.additionalTextEdits)return!0;const l=this.editor.getPosition(),g=o.editStart.column,k=l.column;return k-g!==o.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:l.lineNumber,startColumn:g,endLineNumber:l.lineNumber,endColumn:k})!==o.completion.insertText};zi.Jh.once(this.model.onDidTrigger)(o=>{const l=[];zi.Jh.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{(0,vt.AS)(l),i()},void 0,l),this.model.onDidSuggest(({completionModel:g})=>{if((0,vt.AS)(l),g.items.length===0){i();return}const k=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),g.items),H=g.items[k];if(!s(H)){i();return}this.editor.pushUndoStop(),this._insertSuggestion({index:k,item:H,model:g},7)},void 0,l)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const i=this.widget.value.getFocusedItem();let s=0;e&&(s|=4),t&&(s|=8),this._insertSuggestion(i,s)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};br=Np=Ry([Nd(1,Ug),Nd(2,Di.d),Nd(3,et.fN),Nd(4,Ri._Y),Nd(5,gc.rr),Nd(6,is.k)],br);class Oy{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,i)=>this.prioritySelector(i)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class Qg extends we.ks{static{this.id="editor.action.triggerSuggest"}constructor(){super({id:Qg.id,label:Z.kg("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:et.M$.and(ke.R.writable,ke.R.hasCompletionItemProvider,bn.Visible.toNegated()),kbOpts:{kbExpr:ke.R.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,i){const s=br.get(t);if(!s)return;let o;i&&typeof i=="object"&&i.auto===!0&&(o=!0),s.triggerSuggest(void 0,o,void 0)}}(0,we.HW)(br.ID,br,2),(0,we.Fl)(Qg);const Go=190,yo=we.DX.bindToContribution(br.get);(0,we.E_)(new yo({id:"acceptSelectedSuggestion",precondition:et.M$.and(bn.Visible,bn.HasFocusedSuggestion),handler(h){h.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:et.M$.and(bn.Visible,ke.R.textInputFocus),weight:Go},{primary:3,kbExpr:et.M$.and(bn.Visible,ke.R.textInputFocus,bn.AcceptSuggestionsOnEnter,bn.MakesTextEdit),weight:Go}],menuOpts:[{menuId:vl,title:Z.kg("accept.insert","Insert"),group:"left",order:1,when:bn.HasInsertAndReplaceRange.toNegated()},{menuId:vl,title:Z.kg("accept.insert","Insert"),group:"left",order:1,when:et.M$.and(bn.HasInsertAndReplaceRange,bn.InsertMode.isEqualTo("insert"))},{menuId:vl,title:Z.kg("accept.replace","Replace"),group:"left",order:1,when:et.M$.and(bn.HasInsertAndReplaceRange,bn.InsertMode.isEqualTo("replace"))}]})),(0,we.E_)(new yo({id:"acceptAlternativeSelectedSuggestion",precondition:et.M$.and(bn.Visible,ke.R.textInputFocus,bn.HasFocusedSuggestion),kbOpts:{weight:Go,kbExpr:ke.R.textInputFocus,primary:1027,secondary:[1026]},handler(h){h.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:vl,group:"left",order:2,when:et.M$.and(bn.HasInsertAndReplaceRange,bn.InsertMode.isEqualTo("insert")),title:Z.kg("accept.replace","Replace")},{menuId:vl,group:"left",order:2,when:et.M$.and(bn.HasInsertAndReplaceRange,bn.InsertMode.isEqualTo("replace")),title:Z.kg("accept.insert","Insert")}]})),Di.w.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),(0,we.E_)(new yo({id:"hideSuggestWidget",precondition:bn.Visible,handler:h=>h.cancelSuggestWidget(),kbOpts:{weight:Go,kbExpr:ke.R.textInputFocus,primary:9,secondary:[1033]}})),(0,we.E_)(new yo({id:"selectNextSuggestion",precondition:et.M$.and(bn.Visible,et.M$.or(bn.MultipleSuggestions,bn.HasFocusedSuggestion.negate())),handler:h=>h.selectNextSuggestion(),kbOpts:{weight:Go,kbExpr:ke.R.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),(0,we.E_)(new yo({id:"selectNextPageSuggestion",precondition:et.M$.and(bn.Visible,et.M$.or(bn.MultipleSuggestions,bn.HasFocusedSuggestion.negate())),handler:h=>h.selectNextPageSuggestion(),kbOpts:{weight:Go,kbExpr:ke.R.textInputFocus,primary:12,secondary:[2060]}})),(0,we.E_)(new yo({id:"selectLastSuggestion",precondition:et.M$.and(bn.Visible,et.M$.or(bn.MultipleSuggestions,bn.HasFocusedSuggestion.negate())),handler:h=>h.selectLastSuggestion()})),(0,we.E_)(new yo({id:"selectPrevSuggestion",precondition:et.M$.and(bn.Visible,et.M$.or(bn.MultipleSuggestions,bn.HasFocusedSuggestion.negate())),handler:h=>h.selectPrevSuggestion(),kbOpts:{weight:Go,kbExpr:ke.R.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),(0,we.E_)(new yo({id:"selectPrevPageSuggestion",precondition:et.M$.and(bn.Visible,et.M$.or(bn.MultipleSuggestions,bn.HasFocusedSuggestion.negate())),handler:h=>h.selectPrevPageSuggestion(),kbOpts:{weight:Go,kbExpr:ke.R.textInputFocus,primary:11,secondary:[2059]}})),(0,we.E_)(new yo({id:"selectFirstSuggestion",precondition:et.M$.and(bn.Visible,et.M$.or(bn.MultipleSuggestions,bn.HasFocusedSuggestion.negate())),handler:h=>h.selectFirstSuggestion()})),(0,we.E_)(new yo({id:"focusSuggestion",precondition:et.M$.and(bn.Visible,bn.HasFocusedSuggestion.negate()),handler:h=>h.focusSuggestion(),kbOpts:{weight:Go,kbExpr:ke.R.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}})),(0,we.E_)(new yo({id:"focusAndAcceptSuggestion",precondition:et.M$.and(bn.Visible,bn.HasFocusedSuggestion.negate()),handler:h=>{h.focusSuggestion(),h.acceptSelectedSuggestion(!0,!1)}})),(0,we.E_)(new yo({id:"toggleSuggestionDetails",precondition:et.M$.and(bn.Visible,bn.HasFocusedSuggestion),handler:h=>h.toggleSuggestionDetails(),kbOpts:{weight:Go,kbExpr:ke.R.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:vl,group:"right",order:1,when:et.M$.and(bn.DetailsVisible,bn.CanResolve),title:Z.kg("detail.more","Show Less")},{menuId:vl,group:"right",order:1,when:et.M$.and(bn.DetailsVisible.toNegated(),bn.CanResolve),title:Z.kg("detail.less","Show More")}]})),(0,we.E_)(new yo({id:"toggleExplainMode",precondition:bn.Visible,handler:h=>h.toggleExplainMode(),kbOpts:{weight:100,primary:2138}})),(0,we.E_)(new yo({id:"toggleSuggestionFocus",precondition:bn.Visible,handler:h=>h.toggleSuggestionFocus(),kbOpts:{weight:Go,kbExpr:ke.R.textInputFocus,primary:2570,mac:{primary:778}}})),(0,we.E_)(new yo({id:"insertBestCompletion",precondition:et.M$.and(ke.R.textInputFocus,et.M$.equals("config.editor.tabCompletion","on"),zg.AtEnd,bn.Visible.toNegated(),Id.OtherSuggestions.toNegated(),wo.InSnippetMode.toNegated()),handler:(h,e)=>{h.triggerSuggestAndAcceptBest((0,hn.Gv)(e)?{fallback:"tab",...e}:{fallback:"tab"})},kbOpts:{weight:Go,primary:2}})),(0,we.E_)(new yo({id:"insertNextSuggestion",precondition:et.M$.and(ke.R.textInputFocus,et.M$.equals("config.editor.tabCompletion","on"),Id.OtherSuggestions,bn.Visible.toNegated(),wo.InSnippetMode.toNegated()),handler:h=>h.acceptNextSuggestion(),kbOpts:{weight:Go,kbExpr:ke.R.textInputFocus,primary:2}})),(0,we.E_)(new yo({id:"insertPrevSuggestion",precondition:et.M$.and(ke.R.textInputFocus,et.M$.equals("config.editor.tabCompletion","on"),Id.OtherSuggestions,bn.Visible.toNegated(),wo.InSnippetMode.toNegated()),handler:h=>h.acceptPrevSuggestion(),kbOpts:{weight:Go,kbExpr:ke.R.textInputFocus,primary:1026}})),(0,we.Fl)(class extends we.ks{constructor(){super({id:"editor.action.resetSuggestSize",label:Z.kg("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(h,e){br.get(e)?.resetWidgetSize()}});class Fy extends vt.jG{get selectedItem(){return this._currentSuggestItemInfo}constructor(e,t,i){super(),this.editor=e,this.suggestControllerPreselector=t,this.onWillAccept=i,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._onDidSelectedItemChange=this._register(new zi.vl),this.onDidSelectedItemChange=this._onDidSelectedItemChange.event,this._register(e.onKeyDown(o=>{o.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(o=>{o.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const s=br.get(this.editor);if(s){this._register(s.registerSelector({priority:100,select:(g,k,H)=>{const ee=this.editor.getModel();if(!ee)return-1;const ie=this.suggestControllerPreselector(),fe=ie?uc(ie,ee):void 0;if(!fe)return-1;const Me=ui.y.lift(k),xe=H.map((ut,Lt)=>{const kt=Gh.fromSuggestion(s,ee,Me,ut,this.isShiftKeyPressed),ni=uc(kt.toSingleTextEdit(),ee),gi=lC(fe,ni);return{index:Lt,valid:gi,prefixLength:ni.text.length,suggestItem:ut}}).filter(ut=>ut&&ut.valid&&ut.prefixLength>0),Qe=(0,Th.Cn)(xe,(0,Xi.VE)(ut=>ut.prefixLength,Xi.U9));return Qe?Qe.index:-1}}));let o=!1;const l=()=>{o||(o=!0,this._register(s.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(s.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(s.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(zi.Jh.once(s.model.onDidTrigger)(g=>{l()})),this._register(s.onWillInsertSuggestItem(g=>{const k=this.editor.getPosition(),H=this.editor.getModel();if(!k||!H)return;const ee=Gh.fromSuggestion(s,H,k,g.item,this.isShiftKeyPressed);this.onWillAccept(ee)}))}this.update(this._isActive)}update(e){const t=this.getSuggestItemInfo();(this._isActive!==e||!Wy(this._currentSuggestItemInfo,t))&&(this._isActive=e,this._currentSuggestItemInfo=t,this._onDidSelectedItemChange.fire())}getSuggestItemInfo(){const e=br.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem(),i=this.editor.getPosition(),s=this.editor.getModel();if(!(!t||!i||!s))return Gh.fromSuggestion(e,s,i,t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){br.get(this.editor)?.stopForceRenderingAbove()}forceRenderingAbove(){br.get(this.editor)?.forceRenderingAbove()}}class Gh{static fromSuggestion(e,t,i,s,o){let{insertText:l}=s.completion,g=!1;if(s.completion.insertTextRules&4){const H=new ys().parse(l);H.children.length<100&&Bg.adjustWhitespace(t,i,!0,H),l=H.toString(),g=!0}const k=e.getOverwriteInfo(s,o);return new Gh(wt.Q.fromPositions(i.delta(0,-k.overwriteBefore),i.delta(0,Math.max(k.overwriteAfter,0))),l,s.completion.kind,g)}constructor(e,t,i,s){this.range=e,this.insertText=t,this.completionItemKind=i,this.isSnippetText=s}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new Et.GE(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new Wr.WR(this.range,this.insertText)}}function Wy(h,e){return h===e?!0:!h||!e?!1:h.equals(e)}var By=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ua=function(h,e){return function(t,i){e(t,i,h)}},Tp;let ar=class extends vt.jG{static{Tp=this}static{this.ID="editor.contrib.inlineCompletionsController"}static get(e){return e.getContribution(Tp.ID)}constructor(e,t,i,s,o,l,g,k,H,ee){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=i,this._configurationService=s,this._commandService=o,this._debounceService=l,this._languageFeaturesService=g,this._accessibilitySignalService=k,this._keybindingService=H,this._accessibilityService=ee,this._editorObs=(0,rr.Ud)(this.editor),this._positions=(0,si.un)(this,fe=>this._editorObs.selections.read(fe)?.map(Me=>Me.getEndPosition())??[new ui.y(1,1)]),this._suggestWidgetAdaptor=this._register(new Fy(this.editor,()=>(this._editorObs.forceUpdate(),this.model.get()?.selectedInlineCompletion.get()?.toSingleTextEdit(void 0)),fe=>this._editorObs.forceUpdate(Me=>{this.model.get()?.handleSuggestAccepted(fe)}))),this._suggestWidgetSelectedItem=(0,si.y0)(this,fe=>this._suggestWidgetAdaptor.onDidSelectedItemChange(()=>{this._editorObs.forceUpdate(Me=>fe(void 0))}),()=>this._suggestWidgetAdaptor.selectedItem),this._enabledInConfig=(0,si.y0)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).enabled),this._isScreenReaderEnabled=(0,si.y0)(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this._editorDictationInProgress=(0,si.y0)(this,this._contextKeyService.onDidChangeContext,()=>this._contextKeyService.getContext(this.editor.getDomNode()).getValue("editorDictation.inProgress")===!0),this._enabled=(0,si.un)(this,fe=>this._enabledInConfig.read(fe)&&(!this._isScreenReaderEnabled.read(fe)||!this._editorDictationInProgress.read(fe))),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this.model=(0,No.a0)(this,fe=>{if(this._editorObs.isReadonly.read(fe))return;const Me=this._editorObs.model.read(fe);return Me?this._instantiationService.createInstance(mp,Me,this._suggestWidgetSelectedItem,this._editorObs.versionId,this._positions,this._debounceValue,(0,si.y0)(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(119).preview),(0,si.y0)(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(119).previewMode),(0,si.y0)(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).mode),this._enabled):void 0}).recomputeInitiallyAndOnChange(this._store),this._ghostTexts=(0,si.un)(this,fe=>this.model.read(fe)?.ghostTexts.read(fe)??[]),this._stablizedGhostTexts=Hy(this._ghostTexts,this._store),this._ghostTextWidgets=(0,Q0.Rl)(this,this._stablizedGhostTexts,(fe,Me)=>Me.add(this._instantiationService.createInstance(cp,this.editor,{ghostText:fe,minReservedLineCount:(0,si.lk)(0),targetTextModel:this.model.map(xe=>xe?.textModel)}))).recomputeInitiallyAndOnChange(this._store),this._playAccessibilitySignal=(0,si.Yd)(this),this._fontFamily=(0,si.y0)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).fontFamily),this._register(new mo(this._contextKeyService,this.model)),this._register((0,rr.jD)(this._editorObs.onDidType,(fe,Me)=>{this._enabled.get()&&this.model.get()?.trigger()})),this._register(this._commandService.onDidExecuteCommand(fe=>{new Set([Ye.Yh.Tab.id,Ye.Yh.DeleteLeft.id,Ye.Yh.DeleteRight.id,zu,"acceptSelectedSuggestion"]).has(fe.commandId)&&e.hasTextFocus()&&this._enabled.get()&&this._editorObs.forceUpdate(xe=>{this.model.get()?.trigger(xe)})})),this._register((0,rr.jD)(this._editorObs.selections,(fe,Me)=>{Me.some(xe=>xe.reason===3||xe.source==="api")&&this.model.get()?.stop()})),this._register(this.editor.onDidBlurEditorWidget(()=>{this._contextKeyService.getContextKeyValue("accessibleViewIsShown")||this._configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(62).keepOnBlur||Ra.dropDownVisible||(0,si.Rn)(fe=>{this.model.get()?.stop(fe)})})),this._register((0,si.fm)(fe=>{const Me=this.model.read(fe)?.state.read(fe);Me?.suggestItem?Me.primaryGhostText.lineCount>=2&&this._suggestWidgetAdaptor.forceRenderingAbove():this._suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register((0,vt.s)(()=>{this._suggestWidgetAdaptor.stopForceRenderingAbove()}));const ie=(0,Q0.ZX)(this,(fe,Me)=>{const Qe=this.model.read(fe)?.state.read(fe);return this._suggestWidgetSelectedItem.get()?Me:Qe?.inlineCompletion?.semanticId});this._register((0,rr.Qg)((0,si.un)(fe=>(this._playAccessibilitySignal.read(fe),ie.read(fe),{})),async(fe,Me,xe)=>{const Qe=this.model.get(),ut=Qe?.state.get();if(!ut||!Qe)return;const Lt=Qe.textModel.getLineContent(ut.primaryGhostText.lineNumber);await(0,hi.wR)(50,(0,Fi.bs)(xe)),await(0,si.oJ)(this._suggestWidgetSelectedItem,hn.b0,()=>!1,(0,Fi.bs)(xe)),await this._accessibilitySignalService.playSignal(Ig.Rh.inlineSuggestion),this.editor.getOption(8)&&this._provideScreenReaderUpdate(ut.primaryGhostText.renderForScreenReader(Lt))})),this._register(new _h(this.editor,this.model,this._instantiationService)),this._register(bw((0,si.un)(fe=>{const Me=this._fontFamily.read(fe);return Me===""||Me==="default"?"":`
.monaco-editor .ghost-text-decoration,
.monaco-editor .ghost-text-decoration-preview,
.monaco-editor .ghost-text {
	font-family: ${Me};
}`}))),this._register(this._configurationService.onDidChangeConfiguration(fe=>{fe.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})})),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}playAccessibilitySignal(e){this._playAccessibilitySignal.trigger(e)}_provideScreenReaderUpdate(e){const t=this._contextKeyService.getContextKeyValue("accessibleViewIsShown"),i=this._keybindingService.lookupKeybinding("editor.action.accessibleView");let s;!t&&i&&this.editor.getOption(150)&&(s=(0,Z.kg)("showAccessibleViewHint","Inspect this in the accessible view ({0})",i.getAriaLabel())),(0,dn.xE)(s?e+", "+s:e)}shouldShowHoverAt(e){const t=this.model.get()?.primaryGhostText.get();return t?t.parts.some(i=>e.containsPosition(new ui.y(t.lineNumber,i.column))):!1}shouldShowHoverAtViewZone(e){return this._ghostTextWidgets.get()[0]?.ownsViewZone(e)??!1}};ar=Tp=By([Ua(1,Ri._Y),Ua(2,et.fN),Ua(3,pt.pG),Ua(4,Di.d),Ua(5,Vs.ILanguageFeatureDebounceService),Ua(6,_e.ILanguageFeaturesService),Ua(7,Ig.Nt),Ua(8,ms.b),Ua(9,ra.j)],ar);function Hy(h,e){const t=(0,si.FY)("result",[]),i=[];return e.add((0,si.fm)(s=>{const o=h.read(s);(0,si.Rn)(l=>{if(o.length!==i.length){i.length=o.length;for(let g=0;g<i.length;g++)i[g]||(i[g]=(0,si.FY)("item",o[g]));t.set([...i],l)}i.forEach((g,k)=>g.set(o[k],l))})})),t}class Rp extends we.ks{static{this.ID=ju}constructor(){super({id:Rp.ID,label:Z.kg("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:et.M$.and(ke.R.writable,mo.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}async run(e,t){ar.get(t)?.model.get()?.next()}}class Pp extends we.ks{static{this.ID=Co}constructor(){super({id:Pp.ID,label:Z.kg("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:et.M$.and(ke.R.writable,mo.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}async run(e,t){ar.get(t)?.model.get()?.previous()}}class Vy extends we.ks{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:Z.kg("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:ke.R.writable})}async run(e,t){const i=ar.get(t);await(0,G0.fL)(async s=>{await i?.model.get()?.triggerExplicitly(s),i?.playAccessibilitySignal(s)})}}class Uy extends we.ks{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:Z.kg("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:et.M$.and(ke.R.writable,mo.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:et.M$.and(ke.R.writable,mo.inlineSuggestionVisible)},menuOpts:[{menuId:Fe.D8.InlineSuggestionToolbar,title:Z.kg("acceptWord","Accept Word"),group:"primary",order:2}]})}async run(e,t){const i=ar.get(t);await i?.model.get()?.acceptNextWord(i.editor)}}class zy extends we.ks{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:Z.kg("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:et.M$.and(ke.R.writable,mo.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:Fe.D8.InlineSuggestionToolbar,title:Z.kg("acceptLine","Accept Line"),group:"secondary",order:2}]})}async run(e,t){const i=ar.get(t);await i?.model.get()?.acceptNextLine(i.editor)}}class jy extends we.ks{constructor(){super({id:zu,label:Z.kg("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:mo.inlineSuggestionVisible,menuOpts:[{menuId:Fe.D8.InlineSuggestionToolbar,title:Z.kg("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:et.M$.and(mo.inlineSuggestionVisible,ke.R.tabMovesFocus.toNegated(),mo.inlineSuggestionHasIndentationLessThanTabSize,bn.Visible.toNegated(),ke.R.hoverFocused.toNegated())}})}async run(e,t){const i=ar.get(t);i&&(i.model.get()?.accept(i.editor),i.editor.focus())}}class Ap extends we.ks{static{this.ID="editor.action.inlineSuggest.hide"}constructor(){super({id:Ap.ID,label:Z.kg("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:mo.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}async run(e,t){const i=ar.get(t);(0,si.Rn)(s=>{i?.model.get()?.stop(s)})}}class Op extends Fe.L{static{this.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar"}constructor(){super({id:Op.ID,title:Z.kg("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:Fe.D8.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:et.M$.equals("config.editor.inlineSuggest.showToolbar","always")})}async run(e,t){const i=e.get(pt.pG),o=i.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";i.updateValue("editor.inlineSuggest.showToolbar",o)}}var Ky=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Qh=function(h,e){return function(t,i){e(t,i,h)}};class $y{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let Fp=class{constructor(e,t,i,s,o,l){this._editor=e,this._languageService=t,this._openerService=i,this.accessibilityService=s,this._instantiationService=o,this._telemetryService=l,this.hoverOrdinal=4}suggestHoverAnchor(e){const t=ar.get(this._editor);if(!t)return null;const i=e.target;if(i.type===8){const s=i.detail;if(t.shouldShowHoverAtViewZone(s.viewZoneId))return new na(1e3,this,wt.Q.fromPositions(this._editor.getModel().validatePosition(s.positionBefore||s.position)),e.event.posx,e.event.posy,!1)}return i.type===7&&t.shouldShowHoverAt(i.range)?new na(1e3,this,i.range,e.event.posx,e.event.posy,!1):i.type===6&&i.detail.mightBeForeignElement&&t.shouldShowHoverAt(i.range)?new na(1e3,this,i.range,e.event.posx,e.event.posy,!1):null}computeSync(e,t){if(this._editor.getOption(62).showToolbar!=="onHover")return[];const i=ar.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new $y(this,e.range,i)]:[]}renderHoverParts(e,t){const i=new vt.Cm,s=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&i.add(this.renderScreenReaderText(e,s));const o=s.controller.model.get(),l=this._instantiationService.createInstance(Ra,this._editor,!1,(0,si.lk)(null),o.selectedInlineCompletionIndex,o.inlineCompletionsCount,o.activeCommands),g=l.getDomNode();e.fragment.appendChild(g),o.triggerExplicitly(),i.add(l);const k={hoverPart:s,hoverElement:g,dispose(){i.dispose()}};return new Vo([k])}renderScreenReaderText(e,t){const i=new vt.Cm,s=Se.$,o=s("div.hover-row.markdown-hover"),l=Se.BC(o,s("div.hover-contents",{"aria-live":"assertive"})),g=i.add(new Ps.T({editor:this._editor},this._languageService,this._openerService)),k=H=>{i.add(g.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",e.onContentsChanged()}));const ee=Z.kg("inlineSuggestionFollows","Suggestion:"),ie=i.add(g.render(new nn.Bc().appendText(ee).appendCodeblock("text",H)));l.replaceChildren(ie.element)};return i.add((0,si.fm)(H=>{const ee=t.controller.model.read(H)?.primaryGhostText.read(H);if(ee){const ie=this._editor.getModel().getLineContent(ee.lineNumber);k(ee.renderForScreenReader(ie))}else Se.Ln(l)})),e.fragment.appendChild(o),i}};Fp=Ky([Qh(1,nr.L),Qh(2,Qs.C),Qh(3,ra.j),Qh(4,Ri._Y),Qh(5,is.k)],Fp);class Gy{}const Yg=new class{constructor(){this._implementations=[]}register(e){return this._implementations.push(e),{dispose:()=>{const t=this._implementations.indexOf(e);t!==-1&&this._implementations.splice(t,1)}}}getImplementations(){return this._implementations}};(0,we.HW)(ar.ID,ar,3),(0,we.Fl)(Vy),(0,we.Fl)(Rp),(0,we.Fl)(Pp),(0,we.Fl)(Uy),(0,we.Fl)(zy),(0,we.Fl)(jy),(0,we.Fl)(Ap),(0,Fe.ug)(Op),Uo.register(Fp),Yg.register(new Gy);var Qy=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Wp=function(h,e){return function(t,i){e(t,i,h)}},Yh;let Zh=class{static{Yh=this}static{this.ID="editor.contrib.gotodefinitionatposition"}static{this.MAX_SOURCE_PREVIEW_LINES=8}constructor(e,t,i,s){this.textModelResolverService=t,this.languageService=i,this.languageFeaturesService=s,this.toUnhook=new vt.Cm,this.toUnhookForKeyboard=new vt.Cm,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const o=new hl(e);this.toUnhook.add(o),this.toUnhook.add(o.onMouseMoveOrRelevantKeyDown(([l,g])=>{this.startFindDefinitionFromMouse(l,g??void 0)})),this.toUnhook.add(o.onExecute(l=>{this.isEnabled(l)&&this.gotoDefinition(l.target.position,l.hasSideBySideModifier).catch(g=>{(0,Ni.dz)(g)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(o.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(Yh.ID)}async startFindDefinitionFromCursor(e){await this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const i=e.target.position;this.startFindDefinition(i)}async startFindDefinition(e){this.toUnhookForKeyboard.clear();const t=e?this.editor.getModel()?.getWordAtPosition(e):null;if(!t){this.currentWordAtPosition=null,this.removeLinkDecorations();return}if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===t.startColumn&&this.currentWordAtPosition.endColumn===t.endColumn&&this.currentWordAtPosition.word===t.word)return;this.currentWordAtPosition=t;const i=new ds.$t(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,hi.SS)(l=>this.findDefinition(e,l));let s;try{s=await this.previousPromise}catch(l){(0,Ni.dz)(l);return}if(!s||!s.length||!i.validate(this.editor)){this.removeLinkDecorations();return}const o=s[0].originSelectionRange?wt.Q.lift(s[0].originSelectionRange):new wt.Q(e.lineNumber,t.startColumn,e.lineNumber,t.endColumn);if(s.length>1){let l=o;for(const{originSelectionRange:g}of s)g&&(l=wt.Q.plusRange(l,g));this.addDecoration(l,new nn.Bc().appendText(Z.kg("multipleResults","Click to show {0} definitions.",s.length)))}else{const l=s[0];if(!l.uri)return;this.textModelResolverService.createModelReference(l.uri).then(g=>{if(!g.object||!g.object.textEditorModel){g.dispose();return}const{object:{textEditorModel:k}}=g,{startLineNumber:H}=l.range;if(H<1||H>k.getLineCount()){g.dispose();return}const ee=this.getPreviewValue(k,H,l),ie=this.languageService.guessLanguageIdByFilepathOrFirstLine(k.uri);this.addDecoration(o,ee?new nn.Bc().appendCodeblock(ie||"",ee):void 0),g.dispose()})}}getPreviewValue(e,t,i){let s=i.range;return s.endLineNumber-s.startLineNumber>=Yh.MAX_SOURCE_PREVIEW_LINES&&(s=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,s)}stripIndentationFromPreviewRange(e,t,i){let o=e.getLineFirstNonWhitespaceColumn(t);for(let g=t+1;g<i.endLineNumber;g++){const k=e.getLineFirstNonWhitespaceColumn(g);o=Math.min(o,k)}return e.getValueInRange(i).replace(new RegExp(`^\\s{${o-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const i=e.getLineFirstNonWhitespaceColumn(t),s=Math.min(e.getLineCount(),t+Yh.MAX_SOURCE_PREVIEW_LINES);let o=t+1;for(;o<s;o++){const l=e.getLineFirstNonWhitespaceColumn(o);if(i===l)break}return new wt.Q(t,1,o+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([i])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&e.target.type===6&&!(e.target.detail.injectedText?.options instanceof Ki.Ho)&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?hs(this.languageFeaturesService.definitionProvider,i,e,!1,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(i=>{const s=!t&&this.editor.getOption(89)&&!this.isInPeekEditor(i);return new ul({openToSide:t,openInPeek:s,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(i)})}isInPeekEditor(e){const t=e.get(et.fN);return uo.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}};Zh=Yh=Qy([Wp(1,sr.ITextModelService),Wp(2,nr.L),Wp(3,_e.ILanguageFeaturesService)],Zh),(0,we.HW)(Zh.ID,Zh,2);var MC=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Zg=function(h,e){return function(t,i){e(t,i,h)}};class NC{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let Bp=class{constructor(e,t,i){this._markerService=t,this._configService=i,this._onDidChange=new zi.vl,this.onDidChange=this._onDidChange.event,this._dispoables=new vt.Cm,this._markers=[],this._nextIdx=-1,Ot.r.isUri(e)?this._resourceFilter=g=>g.toString()===e.toString():e&&(this._resourceFilter=e);const s=this._configService.getValue("problems.sortOrder"),o=(g,k)=>{let H=(0,Vi.UD)(g.resource.toString(),k.resource.toString());return H===0&&(s==="position"?H=wt.Q.compareRangesUsingStarts(g,k)||Ms.cj.compare(g.severity,k.severity):H=Ms.cj.compare(g.severity,k.severity)||wt.Q.compareRangesUsingStarts(g,k)),H},l=()=>{this._markers=this._markerService.read({resource:Ot.r.isUri(e)?e:void 0,severities:Ms.cj.Error|Ms.cj.Warning|Ms.cj.Info}),typeof e=="function"&&(this._markers=this._markers.filter(g=>this._resourceFilter(g.resource))),this._markers.sort(o)};l(),this._dispoables.add(t.onMarkerChanged(g=>{(!this._resourceFilter||g.some(k=>this._resourceFilter(k)))&&(l(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new NC(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let s=!1,o=this._markers.findIndex(l=>l.resource.toString()===e.uri.toString());o<0&&(o=(0,Xi.El)(this._markers,{resource:e.uri},(l,g)=>(0,Vi.UD)(l.resource.toString(),g.resource.toString())),o<0&&(o=~o));for(let l=o;l<this._markers.length;l++){let g=wt.Q.lift(this._markers[l]);if(g.isEmpty()){const k=e.getWordAtPosition(g.getStartPosition());k&&(g=new wt.Q(g.startLineNumber,k.startColumn,g.startLineNumber,k.endColumn))}if(t&&(g.containsPosition(t)||t.isBeforeOrEqual(g.getStartPosition()))){this._nextIdx=l,s=!0;break}if(this._markers[l].resource.toString()!==e.uri.toString())break}s||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(this._markers.length===0)return!1;const s=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),s!==this._nextIdx}find(e,t){let i=this._markers.findIndex(s=>s.resource.toString()===e.toString());if(!(i<0)){for(;i<this._markers.length;i++)if(wt.Q.containsPosition(this._markers[i],t))return new NC(this._markers[i],i+1,this._markers.length)}}};Bp=MC([Zg(1,Ms.DR),Zg(2,pt.pG)],Bp);const TC=(0,Ri.u1)("IMarkerNavigationService");let Hp=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new xC.w}getMarkerList(e){for(const t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new Bp(e,this._markerService,this._configService)}};Hp=MC([Zg(0,Ms.DR),Zg(1,pt.pG)],Hp),(0,er.v)(TC,Hp,1);var Xg=c(49048),Vp;(function(h){function e(t){switch(t){case Xg.A.Ignore:return"severity-ignore "+mn.L.asClassName(Dt.W.info);case Xg.A.Info:return mn.L.asClassName(Dt.W.info);case Xg.A.Warning:return mn.L.asClassName(Dt.W.warning);case Xg.A.Error:return mn.L.asClassName(Dt.W.error);default:return""}}h.className=e})(Vp||(Vp={}));var Yy=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Td=function(h,e){return function(t,i){e(t,i,h)}},Up;class Zy{constructor(e,t,i,s,o){this._openerService=s,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new vt.Cm,this._editor=t;const l=document.createElement("div");l.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),l.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),l.appendChild(this._relatedBlock),this._disposables.add(Se.b2(this._relatedBlock,"click",g=>{g.preventDefault();const k=this._relatedDiagnostics.get(g.target);k&&i(k)})),this._scrollable=new Lp.Se(l,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(g=>{l.style.left=`-${g.scrollLeft}px`,l.style.top=`-${g.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){(0,vt.AS)(this._disposables)}update(e){const{source:t,message:i,relatedInformation:s,code:o}=e;let l=(t?.length||0)+2;o&&(typeof o=="string"?l+=o.length:l+=o.value.length);const g=(0,Vi.uz)(i);this._lines=g.length,this._longestLineLength=0;for(const fe of g)this._longestLineLength=Math.max(fe.length+l,this._longestLineLength);Se.w_(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let k=this._messageBlock;for(const fe of g)k=document.createElement("div"),k.innerText=fe,fe===""&&(k.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(k);if(t||o){const fe=document.createElement("span");if(fe.classList.add("details"),k.appendChild(fe),t){const Me=document.createElement("span");Me.innerText=t,Me.classList.add("source"),fe.appendChild(Me)}if(o)if(typeof o=="string"){const Me=document.createElement("span");Me.innerText=`(${o})`,Me.classList.add("code"),fe.appendChild(Me)}else{this._codeLink=Se.$("a.code-link"),this._codeLink.setAttribute("href",`${o.target.toString()}`),this._codeLink.onclick=xe=>{this._openerService.open(o.target,{allowCommands:!0}),xe.preventDefault(),xe.stopPropagation()};const Me=Se.BC(this._codeLink,Se.$("span"));Me.innerText=o.value,fe.appendChild(this._codeLink)}}if(Se.w_(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,Xi.EI)(s)){const fe=this._relatedBlock.appendChild(document.createElement("div"));fe.style.paddingTop=`${Math.floor(this._editor.getOption(67)*.66)}px`,this._lines+=1;for(const Me of s){const xe=document.createElement("div"),Qe=document.createElement("a");Qe.classList.add("filename"),Qe.innerText=`${this._labelService.getUriBasenameLabel(Me.resource)}(${Me.startLineNumber}, ${Me.startColumn}): `,Qe.title=this._labelService.getUriLabel(Me.resource),this._relatedDiagnostics.set(Qe,Me);const ut=document.createElement("span");ut.innerText=Me.message,xe.appendChild(Qe),xe.appendChild(ut),this._lines+=1,fe.appendChild(xe)}}const H=this._editor.getOption(50),ee=Math.ceil(H.typicalFullwidthCharacterWidth*this._longestLineLength*.75),ie=H.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:ee,scrollHeight:ie})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Ms.cj.Error:t=Z.kg("Error","Error");break;case Ms.cj.Warning:t=Z.kg("Warning","Warning");break;case Ms.cj.Info:t=Z.kg("Info","Info");break;case Ms.cj.Hint:t=Z.kg("Hint","Hint");break}let i=Z.kg("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const s=this._editor.getModel();return s&&e.startLineNumber<=s.getLineCount()&&e.startLineNumber>=1&&(i=`${s.getLineContent(e.startLineNumber)}, ${i}`),i}}let Xh=class extends ad{static{Up=this}static{this.TitleMenu=new Fe.D8("gotoErrorTitleMenu")}constructor(e,t,i,s,o,l,g){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},o),this._themeService=t,this._openerService=i,this._menuService=s,this._contextKeyService=l,this._labelService=g,this._callOnDispose=new vt.Cm,this._onDidSelectRelatedInformation=new zi.vl,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Ms.cj.Warning,this._backgroundColor=wn.Q1.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(eL);let t=zp,i=Xy;this._severity===Ms.cj.Warning?(t=Jg,i=Jy):this._severity===Ms.cj.Info&&(t=jp,i=qy);const s=e.getColor(t),o=e.getColor(i);this.style({arrowColor:s,frameColor:s,headerBackgroundColor:o,primaryHeadingColor:e.getColor(lg),secondaryHeadingColor:e.getColor(cg)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(s=>this.editor.focus()));const t=[],i=this._menuService.getMenuActions(Up.TitleMenu,this._contextKeyService);(0,Ta.Ot)(i,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0})}_fillTitleIcon(e){this._icon=Se.BC(e,Se.$(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new Zy(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const s=wt.Q.lift(e),o=this.editor.getPosition(),l=o&&s.containsPosition(o)?o:s.getStartPosition();super.show(l,this.computeRequiredHeight());const g=this.editor.getModel();if(g){const k=i>1?Z.kg("problems","{0} of {1} problems",t,i):Z.kg("change","{0} of {1} problem",t,i);this.setTitle((0,Ee.P8)(g.uri),k)}this._icon.className=`codicon ${Vp.className(Ms.cj.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(l,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};Xh=Up=Yy([Td(1,$i.Gy),Td(2,Qs.C),Td(3,Fe.ez),Td(4,Ri._Y),Td(5,et.fN),Td(6,rc.L)],Xh);const RC=(0,Tt.yLr)(Tt.Rbi,Tt.AN$),PC=(0,Tt.yLr)(Tt.Hng,Tt.Stt),AC=(0,Tt.yLr)(Tt.pOz,Tt.IIb),zp=(0,Tt.x1A)("editorMarkerNavigationError.background",{dark:RC,light:RC,hcDark:Tt.b1q,hcLight:Tt.b1q},Z.kg("editorMarkerNavigationError","Editor marker navigation widget error color.")),Xy=(0,Tt.x1A)("editorMarkerNavigationError.headerBackground",{dark:(0,Tt.JO0)(zp,.1),light:(0,Tt.JO0)(zp,.1),hcDark:null,hcLight:null},Z.kg("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),Jg=(0,Tt.x1A)("editorMarkerNavigationWarning.background",{dark:PC,light:PC,hcDark:Tt.b1q,hcLight:Tt.b1q},Z.kg("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),Jy=(0,Tt.x1A)("editorMarkerNavigationWarning.headerBackground",{dark:(0,Tt.JO0)(Jg,.1),light:(0,Tt.JO0)(Jg,.1),hcDark:"#0C141F",hcLight:(0,Tt.JO0)(Jg,.2)},Z.kg("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),jp=(0,Tt.x1A)("editorMarkerNavigationInfo.background",{dark:AC,light:AC,hcDark:Tt.b1q,hcLight:Tt.b1q},Z.kg("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),qy=(0,Tt.x1A)("editorMarkerNavigationInfo.headerBackground",{dark:(0,Tt.JO0)(jp,.1),light:(0,Tt.JO0)(jp,.1),hcDark:null,hcLight:null},Z.kg("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),eL=(0,Tt.x1A)("editorMarkerNavigation.background",Tt.YtV,Z.kg("editorMarkerNavigationBackground","Editor marker navigation widget background."));var tL=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},qg=function(h,e){return function(t,i){e(t,i,h)}},Jh;let pc=class{static{Jh=this}static{this.ID="editor.contrib.markerController"}static get(e){return e.getContribution(Jh.ID)}constructor(e,t,i,s,o){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=s,this._instantiationService=o,this._sessionDispoables=new vt.Cm,this._editor=e,this._widgetVisible=OC.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(Xh,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(i=>{(!this._model?.selected||!wt.Q.containsPosition(this._model?.selected.marker,i.position))&&this._model?.resetIndex()})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const i=this._model.find(this._editor.getModel().uri,this._widget.position);i?this._widget.updateMarker(i.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(i=>{this._editorService.openCodeEditor({resource:i.resource,options:{pinned:!0,revealIfOpened:!0,selection:wt.Q.lift(i).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new ui.y(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}async nagivate(e,t){if(this._editor.hasModel()){const i=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(i.move(e,this._editor.getModel(),this._editor.getPosition()),!i.selected)return;if(i.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const s=await this._editorService.openCodeEditor({resource:i.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:i.selected.marker}},this._editor);s&&(Jh.get(s)?.close(),Jh.get(s)?.nagivate(e,t))}else this._widget.showAtMarker(i.selected.marker,i.selected.index,i.selected.total)}}};pc=Jh=tL([qg(1,TC),qg(2,et.fN),qg(3,Xt.T),qg(4,Ri._Y)],pc);class ef extends we.ks{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}async run(e,t){t.hasModel()&&pc.get(t)?.nagivate(this._next,this._multiFile)}}class Rd extends ef{static{this.ID="editor.action.marker.next"}static{this.LABEL=Z.kg("markerAction.next.label","Go to Next Problem (Error, Warning, Info)")}constructor(){super(!0,!1,{id:Rd.ID,label:Rd.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:ke.R.focus,primary:578,weight:100},menuOpts:{menuId:Xh.TitleMenu,title:Rd.LABEL,icon:(0,rs.pU)("marker-navigation-next",Dt.W.arrowDown,Z.kg("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}class qh extends ef{static{this.ID="editor.action.marker.prev"}static{this.LABEL=Z.kg("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)")}constructor(){super(!1,!1,{id:qh.ID,label:qh.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:ke.R.focus,primary:1602,weight:100},menuOpts:{menuId:Xh.TitleMenu,title:qh.LABEL,icon:(0,rs.pU)("marker-navigation-previous",Dt.W.arrowUp,Z.kg("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}class iL extends ef{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:Z.kg("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:ke.R.focus,primary:66,weight:100},menuOpts:{menuId:Fe.D8.MenubarGoMenu,title:Z.kg({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class nL extends ef{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:Z.kg("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:ke.R.focus,primary:1090,weight:100},menuOpts:{menuId:Fe.D8.MenubarGoMenu,title:Z.kg({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}(0,we.HW)(pc.ID,pc,4),(0,we.Fl)(Rd),(0,we.Fl)(qh),(0,we.Fl)(iL),(0,we.Fl)(nL);const OC=new et.N1("markersNavigationVisible",!1),sL=we.DX.bindToContribution(pc.get);(0,we.E_)(new sL({id:"closeMarkersNavigation",precondition:OC,handler:h=>h.close(),kbOpts:{weight:150,kbExpr:ke.R.focus,primary:9,secondary:[1033]}}));var Hr;(function(h){h.NoAutoFocus="noAutoFocus",h.FocusIfVisible="focusIfVisible",h.AutoFocusImmediately="autoFocusImmediately"})(Hr||(Hr={}));class oL extends we.ks{constructor(){super({id:Hu,label:Z.kg({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse."]},"Show or Focus Hover"),metadata:{description:Z.aS("showOrFocusHoverDescription","Show or focus the editor hover which shows documentation, references, and other content for a symbol at the current cursor position."),args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[Hr.NoAutoFocus,Hr.FocusIfVisible,Hr.AutoFocusImmediately],enumDescriptions:[Z.kg("showOrFocusHover.focus.noAutoFocus","The hover will not automatically take focus."),Z.kg("showOrFocusHover.focus.focusIfVisible","The hover will take focus only if it is already visible."),Z.kg("showOrFocusHover.focus.autoFocusImmediately","The hover will automatically take focus when it appears.")],default:Hr.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2087),weight:100}})}run(e,t,i){if(!t.hasModel())return;const s=fo.get(t);if(!s)return;const o=i?.focus;let l=Hr.FocusIfVisible;Object.values(Hr).includes(o)?l=o:typeof o=="boolean"&&o&&(l=Hr.AutoFocusImmediately);const g=H=>{const ee=t.getPosition(),ie=new wt.Q(ee.lineNumber,ee.column,ee.lineNumber,ee.column);s.showContentHover(ie,1,1,H)},k=t.getOption(2)===2;s.isHoverVisible?l!==Hr.NoAutoFocus?s.focus():g(k):g(k||l===Hr.AutoFocusImmediately)}}class rL extends we.ks{constructor(){super({id:zf,label:Z.kg({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0,metadata:{description:Z.aS("showDefinitionPreviewHoverDescription","Show the definition preview hover in the editor.")}})}run(e,t){const i=fo.get(t);if(!i)return;const s=t.getPosition();if(!s)return;const o=new wt.Q(s.lineNumber,s.column,s.lineNumber,s.column),l=Zh.get(t);if(!l)return;l.startFindDefinitionFromCursor(s).then(()=>{i.showContentHover(o,1,1,!0)})}}class aL extends we.ks{constructor(){super({id:jf,label:Z.kg({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:ke.R.hoverFocused,kbOpts:{kbExpr:ke.R.hoverFocused,primary:16,weight:100},metadata:{description:Z.aS("scrollUpHoverDescription","Scroll up the editor hover.")}})}run(e,t){const i=fo.get(t);i&&i.scrollUp()}}class lL extends we.ks{constructor(){super({id:Vu,label:Z.kg({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:ke.R.hoverFocused,kbOpts:{kbExpr:ke.R.hoverFocused,primary:18,weight:100},metadata:{description:Z.aS("scrollDownHoverDescription","Scroll down the editor hover.")}})}run(e,t){const i=fo.get(t);i&&i.scrollDown()}}class cL extends we.ks{constructor(){super({id:Kf,label:Z.kg({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:ke.R.hoverFocused,kbOpts:{kbExpr:ke.R.hoverFocused,primary:15,weight:100},metadata:{description:Z.aS("scrollLeftHoverDescription","Scroll left the editor hover.")}})}run(e,t){const i=fo.get(t);i&&i.scrollLeft()}}class dL extends we.ks{constructor(){super({id:$f,label:Z.kg({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:ke.R.hoverFocused,kbOpts:{kbExpr:ke.R.hoverFocused,primary:17,weight:100},metadata:{description:Z.aS("scrollRightHoverDescription","Scroll right the editor hover.")}})}run(e,t){const i=fo.get(t);i&&i.scrollRight()}}class hL extends we.ks{constructor(){super({id:fh,label:Z.kg({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:ke.R.hoverFocused,kbOpts:{kbExpr:ke.R.hoverFocused,primary:11,secondary:[528],weight:100},metadata:{description:Z.aS("pageUpHoverDescription","Page up the editor hover.")}})}run(e,t){const i=fo.get(t);i&&i.pageUp()}}class uL extends we.ks{constructor(){super({id:ts,label:Z.kg({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:ke.R.hoverFocused,kbOpts:{kbExpr:ke.R.hoverFocused,primary:12,secondary:[530],weight:100},metadata:{description:Z.aS("pageDownHoverDescription","Page down the editor hover.")}})}run(e,t){const i=fo.get(t);i&&i.pageDown()}}class gL extends we.ks{constructor(){super({id:Gf,label:Z.kg({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:ke.R.hoverFocused,kbOpts:{kbExpr:ke.R.hoverFocused,primary:14,secondary:[2064],weight:100},metadata:{description:Z.aS("goToTopHoverDescription","Go to the top of the editor hover.")}})}run(e,t){const i=fo.get(t);i&&i.goToTop()}}class fL extends we.ks{constructor(){super({id:Uu,label:Z.kg({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:ke.R.hoverFocused,kbOpts:{kbExpr:ke.R.hoverFocused,primary:13,secondary:[2066],weight:100},metadata:{description:Z.aS("goToBottomHoverDescription","Go to the bottom of the editor hover.")}})}run(e,t){const i=fo.get(t);i&&i.goToBottom()}}class mL extends we.ks{constructor(){super({id:Gc,label:Qc,alias:"Increase Hover Verbosity Level",precondition:ke.R.hoverVisible})}run(e,t,i){const s=fo.get(t);if(!s)return;const o=i?.index!==void 0?i.index:s.focusedHoverPartIndex();s.updateHoverVerbosityLevel(Et.M$.Increase,o,i?.focus)}}class pL extends we.ks{constructor(){super({id:al,label:mh,alias:"Decrease Hover Verbosity Level",precondition:ke.R.hoverVisible})}run(e,t,i){const s=fo.get(t);if(!s)return;const o=i?.index!==void 0?i.index:s.focusedHoverPartIndex();fo.get(t)?.updateHoverVerbosityLevel(Et.M$.Decrease,o,i?.focus)}}var _L=c(12305),vL=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Kp=function(h,e){return function(t,i){e(t,i,h)}};const Sr=Se.$;class CL{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const FC={type:1,filter:{include:On.QuickFix},triggerAction:Ks.QuickFixHover};let $p=class{constructor(e,t,i,s){this._editor=e,this._markerDecorationsService=t,this._openerService=i,this._languageFeaturesService=s,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1&&!e.supportsMarkerHover)return[];const i=this._editor.getModel(),s=e.range.startLineNumber,o=i.getLineMaxColumn(s),l=[];for(const g of t){const k=g.range.startLineNumber===s?g.range.startColumn:1,H=g.range.endLineNumber===s?g.range.endColumn:o,ee=this._markerDecorationsService.getMarker(i.uri,g);if(!ee)continue;const ie=new wt.Q(e.range.startLineNumber,k,e.range.startLineNumber,H);l.push(new CL(this,ie,ee))}return l}renderHoverParts(e,t){if(!t.length)return new Vo([]);const i=new vt.Cm,s=[];t.forEach(l=>{const g=this._renderMarkerHover(l);e.fragment.appendChild(g.hoverElement),s.push(g)});const o=t.length===1?t[0]:t.sort((l,g)=>Ms.cj.compare(l.marker.severity,g.marker.severity))[0];return this.renderMarkerStatusbar(e,o,i),new Vo(s)}_renderMarkerHover(e){const t=new vt.Cm,i=Sr("div.hover-row"),s=Se.BC(i,Sr("div.marker.hover-contents")),{source:o,message:l,code:g,relatedInformation:k}=e.marker;this._editor.applyFontInfo(s);const H=Se.BC(s,Sr("span"));if(H.style.whiteSpace="pre-wrap",H.innerText=l,o||g)if(g&&typeof g!="string"){const ie=Sr("span");if(o){const Qe=Se.BC(ie,Sr("span"));Qe.innerText=o}const fe=Se.BC(ie,Sr("a.code-link"));fe.setAttribute("href",g.target.toString()),t.add(Se.ko(fe,"click",Qe=>{this._openerService.open(g.target,{allowCommands:!0}),Qe.preventDefault(),Qe.stopPropagation()}));const Me=Se.BC(fe,Sr("span"));Me.innerText=g.value;const xe=Se.BC(s,ie);xe.style.opacity="0.6",xe.style.paddingLeft="6px"}else{const ie=Se.BC(s,Sr("span"));ie.style.opacity="0.6",ie.style.paddingLeft="6px",ie.innerText=o&&g?`${o}(${g})`:o||`(${g})`}if((0,Xi.EI)(k))for(const{message:ie,resource:fe,startLineNumber:Me,startColumn:xe}of k){const Qe=Se.BC(s,Sr("div"));Qe.style.marginTop="8px";const ut=Se.BC(Qe,Sr("a"));ut.innerText=`${(0,Ee.P8)(fe)}(${Me}, ${xe}): `,ut.style.cursor="pointer",t.add(Se.ko(ut,"click",kt=>{if(kt.stopPropagation(),kt.preventDefault(),this._openerService){const ni={selection:{startLineNumber:Me,startColumn:xe}};this._openerService.open(fe,{fromUserGesture:!0,editorOptions:ni}).catch(Ni.dz)}}));const Lt=Se.BC(Qe,Sr("span"));Lt.innerText=ie,this._editor.applyFontInfo(Lt)}return{hoverPart:e,hoverElement:i,dispose:()=>t.dispose()}}renderMarkerStatusbar(e,t,i){if(t.marker.severity===Ms.cj.Error||t.marker.severity===Ms.cj.Warning||t.marker.severity===Ms.cj.Info){const s=pc.get(this._editor);s&&e.statusBar.addAction({label:Z.kg("view problem","View Problem"),commandId:Rd.ID,run:()=>{e.hide(),s.showAtMarker(t.marker),this._editor.focus()}})}if(!this._editor.getOption(92)){const s=e.statusBar.append(Sr("div"));this.recentMarkerCodeActionsInfo&&(Ms.oc.makeKey(this.recentMarkerCodeActionsInfo.marker)===Ms.oc.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(s.textContent=Z.kg("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?vt.jG.None:(0,hi.EQ)(()=>s.textContent=Z.kg("checkingForQuickFixes","Checking for quick fixes..."),200,i);s.textContent||(s.textContent="\xA0");const l=this.getCodeActions(t.marker);i.add((0,vt.s)(()=>l.cancel())),l.then(g=>{if(o.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:g.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){g.dispose(),s.textContent=Z.kg("noQuickFixes","No quick fixes available");return}s.style.display="none";let k=!1;i.add((0,vt.s)(()=>{k||g.dispose()})),e.statusBar.addAction({label:Z.kg("quick fixes","Quick Fix..."),commandId:Za,run:H=>{k=!0;const ee=be.get(this._editor),ie=Se.BK(H);e.hide(),ee?.showCodeActions(FC,g,{x:ie.left,y:ie.top,width:ie.width,height:ie.height})}})},Ni.dz)}}getCodeActions(e){return(0,hi.SS)(t=>Oo(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new wt.Q(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),FC,Bs.ke.None,t))}};$p=vL([Kp(1,_L.IMarkerDecorationsService),Kp(2,Qs.C),Kp(3,_e.ILanguageFeaturesService)],$p);class bL{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}get lane(){return this._laneOrLine}set lane(e){this._laneOrLine=e}constructor(e){this._editor=e,this._lineNumber=-1,this._laneOrLine=In.ZS.Center}computeSync(){const e=o=>({value:o}),t=this._editor.getLineDecorations(this._lineNumber),i=[],s=this._laneOrLine==="lineNo";if(!t)return i;for(const o of t){const l=o.options.glyphMargin?.position??In.ZS.Center;if(!s&&l!==this._laneOrLine)continue;const g=s?o.options.lineNumberHoverMessage:o.options.glyphMarginHoverMessage;!g||(0,nn.it)(g)||i.push(...(0,Xi._j)(g).map(e))}return i}}var SL=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},WC=function(h,e){return function(t,i){e(t,i,h)}},Gp;const BC=Se.$;let Qp=class extends vt.jG{static{Gp=this}static{this.ID="editor.contrib.modesGlyphHoverWidget"}constructor(e,t,i){super(),this._renderDisposeables=this._register(new vt.Cm),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new aa.N4),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new Ps.T({editor:this._editor},t,i)),this._computer=new bL(this._editor),this._hoverOperation=this._register(new Jc(this._editor,this._computer)),this._register(this._hoverOperation.onResult(s=>{this._withResult(s.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(50)&&this._updateFont()})),this._register(Se.b2(this._hover.containerDomNode,"mouseleave",s=>{this._onMouseLeave(s)})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Gp.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}showsOrWillShow(e){const t=e.target;return t.type===2&&t.detail.glyphMarginLane?(this._startShowingAt(t.position.lineNumber,t.detail.glyphMarginLane),!0):t.type===3?(this._startShowingAt(t.position.lineNumber,"lineNo"),!0):!1}_startShowingAt(e,t){this._computer.lineNumber===e&&this._computer.lane===t||(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._computer.lane=t,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const s of t){const o=BC("div.hover-row.markdown-hover"),l=Se.BC(o,BC("div.hover-contents")),g=this._renderDisposeables.add(this._markdownRenderer.render(s.value));l.appendChild(g.element),i.appendChild(o)}this._updateContents(i),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),s=this._editor.getScrollTop(),o=this._editor.getOption(67),l=this._hover.containerDomNode.clientHeight,g=i-s-(l-o)/2,k=t.glyphMarginLeft+t.glyphMarginWidth+(this._computer.lane==="lineNo"?t.lineNumbersWidth:0);this._hover.containerDomNode.style.left=`${k}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(g),0)}px`}_onMouseLeave(e){const t=this._editor.getDomNode();(!t||!Xc(t,e.x,e.y))&&this.hide()}};Qp=Gp=SL([WC(1,nr.L),WC(2,Qs.C)],Qp);var wL=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},yL=function(h,e){return function(t,i){e(t,i,h)}};const Yp=!1;let tf=class extends vt.jG{static{this.ID="editor.contrib.marginHover"}constructor(e,t){super(),this._editor=e,this._instantiationService=t,this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new vt.Cm,this._hoverState={mouseDown:!1},this._reactToEditorMouseMoveRunner=this._register(new hi.uC(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.hidingDelay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))):(this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))),this._listenersStore.add(this._editor.onMouseLeave(t=>this._onEditorMouseLeave(t))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(t=>this._onEditorScrollChanged(t)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0,!this._isMouseOnMarginHoverWidget(e)&&this._hideWidgets()}_isMouseOnMarginHoverWidget(e){const t=this._glyphWidget?.getDomNode();return t?Xc(t,e.event.posx,e.event.posy):!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._isMouseOnMarginHoverWidget(e))||Yp||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){const t=this._hoverSettings.sticky,i=this._isMouseOnMarginHoverWidget(e);return t&&i}_onEditorMouseMove(e){if(this.shouldKeepOpenOnEditorMouseMoveOrLeave)return;if(this._mouseMoveEvent=e,this._shouldNotRecomputeCurrentHoverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){!e||this._tryShowHoverWidget(e)||Yp||this._hideWidgets()}_tryShowHoverWidget(e){return this._getOrCreateGlyphWidget().showsOrWillShow(e)}_onKeyDown(e){this._editor.hasModel()&&(e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||this._hideWidgets())}_hideWidgets(){Yp||this._glyphWidget?.hide()}_getOrCreateGlyphWidget(){return this._glyphWidget||(this._glyphWidget=this._instantiationService.createInstance(Qp,this._editor)),this._glyphWidget}dispose(){super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),this._glyphWidget?.dispose()}};tf=wL([yL(1,Ri._Y)],tf);class LL{}class DL{}class EL{}(0,we.HW)(fo.ID,fo,2),(0,we.HW)(tf.ID,tf,2),(0,we.Fl)(oL),(0,we.Fl)(rL),(0,we.Fl)(aL),(0,we.Fl)(lL),(0,we.Fl)(cL),(0,we.Fl)(dL),(0,we.Fl)(hL),(0,we.Fl)(uL),(0,we.Fl)(gL),(0,we.Fl)(fL),(0,we.Fl)(mL),(0,we.Fl)(pL),Uo.register(nc),Uo.register($p),(0,$i.zy)((h,e)=>{const t=h.getColor(Tt.oZ8);t&&(e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${t.transparent(.5)}; }`))}),Yg.register(new LL),Yg.register(new DL),Yg.register(new EL);var Pd=c(77105);function Ro(h,e){let t=0;for(let i=0;i<h.length;i++)h.charAt(i)==="	"?t+=e:t++;return t}function eu(h,e,t){h=h<0?0:h;let i="";if(!t){const s=Math.floor(h/e);h=h%e;for(let o=0;o<s;o++)i+="	"}for(let s=0;s<h;s++)i+=" ";return i}var _c=c(66498),xL=c(58932),kL=c(32857);function HC(h,e,t,i){if(h.getLineCount()===1&&h.getLineMaxColumn(1)===1)return[];const s=e.getLanguageConfiguration(h.getLanguageId()).indentRulesSupport;if(!s)return[];const o=new kL.no(h,s,e);for(i=Math.min(i,h.getLineCount());t<=i&&o.shouldIgnore(t);)t++;if(t>i-1)return[];const{tabSize:l,indentSize:g,insertSpaces:k}=h.getOptions(),H=(Qe,ut)=>(ut=ut||1,Pd.Y.shiftIndent(Qe,Qe.length+ut,l,g,k)),ee=(Qe,ut)=>(ut=ut||1,Pd.Y.unshiftIndent(Qe,Qe.length+ut,l,g,k)),ie=[],fe=h.getLineContent(t);let Me=Vi.UU(fe),xe=Me;o.shouldIncrease(t)?(xe=H(xe),Me=H(Me)):o.shouldIndentNextLine(t)&&(xe=H(xe)),t++;for(let Qe=t;Qe<=i;Qe++){if(IL(h,Qe))continue;const ut=h.getLineContent(Qe),Lt=Vi.UU(ut),kt=xe;o.shouldDecrease(Qe,kt)&&(xe=ee(xe),Me=ee(Me)),Lt!==xe&&ie.push(ps.k.replaceMove(new Mi.L(Qe,1,Qe,Lt.length+1),(0,xL.P)(xe,g,k))),!o.shouldIgnore(Qe)&&(o.shouldIncrease(Qe,kt)?(Me=H(Me),xe=Me):o.shouldIndentNextLine(Qe,kt)?xe=H(xe):xe=Me)}return ie}function IL(h,e){return h.tokenization.isCheapToTokenize(e)?h.tokenization.getLineTokens(e).getStandardTokenType(0)===2:!1}var ML=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},NL=function(h,e){return function(t,i){e(t,i,h)}};class Zp extends we.ks{static{this.ID="editor.action.indentationToSpaces"}constructor(){super({id:Zp.ID,label:Z.kg("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:ke.R.writable,metadata:{description:Z.aS("indentationToSpacesDescription","Convert the tab indentation to spaces.")}})}run(e,t){const i=t.getModel();if(!i)return;const s=i.getOptions(),o=t.getSelection();if(!o)return;const l=new OL(o,s.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[l]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}}class Xp extends we.ks{static{this.ID="editor.action.indentationToTabs"}constructor(){super({id:Xp.ID,label:Z.kg("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:ke.R.writable,metadata:{description:Z.aS("indentationToTabsDescription","Convert the spaces indentation to tabs.")}})}run(e,t){const i=t.getModel();if(!i)return;const s=i.getOptions(),o=t.getSelection();if(!o)return;const l=new FL(o,s.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[l]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}}class Jp extends we.ks{constructor(e,t,i){super(i),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){const i=e.get(js.GK),s=e.get(Zs.IModelService),o=t.getModel();if(!o)return;const l=s.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),g=o.getOptions(),k=[1,2,3,4,5,6,7,8].map(ee=>({id:ee.toString(),label:ee.toString(),description:ee===l.tabSize&&ee===g.tabSize?Z.kg("configuredTabSize","Configured Tab Size"):ee===l.tabSize?Z.kg("defaultTabSize","Default Tab Size"):ee===g.tabSize?Z.kg("currentTabSize","Current Tab Size"):void 0})),H=Math.min(o.getOptions().tabSize-1,7);setTimeout(()=>{i.pick(k,{placeHolder:Z.kg({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:k[H]}).then(ee=>{if(ee&&o&&!o.isDisposed()){const ie=parseInt(ee.label,10);this.displaySizeOnly?o.updateOptions({tabSize:ie}):o.updateOptions({tabSize:ie,indentSize:ie,insertSpaces:this.insertSpaces})}})},50)}}class qp extends Jp{static{this.ID="editor.action.indentUsingTabs"}constructor(){super(!1,!1,{id:qp.ID,label:Z.kg("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0,metadata:{description:Z.aS("indentUsingTabsDescription","Use indentation with tabs.")}})}}class e_ extends Jp{static{this.ID="editor.action.indentUsingSpaces"}constructor(){super(!0,!1,{id:e_.ID,label:Z.kg("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0,metadata:{description:Z.aS("indentUsingSpacesDescription","Use indentation with spaces.")}})}}class t_ extends Jp{static{this.ID="editor.action.changeTabDisplaySize"}constructor(){super(!0,!0,{id:t_.ID,label:Z.kg("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0,metadata:{description:Z.aS("changeTabDisplaySizeDescription","Change the space size equivalent of the tab.")}})}}class i_ extends we.ks{static{this.ID="editor.action.detectIndentation"}constructor(){super({id:i_.ID,label:Z.kg("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0,metadata:{description:Z.aS("detectIndentationDescription","Detect the indentation from content.")}})}run(e,t){const i=e.get(Zs.IModelService),s=t.getModel();if(!s)return;const o=i.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget);s.detectIndentation(o.insertSpaces,o.tabSize)}}class TL extends we.ks{constructor(){super({id:"editor.action.reindentlines",label:Z.kg("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:ke.R.writable,metadata:{description:Z.aS("editor.reindentlinesDescription","Reindent the lines of the editor.")}})}run(e,t){const i=e.get(Us.JZ),s=t.getModel();if(!s)return;const o=HC(s,i,1,s.getLineCount());o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class RL extends we.ks{constructor(){super({id:"editor.action.reindentselectedlines",label:Z.kg("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:ke.R.writable,metadata:{description:Z.aS("editor.reindentselectedlinesDescription","Reindent the selected lines of the editor.")}})}run(e,t){const i=e.get(Us.JZ),s=t.getModel();if(!s)return;const o=t.getSelections();if(o===null)return;const l=[];for(const g of o){let k=g.startLineNumber,H=g.endLineNumber;if(k!==H&&g.endColumn===1&&H--,k===1){if(k===H)continue}else k--;const ee=HC(s,i,k,H);l.push(...ee)}l.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,l),t.pushUndoStop())}}class PL{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const i of e)i.range&&typeof i.text=="string"&&this._edits.push(i)}getEditOperations(e,t){for(const s of this._edits)t.addEditOperation(wt.Q.lift(s.range),s.text);let i=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}let nf=class{static{this.ID="editor.contrib.autoIndentOnPaste"}constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new vt.Cm,this.callOnModel=new vt.Cm,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(12)<4||this.editor.getOption(55))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){const t=this.editor.getSelections();if(t===null||t.length>1)return;const i=this.editor.getModel();if(!i||this.rangeContainsOnlyWhitespaceCharacters(i,e)||AL(i,e)||!i.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const o=this.editor.getOption(12),{tabSize:l,indentSize:g,insertSpaces:k}=i.getOptions(),H=[],ee={shiftIndent:xe=>Pd.Y.shiftIndent(xe,xe.length+1,l,g,k),unshiftIndent:xe=>Pd.Y.unshiftIndent(xe,xe.length+1,l,g,k)};let ie=e.startLineNumber;for(;ie<=e.endLineNumber;){if(this.shouldIgnoreLine(i,ie)){ie++;continue}break}if(ie>e.endLineNumber)return;let fe=i.getLineContent(ie);if(!/\S/.test(fe.substring(0,e.startColumn-1))){const xe=(0,_c.$f)(o,i,i.getLanguageId(),ie,ee,this._languageConfigurationService);if(xe!==null){const Qe=Vi.UU(fe),ut=Ro(xe,l),Lt=Ro(Qe,l);if(ut!==Lt){const kt=eu(ut,l,k);H.push({range:new wt.Q(ie,1,ie,Qe.length+1),text:kt}),fe=kt+fe.substring(Qe.length)}else{const kt=(0,_c.Yb)(i,ie,this._languageConfigurationService);if(kt===0||kt===8)return}}}const Me=ie;for(;ie<e.endLineNumber;){if(!/\S/.test(i.getLineContent(ie+1))){ie++;continue}break}if(ie!==e.endLineNumber){const xe={tokenization:{getLineTokens:ut=>i.tokenization.getLineTokens(ut),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(ut,Lt)=>i.getLanguageIdAtPosition(ut,Lt)},getLineContent:ut=>ut===Me?fe:i.getLineContent(ut)},Qe=(0,_c.$f)(o,xe,i.getLanguageId(),ie+1,ee,this._languageConfigurationService);if(Qe!==null){const ut=Ro(Qe,l),Lt=Ro(Vi.UU(i.getLineContent(ie+1)),l);if(ut!==Lt){const kt=ut-Lt;for(let ni=ie+1;ni<=e.endLineNumber;ni++){const gi=i.getLineContent(ni),pi=Vi.UU(gi),ln=Ro(pi,l)+kt,Fn=eu(ln,l,k);Fn!==pi&&H.push({range:new wt.Q(ni,1,ni,pi.length+1),text:Fn})}}}}if(H.length>0){this.editor.pushUndoStop();const xe=new PL(H,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",xe),this.editor.pushUndoStop()}}rangeContainsOnlyWhitespaceCharacters(e,t){const i=o=>o.trim().length===0;let s=!0;if(t.startLineNumber===t.endLineNumber){const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);s=i(l)}else for(let o=t.startLineNumber;o<=t.endLineNumber;o++){const l=e.getLineContent(o);if(o===t.startLineNumber){const g=l.substring(t.startColumn-1);s=i(g)}else if(o===t.endLineNumber){const g=l.substring(0,t.endColumn-1);s=i(g)}else s=e.getLineFirstNonWhitespaceColumn(o)===0;if(!s)break}return s}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const i=e.getLineFirstNonWhitespaceColumn(t);if(i===0)return!0;const s=e.tokenization.getLineTokens(t);if(s.getCount()>0){const o=s.findTokenIndexAtOffset(i);if(o>=0&&s.getStandardTokenType(o)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};nf=ML([NL(1,Us.JZ)],nf);function AL(h,e){const t=i=>(0,J0.T)(h,i)===2;return t(e.getStartPosition())||t(e.getEndPosition())}function VC(h,e,t,i){if(h.getLineCount()===1&&h.getLineMaxColumn(1)===1)return;let s="";for(let l=0;l<t;l++)s+=" ";const o=new RegExp(s,"gi");for(let l=1,g=h.getLineCount();l<=g;l++){let k=h.getLineFirstNonWhitespaceColumn(l);if(k===0&&(k=h.getLineMaxColumn(l)),k===1)continue;const H=new wt.Q(l,1,l,k),ee=h.getValueInRange(H),ie=i?ee.replace(/\t/ig,s):ee.replace(o,"	");e.addEditOperation(H,ie)}}class OL{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),VC(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class FL{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),VC(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}(0,we.HW)(nf.ID,nf,2),(0,we.Fl)(Zp),(0,we.Fl)(Xp),(0,we.Fl)(qp),(0,we.Fl)(e_),(0,we.Fl)(t_),(0,we.Fl)(i_),(0,we.Fl)(TL),(0,we.Fl)(RL),(0,we.HW)(Nh.ID,Nh,1),Uo.register(gg);class WL{constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new Mi.L(s.endLineNumber,Math.min(this._originalSelection.positionColumn,s.endColumn),s.endLineNumber,Math.min(this._originalSelection.positionColumn,s.endColumn)):new Mi.L(s.endLineNumber,s.endColumn-this._text.length,s.endLineNumber,s.endColumn)}}var BL=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},HL=function(h,e){return function(t,i){e(t,i,h)}},sf;let Ad=class{static{sf=this}static{this.ID="editor.contrib.inPlaceReplaceController"}static get(e){return e.getContribution(sf.ID)}static{this.DECORATION=Ki.kI.register({description:"in-place-replace",className:"valueSetReplacement"})}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){this.currentRequest?.cancel();const i=this.editor.getSelection(),s=this.editor.getModel();if(!s||!i)return;let o=i;if(o.startLineNumber!==o.endLineNumber)return;const l=new ds.$t(this.editor,5),g=s.uri;return this.editorWorkerService.canNavigateValueSet(g)?(this.currentRequest=(0,hi.SS)(k=>this.editorWorkerService.navigateValueSet(g,o,t)),this.currentRequest.then(k=>{if(!k||!k.range||!k.value||!l.validate(this.editor))return;const H=wt.Q.lift(k.range);let ee=k.range;const ie=k.value.length-(o.endColumn-o.startColumn);ee={startLineNumber:ee.startLineNumber,startColumn:ee.startColumn,endLineNumber:ee.endLineNumber,endColumn:ee.startColumn+k.value.length},ie>1&&(o=new Mi.L(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn+ie-1));const fe=new WL(H,o,k.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,fe),this.editor.pushUndoStop(),this.decorations.set([{range:ee,options:sf.DECORATION}]),this.decorationRemover?.cancel(),this.decorationRemover=(0,hi.wR)(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(Ni.dz)}).catch(Ni.dz)):Promise.resolve(void 0)}};Ad=sf=BL([HL(1,ir.IEditorWorkerService)],Ad);class VL extends we.ks{constructor(){super({id:"editor.action.inPlaceReplace.up",label:Z.kg("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:3159,weight:100}})}run(e,t){const i=Ad.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}}class UL extends we.ks{constructor(){super({id:"editor.action.inPlaceReplace.down",label:Z.kg("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:3161,weight:100}})}run(e,t){const i=Ad.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}}(0,we.HW)(Ad.ID,Ad,4),(0,we.Fl)(VL),(0,we.Fl)(UL);var n_=c(31997);class zL extends we.ks{constructor(){super({id:"expandLineSelection",label:Z.kg("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:ke.R.textInputFocus,primary:2090}})}run(e,t,i){if(i=i||{},!t.hasModel())return;const s=t._getViewModel();s.model.pushStackElement(),s.setCursorStates(i.source,3,n_.c.expandLineSelection(s,s.getCursorStates())),s.revealAllCursors(i.source,!0)}}(0,we.Fl)(zL);class jL{constructor(e,t,i){this._selection=e,this._cursors=t,this._selectionId=null,this._trimInRegexesAndStrings=i}getEditOperations(e,t){const i=KL(e,this._cursors,this._trimInRegexesAndStrings);for(let s=0,o=i.length;s<o;s++){const l=i[s];t.addEditOperation(l.range,l.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function KL(h,e,t){e.sort((g,k)=>g.lineNumber===k.lineNumber?g.column-k.column:g.lineNumber-k.lineNumber);for(let g=e.length-2;g>=0;g--)e[g].lineNumber===e[g+1].lineNumber&&e.splice(g,1);const i=[];let s=0,o=0;const l=e.length;for(let g=1,k=h.getLineCount();g<=k;g++){const H=h.getLineContent(g),ee=H.length+1;let ie=0;if(o<l&&e[o].lineNumber===g&&(ie=e[o].column,o++,ie===ee)||H.length===0)continue;const fe=Vi.lT(H);let Me=0;if(fe===-1)Me=1;else if(fe!==H.length-1)Me=fe+2;else continue;if(!t){if(!h.tokenization.hasAccurateTokensForLine(g))continue;const xe=h.tokenization.getLineTokens(g),Qe=xe.getStandardTokenType(xe.findTokenIndexAtOffset(Me));if(Qe===2||Qe===3)continue}Me=Math.max(ie,Me),i[s++]=ps.k.delete(new wt.Q(g,Me,g,ee))}return i}var $L=c(14932),UC=c(3320);class zC{constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const s=[];for(let l=i.startLineNumber;l<=i.endLineNumber;l++)s.push(e.getLineContent(l));const o=s.join(`
`);o===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new wt.Q(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new wt.Q(i.startLineNumber,1,i.startLineNumber,1),o+`
`):t.addEditOperation(new wt.Q(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+o),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let s=i.startLineNumber,o=i.startColumn,l=i.endLineNumber,g=i.endColumn;this._startLineNumberDelta!==0&&(s=s+this._startLineNumberDelta,o=1),this._endLineNumberDelta!==0&&(l=l+this._endLineNumberDelta,g=1),i=Mi.L.createWithDirection(s,o,l,g,this._selectionDirection)}return i}}var of=c(81483),s_=c(84279),GL=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},QL=function(h,e){return function(t,i){e(t,i,h)}};let o_=class{constructor(e,t,i,s){this._languageConfigurationService=s,this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const i=()=>e.getLanguageId(),s=(ie,fe)=>e.getLanguageIdAtPosition(ie,fe),o=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===o){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let l=this._selection;l.startLineNumber<l.endLineNumber&&l.endColumn===1&&(this._moveEndPositionDown=!0,l=l.setEndPosition(l.endLineNumber-1,e.getLineMaxColumn(l.endLineNumber-1)));const{tabSize:g,indentSize:k,insertSpaces:H}=e.getOptions(),ee=this.buildIndentConverter(g,k,H);if(l.startLineNumber===l.endLineNumber&&e.getLineMaxColumn(l.startLineNumber)===1){const ie=l.startLineNumber,fe=this._isMovingDown?ie+1:ie-1;e.getLineMaxColumn(fe)===1?t.addEditOperation(new wt.Q(1,1,1,1),null):(t.addEditOperation(new wt.Q(ie,1,ie,1),e.getLineContent(fe)),t.addEditOperation(new wt.Q(fe,1,fe,e.getLineMaxColumn(fe)),null)),l=new Mi.L(fe,1,fe,1)}else{let ie,fe;if(this._isMovingDown){ie=l.endLineNumber+1,fe=e.getLineContent(ie),t.addEditOperation(new wt.Q(ie-1,e.getLineMaxColumn(ie-1),ie,e.getLineMaxColumn(ie)),null);let Me=fe;if(this.shouldAutoIndent(e,l)){const xe=this.matchEnterRule(e,ee,g,ie,l.startLineNumber-1);if(xe!==null){const ut=Vi.UU(e.getLineContent(ie)),Lt=xe+Ro(ut,g);Me=eu(Lt,g,H)+this.trimStart(fe)}else{const ut={tokenization:{getLineTokens:kt=>kt===l.startLineNumber?e.tokenization.getLineTokens(ie):e.tokenization.getLineTokens(kt),getLanguageId:i,getLanguageIdAtPosition:s},getLineContent:kt=>kt===l.startLineNumber?e.getLineContent(ie):e.getLineContent(kt)},Lt=(0,_c.$f)(this._autoIndent,ut,e.getLanguageIdAtPosition(ie,1),l.startLineNumber,ee,this._languageConfigurationService);if(Lt!==null){const kt=Vi.UU(e.getLineContent(ie)),ni=Ro(Lt,g),gi=Ro(kt,g);ni!==gi&&(Me=eu(ni,g,H)+this.trimStart(fe))}}t.addEditOperation(new wt.Q(l.startLineNumber,1,l.startLineNumber,1),Me+`
`);const Qe=this.matchEnterRuleMovingDown(e,ee,g,l.startLineNumber,ie,Me);if(Qe!==null)Qe!==0&&this.getIndentEditsOfMovingBlock(e,t,l,g,H,Qe);else{const ut={tokenization:{getLineTokens:kt=>kt===l.startLineNumber?e.tokenization.getLineTokens(ie):kt>=l.startLineNumber+1&&kt<=l.endLineNumber+1?e.tokenization.getLineTokens(kt-1):e.tokenization.getLineTokens(kt),getLanguageId:i,getLanguageIdAtPosition:s},getLineContent:kt=>kt===l.startLineNumber?Me:kt>=l.startLineNumber+1&&kt<=l.endLineNumber+1?e.getLineContent(kt-1):e.getLineContent(kt)},Lt=(0,_c.$f)(this._autoIndent,ut,e.getLanguageIdAtPosition(ie,1),l.startLineNumber+1,ee,this._languageConfigurationService);if(Lt!==null){const kt=Vi.UU(e.getLineContent(l.startLineNumber)),ni=Ro(Lt,g),gi=Ro(kt,g);if(ni!==gi){const pi=ni-gi;this.getIndentEditsOfMovingBlock(e,t,l,g,H,pi)}}}}else t.addEditOperation(new wt.Q(l.startLineNumber,1,l.startLineNumber,1),Me+`
`)}else if(ie=l.startLineNumber-1,fe=e.getLineContent(ie),t.addEditOperation(new wt.Q(ie,1,ie+1,1),null),t.addEditOperation(new wt.Q(l.endLineNumber,e.getLineMaxColumn(l.endLineNumber),l.endLineNumber,e.getLineMaxColumn(l.endLineNumber)),`
`+fe),this.shouldAutoIndent(e,l)){const Me={tokenization:{getLineTokens:Qe=>Qe===ie?e.tokenization.getLineTokens(l.startLineNumber):e.tokenization.getLineTokens(Qe),getLanguageId:i,getLanguageIdAtPosition:s},getLineContent:Qe=>Qe===ie?e.getLineContent(l.startLineNumber):e.getLineContent(Qe)},xe=this.matchEnterRule(e,ee,g,l.startLineNumber,l.startLineNumber-2);if(xe!==null)xe!==0&&this.getIndentEditsOfMovingBlock(e,t,l,g,H,xe);else{const Qe=(0,_c.$f)(this._autoIndent,Me,e.getLanguageIdAtPosition(l.startLineNumber,1),ie,ee,this._languageConfigurationService);if(Qe!==null){const ut=Vi.UU(e.getLineContent(l.startLineNumber)),Lt=Ro(Qe,g),kt=Ro(ut,g);if(Lt!==kt){const ni=Lt-kt;this.getIndentEditsOfMovingBlock(e,t,l,g,H,ni)}}}}}this._selectionId=t.trackSelection(l)}buildIndentConverter(e,t,i){return{shiftIndent:s=>Pd.Y.shiftIndent(s,s.length+1,e,t,i),unshiftIndent:s=>Pd.Y.unshiftIndent(s,s.length+1,e,t,i)}}parseEnterResult(e,t,i,s,o){if(o){let l=o.indentation;o.indentAction===of.l.None||o.indentAction===of.l.Indent?l=o.indentation+o.appendText:o.indentAction===of.l.IndentOutdent?l=o.indentation:o.indentAction===of.l.Outdent&&(l=t.unshiftIndent(o.indentation)+o.appendText);const g=e.getLineContent(s);if(this.trimStart(g).indexOf(this.trimStart(l))>=0){const k=Vi.UU(e.getLineContent(s));let H=Vi.UU(l);const ee=(0,_c.Yb)(e,s,this._languageConfigurationService);ee!==null&&ee&2&&(H=t.unshiftIndent(H));const ie=Ro(H,i),fe=Ro(k,i);return ie-fe}}return null}matchEnterRuleMovingDown(e,t,i,s,o,l){if(Vi.lT(l)>=0){const g=e.getLineMaxColumn(o),k=(0,s_.h)(this._autoIndent,e,new wt.Q(o,g,o,g),this._languageConfigurationService);return this.parseEnterResult(e,t,i,s,k)}else{let g=s-1;for(;g>=1;){const ee=e.getLineContent(g);if(Vi.lT(ee)>=0)break;g--}if(g<1||s>e.getLineCount())return null;const k=e.getLineMaxColumn(g),H=(0,s_.h)(this._autoIndent,e,new wt.Q(g,k,g,k),this._languageConfigurationService);return this.parseEnterResult(e,t,i,s,H)}}matchEnterRule(e,t,i,s,o,l){let g=o;for(;g>=1;){let ee;if(g===o&&l!==void 0?ee=l:ee=e.getLineContent(g),Vi.lT(ee)>=0)break;g--}if(g<1||s>e.getLineCount())return null;const k=e.getLineMaxColumn(g),H=(0,s_.h)(this._autoIndent,e,new wt.Q(g,k,g,k),this._languageConfigurationService);return this.parseEnterResult(e,t,i,s,H)}trimStart(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const i=e.getLanguageIdAtPosition(t.startLineNumber,1),s=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(i!==s||this._languageConfigurationService.getLanguageConfiguration(i).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,i,s,o,l){for(let g=i.startLineNumber;g<=i.endLineNumber;g++){const k=e.getLineContent(g),H=Vi.UU(k),ie=Ro(H,s)+l,fe=eu(ie,s,o);fe!==H&&(t.addEditOperation(new wt.Q(g,1,g,H.length+1),fe),g===i.endLineNumber&&i.endColumn<=H.length+1&&fe===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}};o_=GL([QL(3,Us.JZ)],o_);class vc{static{this._COLLATOR=null}static getCollator(){return vc._COLLATOR||(vc._COLLATOR=new Intl.Collator),vc._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){const i=YL(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(e===null)return!1;const s=jC(e,t,i);if(!s)return!1;for(let o=0,l=s.before.length;o<l;o++)if(s.before[o]!==s.after[o])return!0;return!1}}function jC(h,e,t){const i=e.startLineNumber;let s=e.endLineNumber;if(e.endColumn===1&&s--,i>=s)return null;const o=[];for(let g=i;g<=s;g++)o.push(h.getLineContent(g));let l=o.slice(0);return l.sort(vc.getCollator().compare),t===!0&&(l=l.reverse()),{startLineNumber:i,endLineNumber:s,before:o,after:l}}function YL(h,e,t){const i=jC(h,e,t);return i?ps.k.replace(new wt.Q(i.startLineNumber,1,i.endLineNumber,h.getLineMaxColumn(i.endLineNumber)),i.after.join(`
`)):null}class KC extends we.ks{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const i=t.getSelections().map((l,g)=>({selection:l,index:g,ignore:!1}));i.sort((l,g)=>wt.Q.compareRangesUsingStarts(l.selection,g.selection));let s=i[0];for(let l=1;l<i.length;l++){const g=i[l];s.selection.endLineNumber===g.selection.startLineNumber&&(s.index<g.index?g.ignore=!0:(s.ignore=!0,s=g))}const o=[];for(const l of i)o.push(new zC(l.selection,this.down,l.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class ZL extends KC{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:Z.kg("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:Fe.D8.MenubarSelectionMenu,group:"2_line",title:Z.kg({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class XL extends KC{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:Z.kg("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:Fe.D8.MenubarSelectionMenu,group:"2_line",title:Z.kg({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class JL extends we.ks{constructor(){super({id:"editor.action.duplicateSelection",label:Z.kg("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:ke.R.writable,menuOpts:{menuId:Fe.D8.MenubarSelectionMenu,group:"2_line",title:Z.kg({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,i){if(!t.hasModel())return;const s=[],o=t.getSelections(),l=t.getModel();for(const g of o)if(g.isEmpty())s.push(new zC(g,!0));else{const k=new Mi.L(g.endLineNumber,g.endColumn,g.endLineNumber,g.endColumn);s.push(new yn.tA(k,l.getValueInRange(g)))}t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class $C extends we.ks{constructor(e,t){super(t),this.down=e}run(e,t){const i=e.get(Us.JZ),s=[],o=t.getSelections()||[],l=t.getOption(12);for(const g of o)s.push(new o_(g,this.down,l,i));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class qL extends $C{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:Z.kg("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:Fe.D8.MenubarSelectionMenu,group:"2_line",title:Z.kg({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class eD extends $C{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:Z.kg("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:Fe.D8.MenubarSelectionMenu,group:"2_line",title:Z.kg({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class GC extends we.ks{constructor(e,t){super(t),this.descending=e}run(e,t){if(!t.hasModel())return;const i=t.getModel();let s=t.getSelections();s.length===1&&s[0].isEmpty()&&(s=[new Mi.L(1,1,i.getLineCount(),i.getLineMaxColumn(i.getLineCount()))]);for(const l of s)if(!vc.canRun(t.getModel(),l,this.descending))return;const o=[];for(let l=0,g=s.length;l<g;l++)o[l]=new vc(s[l],this.descending);t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class tD extends GC{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:Z.kg("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:ke.R.writable})}}class iD extends GC{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:Z.kg("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:ke.R.writable})}}class nD extends we.ks{constructor(){super({id:"editor.action.removeDuplicateLines",label:Z.kg("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:ke.R.writable})}run(e,t){if(!t.hasModel())return;const i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;const s=[],o=[];let l=0,g=!0,k=t.getSelections();k.length===1&&k[0].isEmpty()&&(k=[new Mi.L(1,1,i.getLineCount(),i.getLineMaxColumn(i.getLineCount()))],g=!1);for(const H of k){const ee=new Set,ie=[];for(let Qe=H.startLineNumber;Qe<=H.endLineNumber;Qe++){const ut=i.getLineContent(Qe);ee.has(ut)||(ie.push(ut),ee.add(ut))}const fe=new Mi.L(H.startLineNumber,1,H.endLineNumber,i.getLineMaxColumn(H.endLineNumber)),Me=H.startLineNumber-l,xe=new Mi.L(Me,1,Me+ie.length-1,ie[ie.length-1].length);s.push(ps.k.replace(fe,ie.join(`
`))),o.push(xe),l+=H.endLineNumber-H.startLineNumber+1-ie.length}t.pushUndoStop(),t.executeEdits(this.id,s,g?o:void 0),t.pushUndoStop()}}class r_ extends we.ks{static{this.ID="editor.action.trimTrailingWhitespace"}constructor(){super({id:r_.ID,label:Z.kg("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:(0,Dn.m5)(2089,2102),weight:100}})}run(e,t,i){let s=[];i.reason==="auto-save"&&(s=(t.getSelections()||[]).map(ee=>new ui.y(ee.positionLineNumber,ee.positionColumn)));const o=t.getSelection();if(o===null)return;const l=e.get(pt.pG),g=t.getModel(),k=l.getValue("files.trimTrailingWhitespaceInRegexAndStrings",{overrideIdentifier:g?.getLanguageId(),resource:g?.uri}),H=new jL(o,s,k);t.pushUndoStop(),t.executeCommands(this.id,[H]),t.pushUndoStop()}}class sD extends we.ks{constructor(){super({id:"editor.action.deleteLines",label:Z.kg("lines.delete","Delete Line"),alias:"Delete Line",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const i=this._getLinesToRemove(t),s=t.getModel();if(s.getLineCount()===1&&s.getLineMaxColumn(1)===1)return;let o=0;const l=[],g=[];for(let k=0,H=i.length;k<H;k++){const ee=i[k];let ie=ee.startLineNumber,fe=ee.endLineNumber,Me=1,xe=s.getLineMaxColumn(fe);fe<s.getLineCount()?(fe+=1,xe=1):ie>1&&(ie-=1,Me=s.getLineMaxColumn(ie)),l.push(ps.k.replace(new Mi.L(ie,Me,fe,xe),"")),g.push(new Mi.L(ie-o,ee.positionColumn,ie-o,ee.positionColumn)),o+=ee.endLineNumber-ee.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,l,g),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map(o=>{let l=o.endLineNumber;return o.startLineNumber<o.endLineNumber&&o.endColumn===1&&(l-=1),{startLineNumber:o.startLineNumber,selectionStartColumn:o.selectionStartColumn,endLineNumber:l,positionColumn:o.positionColumn}});t.sort((o,l)=>o.startLineNumber===l.startLineNumber?o.endLineNumber-l.endLineNumber:o.startLineNumber-l.startLineNumber);const i=[];let s=t[0];for(let o=1;o<t.length;o++)s.endLineNumber+1>=t[o].startLineNumber?s.endLineNumber=t[o].endLineNumber:(i.push(s),s=t[o]);return i.push(s),i}}class oD extends we.ks{constructor(){super({id:"editor.action.indentLines",label:Z.kg("lines.indent","Indent Line"),alias:"Indent Line",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:2142,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,$L.T.indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class rD extends we.ks{constructor(){super({id:"editor.action.outdentLines",label:Z.kg("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:2140,weight:100}})}run(e,t){Ye.Yh.Outdent.runEditorCommand(e,t,null)}}class aD extends we.ks{constructor(){super({id:"editor.action.insertLineBefore",label:Z.kg("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:3075,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,UC.AO.lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}}class lD extends we.ks{constructor(){super({id:"editor.action.insertLineAfter",label:Z.kg("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:2051,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,UC.AO.lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}}class QC extends we.ks{run(e,t){if(!t.hasModel())return;const i=t.getSelection(),s=this._getRangesToDelete(t),o=[];for(let k=0,H=s.length-1;k<H;k++){const ee=s[k],ie=s[k+1];wt.Q.intersectRanges(ee,ie)===null?o.push(ee):s[k+1]=wt.Q.plusRange(ee,ie)}o.push(s[s.length-1]);const l=this._getEndCursorState(i,o),g=o.map(k=>ps.k.replace(k,""));t.pushUndoStop(),t.executeEdits(this.id,g,l),t.pushUndoStop()}}class cD extends QC{constructor(){super({id:"deleteAllLeft",label:Z.kg("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let i=null;const s=[];let o=0;return t.forEach(l=>{let g;if(l.endColumn===1&&o>0){const k=l.startLineNumber-o;g=new Mi.L(k,l.startColumn,k,l.startColumn)}else g=new Mi.L(l.startLineNumber,l.startColumn,l.startLineNumber,l.startColumn);o+=l.endLineNumber-l.startLineNumber,l.intersectRanges(e)?i=g:s.push(g)}),i&&s.unshift(i),s}_getRangesToDelete(e){const t=e.getSelections();if(t===null)return[];let i=t;const s=e.getModel();return s===null?[]:(i.sort(wt.Q.compareRangesUsingStarts),i=i.map(o=>{if(o.isEmpty())if(o.startColumn===1){const l=Math.max(1,o.startLineNumber-1),g=o.startLineNumber===1?1:s.getLineLength(l)+1;return new wt.Q(l,g,o.startLineNumber,1)}else return new wt.Q(o.startLineNumber,1,o.startLineNumber,o.startColumn);else return new wt.Q(o.startLineNumber,1,o.endLineNumber,o.endColumn)}),i)}}class dD extends QC{constructor(){super({id:"deleteAllRight",label:Z.kg("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let i=null;const s=[];for(let o=0,l=t.length,g=0;o<l;o++){const k=t[o],H=new Mi.L(k.startLineNumber-g,k.startColumn,k.startLineNumber-g,k.startColumn);k.intersectRanges(e)?i=H:s.push(H)}return i&&s.unshift(i),s}_getRangesToDelete(e){const t=e.getModel();if(t===null)return[];const i=e.getSelections();if(i===null)return[];const s=i.map(o=>{if(o.isEmpty()){const l=t.getLineMaxColumn(o.startLineNumber);return o.startColumn===l?new wt.Q(o.startLineNumber,o.startColumn,o.startLineNumber+1,1):new wt.Q(o.startLineNumber,o.startColumn,o.startLineNumber,l)}return o});return s.sort(wt.Q.compareRangesUsingStarts),s}}class hD extends we.ks{constructor(){super({id:"editor.action.joinLines",label:Z.kg("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const i=t.getSelections();if(i===null)return;let s=t.getSelection();if(s===null)return;i.sort(wt.Q.compareRangesUsingStarts);const o=[],l=i.reduce((fe,Me)=>fe.isEmpty()?fe.endLineNumber===Me.startLineNumber?(s.equalsSelection(fe)&&(s=Me),Me):Me.startLineNumber>fe.endLineNumber+1?(o.push(fe),Me):new Mi.L(fe.startLineNumber,fe.startColumn,Me.endLineNumber,Me.endColumn):Me.startLineNumber>fe.endLineNumber?(o.push(fe),Me):new Mi.L(fe.startLineNumber,fe.startColumn,Me.endLineNumber,Me.endColumn));o.push(l);const g=t.getModel();if(g===null)return;const k=[],H=[];let ee=s,ie=0;for(let fe=0,Me=o.length;fe<Me;fe++){const xe=o[fe],Qe=xe.startLineNumber,ut=1;let Lt=0,kt,ni;const gi=g.getLineLength(xe.endLineNumber)-xe.endColumn;if(xe.isEmpty()||xe.startLineNumber===xe.endLineNumber){const ln=xe.getStartPosition();ln.lineNumber<g.getLineCount()?(kt=Qe+1,ni=g.getLineMaxColumn(kt)):(kt=ln.lineNumber,ni=g.getLineMaxColumn(ln.lineNumber))}else kt=xe.endLineNumber,ni=g.getLineMaxColumn(kt);let pi=g.getLineContent(Qe);for(let ln=Qe+1;ln<=kt;ln++){const Fn=g.getLineContent(ln),Ws=g.getLineFirstNonWhitespaceColumn(ln);if(Ws>=1){let Rs=!0;pi===""&&(Rs=!1),Rs&&(pi.charAt(pi.length-1)===" "||pi.charAt(pi.length-1)==="	")&&(Rs=!1,pi=pi.replace(/[\s\uFEFF\xA0]+$/g," "));const Yo=Fn.substr(Ws-1);pi+=(Rs?" ":"")+Yo,Rs?Lt=Yo.length+1:Lt=Yo.length}else Lt=0}const pn=new wt.Q(Qe,ut,kt,ni);if(!pn.isEmpty()){let ln;xe.isEmpty()?(k.push(ps.k.replace(pn,pi)),ln=new Mi.L(pn.startLineNumber-ie,pi.length-Lt+1,Qe-ie,pi.length-Lt+1)):xe.startLineNumber===xe.endLineNumber?(k.push(ps.k.replace(pn,pi)),ln=new Mi.L(xe.startLineNumber-ie,xe.startColumn,xe.endLineNumber-ie,xe.endColumn)):(k.push(ps.k.replace(pn,pi)),ln=new Mi.L(xe.startLineNumber-ie,xe.startColumn,xe.startLineNumber-ie,pi.length-gi)),wt.Q.intersectRanges(pn,s)!==null?ee=ln:H.push(ln)}ie+=pn.endLineNumber-pn.startLineNumber}H.unshift(ee),t.pushUndoStop(),t.executeEdits(this.id,k,H),t.pushUndoStop()}}class uD extends we.ks{constructor(){super({id:"editor.action.transpose",label:Z.kg("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:ke.R.writable})}run(e,t){const i=t.getSelections();if(i===null)return;const s=t.getModel();if(s===null)return;const o=[];for(let l=0,g=i.length;l<g;l++){const k=i[l];if(!k.isEmpty())continue;const H=k.getStartPosition(),ee=s.getLineMaxColumn(H.lineNumber);if(H.column>=ee){if(H.lineNumber===s.getLineCount())continue;const ie=new wt.Q(H.lineNumber,Math.max(1,H.column-1),H.lineNumber+1,1),fe=s.getValueInRange(ie).split("").reverse().join("");o.push(new yn.iu(new Mi.L(H.lineNumber,Math.max(1,H.column-1),H.lineNumber+1,1),fe))}else{const ie=new wt.Q(H.lineNumber,Math.max(1,H.column-1),H.lineNumber,H.column+1),fe=s.getValueInRange(ie).split("").reverse().join("");o.push(new yn.ui(ie,fe,new Mi.L(H.lineNumber,H.column+1,H.lineNumber,H.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class Cc extends we.ks{run(e,t){const i=t.getSelections();if(i===null)return;const s=t.getModel();if(s===null)return;const o=t.getOption(132),l=[];for(const g of i)if(g.isEmpty()){const k=g.getStartPosition(),H=t.getConfiguredWordAtPosition(k);if(!H)continue;const ee=new wt.Q(k.lineNumber,H.startColumn,k.lineNumber,H.endColumn),ie=s.getValueInRange(ee);l.push(ps.k.replace(ee,this._modifyText(ie,o)))}else{const k=s.getValueInRange(g);l.push(ps.k.replace(g,this._modifyText(k,o)))}t.pushUndoStop(),t.executeEdits(this.id,l),t.pushUndoStop()}}class gD extends Cc{constructor(){super({id:"editor.action.transformToUppercase",label:Z.kg("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:ke.R.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class fD extends Cc{constructor(){super({id:"editor.action.transformToLowercase",label:Z.kg("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:ke.R.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class za{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}class rf extends Cc{static{this.titleBoundary=new za("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu")}constructor(){super({id:"editor.action.transformToTitlecase",label:Z.kg("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:ke.R.writable})}_modifyText(e,t){const i=rf.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,s=>s.toLocaleUpperCase()):e}}class Od extends Cc{static{this.caseBoundary=new za("(\\p{Ll})(\\p{Lu})","gmu")}static{this.singleLetters=new za("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu")}constructor(){super({id:"editor.action.transformToSnakecase",label:Z.kg("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:ke.R.writable})}_modifyText(e,t){const i=Od.caseBoundary.get(),s=Od.singleLetters.get();return!i||!s?e:e.replace(i,"$1_$2").replace(s,"$1_$2$3").toLocaleLowerCase()}}class af extends Cc{static{this.wordBoundary=new za("[_\\s-]","gm")}constructor(){super({id:"editor.action.transformToCamelcase",label:Z.kg("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:ke.R.writable})}_modifyText(e,t){const i=af.wordBoundary.get();if(!i)return e;const s=e.split(i);return s.shift()+s.map(l=>l.substring(0,1).toLocaleUpperCase()+l.substring(1)).join("")}}class tu extends Cc{static{this.wordBoundary=new za("[_\\s-]","gm")}static{this.wordBoundaryToMaintain=new za("(?<=\\.)","gm")}constructor(){super({id:"editor.action.transformToPascalcase",label:Z.kg("editor.transformToPascalcase","Transform to Pascal Case"),alias:"Transform to Pascal Case",precondition:ke.R.writable})}_modifyText(e,t){const i=tu.wordBoundary.get(),s=tu.wordBoundaryToMaintain.get();return!i||!s?e:e.split(s).map(g=>g.split(i)).flat().map(g=>g.substring(0,1).toLocaleUpperCase()+g.substring(1)).join("")}}class Fd extends Cc{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}static{this.caseBoundary=new za("(\\p{Ll})(\\p{Lu})","gmu")}static{this.singleLetters=new za("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu")}static{this.underscoreBoundary=new za("(\\S)(_)(\\S)","gm")}constructor(){super({id:"editor.action.transformToKebabcase",label:Z.kg("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:ke.R.writable})}_modifyText(e,t){const i=Fd.caseBoundary.get(),s=Fd.singleLetters.get(),o=Fd.underscoreBoundary.get();return!i||!s||!o?e:e.replace(o,"$1-$3").replace(i,"$1-$2").replace(s,"$1-$2").toLocaleLowerCase()}}(0,we.Fl)(ZL),(0,we.Fl)(XL),(0,we.Fl)(JL),(0,we.Fl)(qL),(0,we.Fl)(eD),(0,we.Fl)(tD),(0,we.Fl)(iD),(0,we.Fl)(nD),(0,we.Fl)(r_),(0,we.Fl)(sD),(0,we.Fl)(oD),(0,we.Fl)(rD),(0,we.Fl)(aD),(0,we.Fl)(lD),(0,we.Fl)(cD),(0,we.Fl)(dD),(0,we.Fl)(hD),(0,we.Fl)(uD),(0,we.Fl)(gD),(0,we.Fl)(fD),Od.caseBoundary.isSupported()&&Od.singleLetters.isSupported()&&(0,we.Fl)(Od),af.wordBoundary.isSupported()&&(0,we.Fl)(af),tu.wordBoundary.isSupported()&&(0,we.Fl)(tu),rf.titleBoundary.isSupported()&&(0,we.Fl)(rf),Fd.isSupported()&&(0,we.Fl)(Fd);var mD=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},lf=function(h,e){return function(t,i){e(t,i,h)}},cf;const YC=new et.N1("LinkedEditingInputVisible",!1),pD="linked-editing-decoration";let Wd=class extends vt.jG{static{cf=this}static{this.ID="editor.contrib.linkedEditing"}static{this.DECORATION=Ki.kI.register({description:"linked-editing",stickiness:0,className:pD})}static get(e){return e.getContribution(cf.ID)}constructor(e,t,i,s,o){super(),this.languageConfigurationService=s,this._syncRangesToken=0,this._localToDispose=this._register(new vt.Cm),this._editor=e,this._providers=i.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=YC.bindTo(t),this._debounceInformation=o.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new vt.Cm),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequestCts=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(l=>{(l.hasChanged(70)||l.hasChanged(94))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(e){const t=this._editor.getModel(),i=t!==null&&(this._editor.getOption(70)||this._editor.getOption(94))&&this._providers.has(t);if(i===this._enabled&&!e||(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||t===null))return;this._localToDispose.add(zi.Jh.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));const s=new hi.ve(this._debounceInformation.get(t)),o=()=>{this._rangeUpdateTriggerPromise=s.trigger(()=>this.updateRanges(),this._debounceDuration??this._debounceInformation.get(t))},l=new hi.ve(0),g=k=>{this._rangeSyncTriggerPromise=l.trigger(()=>this._syncRanges(k))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{o()})),this._localToDispose.add(this._editor.onDidChangeModelContent(k=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const H=this._currentDecorations.getRange(0);if(H&&k.changes.every(ee=>H.intersectRanges(ee.range))){g(this._syncRangesToken);return}}o()})),this._localToDispose.add({dispose:()=>{s.dispose(),l.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;const t=this._editor.getModel(),i=this._currentDecorations.getRange(0);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();const s=t.getValueInRange(i);if(this._currentWordPattern){const l=s.match(this._currentWordPattern);if((l?l[0].length:0)!==s.length)return this.clearRanges()}const o=[];for(let l=1,g=this._currentDecorations.length;l<g;l++){const k=this._currentDecorations.getRange(l);if(k)if(k.startLineNumber!==k.endLineNumber)o.push({range:k,text:s});else{let H=t.getValueInRange(k),ee=s,ie=k.startColumn,fe=k.endColumn;const Me=Vi.Qp(H,ee);ie+=Me,H=H.substr(Me),ee=ee.substr(Me);const xe=Vi.Vi(H,ee);fe-=xe,H=H.substr(0,H.length-xe),ee=ee.substr(0,ee.length-xe),(ie!==fe||ee.length!==0)&&o.push({range:new wt.Q(k.startLineNumber,ie,k.endLineNumber,fe),text:ee})}}if(o.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const l=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(l)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)}async updateRanges(e=!1){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const i=this._editor.getModel(),s=i.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===s){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const l=this._currentDecorations.getRange(0);if(l&&l.containsPosition(t))return}}this.clearRanges(),this._currentRequestPosition=t,this._currentRequestModelVersion=s;const o=this._currentRequestCts=new Fi.Qi;try{const l=new eo.W(!1),g=await ZC(this._providers,i,t,o.token);if(this._debounceInformation.update(i,l.elapsed()),o!==this._currentRequestCts||(this._currentRequestCts=null,s!==i.getVersionId()))return;let k=[];g?.ranges&&(k=g.ranges),this._currentWordPattern=g?.wordPattern||this._languageWordPattern;let H=!1;for(let ie=0,fe=k.length;ie<fe;ie++)if(wt.Q.containsPosition(k[ie],t)){if(H=!0,ie!==0){const Me=k[ie];k.splice(ie,1),k.unshift(Me)}break}if(!H){this.clearRanges();return}const ee=k.map(ie=>({range:ie,options:cf.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(ee),this._syncRangesToken++}catch(l){(0,Ni.MB)(l)||(0,Ni.dz)(l),(this._currentRequestCts===o||!this._currentRequestCts)&&this.clearRanges()}}};Wd=cf=mD([lf(1,et.fN),lf(2,_e.ILanguageFeaturesService),lf(3,Us.JZ),lf(4,Vs.ILanguageFeatureDebounceService)],Wd);class _D extends we.ks{constructor(){super({id:"editor.action.linkedEditing",label:Z.kg("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:et.M$.and(ke.R.writable,ke.R.hasRenameProvider),kbOpts:{kbExpr:ke.R.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const i=e.get(Xt.T),[s,o]=Array.isArray(t)&&t||[void 0,void 0];return Ot.r.isUri(s)&&ui.y.isIPosition(o)?i.openCodeEditor({resource:s},i.getActiveCodeEditor()).then(l=>{l&&(l.setPosition(o),l.invokeWithinContext(g=>(this.reportTelemetry(g,l),this.run(g,l))))},Ni.dz):super.runCommand(e,t)}run(e,t){const i=Wd.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}}const vD=we.DX.bindToContribution(Wd.get);(0,we.E_)(new vD({id:"cancelLinkedEditingInput",precondition:YC,handler:h=>h.clearRanges(),kbOpts:{kbExpr:ke.R.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));function ZC(h,e,t,i){const s=h.ordered(e);return(0,hi.$1)(s.map(o=>async()=>{try{return await o.provideLinkedEditingRanges(e,t,i)}catch(l){(0,Ni.M_)(l);return}}),o=>!!o&&Xi.EI(o?.ranges))}const cI=(0,Tt.x1A)("editor.linkedEditingBackground",{dark:wn.Q1.fromHex("#f00").transparent(.3),light:wn.Q1.fromHex("#f00").transparent(.3),hcDark:wn.Q1.fromHex("#f00").transparent(.3),hcLight:wn.Q1.white},Z.kg("editorLinkedEditingBackground","Background color when the editor auto renames on type."));(0,we.ke)("_executeLinkedEditingProvider",(h,e,t)=>{const{linkedEditingRangeProvider:i}=h.get(_e.ILanguageFeaturesService);return ZC(i,e,t,Fi.XO.None)}),(0,we.HW)(Wd.ID,Wd,1),(0,we.Fl)(_D);class CD{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}async resolve(e){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))}}class df{constructor(e){this._disposables=new vt.Cm;let t=[];for(const[i,s]of e){const o=i.links.map(l=>new CD(l,s));t=df._union(t,o),(0,vt.Xm)(i)&&this._disposables.add(i)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const i=[];let s,o,l,g;for(s=0,l=0,o=e.length,g=t.length;s<o&&l<g;){const k=e[s],H=t[l];if(wt.Q.areIntersectingOrTouching(k.range,H.range)){s++;continue}wt.Q.compareRangesUsingStarts(k.range,H.range)<0?(i.push(k),s++):(i.push(H),l++)}for(;s<o;s++)i.push(e[s]);for(;l<g;l++)i.push(t[l]);return i}}function XC(h,e,t){const i=[],s=h.ordered(e).reverse().map((o,l)=>Promise.resolve(o.provideLinks(e,t)).then(g=>{g&&(i[l]=[g,o])},Ni.M_));return Promise.all(s).then(()=>{const o=new df((0,Xi.Yc)(i));return t.isCancellationRequested?(o.dispose(),new df([])):o})}Di.w.registerCommand("_executeLinkProvider",async(h,...e)=>{let[t,i]=e;(0,hn.j)(t instanceof Ot.r),typeof i!="number"&&(i=0);const{linkProvider:s}=h.get(_e.ILanguageFeaturesService),o=h.get(Zs.IModelService).getModel(t);if(!o)return[];const l=await XC(s,o,Fi.XO.None);if(!l)return[];for(let k=0;k<Math.min(i,l.links.length);k++)await l.links[k].resolve(Fi.XO.None);const g=l.links.slice(0);return l.dispose(),g});var bD=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},hf=function(h,e){return function(t,i){e(t,i,h)}},a_;let iu=class extends vt.jG{static{a_=this}static{this.ID="editor.linkDetector"}static get(e){return e.getContribution(a_.ID)}constructor(e,t,i,s,o){super(),this.editor=e,this.openerService=t,this.notificationService=i,this.languageFeaturesService=s,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=o.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new hi.uC(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const l=this._register(new hl(e));this._register(l.onMouseMoveOrRelevantKeyDown(([g,k])=>{this._onEditorMouseMove(g,k)})),this._register(l.onExecute(g=>{this.onEditorMouseUp(g)})),this._register(l.onCancel(g=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(g=>{g.hasChanged(71)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(g=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(g=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(g=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(g=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}async computeLinksNow(){if(!this.editor.hasModel()||!this.editor.getOption(71))return;const e=this.editor.getModel();if(!e.isTooLargeForSyncing()&&this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=(0,hi.SS)(t=>XC(this.providers,e,t));try{const t=new eo.W(!1);if(this.activeLinksList=await this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){(0,Ni.dz)(t)}finally{this.computePromise=null}}}updateDecorations(e){const t=this.editor.getOption(78)==="altKey",i=[],s=Object.keys(this.currentOccurrences);for(const l of s){const g=this.currentOccurrences[l];i.push(g.decorationId)}const o=[];if(e)for(const l of e)o.push(Bd.decoration(l,t));this.editor.changeDecorations(l=>{const g=l.deltaDecorations(i,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let k=0,H=g.length;k<H;k++){const ee=new Bd(e[k],g[k]);this.currentOccurrences[ee.decorationId]=ee}})}_onEditorMouseMove(e,t){const i=this.editor.getOption(78)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const s=this.getLinkOccurrence(e.target.position);s&&this.editor.changeDecorations(o=>{s.activate(o,i),this.activeLinkDecorationId=s.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(78)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(i=>{t.deactivate(i,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,i=!1){if(!this.openerService)return;const{link:s}=e;s.resolve(Fi.XO.None).then(o=>{if(typeof o=="string"&&this.editor.hasModel()){const l=this.editor.getModel().uri;if(l.scheme===ue.ny.file&&o.startsWith(`${ue.ny.file}:`)){const g=Ot.r.parse(o);if(g.scheme===ue.ny.file){const k=Ee.su(g);let H=null;k.startsWith("/./")||k.startsWith("\\.\\")?H=`.${k.substr(1)}`:(k.startsWith("//./")||k.startsWith("\\\\.\\"))&&(H=`.${k.substr(2)}`),H&&(o=Ee.uJ(l,H))}}}return this.openerService.open(o,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},o=>{const l=o instanceof Error?o.message:o;l==="invalid"?this.notificationService.warn(Z.kg("invalid.url","Failed to open this link because it is not well-formed: {0}",s.url.toString())):l==="missing"?this.notificationService.warn(Z.kg("missing.url","Failed to open this link because its target is missing.")):(0,Ni.dz)(o)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const i of t){const s=this.currentOccurrences[i.id];if(s)return s}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){this.computeLinks.cancel(),this.activeLinksList&&(this.activeLinksList?.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};iu=a_=bD([hf(1,Qs.C),hf(2,As.Ot),hf(3,_e.ILanguageFeaturesService),hf(4,Vs.ILanguageFeatureDebounceService)],iu);const JC={general:Ki.kI.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:Ki.kI.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class Bd{static decoration(e,t){return{range:e.range,options:Bd._getOptions(e,t,!1)}}static _getOptions(e,t,i){const s={...i?JC.active:JC.general};return s.hoverMessage=SD(e,t),s}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,Bd._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,Bd._getOptions(this.link,t,!1))}}function SD(h,e){const t=h.url&&/^command:/i.test(h.url.toString()),i=h.tooltip?h.tooltip:t?Z.kg("links.navigate.executeCmd","Execute command"):Z.kg("links.navigate.follow","Follow link"),s=e?Mn.zx?Z.kg("links.navigate.kb.meta.mac","cmd + click"):Z.kg("links.navigate.kb.meta","ctrl + click"):Mn.zx?Z.kg("links.navigate.kb.alt.mac","option + click"):Z.kg("links.navigate.kb.alt","alt + click");if(h.url){let o="";if(/^command:/i.test(h.url.toString())){const g=h.url.toString().match(/^command:([^?#]+)/);if(g){const k=g[1];o=Z.kg("tooltip.explanation","Execute command {0}",k)}}return new nn.Bc("",!0).appendLink(h.url.toString(!0).replace(/ /g,"%20"),i,o).appendMarkdown(` (${s})`)}else return new nn.Bc().appendText(`${i} (${s})`)}class wD extends we.ks{constructor(){super({id:"editor.action.openLink",label:Z.kg("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const i=iu.get(t);if(!i||!t.hasModel())return;const s=t.getSelections();for(const o of s){const l=i.getLinkOccurrence(o.getEndPosition());l&&i.openLinkOccurrence(l,!1)}}}(0,we.HW)(iu.ID,iu,1),(0,we.Fl)(wD);class qC extends vt.jG{static{this.ID="editor.contrib.longLinesHelper"}constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>{const i=this._editor.getOption(118);i>=0&&t.target.type===6&&t.target.position.column>=i&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}}(0,we.HW)(qC.ID,qC,2);const yD=(0,Tt.x1A)("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},Z.kg("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);(0,Tt.x1A)("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},Z.kg("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),(0,Tt.x1A)("editor.wordHighlightTextBackground",yD,Z.kg("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);const LD=(0,Tt.x1A)("editor.wordHighlightBorder",{light:null,dark:null,hcDark:Tt.buw,hcLight:Tt.buw},Z.kg("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));(0,Tt.x1A)("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:Tt.buw,hcLight:Tt.buw},Z.kg("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),(0,Tt.x1A)("editor.wordHighlightTextBorder",LD,Z.kg("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));const DD=(0,Tt.x1A)("editorOverviewRuler.wordHighlightForeground","#A0A0A0CC",Z.kg("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),ED=(0,Tt.x1A)("editorOverviewRuler.wordHighlightStrongForeground","#C0A0C0CC",Z.kg("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),xD=(0,Tt.x1A)("editorOverviewRuler.wordHighlightTextForeground",Tt.z5H,Z.kg("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),kD=Ki.kI.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:(0,$i.Yf)(ED),position:In.A5.Center},minimap:{color:(0,$i.Yf)(Tt.Xp1),position:1}}),ID=Ki.kI.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:(0,$i.Yf)(xD),position:In.A5.Center},minimap:{color:(0,$i.Yf)(Tt.Xp1),position:1}}),MD=Ki.kI.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:(0,$i.Yf)(Tt.z5H),position:In.A5.Center},minimap:{color:(0,$i.Yf)(Tt.Xp1),position:1}}),ND=Ki.kI.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),TD=Ki.kI.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:(0,$i.Yf)(DD),position:In.A5.Center},minimap:{color:(0,$i.Yf)(Tt.Xp1),position:1}});function RD(h){return h===Et.Kb.Write?kD:h===Et.Kb.Text?ID:TD}function PD(h){return h?ND:MD}(0,$i.zy)((h,e)=>{const t=h.getColor(Tt.QwA);t&&e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`)});var AD=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},OD=function(h,e){return function(t,i){e(t,i,h)}},l_;function Sl(h,e){const t=e.filter(i=>!h.find(s=>s.equals(i)));if(t.length>=1){const i=t.map(o=>`line ${o.viewState.position.lineNumber} column ${o.viewState.position.column}`).join(", "),s=t.length===1?Z.kg("cursorAdded","Cursor added: {0}",i):Z.kg("cursorsAdded","Cursors added: {0}",i);(0,dn.h5)(s)}}class FD extends we.ks{constructor(){super({id:"editor.action.insertCursorAbove",label:Z.kg("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:Fe.D8.MenubarSelectionMenu,group:"3_multi",title:Z.kg({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let s=!0;i&&i.logicalLine===!1&&(s=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const l=o.getCursorStates();o.setCursorStates(i.source,3,n_.c.addCursorUp(o,l,s)),o.revealTopMostCursor(i.source),Sl(l,o.getCursorStates())}}class WD extends we.ks{constructor(){super({id:"editor.action.insertCursorBelow",label:Z.kg("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:Fe.D8.MenubarSelectionMenu,group:"3_multi",title:Z.kg({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let s=!0;i&&i.logicalLine===!1&&(s=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const l=o.getCursorStates();o.setCursorStates(i.source,3,n_.c.addCursorDown(o,l,s)),o.revealBottomMostCursor(i.source),Sl(l,o.getCursorStates())}}class BD extends we.ks{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:Z.kg("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:Fe.D8.MenubarSelectionMenu,group:"3_multi",title:Z.kg({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let s=e.startLineNumber;s<e.endLineNumber;s++){const o=t.getLineMaxColumn(s);i.push(new Mi.L(s,o,s,o))}e.endColumn>1&&i.push(new Mi.L(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),s=t.getSelections(),o=t._getViewModel(),l=o.getCursorStates(),g=[];s.forEach(k=>this.getCursorsForSelection(k,i,g)),g.length>0&&t.setSelections(g),Sl(l,o.getCursorStates())}}class HD extends we.ks{constructor(){super({id:"editor.action.addCursorsToBottom",label:Z.kg("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),s=t.getModel().getLineCount(),o=[];for(let k=i[0].startLineNumber;k<=s;k++)o.push(new Mi.L(k,i[0].startColumn,k,i[0].endColumn));const l=t._getViewModel(),g=l.getCursorStates();o.length>0&&t.setSelections(o),Sl(g,l.getCursorStates())}}class VD extends we.ks{constructor(){super({id:"editor.action.addCursorsToTop",label:Z.kg("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),s=[];for(let g=i[0].startLineNumber;g>=1;g--)s.push(new Mi.L(g,i[0].startColumn,g,i[0].endColumn));const o=t._getViewModel(),l=o.getCursorStates();s.length>0&&t.setSelections(s),Sl(l,o.getCursorStates())}}class uf{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class nu{static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new nu(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let s=!1,o,l;const g=e.getSelections();g.length===1&&g[0].isEmpty()?(s=!0,o=!0,l=!0):(o=i.wholeWord,l=i.matchCase);const k=e.getSelection();let H,ee=null;if(k.isEmpty()){const ie=e.getConfiguredWordAtPosition(k.getStartPosition());if(!ie)return null;H=ie.word,ee=new Mi.L(k.startLineNumber,ie.startColumn,k.startLineNumber,ie.endColumn)}else H=e.getModel().getValueInRange(k).replace(/\r\n/g,`
`);return new nu(e,t,s,H,o,l,ee)}constructor(e,t,i,s,o,l,g){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=s,this.wholeWord=o,this.matchCase=l,this.currentMatch=g}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new uf(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new uf(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return i?new Mi.L(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new uf(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new uf(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return i?new Mi.L(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824)}}class Hd extends vt.jG{static{this.ID="editor.contrib.multiCursorController"}static get(e){return e.getContribution(Hd.ID)}constructor(e){super(),this._sessionDispose=this._register(new vt.Cm),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=nu.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(s=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(s=>{(s.matchCase||s.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new Mi.L(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const s=e.getState().matchCase;if(!eb(this._editor.getModel(),t,s)){const l=this._editor.getModel(),g=[];for(let k=0,H=t.length;k<H;k++)g[k]=this._expandEmptyToWord(l,t[k]);this._editor.setSelections(g);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex){const s=this._editor.getModel();i.searchScope?t=s.findMatches(i.searchString,i.searchScope,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(132):null,!1,1073741824):t=s.findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(132):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(i.searchScope)}if(t.length>0){const s=this._editor.getSelection();for(let o=0,l=t.length;o<l;o++){const g=t[o];if(g.range.intersectRanges(s)){t[o]=t[0],t[0]=g;break}}this._setSelections(t.map(o=>new Mi.L(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)))}}}class Vd extends we.ks{run(e,t){const i=Hd.get(t);if(!i)return;const s=t._getViewModel();if(s){const o=s.getCursorStates(),l=Eo.get(t);if(l)this._run(i,l);else{const g=e.get(Ri._Y).createInstance(Eo,t);this._run(i,g),g.dispose()}Sl(o,s.getCursorStates())}}}class UD extends Vd{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:Z.kg("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:ke.R.focus,primary:2082,weight:100},menuOpts:{menuId:Fe.D8.MenubarSelectionMenu,group:"3_multi",title:Z.kg({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class zD extends Vd{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:Z.kg("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:Fe.D8.MenubarSelectionMenu,group:"3_multi",title:Z.kg({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class jD extends Vd{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:Z.kg("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:ke.R.focus,primary:(0,Dn.m5)(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class KD extends Vd{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:Z.kg("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class $D extends Vd{constructor(){super({id:"editor.action.selectHighlights",label:Z.kg("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:ke.R.focus,primary:3114,weight:100},menuOpts:{menuId:Fe.D8.MenubarSelectionMenu,group:"3_multi",title:Z.kg({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class GD extends Vd{constructor(){super({id:"editor.action.changeAll",label:Z.kg("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:et.M$.and(ke.R.writable,ke.R.editorTextFocus),kbOpts:{kbExpr:ke.R.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class QD{constructor(e,t,i,s,o){this._model=e,this._searchText=t,this._matchCase=i,this._wordSeparators=s,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,o&&this._model===o._model&&this._searchText===o._searchText&&this._matchCase===o._matchCase&&this._wordSeparators===o._wordSeparators&&this._modelVersionId===o._modelVersionId&&(this._cachedFindMatches=o._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(wt.Q.compareRangesUsingStarts)),this._cachedFindMatches}}let gf=class extends vt.jG{static{l_=this}static{this.ID="editor.contrib.selectionHighlighter"}constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(109),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new hi.uC(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(s=>{this._isEnabled=e.getOption(109)})),this._register(e.onDidChangeCursorSelection(s=>{this._isEnabled&&(s.selection.isEmpty()?s.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(s=>{this._setState(null)})),this._register(e.onDidChangeModelContent(s=>{this._isEnabled&&this.updateSoon.schedule()}));const i=Eo.get(e);i&&this._register(i.getState().onFindReplaceStateChange(s=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState(l_._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,i){if(!t||!i.hasModel())return null;const s=i.getSelection();if(s.startLineNumber!==s.endLineNumber)return null;const o=Hd.get(i);if(!o)return null;const l=Eo.get(i);if(!l)return null;let g=o.getSession(l);if(!g){const ee=i.getSelections();if(ee.length>1){const fe=l.getState().matchCase;if(!eb(i.getModel(),ee,fe))return null}g=nu.create(i,l)}if(!g||g.currentMatch||/^[ \t]+$/.test(g.searchText)||g.searchText.length>200)return null;const k=l.getState(),H=k.matchCase;if(k.isRevealed){let ee=k.searchString;H||(ee=ee.toLowerCase());let ie=g.searchText;if(H||(ie=ie.toLowerCase()),ee===ie&&g.matchCase===k.matchCase&&g.wholeWord===k.wholeWord&&!k.isRegex)return null}return new QD(i.getModel(),g.searchText,g.matchCase,g.wholeWord?i.getOption(132):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const i=this.state.findMatches(),s=this.editor.getSelections();s.sort(wt.Q.compareRangesUsingStarts);const o=[];for(let H=0,ee=0,ie=i.length,fe=s.length;H<ie;){const Me=i[H];if(ee>=fe)o.push(Me),H++;else{const xe=wt.Q.compareRangesUsingStarts(Me,s[ee]);xe<0?((s[ee].isEmpty()||!wt.Q.areIntersecting(Me,s[ee]))&&o.push(Me),H++):(xe>0||H++,ee++)}}const l=this.editor.getOption(81)!=="off",g=this._languageFeaturesService.documentHighlightProvider.has(t)&&l,k=o.map(H=>({range:H,options:PD(g)}));this._decorations.set(k)}dispose(){this._setState(null),super.dispose()}};gf=l_=AD([OD(1,_e.ILanguageFeaturesService)],gf);function eb(h,e,t){const i=tb(h,e[0],!t);for(let s=1,o=e.length;s<o;s++){const l=e[s];if(l.isEmpty())return!1;const g=tb(h,l,!t);if(i!==g)return!1}return!0}function tb(h,e,t){const i=h.getValueInRange(e);return t?i.toLowerCase():i}class YD extends we.ks{constructor(){super({id:"editor.action.focusNextCursor",label:Z.kg("mutlicursor.focusNextCursor","Focus Next Cursor"),metadata:{description:Z.kg("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const o=Array.from(s.getCursorStates()),l=o.shift();l&&(o.push(l),s.setCursorStates(i.source,3,o),s.revealPrimaryCursor(i.source,!0),Sl(o,s.getCursorStates()))}}class ZD extends we.ks{constructor(){super({id:"editor.action.focusPreviousCursor",label:Z.kg("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),metadata:{description:Z.kg("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const o=Array.from(s.getCursorStates()),l=o.pop();l&&(o.unshift(l),s.setCursorStates(i.source,3,o),s.revealPrimaryCursor(i.source,!0),Sl(o,s.getCursorStates()))}}(0,we.HW)(Hd.ID,Hd,4),(0,we.HW)(gf.ID,gf,1),(0,we.Fl)(FD),(0,we.Fl)(WD),(0,we.Fl)(BD),(0,we.Fl)(UD),(0,we.Fl)(zD),(0,we.Fl)(jD),(0,we.Fl)(KD),(0,we.Fl)($D),(0,we.Fl)(GD),(0,we.Fl)(HD),(0,we.Fl)(VD),(0,we.Fl)(YD),(0,we.Fl)(ZD);const XD="editor.action.inlineEdit.accept",JD="editor.action.inlineEdit.reject",qD="editor.action.inlineEdit.jumpTo",eE="editor.action.inlineEdit.jumpBack";var tE=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},iE=function(h,e){return function(t,i){e(t,i,h)}};const c_="inline-edit";let d_=class extends vt.jG{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=(0,si.FY)(this,!1),this.currentTextModel=(0,si.y0)(this,this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=(0,si.un)(this,s=>{if(this.isDisposed.read(s))return;const o=this.currentTextModel.read(s);if(o!==this.model.targetTextModel.read(s))return;const l=this.model.ghostText.read(s);if(!l)return;let g=this.model.range?.read(s);g&&g.startLineNumber===g.endLineNumber&&g.startColumn===g.endColumn&&(g=void 0);const k=(g?g.startLineNumber===g.endLineNumber:!0)&&l.parts.length===1&&l.parts[0].lines.length===1,H=l.parts.length===1&&l.parts[0].lines.every(kt=>kt.length===0),ee=[],ie=[];function fe(kt,ni){if(ie.length>0){const gi=ie[ie.length-1];ni&&gi.decorations.push(new Uh.d(gi.content.length+1,gi.content.length+1+kt[0].length,ni,0)),gi.content+=kt[0],kt=kt.slice(1)}for(const gi of kt)ie.push({content:gi,decorations:ni?[new Uh.d(1,gi.length+1,ni,0)]:[]})}const Me=o.getLineContent(l.lineNumber);let xe,Qe=0;if(!H&&(k||!g)){for(const kt of l.parts){let ni=kt.lines;g&&!k&&(fe(ni,c_),ni=[]),xe===void 0?(ee.push({column:kt.column,text:ni[0],preview:kt.preview}),ni=ni.slice(1)):fe([Me.substring(Qe,kt.column-1)],void 0),ni.length>0&&(fe(ni,c_),xe===void 0&&kt.column<=Me.length&&(xe=kt.column)),Qe=kt.column-1}xe!==void 0&&fe([Me.substring(Qe)],void 0)}const ut=xe!==void 0?new tC(xe,Me.length+1):void 0,Lt=k||!g?l.lineNumber:g.endLineNumber-1;return{inlineTexts:ee,additionalLines:ie,hiddenRange:ut,lineNumber:Lt,additionalReservedLineCount:this.model.minReservedLineCount.read(s),targetTextModel:o,range:g,isSingleLine:k,isPureRemove:H}}),this.decorations=(0,si.un)(this,s=>{const o=this.uiState.read(s);if(!o)return[];const l=[];if(o.hiddenRange&&l.push({range:o.hiddenRange.toRange(o.lineNumber),options:{inlineClassName:"inline-edit-hidden",description:"inline-edit-hidden"}}),o.range){const g=[];if(o.isSingleLine)g.push(o.range);else if(!o.isPureRemove){const k=o.range.endLineNumber-o.range.startLineNumber;for(let H=0;H<k;H++){const ee=o.range.startLineNumber+H,ie=o.targetTextModel.getLineFirstNonWhitespaceColumn(ee),fe=o.targetTextModel.getLineLastNonWhitespaceColumn(ee),Me=new wt.Q(ee,ie,ee,fe);g.push(Me)}}for(const k of g)l.push({range:k,options:Zt.Zb})}if(o.range&&!o.isSingleLine&&o.isPureRemove){const g=new wt.Q(o.range.startLineNumber,1,o.range.endLineNumber-1,1);l.push({range:g,options:Zt.Ob})}for(const g of o.inlineTexts)l.push({range:wt.Q.fromPositions(new ui.y(o.lineNumber,g.column)),options:{description:c_,after:{content:g.text,inlineClassName:g.preview?"inline-edit-decoration-preview":"inline-edit-decoration",cursorStops:In.VW.Left},showIfCollapsed:!0}});return l}),this._register((0,vt.s)(()=>{this.isDisposed.set(!0,void 0)})),this._register(iC(this.editor,this.decorations))}};d_=tE([iE(2,nr.L)],d_);var h_=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ga=function(h,e){return function(t,i){e(t,i,h)}},ff;let u_=class extends vt.jG{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=(0,si.y0)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).showToolbar==="always"),this.sessionPosition=void 0,this.position=(0,si.un)(this,s=>{const o=this.model.read(s)?.model.ghostText.read(s);if(!this.alwaysShowToolbar.read(s)||!o||o.parts.length===0)return this.sessionPosition=void 0,null;const l=o.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==o.lineNumber&&(this.sessionPosition=void 0);const g=new ui.y(o.lineNumber,Math.min(l,this.sessionPosition?.column??Number.MAX_SAFE_INTEGER));return this.sessionPosition=g,g}),this._register((0,si.yC)((s,o)=>{if(!this.model.read(s)||!this.alwaysShowToolbar.read(s))return;const g=o.add(this.instantiationService.createInstance(g_,this.editor,!0,this.position));e.addContentWidget(g),o.add((0,vt.s)(()=>e.removeContentWidget(g)))}))}};u_=h_([ga(2,Ri._Y)],u_);let g_=class extends vt.jG{static{ff=this}static{this._dropDownVisible=!1}static{this.id=0}constructor(e,t,i,s,o,l){super(),this.editor=e,this.withBorder=t,this._position=i,this._contextKeyService=o,this._menuService=l,this.id=`InlineEditHintsContentWidget${ff.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=(0,Se.h)("div.inlineEditHints",{className:this.withBorder?".withBorder":""},[(0,Se.h)("div@toolBar")]),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(Fe.D8.InlineEditActions,this._contextKeyService)),this.toolBar=this._register(s.createInstance(f_,this.nodes.toolBar,this.editor,Fe.D8.InlineEditToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:g=>g.startsWith("primary")},actionViewItemProvider:(g,k)=>{if(g instanceof Fe.Xe)return s.createInstance(nE,g,void 0)},telemetrySource:"InlineEditToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility(g=>{ff._dropDownVisible=g})),this._register((0,si.fm)(g=>{this._position.read(g),this.editor.layoutContentWidget(this)})),this._register((0,si.fm)(g=>{const k=[];for(const[H,ee]of this.inlineCompletionsActionsMenus.getActions())for(const ie of ee)ie instanceof Fe.Xe&&k.push(ie);k.length>0&&k.unshift(new Js.wv),this.toolBar.setAdditionalSecondaryActions(k)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};g_=ff=h_([ga(3,Ri._Y),ga(4,et.fN),ga(5,Fe.ez)],g_);class nE extends Ta.oq{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=(0,Se.h)("div.keybinding").root;this._register(new Nr.x(t,Mn.OS,{disableTitle:!0,...Nr.l})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineEditStatusBarItemLabel")}}updateTooltip(){}}let f_=class extends tc.p{constructor(e,t,i,s,o,l,g,k,H,ee){super(e,{resetMenu:i,...s},o,l,g,k,H,ee),this.editor=t,this.menuId=i,this.options2=s,this.menuService=o,this.contextKeyService=l,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this._store.add(this.editor.onDidChangeCursorPosition(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){const e=[],t=[];(0,Ta.Ot)(this.menu,this.options2?.menuOptions,{primary:e,secondary:t},this.options2?.toolbarOptions?.primaryGroup,this.options2?.toolbarOptions?.shouldInlineSubmenu,this.options2?.toolbarOptions?.useSeparatorsInPrimaryActions),t.push(...this.additionalActions),e.unshift(...this.prependedPrimaryActions),this.setActions(e,t)}setAdditionalSecondaryActions(e){(0,Xi.aI)(this.additionalActions,e,(t,i)=>t===i)||(this.additionalActions=e,this.updateToolbar())}};f_=h_([ga(4,Fe.ez),ga(5,et.fN),ga(6,vn.Z),ga(7,ms.b),ga(8,Di.d),ga(9,is.k)],f_);var m_=c(86527),ib=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},mf=function(h,e){return function(t,i){e(t,i,h)}},su,p_;function*sE(h,e,t=1){e===void 0&&([e,h]=[h,0]);for(let i=h;i<e;i+=t)yield i}function __(h){const e=h[0].match(/^\s*/)?.[0]??"",t=e.length;return{text:h.map(i=>i.replace(new RegExp("^"+e),"")),shift:t}}let v_=class extends vt.jG{static{su=this}static{this._modelId=0}static _createUniqueUri(){return Ot.r.from({scheme:"inline-edit-widget",path:new Date().toString()+String(su._modelId++)})}constructor(e,t,i,s,o){super(),this._editor=e,this._model=t,this._instantiationService=i,this._diffProviderFactoryService=s,this._modelService=o,this._position=(0,si.un)(this,l=>{const g=this._model.read(l);if(!g||g.text.length===0||g.range.startLineNumber===g.range.endLineNumber&&!(g.range.startColumn===g.range.endColumn&&g.range.startColumn===1))return null;const k=this._editor.getModel();if(!k)return null;const H=Array.from(sE(g.range.startLineNumber,g.range.endLineNumber+1)),ee=H.map(Qe=>k.getLineLastNonWhitespaceColumn(Qe)),ie=Math.max(...ee),fe=H[ee.indexOf(ie)],Me=new ui.y(fe,ie);return{top:g.range.startLineNumber,left:Me}}),this._text=(0,si.un)(this,l=>{const g=this._model.read(l);if(!g)return{text:"",shift:0};const k=__(g.text.split(`
`));return{text:k.text.join(`
`),shift:k.shift}}),this._originalModel=(0,No.a0)(()=>this._modelService.createModel("",null,su._createUniqueUri())).keepObserved(this._store),this._modifiedModel=(0,No.a0)(()=>this._modelService.createModel("",null,su._createUniqueUri())).keepObserved(this._store),this._diff=(0,si.un)(this,l=>this._diffPromise.read(l)?.promiseResult.read(l)?.data),this._diffPromise=(0,si.un)(this,l=>{const g=this._model.read(l);if(!g)return;const k=this._editor.getModel();if(!k)return;const H=__(k.getValueInRange(g.range).split(`
`)).text.join(`
`),ee=__(g.text.split(`
`)).text.join(`
`);this._originalModel.get().setValue(H),this._modifiedModel.get().setValue(ee);const ie=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"});return si.BK.fromFn(async()=>{const fe=await ie.computeDiff(this._originalModel.get(),this._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},Fi.XO.None);if(!fe.identical)return fe.changes})}),this._register((0,si.yC)((l,g)=>{if(!this._model.read(l)||this._position.get()===null)return;const H=g.add(this._instantiationService.createInstance(C_,this._editor,this._position,this._text.map(ee=>ee.text),this._text.map(ee=>ee.shift),this._diff));e.addOverlayWidget(H),g.add((0,vt.s)(()=>e.removeOverlayWidget(H)))}))}};v_=su=ib([mf(2,Ri._Y),mf(3,m_.Hg),mf(4,Zs.IModelService)],v_);let C_=class extends vt.jG{static{p_=this}static{this.id=0}constructor(e,t,i,s,o,l){super(),this._editor=e,this._position=t,this._text=i,this._shift=s,this._diff=o,this._instantiationService=l,this.id=`InlineEditSideBySideContentWidget${p_.id++}`,this.allowEditorOverflow=!1,this._nodes=(0,Se.$)("div.inlineEditSideBySide",void 0),this._scrollChanged=(0,si.yQ)("editor.onDidScrollChange",this._editor.onDidScrollChange),this._previewEditor=this._register(this._instantiationService.createInstance(jo,this._nodes,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,scrollbar:{vertical:"hidden",horizontal:"hidden",alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},readOnly:!0,wordWrap:"off",wordWrapOverride1:"off",wordWrapOverride2:"off",wrappingIndent:"none",wrappingStrategy:void 0},{contributions:[],isSimpleWidget:!0},this._editor)),this._previewEditorObs=(0,rr.Ud)(this._previewEditor),this._editorObs=(0,rr.Ud)(this._editor),this._previewTextModel=this._register(this._instantiationService.createInstance(Ki.Bz,"",this._editor.getModel()?.getLanguageId()??ld.vH,Ki.Bz.DEFAULT_CREATION_OPTIONS,null)),this._setText=(0,si.un)(g=>{const k=this._text.read(g);k&&this._previewTextModel.setValue(k)}).recomputeInitiallyAndOnChange(this._store),this._decorations=(0,si.un)(this,g=>{this._setText.read(g);const k=this._position.read(g);if(!k)return{org:[],mod:[]};const H=this._diff.read(g);if(!H)return{org:[],mod:[]};const ee=[],ie=[];if(H.length===1&&H[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange()))return{org:[],mod:[]};const fe=this._shift.get(),Me=xe=>new wt.Q(xe.startLineNumber+k.top-1,xe.startColumn+fe,xe.endLineNumber+k.top-1,xe.endColumn+fe);for(const xe of H)if(xe.original.isEmpty||ee.push({range:Me(xe.original.toInclusiveRange()),options:Zt.Ob}),xe.modified.isEmpty||ie.push({range:xe.modified.toInclusiveRange(),options:Zt.Kl}),xe.modified.isEmpty||xe.original.isEmpty)xe.original.isEmpty||ee.push({range:Me(xe.original.toInclusiveRange()),options:Zt.KL}),xe.modified.isEmpty||ie.push({range:xe.modified.toInclusiveRange(),options:Zt.Ou});else for(const Qe of xe.innerChanges||[])xe.original.contains(Qe.originalRange.startLineNumber)&&ee.push({range:Me(Qe.originalRange),options:Qe.originalRange.isEmpty()?Zt.wp:Zt.Zb}),xe.modified.contains(Qe.modifiedRange.startLineNumber)&&ie.push({range:Qe.modifiedRange,options:Qe.modifiedRange.isEmpty()?Zt.GM:Zt.bk});return{org:ee,mod:ie}}),this._originalDecorations=(0,si.un)(this,g=>this._decorations.read(g).org),this._modifiedDecorations=(0,si.un)(this,g=>this._decorations.read(g).mod),this._previewEditor.setModel(this._previewTextModel),this._register(this._editorObs.setDecorations(this._originalDecorations)),this._register(this._previewEditorObs.setDecorations(this._modifiedDecorations)),this._register((0,si.fm)(g=>{const k=this._previewEditorObs.contentWidth.read(g),H=this._text.read(g).split(`
`).length-1,ee=this._editor.getOption(67)*H;k<=0||this._previewEditor.layout({height:ee,width:k})})),this._register((0,si.fm)(g=>{this._position.read(g),this._editor.layoutOverlayWidget(this)})),this._register((0,si.fm)(g=>{this._scrollChanged.read(g),this._position.read(g)&&this._editor.layoutOverlayWidget(this)}))}getId(){return this.id}getDomNode(){return this._nodes}getPosition(){const e=this._position.get();if(!e)return null;const t=this._editor.getLayoutInfo(),i=this._editor.getScrolledVisiblePosition(new ui.y(e.top,1));if(!i)return null;const s=i.top-1,o=this._editor.getOffsetForColumn(e.left.lineNumber,e.left.column);return{preference:{left:t.contentLeft+o+10,top:s}}}};C_=p_=ib([mf(5,Ri._Y)],C_);var oE=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},bc=function(h,e){return function(t,i){e(t,i,h)}},ou;let Lo=class extends vt.jG{static{ou=this}static{this.ID="editor.contrib.inlineEditController"}static{this.inlineEditVisibleKey="inlineEditVisible"}static{this.inlineEditVisibleContext=new et.N1(this.inlineEditVisibleKey,!1)}static{this.cursorAtInlineEditKey="cursorAtInlineEdit"}static{this.cursorAtInlineEditContext=new et.N1(this.cursorAtInlineEditKey,!1)}static get(e){return e.getContribution(ou.ID)}constructor(e,t,i,s,o,l,g,k){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.languageFeaturesService=s,this._commandService=o,this._configurationService=l,this._diffProviderFactoryService=g,this._modelService=k,this._isVisibleContext=ou.inlineEditVisibleContext.bindTo(this.contextKeyService),this._isCursorAtInlineEditContext=ou.cursorAtInlineEditContext.bindTo(this.contextKeyService),this._currentEdit=(0,si.FY)(this,void 0),this._currentWidget=(0,No.a0)(this._currentEdit,xe=>{const Qe=this._currentEdit.read(xe);if(!Qe)return;const ut=Qe.range.endLineNumber,Lt=Qe.range.endColumn,kt=Qe.text.endsWith(`
`)&&!(Qe.range.startLineNumber===Qe.range.endLineNumber&&Qe.range.startColumn===Qe.range.endColumn)?Qe.text.slice(0,-1):Qe.text,ni=new zh(ut,[new Rg(Lt,kt,!1)]),gi=Qe.range.startLineNumber===Qe.range.endLineNumber&&ni.parts.length===1&&ni.parts[0].lines.length===1,pi=Qe.text==="";return!gi&&!pi?void 0:this.instantiationService.createInstance(d_,this.editor,{ghostText:(0,si.lk)(ni),minReservedLineCount:(0,si.lk)(0),targetTextModel:(0,si.lk)(this.editor.getModel()??void 0),range:(0,si.lk)(Qe.range)})}),this._isAccepting=(0,si.FY)(this,!1),this._enabled=(0,si.y0)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).enabled),this._fontFamily=(0,si.y0)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).fontFamily);const H=(0,si.yQ)("InlineEditController.modelContentChangedSignal",e.onDidChangeModelContent);this._register((0,si.fm)(xe=>{this._enabled.read(xe)&&(H.read(xe),!this._isAccepting.read(xe)&&this.getInlineEdit(e,!0))}));const ee=(0,si.y0)(this,e.onDidChangeCursorPosition,()=>e.getPosition());this._register((0,si.fm)(xe=>{if(!this._enabled.read(xe))return;const Qe=ee.read(xe);Qe&&this.checkCursorPosition(Qe)})),this._register((0,si.fm)(xe=>{const Qe=this._currentEdit.read(xe);if(this._isCursorAtInlineEditContext.set(!1),!Qe){this._isVisibleContext.set(!1);return}this._isVisibleContext.set(!0);const ut=e.getPosition();ut&&this.checkCursorPosition(ut)}));const ie=(0,si.yQ)("InlineEditController.editorBlurSignal",e.onDidBlurEditorWidget);this._register((0,si.fm)(async xe=>{this._enabled.read(xe)&&(ie.read(xe),!(this._configurationService.getValue("editor.experimentalInlineEdit.keepOnBlur")||e.getOption(63).keepOnBlur)&&(this._currentRequestCts?.dispose(!0),this._currentRequestCts=void 0,await this.clear(!1)))}));const fe=(0,si.yQ)("InlineEditController.editorFocusSignal",e.onDidFocusEditorText);this._register((0,si.fm)(xe=>{this._enabled.read(xe)&&(fe.read(xe),this.getInlineEdit(e,!0))}));const Me=this._register((0,Se.jh)());this._register((0,si.fm)(xe=>{const Qe=this._fontFamily.read(xe);Me.setStyle(Qe===""||Qe==="default"?"":`
.monaco-editor .inline-edit-decoration,
.monaco-editor .inline-edit-decoration-preview,
.monaco-editor .inline-edit {
	font-family: ${Qe};
}`)})),this._register(new u_(this.editor,this._currentWidget,this.instantiationService)),this._register(new v_(this.editor,this._currentEdit,this.instantiationService,this._diffProviderFactoryService,this._modelService))}checkCursorPosition(e){if(!this._currentEdit){this._isCursorAtInlineEditContext.set(!1);return}const t=this._currentEdit.get();if(!t){this._isCursorAtInlineEditContext.set(!1);return}this._isCursorAtInlineEditContext.set(wt.Q.containsPosition(t.range,e))}validateInlineEdit(e,t){if(t.text.includes(`
`)&&t.range.startLineNumber!==t.range.endLineNumber&&t.range.startColumn!==t.range.endColumn){if(t.range.startColumn!==1)return!1;const s=t.range.endLineNumber,o=t.range.endColumn,l=e.getModel()?.getLineLength(s)??0;if(o!==l+1)return!1}return!0}async fetchInlineEdit(e,t){this._currentRequestCts&&this._currentRequestCts.dispose(!0);const i=e.getModel();if(!i)return;const s=i.getVersionId(),o=this.languageFeaturesService.inlineEditProvider.all(i);if(o.length===0)return;const l=o[0];this._currentRequestCts=new Fi.Qi;const g=this._currentRequestCts.token,k=t?Et.sm.Automatic:Et.sm.Invoke;if(t&&await rE(50,g),g.isCancellationRequested||i.isDisposed()||i.getVersionId()!==s)return;const ee=await l.provideInlineEdit(i,{triggerKind:k},g);if(ee&&!(g.isCancellationRequested||i.isDisposed()||i.getVersionId()!==s)&&this.validateInlineEdit(e,ee))return ee}async getInlineEdit(e,t){this._isCursorAtInlineEditContext.set(!1),await this.clear();const i=await this.fetchInlineEdit(e,t);i&&this._currentEdit.set(i,void 0)}async trigger(){await this.getInlineEdit(this.editor,!1)}async jumpBack(){this._jumpBackPosition&&(this.editor.setPosition(this._jumpBackPosition),this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition))}async accept(){this._isAccepting.set(!0,void 0);const e=this._currentEdit.get();if(!e)return;let t=e.text;e.text.startsWith(`
`)&&(t=e.text.substring(1)),this.editor.pushUndoStop(),this.editor.executeEdits("acceptCurrent",[ps.k.replace(wt.Q.lift(e.range),t)]),e.accepted&&await this._commandService.executeCommand(e.accepted.id,...e.accepted.arguments||[]).then(void 0,Ni.M_),this.freeEdit(e),(0,si.Rn)(i=>{this._currentEdit.set(void 0,i),this._isAccepting.set(!1,i)})}jumpToCurrent(){this._jumpBackPosition=this.editor.getSelection()?.getStartPosition();const e=this._currentEdit.get();if(!e)return;const t=ui.y.lift({lineNumber:e.range.startLineNumber,column:e.range.startColumn});this.editor.setPosition(t),this.editor.revealPositionInCenterIfOutsideViewport(t)}async clear(e=!0){const t=this._currentEdit.get();t&&t?.rejected&&e&&await this._commandService.executeCommand(t.rejected.id,...t.rejected.arguments||[]).then(void 0,Ni.M_),t&&this.freeEdit(t),this._currentEdit.set(void 0,void 0)}freeEdit(e){const t=this.editor.getModel();if(!t)return;const i=this.languageFeaturesService.inlineEditProvider.all(t);i.length!==0&&i[0].freeInlineEdit(e)}};Lo=ou=oE([bc(1,Ri._Y),bc(2,et.fN),bc(3,_e.ILanguageFeaturesService),bc(4,Di.d),bc(5,pt.pG),bc(6,m_.Hg),bc(7,Zs.IModelService)],Lo);function rE(h,e){return new Promise(t=>{let i;const s=setTimeout(()=>{i&&i.dispose(),t()},h);e&&(i=e.onCancellationRequested(()=>{clearTimeout(s),i&&i.dispose(),t()}))})}class aE extends we.ks{constructor(){super({id:XD,label:"Accept Inline Edit",alias:"Accept Inline Edit",precondition:et.M$.and(ke.R.writable,Lo.inlineEditVisibleContext),kbOpts:[{weight:101,primary:2,kbExpr:et.M$.and(ke.R.writable,Lo.inlineEditVisibleContext,Lo.cursorAtInlineEditContext)}],menuOpts:[{menuId:Fe.D8.InlineEditToolbar,title:"Accept",group:"primary",order:1}]})}async run(e,t){await Lo.get(t)?.accept()}}class lE extends we.ks{constructor(){const e=et.M$.and(ke.R.writable,et.M$.not(Lo.inlineEditVisibleKey));super({id:"editor.action.inlineEdit.trigger",label:"Trigger Inline Edit",alias:"Trigger Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e}})}async run(e,t){Lo.get(t)?.trigger()}}class cE extends we.ks{constructor(){const e=et.M$.and(ke.R.writable,Lo.inlineEditVisibleContext,et.M$.not(Lo.cursorAtInlineEditKey));super({id:qD,label:"Jump to Inline Edit",alias:"Jump to Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e},menuOpts:[{menuId:Fe.D8.InlineEditToolbar,title:"Jump To Edit",group:"primary",order:3,when:e}]})}async run(e,t){Lo.get(t)?.jumpToCurrent()}}class dE extends we.ks{constructor(){const e=et.M$.and(ke.R.writable,Lo.cursorAtInlineEditContext);super({id:eE,label:"Jump Back from Inline Edit",alias:"Jump Back from Inline Edit",precondition:e,kbOpts:{weight:110,primary:2646,kbExpr:e},menuOpts:[{menuId:Fe.D8.InlineEditToolbar,title:"Jump Back",group:"primary",order:3,when:e}]})}async run(e,t){Lo.get(t)?.jumpBack()}}class hE extends we.ks{constructor(){const e=et.M$.and(ke.R.writable,Lo.inlineEditVisibleContext);super({id:JD,label:"Reject Inline Edit",alias:"Reject Inline Edit",precondition:e,kbOpts:{weight:100,primary:9,kbExpr:e},menuOpts:[{menuId:Fe.D8.InlineEditToolbar,title:"Reject",group:"secondary",order:2}]})}async run(e,t){await Lo.get(t)?.clear()}}(0,we.Fl)(aE),(0,we.Fl)(hE),(0,we.Fl)(cE),(0,we.Fl)(dE),(0,we.Fl)(lE),(0,we.HW)(Lo.ID,Lo,3);const uE="editor.action.inlineEdits.accept",gE="editor.action.inlineEdits.showPrevious",fE="editor.action.inlineEdits.showNext",Ud=new et.N1("inlineEditsVisible",!1,(0,Z.kg)("inlineEditsVisible","Whether an inline edit is visible")),mE=new et.N1("inlineEditsIsPinned",!1,(0,Z.kg)("isPinned","Whether an inline edit is visible"));var b_=c(74040),pE=c(33924),_E=c(81064),S_=c(47223);class w_ extends vt.jG{static{this.ID="editor.contrib.placeholderText"}constructor(e){super(),this._editor=e,this._editorObs=(0,rr.Ud)(this._editor),this._placeholderText=this._editorObs.getOption(88),this._state=(0,si.C)({owner:this,equalsFn:hc.dB},t=>{const i=this._placeholderText.read(t);if(i&&this._editorObs.valueIsEmpty.read(t))return{placeholder:i}}),this._shouldViewBeAlive=vE(this,t=>this._state.read(t)?.placeholder!==void 0),this._view=(0,No.rm)((t,i)=>{if(!this._shouldViewBeAlive.read(t))return;const s=(0,Se.h)("div.editorPlaceholder");i.add((0,si.fm)(o=>{const l=this._state.read(o),g=l?.placeholder!==void 0;s.root.style.display=g?"block":"none",s.root.innerText=l?.placeholder??""})),i.add((0,si.fm)(o=>{const l=this._editorObs.layoutInfo.read(o);s.root.style.left=`${l.contentLeft}px`,s.root.style.width=l.contentWidth-l.verticalScrollbarWidth+"px",s.root.style.top=`${this._editor.getTopForLineNumber(0)}px`})),i.add((0,si.fm)(o=>{s.root.style.fontFamily=this._editorObs.getOption(49).read(o),s.root.style.fontSize=this._editorObs.getOption(52).read(o)+"px",s.root.style.lineHeight=this._editorObs.getOption(67).read(o)+"px"})),i.add(this._editorObs.createOverlayWidget({allowEditorOverflow:!1,minContentWidthInPx:(0,si.lk)(0),position:(0,si.lk)(null),domNode:s.root}))}),this._view.recomputeInitiallyAndOnChange(this._store)}}function vE(h,e){return(0,si.ZX)(h,(t,i)=>i===!0?!0:e(t))}var CE=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},bE=function(h,e){return function(t,i){e(t,i,h)}};class SE{constructor(e,t,i){this.range=e,this.newLines=t,this.changes=i}}let y_=class extends vt.jG{constructor(e,t,i,s){super(),this._editor=e,this._edit=t,this._userPrompt=i,this._instantiationService=s,this._editorObs=(0,rr.Ud)(this._editor),this._elements=(0,Se.h)("div.inline-edits-widget",{style:{position:"absolute",overflow:"visible",top:"0px",left:"0px"}},[(0,Se.h)("div@editorContainer",{style:{position:"absolute",top:"0px",left:"0px",width:"500px",height:"500px"}},[(0,Se.h)("div.toolbar@toolbar",{style:{position:"absolute",top:"-25px",left:"0px"}}),(0,Se.h)("div.promptEditor@promptEditor",{style:{position:"absolute",top:"-25px",left:"80px",width:"300px",height:"22px"}}),(0,Se.h)("div.preview@editor",{style:{position:"absolute",top:"0px",left:"0px"}})]),(0,Se.Mc)("svg",{style:{overflow:"visible",pointerEvents:"none"}},[(0,Se.Mc)("defs",[(0,Se.Mc)("linearGradient",{id:"Gradient2",x1:"0",y1:"0",x2:"1",y2:"0"},[(0,Se.Mc)("stop",{offset:"0%",class:"gradient-stop"}),(0,Se.Mc)("stop",{offset:"100%",class:"gradient-stop"})])]),(0,Se.Mc)("path@path",{d:"",fill:"url(#Gradient2)"})])]),this._previewTextModel=this._register(this._instantiationService.createInstance(Ki.Bz,"",ld.vH,Ki.Bz.DEFAULT_CREATION_OPTIONS,null)),this._setText=(0,si.un)(l=>{const g=this._edit.read(l);g&&this._previewTextModel.setValue(g.newLines.join(`
`))}).recomputeInitiallyAndOnChange(this._store),this._promptTextModel=this._register(this._instantiationService.createInstance(Ki.Bz,"",ld.vH,Ki.Bz.DEFAULT_CREATION_OPTIONS,null)),this._promptEditor=this._register(this._instantiationService.createInstance(jo,this._elements.promptEditor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,placeholder:"Describe the change you want...",fontFamily:_E.z},{contributions:we.dS.getSomeEditorContributions([br.ID,w_.ID,pd.ID]),isSimpleWidget:!0},this._editor)),this._previewEditor=this._register(this._instantiationService.createInstance(jo,this._elements.editor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0},{contributions:[]},this._editor)),this._previewEditorObs=(0,rr.Ud)(this._previewEditor),this._decorations=(0,si.un)(this,l=>{this._setText.read(l);const g=this._edit.read(l)?.changes;if(!g)return[];const k=[],H=[];if(g.length===1&&g[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange()))return[];for(const ee of g)if(ee.original.isEmpty||k.push({range:ee.original.toInclusiveRange(),options:Zt.Ob}),ee.modified.isEmpty||H.push({range:ee.modified.toInclusiveRange(),options:Zt.Kl}),ee.modified.isEmpty||ee.original.isEmpty)ee.original.isEmpty||k.push({range:ee.original.toInclusiveRange(),options:Zt.KL}),ee.modified.isEmpty||H.push({range:ee.modified.toInclusiveRange(),options:Zt.Ou});else for(const ie of ee.innerChanges||[])ee.original.contains(ie.originalRange.startLineNumber)&&k.push({range:ie.originalRange,options:ie.originalRange.isEmpty()?Zt.wp:Zt.Zb}),ee.modified.contains(ie.modifiedRange.startLineNumber)&&H.push({range:ie.modifiedRange,options:ie.modifiedRange.isEmpty()?Zt.GM:Zt.bk});return H}),this._layout1=(0,si.un)(this,l=>{const g=this._editor.getModel(),k=this._edit.read(l);if(!k)return null;const H=k.range;let ee=0;for(let Me=H.startLineNumber;Me<H.endLineNumberExclusive;Me++){const xe=g.getLineMaxColumn(Me),Qe=this._editor.getOffsetForColumn(Me,xe);ee=Math.max(ee,Qe)}return{left:this._editor.getLayoutInfo().contentLeft+ee}}),this._layout=(0,si.un)(this,l=>{const g=this._edit.read(l);if(!g)return null;const k=g.range,H=this._editorObs.scrollLeft.read(l),ee=this._layout1.read(l).left+20-H,ie=this._editor.getTopForLineNumber(k.startLineNumber)-this._editorObs.scrollTop.read(l),fe=this._editor.getTopForLineNumber(k.endLineNumberExclusive)-this._editorObs.scrollTop.read(l),Me=new zd(ee,ie),xe=new zd(ee,fe),Qe=fe-ie,ut=50,Lt=this._editor.getOption(67)*g.newLines.length,kt=Qe-Lt,ni=new zd(ee+ut,ie+kt/2),gi=new zd(ee+ut,fe-kt/2);return{topCode:Me,bottomCode:xe,codeHeight:Qe,topEdit:ni,bottomEdit:gi,editHeight:Lt}});const o=(0,si.un)(this,l=>this._edit.read(l)!==void 0||this._userPrompt.read(l)!==void 0);this._register((0,S_.AV)(this._elements.root,{display:(0,si.un)(this,l=>o.read(l)?"block":"none")})),this._register((0,S_.rX)(this._editor.getDomNode(),this._elements.root)),this._register((0,rr.Ud)(e).createOverlayWidget({domNode:this._elements.root,position:(0,si.lk)(null),allowEditorOverflow:!1,minContentWidthInPx:(0,si.un)(l=>{const g=this._layout1.read(l)?.left;if(g===void 0)return 0;const k=this._previewEditorObs.contentWidth.read(l);return g+k})})),this._previewEditor.setModel(this._previewTextModel),this._register(this._previewEditorObs.setDecorations(this._decorations)),this._register((0,si.fm)(l=>{const g=this._layout.read(l);if(!g)return;const{topCode:k,bottomCode:H,topEdit:ee,bottomEdit:ie,editHeight:fe}=g,Me=10,xe=0,Qe=40,ut=new yE().moveTo(k).lineTo(k.deltaX(Me)).curveTo(k.deltaX(Me+Qe),ee.deltaX(-Qe-xe),ee.deltaX(-xe)).lineTo(ee).lineTo(ie).lineTo(ie.deltaX(-xe)).curveTo(ie.deltaX(-Qe-xe),H.deltaX(Me+Qe),H.deltaX(Me)).lineTo(H).build();this._elements.path.setAttribute("d",ut),this._elements.editorContainer.style.top=`${ee.y}px`,this._elements.editorContainer.style.left=`${ee.x}px`,this._elements.editorContainer.style.height=`${fe}px`;const Lt=this._previewEditorObs.contentWidth.read(l);this._previewEditor.layout({height:fe,width:Lt})})),this._promptEditor.setModel(this._promptTextModel),this._promptEditor.layout(),this._register(LE(wE(this._userPrompt,l=>l??"",l=>l),(0,rr.Ud)(this._promptEditor).value)),this._register((0,si.fm)(l=>{const g=(0,rr.Ud)(this._promptEditor).isFocused.read(l);this._elements.root.classList.toggle("focused",g)}))}};y_=CE([bE(3,Ri._Y)],y_);function wE(h,e,t){return(0,No.dQ)(void 0,i=>e(h.read(i)),(i,s)=>h.set(t(i),s))}class zd{constructor(e,t){this.x=e,this.y=t}deltaX(e){return new zd(this.x+e,this.y)}}class yE{constructor(){this._data=""}moveTo(e){return this._data+=`M ${e.x} ${e.y} `,this}lineTo(e){return this._data+=`L ${e.x} ${e.y} `,this}curveTo(e,t,i){return this._data+=`C ${e.x} ${e.y} ${t.x} ${t.y} ${i.x} ${i.y} `,this}build(){return this._data}}function LE(h,e){const t=new vt.Cm;return t.add((0,si.fm)(i=>{const s=h.read(i);e.set(s,void 0)})),t.add((0,si.fm)(i=>{const s=e.read(i);h.set(s,void 0)})),t}var DE=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},L_=function(h,e){return function(t,i){e(t,i,h)}},ru;let D_=class extends vt.jG{static{ru=this}static{this._modelId=0}static _createUniqueUri(){return Ot.r.from({scheme:"inline-edits",path:new Date().toString()+String(ru._modelId++)})}constructor(e,t,i,s,o,l,g){super(),this.textModel=e,this._textModelVersionId=t,this._selection=i,this._debounceValue=s,this.languageFeaturesService=o,this._diffProviderFactoryService=l,this._modelService=g,this._forceUpdateExplicitlySignal=(0,si.Yd)(this),this._selectedInlineCompletionId=(0,si.FY)(this,void 0),this._isActive=(0,si.FY)(this,!1),this._originalModel=(0,No.a0)(()=>this._modelService.createModel("",null,ru._createUniqueUri())).keepObserved(this._store),this._modifiedModel=(0,No.a0)(()=>this._modelService.createModel("",null,ru._createUniqueUri())).keepObserved(this._store),this._pinnedRange=new xE(this.textModel,this._textModelVersionId),this.isPinned=this._pinnedRange.range.map(k=>!!k),this.userPrompt=(0,si.FY)(this,void 0),this.inlineEdit=(0,si.un)(this,k=>this._inlineEdit.read(k)?.promiseResult.read(k)?.data),this._inlineEdit=(0,si.un)(this,k=>{const H=this.selectedInlineEdit.read(k);if(!H)return;const ee=H.inlineCompletion.range;if(H.inlineCompletion.insertText.trim()==="")return;let ie=H.inlineCompletion.insertText.split(/\r\n|\r|\n/);function fe(ut){const Lt=ut[0].match(/^\s*/)?.[0]??"";return ut.map(kt=>kt.replace(new RegExp("^"+Lt),""))}ie=fe(ie);let xe=this.textModel.getValueInRange(ee).split(/\r\n|\r|\n/);xe=fe(xe),this._originalModel.get().setValue(xe.join(`
`)),this._modifiedModel.get().setValue(ie.join(`
`));const Qe=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"});return si.BK.fromFn(async()=>{const ut=await Qe.computeDiff(this._originalModel.get(),this._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},Fi.XO.None);if(!ut.identical)return new SE(pE.M.fromRangeInclusive(ee),fe(ie),ut.changes)})}),this._fetchStore=this._register(new vt.Cm),this._inlineEditsFetchResult=(0,si.X2)(this,void 0),this._inlineEdits=(0,si.C)({owner:this,equalsFn:hc.dB},k=>this._inlineEditsFetchResult.read(k)?.completions.map(H=>new EE(H))??[]),this._fetchInlineEditsPromise=(0,si.nb)({owner:this,createEmptyChangeSummary:()=>({inlineCompletionTriggerKind:Et.qw.Automatic}),handleChange:(k,H)=>(k.didChange(this._forceUpdateExplicitlySignal)&&(H.inlineCompletionTriggerKind=Et.qw.Explicit),!0)},async(k,H)=>{this._fetchStore.clear(),this._forceUpdateExplicitlySignal.read(k),this._textModelVersionId.read(k);function ee(Qe,ut){return ut(Qe)}const ie=this._pinnedRange.range.read(k)??ee(this._selection.read(k),Qe=>Qe.isEmpty()?void 0:Qe);if(!ie){this._inlineEditsFetchResult.set(void 0,void 0),this.userPrompt.set(void 0,void 0);return}const fe={triggerKind:H.inlineCompletionTriggerKind,selectedSuggestionInfo:void 0,userPrompt:this.userPrompt.read(k)},Me=(0,Fi.bs)(this._fetchStore);await(0,hi.wR)(200,Me);const xe=await rC(this.languageFeaturesService.inlineCompletionsProvider,ie,this.textModel,fe,Me);Me.isCancellationRequested||this._inlineEditsFetchResult.set(xe,void 0)}),this._filteredInlineEditItems=(0,si.C)({owner:this,equalsFn:(0,hc.S3)()},k=>this._inlineEdits.read(k)),this.selectedInlineCompletionIndex=(0,si.un)(this,k=>{const H=this._selectedInlineCompletionId.read(k),ee=this._filteredInlineEditItems.read(k),ie=this._selectedInlineCompletionId===void 0?-1:ee.findIndex(fe=>fe.semanticId===H);return ie===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):ie}),this.selectedInlineEdit=(0,si.un)(this,k=>{const H=this._filteredInlineEditItems.read(k),ee=this.selectedInlineCompletionIndex.read(k);return H[ee]}),this._register((0,si.OI)(this._fetchInlineEditsPromise))}async triggerExplicitly(e){(0,si.PO)(e,t=>{this._isActive.set(!0,t),this._forceUpdateExplicitlySignal.trigger(t)}),await this._fetchInlineEditsPromise.get()}stop(e){(0,si.PO)(e,t=>{this.userPrompt.set(void 0,t),this._isActive.set(!1,t),this._inlineEditsFetchResult.set(void 0,t),this._pinnedRange.setRange(void 0,t)})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();const t=this._filteredInlineEditItems.get()||[];if(t.length>0){const i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){if(e.getModel()!==this.textModel)throw new Ni.D7;const t=this.selectedInlineEdit.get();t&&(e.pushUndoStop(),e.executeEdits("inlineSuggestion.accept",[t.inlineCompletion.toSingleTextEdit().toSingleEditOperation()]),this.stop())}};D_=ru=DE([L_(4,_e.ILanguageFeaturesService),L_(5,m_.Hg),L_(6,Zs.IModelService)],D_);class EE{constructor(e){this.inlineCompletion=e,this.semanticId=this.inlineCompletion.hash()}}class xE extends vt.jG{constructor(e,t){super(),this._textModel=e,this._versionId=t,this._decorations=(0,si.FY)(this,[]),this.range=(0,si.un)(this,i=>{this._versionId.read(i);const s=this._decorations.read(i)[0];return s?this._textModel.getDecorationRange(s)??null:null}),this._register((0,vt.s)(()=>{this._textModel.deltaDecorations(this._decorations.get(),[])}))}setRange(e,t){this._decorations.set(this._textModel.deltaDecorations(this._decorations.get(),e?[{range:e,options:{description:"trackedRange"}}]:[]),t)}}var E_=c(16612),kE=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},au=function(h,e){return function(t,i){e(t,i,h)}},x_;let ja=class extends vt.jG{static{x_=this}static{this.ID="editor.contrib.inlineEditsController"}static get(e){return e.getContribution(x_.ID)}constructor(e,t,i,s,o,l){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=i,this._debounceService=s,this._languageFeaturesService=o,this._configurationService=l,this._enabled=(0,E_.V)("editor.inlineEdits.enabled",!1,this._configurationService),this._editorObs=(0,rr.Ud)(this.editor),this._selection=(0,si.un)(this,g=>this._editorObs.cursorSelection.read(g)??new Mi.L(1,1,1,1)),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineEditsDebounce",{min:50,max:50}),this.model=(0,No.a0)(this,g=>{if(!this._enabled.read(g)||this._editorObs.isReadonly.read(g))return;const k=this._editorObs.model.read(g);return k?this._instantiationService.createInstance((0,b_.b)(D_,g),k,this._editorObs.versionId,this._selection,this._debounceValue):void 0}),this._hadInlineEdit=(0,si.ZX)(this,(g,k)=>k||this.model.read(g)?.inlineEdit.read(g)!==void 0),this._widget=(0,No.a0)(this,g=>{if(this._hadInlineEdit.read(g))return this._instantiationService.createInstance((0,b_.b)(y_,g),this.editor,this.model.map((k,H)=>k?.inlineEdit.read(H)),IE(k=>this.model.read(k)?.userPrompt??(0,si.FY)("empty","")))}),this._register((0,E_.w)(Ud,this._contextKeyService,g=>!!this.model.read(g)?.inlineEdit.read(g))),this._register((0,E_.w)(mE,this._contextKeyService,g=>!!this.model.read(g)?.isPinned.read(g))),this.model.recomputeInitiallyAndOnChange(this._store),this._widget.recomputeInitiallyAndOnChange(this._store)}};ja=x_=kE([au(1,Ri._Y),au(2,et.fN),au(3,Vs.ILanguageFeatureDebounceService),au(4,_e.ILanguageFeaturesService),au(5,pt.pG)],ja);function IE(h){return(0,No.dQ)(void 0,e=>h(e).read(e),(e,t)=>{h(void 0).set(e,t)})}function lu(h){return{label:h.value,alias:h.original}}class k_ extends we.ks{static{this.ID=fE}constructor(){super({id:k_.ID,...lu(Z.aS("action.inlineEdits.showNext","Show Next Inline Edit")),precondition:et.M$.and(ke.R.writable,Ud),kbOpts:{weight:100,primary:606}})}async run(e,t){ja.get(t)?.model.get()?.next()}}class I_ extends we.ks{static{this.ID=gE}constructor(){super({id:I_.ID,...lu(Z.aS("action.inlineEdits.showPrevious","Show Previous Inline Edit")),precondition:et.M$.and(ke.R.writable,Ud),kbOpts:{weight:100,primary:604}})}async run(e,t){ja.get(t)?.model.get()?.previous()}}class ME extends we.ks{constructor(){super({id:"editor.action.inlineEdits.trigger",...lu(Z.aS("action.inlineEdits.trigger","Trigger Inline Edit")),precondition:ke.R.writable})}async run(e,t){const i=ja.get(t);await(0,G0.fL)(async s=>{await i?.model.get()?.triggerExplicitly(s)})}}class NE extends we.ks{constructor(){super({id:uE,...lu(Z.aS("action.inlineEdits.accept","Accept Inline Edit")),precondition:Ud,menuOpts:{menuId:Fe.D8.InlineEditsActions,title:Z.kg("inlineEditsActions","Accept Inline Edit"),group:"primary",order:1,icon:Dt.W.check},kbOpts:{primary:2058,weight:2e4,kbExpr:Ud}})}async run(e,t){t instanceof jo&&(t=t.getParentEditor());const i=ja.get(t);i&&(i.model.get()?.accept(i.editor),i.editor.focus())}}class M_ extends we.ks{static{this.ID="editor.action.inlineEdits.hide"}constructor(){super({id:M_.ID,...lu(Z.aS("action.inlineEdits.hide","Hide Inline Edit")),precondition:Ud,kbOpts:{weight:100,primary:9}})}async run(e,t){const i=ja.get(t);(0,si.Rn)(s=>{i?.model.get()?.stop(s)})}}(0,we.HW)(ja.ID,ja,3),(0,we.Fl)(ME),(0,we.Fl)(k_),(0,we.Fl)(I_),(0,we.Fl)(NE),(0,we.Fl)(M_);const Sc={Visible:new et.N1("parameterHintsVisible",!1),MultipleSignatures:new et.N1("parameterHintsMultipleSignatures",!1)};async function nb(h,e,t,i,s){const o=h.ordered(e);for(const l of o)try{const g=await l.provideSignatureHelp(e,t,s,i);if(g)return g}catch(g){(0,Ni.M_)(g)}}Di.w.registerCommand("_executeSignatureHelpProvider",async(h,...e)=>{const[t,i,s]=e;(0,hn.j)(Ot.r.isUri(t)),(0,hn.j)(ui.y.isIPosition(i)),(0,hn.j)(typeof s=="string"||!s);const o=h.get(_e.ILanguageFeaturesService),l=await h.get(sr.ITextModelService).createModelReference(t);try{const g=await nb(o.signatureHelpProvider,l.object.textEditorModel,ui.y.lift(i),{triggerKind:Et.WA.Invoke,isRetrigger:!1,triggerCharacter:s},Fi.XO.None);return g?(setTimeout(()=>g.dispose(),0),g.value):void 0}finally{l.dispose()}});var wl;(function(h){h.Default={type:0};class e{constructor(s,o){this.request=s,this.previouslyActiveHints=o,this.type=2}}h.Pending=e;class t{constructor(s){this.hints=s,this.type=1}}h.Active=t})(wl||(wl={}));class N_ extends vt.jG{static{this.DEFAULT_DELAY=120}constructor(e,t,i=N_.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new zi.vl),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=wl.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new vt.HE),this.triggerChars=new xg.y,this.retriggerChars=new xg.y,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new hi.ve(i),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(s=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(s=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(s=>this.onCursorChange(s))),this._register(this.editor.onDidChangeModelContent(s=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(s=>this.onDidType(s))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=wl.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const i=this.editor.getModel();if(!i||!this.providers.has(i))return;const s=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(s),t).catch(Ni.dz)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t%e===e-1,s=this.editor.getOption(86).cycle;if((e<2||i)&&!s){this.cancel();return}this.updateActiveSignature(i&&s?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t===0,s=this.editor.getOption(86).cycle;if((e<2||i)&&!s){this.cancel();return}this.updateActiveSignature(i&&s?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new wl.Active({...this.state.hints,activeSignature:e}),this._onChangedHints.fire(this.state.hints))}async doTrigger(e){const t=this.state.type===1||this.state.type===2,i=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const s=this._pendingTriggers.reduce(TE);this._pendingTriggers=[];const o={triggerKind:s.triggerKind,triggerCharacter:s.triggerCharacter,isRetrigger:t,activeSignatureHelp:i};if(!this.editor.hasModel())return!1;const l=this.editor.getModel(),g=this.editor.getPosition();this.state=new wl.Pending((0,hi.SS)(k=>nb(this.providers,l,g,o,k)),i);try{const k=await this.state.request;return e!==this.triggerId?(k?.dispose(),!1):!k||!k.value.signatures||k.value.signatures.length===0?(k?.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new wl.Active(k.value),this._lastSignatureHelpResult.value=k,this._onChangedHints.fire(this.state.hints),!0)}catch(k){return e===this.triggerId&&(this.state=wl.Default),(0,Ni.dz)(k),!1}}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();const e=this.editor.getModel();if(e)for(const t of this.providers.ordered(e)){for(const i of t.signatureHelpTriggerCharacters||[])if(i.length){const s=i.charCodeAt(0);this.triggerChars.add(s),this.retriggerChars.add(s)}for(const i of t.signatureHelpRetriggerCharacters||[])i.length&&this.retriggerChars.add(i.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,i=e.charCodeAt(t);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:Et.WA.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:Et.WA.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:Et.WA.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}function TE(h,e){switch(e.triggerKind){case Et.WA.Invoke:return e;case Et.WA.ContentChange:return h;case Et.WA.TriggerCharacter:default:return e}}var RE=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},pf=function(h,e){return function(t,i){e(t,i,h)}},T_;const Qo=Se.$,PE=(0,rs.pU)("parameter-hints-next",Dt.W.chevronDown,Z.kg("parameterHintsNextIcon","Icon for show next parameter hint.")),AE=(0,rs.pU)("parameter-hints-previous",Dt.W.chevronUp,Z.kg("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let R_=class extends vt.jG{static{T_=this}static{this.ID="editor.widget.parameterHintsWidget"}constructor(e,t,i,s,o,l){super(),this.editor=e,this.model=t,this.telemetryService=l,this.renderDisposeables=this._register(new vt.Cm),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new Ps.T({editor:e},o,s)),this.keyVisible=Sc.Visible.bindTo(i),this.keyMultipleSignatures=Sc.MultipleSignatures.bindTo(i)}createParameterHintDOMNodes(){const e=Qo(".editor-widget.parameter-hints-widget"),t=Se.BC(e,Qo(".phwrapper"));t.tabIndex=-1;const i=Se.BC(t,Qo(".controls")),s=Se.BC(i,Qo(".button"+mn.L.asCSSSelector(AE))),o=Se.BC(i,Qo(".overloads")),l=Se.BC(i,Qo(".button"+mn.L.asCSSSelector(PE)));this._register(Se.ko(s,"click",fe=>{Se.fs.stop(fe),this.previous()})),this._register(Se.ko(l,"click",fe=>{Se.fs.stop(fe),this.next()}));const g=Qo(".body"),k=new Lp.MU(g,{alwaysConsumeMouseWheel:!0});this._register(k),t.appendChild(k.getDomNode());const H=Se.BC(g,Qo(".signature")),ee=Se.BC(g,Qo(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:H,overloads:o,docs:ee,scrollbar:k},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(fe=>{this.visible&&this.editor.layoutContentWidget(this)}));const ie=()=>{if(!this.domNodes)return;const fe=this.editor.getOption(50),Me=this.domNodes.element;Me.style.fontSize=`${fe.fontSize}px`,Me.style.lineHeight=`${fe.lineHeight/fe.fontSize}`,Me.style.setProperty("--vscode-parameterHintsWidget-editorFontFamily",fe.fontFamily),Me.style.setProperty("--vscode-parameterHintsWidget-editorFontFamilyDefault",ns.jU.fontFamily)};ie(),this._register(zi.Jh.chain(this.editor.onDidChangeConfiguration.bind(this.editor),fe=>fe.filter(Me=>Me.hasChanged(50)))(ie)),this._register(this.editor.onDidLayoutChange(fe=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{this.domNodes?.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes?.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){if(this.renderDisposeables.clear(),!this.domNodes)return;const t=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",t),this.keyMultipleSignatures.set(t),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const i=e.signatures[e.activeSignature];if(!i)return;const s=Se.BC(this.domNodes.signature,Qo(".code")),o=i.parameters.length>0,l=i.activeParameter??e.activeParameter;if(o)this.renderParameters(s,i,l);else{const H=Se.BC(s,Qo("span"));H.textContent=i.label}const g=i.parameters[l];if(g?.documentation){const H=Qo("span.documentation");if(typeof g.documentation=="string")H.textContent=g.documentation;else{const ee=this.renderMarkdownDocs(g.documentation);H.appendChild(ee.element)}Se.BC(this.domNodes.docs,Qo("p",{},H))}if(i.documentation!==void 0)if(typeof i.documentation=="string")Se.BC(this.domNodes.docs,Qo("p",{},i.documentation));else{const H=this.renderMarkdownDocs(i.documentation);Se.BC(this.domNodes.docs,H.element)}const k=this.hasDocs(i,g);if(this.domNodes.signature.classList.toggle("has-docs",k),this.domNodes.docs.classList.toggle("empty",!k),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,g){let H="";const ee=i.parameters[l];Array.isArray(ee.label)?H=i.label.substring(ee.label[0],ee.label[1]):H=ee.label,ee.documentation&&(H+=typeof ee.documentation=="string"?`, ${ee.documentation}`:`, ${ee.documentation.value}`),i.documentation&&(H+=typeof i.documentation=="string"?`, ${i.documentation}`:`, ${i.documentation.value}`),this.announcedLabel!==H&&(dn.xE(Z.kg("hint","{0}, hint",H)),this.announcedLabel=H)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=new eo.W,i=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{this.domNodes?.scrollbar.scanDomNode()}}));i.element.classList.add("markdown-docs");const s=t.elapsed();return s>300&&this.telemetryService.publicLog2("parameterHints.parseMarkdown",{renderDuration:s}),i}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&(0,hn.eU)(t.documentation).length>0||t&&typeof t.documentation=="object"&&(0,hn.eU)(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&(0,hn.eU)(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&(0,hn.eU)(e.documentation.value).length>0)}renderParameters(e,t,i){const[s,o]=this.getParameterLabelOffsets(t,i),l=document.createElement("span");l.textContent=t.label.substring(0,s);const g=document.createElement("span");g.textContent=t.label.substring(s,o),g.className="parameter active";const k=document.createElement("span");k.textContent=t.label.substring(o),Se.BC(e,l,g,k)}getParameterLabelOffsets(e,t){const i=e.parameters[t];if(i){if(Array.isArray(i.label))return i.label;if(i.label.length){const s=new RegExp(`(\\W|^)${(0,Vi.bm)(i.label)}(?=\\W|$)`,"g");s.test(e.label);const o=s.lastIndex-i.label.length;return o>=0?[o,s.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return T_.ID}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const i=this.domNodes.element.getElementsByClassName("phwrapper");i.length&&(i[0].style.maxHeight=t)}};R_=T_=RE([pf(2,et.fN),pf(3,Qs.C),pf(4,nr.L),pf(5,is.k)],R_),(0,Tt.x1A)("editorHoverWidget.highlightForeground",Tt.QI5,Z.kg("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var OE=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},sb=function(h,e){return function(t,i){e(t,i,h)}},P_;let jd=class extends vt.jG{static{P_=this}static{this.ID="editor.controller.parameterHints"}static get(e){return e.getContribution(P_.ID)}constructor(e,t,i){super(),this.editor=e,this.model=this._register(new N_(e,i.signatureHelpProvider)),this._register(this.model.onChangedHints(s=>{s?(this.widget.value.show(),this.widget.value.render(s)):this.widget.rawValue?.hide()})),this.widget=new Nc.d(()=>this._register(t.createInstance(R_,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){this.widget.rawValue?.previous()}next(){this.widget.rawValue?.next()}trigger(e){this.model.trigger(e,0)}};jd=P_=OE([sb(1,Ri._Y),sb(2,_e.ILanguageFeaturesService)],jd);class FE extends we.ks{constructor(){super({id:"editor.action.triggerParameterHints",label:Z.kg("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:ke.R.hasSignatureHelpProvider,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:3082,weight:100}})}run(e,t){jd.get(t)?.trigger({triggerKind:Et.WA.Invoke})}}(0,we.HW)(jd.ID,jd,2),(0,we.Fl)(FE);const A_=175,O_=we.DX.bindToContribution(jd.get);(0,we.E_)(new O_({id:"closeParameterHints",precondition:Sc.Visible,handler:h=>h.cancel(),kbOpts:{weight:A_,kbExpr:ke.R.focus,primary:9,secondary:[1033]}})),(0,we.E_)(new O_({id:"showPrevParameterHint",precondition:et.M$.and(Sc.Visible,Sc.MultipleSignatures),handler:h=>h.previous(),kbOpts:{weight:A_,kbExpr:ke.R.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),(0,we.E_)(new O_({id:"showNextParameterHint",precondition:et.M$.and(Sc.Visible,Sc.MultipleSignatures),handler:h=>h.next(),kbOpts:{weight:A_,kbExpr:ke.R.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var WE=c(24167),BE=c(74273),HE=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},VE=function(h,e){return function(t,i){e(t,i,h)}};class UE{constructor(e){this.instantiationService=e}init(...e){}}function zE(h,e){return class extends e{constructor(){super(...arguments),this._autorun=void 0}init(...i){this._autorun=(0,si.yC)((s,o)=>{const l=(0,b_.b)(h(),s);o.add(this.instantiationService.createInstance(l,...i))})}dispose(){this._autorun?.dispose()}}}function jE(h){return(0,BE.e)()?zE(h,F_):h()}let F_=class extends UE{constructor(e,t){super(t),this.init(e)}};F_=HE([VE(1,Ri._Y)],F_),(0,we.HW)(w_.ID,jE(()=>w_),0),(0,WE.x1)("editor.placeholder.foreground",Bm.Ek,(0,Z.kg)("placeholderForeground","Foreground color of the placeholder text in the editor."));var KE=c(84059),W_=c(15625),$E=c(91779),GE=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},_f=function(h,e){return function(t,i){e(t,i,h)}};const QE=!1,Kd=new et.N1("renameInputVisible",!1,Z.kg("renameInputVisible","Whether the rename input widget is visible")),dI=new et.N1("renameInputFocused",!1,Z.kg("renameInputFocused","Whether the rename input widget is focused"));let B_=class{constructor(e,t,i,s,o,l){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=s,this._logService=l,this.allowEditorOverflow=!0,this._disposables=new vt.Cm,this._visibleContextKey=Kd.bindTo(o),this._isEditingRenameCandidate=!1,this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,this._candidates=new Set,this._beforeFirstInputFieldEditSW=new eo.W,this._inputWithButton=new YE,this._disposables.add(this._inputWithButton),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(g=>{g.hasChanged(50)&&this._updateFont()})),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputWithButton.domNode),this._renameCandidateListView=this._disposables.add(new H_(this._domNode,{fontInfo:this._editor.getOption(50),onFocusChange:e=>{this._inputWithButton.input.value=e,this._isEditingRenameCandidate=!1},onSelectionChange:()=>{this._isEditingRenameCandidate=!1,this.acceptInput(!1)}})),this._disposables.add(this._inputWithButton.onDidInputChange(()=>{this._renameCandidateListView?.focusedCandidate!==void 0&&(this._isEditingRenameCandidate=!0),this._timeBeforeFirstInputFieldEdit??=this._beforeFirstInputFieldEditSW.elapsed(),this._renameCandidateProvidersCts?.token.isCancellationRequested===!1&&this._renameCandidateProvidersCts.cancel(),this._renameCandidateListView?.clearFocus()})),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){if(!this._domNode)return;const t=e.getColor(Tt.f9l),i=e.getColor(Tt.DSL);this._domNode.style.backgroundColor=String(e.getColor(Tt.CgL)??""),this._domNode.style.boxShadow=t?` 0 0 8px 2px ${t}`:"",this._domNode.style.border=i?`1px solid ${i}`:"",this._domNode.style.color=String(e.getColor(Tt.cws)??"");const s=e.getColor(Tt.Zgs);this._inputWithButton.domNode.style.backgroundColor=String(e.getColor(Tt.L4c)??""),this._inputWithButton.input.style.backgroundColor=String(e.getColor(Tt.L4c)??""),this._inputWithButton.domNode.style.borderWidth=s?"1px":"0px",this._inputWithButton.domNode.style.borderStyle=s?"solid":"none",this._inputWithButton.domNode.style.borderColor=s?.toString()??"none"}_updateFont(){if(this._domNode===void 0)return;(0,hn.j)(this._label!==void 0,"RenameWidget#_updateFont: _label must not be undefined given _domNode is defined"),this._editor.applyFontInfo(this._inputWithButton.input);const e=this._editor.getOption(50);this._label.style.fontSize=`${this._computeLabelFontSize(e.fontSize)}px`}_computeLabelFontSize(e){return e*.8}getPosition(){if(!this._visible||!this._editor.hasModel()||!this._editor.getDomNode())return null;const e=Se.tG(this.getDomNode().ownerDocument.body),t=Se.BK(this._editor.getDomNode()),i=this._getTopForPosition();this._nPxAvailableAbove=i+t.top,this._nPxAvailableBelow=e.height-this._nPxAvailableAbove;const s=this._editor.getOption(67),{totalHeight:o}=$d.getLayoutInfo({lineHeight:s}),l=this._nPxAvailableBelow>o*6?[2,1]:[1,2];return{position:this._position,preference:l}}beforeRender(){const[e,t]=this._acceptKeybindings;return this._label.innerText=Z.kg({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",this._keybindingService.lookupKeybinding(e)?.getLabel(),this._keybindingService.lookupKeybinding(t)?.getLabel()),this._domNode.style.minWidth="200px",null}afterRender(e){if(e===null){this.cancelInput(!0,"afterRender (because position is null)");return}if(!this._editor.hasModel()||!this._editor.getDomNode())return;(0,hn.j)(this._renameCandidateListView),(0,hn.j)(this._nPxAvailableAbove!==void 0),(0,hn.j)(this._nPxAvailableBelow!==void 0);const t=Se.OK(this._inputWithButton.domNode),i=Se.OK(this._label);let s;e===2?s=this._nPxAvailableBelow:s=this._nPxAvailableAbove,this._renameCandidateListView.layout({height:s-i-t,width:Se.Tr(this._inputWithButton.domNode)})}acceptInput(e){this._trace("invoking acceptInput"),this._currentAcceptInput?.(e)}cancelInput(e,t){this._currentCancelInput?.(e)}focusNextRenameSuggestion(){this._renameCandidateListView?.focusNext()||(this._inputWithButton.input.value=this._currentName)}focusPreviousRenameSuggestion(){this._renameCandidateListView?.focusPrevious()||(this._inputWithButton.input.value=this._currentName)}getInput(e,t,i,s,o){const{start:l,end:g}=this._getSelection(e,t);this._renameCts=o;const k=new vt.Cm;this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,s===void 0?this._inputWithButton.button.style.display="none":(this._inputWithButton.button.style.display="flex",this._requestRenameCandidatesOnce=s,this._requestRenameCandidates(t,!1),k.add(Se.ko(this._inputWithButton.button,"click",()=>this._requestRenameCandidates(t,!0))),k.add(Se.ko(this._inputWithButton.button,Se.Bx.KEY_DOWN,ee=>{const ie=new W_.Z(ee);(ie.equals(3)||ie.equals(10))&&(ie.stopPropagation(),ie.preventDefault(),this._requestRenameCandidates(t,!0))}))),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle("preview",i),this._position=new ui.y(e.startLineNumber,e.startColumn),this._currentName=t,this._inputWithButton.input.value=t,this._inputWithButton.input.setAttribute("selectionStart",l.toString()),this._inputWithButton.input.setAttribute("selectionEnd",g.toString()),this._inputWithButton.input.size=Math.max((e.endColumn-e.startColumn)*1.1,20),this._beforeFirstInputFieldEditSW.reset(),k.add((0,vt.s)(()=>{this._renameCts=void 0,o.dispose(!0)})),k.add((0,vt.s)(()=>{this._renameCandidateProvidersCts!==void 0&&(this._renameCandidateProvidersCts.dispose(!0),this._renameCandidateProvidersCts=void 0)})),k.add((0,vt.s)(()=>this._candidates.clear()));const H=new hi.Zv;return H.p.finally(()=>{k.dispose(),this._hide()}),this._currentCancelInput=ee=>(this._trace("invoking _currentCancelInput"),this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView?.clearCandidates(),H.complete(ee),!0),this._currentAcceptInput=ee=>{this._trace("invoking _currentAcceptInput"),(0,hn.j)(this._renameCandidateListView!==void 0);const ie=this._renameCandidateListView.nCandidates;let fe,Me;const xe=this._renameCandidateListView.focusedCandidate;if(xe!==void 0?(this._trace("using new name from renameSuggestion"),fe=xe,Me={k:"renameSuggestion"}):(this._trace("using new name from inputField"),fe=this._inputWithButton.input.value,Me=this._isEditingRenameCandidate?{k:"userEditedRenameSuggestion"}:{k:"inputField"}),fe===t||fe.trim().length===0){this.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)");return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView.clearCandidates(),H.complete({newName:fe,wantsPreview:i&&ee,stats:{source:Me,nRenameSuggestions:ie,timeBeforeFirstInputFieldEdit:this._timeBeforeFirstInputFieldEdit,nRenameSuggestionsInvocations:this._nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:this._hadAutomaticRenameSuggestionsInvocation}})},k.add(o.token.onCancellationRequested(()=>this.cancelInput(!0,"cts.token.onCancellationRequested"))),QE||k.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!this._domNode?.ownerDocument.hasFocus(),"editor.onDidBlurEditorWidget"))),this._show(),H.p}_requestRenameCandidates(e,t){if(this._requestRenameCandidatesOnce!==void 0&&(this._renameCandidateProvidersCts!==void 0&&this._renameCandidateProvidersCts.dispose(!0),(0,hn.j)(this._renameCts),this._inputWithButton.buttonState!=="stop")){this._renameCandidateProvidersCts=new Fi.Qi;const i=t?Et.YT.Invoke:Et.YT.Automatic,s=this._requestRenameCandidatesOnce(i,this._renameCandidateProvidersCts.token);if(s.length===0){this._inputWithButton.setSparkleButton();return}t||(this._hadAutomaticRenameSuggestionsInvocation=!0),this._nRenameSuggestionsInvocations+=1,this._inputWithButton.setStopButton(),this._updateRenameCandidates(s,e,this._renameCts.token)}}_getSelection(e,t){(0,hn.j)(this._editor.hasModel());const i=this._editor.getSelection();let s=0,o=t.length;return!wt.Q.isEmpty(i)&&!wt.Q.spansMultipleLines(i)&&wt.Q.containsRange(e,i)&&(s=Math.max(0,i.startColumn-e.startColumn),o=Math.min(e.endColumn,i.endColumn)-e.startColumn),{start:s,end:o}}_show(){this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._inputWithButton.input.focus(),this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute("selectionStart")),parseInt(this._inputWithButton.input.getAttribute("selectionEnd")))},100)}async _updateRenameCandidates(e,t,i){const s=(...H)=>this._trace("_updateRenameCandidates",...H);s("start");const o=await(0,hi.PK)(Promise.allSettled(e),i);if(this._inputWithButton.setSparkleButton(),o===void 0){s("returning early - received updateRenameCandidates results - undefined");return}const l=o.flatMap(H=>H.status==="fulfilled"&&(0,hn.O9)(H.value)?H.value:[]);s(`received updateRenameCandidates results - total (unfiltered) ${l.length} candidates.`);const g=Xi.dM(l,H=>H.newSymbolName);s(`distinct candidates - ${g.length} candidates.`);const k=g.filter(({newSymbolName:H})=>H.trim().length>0&&H!==this._inputWithButton.input.value&&H!==t&&!this._candidates.has(H));if(s(`valid distinct candidates - ${l.length} candidates.`),k.forEach(H=>this._candidates.add(H.newSymbolName)),k.length<1){s("returning early - no valid distinct candidates");return}s("setting candidates"),this._renameCandidateListView.setCandidates(k),s("asking editor to re-layout"),this._editor.layoutContentWidget(this)}_hide(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}_getTopForPosition(){const e=this._editor.getVisibleRanges();let t;return e.length>0?t=e[0].startLineNumber:(this._logService.warn("RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty"),t=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(t)}_trace(...e){this._logService.trace("RenameWidget",...e)}};B_=GE([_f(2,$i.Gy),_f(3,ms.b),_f(4,et.fN),_f(5,gc.rr)],B_);class H_{constructor(e,t){this._disposables=new vt.Cm,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=t.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=t.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),this._listContainer.className="rename-box rename-candidate-list-container",e.appendChild(this._listContainer),this._listWidget=H_._createListWidget(this._listContainer,this._candidateViewHeight,t.fontInfo),this._listWidget.onDidChangeFocus(i=>{i.elements.length===1&&t.onFocusChange(i.elements[0].newSymbolName)},this._disposables),this._listWidget.onDidChangeSelection(i=>{i.elements.length===1&&t.onSelectionChange()},this._disposables),this._disposables.add(this._listWidget.onDidBlur(i=>{this._listWidget.setFocus([])})),this._listWidget.style((0,Io.t8)({listInactiveFocusForeground:Tt.nH,listInactiveFocusBackground:Tt.AlL}))}dispose(){this._listWidget.dispose(),this._disposables.dispose()}layout({height:e,width:t}){this._availableHeight=e,this._minimumWidth=t}setCandidates(e){this._listWidget.splice(0,0,e);const t=this._pickListHeight(this._listWidget.length),i=this._pickListWidth(e);this._listWidget.layout(t,i),this._listContainer.style.height=`${t}px`,this._listContainer.style.width=`${i}px`,dn.h5(Z.kg("renameSuggestionsReceivedAria","Received {0} rename suggestions",e.length))}clearCandidates(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])}get nCandidates(){return this._listWidget.length}get focusedCandidate(){if(this._listWidget.length===0)return;const e=this._listWidget.getSelectedElements()[0];if(e!==void 0)return e.newSymbolName;const t=this._listWidget.getFocusedElements()[0];if(t!==void 0)return t.newSymbolName}focusNext(){if(this._listWidget.length===0)return!1;const e=this._listWidget.getFocus();if(e.length===0)return this._listWidget.focusFirst(),this._listWidget.reveal(0),!0;if(e[0]===this._listWidget.length-1)return this._listWidget.setFocus([]),this._listWidget.reveal(0),!1;{this._listWidget.focusNext();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}}focusPrevious(){if(this._listWidget.length===0)return!1;const e=this._listWidget.getFocus();if(e.length===0){this._listWidget.focusLast();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}else{if(e[0]===0)return this._listWidget.setFocus([]),!1;{this._listWidget.focusPrevious();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}}}clearFocus(){this._listWidget.setFocus([])}get _candidateViewHeight(){const{totalHeight:e}=$d.getLayoutInfo({lineHeight:this._lineHeight});return e}_pickListHeight(e){const t=this._candidateViewHeight*e;return Math.min(t,this._availableHeight,this._candidateViewHeight*7)}_pickListWidth(e){const t=Math.ceil(Math.max(...e.map(s=>s.newSymbolName.length))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+t+10)}static _createListWidget(e,t,i){const s=new class{getTemplateId(l){return"candidate"}getHeight(l){return t}},o=new class{constructor(){this.templateId="candidate"}renderTemplate(l){return new $d(l,i)}renderElement(l,g,k){k.populate(l)}disposeTemplate(l){l.dispose()}};return new nl.B8("NewSymbolNameCandidates",e,s,[o],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})}}class YE{constructor(){this._onDidInputChange=new zi.vl,this.onDidInputChange=this._onDidInputChange.event,this._disposables=new vt.Cm}get domNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="rename-input-with-button",this._domNode.style.display="flex",this._domNode.style.flexDirection="row",this._domNode.style.alignItems="center",this._inputNode=document.createElement("input"),this._inputNode.className="rename-input",this._inputNode.type="text",this._inputNode.style.border="none",this._inputNode.setAttribute("aria-label",Z.kg("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._inputNode),this._buttonNode=document.createElement("div"),this._buttonNode.className="rename-suggestions-button",this._buttonNode.setAttribute("tabindex","0"),this._buttonGenHoverText=Z.kg("generateRenameSuggestionsButton","Generate new name suggestions"),this._buttonCancelHoverText=Z.kg("cancelRenameSuggestionsButton","Cancel"),this._buttonHover=(0,$E.i)().setupManagedHover((0,dc.nZ)("element"),this._buttonNode,this._buttonGenHoverText),this._disposables.add(this._buttonHover),this._domNode.appendChild(this._buttonNode),this._disposables.add(Se.ko(this.input,Se.Bx.INPUT,()=>this._onDidInputChange.fire())),this._disposables.add(Se.ko(this.input,Se.Bx.KEY_DOWN,e=>{const t=new W_.Z(e);(t.keyCode===15||t.keyCode===17)&&this._onDidInputChange.fire()})),this._disposables.add(Se.ko(this.input,Se.Bx.CLICK,()=>this._onDidInputChange.fire())),this._disposables.add(Se.ko(this.input,Se.Bx.FOCUS,()=>{this.domNode.style.outlineWidth="1px",this.domNode.style.outlineStyle="solid",this.domNode.style.outlineOffset="-1px",this.domNode.style.outlineColor="var(--vscode-focusBorder)"})),this._disposables.add(Se.ko(this.input,Se.Bx.BLUR,()=>{this.domNode.style.outline="none"}))),this._domNode}get input(){return(0,hn.j)(this._inputNode),this._inputNode}get button(){return(0,hn.j)(this._buttonNode),this._buttonNode}get buttonState(){return this._buttonState}setSparkleButton(){this._buttonState="sparkle",this._sparkleIcon??=(0,jn.s)(Dt.W.sparkle),Se.w_(this.button),this.button.appendChild(this._sparkleIcon),this.button.setAttribute("aria-label","Generating new name suggestions"),this._buttonHover?.update(this._buttonGenHoverText),this.input.focus()}setStopButton(){this._buttonState="stop",this._stopIcon??=(0,jn.s)(Dt.W.primitiveSquare),Se.w_(this.button),this.button.appendChild(this._stopIcon),this.button.setAttribute("aria-label","Cancel generating new name suggestions"),this._buttonHover?.update(this._buttonCancelHoverText),this.input.focus()}dispose(){this._disposables.dispose()}}class $d{static{this._PADDING=2}constructor(e,t){this._domNode=document.createElement("div"),this._domNode.className="rename-box rename-candidate",this._domNode.style.display="flex",this._domNode.style.columnGap="5px",this._domNode.style.alignItems="center",this._domNode.style.height=`${t.lineHeight}px`,this._domNode.style.padding=`${$d._PADDING}px`;const i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.width=i.style.height=`${t.lineHeight*.8}px`,this._domNode.appendChild(i),this._icon=(0,jn.s)(Dt.W.sparkle),this._icon.style.display="none",i.appendChild(this._icon),this._label=document.createElement("div"),Z0.M(this._label,t),this._domNode.appendChild(this._label),e.appendChild(this._domNode)}populate(e){this._updateIcon(e),this._updateLabel(e)}_updateIcon(e){const t=!!e.tags?.includes(Et.OV.AIGenerated);this._icon.style.display=t?"inherit":"none"}_updateLabel(e){this._label.innerText=e.newSymbolName}static getLayoutInfo({lineHeight:e}){return{totalHeight:e+$d._PADDING*2}}dispose(){}}var ZE=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},yl=function(h,e){return function(t,i){e(t,i,h)}},V_;class U_{constructor(e,t,i){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=i.ordered(e)}hasProvider(){return this._providers.length>0}async resolveRenameLocation(e){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const s=this._providers[this._providerRenameIdx];if(!s.resolveRenameLocation)break;const o=await s.resolveRenameLocation(this.model,this.position,e);if(o){if(o.rejectReason){t.push(o.rejectReason);continue}return o}}this._providerRenameIdx=0;const i=this.model.getWordAtPosition(this.position);return i?{range:new wt.Q(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:wt.Q.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}}async provideRenameEdits(e,t){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}async _provideRenameEdits(e,t,i,s){const o=this._providers[t];if(!o)return{edits:[],rejectReason:i.join(`
`)};const l=await o.provideRenameEdits(this.model,this.position,e,s);if(l){if(l.rejectReason)return this._provideRenameEdits(e,t+1,i.concat(l.rejectReason),s)}else return this._provideRenameEdits(e,t+1,i.concat(Z.kg("no result","No result.")),s);return l}}async function XE(h,e,t,i){const s=new U_(e,t,h),o=await s.resolveRenameLocation(Fi.XO.None);return o?.rejectReason?{edits:[],rejectReason:o.rejectReason}:s.provideRenameEdits(i,Fi.XO.None)}let Ll=class{static{V_=this}static{this.ID="editor.contrib.renameController"}static get(e){return e.getContribution(V_.ID)}constructor(e,t,i,s,o,l,g,k,H){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=s,this._progressService=o,this._logService=l,this._configService=g,this._languageFeaturesService=k,this._telemetryService=H,this._disposableStore=new vt.Cm,this._cts=new Fi.Qi,this._renameWidget=this._disposableStore.add(this._instaService.createInstance(B_,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}async run(){const e=this._logService.trace.bind(this._logService,"[rename]");if(this._cts.dispose(!0),this._cts=new Fi.Qi,!this.editor.hasModel()){e("editor has no model");return}const t=this.editor.getPosition(),i=new U_(this.editor.getModel(),t,this._languageFeaturesService.renameProvider);if(!i.hasProvider()){e("skeleton has no provider");return}const s=new ds.gI(this.editor,5,void 0,this._cts.token);let o;try{e("resolving rename location");const xe=i.resolveRenameLocation(s.token);this._progressService.showWhile(xe,250),o=await xe,e("resolved rename location")}catch(xe){xe instanceof Ni.AL?e("resolve rename location cancelled",JSON.stringify(xe,null,"	")):(e("resolve rename location failed",xe instanceof Error?xe:JSON.stringify(xe,null,"	")),(typeof xe=="string"||(0,nn.VS)(xe))&&Ls.get(this.editor)?.showMessage(xe||Z.kg("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),t));return}finally{s.dispose()}if(!o){e("returning early - no loc");return}if(o.rejectReason){e(`returning early - rejected with reason: ${o.rejectReason}`,o.rejectReason),Ls.get(this.editor)?.showMessage(o.rejectReason,t);return}if(s.token.isCancellationRequested){e("returning early - cts1 cancelled");return}const l=new ds.gI(this.editor,5,o.range,this._cts.token),g=this.editor.getModel(),k=this._languageFeaturesService.newSymbolNamesProvider.all(g),H=await Promise.all(k.map(async xe=>[xe,await xe.supportsAutomaticNewSymbolNamesTriggerKind??!1])),ee=(xe,Qe)=>{let ut=H.slice();return xe===Et.YT.Automatic&&(ut=ut.filter(([Lt,kt])=>kt)),ut.map(([Lt])=>Lt.provideNewSymbolNames(g,o.range,xe,Qe))};e("creating rename input field and awaiting its result");const ie=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),fe=await this._renameWidget.getInput(o.range,o.text,ie,k.length>0?ee:void 0,l);if(e("received response from rename input field"),k.length>0&&this._reportTelemetry(k.length,g.getLanguageId(),fe),typeof fe=="boolean"){e(`returning early - rename input field response - ${fe}`),fe&&this.editor.focus(),l.dispose();return}this.editor.focus(),e("requesting rename edits");const Me=(0,hi.PK)(i.provideRenameEdits(fe.newName,l.token),l.token).then(async xe=>{if(!xe){e("returning early - no rename edits result");return}if(!this.editor.hasModel()){e("returning early - no model after rename edits are provided");return}if(xe.rejectReason){e(`returning early - rejected with reason: ${xe.rejectReason}`),this._notificationService.info(xe.rejectReason);return}this.editor.setSelection(wt.Q.fromPositions(this.editor.getSelection().getPosition())),e("applying edits"),this._bulkEditService.apply(xe,{editor:this.editor,showPreview:fe.wantsPreview,label:Z.kg("label","Renaming '{0}' to '{1}'",o?.text,fe.newName),code:"undoredo.rename",quotableLabel:Z.kg("quotableLabel","Renaming {0} to {1}",o?.text,fe.newName),respectAutoSaveConfig:!0}).then(Qe=>{e("edits applied"),Qe.ariaSummary&&(0,dn.xE)(Z.kg("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",o.text,fe.newName,Qe.ariaSummary))}).catch(Qe=>{e(`error when applying edits ${JSON.stringify(Qe,null,"	")}`),this._notificationService.error(Z.kg("rename.failedApply","Rename failed to apply edits")),this._logService.error(Qe)})},xe=>{e("error when providing rename edits",JSON.stringify(xe,null,"	")),this._notificationService.error(Z.kg("rename.failed","Rename failed to compute edits")),this._logService.error(xe)}).finally(()=>{l.dispose()});return e("returning rename operation"),this._progressService.showWhile(Me,250),Me}acceptRenameInput(e){this._renameWidget.acceptInput(e)}cancelRenameInput(){this._renameWidget.cancelInput(!0,"cancelRenameInput command")}focusNextRenameSuggestion(){this._renameWidget.focusNextRenameSuggestion()}focusPreviousRenameSuggestion(){this._renameWidget.focusPreviousRenameSuggestion()}_reportTelemetry(e,t,i){const s=typeof i=="boolean"?{kind:"cancelled",languageId:t,nRenameSuggestionProviders:e}:{kind:"accepted",languageId:t,nRenameSuggestionProviders:e,source:i.stats.source.k,nRenameSuggestions:i.stats.nRenameSuggestions,timeBeforeFirstInputFieldEdit:i.stats.timeBeforeFirstInputFieldEdit,wantsPreview:i.wantsPreview,nRenameSuggestionsInvocations:i.stats.nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:i.stats.hadAutomaticRenameSuggestionsInvocation};this._telemetryService.publicLog2("renameInvokedEvent",s)}};Ll=V_=ZE([yl(1,Ri._Y),yl(2,As.Ot),yl(3,Zi.nu),yl(4,Bs.N8),yl(5,gc.rr),yl(6,KE.ITextResourceConfigurationService),yl(7,_e.ILanguageFeaturesService),yl(8,is.k)],Ll);class JE extends we.ks{constructor(){super({id:"editor.action.rename",label:Z.kg("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:et.M$.and(ke.R.writable,ke.R.hasRenameProvider),kbOpts:{kbExpr:ke.R.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const i=e.get(Xt.T),[s,o]=Array.isArray(t)&&t||[void 0,void 0];return Ot.r.isUri(s)&&ui.y.isIPosition(o)?i.openCodeEditor({resource:s},i.getActiveCodeEditor()).then(l=>{l&&(l.setPosition(o),l.invokeWithinContext(g=>(this.reportTelemetry(g,l),this.run(g,l))))},Ni.dz):super.runCommand(e,t)}run(e,t){const i=e.get(gc.rr),s=Ll.get(t);return s?(i.trace("[RenameAction] got controller, running..."),s.run()):(i.trace("[RenameAction] returning early - controller missing"),Promise.resolve())}}(0,we.HW)(Ll.ID,Ll,4),(0,we.Fl)(JE);const z_=we.DX.bindToContribution(Ll.get);(0,we.E_)(new z_({id:"acceptRenameInput",precondition:Kd,handler:h=>h.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:et.M$.and(ke.R.focus,et.M$.not("isComposing")),primary:3}})),(0,we.E_)(new z_({id:"acceptRenameInputWithPreview",precondition:et.M$.and(Kd,et.M$.has("config.editor.rename.enablePreview")),handler:h=>h.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:et.M$.and(ke.R.focus,et.M$.not("isComposing")),primary:2051}})),(0,we.E_)(new z_({id:"cancelRenameInput",precondition:Kd,handler:h=>h.cancelRenameInput(),kbOpts:{weight:199,kbExpr:ke.R.focus,primary:9,secondary:[1033]}})),(0,Fe.ug)(class extends Fe.L{constructor(){super({id:"focusNextRenameSuggestion",title:{...Z.aS("focusNextRenameSuggestion","Focus Next Rename Suggestion")},precondition:Kd,keybinding:[{primary:18,weight:199}]})}run(e){const t=e.get(Xt.T).getFocusedCodeEditor();if(!t)return;const i=Ll.get(t);i&&i.focusNextRenameSuggestion()}}),(0,Fe.ug)(class extends Fe.L{constructor(){super({id:"focusPreviousRenameSuggestion",title:{...Z.aS("focusPreviousRenameSuggestion","Focus Previous Rename Suggestion")},precondition:Kd,keybinding:[{primary:16,weight:199}]})}run(e){const t=e.get(Xt.T).getFocusedCodeEditor();if(!t)return;const i=Ll.get(t);i&&i.focusPreviousRenameSuggestion()}}),(0,we.ke)("_executeDocumentRenameProvider",function(h,e,t,...i){const[s]=i;(0,hn.j)(typeof s=="string");const{renameProvider:o}=h.get(_e.ILanguageFeaturesService);return XE(o,e,t,s)}),(0,we.ke)("_executePrepareRename",async function(h,e,t){const{renameProvider:i}=h.get(_e.ILanguageFeaturesService),o=await new U_(e,t,i).resolveRenameLocation(Fi.XO.None);if(o?.rejectReason)throw new Error(o.rejectReason);return o}),qt.O.as(li.Fd.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:Z.kg("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var qE=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ob=function(h,e){return function(t,i){e(t,i,h)}};let vf=class extends vt.jG{static{this.ID="editor.sectionHeaderDetector"}constructor(e,t,i){super(),this.editor=e,this.languageConfigurationService=t,this.editorWorkerService=i,this.decorations=this.editor.createDecorationsCollection(),this.options=this.createOptions(e.getOption(73)),this.computePromise=null,this.currentOccurrences={},this._register(e.onDidChangeModel(s=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(e.onDidChangeModelLanguage(s=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(t.onDidChange(s=>{const o=this.editor.getModel()?.getLanguageId();o&&s.affects(o)&&(this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(e.onDidChangeConfiguration(s=>{this.options&&!s.hasChanged(73)||(this.options=this.createOptions(e.getOption(73)),this.updateDecorations([]),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(this.editor.onDidChangeModelContent(s=>{this.computeSectionHeaders.schedule()})),this._register(e.onDidChangeModelTokens(s=>{this.computeSectionHeaders.isScheduled()||this.computeSectionHeaders.schedule(1e3)})),this.computeSectionHeaders=this._register(new hi.uC(()=>{this.findSectionHeaders()},250)),this.computeSectionHeaders.schedule(0)}createOptions(e){if(!e||!this.editor.hasModel())return;const t=this.editor.getModel().getLanguageId();if(!t)return;const i=this.languageConfigurationService.getLanguageConfiguration(t).comments,s=this.languageConfigurationService.getLanguageConfiguration(t).foldingRules;if(!(!i&&!s?.markers))return{foldingRules:s,findMarkSectionHeaders:e.showMarkSectionHeaders,findRegionSectionHeaders:e.showRegionSectionHeaders}}findSectionHeaders(){if(!this.editor.hasModel()||!this.options?.findMarkSectionHeaders&&!this.options?.findRegionSectionHeaders)return;const e=this.editor.getModel();if(e.isDisposed()||e.isTooLargeForSyncing())return;const t=e.getVersionId();this.editorWorkerService.findSectionHeaders(e.uri,this.options).then(i=>{e.isDisposed()||e.getVersionId()!==t||this.updateDecorations(i)})}updateDecorations(e){const t=this.editor.getModel();t&&(e=e.filter(o=>{if(!o.shouldBeInComments)return!0;const l=t.validateRange(o.range),g=t.tokenization.getLineTokens(l.startLineNumber),k=g.findTokenIndexAtOffset(l.startColumn-1),H=g.getStandardTokenType(k);return g.getLanguageId(k)===t.getLanguageId()&&H===1}));const i=Object.values(this.currentOccurrences).map(o=>o.decorationId),s=e.map(o=>ex(o));this.editor.changeDecorations(o=>{const l=o.deltaDecorations(i,s);this.currentOccurrences={};for(let g=0,k=l.length;g<k;g++){const H={sectionHeader:e[g],decorationId:l[g]};this.currentOccurrences[H.decorationId]=H}})}stop(){this.computeSectionHeaders.cancel(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop(),this.decorations.clear()}};vf=qE([ob(1,Us.JZ),ob(2,ir.IEditorWorkerService)],vf);function ex(h){return{range:h.range,options:Ki.kI.createDynamic({description:"section-header",stickiness:3,collapseOnReplaceEdit:!0,minimap:{color:void 0,position:1,sectionHeaderStyle:h.hasSeparatorLine?2:1,sectionHeaderText:h.text}})}}(0,we.HW)(vf.ID,vf,1);var rb=c(57787),ab=c(51207);function Cf(h){return h&&!!h.data}function lb(h){return h&&Array.isArray(h.edits)}class tx{constructor(e,t,i){this.provider=e,this.tokens=t,this.error=i}}function cb(h,e){return h.has(e)}function ix(h,e){const t=h.orderedGroups(e);return t.length>0?t[0]:[]}async function db(h,e,t,i,s){const o=ix(h,e),l=await Promise.all(o.map(async g=>{let k,H=null;try{k=await g.provideDocumentSemanticTokens(e,g===t?i:null,s)}catch(ee){H=ee,k=null}return(!k||!Cf(k)&&!lb(k))&&(k=null),new tx(g,k,H)}));for(const g of l){if(g.error)throw g.error;if(g.tokens)return g}return l.length>0?l[0]:null}function nx(h,e){const t=h.orderedGroups(e);return t.length>0?t[0]:null}class sx{constructor(e,t){this.provider=e,this.tokens=t}}function ox(h,e){return h.has(e)}function hb(h,e){const t=h.orderedGroups(e);return t.length>0?t[0]:[]}async function j_(h,e,t,i){const s=hb(h,e),o=await Promise.all(s.map(async l=>{let g;try{g=await l.provideDocumentRangeSemanticTokens(e,t,i)}catch(k){(0,Ni.M_)(k),g=null}return(!g||!Cf(g))&&(g=null),new sx(l,g)}));for(const l of o)if(l.tokens)return l;return o.length>0?o[0]:null}Di.w.registerCommand("_provideDocumentSemanticTokensLegend",async(h,...e)=>{const[t]=e;(0,hn.j)(t instanceof Ot.r);const i=h.get(Zs.IModelService).getModel(t);if(!i)return;const{documentSemanticTokensProvider:s}=h.get(_e.ILanguageFeaturesService),o=nx(s,i);return o?o[0].getLegend():h.get(Di.d).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}),Di.w.registerCommand("_provideDocumentSemanticTokens",async(h,...e)=>{const[t]=e;(0,hn.j)(t instanceof Ot.r);const i=h.get(Zs.IModelService).getModel(t);if(!i)return;const{documentSemanticTokensProvider:s}=h.get(_e.ILanguageFeaturesService);if(!cb(s,i))return h.get(Di.d).executeCommand("_provideDocumentRangeSemanticTokens",t,i.getFullModelRange());const o=await db(s,i,null,null,Fi.XO.None);if(!o)return;const{provider:l,tokens:g}=o;if(!g||!Cf(g))return;const k=(0,ab.encodeSemanticTokensDto)({id:0,type:"full",data:g.data});return g.resultId&&l.releaseDocumentSemanticTokens(g.resultId),k}),Di.w.registerCommand("_provideDocumentRangeSemanticTokensLegend",async(h,...e)=>{const[t,i]=e;(0,hn.j)(t instanceof Ot.r);const s=h.get(Zs.IModelService).getModel(t);if(!s)return;const{documentRangeSemanticTokensProvider:o}=h.get(_e.ILanguageFeaturesService),l=hb(o,s);if(l.length===0)return;if(l.length===1||!i||!wt.Q.isIRange(i))return l[0].getLegend();const g=await j_(o,s,wt.Q.lift(i),Fi.XO.None);if(g)return g.provider.getLegend()}),Di.w.registerCommand("_provideDocumentRangeSemanticTokens",async(h,...e)=>{const[t,i]=e;(0,hn.j)(t instanceof Ot.r),(0,hn.j)(wt.Q.isIRange(i));const s=h.get(Zs.IModelService).getModel(t);if(!s)return;const{documentRangeSemanticTokensProvider:o}=h.get(_e.ILanguageFeaturesService),l=await j_(o,s,wt.Q.lift(i),Fi.XO.None);if(!(!l||!l.tokens))return(0,ab.encodeSemanticTokensDto)({id:0,type:"full",data:l.tokens.data})});var K_=c(43872);const $_="editor.semanticHighlighting";function bf(h,e,t){const i=t.getValue($_,{overrideIdentifier:h.getLanguageId(),resource:h.uri})?.enabled;return typeof i=="boolean"?i:e.getColorTheme().semanticHighlighting}var ub=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},fa=function(h,e){return function(t,i){e(t,i,h)}},Dl;let G_=class extends vt.jG{constructor(e,t,i,s,o,l){super(),this._watchers=Object.create(null);const g=ee=>{this._watchers[ee.uri.toString()]=new Q_(ee,e,i,o,l)},k=(ee,ie)=>{ie.dispose(),delete this._watchers[ee.uri.toString()]},H=()=>{for(const ee of t.getModels()){const ie=this._watchers[ee.uri.toString()];bf(ee,i,s)?ie||g(ee):ie&&k(ee,ie)}};t.getModels().forEach(ee=>{bf(ee,i,s)&&g(ee)}),this._register(t.onModelAdded(ee=>{bf(ee,i,s)&&g(ee)})),this._register(t.onModelRemoved(ee=>{const ie=this._watchers[ee.uri.toString()];ie&&k(ee,ie)})),this._register(s.onDidChangeConfiguration(ee=>{ee.affectsConfiguration($_)&&H()})),this._register(i.onDidColorThemeChange(H))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}};G_=ub([fa(0,K_.ISemanticTokensStylingService),fa(1,Zs.IModelService),fa(2,$i.Gy),fa(3,pt.pG),fa(4,Vs.ILanguageFeatureDebounceService),fa(5,_e.ILanguageFeaturesService)],G_);let Q_=class extends vt.jG{static{Dl=this}static{this.REQUEST_MIN_DELAY=300}static{this.REQUEST_MAX_DELAY=2e3}constructor(e,t,i,s,o){super(),this._semanticTokensStylingService=t,this._isDisposed=!1,this._model=e,this._provider=o.documentSemanticTokensProvider,this._debounceInformation=s.for(this._provider,"DocumentSemanticTokens",{min:Dl.REQUEST_MIN_DELAY,max:Dl.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new hi.uC(()=>this._fetchDocumentSemanticTokensNow(),Dl.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeAttached(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const l=()=>{(0,vt.AS)(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const g of this._provider.all(e))typeof g.onDidChange=="function"&&this._documentProvidersChangeListeners.push(g.onDidChange(()=>{if(this._currentDocumentRequestCancellationTokenSource){this._providersChangedDuringRequest=!0;return}this._fetchDocumentSemanticTokens.schedule(0)}))};l(),this._register(this._provider.onDidChange(()=>{l(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(i.onDidColorThemeChange(g=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),(0,vt.AS)(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!cb(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}if(!this._model.isAttachedToEditor())return;const e=new Fi.Qi,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,i=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,s=db(this._provider,this._model,t,i,e.token);this._currentDocumentRequestCancellationTokenSource=e,this._providersChangedDuringRequest=!1;const o=[],l=this._model.onDidChangeContent(k=>{o.push(k)}),g=new eo.W(!1);s.then(k=>{if(this._debounceInformation.update(this._model,g.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,l.dispose(),!k)this._setDocumentSemanticTokens(null,null,null,o);else{const{provider:H,tokens:ee}=k,ie=this._semanticTokensStylingService.getStyling(H);this._setDocumentSemanticTokens(H,ee||null,ie,o)}},k=>{k&&(Ni.MB(k)||typeof k.message=="string"&&k.message.indexOf("busy")!==-1)||Ni.dz(k),this._currentDocumentRequestCancellationTokenSource=null,l.dispose(),(o.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,i,s,o){o=Math.min(o,i.length-s,e.length-t);for(let l=0;l<o;l++)i[s+l]=e[t+l]}_setDocumentSemanticTokens(e,t,i,s){const o=this._currentDocumentResponse,l=()=>{(s.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!i){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),l();return}if(lb(t)){if(!o){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:o.data};else{let g=0;for(const fe of t.edits)g+=(fe.data?fe.data.length:0)-fe.deleteCount;const k=o.data,H=new Uint32Array(k.length+g);let ee=k.length,ie=H.length;for(let fe=t.edits.length-1;fe>=0;fe--){const Me=t.edits[fe];if(Me.start>k.length){i.warnInvalidEditStart(o.resultId,t.resultId,fe,Me.start,k.length),this._model.tokenization.setSemanticTokens(null,!0);return}const xe=ee-(Me.start+Me.deleteCount);xe>0&&(Dl._copy(k,ee-xe,H,ie-xe,xe),ie-=xe),Me.data&&(Dl._copy(Me.data,0,H,ie-Me.data.length,Me.data.length),ie-=Me.data.length),ee=Me.start}ee>0&&Dl._copy(k,0,H,0,ee),t={resultId:t.resultId,data:H}}}if(Cf(t)){this._currentDocumentResponse=new rx(e,t.resultId,t.data);const g=(0,rb.toMultilineTokens2)(t,i,this._model.getLanguageId());if(s.length>0)for(const k of s)for(const H of g)for(const ee of k.changes)H.applyEdit(ee.range,ee.text);this._model.tokenization.setSemanticTokens(g,!0)}else this._model.tokenization.setSemanticTokens(null,!0);l()}};Q_=Dl=ub([fa(1,K_.ISemanticTokensStylingService),fa(2,$i.Gy),fa(3,Vs.ILanguageFeatureDebounceService),fa(4,_e.ILanguageFeaturesService)],Q_);class rx{constructor(e,t,i){this.provider=e,this.resultId=t,this.data=i}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}(0,Jr.x)(G_);var ax=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},cu=function(h,e){return function(t,i){e(t,i,h)}};let Sf=class extends vt.jG{static{this.ID="editor.contrib.viewportSemanticTokens"}constructor(e,t,i,s,o,l){super(),this._semanticTokensStylingService=t,this._themeService=i,this._configurationService=s,this._editor=e,this._provider=l.documentRangeSemanticTokensProvider,this._debounceInformation=o.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new hi.uC(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const g=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{g()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),g()})),this._register(this._editor.onDidChangeModelContent(k=>{this._cancelAll(),g()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),g()})),this._register(this._configurationService.onDidChangeConfiguration(k=>{k.affectsConfiguration($_)&&(this._cancelAll(),g())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),g()})),g()}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,i=this._outstandingRequests.length;t<i;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!bf(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!ox(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(i=>this._requestRange(e,i)))}_requestRange(e,t){const i=e.getVersionId(),s=(0,hi.SS)(l=>Promise.resolve(j_(this._provider,e,t,l))),o=new eo.W(!1);return s.then(l=>{if(this._debounceInformation.update(e,o.elapsed()),!l||!l.tokens||e.isDisposed()||e.getVersionId()!==i)return;const{provider:g,tokens:k}=l,H=this._semanticTokensStylingService.getStyling(g);e.tokenization.setPartialSemanticTokens(t,(0,rb.toMultilineTokens2)(k,H,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(s),()=>this._removeOutstandingRequest(s)),s}};Sf=ax([cu(1,K_.ISemanticTokensStylingService),cu(2,$i.Gy),cu(3,pt.pG),cu(4,Vs.ILanguageFeatureDebounceService),cu(5,_e.ILanguageFeaturesService)],Sf),(0,we.HW)(Sf.ID,Sf,1);class lx{constructor(e=!0){this.selectSubwords=e}provideSelectionRanges(e,t){const i=[];for(const s of t){const o=[];i.push(o),this.selectSubwords&&this._addInWordRanges(o,e,s),this._addWordRanges(o,e,s),this._addWhitespaceLine(o,e,s),o.push({range:e.getFullModelRange()})}return i}_addInWordRanges(e,t,i){const s=t.getWordAtPosition(i);if(!s)return;const{word:o,startColumn:l}=s,g=i.column-l;let k=g,H=g,ee=0;for(;k>=0;k--){const ie=o.charCodeAt(k);if(k!==g&&(ie===95||ie===45))break;if((0,Vi.Lv)(ie)&&(0,Vi.Wv)(ee))break;ee=ie}for(k+=1;H<o.length;H++){const ie=o.charCodeAt(H);if((0,Vi.Wv)(ie)&&(0,Vi.Lv)(ee))break;if(ie===95||ie===45)break;ee=ie}k<H&&e.push({range:new wt.Q(i.lineNumber,l+k,i.lineNumber,l+H)})}_addWordRanges(e,t,i){const s=t.getWordAtPosition(i);s&&e.push({range:new wt.Q(i.lineNumber,s.startColumn,i.lineNumber,s.endColumn)})}_addWhitespaceLine(e,t,i){t.getLineLength(i.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(i.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(i.lineNumber)===0&&e.push({range:new wt.Q(i.lineNumber,1,i.lineNumber,t.getLineMaxColumn(i.lineNumber))})}}var cx=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},dx=function(h,e){return function(t,i){e(t,i,h)}},Y_;class Z_{constructor(e,t){this.index=e,this.ranges=t}mov(e){const t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const i=new Z_(t,this.ranges);return i.ranges[t].equalsRange(this.ranges[this.index])?i.mov(e):i}}let du=class{static{Y_=this}static{this.ID="editor.contrib.smartSelectController"}static get(e){return e.getContribution(Y_.ID)}constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}dispose(){this._selectionListener?.dispose()}async run(e){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),i=this._editor.getModel();if(this._state||await fb(this._languageFeaturesService.selectionRangeProvider,i,t.map(o=>o.getPosition()),this._editor.getOption(114),Fi.XO.None).then(o=>{if(!(!Xi.EI(o)||o.length!==t.length)&&!(!this._editor.hasModel()||!Xi.aI(this._editor.getSelections(),t,(l,g)=>l.equalsSelection(g)))){for(let l=0;l<o.length;l++)o[l]=o[l].filter(g=>g.containsPosition(t[l].getStartPosition())&&g.containsPosition(t[l].getEndPosition())),o[l].unshift(t[l]);this._state=o.map(l=>new Z_(0,l)),this._selectionListener?.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{this._ignoreSelection||(this._selectionListener?.dispose(),this._state=void 0)})}}),!this._state)return;this._state=this._state.map(o=>o.mov(e));const s=this._state.map(o=>Mi.L.fromPositions(o.ranges[o.index].getStartPosition(),o.ranges[o.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(s)}finally{this._ignoreSelection=!1}}};du=Y_=cx([dx(1,_e.ILanguageFeaturesService)],du);class gb extends we.ks{constructor(e,t){super(t),this._forward=e}async run(e,t){const i=du.get(t);i&&await i.run(this._forward)}}class hx extends gb{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:Z.kg("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:Fe.D8.MenubarSelectionMenu,group:"1_basic",title:Z.kg({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}Di.w.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class ux extends gb{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:Z.kg("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:Fe.D8.MenubarSelectionMenu,group:"1_basic",title:Z.kg({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}(0,we.HW)(du.ID,du,4),(0,we.Fl)(hx),(0,we.Fl)(ux);async function fb(h,e,t,i,s){const o=h.all(e).concat(new lx(i.selectSubwords));o.length===1&&o.unshift(new Cr);const l=[],g=[];for(const k of o)l.push(Promise.resolve(k.provideSelectionRanges(e,t,s)).then(H=>{if(Xi.EI(H)&&H.length===t.length)for(let ee=0;ee<t.length;ee++){g[ee]||(g[ee]=[]);for(const ie of H[ee])wt.Q.isIRange(ie.range)&&wt.Q.containsPosition(ie.range,t[ee])&&g[ee].push(wt.Q.lift(ie.range))}},Ni.M_));return await Promise.all(l),g.map(k=>{if(k.length===0)return[];k.sort((fe,Me)=>ui.y.isBefore(fe.getStartPosition(),Me.getStartPosition())?1:ui.y.isBefore(Me.getStartPosition(),fe.getStartPosition())||ui.y.isBefore(fe.getEndPosition(),Me.getEndPosition())?-1:ui.y.isBefore(Me.getEndPosition(),fe.getEndPosition())?1:0);const H=[];let ee;for(const fe of k)(!ee||wt.Q.containsRange(fe,ee)&&!wt.Q.equalsRange(fe,ee))&&(H.push(fe),ee=fe);if(!i.selectLeadingAndTrailingWhitespace)return H;const ie=[H[0]];for(let fe=1;fe<H.length;fe++){const Me=H[fe-1],xe=H[fe];if(xe.startLineNumber!==Me.startLineNumber||xe.endLineNumber!==Me.endLineNumber){const Qe=new wt.Q(Me.startLineNumber,e.getLineFirstNonWhitespaceColumn(Me.startLineNumber),Me.endLineNumber,e.getLineLastNonWhitespaceColumn(Me.endLineNumber));Qe.containsRange(Me)&&!Qe.equalsRange(Me)&&xe.containsRange(Qe)&&!xe.equalsRange(Qe)&&ie.push(Qe);const ut=new wt.Q(Me.startLineNumber,1,Me.endLineNumber,e.getLineMaxColumn(Me.endLineNumber));ut.containsRange(Me)&&!ut.equalsRange(Qe)&&xe.containsRange(ut)&&!xe.equalsRange(ut)&&ie.push(ut)}ie.push(xe)}return ie})}Di.w.registerCommand("_executeSelectionRangeProvider",async function(h,...e){const[t,i]=e;(0,hn.j)(Ot.r.isUri(t));const s=h.get(_e.ILanguageFeaturesService).selectionRangeProvider,o=await h.get(sr.ITextModelService).createModelReference(t);try{return fb(s,o.object.textEditorModel,i,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},Fi.XO.None)}finally{o.dispose()}});const gx=Object.freeze({View:(0,Z.aS)("view","View"),Help:(0,Z.aS)("help","Help"),Test:(0,Z.aS)("test","Test"),File:(0,Z.aS)("file","File"),Preferences:(0,Z.aS)("preferences","Preferences"),Developer:(0,Z.aS)({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")});var fx=c(22510);class hu{constructor(e,t,i,s=null){this.startLineNumbers=e,this.endLineNumbers=t,this.lastLineRelativePosition=i,this.showEndForLine=s}equals(e){return!!e&&this.lastLineRelativePosition===e.lastLineRelativePosition&&this.showEndForLine===e.showEndForLine&&(0,Xi.aI)(this.startLineNumbers,e.startLineNumbers)&&(0,Xi.aI)(this.endLineNumbers,e.endLineNumbers)}static get Empty(){return new hu([],[],0)}}const mb=(0,Y0.H)("stickyScrollViewLayer",{createHTML:h=>h}),X_="data-sticky-line-index",pb="data-sticky-is-line",mx="data-sticky-is-line-number",_b="data-sticky-is-folding-icon";class px extends vt.jG{constructor(e){super(),this._editor=e,this._foldingIconStore=new vt.Cm,this._rootDomNode=document.createElement("div"),this._lineNumbersDomNode=document.createElement("div"),this._linesDomNodeScrollable=document.createElement("div"),this._linesDomNode=document.createElement("div"),this._lineHeight=this._editor.getOption(67),this._renderedStickyLines=[],this._lineNumbers=[],this._lastLineRelativePosition=0,this._minContentWidthInPx=0,this._isOnGlyphMargin=!1,this._lineNumbersDomNode.className="sticky-widget-line-numbers",this._lineNumbersDomNode.setAttribute("role","none"),this._linesDomNode.className="sticky-widget-lines",this._linesDomNode.setAttribute("role","list"),this._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",this._linesDomNodeScrollable.appendChild(this._linesDomNode),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",e instanceof jo),this._rootDomNode.appendChild(this._lineNumbersDomNode),this._rootDomNode.appendChild(this._linesDomNodeScrollable);const t=()=>{this._linesDomNode.style.left=this._editor.getOption(116).scrollWithEditor?`-${this._editor.getScrollLeft()}px`:"0px"};this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(116)&&t(),i.hasChanged(67)&&(this._lineHeight=this._editor.getOption(67))})),this._register(this._editor.onDidScrollChange(i=>{i.scrollLeftChanged&&t(),i.scrollWidthChanged&&this._updateWidgetWidth()})),this._register(this._editor.onDidChangeModel(()=>{t(),this._updateWidgetWidth()})),this._register(this._foldingIconStore),t(),this._register(this._editor.onDidLayoutChange(i=>{this._updateWidgetWidth()})),this._updateWidgetWidth()}get lineNumbers(){return this._lineNumbers}get lineNumberCount(){return this._lineNumbers.length}getRenderedStickyLine(e){return this._renderedStickyLines.find(t=>t.lineNumber===e)}getCurrentLines(){return this._lineNumbers}setState(e,t,i){if(i===void 0&&(!this._previousState&&!e||this._previousState&&this._previousState.equals(e)))return;const s=this._isWidgetHeightZero(e),o=s?void 0:e,l=s?0:this._findLineToRebuildWidgetFrom(e,i);this._renderRootNode(o,t,l),this._previousState=e}_isWidgetHeightZero(e){if(!e)return!0;const t=e.startLineNumbers.length*this._lineHeight+e.lastLineRelativePosition;if(t>0){this._lastLineRelativePosition=e.lastLineRelativePosition;const i=[...e.startLineNumbers];e.showEndForLine!==null&&(i[e.showEndForLine]=e.endLineNumbers[e.showEndForLine]),this._lineNumbers=i}else this._lastLineRelativePosition=0,this._lineNumbers=[];return t===0}_findLineToRebuildWidgetFrom(e,t){if(!e||!this._previousState)return 0;if(t!==void 0)return t;const i=this._previousState,s=e.startLineNumbers.findIndex(o=>!i.startLineNumbers.includes(o));return s===-1?0:s}_updateWidgetWidth(){const e=this._editor.getLayoutInfo(),t=e.contentLeft;this._lineNumbersDomNode.style.width=`${t}px`,this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth",`${this._editor.getScrollWidth()-e.verticalScrollbarWidth}px`),this._rootDomNode.style.width=`${e.width-e.verticalScrollbarWidth}px`}_clearStickyLinesFromLine(e){this._foldingIconStore.clear();for(let t=e;t<this._renderedStickyLines.length;t++){const i=this._renderedStickyLines[t];i.lineNumberDomNode.remove(),i.lineDomNode.remove()}this._renderedStickyLines=this._renderedStickyLines.slice(0,e),this._rootDomNode.style.display="none"}_useFoldingOpacityTransition(e){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition",`opacity ${e?.5:0}s`)}_setFoldingIconsVisibility(e){for(const t of this._renderedStickyLines){const i=t.foldingIcon;i&&i.setVisible(e?!0:i.isCollapsed)}}async _renderRootNode(e,t,i){if(this._clearStickyLinesFromLine(i),!e)return;for(const g of this._renderedStickyLines)this._updateTopAndZIndexOfStickyLine(g);const s=this._editor.getLayoutInfo(),o=this._lineNumbers.slice(i);for(const[g,k]of o.entries()){const H=this._renderChildNode(g+i,k,t,s);H&&(this._linesDomNode.appendChild(H.lineDomNode),this._lineNumbersDomNode.appendChild(H.lineNumberDomNode),this._renderedStickyLines.push(H))}t&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin));const l=this._lineNumbers.length*this._lineHeight+this._lastLineRelativePosition;this._rootDomNode.style.display="block",this._lineNumbersDomNode.style.height=`${l}px`,this._linesDomNodeScrollable.style.height=`${l}px`,this._rootDomNode.style.height=`${l}px`,this._rootDomNode.style.marginLeft="0px",this._minContentWidthInPx=Math.max(...this._renderedStickyLines.map(g=>g.scrollWidth))+s.verticalScrollbarWidth,this._editor.layoutOverlayWidget(this)}_setFoldingHoverListeners(){this._editor.getOption(111)==="mouseover"&&(this._foldingIconStore.add(Se.ko(this._lineNumbersDomNode,Se.Bx.MOUSE_ENTER,()=>{this._isOnGlyphMargin=!0,this._setFoldingIconsVisibility(!0)})),this._foldingIconStore.add(Se.ko(this._lineNumbersDomNode,Se.Bx.MOUSE_LEAVE,()=>{this._isOnGlyphMargin=!1,this._useFoldingOpacityTransition(!0),this._setFoldingIconsVisibility(!1)})))}_renderChildNode(e,t,i,s){const o=this._editor._getViewModel();if(!o)return;const l=o.coordinatesConverter.convertModelPositionToViewPosition(new ui.y(t,1)).lineNumber,g=o.getViewLineRenderingData(l),k=this._editor.getOption(68);let H;try{H=Uh.d.filter(g.inlineDecorations,l,g.minColumn,g.maxColumn)}catch{H=[]}const ee=new Tg.zL(!0,!0,g.content,g.continuesWithWrappedLine,g.isBasicASCII,g.containsRTL,0,g.tokens,H,g.tabSize,g.startVisibleColumn,1,1,1,500,"none",!0,!0,null),ie=new X0.fe(2e3),fe=(0,Tg.UW)(ee,ie);let Me;mb?Me=mb.createHTML(ie.build()):Me=ie.build();const xe=document.createElement("span");xe.setAttribute(X_,String(e)),xe.setAttribute(pb,""),xe.setAttribute("role","listitem"),xe.tabIndex=0,xe.className="sticky-line-content",xe.classList.add(`stickyLine${t}`),xe.style.lineHeight=`${this._lineHeight}px`,xe.innerHTML=Me;const Qe=document.createElement("span");Qe.setAttribute(X_,String(e)),Qe.setAttribute(mx,""),Qe.className="sticky-line-number",Qe.style.lineHeight=`${this._lineHeight}px`;const ut=s.contentLeft;Qe.style.width=`${ut}px`;const Lt=document.createElement("span");k.renderType===1||k.renderType===3&&t%10===0?Lt.innerText=t.toString():k.renderType===2&&(Lt.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),Lt.className="sticky-line-number-inner",Lt.style.lineHeight=`${this._lineHeight}px`,Lt.style.width=`${s.lineNumbersWidth}px`,Lt.style.paddingLeft=`${s.lineNumbersLeft}px`,Qe.appendChild(Lt);const kt=this._renderFoldingIconForLine(i,t);kt&&Qe.appendChild(kt.domNode),this._editor.applyFontInfo(xe),this._editor.applyFontInfo(Lt),Qe.style.lineHeight=`${this._lineHeight}px`,xe.style.lineHeight=`${this._lineHeight}px`,Qe.style.height=`${this._lineHeight}px`,xe.style.height=`${this._lineHeight}px`;const ni=new _x(e,t,xe,Qe,kt,fe.characterMapping,xe.scrollWidth);return this._updateTopAndZIndexOfStickyLine(ni)}_updateTopAndZIndexOfStickyLine(e){const t=e.index,i=e.lineDomNode,s=e.lineNumberDomNode,o=t===this._lineNumbers.length-1,l="0",g="1";i.style.zIndex=o?l:g,s.style.zIndex=o?l:g;const k=`${t*this._lineHeight+this._lastLineRelativePosition+(e.foldingIcon?.isCollapsed?1:0)}px`,H=`${t*this._lineHeight}px`;return i.style.top=o?k:H,s.style.top=o?k:H,e}_renderFoldingIconForLine(e,t){const i=this._editor.getOption(111);if(!e||i==="never")return;const s=e.regions,o=s.findRange(t),l=s.getStartLineNumber(o);if(!(t===l))return;const k=s.isCollapsed(o),H=new vx(k,l,s.getEndLineNumber(o),this._lineHeight);return H.setVisible(this._isOnGlyphMargin?!0:k||i==="always"),H.domNode.setAttribute(_b,""),H}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:2,stackOridinal:10}}getMinContentWidthInPx(){return this._minContentWidthInPx}focusLineWithIndex(e){0<=e&&e<this._renderedStickyLines.length&&this._renderedStickyLines[e].lineDomNode.focus()}getEditorPositionFromNode(e){if(!e||e.children.length>0)return null;const t=this._getRenderedStickyLineFromChildDomNode(e);if(!t)return null;const i=(0,fx.rk)(t.characterMapping,e,0);return new ui.y(t.lineNumber,i)}getLineNumberFromChildDomNode(e){return this._getRenderedStickyLineFromChildDomNode(e)?.lineNumber??null}_getRenderedStickyLineFromChildDomNode(e){const t=this.getLineIndexFromChildDomNode(e);return t===null||t<0||t>=this._renderedStickyLines.length?null:this._renderedStickyLines[t]}getLineIndexFromChildDomNode(e){const t=this._getAttributeValue(e,X_);return t?parseInt(t,10):null}isInStickyLine(e){return this._getAttributeValue(e,pb)!==void 0}isInFoldingIconDomNode(e){return this._getAttributeValue(e,_b)!==void 0}_getAttributeValue(e,t){for(;e&&e!==this._rootDomNode;){const i=e.getAttribute(t);if(i!==null)return i;e=e.parentElement}}}class _x{constructor(e,t,i,s,o,l,g){this.index=e,this.lineNumber=t,this.lineDomNode=i,this.lineNumberDomNode=s,this.foldingIcon=o,this.characterMapping=l,this.scrollWidth=g}}class vx{constructor(e,t,i,s){this.isCollapsed=e,this.foldingStartLine=t,this.foldingEndLine=i,this.dimension=s,this.domNode=document.createElement("div"),this.domNode.style.width=`${s}px`,this.domNode.style.height=`${s}px`,this.domNode.className=mn.L.asClassName(e?Dg:Lg)}setVisible(e){this.domNode.style.cursor=e?"pointer":"default",this.domNode.style.opacity=e?"1":"0"}}class uu{constructor(e,t){this.startLineNumber=e,this.endLineNumber=t}}class wf{constructor(e,t,i){this.range=e,this.children=t,this.parent=i}}class vb{constructor(e,t,i,s){this.uri=e,this.version=t,this.element=i,this.outlineProviderId=s}}var yf=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},gu=function(h,e){return function(t,i){e(t,i,h)}},fu;(function(h){h.OUTLINE_MODEL="outlineModel",h.FOLDING_PROVIDER_MODEL="foldingProviderModel",h.INDENTATION_MODEL="indentationModel"})(fu||(fu={}));var El;(function(h){h[h.VALID=0]="VALID",h[h.INVALID=1]="INVALID",h[h.CANCELED=2]="CANCELED"})(El||(El={}));let J_=class extends vt.jG{constructor(e,t,i,s){switch(super(),this._editor=e,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=this._register(new hi.ve(300)),this._updateOperation=this._register(new vt.Cm),this._editor.getOption(116).defaultModel){case fu.OUTLINE_MODEL:this._modelProviders.push(new q_(this._editor,s));case fu.FOLDING_PROVIDER_MODEL:this._modelProviders.push(new tv(this._editor,t,s));case fu.INDENTATION_MODEL:this._modelProviders.push(new ev(this._editor,i));break}}dispose(){this._modelProviders.forEach(e=>e.dispose()),this._updateOperation.clear(),this._cancelModelPromise(),super.dispose()}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}async update(e){return this._updateOperation.clear(),this._updateOperation.add({dispose:()=>{this._cancelModelPromise(),this._updateScheduler.cancel()}}),this._cancelModelPromise(),await this._updateScheduler.trigger(async()=>{for(const t of this._modelProviders){const{statusPromise:i,modelPromise:s}=t.computeStickyModel(e);this._modelPromise=s;const o=await i;if(this._modelPromise!==s)return null;switch(o){case El.CANCELED:return this._updateOperation.clear(),null;case El.VALID:return t.stickyModel}}return null}).catch(t=>((0,Ni.dz)(t),null))}};J_=yf([gu(2,Ri._Y),gu(3,_e.ILanguageFeaturesService)],J_);class Cb extends vt.jG{constructor(e){super(),this._editor=e,this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,El.INVALID}computeStickyModel(e){if(e.isCancellationRequested||!this.isProviderValid())return{statusPromise:this._invalid(),modelPromise:null};const t=(0,hi.SS)(i=>this.createModelFromProvider(i));return{statusPromise:t.then(i=>this.isModelValid(i)?e.isCancellationRequested?El.CANCELED:(this._stickyModel=this.createStickyModel(e,i),El.VALID):this._invalid()).then(void 0,i=>((0,Ni.dz)(i),El.CANCELED)),modelPromise:t}}isModelValid(e){return!0}isProviderValid(){return!0}}let q_=class extends Cb{constructor(e,t){super(e),this._languageFeaturesService=t}createModelFromProvider(e){return Ba.create(this._languageFeaturesService.documentSymbolProvider,this._editor.getModel(),e)}createStickyModel(e,t){const{stickyOutlineElement:i,providerID:s}=this._stickyModelFromOutlineModel(t,this._stickyModel?.outlineProviderId),o=this._editor.getModel();return new vb(o.uri,o.getVersionId(),i,s)}isModelValid(e){return e&&e.children.size>0}_stickyModelFromOutlineModel(e,t){let i;if(os.f.first(e.children.values())instanceof $0){const g=os.f.find(e.children.values(),k=>k.id===t);if(g)i=g.children;else{let k="",H=-1,ee;for(const[ie,fe]of e.children.entries()){const Me=this._findSumOfRangesOfGroup(fe);Me>H&&(ee=fe,H=Me,k=fe.id)}t=k,i=ee.children}}else i=e.children;const s=[],o=Array.from(i.values()).sort((g,k)=>{const H=new uu(g.symbol.range.startLineNumber,g.symbol.range.endLineNumber),ee=new uu(k.symbol.range.startLineNumber,k.symbol.range.endLineNumber);return this._comparator(H,ee)});for(const g of o)s.push(this._stickyModelFromOutlineElement(g,g.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new wf(void 0,s,void 0),providerID:t}}_stickyModelFromOutlineElement(e,t){const i=[];for(const o of e.children.values())if(o.symbol.selectionRange.startLineNumber!==o.symbol.range.endLineNumber)if(o.symbol.selectionRange.startLineNumber!==t)i.push(this._stickyModelFromOutlineElement(o,o.symbol.selectionRange.startLineNumber));else for(const l of o.children.values())i.push(this._stickyModelFromOutlineElement(l,o.symbol.selectionRange.startLineNumber));i.sort((o,l)=>this._comparator(o.range,l.range));const s=new uu(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber);return new wf(s,i,void 0)}_comparator(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}_findSumOfRangesOfGroup(e){let t=0;for(const i of e.children.values())t+=this._findSumOfRangesOfGroup(i);return e instanceof rp?t+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:t}};q_=yf([gu(1,_e.ILanguageFeaturesService)],q_);class bb extends Cb{constructor(e){super(e),this._foldingLimitReporter=new z0(e)}createStickyModel(e,t){const i=this._fromFoldingRegions(t),s=this._editor.getModel();return new vb(s.uri,s.getVersionId(),i,void 0)}isModelValid(e){return e!==null}_fromFoldingRegions(e){const t=e.length,i=[],s=new wf(void 0,[],void 0);for(let o=0;o<t;o++){const l=e.getParentIndex(o);let g;l!==-1?g=i[l]:g=s;const k=new wf(new uu(e.getStartLineNumber(o),e.getEndLineNumber(o)+1),[],g);g.children.push(k),i.push(k)}return s}}let ev=class extends bb{constructor(e,t){super(e),this._languageConfigurationService=t,this.provider=this._register(new ip(e.getModel(),this._languageConfigurationService,this._foldingLimitReporter))}async createModelFromProvider(e){return this.provider.compute(e)}};ev=yf([gu(1,Us.JZ)],ev);let tv=class extends bb{constructor(e,t,i){super(e),this._languageFeaturesService=i;const s=pl.getFoldingRangeProviders(this._languageFeaturesService,e.getModel());s.length>0&&(this.provider=this._register(new sp(e.getModel(),s,t,this._foldingLimitReporter,void 0)))}isProviderValid(){return this.provider!==void 0}async createModelFromProvider(e){return this.provider?.compute(e)??null}};tv=yf([gu(2,_e.ILanguageFeaturesService)],tv);var Cx=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Sb=function(h,e){return function(t,i){e(t,i,h)}};class bx{constructor(e,t,i){this.startLineNumber=e,this.endLineNumber=t,this.nestingDepth=i}}let iv=class extends vt.jG{constructor(e,t,i){super(),this._languageFeaturesService=t,this._languageConfigurationService=i,this._onDidChangeStickyScroll=this._register(new zi.vl),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=e,this._sessionStore=this._register(new vt.Cm),this._updateSoon=this._register(new hi.uC(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(116)&&this.readConfiguration()})),this.readConfiguration()}readConfiguration(){this._sessionStore.clear(),this._editor.getOption(116).enabled&&(this._sessionStore.add(this._editor.onDidChangeModel(()=>{this._model=null,this.updateStickyModelProvider(),this._onDidChangeStickyScroll.fire(),this.update()})),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this._sessionStore.add((0,vt.s)(()=>{this._stickyModelProvider?.dispose(),this._stickyModelProvider=null})),this.updateStickyModelProvider(),this.update())}getVersionId(){return this._model?.version}updateStickyModelProvider(){this._stickyModelProvider?.dispose(),this._stickyModelProvider=null;const e=this._editor;e.hasModel()&&(this._stickyModelProvider=new J_(e,()=>this._updateSoon.schedule(),this._languageConfigurationService,this._languageFeaturesService))}async update(){this._cts?.dispose(!0),this._cts=new Fi.Qi,await this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()}async updateStickyModel(e){if(!this._editor.hasModel()||!this._stickyModelProvider||this._editor.getModel().isTooLargeForTokenization()){this._model=null;return}const t=await this._stickyModelProvider.update(e);e.isCancellationRequested||(this._model=t)}updateIndex(e){return e===-1?e=0:e<0&&(e=-e-2),e}getCandidateStickyLinesIntersectingFromStickyModel(e,t,i,s,o){if(t.children.length===0)return;let l=o;const g=[];for(let ee=0;ee<t.children.length;ee++){const ie=t.children[ee];ie.range&&g.push(ie.range.startLineNumber)}const k=this.updateIndex((0,Xi.El)(g,e.startLineNumber,(ee,ie)=>ee-ie)),H=this.updateIndex((0,Xi.El)(g,e.startLineNumber+s,(ee,ie)=>ee-ie));for(let ee=k;ee<=H;ee++){const ie=t.children[ee];if(!ie)return;if(ie.range){const fe=ie.range.startLineNumber,Me=ie.range.endLineNumber;e.startLineNumber<=Me+1&&fe-1<=e.endLineNumber&&fe!==l&&(l=fe,i.push(new bx(fe,Me-1,s+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,ie,i,s+1,fe))}else this.getCandidateStickyLinesIntersectingFromStickyModel(e,ie,i,s,o)}}getCandidateStickyLinesIntersecting(e){if(!this._model?.element)return[];let t=[];this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,t,0,-1);const i=this._editor._getViewModel()?.getHiddenAreas();if(i)for(const s of i)t=t.filter(o=>!(o.startLineNumber>=s.startLineNumber&&o.endLineNumber<=s.endLineNumber+1));return t}};iv=Cx([Sb(1,_e.ILanguageFeaturesService),Sb(2,Us.JZ)],iv);var Sx=c(25334),wx=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Gd=function(h,e){return function(t,i){e(t,i,h)}},nv;let Ka=class extends vt.jG{static{nv=this}static{this.ID="store.contrib.stickyScrollController"}constructor(e,t,i,s,o,l,g){super(),this._editor=e,this._contextMenuService=t,this._languageFeaturesService=i,this._instaService=s,this._contextKeyService=g,this._sessionStore=new vt.Cm,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._endLineNumbers=[],this._stickyScrollWidget=new px(this._editor),this._stickyLineCandidateProvider=new iv(this._editor,i,o),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=hu.Empty,this._onDidResize(),this._readConfiguration();const k=this._stickyScrollWidget.getDomNode();this._register(this._editor.onDidChangeConfiguration(ee=>{this._readConfigurationChange(ee)})),this._register(Se.ko(k,Se.Bx.CONTEXT_MENU,async ee=>{this._onContextMenu(Se.zk(k),ee)})),this._stickyScrollFocusedContextKey=ke.R.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=ke.R.stickyScrollVisible.bindTo(this._contextKeyService);const H=this._register(Se.w5(k));this._register(H.onDidBlur(ee=>{this._positionRevealed===!1&&k.clientHeight===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(H.onDidFocus(ee=>{this.focus()})),this._registerMouseListeners(),this._register(Se.ko(k,Se.Bx.MOUSE_DOWN,ee=>{this._onMouseDown=!0}))}static get(e){return e.getContribution(nv.ID)}_disposeFocusStickyScrollStore(){this._stickyScrollFocusedContextKey.set(!1),this._focusDisposableStore?.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown){this._onMouseDown=!1,this._editor.focus();return}this._stickyScrollFocusedContextKey.get()!==!0&&(this._focused=!0,this._focusDisposableStore=new vt.Cm,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}focusNext(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}goToFocused(){const e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}_revealPosition(e){this._reveaInEditor(e,()=>this._editor.revealPosition(e))}_revealLineInCenterIfOutsideViewport(e){this._reveaInEditor(e,()=>this._editor.revealLineInCenterIfOutsideViewport(e.lineNumber,0))}_reveaInEditor(e,t){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,t(),this._editor.setSelection(wt.Q.fromPositions(e)),this._editor.focus()}_registerMouseListeners(){const e=this._register(new vt.Cm),t=this._register(new hl(this._editor,{extractLineNumberFromMouseEvent:o=>{const l=this._stickyScrollWidget.getEditorPositionFromNode(o.target.element);return l?l.lineNumber:0}})),i=o=>{if(!this._editor.hasModel()||o.target.type!==12||o.target.detail!==this._stickyScrollWidget.getId())return null;const l=o.target.element;if(!l||l.innerText!==l.innerHTML)return null;const g=this._stickyScrollWidget.getEditorPositionFromNode(l);return g?{range:new wt.Q(g.lineNumber,g.column,g.lineNumber,g.column+l.innerText.length),textElement:l}:null},s=this._stickyScrollWidget.getDomNode();this._register(Se.b2(s,Se.Bx.CLICK,o=>{if(o.ctrlKey||o.altKey||o.metaKey||!o.leftButton)return;if(o.shiftKey){const H=this._stickyScrollWidget.getLineIndexFromChildDomNode(o.target);if(H===null)return;const ee=new ui.y(this._endLineNumbers[H],1);this._revealLineInCenterIfOutsideViewport(ee);return}if(this._stickyScrollWidget.isInFoldingIconDomNode(o.target)){const H=this._stickyScrollWidget.getLineNumberFromChildDomNode(o.target);this._toggleFoldingRegionForLine(H);return}if(!this._stickyScrollWidget.isInStickyLine(o.target))return;let k=this._stickyScrollWidget.getEditorPositionFromNode(o.target);if(!k){const H=this._stickyScrollWidget.getLineNumberFromChildDomNode(o.target);if(H===null)return;k=new ui.y(H,1)}this._revealPosition(k)})),this._register(Se.b2(s,Se.Bx.MOUSE_MOVE,o=>{if(o.shiftKey){const l=this._stickyScrollWidget.getLineIndexFromChildDomNode(o.target);if(l===null||this._showEndForLine!==null&&this._showEndForLine===l)return;this._showEndForLine=l,this._renderStickyScroll();return}this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register(Se.ko(s,Se.Bx.MOUSE_LEAVE,o=>{this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register(t.onMouseMoveOrRelevantKeyDown(([o,l])=>{const g=i(o);if(!g||!o.hasTriggerModifier||!this._editor.hasModel()){e.clear();return}const{range:k,textElement:H}=g;if(!k.equalsRange(this._stickyRangeProjectedOnEditor))this._stickyRangeProjectedOnEditor=k,e.clear();else if(H.style.textDecoration==="underline")return;const ee=new Fi.Qi;e.add((0,vt.s)(()=>ee.dispose(!0)));let ie;hs(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new ui.y(k.startLineNumber,k.startColumn+1),!1,ee.token).then(fe=>{if(!ee.token.isCancellationRequested)if(fe.length!==0){this._candidateDefinitionsLength=fe.length;const Me=H;ie!==Me?(e.clear(),ie=Me,ie.style.textDecoration="underline",e.add((0,vt.s)(()=>{ie.style.textDecoration="none"}))):ie||(ie=Me,ie.style.textDecoration="underline",e.add((0,vt.s)(()=>{ie.style.textDecoration="none"})))}else e.clear()})})),this._register(t.onCancel(()=>{e.clear()})),this._register(t.onExecute(async o=>{if(o.target.type!==12||o.target.detail!==this._stickyScrollWidget.getId())return;const l=this._stickyScrollWidget.getEditorPositionFromNode(o.target.element);l&&(!this._editor.hasModel()||!this._stickyRangeProjectedOnEditor||(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:l.lineNumber,column:1})),this._instaService.invokeFunction(n0,o,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor})))}))}_onContextMenu(e,t){const i=new Sx.P(e,t);this._contextMenuService.showContextMenu({menuId:Fe.D8.StickyScrollContext,getAnchor:()=>i})}_toggleFoldingRegionForLine(e){if(!this._foldingModel||e===null)return;const t=this._stickyScrollWidget.getRenderedStickyLine(e),i=t?.foldingIcon;if(!i)return;qm(this._foldingModel,Number.MAX_VALUE,[e]),i.isCollapsed=!i.isCollapsed;const s=(i.isCollapsed?this._editor.getTopForLineNumber(i.foldingEndLine):this._editor.getTopForLineNumber(i.foldingStartLine))-this._editor.getOption(67)*t.index+1;this._editor.setScrollTop(s),this._renderStickyScroll(e)}_readConfiguration(){const e=this._editor.getOption(116);if(e.enabled===!1){this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),this._enabled=!1;return}else e.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(i=>{i.scrollTopChanged&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(i=>this._onTokensChange(i))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>{this._showEndForLine=void 0,this._renderStickyScroll()})),this._enabled=!0);this._editor.getOption(68).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>{this._showEndForLine=void 0,this._renderStickyScroll(0)}))}_readConfigurationChange(e){(e.hasChanged(116)||e.hasChanged(73)||e.hasChanged(67)||e.hasChanged(111)||e.hasChanged(68))&&this._readConfiguration(),e.hasChanged(68)&&this._renderStickyScroll(0)}_needsUpdate(e){const t=this._stickyScrollWidget.getCurrentLines();for(const i of t)for(const s of e.ranges)if(i>=s.fromLineNumber&&i<=s.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._renderStickyScroll(0)}_onDidResize(){const t=this._editor.getLayoutInfo().height/this._editor.getOption(67);this._maxStickyLines=Math.round(t*.25)}async _renderStickyScroll(e){const t=this._editor.getModel();if(!t||t.isTooLargeForTokenization()){this._resetState();return}const i=this._updateAndGetMinRebuildFromLine(e),s=this._stickyLineCandidateProvider.getVersionId();if(s===void 0||s===t.getVersionId())if(!this._focused)await this._updateState(i);else if(this._focusedStickyElementIndex===-1)await this._updateState(i),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,this._focusedStickyElementIndex!==-1&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{const l=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];await this._updateState(i),this._stickyScrollWidget.lineNumberCount===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(l)||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}}_updateAndGetMinRebuildFromLine(e){if(e!==void 0){const t=this._minRebuildFromLine!==void 0?this._minRebuildFromLine:1/0;this._minRebuildFromLine=Math.min(e,t)}return this._minRebuildFromLine}async _updateState(e){this._minRebuildFromLine=void 0,this._foldingModel=await pl.get(this._editor)?.getFoldingModel()??void 0,this._widgetState=this.findScrollWidgetState();const t=this._widgetState.startLineNumbers.length>0;this._stickyScrollVisibleContextKey.set(t),this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e)}async _resetState(){this._minRebuildFromLine=void 0,this._foldingModel=void 0,this._widgetState=hu.Empty,this._stickyScrollVisibleContextKey.set(!1),this._stickyScrollWidget.setState(void 0,void 0)}findScrollWidgetState(){const e=this._editor.getOption(67),t=Math.min(this._maxStickyLines,this._editor.getOption(116).maxLineCount),i=this._editor.getScrollTop();let s=0;const o=[],l=[],g=this._editor.getVisibleRanges();if(g.length!==0){const k=new uu(g[0].startLineNumber,g[g.length-1].endLineNumber),H=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(k);for(const ee of H){const ie=ee.startLineNumber,fe=ee.endLineNumber,Me=ee.nestingDepth;if(fe-ie>0){const xe=(Me-1)*e,Qe=Me*e,ut=this._editor.getBottomForLineNumber(ie)-i,Lt=this._editor.getTopForLineNumber(fe)-i,kt=this._editor.getBottomForLineNumber(fe)-i;if(xe>Lt&&xe<=kt){o.push(ie),l.push(fe+1),s=kt-Qe;break}else Qe>ut&&Qe<=kt&&(o.push(ie),l.push(fe+1));if(o.length===t)break}}}return this._endLineNumbers=l,new hu(o,l,s,this._showEndForLine)}dispose(){super.dispose(),this._sessionStore.dispose()}};Ka=nv=wx([Gd(1,vn.Z),Gd(2,_e.ILanguageFeaturesService),Gd(3,Ri._Y),Gd(4,Us.JZ),Gd(5,Vs.ILanguageFeatureDebounceService),Gd(6,et.fN)],Ka);class yx extends Fe.L{constructor(){super({id:"editor.action.toggleStickyScroll",title:{...(0,Z.aS)("toggleEditorStickyScroll","Toggle Editor Sticky Scroll"),mnemonicTitle:(0,Z.kg)({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Editor Sticky Scroll")},metadata:{description:(0,Z.aS)("toggleEditorStickyScroll.description","Toggle/enable the editor sticky scroll which shows the nested scopes at the top of the viewport")},category:gx.View,toggled:{condition:et.M$.equals("config.editor.stickyScroll.enabled",!0),title:(0,Z.kg)("stickyScroll","Sticky Scroll"),mnemonicTitle:(0,Z.kg)({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:Fe.D8.CommandPalette},{id:Fe.D8.MenubarAppearanceMenu,group:"4_editor",order:3},{id:Fe.D8.StickyScrollContext}]})}async run(e){const t=e.get(pt.pG),i=!t.getValue("editor.stickyScroll.enabled");return t.updateValue("editor.stickyScroll.enabled",i)}}const Lf=100;class Lx extends we.qO{constructor(){super({id:"editor.action.focusStickyScroll",title:{...(0,Z.aS)("focusStickyScroll","Focus on the editor sticky scroll"),mnemonicTitle:(0,Z.kg)({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll")},precondition:et.M$.and(et.M$.has("config.editor.stickyScroll.enabled"),ke.R.stickyScrollVisible),menu:[{id:Fe.D8.CommandPalette}]})}runEditorCommand(e,t){Ka.get(t)?.focus()}}class Dx extends we.qO{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:(0,Z.aS)("selectNextStickyScrollLine.title","Select the next editor sticky scroll line"),precondition:ke.R.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:Lf,primary:18}})}runEditorCommand(e,t){Ka.get(t)?.focusNext()}}class Ex extends we.qO{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:(0,Z.aS)("selectPreviousStickyScrollLine.title","Select the previous sticky scroll line"),precondition:ke.R.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:Lf,primary:16}})}runEditorCommand(e,t){Ka.get(t)?.focusPrevious()}}class xx extends we.qO{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:(0,Z.aS)("goToFocusedStickyScrollLine.title","Go to the focused sticky scroll line"),precondition:ke.R.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:Lf,primary:3}})}runEditorCommand(e,t){Ka.get(t)?.goToFocused()}}class kx extends we.qO{constructor(){super({id:"editor.action.selectEditor",title:(0,Z.aS)("selectEditor.title","Select Editor"),precondition:ke.R.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:Lf,primary:9}})}runEditorCommand(e,t){Ka.get(t)?.selectEditor()}}(0,we.HW)(Ka.ID,Ka,1),(0,Fe.ug)(yx),(0,Fe.ug)(Lx),(0,Fe.ug)(Ex),(0,Fe.ug)(Dx),(0,Fe.ug)(xx),(0,Fe.ug)(kx);var wb=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},mu=function(h,e){return function(t,i){e(t,i,h)}};class Ix{constructor(e,t,i,s,o,l){this.range=e,this.insertText=t,this.filterText=i,this.additionalTextEdits=s,this.command=o,this.completion=l}}let sv=class extends vt.mp{constructor(e,t,i,s,o,l){super(o.disposable),this.model=e,this.line=t,this.word=i,this.completionModel=s,this._suggestMemoryService=l}canBeReused(e,t,i){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===i.startColumn&&this.word.endColumn<i.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){const e=[],{items:t}=this.completionModel,i=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},t),s=os.f.slice(t,i),o=os.f.slice(t,0,i);let l=5;for(const g of os.f.concat(s,o)){if(g.score===Xs.ne.Default)continue;const k=new wt.Q(g.editStart.lineNumber,g.editStart.column,g.editInsertEnd.lineNumber,g.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),H=g.completion.insertTextRules&&g.completion.insertTextRules&4?{snippet:g.completion.insertText}:g.completion.insertText;e.push(new Ix(k,H,g.filterTextLow??g.labelLow,g.completion.additionalTextEdits,g.completion.command,g)),l-->=0&&g.resolve(Fi.XO.None)}return e}};sv=wb([mu(5,Ug)],sv);let ov=class extends vt.jG{constructor(e,t,i,s){super(),this._languageFeatureService=e,this._clipboardService=t,this._suggestMemoryService=i,this._editorService=s,this._store.add(e.inlineCompletionsProvider.register("*",this))}async provideInlineCompletions(e,t,i,s){if(i.selectedSuggestionInfo)return;let o;for(const Me of this._editorService.listCodeEditors())if(Me.getModel()===e){o=Me;break}if(!o)return;const l=o.getOption(90);if(xd.isAllOff(l))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const g=e.tokenization.getLineTokens(t.lineNumber),k=g.getStandardTokenType(g.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(xd.valueFor(l,k)!=="inline")return;let H=e.getWordAtPosition(t),ee;if(H?.word||(ee=this._getTriggerCharacterInfo(e,t)),!H?.word&&!ee||(H||(H=e.getWordUntilPosition(t)),H.endColumn!==t.column))return;let ie;const fe=e.getValueInRange(new wt.Q(t.lineNumber,1,t.lineNumber,t.column));if(!ee&&this._lastResult?.canBeReused(e,t.lineNumber,H)){const Me=new kC(fe,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=Me,this._lastResult.acquire(),ie=this._lastResult}else{const Me=await up(this._languageFeatureService.completionProvider,e,t,new jh(void 0,jg.createSuggestFilter(o).itemKind,ee?.providers),ee&&{triggerKind:1,triggerCharacter:ee.ch},s);let xe;Me.needsClipboard&&(xe=await this._clipboardService.readText());const Qe=new Cl(Me.items,t.column,new kC(fe,0),ua.None,o.getOption(119),o.getOption(113),{boostFullMatch:!1,firstMatchCanBeWeak:!1},xe);ie=new sv(e,t.lineNumber,H,Qe,Me,this._suggestMemoryService)}return this._lastResult=ie,ie}handleItemDidShow(e,t){t.completion.resolve(Fi.XO.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){const i=e.getValueInRange(wt.Q.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),s=new Set;for(const o of this._languageFeatureService.completionProvider.all(e))o.triggerCharacters?.includes(i)&&s.add(o);if(s.size!==0)return{providers:s,ch:i}}};ov=wb([mu(0,_e.ILanguageFeaturesService),mu(1,lr.h),mu(2,Ug),mu(3,Xt.T)],ov),(0,Jr.x)(ov);class Mx extends we.ks{constructor(){super({id:"editor.action.forceRetokenize",label:Z.kg("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getModel();i.tokenization.resetTokenization();const s=new eo.W;i.tokenization.forceTokenization(i.getLineCount()),s.stop()}}(0,we.Fl)(Mx);var yb=c(29552);class rv extends Fe.L{static{this.ID="editor.action.toggleTabFocusMode"}constructor(){super({id:rv.ID,title:Z.aS({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},metadata:{description:Z.aS("tabMovesFocusDescriptions","Determines whether the tab key moves focus around the workbench or inserts the tab character in the current editor. This is also called tab trapping, tab navigation, or tab focus mode.")},f1:!0})}run(){const t=!yb.M.getTabFocusMode();yb.M.setTabFocusMode(t),t?(0,dn.xE)(Z.kg("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element")):(0,dn.xE)(Z.kg("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}(0,Fe.ug)(rv);var Lb=c(90128),Qd=c(36389),av=c(89530),Nx=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Db=function(h,e){return function(t,i){e(t,i,h)}};let lv=class extends vt.jG{get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}constructor(e,t,i={},s,o){super(),this._link=t,this._hoverService=s,this._enabled=!0,this.el=(0,Se.BC)(e,(0,Se.$)("a.monaco-link",{tabIndex:t.tabIndex??0,href:t.href},t.label)),this.hoverDelegate=i.hoverDelegate??(0,dc.nZ)("mouse"),this.setTooltip(t.title),this.el.setAttribute("role","button");const l=this._register(new av.f(this.el,"click")),g=this._register(new av.f(this.el,"keypress")),k=zi.Jh.chain(g.event,ie=>ie.map(fe=>new W_.Z(fe)).filter(fe=>fe.keyCode===3)),H=this._register(new av.f(this.el,qo.B.Tap)).event;this._register(qo.q.addTarget(this.el));const ee=zi.Jh.any(l.event,k,H);this._register(ee(ie=>{this.enabled&&(Se.fs.stop(ie,!0),i?.opener?i.opener(this._link.href):o.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}setTooltip(e){this.hoverDelegate.showNativeHover?this.el.title=e??"":!this.hover&&e?this.hover=this._register(this._hoverService.setupManagedHover(this.hoverDelegate,this.el,e)):this.hover&&this.hover.update(e)}};lv=Nx([Db(3,ll.TN),Db(4,Qs.C)],lv);var Eb=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},xb=function(h,e){return function(t,i){e(t,i,h)}};const Tx=26;let cv=class extends vt.jG{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(dv))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show({...e,onClose:()=>{this.hide(),e.onClose?.()}}),this._editor.setBanner(this.banner.element,Tx)}};cv=Eb([xb(1,Ri._Y)],cv);let dv=class extends vt.jG{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(Ps.T,{}),this.element=(0,Se.$)("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=(0,Se.$)("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){(0,Se.w_)(this.element)}show(e){(0,Se.w_)(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const i=(0,Se.BC)(this.element,(0,Se.$)("div.icon-container"));i.setAttribute("aria-hidden","true"),e.icon&&i.appendChild((0,Se.$)(`div${mn.L.asCSSSelector(e.icon)}`));const s=(0,Se.BC)(this.element,(0,Se.$)("div.message-container"));if(s.setAttribute("aria-hidden","true"),s.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=(0,Se.BC)(this.element,(0,Se.$)("div.message-actions-container")),e.actions)for(const l of e.actions)this._register(this.instantiationService.createInstance(lv,this.messageActionsContainer,{...l,tabIndex:-1},{}));const o=(0,Se.BC)(this.element,(0,Se.$)("div.action-container"));this.actionBar=this._register(new Xr.E(o)),this.actionBar.push(this._register(new Js.rc("banner.close","Close Banner",mn.L.asClassName(rs.$_),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};dv=Eb([xb(0,Ri._Y)],dv);var Rx=c(34918),hv=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Yd=function(h,e){return function(t,i){e(t,i,h)}};const Px=(0,rs.pU)("extensions-warning-message",Dt.W.warning,Z.kg("warningIcon","Icon shown with a warning message in the extensions editor."));let pu=class extends vt.jG{static{this.ID="editor.contrib.unicodeHighlighter"}constructor(e,t,i,s){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=i,this._highlighter=null,this._bannerClosed=!1,this._updateState=o=>{if(o&&o.hasMore){if(this._bannerClosed)return;const l=Math.max(o.ambiguousCharacterCount,o.nonBasicAsciiCharacterCount,o.invisibleCharacterCount);let g;if(o.nonBasicAsciiCharacterCount>=l)g={message:Z.kg("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new vu};else if(o.ambiguousCharacterCount>=l)g={message:Z.kg("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new wc};else if(o.invisibleCharacterCount>=l)g={message:Z.kg("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new _u};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:g.message,icon:Px,actions:[{label:g.command.shortLabel,href:`command:${g.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(s.createInstance(cv,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(126),this._register(i.onDidChangeTrust(o=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(o=>{o.hasChanged(126)&&(this._options=e.getOption(126),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=Ax(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(i=>i===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(i=>i.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(i=>i==="_os"?new Intl.NumberFormat().resolvedOptions().locale:i==="_vscode"?Mn.BH:i)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new uv(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new Ox(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}};pu=hv([Yd(1,ir.IEditorWorkerService),Yd(2,Rx.L),Yd(3,Ri._Y)],pu);function Ax(h,e){return{nonBasicASCII:e.nonBasicASCII===ns.XR?!h:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===ns.XR?!h:e.includeComments,includeStrings:e.includeStrings===ns.XR?!h:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}let uv=class extends vt.jG{constructor(e,t,i,s){super(),this._editor=e,this._options=t,this._updateState=i,this._editorWorkerService=s,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new hi.uC(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);const i=[];if(!t.hasMore)for(const s of t.ranges)i.push({range:s,options:Df.instance.getDecorationFromOptions(this._options)});this._decorations.set(i)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel();if(!(0,Qd.GN)(t,e))return null;const i=t.getValueInRange(e.range);return{reason:Ib(i,this._options),inComment:(0,Qd.a6)(t,e),inString:(0,Qd.wc)(t,e)}}};uv=hv([Yd(3,ir.IEditorWorkerService)],uv);class Ox extends vt.jG{constructor(e,t,i){super(),this._editor=e,this._options=t,this._updateState=i,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new hi.uC(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._editor.getVisibleRanges(),t=[],i={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const s of e){const o=Lb.UnicodeTextModelHighlighter.computeUnicodeHighlights(this._model,this._options,s);for(const l of o.ranges)i.ranges.push(l);i.ambiguousCharacterCount+=i.ambiguousCharacterCount,i.invisibleCharacterCount+=i.invisibleCharacterCount,i.nonBasicAsciiCharacterCount+=i.nonBasicAsciiCharacterCount,i.hasMore=i.hasMore||o.hasMore}if(!i.hasMore)for(const s of i.ranges)t.push({range:s,options:Df.instance.getDecorationFromOptions(this._options)});this._updateState(i),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel(),i=t.getValueInRange(e.range);return(0,Qd.GN)(t,e)?{reason:Ib(i,this._options),inComment:(0,Qd.a6)(t,e),inString:(0,Qd.wc)(t,e)}:null}}const kb=Z.kg("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options");let gv=class{constructor(e,t,i){this._editor=e,this._languageService=t,this._openerService=i,this.hoverOrdinal=5}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),s=this._editor.getContribution(pu.ID);if(!s)return[];const o=[],l=new Set;let g=300;for(const k of t){const H=s.getDecorationInfo(k);if(!H)continue;const ie=i.getValueInRange(k.range).codePointAt(0),fe=mv(ie);let Me;switch(H.reason.kind){case 0:{(0,Vi.aC)(H.reason.confusableWith)?Me=Z.kg("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",fe,mv(H.reason.confusableWith.codePointAt(0))):Me=Z.kg("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",fe,mv(H.reason.confusableWith.codePointAt(0)));break}case 1:Me=Z.kg("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",fe);break;case 2:Me=Z.kg("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",fe);break}if(l.has(Me))continue;l.add(Me);const xe={codePoint:ie,reason:H.reason,inComment:H.inComment,inString:H.inString},Qe=Z.kg("unicodeHighlight.adjustSettings","Adjust settings"),ut=`command:${Ef.ID}?${encodeURIComponent(JSON.stringify(xe))}`,Lt=new nn.Bc("",!0).appendMarkdown(Me).appendText(" ").appendLink(ut,Qe,kb);o.push(new zo(this,k.range,[Lt],!1,g++))}return o}renderHoverParts(e,t){return cm(e,t,this._editor,this._languageService,this._openerService)}};gv=hv([Yd(1,nr.L),Yd(2,Qs.C)],gv);function fv(h){return`U+${h.toString(16).padStart(4,"0")}`}function mv(h){let e=`\`${fv(h)}\``;return Vi.y_.isInvisibleCharacter(h)||(e+=` "${`${Fx(h)}`}"`),e}function Fx(h){return h===96?"`` ` ``":"`"+String.fromCodePoint(h)+"`"}function Ib(h,e){return Lb.UnicodeTextModelHighlighter.computeUnicodeHighlightReason(h,e)}class Df{constructor(){this.map=new Map}static{this.instance=new Df}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){const i=`${e}${t}`;let s=this.map.get(i);return s||(s=Ki.kI.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(i,s)),s}}class Wx extends we.ks{constructor(){super({id:wc.ID,label:Z.kg("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=Z.kg("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}async run(e,t,i){const s=e?.get(pt.pG);s&&this.runAction(s)}async runAction(e){await e.updateValue(ns.Of.includeComments,!1,2)}}class Bx extends we.ks{constructor(){super({id:wc.ID,label:Z.kg("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=Z.kg("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}async run(e,t,i){const s=e?.get(pt.pG);s&&this.runAction(s)}async runAction(e){await e.updateValue(ns.Of.includeStrings,!1,2)}}class wc extends we.ks{static{this.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters"}constructor(){super({id:wc.ID,label:Z.kg("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=Z.kg("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}async run(e,t,i){const s=e?.get(pt.pG);s&&this.runAction(s)}async runAction(e){await e.updateValue(ns.Of.ambiguousCharacters,!1,2)}}class _u extends we.ks{static{this.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters"}constructor(){super({id:_u.ID,label:Z.kg("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=Z.kg("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}async run(e,t,i){const s=e?.get(pt.pG);s&&this.runAction(s)}async runAction(e){await e.updateValue(ns.Of.invisibleCharacters,!1,2)}}class vu extends we.ks{static{this.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters"}constructor(){super({id:vu.ID,label:Z.kg("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=Z.kg("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}async run(e,t,i){const s=e?.get(pt.pG);s&&this.runAction(s)}async runAction(e){await e.updateValue(ns.Of.nonBasicASCII,!1,2)}}class Ef extends we.ks{static{this.ID="editor.action.unicodeHighlight.showExcludeOptions"}constructor(){super({id:Ef.ID,label:Z.kg("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}async run(e,t,i){const{codePoint:s,reason:o,inString:l,inComment:g}=i,k=String.fromCodePoint(s),H=e.get(js.GK),ee=e.get(pt.pG);function ie(xe){return Vi.y_.isInvisibleCharacter(xe)?Z.kg("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",fv(xe)):Z.kg("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${fv(xe)} "${k}"`)}const fe=[];if(o.kind===0)for(const xe of o.notAmbiguousInLocales)fe.push({label:Z.kg("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',xe),run:async()=>{Vx(ee,[xe])}});if(fe.push({label:ie(s),run:()=>Hx(ee,[s])}),g){const xe=new Wx;fe.push({label:xe.label,run:async()=>xe.runAction(ee)})}else if(l){const xe=new Bx;fe.push({label:xe.label,run:async()=>xe.runAction(ee)})}if(o.kind===0){const xe=new wc;fe.push({label:xe.label,run:async()=>xe.runAction(ee)})}else if(o.kind===1){const xe=new _u;fe.push({label:xe.label,run:async()=>xe.runAction(ee)})}else if(o.kind===2){const xe=new vu;fe.push({label:xe.label,run:async()=>xe.runAction(ee)})}else Ux(o);const Me=await H.pick(fe,{title:kb});Me&&await Me.run()}}async function Hx(h,e){const t=h.getValue(ns.Of.allowedCharacters);let i;typeof t=="object"&&t?i=t:i={};for(const s of e)i[String.fromCodePoint(s)]=!0;await h.updateValue(ns.Of.allowedCharacters,i,2)}async function Vx(h,e){const t=h.inspect(ns.Of.allowedLocales).user?.value;let i;typeof t=="object"&&t?i=Object.assign({},t):i={};for(const s of e)i[s]=!0;await h.updateValue(ns.Of.allowedLocales,i,2)}function Ux(h){throw new Error(`Unexpected value: ${h}`)}(0,we.Fl)(wc),(0,we.Fl)(_u),(0,we.Fl)(vu),(0,we.Fl)(Ef),(0,we.HW)(pu.ID,pu,1),Uo.register(gv);var pv=c(39726),zx=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Mb=function(h,e){return function(t,i){e(t,i,h)}};const Nb="ignoreUnusualLineTerminators";function jx(h,e,t){h.setModelProperty(e.uri,Nb,t)}function Kx(h,e){return h.getModelProperty(e.uri,Nb)}let xf=class extends vt.jG{static{this.ID="editor.contrib.unusualLineTerminatorsDetector"}constructor(e,t,i){super(),this._editor=e,this._dialogService=t,this._codeEditorService=i,this._isPresentingDialog=!1,this._config=this._editor.getOption(127),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(127)&&(this._config=this._editor.getOption(127),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(s=>{s.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}async _checkForUnusualLineTerminators(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||Kx(this._codeEditorService,e)===!0||this._editor.getOption(92))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(this._isPresentingDialog)return;let i;try{this._isPresentingDialog=!0,i=await this._dialogService.confirm({title:Z.kg("unusualLineTerminators.title","Unusual Line Terminators"),message:Z.kg("unusualLineTerminators.message","Detected unusual line terminators"),detail:Z.kg("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",(0,Ee.P8)(e.uri)),primaryButton:Z.kg({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:Z.kg("unusualLineTerminators.ignore","Ignore")})}finally{this._isPresentingDialog=!1}if(!i.confirmed){jx(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())}};xf=zx([Mb(1,pv.X),Mb(2,Xt.T)],xf),(0,we.HW)(xf.ID,xf,1);var $x=c(79196),Tb=c(5751),Gx=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Qx=function(h,e){return function(t,i){e(t,i,h)}};class Rb{constructor(){this.selector={language:"*"}}provideDocumentHighlights(e,t,i){const s=[],o=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});return o?e.isDisposed()?void 0:e.findMatches(o.word,!0,!1,!0,Tb.J3,!1).map(g=>({range:g.range,kind:Et.Kb.Text})):Promise.resolve(s)}provideMultiDocumentHighlights(e,t,i,s){const o=new Ai.fT,l=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});if(!l)return Promise.resolve(o);for(const g of[e,...i]){if(g.isDisposed())continue;const H=g.findMatches(l.word,!0,!1,!0,Tb.J3,!1).map(ee=>({range:ee.range,kind:Et.Kb.Text}));H&&o.set(g.uri,H)}return o}}let _v=class extends vt.jG{constructor(e){super(),this._register(e.documentHighlightProvider.register("*",new Rb)),this._register(e.multiDocumentHighlightProvider.register("*",new Rb))}};_v=Gx([Qx(0,_e.ILanguageFeaturesService)],_v);var Pb=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},kf=function(h,e){return function(t,i){e(t,i,h)}},Es,vv;const Cv=new et.N1("hasWordHighlights",!1);function Ab(h,e,t,i){const s=h.ordered(e);return(0,hi.$1)(s.map(o=>()=>Promise.resolve(o.provideDocumentHighlights(e,t,i)).then(void 0,Ni.M_)),o=>o!=null).then(o=>{if(o){const l=new Ai.fT;return l.set(e.uri,o),l}return new Ai.fT})}function Yx(h,e,t,i,s,o){const l=h.ordered(e);return(0,hi.$1)(l.map(g=>()=>{const k=o.filter(H=>(0,In.vd)(H)).filter(H=>(0,$x.f)(g.selector,H.uri,H.getLanguageId(),!0,void 0,void 0)>0);return Promise.resolve(g.provideMultiDocumentHighlights(e,t,k,s)).then(void 0,Ni.M_)}),g=>g!=null)}class Ob{constructor(e,t,i){this._model=e,this._selection=t,this._wordSeparators=i,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=(0,hi.SS)(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const i=e.getWordAtPosition(t.getPosition());return i?new wt.Q(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):null}isValid(e,t,i){const s=t.startLineNumber,o=t.startColumn,l=t.endColumn,g=this._getCurrentWordRange(e,t);let k=!!(this._wordRange&&this._wordRange.equalsRange(g));for(let H=0,ee=i.length;!k&&H<ee;H++){const ie=i.getRange(H);ie&&ie.startLineNumber===s&&ie.startColumn<=o&&ie.endColumn>=l&&(k=!0)}return k}cancel(){this.result.cancel()}}class Zx extends Ob{constructor(e,t,i,s){super(e,t,i),this._providers=s}_compute(e,t,i,s){return Ab(this._providers,e,t.getPosition(),s).then(o=>o||new Ai.fT)}}class Xx extends Ob{constructor(e,t,i,s,o){super(e,t,i),this._providers=s,this._otherModels=o}_compute(e,t,i,s){return Yx(this._providers,e,t.getPosition(),i,s,this._otherModels).then(o=>o||new Ai.fT)}}function Jx(h,e,t,i,s){return new Zx(e,t,s,h)}function qx(h,e,t,i,s,o){return new Xx(e,t,s,h,o)}(0,we.ke)("_executeDocumentHighlights",async(h,e,t)=>{const i=h.get(_e.ILanguageFeaturesService);return(await Ab(i.documentHighlightProvider,e,t,Fi.XO.None))?.get(e.uri)});let bv=class{static{Es=this}static{this.storedDecorationIDs=new Ai.fT}static{this.query=null}constructor(e,t,i,s,o){this.toUnhook=new vt.Cm,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new Ai.fT,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.runDelayer=this.toUnhook.add(new hi.ve(50)),this.editor=e,this.providers=t,this.multiDocumentProviders=i,this.codeEditorService=o,this._hasWordHighlights=Cv.bindTo(s),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(81),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(l=>{this._ignorePositionChangeEvent||this.occurrencesHighlight!=="off"&&this.runDelayer.trigger(()=>{this._onPositionChanged(l)})})),this.toUnhook.add(e.onDidFocusEditorText(l=>{this.occurrencesHighlight!=="off"&&(this.workerRequest||this.runDelayer.trigger(()=>{this._run()}))})),this.toUnhook.add(e.onDidChangeModelContent(l=>{(0,ue.v$)(this.model.uri,"output")||this._stopAll()})),this.toUnhook.add(e.onDidChangeModel(l=>{!l.newModelUrl&&l.oldModelUrl?this._stopSingular():Es.query&&this._run()})),this.toUnhook.add(e.onDidChangeConfiguration(l=>{const g=this.editor.getOption(81);if(this.occurrencesHighlight!==g)switch(this.occurrencesHighlight=g,g){case"off":this._stopAll();break;case"singleFile":this._stopAll(Es.query?.modelInfo?.model);break;case"multiFile":Es.query&&this._run(!0);break;default:break}})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,Es.query&&this._run()}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight!=="off"&&(this.runDelayer.cancel(),this._run())}_getSortedHighlights(){return this.decorations.getRanges().sort(wt.Q.compareRangesUsingStarts)}moveNext(){const e=this._getSortedHighlights(),i=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))+1)%e.length,s=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(s.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(s);const o=this._getWord();if(o){const l=this.editor.getModel().getLineContent(s.startLineNumber);(0,dn.xE)(`${l}, ${i+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const e=this._getSortedHighlights(),i=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,s=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(s.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(s);const o=this._getWord();if(o){const l=this.editor.getModel().getLineContent(s.startLineNumber);(0,dn.xE)(`${l}, ${i+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeSingleDecorations(){if(!this.editor.hasModel())return;const e=Es.storedDecorationIDs.get(this.editor.getModel().uri);e&&(this.editor.removeDecorations(e),Es.storedDecorationIDs.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))}_removeAllDecorations(e){const t=this.codeEditorService.listCodeEditors(),i=[];for(const s of t){if(!s.hasModel()||(0,Ee.n4)(s.getModel().uri,e?.uri))continue;const o=Es.storedDecorationIDs.get(s.getModel().uri);if(!o)continue;s.removeDecorations(o),i.push(s.getModel().uri);const l=xl.get(s);l?.wordHighlighter&&l.wordHighlighter.decorations.length>0&&(l.wordHighlighter.decorations.clear(),l.wordHighlighter.workerRequest=null,l.wordHighlighter._hasWordHighlights.set(!1))}for(const s of i)Es.storedDecorationIDs.delete(s)}_stopSingular(){this._removeSingleDecorations(),this.editor.hasTextFocus()&&(this.editor.getModel()?.uri.scheme!==ue.ny.vscodeNotebookCell&&Es.query?.modelInfo?.model.uri.scheme!==ue.ny.vscodeNotebookCell?(Es.query=null,this._run()):Es.query?.modelInfo&&(Es.query.modelInfo=null)),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_stopAll(e){this._removeAllDecorations(e),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(this.occurrencesHighlight==="off"){this._stopAll();return}if(e.reason!==3&&this.editor.getModel()?.uri.scheme!==ue.ny.vscodeNotebookCell){this._stopAll();return}this._run()}_getWord(){const e=this.editor.getSelection(),t=e.startLineNumber,i=e.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:t,column:i})}getOtherModelsToHighlight(e){if(!e)return[];if(e.uri.scheme===ue.ny.vscodeNotebookCell){const o=[],l=this.codeEditorService.listCodeEditors();for(const g of l){const k=g.getModel();k&&k!==e&&k.uri.scheme===ue.ny.vscodeNotebookCell&&o.push(k)}return o}const i=[],s=this.codeEditorService.listCodeEditors();for(const o of s){if(!(0,Aa.Np)(o))continue;const l=o.getModel();l&&e===l.modified&&i.push(l.modified)}if(i.length)return i;if(this.occurrencesHighlight==="singleFile")return[];for(const o of s){const l=o.getModel();l&&l!==e&&i.push(l)}return i}_run(e){let t;if(this.editor.hasTextFocus()){const s=this.editor.getSelection();if(!s||s.startLineNumber!==s.endLineNumber){Es.query=null,this._stopAll();return}const o=s.startColumn,l=s.endColumn,g=this._getWord();if(!g||g.startColumn>o||g.endColumn<l){Es.query=null,this._stopAll();return}t=this.workerRequest&&this.workerRequest.isValid(this.model,s,this.decorations),Es.query={modelInfo:{model:this.model,selection:s},word:g}}else if(!Es.query){this._stopAll();return}if(this.lastCursorPositionChangeTime=new Date().getTime(),t)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else if((0,Ee.n4)(this.editor.getModel().uri,Es.query.modelInfo?.model.uri)){if(!e){const l=this.decorations.getRanges();for(const g of l)if(g.containsPosition(this.editor.getPosition()))return}this._stopAll(e?this.model:void 0);const s=++this.workerRequestTokenId;this.workerRequestCompleted=!1;const o=this.getOtherModelsToHighlight(this.editor.getModel());if(!Es.query||!Es.query.modelInfo||Es.query.modelInfo.model.isDisposed())return;this.workerRequest=this.computeWithModel(Es.query.modelInfo.model,Es.query.modelInfo.selection,Es.query.word,o),this.workerRequest?.result.then(l=>{s===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=l||[],this._beginRenderDecorations())},Ni.dz)}}computeWithModel(e,t,i,s){return s.length?qx(this.multiDocumentProviders,e,t,i,this.editor.getOption(132),s):Jx(this.providers,e,t,i,this.editor.getOption(132))}_beginRenderDecorations(){const e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;const e=this.codeEditorService.listCodeEditors();for(const t of e){const i=xl.get(t);if(!i)continue;const s=[],o=t.getModel()?.uri;if(o&&this.workerRequestValue.has(o)){const l=Es.storedDecorationIDs.get(o),g=this.workerRequestValue.get(o);if(g)for(const H of g)H.range&&s.push({range:H.range,options:RD(H.kind)});let k=[];t.changeDecorations(H=>{k=H.deltaDecorations(l??[],s)}),Es.storedDecorationIDs=Es.storedDecorationIDs.set(o,k),s.length>0&&(i.wordHighlighter?.decorations.set(s),i.wordHighlighter?._hasWordHighlights.set(!0))}}}dispose(){this._stopSingular(),this.toUnhook.dispose()}};bv=Es=Pb([kf(4,Xt.T)],bv);let xl=class extends vt.jG{static{vv=this}static{this.ID="editor.contrib.wordHighlighter"}static get(e){return e.getContribution(vv.ID)}constructor(e,t,i,s){super(),this._wordHighlighter=null;const o=()=>{e.hasModel()&&!e.getModel().isTooLargeForTokenization()&&(this._wordHighlighter=new bv(e,i.documentHighlightProvider,i.multiDocumentHighlightProvider,t,s))};this._register(e.onDidChangeModel(l=>{this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),o()})),o()}get wordHighlighter(){return this._wordHighlighter}saveViewState(){return!!(this._wordHighlighter&&this._wordHighlighter.hasDecorations())}moveNext(){this._wordHighlighter?.moveNext()}moveBack(){this._wordHighlighter?.moveBack()}restoreViewState(e){this._wordHighlighter&&e&&this._wordHighlighter.restore()}dispose(){this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),super.dispose()}};xl=vv=Pb([kf(1,et.fN),kf(2,_e.ILanguageFeaturesService),kf(3,Xt.T)],xl);class Fb extends we.ks{constructor(e,t){super(t),this._isNext=e}run(e,t){const i=xl.get(t);i&&(this._isNext?i.moveNext():i.moveBack())}}class ek extends Fb{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:Z.kg("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:Cv,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:65,weight:100}})}}class tk extends Fb{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:Z.kg("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:Cv,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:1089,weight:100}})}}class ik extends we.ks{constructor(){super({id:"editor.action.wordHighlight.trigger",label:Z.kg("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:void 0,kbOpts:{kbExpr:ke.R.editorTextFocus,primary:0,weight:100}})}run(e,t,i){const s=xl.get(t);s&&s.restoreViewState(!0)}}(0,we.HW)(xl.ID,xl,0),(0,we.Fl)(ek),(0,we.Fl)(tk),(0,we.Fl)(ik),(0,Jr.x)(_v);var nk=c(92998),$a=c(33836),yc=c(53605);class If extends we.DX{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){if(!t.hasModel())return;const s=(0,yc.i)(t.getOption(132),t.getOption(131)),o=t.getModel(),l=t.getSelections(),g=l.length>1,k=l.map(H=>{const ee=new ui.y(H.positionLineNumber,H.positionColumn),ie=this._move(s,o,ee,this._wordNavigationType,g);return this._moveTo(H,ie,this._inSelectionMode)});if(o.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,k.map(H=>nk.MF.fromModelSelection(H))),k.length===1){const H=new ui.y(k[0].positionLineNumber,k[0].positionColumn);t.revealPosition(H,0)}}_moveTo(e,t,i){return i?new Mi.L(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new Mi.L(t.lineNumber,t.column,t.lineNumber,t.column)}}class kl extends If{_move(e,t,i,s,o){return $a.z.moveWordLeft(e,t,i,s,o)}}class Il extends If{_move(e,t,i,s,o){return $a.z.moveWordRight(e,t,i,s)}}class sk extends kl{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class ok extends kl{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class rk extends kl{constructor(){super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:et.M$.and(ke.R.textInputFocus,et.M$.and(ra.f,ge.nd)?.negate()),primary:2063,mac:{primary:527},weight:100}})}}class ak extends kl{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class lk extends kl{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class ck extends kl{constructor(){super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:et.M$.and(ke.R.textInputFocus,et.M$.and(ra.f,ge.nd)?.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class dk extends kl{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,i,s,o){return super._move((0,yc.i)(ns.qB.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,o)}}class hk extends kl{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,i,s,o){return super._move((0,yc.i)(ns.qB.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,o)}}class uk extends Il{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class gk extends Il{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:et.M$.and(ke.R.textInputFocus,et.M$.and(ra.f,ge.nd)?.negate()),primary:2065,mac:{primary:529},weight:100}})}}class fk extends Il{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class mk extends Il{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class pk extends Il{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:et.M$.and(ke.R.textInputFocus,et.M$.and(ra.f,ge.nd)?.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class _k extends Il{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class vk extends Il{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,i,s,o){return super._move((0,yc.i)(ns.qB.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,o)}}class Ck extends Il{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,i,s,o){return super._move((0,yc.i)(ns.qB.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,o)}}class Mf extends we.DX{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){const s=e.get(Us.JZ);if(!t.hasModel())return;const o=(0,yc.i)(t.getOption(132),t.getOption(131)),l=t.getModel(),g=t.getSelections(),k=t.getOption(6),H=t.getOption(11),ee=s.getLanguageConfiguration(l.getLanguageId()).getAutoClosingPairs(),ie=t._getViewModel(),fe=g.map(Me=>{const xe=this._delete({wordSeparators:o,model:l,selection:Me,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(9),autoClosingBrackets:k,autoClosingQuotes:H,autoClosingPairs:ee,autoClosedCharacters:ie.getCursorAutoClosedCharacters()},this._wordNavigationType);return new yn.iu(xe,"")});t.pushUndoStop(),t.executeCommands(this.id,fe),t.pushUndoStop()}}class Sv extends Mf{_delete(e,t){const i=$a.z.deleteWordLeft(e,t);return i||new wt.Q(1,1,1,1)}}class wv extends Mf{_delete(e,t){const i=$a.z.deleteWordRight(e,t);if(i)return i;const s=e.model.getLineCount(),o=e.model.getLineMaxColumn(s);return new wt.Q(s,o,s,o)}}class bk extends Sv{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:ke.R.writable})}}class Sk extends Sv{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:ke.R.writable})}}class wk extends Sv{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class yk extends wv{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:ke.R.writable})}}class Lk extends wv{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:ke.R.writable})}}class Dk extends wv{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class Ek extends we.ks{constructor(){super({id:"deleteInsideWord",precondition:ke.R.writable,label:Z.kg("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,i){if(!t.hasModel())return;const s=(0,yc.i)(t.getOption(132),t.getOption(131)),o=t.getModel(),g=t.getSelections().map(k=>{const H=$a.z.deleteInsideWord(s,o,k);return new yn.iu(H,"")});t.pushUndoStop(),t.executeCommands(this.id,g),t.pushUndoStop()}}(0,we.E_)(new sk),(0,we.E_)(new ok),(0,we.E_)(new rk),(0,we.E_)(new ak),(0,we.E_)(new lk),(0,we.E_)(new ck),(0,we.E_)(new uk),(0,we.E_)(new gk),(0,we.E_)(new fk),(0,we.E_)(new mk),(0,we.E_)(new pk),(0,we.E_)(new _k),(0,we.E_)(new dk),(0,we.E_)(new hk),(0,we.E_)(new vk),(0,we.E_)(new Ck),(0,we.E_)(new bk),(0,we.E_)(new Sk),(0,we.E_)(new wk),(0,we.E_)(new yk),(0,we.E_)(new Lk),(0,we.E_)(new Dk),(0,we.Fl)(Ek);class xk extends Mf{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){const i=$a.c.deleteWordPartLeft(e);return i||new wt.Q(1,1,1,1)}}class kk extends Mf{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:ke.R.writable,kbOpts:{kbExpr:ke.R.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){const i=$a.c.deleteWordPartRight(e);if(i)return i;const s=e.model.getLineCount(),o=e.model.getLineMaxColumn(s);return new wt.Q(s,o,s,o)}}class Wb extends If{_move(e,t,i,s,o){return $a.c.moveWordPartLeft(e,t,i,o)}}class Ik extends Wb{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:ke.R.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}Di.w.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class Mk extends Wb{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:ke.R.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}Di.w.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class Bb extends If{_move(e,t,i,s,o){return $a.c.moveWordPartRight(e,t,i)}}class Nk extends Bb{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:ke.R.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class Tk extends Bb{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:ke.R.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}(0,we.E_)(new xk),(0,we.E_)(new kk),(0,we.E_)(new Ik),(0,we.E_)(new Mk),(0,we.E_)(new Nk),(0,we.E_)(new Tk);class Hb extends vt.jG{static{this.ID="editor.contrib.readOnlyMessageController"}constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){const e=Ls.get(this.editor);if(e&&this.editor.hasModel()){let t=this.editor.getOptions().get(93);t||(this.editor.isSimpleWidget?t=new nn.Bc(Z.kg("editor.simple.readonly","Cannot edit in read-only input")):t=new nn.Bc(Z.kg("editor.readonly","Cannot edit in read-only editor"))),e.showMessage(t,this.editor.getPosition())}}}(0,we.HW)(Hb.ID,Hb,2);var Rk=c(34596),Pk=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Vb=function(h,e){return function(t,i){e(t,i,h)}};let yv=class extends vt.jG{constructor(e,t,i){super(),this._textModel=e,this._languageFeaturesService=t,this._outlineModelService=i,this._currentModel=(0,si.FY)(this,void 0);const s=(0,si.yQ)("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),o=(0,si.yQ)("_textModel.onDidChangeContent",zi.Jh.debounce(l=>this._textModel.onDidChangeContent(l),()=>{},100));this._register((0,si.yC)(async(l,g)=>{s.read(l),o.read(l);const k=g.add(new S_.MZ),H=await this._outlineModelService.getOrCreate(this._textModel,k.token);g.isDisposed||this._currentModel.set(H,void 0)}))}getBreadcrumbItems(e,t){const i=this._currentModel.read(t);if(!i)return[];const s=i.asListOfDocumentSymbols().filter(o=>e.contains(o.range.startLineNumber)&&!e.contains(o.range.endLineNumber));return s.sort((0,Xi.Hw)((0,Xi.VE)(o=>o.range.endLineNumber-o.range.startLineNumber,Xi.U9))),s.map(o=>({name:o.name,kind:o.kind,startLineNumber:o.range.startLineNumber}))}};yv=Pk([Vb(1,_e.ILanguageFeaturesService),Vb(2,Vh)],yv),Rk.N.setBreadcrumbsSourceFactory((h,e)=>e.createInstance(yv,h));var ma=c(57352);class Ub extends vt.jG{static{this.ID="editor.contrib.iPadShowKeyboard"}constructor(e){super(),this.editor=e,this.widget=null,Mn.un&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(92);!this.widget&&e?this.widget=new Lv(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}class Lv extends vt.jG{static{this.ID="editor.contrib.ShowKeyboardWidget"}constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(Se.ko(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(Se.ko(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return Lv.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}(0,we.HW)(Ub.ID,Ub,3);var Cu=c(71269),Dv=c(32287),zb=c(65327),Ak=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},jb=function(h,e){return function(t,i){e(t,i,h)}},Ev;let bu=class extends vt.jG{static{Ev=this}static{this.ID="editor.contrib.inspectTokens"}static get(e){return e.getContribution(Ev.ID)}constructor(e,t,i){super(),this._editor=e,this._languageService=i,this._widget=null,this._register(this._editor.onDidChangeModel(s=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(s=>this.stop())),this._register(Et.dG.onDidChange(s=>this.stop())),this._register(this._editor.onKeyUp(s=>s.keyCode===9&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new xv(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};bu=Ev=Ak([jb(1,zb.L),jb(2,nr.L)],bu);class Ok extends we.ks{constructor(){super({id:"editor.action.inspectTokens",label:ma.YN.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){bu.get(t)?.launch()}}function Fk(h){let e="";for(let t=0,i=h.length;t<i;t++){const s=h.charCodeAt(t);switch(s){case 9:e+="\u2192";break;case 32:e+="\xB7";break;default:e+=String.fromCharCode(s)}}return e}function Wk(h,e){const t=Et.dG.get(e);if(t)return t;const i=h.encodeLanguageId(e);return{getInitialState:()=>Dv.r3,tokenize:(s,o,l)=>(0,Dv.$H)(e,l),tokenizeEncoded:(s,o,l)=>(0,Dv.Lh)(i,l)}}class xv extends vt.jG{static{this._ID="editor.contrib.inspectTokensWidget"}constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=Wk(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(i=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return xv._ID}_compute(e){const t=this._getTokensAtLine(e.lineNumber);let i=0;for(let k=t.tokens1.length-1;k>=0;k--){const H=t.tokens1[k];if(e.column-1>=H.offset){i=k;break}}let s=0;for(let k=t.tokens2.length>>>1;k>=0;k--)if(e.column-1>=t.tokens2[k<<1]){s=k;break}const o=this._model.getLineContent(e.lineNumber);let l="";if(i<t.tokens1.length){const k=t.tokens1[i].offset,H=i+1<t.tokens1.length?t.tokens1[i+1].offset:o.length;l=o.substring(k,H)}(0,Se.Ln)(this._domNode,(0,Se.$)("h2.tm-token",void 0,Fk(l),(0,Se.$)("span.tm-token-length",void 0,`${l.length} ${l.length===1?"char":"chars"}`))),(0,Se.BC)(this._domNode,(0,Se.$)("hr.tokens-inspect-separator",{style:"clear:both"}));const g=(s<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(s<<1)+1]):null;(0,Se.BC)(this._domNode,(0,Se.$)("table.tm-metadata-table",void 0,(0,Se.$)("tbody",void 0,(0,Se.$)("tr",void 0,(0,Se.$)("td.tm-metadata-key",void 0,"language"),(0,Se.$)("td.tm-metadata-value",void 0,`${g?g.languageId:"-?-"}`)),(0,Se.$)("tr",void 0,(0,Se.$)("td.tm-metadata-key",void 0,"token type"),(0,Se.$)("td.tm-metadata-value",void 0,`${g?this._tokenTypeToString(g.tokenType):"-?-"}`)),(0,Se.$)("tr",void 0,(0,Se.$)("td.tm-metadata-key",void 0,"font style"),(0,Se.$)("td.tm-metadata-value",void 0,`${g?this._fontStyleToString(g.fontStyle):"-?-"}`)),(0,Se.$)("tr",void 0,(0,Se.$)("td.tm-metadata-key",void 0,"foreground"),(0,Se.$)("td.tm-metadata-value",void 0,`${g?wn.Q1.Format.CSS.formatHex(g.foreground):"-?-"}`)),(0,Se.$)("tr",void 0,(0,Se.$)("td.tm-metadata-key",void 0,"background"),(0,Se.$)("td.tm-metadata-value",void 0,`${g?wn.Q1.Format.CSS.formatHex(g.background):"-?-"}`))))),(0,Se.BC)(this._domNode,(0,Se.$)("hr.tokens-inspect-separator")),i<t.tokens1.length&&(0,Se.BC)(this._domNode,(0,Se.$)("span.tm-token-type",void 0,t.tokens1[i].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const t=Et.dG.getColorMap(),i=Cu.x.getLanguageId(e),s=Cu.x.getTokenType(e),o=Cu.x.getFontStyle(e),l=Cu.x.getForeground(e),g=Cu.x.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(i),tokenType:s,fontStyle:o,foreground:t[l],background:t[g]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){const t=this._getStateBeforeLine(e),i=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),s=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:i.tokens,tokens2:s.tokens,endState:i.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let i=1;i<e;i++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(i),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}(0,we.HW)(bu.ID,bu,4),(0,we.Fl)(Ok);var Su=c(88238),Bk=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Kb=function(h,e){return function(t,i){e(t,i,h)}},wu;let kv=class{static{wu=this}static{this.PREFIX="?"}constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=qt.O.as(Su.Fd.Quickaccess)}provide(e){const t=new vt.Cm;return t.add(e.onDidAccept(()=>{const[i]=e.selectedItems;i&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(i=>{const s=this.registry.getQuickAccessProvider(i.substr(wu.PREFIX.length));s&&s.prefix&&s.prefix!==wu.PREFIX&&this.quickInputService.quickAccess.show(s.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders().filter(i=>i.prefix!==wu.PREFIX),t}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort((t,i)=>t.prefix.localeCompare(i.prefix)).flatMap(t=>this.createPicks(t))}createPicks(e){return e.helpEntries.map(t=>{const i=t.prefix||e.prefix,s=i||"\u2026";return{prefix:i,label:s,keybinding:t.commandId?this.keybindingService.lookupKeybinding(t.commandId):void 0,ariaLabel:(0,Z.kg)("helpPickAriaLabel","{0}, {1}",s,t.description),description:t.description}})}};kv=wu=Bk([Kb(0,js.GK),Kb(1,ms.b)],kv),qt.O.as(Su.Fd.Quickaccess).registerQuickAccessProvider({ctor:kv,prefix:"",helpEntries:[{description:ma.oq.helpQuickAccessActionLabel}]});var $b=c(74730);class Gb{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t,i){const s=new vt.Cm;e.canAcceptInBackground=!!this.options?.canAcceptInBackground,e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const o=s.add(new vt.HE);return o.value=this.doProvide(e,t,i),s.add(this.onDidActiveTextEditorControlChange(()=>{o.value=void 0,o.value=this.doProvide(e,t)})),s}doProvide(e,t,i){const s=new vt.Cm,o=this.activeTextEditorControl;if(o&&this.canProvideWithTextEditor(o)){const l={editor:o},g=(0,Aa.jA)(o);if(g){let k=o.saveViewState()??void 0;s.add(g.onDidChangeCursorPosition(()=>{k=o.saveViewState()??void 0})),l.restoreViewState=()=>{k&&o===this.activeTextEditorControl&&o.restoreViewState(k)},s.add((0,$b.P)(t.onCancellationRequested)(()=>l.restoreViewState?.()))}s.add((0,vt.s)(()=>this.clearDecorations(o))),s.add(this.provideWithTextEditor(l,e,t,i))}else s.add(this.provideWithoutTextEditor(e,t));return s}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range,"code.jump"),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus();const i=e.getModel();i&&"getLineContent"in i&&(0,dn.h5)(`${i.getLineContent(t.range.startLineNumber)}`)}getModel(e){return(0,Aa.Np)(e)?e.getModel()?.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(i=>{const s=[];this.rangeHighlightDecorationId&&(s.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),s.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const o=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,$i.Yf)(Bm.vp),position:In.A5.Full}}}],[l,g]=i.deltaDecorations(s,o);this.rangeHighlightDecorationId={rangeHighlightId:l,overviewRulerDecorationId:g}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(i=>{i.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}class Iv extends Gb{static{this.PREFIX=":"}constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=(0,Z.kg)("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,vt.jG.None}provideWithTextEditor(e,t,i){const s=e.editor,o=new vt.Cm;o.add(t.onDidAccept(k=>{const[H]=t.selectedItems;if(H){if(!this.isValidLineNumber(s,H.lineNumber))return;this.gotoLocation(e,{range:this.toRange(H.lineNumber,H.column),keyMods:t.keyMods,preserveFocus:k.inBackground}),k.inBackground||t.hide()}}));const l=()=>{const k=this.parsePosition(s,t.value.trim().substr(Iv.PREFIX.length)),H=this.getPickLabel(s,k.lineNumber,k.column);if(t.items=[{lineNumber:k.lineNumber,column:k.column,label:H}],t.ariaLabel=H,!this.isValidLineNumber(s,k.lineNumber)){this.clearDecorations(s);return}const ee=this.toRange(k.lineNumber,k.column);s.revealRangeInCenter(ee,0),this.addDecorations(s,ee)};l(),o.add(t.onDidChangeValue(()=>l()));const g=(0,Aa.jA)(s);return g&&g.getOptions().get(68).renderType===2&&(g.updateOptions({lineNumbers:"on"}),o.add((0,vt.s)(()=>g.updateOptions({lineNumbers:"relative"})))),o}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const i=t.split(/,|:|#/).map(o=>parseInt(o,10)).filter(o=>!isNaN(o)),s=this.lineCount(e)+1;return{lineNumber:i[0]>0?i[0]:s+i[0],column:i[1]}}getPickLabel(e,t,i){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,i)?(0,Z.kg)("gotoLineColumnLabel","Go to line {0} and character {1}.",t,i):(0,Z.kg)("gotoLineLabel","Go to line {0}.",t);const s=e.getPosition()||{lineNumber:1,column:1},o=this.lineCount(e);return o>1?(0,Z.kg)("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",s.lineNumber,s.column,o):(0,Z.kg)("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",s.lineNumber,s.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,i){if(!i||typeof i!="number")return!1;const s=this.getModel(e);if(!s)return!1;const o={lineNumber:t,column:i};return s.validatePosition(o).equals(o)}lineCount(e){return this.getModel(e)?.getLineCount()??0}}var Hk=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Vk=function(h,e){return function(t,i){e(t,i,h)}};let yu=class extends Iv{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=zi.Jh.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}};yu=Hk([Vk(0,Xt.T)],yu);class Nf extends we.ks{static{this.ID="editor.action.gotoLine"}constructor(){super({id:Nf.ID,label:ma.Hw.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:ke.R.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(js.GK).quickAccess.show(yu.PREFIX)}}(0,we.Fl)(Nf),qt.O.as(Su.Fd.Quickaccess).registerQuickAccessProvider({ctor:yu,prefix:yu.PREFIX,helpEntries:[{description:ma.Hw.gotoLineActionLabel,commandId:Nf.ID}]});const Qb=[void 0,[]];function Mv(h,e,t=0,i=0){const s=e;return s.values&&s.values.length>1?Uk(h,s.values,t,i):Yb(h,e,t,i)}function Uk(h,e,t,i){let s=0;const o=[];for(const l of e){const[g,k]=Yb(h,l,t,i);if(typeof g!="number")return Qb;s+=g,o.push(...k)}return[s,zk(o)]}function Yb(h,e,t,i){const s=(0,Xs.dt)(e.original,e.originalLowercase,t,h,h.toLowerCase(),i,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return s?[s[0],(0,Xs.WJ)(s)]:Qb}const hI=Object.freeze({score:0});function zk(h){const e=h.sort((s,o)=>s.start-o.start),t=[];let i;for(const s of e)!i||!jk(i,s)?(i=s,t.push(s)):(i.start=Math.min(i.start,s.start),i.end=Math.max(i.end,s.end));return t}function jk(h,e){return!(h.end<e.start||e.end<h.start)}function Zb(h){return h.startsWith('"')&&h.endsWith('"')}const Xb=" ";function Nv(h){typeof h!="string"&&(h="");const e=h.toLowerCase(),{pathNormalized:t,normalized:i,normalizedLowercase:s}=Jb(h),o=t.indexOf(Ha.Vn)>=0,l=Zb(h);let g;const k=h.split(Xb);if(k.length>1)for(const H of k){const ee=Zb(H),{pathNormalized:ie,normalized:fe,normalizedLowercase:Me}=Jb(H);fe&&(g||(g=[]),g.push({original:H,originalLowercase:H.toLowerCase(),pathNormalized:ie,normalized:fe,normalizedLowercase:Me,expectContiguousMatch:ee}))}return{original:h,originalLowercase:e,pathNormalized:t,normalized:i,normalizedLowercase:s,values:g,containsPathSeparator:o,expectContiguousMatch:l}}function Jb(h){let e;Mn.uF?e=h.replace(/\//g,Ha.Vn):e=h.replace(/\\/g,Ha.Vn);const t=(0,Vi.wB)(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function qb(h){return Array.isArray(h)?Nv(h.map(e=>e.original).join(Xb)):Nv(h.original)}var Kk=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},e1=function(h,e){return function(t,i){e(t,i,h)}},Tf;let Lc=class extends Gb{static{Tf=this}static{this.PREFIX="@"}static{this.SCOPE_PREFIX=":"}static{this.PREFIX_BY_CATEGORY=`${this.PREFIX}${this.SCOPE_PREFIX}`}constructor(e,t,i=Object.create(null)){super(i),this._languageFeaturesService=e,this._outlineModelService=t,this.options=i,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,(0,Z.kg)("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),vt.jG.None}provideWithTextEditor(e,t,i,s){const o=e.editor,l=this.getModel(o);return l?this._languageFeaturesService.documentSymbolProvider.has(l)?this.doProvideWithEditorSymbols(e,l,t,i,s):this.doProvideWithoutEditorSymbols(e,l,t,i):vt.jG.None}doProvideWithoutEditorSymbols(e,t,i,s){const o=new vt.Cm;return this.provideLabelPick(i,(0,Z.kg)("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(async()=>!await this.waitForLanguageSymbolRegistry(t,o)||s.isCancellationRequested||o.add(this.doProvideWithEditorSymbols(e,t,i,s)))(),o}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}async waitForLanguageSymbolRegistry(e,t){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const i=new hi.Zv,s=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(s.dispose(),i.complete(!0))}));return t.add((0,vt.s)(()=>i.complete(!1))),i.p}doProvideWithEditorSymbols(e,t,i,s,o){const l=e.editor,g=new vt.Cm;g.add(i.onDidAccept(ie=>{const[fe]=i.selectedItems;fe&&fe.range&&(this.gotoLocation(e,{range:fe.range.selection,keyMods:i.keyMods,preserveFocus:ie.inBackground}),o?.handleAccept?.(fe),ie.inBackground||i.hide())})),g.add(i.onDidTriggerItemButton(({item:ie})=>{ie&&ie.range&&(this.gotoLocation(e,{range:ie.range.selection,keyMods:i.keyMods,forceSideBySide:!0}),i.hide())}));const k=this.getDocumentSymbols(t,s);let H;const ee=async ie=>{H?.dispose(!0),i.busy=!1,H=new Fi.Qi(s),i.busy=!0;try{const fe=Nv(i.value.substr(Tf.PREFIX.length).trim()),Me=await this.doGetSymbolPicks(k,fe,void 0,H.token,t);if(s.isCancellationRequested)return;if(Me.length>0){if(i.items=Me,ie&&fe.original.length===0){const xe=(0,Th.Uk)(Me,Qe=>!!(Qe.type!=="separator"&&Qe.range&&wt.Q.containsPosition(Qe.range.decoration,ie)));xe&&(i.activeItems=[xe])}}else fe.original.length>0?this.provideLabelPick(i,(0,Z.kg)("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(i,(0,Z.kg)("noSymbolResults","No editor symbols"))}finally{s.isCancellationRequested||(i.busy=!1)}};return g.add(i.onDidChangeValue(()=>ee(void 0))),ee(l.getSelection()?.getPosition()),g.add(i.onDidChangeActive(()=>{const[ie]=i.activeItems;ie&&ie.range&&(l.revealRangeInCenter(ie.range.selection,0),this.addDecorations(l,ie.range.decoration))})),g}async doGetSymbolPicks(e,t,i,s,o){const l=await e;if(s.isCancellationRequested)return[];const g=t.original.indexOf(Tf.SCOPE_PREFIX)===0,k=g?1:0;let H,ee;t.values&&t.values.length>1?(H=qb(t.values[0]),ee=qb(t.values.slice(1))):H=t;let ie;const fe=this.options?.openSideBySideDirection?.();fe&&(ie=[{iconClass:fe==="right"?mn.L.asClassName(Dt.W.splitHorizontal):mn.L.asClassName(Dt.W.splitVertical),tooltip:fe==="right"?(0,Z.kg)("openToSide","Open to the Side"):(0,Z.kg)("openToBottom","Open to the Bottom")}]);const Me=[];for(let ut=0;ut<l.length;ut++){const Lt=l[ut],kt=(0,Vi.Bq)(Lt.name),ni=`$(${Et.gP.toIcon(Lt.kind).id}) ${kt}`,gi=ni.length-kt.length;let pi=Lt.containerName;i?.extraContainerLabel&&(pi?pi=`${i.extraContainerLabel} \u2022 ${pi}`:pi=i.extraContainerLabel);let pn,ln,Fn,Ws;if(t.original.length>k){let Yo=!1;if(H!==t&&([pn,ln]=Mv(ni,{...t,values:void 0},k,gi),typeof pn=="number"&&(Yo=!0)),typeof pn!="number"&&([pn,ln]=Mv(ni,H,k,gi),typeof pn!="number"))continue;if(!Yo&&ee){if(pi&&ee.original.length>0&&([Fn,Ws]=Mv(pi,ee)),typeof Fn!="number")continue;typeof pn=="number"&&(pn+=Fn)}}const Rs=Lt.tags&&Lt.tags.indexOf(1)>=0;Me.push({index:ut,kind:Lt.kind,score:pn,label:ni,ariaLabel:(0,Et.PK)(Lt.name,Lt.kind),description:pi,highlights:Rs?void 0:{label:ln,description:Ws},range:{selection:wt.Q.collapseToStart(Lt.selectionRange),decoration:Lt.range},uri:o.uri,symbolName:kt,strikethrough:Rs,buttons:ie})}const xe=Me.sort((ut,Lt)=>g?this.compareByKindAndScore(ut,Lt):this.compareByScore(ut,Lt));let Qe=[];if(g){let ut=function(){kt&&typeof Lt=="number"&&ni>0&&(kt.label=(0,Vi.GP)(Rv[Lt]||Tv,ni))},Lt,kt,ni=0;for(const gi of xe)Lt!==gi.kind?(ut(),Lt=gi.kind,ni=1,kt={type:"separator"},Qe.push(kt)):ni++,Qe.push(gi);ut()}else xe.length>0&&(Qe=[{label:(0,Z.kg)("symbols","symbols ({0})",Me.length),type:"separator"},...xe]);return Qe}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const i=Rv[e.kind]||Tv,s=Rv[t.kind]||Tv,o=i.localeCompare(s);return o===0?this.compareByScore(e,t):o}async getDocumentSymbols(e,t){const i=await this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:i.asListOfDocumentSymbols()}};Lc=Tf=Kk([e1(0,_e.ILanguageFeaturesService),e1(1,Vh)],Lc);const Tv=(0,Z.kg)("property","properties ({0})"),Rv={5:(0,Z.kg)("method","methods ({0})"),11:(0,Z.kg)("function","functions ({0})"),8:(0,Z.kg)("_constructor","constructors ({0})"),12:(0,Z.kg)("variable","variables ({0})"),4:(0,Z.kg)("class","classes ({0})"),22:(0,Z.kg)("struct","structs ({0})"),23:(0,Z.kg)("event","events ({0})"),24:(0,Z.kg)("operator","operators ({0})"),10:(0,Z.kg)("interface","interfaces ({0})"),2:(0,Z.kg)("namespace","namespaces ({0})"),3:(0,Z.kg)("package","packages ({0})"),25:(0,Z.kg)("typeParameter","type parameters ({0})"),1:(0,Z.kg)("modules","modules ({0})"),6:(0,Z.kg)("property","properties ({0})"),9:(0,Z.kg)("enum","enumerations ({0})"),21:(0,Z.kg)("enumMember","enumeration members ({0})"),14:(0,Z.kg)("string","strings ({0})"),0:(0,Z.kg)("file","files ({0})"),17:(0,Z.kg)("array","arrays ({0})"),15:(0,Z.kg)("number","numbers ({0})"),16:(0,Z.kg)("boolean","booleans ({0})"),18:(0,Z.kg)("object","objects ({0})"),19:(0,Z.kg)("key","keys ({0})"),7:(0,Z.kg)("field","fields ({0})"),13:(0,Z.kg)("constant","constants ({0})")};var $k=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Pv=function(h,e){return function(t,i){e(t,i,h)}};let Av=class extends Lc{constructor(e,t,i){super(t,i),this.editorService=e,this.onDidActiveTextEditorControlChange=zi.Jh.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}};Av=$k([Pv(0,Xt.T),Pv(1,_e.ILanguageFeaturesService),Pv(2,Vh)],Av);class Rf extends we.ks{static{this.ID="editor.action.quickOutline"}constructor(){super({id:Rf.ID,label:ma.n9.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:ke.R.hasDocumentSymbolProvider,kbOpts:{kbExpr:ke.R.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(js.GK).quickAccess.show(Lc.PREFIX,{itemActivation:js.C1.NONE})}}(0,we.Fl)(Rf),qt.O.as(Su.Fd.Quickaccess).registerQuickAccessProvider({ctor:Av,prefix:Lc.PREFIX,helpEntries:[{description:ma.n9.quickOutlineActionLabel,prefix:Lc.PREFIX,commandId:Rf.ID},{description:ma.n9.quickOutlineByCategoryActionLabel,prefix:Lc.PREFIX_BY_CATEGORY}]});var Gk=c(60317),Qk=c(18709);function Yk(h){const e=new Map;for(const t of h)e.set(t,(e.get(t)??0)+1);return e}class Lu{constructor(){this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}calculateScores(e,t){const i=this.computeEmbedding(e),s=new Map,o=[];for(const[l,g]of this.documents){if(t.isCancellationRequested)return[];for(const k of g.chunks){const H=this.computeSimilarityScore(k,i,s);H>0&&o.push({key:l,score:H})}}return o}static termFrequencies(e){return Yk(Lu.splitTerms(e))}static*splitTerms(e){const t=i=>i.toLowerCase();for(const[i]of e.matchAll(new RegExp("\\b\\p{Letter}[\\p{Letter}\\d]{2,}\\b","gu"))){yield t(i);const s=i.replace(/([a-z])([A-Z])/g,"$1 $2").split(/\s+/g);if(s.length>1)for(const o of s)o.length>2&&new RegExp("\\p{Letter}{3,}","gu").test(o)&&(yield t(o))}}updateDocuments(e){for(const{key:t}of e)this.deleteDocument(t);for(const t of e){const i=[];for(const s of t.textChunks){const o=Lu.termFrequencies(s);for(const l of o.keys())this.chunkOccurrences.set(l,(this.chunkOccurrences.get(l)??0)+1);i.push({text:s,tf:o})}this.chunkCount+=i.length,this.documents.set(t.key,{chunks:i})}return this}deleteDocument(e){const t=this.documents.get(e);if(t){this.documents.delete(e),this.chunkCount-=t.chunks.length;for(const i of t.chunks)for(const s of i.tf.keys()){const o=this.chunkOccurrences.get(s);if(typeof o=="number"){const l=o-1;l<=0?this.chunkOccurrences.delete(s):this.chunkOccurrences.set(s,l)}}}}computeSimilarityScore(e,t,i){let s=0;for(const[o,l]of Object.entries(t)){const g=e.tf.get(o);if(!g)continue;let k=i.get(o);typeof k!="number"&&(k=this.computeIdf(o),i.set(o,k));const H=g*k;s+=H*l}return s}computeEmbedding(e){const t=Lu.termFrequencies(e);return this.computeTfidf(t)}computeIdf(e){const t=this.chunkOccurrences.get(e)??0;return t>0?Math.log((this.chunkCount+1)/t):0}computeTfidf(e){const t=Object.create(null);for(const[i,s]of e){const o=this.computeIdf(i);o>0&&(t[i]=s*o)}return t}}function Zk(h){const e=h.slice(0);e.sort((i,s)=>s.score-i.score);const t=e[0]?.score??0;if(t>0)for(const i of e)i.score/=t;return e}var Zd;(function(h){h[h.NO_ACTION=0]="NO_ACTION",h[h.CLOSE_PICKER=1]="CLOSE_PICKER",h[h.REFRESH_PICKER=2]="REFRESH_PICKER",h[h.REMOVE_ITEM=3]="REMOVE_ITEM"})(Zd||(Zd={}));function Ov(h){const e=h;return Array.isArray(e.items)}function t1(h){const e=h;return!!e.picks&&e.additionalPicks instanceof Promise}class Xk extends vt.jG{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t,i){const s=new vt.Cm;e.canAcceptInBackground=!!this.options?.canAcceptInBackground,e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let o;const l=s.add(new vt.HE),g=async()=>{const H=l.value=new vt.Cm;o?.dispose(!0),e.busy=!1,o=new Fi.Qi(t);const ee=o.token;let ie=e.value.substring(this.prefix.length);this.options?.shouldSkipTrimPickFilter||(ie=ie.trim());const fe=this._getPicks(ie,H,ee,i),Me=(Qe,ut)=>{let Lt,kt;if(Ov(Qe)?(Lt=Qe.items,kt=Qe.active):Lt=Qe,Lt.length===0){if(ut)return!1;(ie.length>0||e.hideInput)&&this.options?.noResultsPick&&((0,hn.Tn)(this.options.noResultsPick)?Lt=[this.options.noResultsPick(ie)]:Lt=[this.options.noResultsPick])}return e.items=Lt,kt&&(e.activeItems=[kt]),!0},xe=async Qe=>{let ut=!1,Lt=!1;await Promise.all([(async()=>{typeof Qe.mergeDelay=="number"&&(await(0,hi.wR)(Qe.mergeDelay),ee.isCancellationRequested)||Lt||(ut=Me(Qe.picks,!0))})(),(async()=>{e.busy=!0;try{const kt=await Qe.additionalPicks;if(ee.isCancellationRequested)return;let ni,gi;Ov(Qe.picks)?(ni=Qe.picks.items,gi=Qe.picks.active):ni=Qe.picks;let pi,pn;if(Ov(kt)?(pi=kt.items,pn=kt.active):pi=kt,pi.length>0||!ut){let ln;if(!gi&&!pn){const Fn=e.activeItems[0];Fn&&ni.indexOf(Fn)!==-1&&(ln=Fn)}Me({items:[...ni,...pi],active:gi||pn||ln})}}finally{ee.isCancellationRequested||(e.busy=!1),Lt=!0}})()])};if(fe!==null)if(t1(fe))await xe(fe);else if(!(fe instanceof Promise))Me(fe);else{e.busy=!0;try{const Qe=await fe;if(ee.isCancellationRequested)return;t1(Qe)?await xe(Qe):Me(Qe)}finally{ee.isCancellationRequested||(e.busy=!1)}}};s.add(e.onDidChangeValue(()=>g())),g(),s.add(e.onDidAccept(H=>{if(i?.handleAccept){H.inBackground||e.hide(),i.handleAccept?.(e.activeItems[0]);return}const[ee]=e.selectedItems;typeof ee?.accept=="function"&&(H.inBackground||e.hide(),ee.accept(e.keyMods,H))}));const k=async(H,ee)=>{if(typeof ee.trigger!="function")return;const ie=ee.buttons?.indexOf(H)??-1;if(ie>=0){const fe=ee.trigger(ie,e.keyMods),Me=typeof fe=="number"?fe:await fe;if(t.isCancellationRequested)return;switch(Me){case Zd.NO_ACTION:break;case Zd.CLOSE_PICKER:e.hide();break;case Zd.REFRESH_PICKER:g();break;case Zd.REMOVE_ITEM:{const xe=e.items.indexOf(ee);if(xe!==-1){const Qe=e.items.slice(),ut=Qe.splice(xe,1),Lt=e.activeItems.filter(ni=>ni!==ut[0]),kt=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=Qe,Lt&&(e.activeItems=Lt),e.keepScrollPosition=kt}break}}}};return s.add(e.onDidTriggerItemButton(({button:H,item:ee})=>k(H,ee))),s.add(e.onDidTriggerSeparatorButton(({button:H,separator:ee})=>k(H,ee))),s}}var i1=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ml=function(h,e){return function(t,i){e(t,i,h)}},Dc,Fs;let Fv=class extends Xk{static{Dc=this}static{this.PREFIX=">"}static{this.TFIDF_THRESHOLD=.5}static{this.TFIDF_MAX_RESULTS=5}static{this.WORD_FILTER=(0,Xs.or)(Xs.WP,Xs.J1,Xs.Tt)}constructor(e,t,i,s,o,l){super(Dc.PREFIX,e),this.instantiationService=t,this.keybindingService=i,this.commandService=s,this.telemetryService=o,this.dialogService=l,this.commandsHistory=this._register(this.instantiationService.createInstance(Wv)),this.options=e}async _getPicks(e,t,i,s){const o=await this.getCommandPicks(i);if(i.isCancellationRequested)return[];const l=(0,$b.P)(()=>{const Me=new Lu;Me.updateDocuments(o.map(Qe=>({key:Qe.commandId,textChunks:[this.getTfIdfChunk(Qe)]})));const xe=Me.calculateScores(e,i);return Zk(xe).filter(Qe=>Qe.score>Dc.TFIDF_THRESHOLD).slice(0,Dc.TFIDF_MAX_RESULTS)}),g=[];for(const Me of o){const xe=Dc.WORD_FILTER(e,Me.label)??void 0,Qe=Me.commandAlias?Dc.WORD_FILTER(e,Me.commandAlias)??void 0:void 0;if(xe||Qe)Me.highlights={label:xe,detail:this.options.showAlias?Qe:void 0},g.push(Me);else if(e===Me.commandId)g.push(Me);else if(e.length>=3){const ut=l();if(i.isCancellationRequested)return[];const Lt=ut.find(kt=>kt.key===Me.commandId);Lt&&(Me.tfIdfScore=Lt.score,g.push(Me))}}const k=new Map;for(const Me of g){const xe=k.get(Me.label);xe?(Me.description=Me.commandId,xe.description=xe.commandId):k.set(Me.label,Me)}g.sort((Me,xe)=>{if(Me.tfIdfScore&&xe.tfIdfScore)return Me.tfIdfScore===xe.tfIdfScore?Me.label.localeCompare(xe.label):xe.tfIdfScore-Me.tfIdfScore;if(Me.tfIdfScore)return 1;if(xe.tfIdfScore)return-1;const Qe=this.commandsHistory.peek(Me.commandId),ut=this.commandsHistory.peek(xe.commandId);if(Qe&&ut)return Qe>ut?-1:1;if(Qe)return-1;if(ut)return 1;if(this.options.suggestedCommandIds){const Lt=this.options.suggestedCommandIds.has(Me.commandId),kt=this.options.suggestedCommandIds.has(xe.commandId);if(Lt&&kt)return 0;if(Lt)return-1;if(kt)return 1}return Me.label.localeCompare(xe.label)});const H=[];let ee=!1,ie=!0,fe=!!this.options.suggestedCommandIds;for(let Me=0;Me<g.length;Me++){const xe=g[Me];Me===0&&this.commandsHistory.peek(xe.commandId)&&(H.push({type:"separator",label:(0,Z.kg)("recentlyUsed","recently used")}),ee=!0),ie&&xe.tfIdfScore!==void 0&&(H.push({type:"separator",label:(0,Z.kg)("suggested","similar commands")}),ie=!1),fe&&xe.tfIdfScore===void 0&&!this.commandsHistory.peek(xe.commandId)&&this.options.suggestedCommandIds?.has(xe.commandId)&&(H.push({type:"separator",label:(0,Z.kg)("commonlyUsed","commonly used")}),ee=!0,fe=!1),ee&&xe.tfIdfScore===void 0&&!this.commandsHistory.peek(xe.commandId)&&!this.options.suggestedCommandIds?.has(xe.commandId)&&(H.push({type:"separator",label:(0,Z.kg)("morecCommands","other commands")}),ee=!1),H.push(this.toCommandPick(xe,s))}return this.hasAdditionalCommandPicks(e,i)?{picks:H,additionalPicks:(async()=>{const Me=await this.getAdditionalCommandPicks(o,g,e,i);if(i.isCancellationRequested)return[];const xe=Me.map(Qe=>this.toCommandPick(Qe,s));return ie&&xe[0]?.type!=="separator"&&xe.unshift({type:"separator",label:(0,Z.kg)("suggested","similar commands")}),xe})()}:H}toCommandPick(e,t){if(e.type==="separator")return e;const i=this.keybindingService.lookupKeybinding(e.commandId),s=i?(0,Z.kg)("commandPickAriaLabelWithKeybinding","{0}, {1}",e.label,i.getAriaLabel()):e.label;return{...e,ariaLabel:s,detail:this.options.showAlias&&e.commandAlias!==e.label?e.commandAlias:void 0,keybinding:i,accept:async()=>{this.commandsHistory.push(e.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.commandId,from:t?.from??"quick open"});try{e.args?.length?await this.commandService.executeCommand(e.commandId,...e.args):await this.commandService.executeCommand(e.commandId)}catch(o){(0,Ni.MB)(o)||this.dialogService.error((0,Z.kg)("canNotRun","Command '{0}' resulted in an error",e.label),yr(o))}}}}getTfIdfChunk({label:e,commandAlias:t,commandDescription:i}){let s=e;return t&&t!==e&&(s+=` - ${t}`),i&&i.value!==e&&(s+=` - ${i.value===i.original?i.value:`${i.value} (${i.original})`}`),s}};Fv=Dc=i1([Ml(1,Ri._Y),Ml(2,ms.b),Ml(3,Di.d),Ml(4,is.k),Ml(5,pv.X)],Fv);let Wv=class extends vt.jG{static{Fs=this}static{this.DEFAULT_COMMANDS_HISTORY_LENGTH=50}static{this.PREF_KEY_CACHE="commandPalette.mru.cache"}static{this.PREF_KEY_COUNTER="commandPalette.mru.counter"}static{this.counter=1}static{this.hasChanges=!1}constructor(e,t,i){super(),this.storageService=e,this.configurationService=t,this.logService=i,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateConfiguration(e))),this._register(this.storageService.onWillSaveState(e=>{e.reason===Ji.LP.SHUTDOWN&&this.saveState()}))}updateConfiguration(e){e&&!e.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=Fs.getConfiguredCommandHistoryLength(this.configurationService),Fs.cache&&Fs.cache.limit!==this.configuredCommandsHistoryLength&&(Fs.cache.limit=this.configuredCommandsHistoryLength,Fs.hasChanges=!0))}load(){const e=this.storageService.get(Fs.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch(s){this.logService.error(`[CommandsHistory] invalid data: ${s}`)}const i=Fs.cache=new Ai.qK(this.configuredCommandsHistoryLength,1);if(t){let s;t.usesLRU?s=t.entries:s=t.entries.sort((o,l)=>o.value-l.value),s.forEach(o=>i.set(o.key,o.value))}Fs.counter=this.storageService.getNumber(Fs.PREF_KEY_COUNTER,0,Fs.counter)}push(e){Fs.cache&&(Fs.cache.set(e,Fs.counter++),Fs.hasChanges=!0)}peek(e){return Fs.cache?.peek(e)}saveState(){if(!Fs.cache||!Fs.hasChanges)return;const e={usesLRU:!0,entries:[]};Fs.cache.forEach((t,i)=>e.entries.push({key:i,value:t})),this.storageService.store(Fs.PREF_KEY_CACHE,JSON.stringify(e),0,0),this.storageService.store(Fs.PREF_KEY_COUNTER,Fs.counter,0,0),Fs.hasChanges=!1}static getConfiguredCommandHistoryLength(e){const i=e.getValue().workbench?.commandPalette?.history;return typeof i=="number"?i:Fs.DEFAULT_COMMANDS_HISTORY_LENGTH}};Wv=Fs=i1([Ml(0,Ji.CS),Ml(1,pt.pG),Ml(2,gc.rr)],Wv);class Jk extends Fv{constructor(e,t,i,s,o,l){super(e,t,i,s,o,l)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const i of e.getSupportedActions()){let s;i.metadata?.description&&((0,Qk.f)(i.metadata.description)?s=i.metadata.description:s={original:i.metadata.description,value:i.metadata.description}),t.push({commandId:i.id,commandAlias:i.alias,commandDescription:s,label:(0,Gk.pS)(i.label)||i.id})}return t}}var qk=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Xd=function(h,e){return function(t,i){e(t,i,h)}};let Du=class extends Jk{get activeTextEditorControl(){return this.codeEditorService.getFocusedCodeEditor()??void 0}constructor(e,t,i,s,o,l){super({showAlias:!1},e,i,s,o,l),this.codeEditorService=t}async getCommandPicks(){return this.getCodeEditorCommandPicks()}hasAdditionalCommandPicks(){return!1}async getAdditionalCommandPicks(){return[]}};Du=qk([Xd(0,Ri._Y),Xd(1,Xt.T),Xd(2,ms.b),Xd(3,Di.d),Xd(4,is.k),Xd(5,pv.X)],Du);class Pf extends we.ks{static{this.ID="editor.action.quickCommand"}constructor(){super({id:Pf.ID,label:ma.gf.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:ke.R.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(js.GK).quickAccess.show(Du.PREFIX)}}(0,we.Fl)(Pf),qt.O.as(Su.Fd.Quickaccess).registerQuickAccessProvider({ctor:Du,prefix:Du.PREFIX,helpEntries:[{description:ma.gf.quickCommandHelp,commandId:Pf.ID}]});var eI=function(h,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(h,e,t,i);else for(var g=h.length-1;g>=0;g--)(l=h[g])&&(o=(s<3?l(o):s>3?l(e,t,o):l(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Jd=function(h,e){return function(t,i){e(t,i,h)}};let Bv=class extends Nt{constructor(e,t,i,s,o,l,g){super(!0,e,t,i,s,o,l,g)}};Bv=eI([Jd(1,et.fN),Jd(2,Xt.T),Jd(3,As.Ot),Jd(4,Ri._Y),Jd(5,Ji.CS),Jd(6,pt.pG)],Bv),(0,we.HW)(Nt.ID,Bv,4);var Af=c(14318);class tI extends we.ks{constructor(){super({id:"editor.action.toggleHighContrast",label:ma.E6.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const i=e.get(zb.L),s=i.getColorTheme();(0,Rr.Bb)(s.type)?(i.setTheme(this._originalThemeName||((0,Rr.HD)(s.type)?Af.po:Af.tj)),this._originalThemeName=null):(i.setTheme((0,Rr.HD)(s.type)?Af.aQ:Af.nr),this._originalThemeName=s.themeName)}}(0,we.Fl)(tI)},47192:(Mt,He,c)=>{c.d(He,{G$:()=>w,Of:()=>U,r0:()=>P,rr:()=>M});var u=c(45573);class G{constructor(I,b,C=b){this.modifierLabels=[null],this.modifierLabels[2]=I,this.modifierLabels[1]=b,this.modifierLabels[3]=C}toLabel(I,b,C){if(b.length===0)return null;const v=[];for(let _=0,d=b.length;_<d;_++){const m=b[_],S=C(m);if(S===null)return null;v[_]=O(m,S,this.modifierLabels[I])}return v.join(" ")}}const U=new G({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:u.kg({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:u.kg({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:u.kg({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:u.kg({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:u.kg({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:u.kg({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:u.kg({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:u.kg({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),P=new G({ctrlKey:u.kg({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:u.kg({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:u.kg({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:u.kg({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:u.kg({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:u.kg({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:u.kg({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:u.kg({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:u.kg({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:u.kg({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:u.kg({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:u.kg({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),M=new G({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),w=new G({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function O(A,I,b){if(I===null)return"";const C=[];return A.ctrlKey&&C.push(b.ctrlKey),A.shiftKey&&C.push(b.shiftKey),A.altKey&&C.push(b.altKey),A.metaKey&&C.push(b.metaKey),I!==""&&C.push(I),C.join(b.separator)}},47223:(Mt,He,c)=>{c.d(He,{$y:()=>v,AV:()=>B,Am:()=>I,D1:()=>D,EK:()=>Q,MZ:()=>z,Mu:()=>W,Nu:()=>d,O8:()=>q,Vs:()=>R,pN:()=>_,pY:()=>b,rX:()=>C,uN:()=>S});var u=c(51922),G=c(46204),U=c(60599),P=c(63886),M=c(45338),w=c(69504),O=c(98414),A=c(43228);function I(Re,Ae,re,K){if(Re.length===0)return Ae;if(Ae.length===0)return Re;const F=[];let N=0,j=0;for(;N<Re.length&&j<Ae.length;){const me=Re[N],ce=Ae[j],he=re(me),Le=re(ce);he<Le?(F.push(me),N++):he>Le?(F.push(ce),j++):(F.push(K(me,ce)),N++,j++)}for(;N<Re.length;)F.push(Re[N]),N++;for(;j<Ae.length;)F.push(Ae[j]),j++;return F}function b(Re,Ae){const re=new U.Cm,K=Re.createDecorationsCollection();return re.add((0,P.zL)({debugName:()=>`Apply decorations from ${Ae.debugName}`},F=>{const N=Ae.read(F);K.set(N)})),re.add({dispose:()=>{K.clear()}}),re}function C(Re,Ae){return Re.appendChild(Ae),(0,U.s)(()=>{Ae.remove()})}function v(Re,Ae){return Re.prepend(Ae),(0,U.s)(()=>{Ae.remove()})}class _ extends U.jG{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(Ae,re){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new M.u(Ae,re)),this._width=(0,P.FY)(this,this.elementSizeObserver.getWidth()),this._height=(0,P.FY)(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(K=>(0,P.Rn)(F=>{this._width.set(this.elementSizeObserver.getWidth(),F),this._height.set(this.elementSizeObserver.getHeight(),F)})))}observe(Ae){this.elementSizeObserver.observe(Ae)}setAutomaticLayout(Ae){this._automaticLayout=Ae,Ae?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function d(Re,Ae,re){let K=Ae.get(),F=K,N=K;const j=(0,P.FY)("animatedValue",K);let me=-1;const ce=300;let he;re.add((0,P.Y)({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(Y,ae)=>(Y.didChange(Ae)&&(ae.animate=ae.animate||Y.change),!0)},(Y,ae)=>{he!==void 0&&(Re.cancelAnimationFrame(he),he=void 0),F=N,K=Ae.read(Y),me=Date.now()-(ae.animate?0:ce),Le()}));function Le(){const Y=Date.now()-me;N=Math.floor(m(Y,F,K-F,ce)),Y<ce?he=Re.requestAnimationFrame(Le):N=K,j.set(N,void 0)}return j}function m(Re,Ae,re,K){return Re===K?Ae+re:re*(-Math.pow(2,-10*Re/K)+1)+Ae}class S extends U.jG{constructor(Ae,re,K){super(),this._register(new E(Ae,K)),this._register(B(K,{height:re.actualHeight,top:re.actualTop}))}}class D{get afterLineNumber(){return this._afterLineNumber.get()}constructor(Ae,re){this._afterLineNumber=Ae,this.heightInPx=re,this.domNode=document.createElement("div"),this._actualTop=(0,P.FY)(this,void 0),this._actualHeight=(0,P.FY)(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=K=>{this._actualTop.set(K,void 0)},this.onComputedHeight=K=>{this._actualHeight.set(K,void 0)}}}class E{static{this._counter=0}constructor(Ae,re){this._editor=Ae,this._domElement=re,this._overlayWidgetId=`managedOverlayWidget-${E._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}}function B(Re,Ae){return(0,P.fm)(re=>{for(let[K,F]of Object.entries(Ae))F&&typeof F=="object"&&"read"in F&&(F=F.read(re)),typeof F=="number"&&(F=`${F}px`),K=K.replace(/[A-Z]/g,N=>"-"+N.toLowerCase()),Re.style[K]=F})}function R(Re,Ae,re,K){const F=new U.Cm,N=[];return F.add((0,P.yC)((j,me)=>{const ce=Ae.read(j),he=new Map,Le=new Map;re&&re(!0),Re.changeViewZones(Y=>{for(const ae of N)Y.removeZone(ae),K?.delete(ae);N.length=0;for(const ae of ce){const Ce=Y.addZone(ae);ae.setZoneId&&ae.setZoneId(Ce),N.push(Ce),K?.add(Ce),he.set(ae,Ce)}}),re&&re(!1),me.add((0,P.Y)({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(Y,ae){const Ce=Le.get(Y.changedObservable);return Ce!==void 0&&ae.zoneIds.push(Ce),!0}},(Y,ae)=>{for(const Ce of ce)Ce.onChange&&(Le.set(Ce.onChange,he.get(Ce)),Ce.onChange.read(Y));re&&re(!0),Re.changeViewZones(Ce=>{for(const Pe of ae.zoneIds)Ce.layoutZone(Pe)}),re&&re(!1)}))})),F.add({dispose(){re&&re(!0),Re.changeViewZones(j=>{for(const me of N)j.removeZone(me)}),K?.clear(),re&&re(!1)}}),F}class z extends G.Qi{dispose(){super.dispose(!0)}}function W(Re,Ae){const re=(0,u.Uk)(Ae,F=>F.original.startLineNumber<=Re.lineNumber);if(!re)return O.Q.fromPositions(Re);if(re.original.endLineNumberExclusive<=Re.lineNumber){const F=Re.lineNumber-re.original.endLineNumberExclusive+re.modified.endLineNumberExclusive;return O.Q.fromPositions(new w.y(F,Re.column))}if(!re.innerChanges)return O.Q.fromPositions(new w.y(re.modified.startLineNumber,1));const K=(0,u.Uk)(re.innerChanges,F=>F.originalRange.getStartPosition().isBeforeOrEqual(Re));if(!K){const F=Re.lineNumber-re.original.startLineNumber+re.modified.startLineNumber;return O.Q.fromPositions(new w.y(F,Re.column))}if(K.originalRange.containsPosition(Re))return K.modifiedRange;{const F=$(K.originalRange.getEndPosition(),Re);return O.Q.fromPositions(F.addToPosition(K.modifiedRange.getEndPosition()))}}function $(Re,Ae){return Re.lineNumber===Ae.lineNumber?new A.W(0,Ae.column-Re.column):new A.W(Ae.lineNumber-Re.lineNumber,Ae.column-1)}function Q(Re,Ae){let re;return Re.filter(K=>{const F=Ae(K,re);return re=K,F})}class q{static create(Ae,re=void 0){return new ne(Ae,Ae,re)}static createWithDisposable(Ae,re,K=void 0){const F=new U.Cm;return F.add(re),F.add(Ae),new ne(Ae,F,K)}}class ne extends q{constructor(Ae,re,K){super(),this.object=Ae,this._disposable=re,this._debugOwner=K,this._refCount=1,this._isDisposed=!1,this._owners=[],K&&this._addOwner(K)}_addOwner(Ae){Ae&&this._owners.push(Ae)}createNewRef(Ae){return this._refCount++,Ae&&this._addOwner(Ae),new ve(this,Ae)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(Ae){if(this._refCount--,this._refCount===0&&this._disposable.dispose(),Ae){const re=this._owners.indexOf(Ae);re!==-1&&this._owners.splice(re,1)}}}class ve extends q{constructor(Ae,re){super(),this._base=Ae,this._debugOwner=re,this._isDisposed=!1}get object(){return this._base.object}createNewRef(Ae){return this._base.createNewRef(Ae)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}},47484:(Mt,He,c)=>{c.d(He,{L:()=>G});var u=c(81545);const G=(0,u.u1)("labelService")},47545:(Mt,He,c)=>{c.d(He,{L:()=>U});var u=c(69504),G=c(98414);class U extends G.Q{constructor(M,w,O,A){super(M,w,O,A),this.selectionStartLineNumber=M,this.selectionStartColumn=w,this.positionLineNumber=O,this.positionColumn=A}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(M){return U.selectionsEqual(this,M)}static selectionsEqual(M,w){return M.selectionStartLineNumber===w.selectionStartLineNumber&&M.selectionStartColumn===w.selectionStartColumn&&M.positionLineNumber===w.positionLineNumber&&M.positionColumn===w.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(M,w){return this.getDirection()===0?new U(this.startLineNumber,this.startColumn,M,w):new U(M,w,this.startLineNumber,this.startColumn)}getPosition(){return new u.y(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new u.y(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(M,w){return this.getDirection()===0?new U(M,w,this.endLineNumber,this.endColumn):new U(this.endLineNumber,this.endColumn,M,w)}static fromPositions(M,w=M){return new U(M.lineNumber,M.column,w.lineNumber,w.column)}static fromRange(M,w){return w===0?new U(M.startLineNumber,M.startColumn,M.endLineNumber,M.endColumn):new U(M.endLineNumber,M.endColumn,M.startLineNumber,M.startColumn)}static liftSelection(M){return new U(M.selectionStartLineNumber,M.selectionStartColumn,M.positionLineNumber,M.positionColumn)}static selectionsArrEqual(M,w){if(M&&!w||!M&&w)return!1;if(!M&&!w)return!0;if(M.length!==w.length)return!1;for(let O=0,A=M.length;O<A;O++)if(!this.selectionsEqual(M[O],w[O]))return!1;return!0}static isISelection(M){return M&&typeof M.selectionStartLineNumber=="number"&&typeof M.selectionStartColumn=="number"&&typeof M.positionLineNumber=="number"&&typeof M.positionColumn=="number"}static createWithDirection(M,w,O,A,I){return I===0?new U(M,w,O,A):new U(O,A,M,w)}}},47896:(Mt,He,c)=>{c.d(He,{F:()=>w,l:()=>O});var u=c(62385),G=c(42640),U=c(56491),P=c(15903),M=c(91779);const w={inputActiveOptionBorder:"#007ACC00",inputActiveOptionForeground:"#FFFFFF",inputActiveOptionBackground:"#0E639C50"};class O extends u.x{constructor(I){super(),this._onChange=this._register(new U.vl),this.onChange=this._onChange.event,this._onKeyDown=this._register(new U.vl),this.onKeyDown=this._onKeyDown.event,this._opts=I,this._checked=this._opts.isChecked;const b=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,b.push(...G.L.asClassNameArray(this._icon))),this._opts.actionClassName&&b.push(...this._opts.actionClassName.split(" ")),this._checked&&b.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register((0,M.i)().setupManagedHover(I.hoverDelegate??(0,P.nZ)("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...b),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,C=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),C.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,C=>{if(C.keyCode===10||C.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),C.preventDefault(),C.stopPropagation();return}this._onKeyDown.fire(C)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(I){this._checked=I,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}},47917:(Mt,He,c)=>{c.d(He,{iP:()=>M,iu:()=>G,q2:()=>P,tA:()=>U,ui:()=>w});var u=c(47545);class G{constructor(A,I,b=!1){this._range=A,this._text=I,this.insertsAutoWhitespace=b}getEditOperations(A,I){I.addTrackedEditOperation(this._range,this._text)}computeCursorState(A,I){const C=I.getInverseEditOperations()[0].range;return u.L.fromPositions(C.getEndPosition())}}class U{constructor(A,I){this._range=A,this._text=I}getEditOperations(A,I){I.addTrackedEditOperation(this._range,this._text)}computeCursorState(A,I){const C=I.getInverseEditOperations()[0].range;return u.L.fromRange(C,0)}}class P{constructor(A,I,b=!1){this._range=A,this._text=I,this.insertsAutoWhitespace=b}getEditOperations(A,I){I.addTrackedEditOperation(this._range,this._text)}computeCursorState(A,I){const C=I.getInverseEditOperations()[0].range;return u.L.fromPositions(C.getStartPosition())}}class M{constructor(A,I,b,C,v=!1){this._range=A,this._text=I,this._columnDeltaOffset=C,this._lineNumberDeltaOffset=b,this.insertsAutoWhitespace=v}getEditOperations(A,I){I.addTrackedEditOperation(this._range,this._text)}computeCursorState(A,I){const C=I.getInverseEditOperations()[0].range;return u.L.fromPositions(C.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class w{constructor(A,I,b,C=!1){this._range=A,this._text=I,this._initialSelection=b,this._forceMoveMarkers=C,this._selectionId=null}getEditOperations(A,I){I.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=I.trackSelection(this._initialSelection)}computeCursorState(A,I){return I.getTrackedSelection(this._selectionId)}}},49048:(Mt,He,c)=>{c.d(He,{A:()=>U});var u=c(85565),G;(function(P){P[P.Ignore=0]="Ignore",P[P.Info=1]="Info",P[P.Warning=2]="Warning",P[P.Error=3]="Error"})(G||(G={})),function(P){const M="error",w="warning",O="warn",A="info",I="ignore";function b(v){return v?u.Q_(M,v)?P.Error:u.Q_(w,v)||u.Q_(O,v)?P.Warning:u.Q_(A,v)?P.Info:P.Ignore:P.Ignore}P.fromValue=b;function C(v){switch(v){case P.Error:return M;case P.Warning:return w;case P.Info:return A;default:return I}}P.toString=C}(G||(G={}));const U=G},49336:(Mt,He,c)=>{c.r(He),c.d(He,{BaseEditorSimpleWorker:()=>ot,EditorSimpleWorker:()=>Pt,create:()=>Wt});var u=c(96835),G=c(98414),U=c(79821);class P{constructor(at,Xe,pe){const te=new Uint8Array(at*Xe);for(let oe=0,Te=at*Xe;oe<Te;oe++)te[oe]=pe;this._data=te,this.rows=at,this.cols=Xe}get(at,Xe){return this._data[at*this.cols+Xe]}set(at,Xe,pe){this._data[at*this.cols+Xe]=pe}}class M{constructor(at){let Xe=0,pe=0;for(let oe=0,Te=at.length;oe<Te;oe++){const[Ve,We,dt]=at[oe];We>Xe&&(Xe=We),Ve>pe&&(pe=Ve),dt>pe&&(pe=dt)}Xe++,pe++;const te=new P(pe,Xe,0);for(let oe=0,Te=at.length;oe<Te;oe++){const[Ve,We,dt]=at[oe];te.set(Ve,We,dt)}this._states=te,this._maxCharCode=Xe}nextState(at,Xe){return Xe<0||Xe>=this._maxCharCode?0:this._states.get(at,Xe)}}let w=null;function O(){return w===null&&(w=new M([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),w}let A=null;function I(){if(A===null){A=new U.V(0);const Rt=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let Xe=0;Xe<Rt.length;Xe++)A.set(Rt.charCodeAt(Xe),1);const at=".,;:";for(let Xe=0;Xe<at.length;Xe++)A.set(at.charCodeAt(Xe),2)}return A}class b{static _createLink(at,Xe,pe,te,oe){let Te=oe-1;do{const Ve=Xe.charCodeAt(Te);if(at.get(Ve)!==2)break;Te--}while(Te>te);if(te>0){const Ve=Xe.charCodeAt(te-1),We=Xe.charCodeAt(Te);(Ve===40&&We===41||Ve===91&&We===93||Ve===123&&We===125)&&Te--}return{range:{startLineNumber:pe,startColumn:te+1,endLineNumber:pe,endColumn:Te+2},url:Xe.substring(te,Te+1)}}static computeLinks(at,Xe=O()){const pe=I(),te=[];for(let oe=1,Te=at.getLineCount();oe<=Te;oe++){const Ve=at.getLineContent(oe),We=Ve.length;let dt=0,Ye=0,mt=0,Dt=1,Se=!1,we=!1,Xt=!1,ri=!1;for(;dt<We;){let ke=!1;const Z=Ve.charCodeAt(dt);if(Dt===13){let Fe;switch(Z){case 40:Se=!0,Fe=0;break;case 41:Fe=Se?0:1;break;case 91:Xt=!0,we=!0,Fe=0;break;case 93:Xt=!1,Fe=we?0:1;break;case 123:ri=!0,Fe=0;break;case 125:Fe=ri?0:1;break;case 39:case 34:case 96:mt===Z?Fe=1:mt===39||mt===34||mt===96?Fe=0:Fe=1;break;case 42:Fe=mt===42?1:0;break;case 124:Fe=mt===124?1:0;break;case 32:Fe=Xt?0:1;break;default:Fe=pe.get(Z)}Fe===1&&(te.push(b._createLink(pe,Ve,oe,Ye,dt)),ke=!0)}else if(Dt===12){let Fe;Z===91?(we=!0,Fe=0):Fe=pe.get(Z),Fe===1?ke=!0:Dt=13}else Dt=Xe.nextState(Dt,Z),Dt===0&&(ke=!0);ke&&(Dt=1,Se=!1,we=!1,ri=!1,Ye=dt+1,mt=Z),dt++}Dt===13&&te.push(b._createLink(pe,Ve,oe,Ye,We))}return te}}function C(Rt){return!Rt||typeof Rt.getLineCount!="function"||typeof Rt.getLineContent!="function"?[]:b.computeLinks(Rt)}class v{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}static{this.INSTANCE=new v}navigateValueSet(at,Xe,pe,te,oe){if(at&&Xe){const Te=this.doNavigateValueSet(Xe,oe);if(Te)return{range:at,value:Te}}if(pe&&te){const Te=this.doNavigateValueSet(te,oe);if(Te)return{range:pe,value:Te}}return null}doNavigateValueSet(at,Xe){const pe=this.numberReplace(at,Xe);return pe!==null?pe:this.textReplace(at,Xe)}numberReplace(at,Xe){const pe=Math.pow(10,at.length-(at.lastIndexOf(".")+1));let te=Number(at);const oe=parseFloat(at);return!isNaN(te)&&!isNaN(oe)&&te===oe?te===0&&!Xe?null:(te=Math.floor(te*pe),te+=Xe?pe:-pe,String(te/pe)):null}textReplace(at,Xe){return this.valueSetsReplace(this._defaultValueSet,at,Xe)}valueSetsReplace(at,Xe,pe){let te=null;for(let oe=0,Te=at.length;te===null&&oe<Te;oe++)te=this.valueSetReplace(at[oe],Xe,pe);return te}valueSetReplace(at,Xe,pe){let te=at.indexOf(Xe);return te>=0?(te+=pe?1:-1,te<0?te=at.length-1:te%=at.length,at[te]):null}}var _=c(45892),d=c(41439),m=c(4156),S=c(90128),D=c(38554),E=c(81182),B=c(85565),R=c(6105),z=c(33924);const W=3;class ${computeDiff(at,Xe,pe){const oe=new re(at,Xe,{maxComputationTime:pe.maxComputationTimeMs,shouldIgnoreTrimWhitespace:pe.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),Te=[];let Ve=null;for(const We of oe.changes){let dt;We.originalEndLineNumber===0?dt=new z.M(We.originalStartLineNumber+1,We.originalStartLineNumber+1):dt=new z.M(We.originalStartLineNumber,We.originalEndLineNumber+1);let Ye;We.modifiedEndLineNumber===0?Ye=new z.M(We.modifiedStartLineNumber+1,We.modifiedStartLineNumber+1):Ye=new z.M(We.modifiedStartLineNumber,We.modifiedEndLineNumber+1);let mt=new E.wm(dt,Ye,We.charChanges?.map(Dt=>new E.q6(new G.Q(Dt.originalStartLineNumber,Dt.originalStartColumn,Dt.originalEndLineNumber,Dt.originalEndColumn),new G.Q(Dt.modifiedStartLineNumber,Dt.modifiedStartColumn,Dt.modifiedEndLineNumber,Dt.modifiedEndColumn))));Ve&&(Ve.modified.endLineNumberExclusive===mt.modified.startLineNumber||Ve.original.endLineNumberExclusive===mt.original.startLineNumber)&&(mt=new E.wm(Ve.original.join(mt.original),Ve.modified.join(mt.modified),Ve.innerChanges&&mt.innerChanges?Ve.innerChanges.concat(mt.innerChanges):void 0),Te.pop()),Te.push(mt),Ve=mt}return(0,R.Ft)(()=>(0,R.Xo)(Te,(We,dt)=>dt.original.startLineNumber-We.original.endLineNumberExclusive===dt.modified.startLineNumber-We.modified.endLineNumberExclusive&&We.original.endLineNumberExclusive<dt.original.startLineNumber&&We.modified.endLineNumberExclusive<dt.modified.startLineNumber)),new D.p(Te,[],oe.quitEarly)}}function Q(Rt,at,Xe,pe){return new u.uP(Rt,at,Xe).ComputeDiff(pe)}class q{constructor(at){const Xe=[],pe=[];for(let te=0,oe=at.length;te<oe;te++)Xe[te]=K(at[te],1),pe[te]=F(at[te],1);this.lines=at,this._startColumns=Xe,this._endColumns=pe}getElements(){const at=[];for(let Xe=0,pe=this.lines.length;Xe<pe;Xe++)at[Xe]=this.lines[Xe].substring(this._startColumns[Xe]-1,this._endColumns[Xe]-1);return at}getStrictElement(at){return this.lines[at]}getStartLineNumber(at){return at+1}getEndLineNumber(at){return at+1}createCharSequence(at,Xe,pe){const te=[],oe=[],Te=[];let Ve=0;for(let We=Xe;We<=pe;We++){const dt=this.lines[We],Ye=at?this._startColumns[We]:1,mt=at?this._endColumns[We]:dt.length+1;for(let Dt=Ye;Dt<mt;Dt++)te[Ve]=dt.charCodeAt(Dt-1),oe[Ve]=We+1,Te[Ve]=Dt,Ve++;!at&&We<pe&&(te[Ve]=10,oe[Ve]=We+1,Te[Ve]=dt.length+1,Ve++)}return new ne(te,oe,Te)}}class ne{constructor(at,Xe,pe){this._charCodes=at,this._lineNumbers=Xe,this._columns=pe}toString(){return"["+this._charCodes.map((at,Xe)=>(at===10?"\\n":String.fromCharCode(at))+`-(${this._lineNumbers[Xe]},${this._columns[Xe]})`).join(", ")+"]"}_assertIndex(at,Xe){if(at<0||at>=Xe.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(at){return at>0&&at===this._lineNumbers.length?this.getEndLineNumber(at-1):(this._assertIndex(at,this._lineNumbers),this._lineNumbers[at])}getEndLineNumber(at){return at===-1?this.getStartLineNumber(at+1):(this._assertIndex(at,this._lineNumbers),this._charCodes[at]===10?this._lineNumbers[at]+1:this._lineNumbers[at])}getStartColumn(at){return at>0&&at===this._columns.length?this.getEndColumn(at-1):(this._assertIndex(at,this._columns),this._columns[at])}getEndColumn(at){return at===-1?this.getStartColumn(at+1):(this._assertIndex(at,this._columns),this._charCodes[at]===10?1:this._columns[at]+1)}}class ve{constructor(at,Xe,pe,te,oe,Te,Ve,We){this.originalStartLineNumber=at,this.originalStartColumn=Xe,this.originalEndLineNumber=pe,this.originalEndColumn=te,this.modifiedStartLineNumber=oe,this.modifiedStartColumn=Te,this.modifiedEndLineNumber=Ve,this.modifiedEndColumn=We}static createFromDiffChange(at,Xe,pe){const te=Xe.getStartLineNumber(at.originalStart),oe=Xe.getStartColumn(at.originalStart),Te=Xe.getEndLineNumber(at.originalStart+at.originalLength-1),Ve=Xe.getEndColumn(at.originalStart+at.originalLength-1),We=pe.getStartLineNumber(at.modifiedStart),dt=pe.getStartColumn(at.modifiedStart),Ye=pe.getEndLineNumber(at.modifiedStart+at.modifiedLength-1),mt=pe.getEndColumn(at.modifiedStart+at.modifiedLength-1);return new ve(te,oe,Te,Ve,We,dt,Ye,mt)}}function Re(Rt){if(Rt.length<=1)return Rt;const at=[Rt[0]];let Xe=at[0];for(let pe=1,te=Rt.length;pe<te;pe++){const oe=Rt[pe],Te=oe.originalStart-(Xe.originalStart+Xe.originalLength),Ve=oe.modifiedStart-(Xe.modifiedStart+Xe.modifiedLength);Math.min(Te,Ve)<W?(Xe.originalLength=oe.originalStart+oe.originalLength-Xe.originalStart,Xe.modifiedLength=oe.modifiedStart+oe.modifiedLength-Xe.modifiedStart):(at.push(oe),Xe=oe)}return at}class Ae{constructor(at,Xe,pe,te,oe){this.originalStartLineNumber=at,this.originalEndLineNumber=Xe,this.modifiedStartLineNumber=pe,this.modifiedEndLineNumber=te,this.charChanges=oe}static createFromDiffResult(at,Xe,pe,te,oe,Te,Ve){let We,dt,Ye,mt,Dt;if(Xe.originalLength===0?(We=pe.getStartLineNumber(Xe.originalStart)-1,dt=0):(We=pe.getStartLineNumber(Xe.originalStart),dt=pe.getEndLineNumber(Xe.originalStart+Xe.originalLength-1)),Xe.modifiedLength===0?(Ye=te.getStartLineNumber(Xe.modifiedStart)-1,mt=0):(Ye=te.getStartLineNumber(Xe.modifiedStart),mt=te.getEndLineNumber(Xe.modifiedStart+Xe.modifiedLength-1)),Te&&Xe.originalLength>0&&Xe.originalLength<20&&Xe.modifiedLength>0&&Xe.modifiedLength<20&&oe()){const Se=pe.createCharSequence(at,Xe.originalStart,Xe.originalStart+Xe.originalLength-1),we=te.createCharSequence(at,Xe.modifiedStart,Xe.modifiedStart+Xe.modifiedLength-1);if(Se.getElements().length>0&&we.getElements().length>0){let Xt=Q(Se,we,oe,!0).changes;Ve&&(Xt=Re(Xt)),Dt=[];for(let ri=0,ke=Xt.length;ri<ke;ri++)Dt.push(ve.createFromDiffChange(Xt[ri],Se,we))}}return new Ae(We,dt,Ye,mt,Dt)}}class re{constructor(at,Xe,pe){this.shouldComputeCharChanges=pe.shouldComputeCharChanges,this.shouldPostProcessCharChanges=pe.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=pe.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=pe.shouldMakePrettyDiff,this.originalLines=at,this.modifiedLines=Xe,this.original=new q(at),this.modified=new q(Xe),this.continueLineDiff=N(pe.maxComputationTime),this.continueCharDiff=N(pe.maxComputationTime===0?0:Math.min(pe.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const at=Q(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),Xe=at.changes,pe=at.quitEarly;if(this.shouldIgnoreTrimWhitespace){const Ve=[];for(let We=0,dt=Xe.length;We<dt;We++)Ve.push(Ae.createFromDiffResult(this.shouldIgnoreTrimWhitespace,Xe[We],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:pe,changes:Ve}}const te=[];let oe=0,Te=0;for(let Ve=-1,We=Xe.length;Ve<We;Ve++){const dt=Ve+1<We?Xe[Ve+1]:null,Ye=dt?dt.originalStart:this.originalLines.length,mt=dt?dt.modifiedStart:this.modifiedLines.length;for(;oe<Ye&&Te<mt;){const Dt=this.originalLines[oe],Se=this.modifiedLines[Te];if(Dt!==Se){{let we=K(Dt,1),Xt=K(Se,1);for(;we>1&&Xt>1;){const ri=Dt.charCodeAt(we-2),ke=Se.charCodeAt(Xt-2);if(ri!==ke)break;we--,Xt--}(we>1||Xt>1)&&this._pushTrimWhitespaceCharChange(te,oe+1,1,we,Te+1,1,Xt)}{let we=F(Dt,1),Xt=F(Se,1);const ri=Dt.length+1,ke=Se.length+1;for(;we<ri&&Xt<ke;){const Z=Dt.charCodeAt(we-1),Fe=Dt.charCodeAt(Xt-1);if(Z!==Fe)break;we++,Xt++}(we<ri||Xt<ke)&&this._pushTrimWhitespaceCharChange(te,oe+1,we,ri,Te+1,Xt,ke)}}oe++,Te++}dt&&(te.push(Ae.createFromDiffResult(this.shouldIgnoreTrimWhitespace,dt,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),oe+=dt.originalLength,Te+=dt.modifiedLength)}return{quitEarly:pe,changes:te}}_pushTrimWhitespaceCharChange(at,Xe,pe,te,oe,Te,Ve){if(this._mergeTrimWhitespaceCharChange(at,Xe,pe,te,oe,Te,Ve))return;let We;this.shouldComputeCharChanges&&(We=[new ve(Xe,pe,Xe,te,oe,Te,oe,Ve)]),at.push(new Ae(Xe,Xe,oe,oe,We))}_mergeTrimWhitespaceCharChange(at,Xe,pe,te,oe,Te,Ve){const We=at.length;if(We===0)return!1;const dt=at[We-1];return dt.originalEndLineNumber===0||dt.modifiedEndLineNumber===0?!1:dt.originalEndLineNumber===Xe&&dt.modifiedEndLineNumber===oe?(this.shouldComputeCharChanges&&dt.charChanges&&dt.charChanges.push(new ve(Xe,pe,Xe,te,oe,Te,oe,Ve)),!0):dt.originalEndLineNumber+1===Xe&&dt.modifiedEndLineNumber+1===oe?(dt.originalEndLineNumber=Xe,dt.modifiedEndLineNumber=oe,this.shouldComputeCharChanges&&dt.charChanges&&dt.charChanges.push(new ve(Xe,pe,Xe,te,oe,Te,oe,Ve)),!0):!1}}function K(Rt,at){const Xe=B.HG(Rt);return Xe===-1?at:Xe+1}function F(Rt,at){const Xe=B.lT(Rt);return Xe===-1?at:Xe+2}function N(Rt){if(Rt===0)return()=>!0;const at=Date.now();return()=>Date.now()-at<Rt}var j=c(50536);const me={getLegacy:()=>new $,getDefault:()=>new j.D8};var ce=c(3223),he=c(54021),Le=c(34920);function Y(Rt){const at=[];for(const Xe of Rt){const pe=Number(Xe);(pe||pe===0&&Xe.replace(/\s/g,"")!=="")&&at.push(pe)}return at}function ae(Rt,at,Xe,pe){return{red:Rt/255,blue:Xe/255,green:at/255,alpha:pe}}function Ce(Rt,at){const Xe=at.index,pe=at[0].length;if(!Xe)return;const te=Rt.positionAt(Xe);return{startLineNumber:te.lineNumber,startColumn:te.column,endLineNumber:te.lineNumber,endColumn:te.column+pe}}function Pe(Rt,at){if(!Rt)return;const Xe=Le.Q1.Format.CSS.parseHex(at);if(Xe)return{range:Rt,color:ae(Xe.rgba.r,Xe.rgba.g,Xe.rgba.b,Xe.rgba.a)}}function ye(Rt,at,Xe){if(!Rt||at.length!==1)return;const te=at[0].values(),oe=Y(te);return{range:Rt,color:ae(oe[0],oe[1],oe[2],Xe?oe[3]:1)}}function Ke(Rt,at,Xe){if(!Rt||at.length!==1)return;const te=at[0].values(),oe=Y(te),Te=new Le.Q1(new Le.hB(oe[0],oe[1]/100,oe[2]/100,Xe?oe[3]:1));return{range:Rt,color:ae(Te.rgba.r,Te.rgba.g,Te.rgba.b,Te.rgba.a)}}function qe(Rt,at){return typeof Rt=="string"?[...Rt.matchAll(at)]:Rt.findMatches(at)}function Ue(Rt){const at=[],pe=qe(Rt,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(pe.length>0)for(const te of pe){const oe=te.filter(dt=>dt!==void 0),Te=oe[1],Ve=oe[2];if(!Ve)continue;let We;if(Te==="rgb"){const dt=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;We=ye(Ce(Rt,te),qe(Ve,dt),!1)}else if(Te==="rgba"){const dt=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;We=ye(Ce(Rt,te),qe(Ve,dt),!0)}else if(Te==="hsl"){const dt=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;We=Ke(Ce(Rt,te),qe(Ve,dt),!1)}else if(Te==="hsla"){const dt=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;We=Ke(Ce(Rt,te),qe(Ve,dt),!0)}else Te==="#"&&(We=Pe(Ce(Rt,te),Te+Ve));We&&at.push(We)}return at}function x(Rt){return!Rt||typeof Rt.getValue!="function"||typeof Rt.positionAt!="function"?[]:Ue(Rt)}var it=c(8794),Ze=c(15763);const _t=!0;class ot{constructor(){this._workerTextModelSyncServer=new Ze.WorkerTextModelSyncServer}dispose(){}_getModel(at){return this._workerTextModelSyncServer.getModel(at)}_getModels(){return this._workerTextModelSyncServer.getModels()}$acceptNewModel(at){this._workerTextModelSyncServer.$acceptNewModel(at)}$acceptModelChanged(at,Xe){this._workerTextModelSyncServer.$acceptModelChanged(at,Xe)}$acceptRemovedModel(at){this._workerTextModelSyncServer.$acceptRemovedModel(at)}async $computeUnicodeHighlights(at,Xe,pe){const te=this._getModel(at);return te?S.UnicodeTextModelHighlighter.computeUnicodeHighlights(te,Xe,pe):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async $findSectionHeaders(at,Xe){const pe=this._getModel(at);return pe?(0,it.findSectionHeaders)(pe,Xe):[]}async $computeDiff(at,Xe,pe,te){const oe=this._getModel(at),Te=this._getModel(Xe);return!oe||!Te?null:Pt.computeDiff(oe,Te,pe,te)}static computeDiff(at,Xe,pe,te){const oe=te==="advanced"?me.getDefault():me.getLegacy(),Te=at.getLinesContent(),Ve=Xe.getLinesContent(),We=oe.computeDiff(Te,Ve,pe),dt=We.changes.length>0?!1:this._modelsAreIdentical(at,Xe);function Ye(mt){return mt.map(Dt=>[Dt.original.startLineNumber,Dt.original.endLineNumberExclusive,Dt.modified.startLineNumber,Dt.modified.endLineNumberExclusive,Dt.innerChanges?.map(Se=>[Se.originalRange.startLineNumber,Se.originalRange.startColumn,Se.originalRange.endLineNumber,Se.originalRange.endColumn,Se.modifiedRange.startLineNumber,Se.modifiedRange.startColumn,Se.modifiedRange.endLineNumber,Se.modifiedRange.endColumn])])}return{identical:dt,quitEarly:We.hitTimeout,changes:Ye(We.changes),moves:We.moves.map(mt=>[mt.lineRangeMapping.original.startLineNumber,mt.lineRangeMapping.original.endLineNumberExclusive,mt.lineRangeMapping.modified.startLineNumber,mt.lineRangeMapping.modified.endLineNumberExclusive,Ye(mt.changes)])}}static _modelsAreIdentical(at,Xe){const pe=at.getLineCount(),te=Xe.getLineCount();if(pe!==te)return!1;for(let oe=1;oe<=pe;oe++){const Te=at.getLineContent(oe),Ve=Xe.getLineContent(oe);if(Te!==Ve)return!1}return!0}static{this._diffLimit=1e5}async $computeMoreMinimalEdits(at,Xe,pe){const te=this._getModel(at);if(!te)return Xe;const oe=[];let Te;Xe=Xe.slice(0).sort((We,dt)=>{if(We.range&&dt.range)return G.Q.compareRangesUsingStarts(We.range,dt.range);const Ye=We.range?0:1,mt=dt.range?0:1;return Ye-mt});let Ve=0;for(let We=1;We<Xe.length;We++)G.Q.getEndPosition(Xe[Ve].range).equals(G.Q.getStartPosition(Xe[We].range))?(Xe[Ve].range=G.Q.fromPositions(G.Q.getStartPosition(Xe[Ve].range),G.Q.getEndPosition(Xe[We].range)),Xe[Ve].text+=Xe[We].text):(Ve++,Xe[Ve]=Xe[We]);Xe.length=Ve+1;for(let{range:We,text:dt,eol:Ye}of Xe){if(typeof Ye=="number"&&(Te=Ye),G.Q.isEmpty(We)&&!dt)continue;const mt=te.getValueInRange(We);if(dt=dt.replace(/\r\n|\n|\r/g,te.eol),mt===dt)continue;if(Math.max(dt.length,mt.length)>Pt._diffLimit){oe.push({range:We,text:dt});continue}const Dt=(0,u.F1)(mt,dt,pe),Se=te.offsetAt(G.Q.lift(We).getStartPosition());for(const we of Dt){const Xt=te.positionAt(Se+we.originalStart),ri=te.positionAt(Se+we.originalStart+we.originalLength),ke={text:dt.substr(we.modifiedStart,we.modifiedLength),range:{startLineNumber:Xt.lineNumber,startColumn:Xt.column,endLineNumber:ri.lineNumber,endColumn:ri.column}};te.getValueInRange(ke.range)!==ke.text&&oe.push(ke)}}return typeof Te=="number"&&oe.push({eol:Te,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),oe}async $computeLinks(at){const Xe=this._getModel(at);return Xe?C(Xe):null}async $computeDefaultDocumentColors(at){const Xe=this._getModel(at);return Xe?x(Xe):null}static{this._suggestionsLimit=1e4}async $textualSuggest(at,Xe,pe,te){const oe=new m.W,Te=new RegExp(pe,te),Ve=new Set;e:for(const We of at){const dt=this._getModel(We);if(dt){for(const Ye of dt.words(Te))if(!(Ye===Xe||!isNaN(Number(Ye)))&&(Ve.add(Ye),Ve.size>Pt._suggestionsLimit))break e}}return{words:Array.from(Ve),duration:oe.elapsed()}}async $computeWordRanges(at,Xe,pe,te){const oe=this._getModel(at);if(!oe)return Object.create(null);const Te=new RegExp(pe,te),Ve=Object.create(null);for(let We=Xe.startLineNumber;We<Xe.endLineNumber;We++){const dt=oe.getLineWords(We,Te);for(const Ye of dt){if(!isNaN(Number(Ye.word)))continue;let mt=Ve[Ye.word];mt||(mt=[],Ve[Ye.word]=mt),mt.push({startLineNumber:We,startColumn:Ye.startColumn,endLineNumber:We,endColumn:Ye.endColumn})}}return Ve}async $navigateValueSet(at,Xe,pe,te,oe){const Te=this._getModel(at);if(!Te)return null;const Ve=new RegExp(te,oe);Xe.startColumn===Xe.endColumn&&(Xe={startLineNumber:Xe.startLineNumber,startColumn:Xe.startColumn,endLineNumber:Xe.endLineNumber,endColumn:Xe.endColumn+1});const We=Te.getValueInRange(Xe),dt=Te.getWordAtPosition({lineNumber:Xe.startLineNumber,column:Xe.startColumn},Ve);if(!dt)return null;const Ye=Te.getValueInRange(dt);return v.INSTANCE.navigateValueSet(Xe,We,dt,Ye,pe)}}class Pt extends ot{constructor(at,Xe){super(),this._host=at,this._foreignModuleFactory=Xe,this._foreignModule=null}async $ping(){return"pong"}$loadForeignModule(at,Xe,pe){const te=(Ve,We)=>this._host.$fhr(Ve,We),Te={host:(0,ce.kT)(pe,te),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(Te,Xe),Promise.resolve((0,ce.V0)(this._foreignModule))):new Promise((Ve,We)=>{const dt=Ye=>{this._foreignModule=Ye.create(Te,Xe),Ve((0,ce.V0)(this._foreignModule))};if(!_t)Promise.all([c.e(547),c.e(92824),c.e(25507),c.e(54656),c.e(57787),c.e(12162),c.e(77656),c.e(4401),c.e(99210),c.e(4933)]).then(function(){var Ye=[c(4933)(`${at}`)];dt.apply(null,Ye)}.bind(this)).catch(We.bind(this));else{const Ye=he.zl.asBrowserUri(`${at}.js`).toString(!0);c(86399)(`${Ye}`).then(dt).catch(We)}})}$fmr(at,Xe){if(!this._foreignModule||typeof this._foreignModule[at]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+at));try{return Promise.resolve(this._foreignModule[at].apply(this._foreignModule,Xe))}catch(pe){return Promise.reject(pe)}}}function Wt(Rt){return new Pt(d.EditorWorkerHost.getChannel(Rt),null)}typeof importScripts=="function"&&(globalThis.monaco=(0,_.createMonacoBaseAPI)())},49349:(Mt,He,c)=>{c.d(He,{Qg:()=>b,Ud:()=>O,jD:()=>I});var u=c(37486),G=c(60599),U=c(63886),P=c(70679),M=c(61353),w=c(47545);function O(C){return A.get(C)}class A extends G.jG{static{this._map=new Map}static get(v){let _=A._map.get(v);if(!_){_=new A(v),A._map.set(v,_);const d=v.onDidDispose(()=>{const m=A._map.get(v);m&&(A._map.delete(v),m.dispose(),d.dispose())})}return _}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&(this._currentTransaction=new P.XL(()=>{}))}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){const v=this._currentTransaction;this._currentTransaction=void 0,v.finish()}}constructor(v){super(),this.editor=v,this._updateCounter=0,this._currentTransaction=void 0,this._model=(0,U.FY)(this,this.editor.getModel()),this.model=this._model,this.isReadonly=(0,U.y0)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(92)),this._versionId=(0,U.Zh)({owner:this,lazy:!0},this.editor.getModel()?.getVersionId()??null),this.versionId=this._versionId,this._selections=(0,U.Zh)({owner:this,equalsFn:(0,u.KC)((0,u.S3)(w.L.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=(0,U.y0)(this,_=>{const d=this.editor.onDidFocusEditorWidget(_),m=this.editor.onDidBlurEditorWidget(_);return{dispose(){d.dispose(),m.dispose()}}},()=>this.editor.hasWidgetFocus()),this.value=(0,M.dQ)(this,_=>(this.versionId.read(_),this.model.read(_)?.getValue()??""),(_,d)=>{const m=this.model.get();m!==null&&_!==m.getValue()&&m.setValue(_)}),this.valueIsEmpty=(0,U.un)(this,_=>(this.versionId.read(_),this.editor.getModel()?.getValueLength()===0)),this.cursorSelection=(0,U.C)({owner:this,equalsFn:(0,u.KC)(w.L.selectionsEqual)},_=>this.selections.read(_)?.[0]??null),this.onDidType=(0,U.Yd)(this),this.scrollTop=(0,U.y0)(this.editor.onDidScrollChange,()=>this.editor.getScrollTop()),this.scrollLeft=(0,U.y0)(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft()),this.layoutInfo=(0,U.y0)(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo()),this.layoutInfoContentLeft=this.layoutInfo.map(_=>_.contentLeft),this.layoutInfoDecorationsLeft=this.layoutInfo.map(_=>_.decorationsLeft),this.contentWidth=(0,U.y0)(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth()),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(_=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,_)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(_=>{this._beginUpdate();try{this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,_),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(_=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,_),this._forceUpdate()}finally{this._endUpdate()}}))}forceUpdate(v){this._beginUpdate();try{return this._forceUpdate(),v?v(this._currentTransaction):void 0}finally{this._endUpdate()}}_forceUpdate(){this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(v){return(0,U.y0)(this,_=>this.editor.onDidChangeConfiguration(d=>{d.hasChanged(v)&&_(void 0)}),()=>this.editor.getOption(v))}setDecorations(v){const _=new G.Cm,d=this.editor.createDecorationsCollection();return _.add((0,U.zL)({owner:this,debugName:()=>`Apply decorations from ${v.debugName}`},m=>{const S=v.read(m);d.set(S)})),_.add({dispose:()=>{d.clear()}}),_}createOverlayWidget(v){const _="observableOverlayWidget"+this._overlayWidgetCounter++,d={getDomNode:()=>v.domNode,getPosition:()=>v.position.get(),getId:()=>_,allowEditorOverflow:v.allowEditorOverflow,getMinContentWidthInPx:()=>v.minContentWidthInPx.get()};this.editor.addOverlayWidget(d);const m=(0,U.fm)(S=>{v.position.read(S),v.minContentWidthInPx.read(S),this.editor.layoutOverlayWidget(d)});return(0,G.s)(()=>{m.dispose(),this.editor.removeOverlayWidget(d)})}}function I(C,v){return(0,U.ht)({createEmptyChangeSummary:()=>({deltas:[],didChange:!1}),handleChange:(_,d)=>{if(_.didChange(C)){const m=_.change;m!==void 0&&d.deltas.push(m),d.didChange=!0}return!0}},(_,d)=>{const m=C.read(_);d.didChange&&v(m,d.deltas)})}function b(C,v){const _=new G.Cm,d=I(C,(m,S)=>{_.clear(),v(m,S,_)});return{dispose(){d.dispose(),_.dispose()}}}},49418:(Mt,He,c)=>{c.d(He,{l:()=>I,x:()=>b});var u=c(31938),G=c(91779),U=c(15903),P=c(47192),M=c(60599),w=c(3223),O=c(45573);const A=u.$,I={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};class b extends M.jG{constructor(v,_,d){super(),this.os=_,this.keyElements=new Set,this.options=d||Object.create(null);const m=this.options.keybindingLabelForeground;this.domNode=u.BC(v,A(".monaco-keybinding")),m&&(this.domNode.style.color=m),this.hover=this._register((0,G.i)().setupManagedHover((0,U.nZ)("mouse"),this.domNode,"")),this.didEverRender=!1,v.appendChild(this.domNode)}get element(){return this.domNode}set(v,_){this.didEverRender&&this.keybinding===v&&b.areSame(this.matches,_)||(this.keybinding=v,this.matches=_,this.render())}render(){if(this.clear(),this.keybinding){const v=this.keybinding.getChords();v[0]&&this.renderChord(this.domNode,v[0],this.matches?this.matches.firstPart:null);for(let d=1;d<v.length;d++)u.BC(this.domNode,A("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,v[d],this.matches?this.matches.chordPart:null);const _=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(_),this.domNode.setAttribute("aria-label",_||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){u.w_(this.domNode),this.keyElements.clear()}renderChord(v,_,d){const m=P.Of.modifierLabels[this.os];_.ctrlKey&&this.renderKey(v,m.ctrlKey,!!d?.ctrlKey,m.separator),_.shiftKey&&this.renderKey(v,m.shiftKey,!!d?.shiftKey,m.separator),_.altKey&&this.renderKey(v,m.altKey,!!d?.altKey,m.separator),_.metaKey&&this.renderKey(v,m.metaKey,!!d?.metaKey,m.separator);const S=_.keyLabel;S&&this.renderKey(v,S,!!d?.keyCode,"")}renderKey(v,_,d,m){u.BC(v,this.createKeyElement(_,d?".highlight":"")),m&&u.BC(v,A("span.monaco-keybinding-key-separator",void 0,m))}renderUnbound(v){u.BC(v,this.createKeyElement((0,O.kg)("unbound","Unbound")))}createKeyElement(v,_=""){const d=A("span.monaco-keybinding-key"+_,void 0,v);return this.keyElements.add(d),this.options.keybindingLabelBackground&&(d.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(d.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(d.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(d.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),d}static areSame(v,_){return v===_||!v&&!_?!0:!!v&&!!_&&(0,w.aI)(v.firstPart,_.firstPart)&&(0,w.aI)(v.chordPart,_.chordPart)}}},50536:(Mt,He,c)=>{c.d(He,{D8:()=>me});var u=c(93009),G=c(6105),U=c(33924),P=c(88935),M=c(98414),w=c(71245);class O{constructor(ae,Ce){this.width=ae,this.height=Ce,this.array=[],this.array=new Array(ae*Ce)}get(ae,Ce){return this.array[ae+Ce*this.width]}set(ae,Ce,Pe){this.array[ae+Ce*this.width]=Pe}}function A(Y){return Y===32||Y===9}class I{static{this.chrKeys=new Map}static getKey(ae){let Ce=this.chrKeys.get(ae);return Ce===void 0&&(Ce=this.chrKeys.size,this.chrKeys.set(ae,Ce)),Ce}constructor(ae,Ce,Pe){this.range=ae,this.lines=Ce,this.source=Pe,this.histogram=[];let ye=0;for(let Ke=ae.startLineNumber-1;Ke<ae.endLineNumberExclusive-1;Ke++){const qe=Ce[Ke];for(let x=0;x<qe.length;x++){ye++;const it=qe[x],Ze=I.getKey(it);this.histogram[Ze]=(this.histogram[Ze]||0)+1}ye++;const Ue=I.getKey(`
`);this.histogram[Ue]=(this.histogram[Ue]||0)+1}this.totalCount=ye}computeSimilarity(ae){let Ce=0;const Pe=Math.max(this.histogram.length,ae.histogram.length);for(let ye=0;ye<Pe;ye++)Ce+=Math.abs((this.histogram[ye]??0)-(ae.histogram[ye]??0));return 1-Ce/(this.totalCount+ae.totalCount)}}class b{compute(ae,Ce,Pe=w.uY.instance,ye){if(ae.length===0||Ce.length===0)return w.SL.trivial(ae,Ce);const Ke=new O(ae.length,Ce.length),qe=new O(ae.length,Ce.length),Ue=new O(ae.length,Ce.length);for(let Wt=0;Wt<ae.length;Wt++)for(let Rt=0;Rt<Ce.length;Rt++){if(!Pe.isValid())return w.SL.trivialTimedOut(ae,Ce);const at=Wt===0?0:Ke.get(Wt-1,Rt),Xe=Rt===0?0:Ke.get(Wt,Rt-1);let pe;ae.getElement(Wt)===Ce.getElement(Rt)?(Wt===0||Rt===0?pe=0:pe=Ke.get(Wt-1,Rt-1),Wt>0&&Rt>0&&qe.get(Wt-1,Rt-1)===3&&(pe+=Ue.get(Wt-1,Rt-1)),pe+=ye?ye(Wt,Rt):1):pe=-1;const te=Math.max(at,Xe,pe);if(te===pe){const oe=Wt>0&&Rt>0?Ue.get(Wt-1,Rt-1):0;Ue.set(Wt,Rt,oe+1),qe.set(Wt,Rt,3)}else te===at?(Ue.set(Wt,Rt,0),qe.set(Wt,Rt,1)):te===Xe&&(Ue.set(Wt,Rt,0),qe.set(Wt,Rt,2));Ke.set(Wt,Rt,te)}const x=[];let it=ae.length,Ze=Ce.length;function _t(Wt,Rt){(Wt+1!==it||Rt+1!==Ze)&&x.push(new w.$8(new P.L(Wt+1,it),new P.L(Rt+1,Ze))),it=Wt,Ze=Rt}let ot=ae.length-1,Pt=Ce.length-1;for(;ot>=0&&Pt>=0;)qe.get(ot,Pt)===3?(_t(ot,Pt),ot--,Pt--):qe.get(ot,Pt)===1?ot--:Pt--;return _t(-1,-1),x.reverse(),new w.SL(x,!1)}}class C{compute(ae,Ce,Pe=w.uY.instance){if(ae.length===0||Ce.length===0)return w.SL.trivial(ae,Ce);const ye=ae,Ke=Ce;function qe(Rt,at){for(;Rt<ye.length&&at<Ke.length&&ye.getElement(Rt)===Ke.getElement(at);)Rt++,at++;return Rt}let Ue=0;const x=new _;x.set(0,qe(0,0));const it=new d;it.set(0,x.get(0)===0?null:new v(null,0,0,x.get(0)));let Ze=0;e:for(;;){if(Ue++,!Pe.isValid())return w.SL.trivialTimedOut(ye,Ke);const Rt=-Math.min(Ue,Ke.length+Ue%2),at=Math.min(Ue,ye.length+Ue%2);for(Ze=Rt;Ze<=at;Ze+=2){let Xe=0;const pe=Ze===at?-1:x.get(Ze+1),te=Ze===Rt?-1:x.get(Ze-1)+1;Xe++;const oe=Math.min(Math.max(pe,te),ye.length),Te=oe-Ze;if(Xe++,oe>ye.length||Te>Ke.length)continue;const Ve=qe(oe,Te);x.set(Ze,Ve);const We=oe===pe?it.get(Ze+1):it.get(Ze-1);if(it.set(Ze,Ve!==oe?new v(We,oe,Te,Ve-oe):We),x.get(Ze)===ye.length&&x.get(Ze)-Ze===Ke.length)break e}}let _t=it.get(Ze);const ot=[];let Pt=ye.length,Wt=Ke.length;for(;;){const Rt=_t?_t.x+_t.length:0,at=_t?_t.y+_t.length:0;if((Rt!==Pt||at!==Wt)&&ot.push(new w.$8(new P.L(Rt,Pt),new P.L(at,Wt))),!_t)break;Pt=_t.x,Wt=_t.y,_t=_t.prev}return ot.reverse(),new w.SL(ot,!1)}}class v{constructor(ae,Ce,Pe,ye){this.prev=ae,this.x=Ce,this.y=Pe,this.length=ye}}class _{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(ae){return ae<0?(ae=-ae-1,this.negativeArr[ae]):this.positiveArr[ae]}set(ae,Ce){if(ae<0){if(ae=-ae-1,ae>=this.negativeArr.length){const Pe=this.negativeArr;this.negativeArr=new Int32Array(Pe.length*2),this.negativeArr.set(Pe)}this.negativeArr[ae]=Ce}else{if(ae>=this.positiveArr.length){const Pe=this.positiveArr;this.positiveArr=new Int32Array(Pe.length*2),this.positiveArr.set(Pe)}this.positiveArr[ae]=Ce}}}class d{constructor(){this.positiveArr=[],this.negativeArr=[]}get(ae){return ae<0?(ae=-ae-1,this.negativeArr[ae]):this.positiveArr[ae]}set(ae,Ce){ae<0?(ae=-ae-1,this.negativeArr[ae]=Ce):this.positiveArr[ae]=Ce}}var m=c(81182),S=c(51922),D=c(41461),E=c(69504);class B{constructor(ae,Ce,Pe){this.lines=ae,this.range=Ce,this.considerWhitespaceChanges=Pe,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let ye=this.range.startLineNumber;ye<=this.range.endLineNumber;ye++){let Ke=ae[ye-1],qe=0;ye===this.range.startLineNumber&&this.range.startColumn>1&&(qe=this.range.startColumn-1,Ke=Ke.substring(qe)),this.lineStartOffsets.push(qe);let Ue=0;if(!Pe){const it=Ke.trimStart();Ue=Ke.length-it.length,Ke=it.trimEnd()}this.trimmedWsLengthsByLineIdx.push(Ue);const x=ye===this.range.endLineNumber?Math.min(this.range.endColumn-1-qe-Ue,Ke.length):Ke.length;for(let it=0;it<x;it++)this.elements.push(Ke.charCodeAt(it));ye<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new P.L(0,this.length))}getText(ae){return this.elements.slice(ae.start,ae.endExclusive).map(Ce=>String.fromCharCode(Ce)).join("")}getElement(ae){return this.elements[ae]}get length(){return this.elements.length}getBoundaryScore(ae){const Ce=$(ae>0?this.elements[ae-1]:-1),Pe=$(ae<this.elements.length?this.elements[ae]:-1);if(Ce===7&&Pe===8)return 0;if(Ce===8)return 150;let ye=0;return Ce!==Pe&&(ye+=10,Ce===0&&Pe===1&&(ye+=1)),ye+=W(Ce),ye+=W(Pe),ye}translateOffset(ae,Ce="right"){const Pe=(0,S.iM)(this.firstElementOffsetByLineIdx,Ke=>Ke<=ae),ye=ae-this.firstElementOffsetByLineIdx[Pe];return new E.y(this.range.startLineNumber+Pe,1+this.lineStartOffsets[Pe]+ye+(ye===0&&Ce==="left"?0:this.trimmedWsLengthsByLineIdx[Pe]))}translateRange(ae){const Ce=this.translateOffset(ae.start,"right"),Pe=this.translateOffset(ae.endExclusive,"left");return Pe.isBefore(Ce)?M.Q.fromPositions(Pe,Pe):M.Q.fromPositions(Ce,Pe)}findWordContaining(ae){if(ae<0||ae>=this.elements.length||!R(this.elements[ae]))return;let Ce=ae;for(;Ce>0&&R(this.elements[Ce-1]);)Ce--;let Pe=ae;for(;Pe<this.elements.length&&R(this.elements[Pe]);)Pe++;return new P.L(Ce,Pe)}countLinesIn(ae){return this.translateOffset(ae.endExclusive).lineNumber-this.translateOffset(ae.start).lineNumber}isStronglyEqual(ae,Ce){return this.elements[ae]===this.elements[Ce]}extendToFullLines(ae){const Ce=(0,S.lx)(this.firstElementOffsetByLineIdx,ye=>ye<=ae.start)??0,Pe=(0,S.XP)(this.firstElementOffsetByLineIdx,ye=>ae.endExclusive<=ye)??this.elements.length;return new P.L(Ce,Pe)}}function R(Y){return Y>=97&&Y<=122||Y>=65&&Y<=90||Y>=48&&Y<=57}const z={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function W(Y){return z[Y]}function $(Y){return Y===10?8:Y===13?7:A(Y)?6:Y>=97&&Y<=122?0:Y>=65&&Y<=90?1:Y>=48&&Y<=57?2:Y===-1?3:Y===44||Y===59?5:4}function Q(Y,ae,Ce,Pe,ye,Ke){let{moves:qe,excludedChanges:Ue}=ne(Y,ae,Ce,Ke);if(!Ke.isValid())return[];const x=Y.filter(Ze=>!Ue.has(Ze)),it=ve(x,Pe,ye,ae,Ce,Ke);return(0,u.E4)(qe,it),qe=Ae(qe),qe=qe.filter(Ze=>{const _t=Ze.original.toOffsetRange().slice(ae).map(Pt=>Pt.trim());return _t.join(`
`).length>=15&&q(_t,Pt=>Pt.length>=2)>=2}),qe=re(Y,qe),qe}function q(Y,ae){let Ce=0;for(const Pe of Y)ae(Pe)&&Ce++;return Ce}function ne(Y,ae,Ce,Pe){const ye=[],Ke=Y.filter(x=>x.modified.isEmpty&&x.original.length>=3).map(x=>new I(x.original,ae,x)),qe=new Set(Y.filter(x=>x.original.isEmpty&&x.modified.length>=3).map(x=>new I(x.modified,Ce,x))),Ue=new Set;for(const x of Ke){let it=-1,Ze;for(const _t of qe){const ot=x.computeSimilarity(_t);ot>it&&(it=ot,Ze=_t)}if(it>.9&&Ze&&(qe.delete(Ze),ye.push(new m.WL(x.range,Ze.range)),Ue.add(x.source),Ue.add(Ze.source)),!Pe.isValid())return{moves:ye,excludedChanges:Ue}}return{moves:ye,excludedChanges:Ue}}function ve(Y,ae,Ce,Pe,ye,Ke){const qe=[],Ue=new D.db;for(const ot of Y)for(let Pt=ot.original.startLineNumber;Pt<ot.original.endLineNumberExclusive-2;Pt++){const Wt=`${ae[Pt-1]}:${ae[Pt+1-1]}:${ae[Pt+2-1]}`;Ue.add(Wt,{range:new U.M(Pt,Pt+3)})}const x=[];Y.sort((0,u.VE)(ot=>ot.modified.startLineNumber,u.U9));for(const ot of Y){let Pt=[];for(let Wt=ot.modified.startLineNumber;Wt<ot.modified.endLineNumberExclusive-2;Wt++){const Rt=`${Ce[Wt-1]}:${Ce[Wt+1-1]}:${Ce[Wt+2-1]}`,at=new U.M(Wt,Wt+3),Xe=[];Ue.forEach(Rt,({range:pe})=>{for(const oe of Pt)if(oe.originalLineRange.endLineNumberExclusive+1===pe.endLineNumberExclusive&&oe.modifiedLineRange.endLineNumberExclusive+1===at.endLineNumberExclusive){oe.originalLineRange=new U.M(oe.originalLineRange.startLineNumber,pe.endLineNumberExclusive),oe.modifiedLineRange=new U.M(oe.modifiedLineRange.startLineNumber,at.endLineNumberExclusive),Xe.push(oe);return}const te={modifiedLineRange:at,originalLineRange:pe};x.push(te),Xe.push(te)}),Pt=Xe}if(!Ke.isValid())return[]}x.sort((0,u.Hw)((0,u.VE)(ot=>ot.modifiedLineRange.length,u.U9)));const it=new U.S,Ze=new U.S;for(const ot of x){const Pt=ot.modifiedLineRange.startLineNumber-ot.originalLineRange.startLineNumber,Wt=it.subtractFrom(ot.modifiedLineRange),Rt=Ze.subtractFrom(ot.originalLineRange).getWithDelta(Pt),at=Wt.getIntersection(Rt);for(const Xe of at.ranges){if(Xe.length<3)continue;const pe=Xe,te=Xe.delta(-Pt);qe.push(new m.WL(te,pe)),it.addRange(pe),Ze.addRange(te)}}qe.sort((0,u.VE)(ot=>ot.original.startLineNumber,u.U9));const _t=new S.vJ(Y);for(let ot=0;ot<qe.length;ot++){const Pt=qe[ot],Wt=_t.findLastMonotonous(Ve=>Ve.original.startLineNumber<=Pt.original.startLineNumber),Rt=(0,S.lx)(Y,Ve=>Ve.modified.startLineNumber<=Pt.modified.startLineNumber),at=Math.max(Pt.original.startLineNumber-Wt.original.startLineNumber,Pt.modified.startLineNumber-Rt.modified.startLineNumber),Xe=_t.findLastMonotonous(Ve=>Ve.original.startLineNumber<Pt.original.endLineNumberExclusive),pe=(0,S.lx)(Y,Ve=>Ve.modified.startLineNumber<Pt.modified.endLineNumberExclusive),te=Math.max(Xe.original.endLineNumberExclusive-Pt.original.endLineNumberExclusive,pe.modified.endLineNumberExclusive-Pt.modified.endLineNumberExclusive);let oe;for(oe=0;oe<at;oe++){const Ve=Pt.original.startLineNumber-oe-1,We=Pt.modified.startLineNumber-oe-1;if(Ve>Pe.length||We>ye.length||it.contains(We)||Ze.contains(Ve)||!Re(Pe[Ve-1],ye[We-1],Ke))break}oe>0&&(Ze.addRange(new U.M(Pt.original.startLineNumber-oe,Pt.original.startLineNumber)),it.addRange(new U.M(Pt.modified.startLineNumber-oe,Pt.modified.startLineNumber)));let Te;for(Te=0;Te<te;Te++){const Ve=Pt.original.endLineNumberExclusive+Te,We=Pt.modified.endLineNumberExclusive+Te;if(Ve>Pe.length||We>ye.length||it.contains(We)||Ze.contains(Ve)||!Re(Pe[Ve-1],ye[We-1],Ke))break}Te>0&&(Ze.addRange(new U.M(Pt.original.endLineNumberExclusive,Pt.original.endLineNumberExclusive+Te)),it.addRange(new U.M(Pt.modified.endLineNumberExclusive,Pt.modified.endLineNumberExclusive+Te))),(oe>0||Te>0)&&(qe[ot]=new m.WL(new U.M(Pt.original.startLineNumber-oe,Pt.original.endLineNumberExclusive+Te),new U.M(Pt.modified.startLineNumber-oe,Pt.modified.endLineNumberExclusive+Te)))}return qe}function Re(Y,ae,Ce){if(Y.trim()===ae.trim())return!0;if(Y.length>300&&ae.length>300)return!1;const ye=new C().compute(new B([Y],new M.Q(1,1,1,Y.length),!1),new B([ae],new M.Q(1,1,1,ae.length),!1),Ce);let Ke=0;const qe=w.$8.invert(ye.diffs,Y.length);for(const Ze of qe)Ze.seq1Range.forEach(_t=>{A(Y.charCodeAt(_t))||Ke++});function Ue(Ze){let _t=0;for(let ot=0;ot<Y.length;ot++)A(Ze.charCodeAt(ot))||_t++;return _t}const x=Ue(Y.length>ae.length?Y:ae);return Ke/x>.6&&x>10}function Ae(Y){if(Y.length===0)return Y;Y.sort((0,u.VE)(Ce=>Ce.original.startLineNumber,u.U9));const ae=[Y[0]];for(let Ce=1;Ce<Y.length;Ce++){const Pe=ae[ae.length-1],ye=Y[Ce],Ke=ye.original.startLineNumber-Pe.original.endLineNumberExclusive,qe=ye.modified.startLineNumber-Pe.modified.endLineNumberExclusive;if(Ke>=0&&qe>=0&&Ke+qe<=2){ae[ae.length-1]=Pe.join(ye);continue}ae.push(ye)}return ae}function re(Y,ae){const Ce=new S.vJ(Y);return ae=ae.filter(Pe=>{const ye=Ce.findLastMonotonous(Ue=>Ue.original.startLineNumber<Pe.original.endLineNumberExclusive)||new m.WL(new U.M(1,1),new U.M(1,1)),Ke=(0,S.lx)(Y,Ue=>Ue.modified.startLineNumber<Pe.modified.endLineNumberExclusive);return ye!==Ke}),ae}var K=c(73405);class F{constructor(ae,Ce){this.trimmedHash=ae,this.lines=Ce}getElement(ae){return this.trimmedHash[ae]}get length(){return this.trimmedHash.length}getBoundaryScore(ae){const Ce=ae===0?0:N(this.lines[ae-1]),Pe=ae===this.lines.length?0:N(this.lines[ae]);return 1e3-(Ce+Pe)}getText(ae){return this.lines.slice(ae.start,ae.endExclusive).join(`
`)}isStronglyEqual(ae,Ce){return this.lines[ae]===this.lines[Ce]}}function N(Y){let ae=0;for(;ae<Y.length&&(Y.charCodeAt(ae)===32||Y.charCodeAt(ae)===9);)ae++;return ae}var j=c(38554);class me{constructor(){this.dynamicProgrammingDiffing=new b,this.myersDiffingAlgorithm=new C}computeDiff(ae,Ce,Pe){if(ae.length<=1&&(0,u.aI)(ae,Ce,(Te,Ve)=>Te===Ve))return new j.p([],[],!1);if(ae.length===1&&ae[0].length===0||Ce.length===1&&Ce[0].length===0)return new j.p([new m.wm(new U.M(1,ae.length+1),new U.M(1,Ce.length+1),[new m.q6(new M.Q(1,1,ae.length,ae[ae.length-1].length+1),new M.Q(1,1,Ce.length,Ce[Ce.length-1].length+1))])],[],!1);const ye=Pe.maxComputationTimeMs===0?w.uY.instance:new w.aY(Pe.maxComputationTimeMs),Ke=!Pe.ignoreTrimWhitespace,qe=new Map;function Ue(Te){let Ve=qe.get(Te);return Ve===void 0&&(Ve=qe.size,qe.set(Te,Ve)),Ve}const x=ae.map(Te=>Ue(Te.trim())),it=Ce.map(Te=>Ue(Te.trim())),Ze=new F(x,ae),_t=new F(it,Ce),ot=Ze.length+_t.length<1700?this.dynamicProgrammingDiffing.compute(Ze,_t,ye,(Te,Ve)=>ae[Te]===Ce[Ve]?Ce[Ve].length===0?.1:1+Math.log(1+Ce[Ve].length):.99):this.myersDiffingAlgorithm.compute(Ze,_t,ye);let Pt=ot.diffs,Wt=ot.hitTimeout;Pt=(0,K.NC)(Ze,_t,Pt),Pt=(0,K.X5)(Ze,_t,Pt);const Rt=[],at=Te=>{if(Ke)for(let Ve=0;Ve<Te;Ve++){const We=Xe+Ve,dt=pe+Ve;if(ae[We]!==Ce[dt]){const Ye=this.refineDiff(ae,Ce,new w.$8(new P.L(We,We+1),new P.L(dt,dt+1)),ye,Ke);for(const mt of Ye.mappings)Rt.push(mt);Ye.hitTimeout&&(Wt=!0)}}};let Xe=0,pe=0;for(const Te of Pt){(0,G.Ft)(()=>Te.seq1Range.start-Xe===Te.seq2Range.start-pe);const Ve=Te.seq1Range.start-Xe;at(Ve),Xe=Te.seq1Range.endExclusive,pe=Te.seq2Range.endExclusive;const We=this.refineDiff(ae,Ce,Te,ye,Ke);We.hitTimeout&&(Wt=!0);for(const dt of We.mappings)Rt.push(dt)}at(ae.length-Xe);const te=ce(Rt,ae,Ce);let oe=[];return Pe.computeMoves&&(oe=this.computeMoves(te,ae,Ce,x,it,ye,Ke)),(0,G.Ft)(()=>{function Te(We,dt){if(We.lineNumber<1||We.lineNumber>dt.length)return!1;const Ye=dt[We.lineNumber-1];return!(We.column<1||We.column>Ye.length+1)}function Ve(We,dt){return!(We.startLineNumber<1||We.startLineNumber>dt.length+1||We.endLineNumberExclusive<1||We.endLineNumberExclusive>dt.length+1)}for(const We of te){if(!We.innerChanges)return!1;for(const dt of We.innerChanges)if(!(Te(dt.modifiedRange.getStartPosition(),Ce)&&Te(dt.modifiedRange.getEndPosition(),Ce)&&Te(dt.originalRange.getStartPosition(),ae)&&Te(dt.originalRange.getEndPosition(),ae)))return!1;if(!Ve(We.modified,Ce)||!Ve(We.original,ae))return!1}return!0}),new j.p(te,oe,Wt)}computeMoves(ae,Ce,Pe,ye,Ke,qe,Ue){return Q(ae,Ce,Pe,ye,Ke,qe).map(Ze=>{const _t=this.refineDiff(Ce,Pe,new w.$8(Ze.original.toOffsetRange(),Ze.modified.toOffsetRange()),qe,Ue),ot=ce(_t.mappings,Ce,Pe,!0);return new j.t(Ze,ot)})}refineDiff(ae,Ce,Pe,ye,Ke){const Ue=Le(Pe).toRangeMapping2(ae,Ce),x=new B(ae,Ue.originalRange,Ke),it=new B(Ce,Ue.modifiedRange,Ke),Ze=x.length+it.length<500?this.dynamicProgrammingDiffing.compute(x,it,ye):this.myersDiffingAlgorithm.compute(x,it,ye),_t=!1;let ot=Ze.diffs;_t&&w.$8.assertSorted(ot),ot=(0,K.NC)(x,it,ot),_t&&w.$8.assertSorted(ot),ot=(0,K.Lk)(x,it,ot),_t&&w.$8.assertSorted(ot),ot=(0,K.sq)(x,it,ot),_t&&w.$8.assertSorted(ot),ot=(0,K.Rl)(x,it,ot),_t&&w.$8.assertSorted(ot);const Pt=ot.map(Wt=>new m.q6(x.translateRange(Wt.seq1Range),it.translateRange(Wt.seq2Range)));return _t&&m.q6.assertSorted(Pt),{mappings:Pt,hitTimeout:Ze.hitTimeout}}}function ce(Y,ae,Ce,Pe=!1){const ye=[];for(const Ke of(0,u.n)(Y.map(qe=>he(qe,ae,Ce)),(qe,Ue)=>qe.original.overlapOrTouch(Ue.original)||qe.modified.overlapOrTouch(Ue.modified))){const qe=Ke[0],Ue=Ke[Ke.length-1];ye.push(new m.wm(qe.original.join(Ue.original),qe.modified.join(Ue.modified),Ke.map(x=>x.innerChanges[0])))}return(0,G.Ft)(()=>!Pe&&ye.length>0&&(ye[0].modified.startLineNumber!==ye[0].original.startLineNumber||Ce.length-ye[ye.length-1].modified.endLineNumberExclusive!==ae.length-ye[ye.length-1].original.endLineNumberExclusive)?!1:(0,G.Xo)(ye,(Ke,qe)=>qe.original.startLineNumber-Ke.original.endLineNumberExclusive===qe.modified.startLineNumber-Ke.modified.endLineNumberExclusive&&Ke.original.endLineNumberExclusive<qe.original.startLineNumber&&Ke.modified.endLineNumberExclusive<qe.modified.startLineNumber)),ye}function he(Y,ae,Ce){let Pe=0,ye=0;Y.modifiedRange.endColumn===1&&Y.originalRange.endColumn===1&&Y.originalRange.startLineNumber+Pe<=Y.originalRange.endLineNumber&&Y.modifiedRange.startLineNumber+Pe<=Y.modifiedRange.endLineNumber&&(ye=-1),Y.modifiedRange.startColumn-1>=Ce[Y.modifiedRange.startLineNumber-1].length&&Y.originalRange.startColumn-1>=ae[Y.originalRange.startLineNumber-1].length&&Y.originalRange.startLineNumber<=Y.originalRange.endLineNumber+ye&&Y.modifiedRange.startLineNumber<=Y.modifiedRange.endLineNumber+ye&&(Pe=1);const Ke=new U.M(Y.originalRange.startLineNumber+Pe,Y.originalRange.endLineNumber+1+ye),qe=new U.M(Y.modifiedRange.startLineNumber+Pe,Y.modifiedRange.endLineNumber+1+ye);return new m.wm(Ke,qe,[Y])}function Le(Y){return new m.WL(new U.M(Y.seq1Range.start+1,Y.seq1Range.endExclusive+1),new U.M(Y.seq2Range.start+1,Y.seq2Range.endExclusive+1))}},51159:(Mt,He,c)=>{c.d(He,{$:()=>S,D:()=>W});var u=c(37519),G=c(56491),U=c(60599),P=c(76222),M=c(93750),w=c(25894),O=c(43860),A=c(68669),I=c(93009),b=c(45573),C=c(87386),v=function($,Q,q,ne){var ve=arguments.length,Re=ve<3?Q:ne===null?ne=Object.getOwnPropertyDescriptor(Q,q):ne,Ae;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Re=Reflect.decorate($,Q,q,ne);else for(var re=$.length-1;re>=0;re--)(Ae=$[re])&&(Re=(ve<3?Ae(Re):ve>3?Ae(Q,q,Re):Ae(Q,q))||Re);return ve>3&&Re&&Object.defineProperty(Q,q,Re),Re},_=function($,Q){return function(q,ne){Q(q,ne,$)}},d,m;let S=class{constructor(Q,q,ne){this._commandService=Q,this._keybindingService=q,this._hiddenStates=new D(ne)}createMenu(Q,q,ne){return new R(Q,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...ne},this._commandService,this._keybindingService,q)}getMenuActions(Q,q,ne){const ve=new R(Q,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...ne},this._commandService,this._keybindingService,q),Re=ve.getActions(ne);return ve.dispose(),Re}resetHiddenStates(Q){this._hiddenStates.reset(Q)}};S=v([_(0,M.d),_(1,C.b),_(2,A.CS)],S);let D=class{static{d=this}static{this._key="menu.hiddenCommands"}constructor(Q){this._storageService=Q,this._disposables=new U.Cm,this._onDidChange=new G.vl,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const q=Q.get(d._key,0,"{}");this._data=JSON.parse(q)}catch{this._data=Object.create(null)}this._disposables.add(Q.onDidChangeValue(0,d._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const q=Q.get(d._key,0,"{}");this._data=JSON.parse(q)}catch{}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(Q,q){return this._hiddenByDefaultCache.get(`${Q.id}/${q}`)??!1}setDefaultState(Q,q,ne){this._hiddenByDefaultCache.set(`${Q.id}/${q}`,ne)}isHidden(Q,q){const ne=this._isHiddenByDefault(Q,q),ve=this._data[Q.id]?.includes(q)??!1;return ne?!ve:ve}updateHidden(Q,q,ne){this._isHiddenByDefault(Q,q)&&(ne=!ne);const Re=this._data[Q.id];if(ne)Re?Re.indexOf(q)<0&&Re.push(q):this._data[Q.id]=[q];else if(Re){const Ae=Re.indexOf(q);Ae>=0&&(0,I.UH)(Re,Ae),Re.length===0&&delete this._data[Q.id]}this._persist()}reset(Q){if(Q===void 0)this._data=Object.create(null),this._persist();else{for(const{id:q}of Q)this._data[q]&&delete this._data[q];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const Q=JSON.stringify(this._data);this._storageService.store(d._key,Q,0,0)}finally{this._ignoreChangeEvent=!1}}};D=d=v([_(0,A.CS)],D);class E{constructor(Q,q){this._id=Q,this._collectContextKeysForSubmenus=q,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const Q=this._sort(P.ZG.getMenuItems(this._id));let q;for(const ne of Q){const ve=ne.group||"";(!q||q[0]!==ve)&&(q=[ve,[]],this._menuGroups.push(q)),q[1].push(ne),this._collectContextKeysAndSubmenuIds(ne)}this._allMenuIds.add(this._id)}_sort(Q){return Q}_collectContextKeysAndSubmenuIds(Q){if(E._fillInKbExprKeys(Q.when,this._structureContextKeys),(0,P.is)(Q)){if(Q.command.precondition&&E._fillInKbExprKeys(Q.command.precondition,this._preconditionContextKeys),Q.command.toggled){const q=Q.command.toggled.condition||Q.command.toggled;E._fillInKbExprKeys(q,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(P.ZG.getMenuItems(Q.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(Q.submenu))}static _fillInKbExprKeys(Q,q){if(Q)for(const ne of Q.keys())q.add(ne)}}let B=m=class extends E{constructor(Q,q,ne,ve,Re,Ae){super(Q,ne),this._hiddenStates=q,this._commandService=ve,this._keybindingService=Re,this._contextKeyService=Ae,this.refresh()}createActionGroups(Q){const q=[];for(const ne of this._menuGroups){const[ve,Re]=ne;let Ae;for(const re of Re)if(this._contextKeyService.contextMatchesRules(re.when)){const K=(0,P.is)(re);K&&this._hiddenStates.setDefaultState(this._id,re.command.id,!!re.isHiddenByDefault);const F=z(this._id,K?re.command:re,this._hiddenStates);if(K){const N=W(this._commandService,this._keybindingService,re.command.id,re.when);(Ae??=[]).push(new P.Xe(re.command,re.alt,Q,F,N,this._contextKeyService,this._commandService))}else{const N=new m(re.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(Q),j=O.wv.join(...N.map(me=>me[1]));j.length>0&&(Ae??=[]).push(new P.nI(re,F,j))}}Ae&&Ae.length>0&&q.push([ve,Ae])}return q}_sort(Q){return Q.sort(m._compareMenuItems)}static _compareMenuItems(Q,q){const ne=Q.group,ve=q.group;if(ne!==ve){if(ne){if(!ve)return-1}else return 1;if(ne==="navigation")return-1;if(ve==="navigation")return 1;const re=ne.localeCompare(ve);if(re!==0)return re}const Re=Q.order||0,Ae=q.order||0;return Re<Ae?-1:Re>Ae?1:m._compareTitles((0,P.is)(Q)?Q.command.title:Q.title,(0,P.is)(q)?q.command.title:q.title)}static _compareTitles(Q,q){const ne=typeof Q=="string"?Q:Q.original,ve=typeof q=="string"?q:q.original;return ne.localeCompare(ve)}};B=m=v([_(3,M.d),_(4,C.b),_(5,w.fN)],B);let R=class{constructor(Q,q,ne,ve,Re,Ae){this._disposables=new U.Cm,this._menuInfo=new B(Q,q,ne.emitEventsForSubmenuChanges,ve,Re,Ae);const re=new u.uC(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},ne.eventDebounceDelay);this._disposables.add(re),this._disposables.add(P.ZG.onDidChangeMenu(j=>{for(const me of this._menuInfo.allMenuIds)if(j.has(me)){re.schedule();break}}));const K=this._disposables.add(new U.Cm),F=j=>{let me=!1,ce=!1,he=!1;for(const Le of j)if(me=me||Le.isStructuralChange,ce=ce||Le.isEnablementChange,he=he||Le.isToggleChange,me&&ce&&he)break;return{menu:this,isStructuralChange:me,isEnablementChange:ce,isToggleChange:he}},N=()=>{K.add(Ae.onDidChangeContext(j=>{const me=j.affectsSome(this._menuInfo.structureContextKeys),ce=j.affectsSome(this._menuInfo.preconditionContextKeys),he=j.affectsSome(this._menuInfo.toggledContextKeys);(me||ce||he)&&this._onDidChange.fire({menu:this,isStructuralChange:me,isEnablementChange:ce,isToggleChange:he})})),K.add(q.onDidChange(j=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new G.uI({onWillAddFirstListener:N,onDidRemoveLastListener:K.clear.bind(K),delay:ne.eventDebounceDelay,merge:F}),this.onDidChange=this._onDidChange.event}getActions(Q){return this._menuInfo.createActionGroups(Q)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};R=v([_(3,M.d),_(4,C.b),_(5,w.fN)],R);function z($,Q,q){const ne=(0,P.i1)(Q)?Q.submenu.id:Q.id,ve=typeof Q.title=="string"?Q.title:Q.title.value,Re=(0,O.ih)({id:`hide/${$.id}/${ne}`,label:(0,b.kg)("hide.label","Hide '{0}'",ve),run(){q.updateHidden($,ne,!0)}}),Ae=(0,O.ih)({id:`toggle/${$.id}/${ne}`,label:ve,get checked(){return!q.isHidden($,ne)},run(){q.updateHidden($,ne,!!this.checked)}});return{hide:Re,toggle:Ae,get isHidden(){return!Ae.checked}}}function W($,Q,q,ne=void 0,ve=!0){return(0,O.ih)({id:`configureKeybinding/${q}`,label:(0,b.kg)("configure keybinding","Configure Keybinding"),enabled:ve,run(){const Ae=!!!Q.lookupKeybinding(q)&&ne?ne.serialize():void 0;$.executeCommand("workbench.action.openGlobalKeybindings",`@command:${q}`+(Ae?` +when:${Ae}`:""))}})}},51207:(Mt,He,c)=>{c.r(He),c.d(He,{encodeSemanticTokensDto:()=>M});var u=c(55409),G=c(90692);function U(O){for(let A=0,I=O.length;A<I;A+=4){const b=O[A+0],C=O[A+1],v=O[A+2],_=O[A+3];O[A+0]=_,O[A+1]=v,O[A+2]=C,O[A+3]=b}}function P(O){const A=new Uint8Array(O.buffer,O.byteOffset,O.length*4);return G.cm()||U(A),u.MB.wrap(A)}function M(O){const A=new Uint32Array(w(O));let I=0;if(A[I++]=O.id,O.type==="full")A[I++]=1,A[I++]=O.data.length,A.set(O.data,I),I+=O.data.length;else{A[I++]=2,A[I++]=O.deltas.length;for(const b of O.deltas)A[I++]=b.start,A[I++]=b.deleteCount,b.data?(A[I++]=b.data.length,A.set(b.data,I),I+=b.data.length):A[I++]=0}return P(A)}function w(O){let A=0;if(A+=2,O.type==="full")A+=1+O.data.length;else{A+=1,A+=3*O.deltas.length;for(const I of O.deltas)I.data&&(A+=I.data.length)}return A}},51473:(Mt,He,c)=>{c.d(He,{G6:()=>C,Mn:()=>I,iZ:()=>A});var u=c(37852),G=c(93009),U=c(37519),P=c(55946),M=c(96835),w=c(56491),O=c(13697);function A(v){return typeof v=="object"&&"visibility"in v&&"data"in v}function I(v){switch(v){case!0:return 1;case!1:return 0;default:return v}}function b(v){return typeof v.collapsible=="boolean"}class C{constructor(_,d,m,S={}){this.user=_,this.list=d,this.rootRef=[],this.eventBufferer=new w.at,this._onDidChangeCollapseState=new w.vl,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new w.vl,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new w.vl,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new U.ve(P.h),this.collapseByDefault=typeof S.collapseByDefault>"u"?!1:S.collapseByDefault,this.allowNonCollapsibleParents=S.allowNonCollapsibleParents??!1,this.filter=S.filter,this.autoExpandSingleChildren=typeof S.autoExpandSingleChildren>"u"?!1:S.autoExpandSingleChildren,this.root={parent:void 0,element:m,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(_,d,m=O.f.empty(),S={}){if(_.length===0)throw new u.jh(this.user,"Invalid tree location");S.diffIdentityProvider?this.spliceSmart(S.diffIdentityProvider,_,d,m,S):this.spliceSimple(_,d,m,S)}spliceSmart(_,d,m,S=O.f.empty(),D,E=D.diffDepth??0){const{parentNode:B}=this.getParentNodeWithListIndex(d);if(!B.lastDiffIds)return this.spliceSimple(d,m,S,D);const R=[...S],z=d[d.length-1],W=new M.uP({getElements:()=>B.lastDiffIds},{getElements:()=>[...B.children.slice(0,z),...R,...B.children.slice(z+m)].map(ve=>_.getId(ve.element).toString())}).ComputeDiff(!1);if(W.quitEarly)return B.lastDiffIds=void 0,this.spliceSimple(d,m,R,D);const $=d.slice(0,-1),Q=(ve,Re,Ae)=>{if(E>0)for(let re=0;re<Ae;re++)ve--,Re--,this.spliceSmart(_,[...$,ve,0],Number.MAX_SAFE_INTEGER,R[Re].children,D,E-1)};let q=Math.min(B.children.length,z+m),ne=R.length;for(const ve of W.changes.sort((Re,Ae)=>Ae.originalStart-Re.originalStart))Q(q,ne,q-(ve.originalStart+ve.originalLength)),q=ve.originalStart,ne=ve.modifiedStart-z,this.spliceSimple([...$,q],ve.originalLength,O.f.slice(R,ne,ne+ve.modifiedLength),D);Q(q,ne,q)}spliceSimple(_,d,m=O.f.empty(),{onDidCreateNode:S,onDidDeleteNode:D,diffIdentityProvider:E}){const{parentNode:B,listIndex:R,revealed:z,visible:W}=this.getParentNodeWithListIndex(_),$=[],Q=O.f.map(m,N=>this.createTreeNode(N,B,B.visible?1:0,z,$,S)),q=_[_.length-1];let ne=0;for(let N=q;N>=0&&N<B.children.length;N--){const j=B.children[N];if(j.visible){ne=j.visibleChildIndex;break}}const ve=[];let Re=0,Ae=0;for(const N of Q)ve.push(N),Ae+=N.renderNodeCount,N.visible&&(N.visibleChildIndex=ne+Re++);const re=(0,G.V4)(B.children,q,d,ve);E?B.lastDiffIds?(0,G.V4)(B.lastDiffIds,q,d,ve.map(N=>E.getId(N.element).toString())):B.lastDiffIds=B.children.map(N=>E.getId(N.element).toString()):B.lastDiffIds=void 0;let K=0;for(const N of re)N.visible&&K++;if(K!==0)for(let N=q+ve.length;N<B.children.length;N++){const j=B.children[N];j.visible&&(j.visibleChildIndex-=K)}if(B.visibleChildrenCount+=Re-K,z&&W){const N=re.reduce((j,me)=>j+(me.visible?me.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(B,Ae-N),this.list.splice(R,N,$)}if(re.length>0&&D){const N=j=>{D(j),j.children.forEach(N)};re.forEach(N)}this._onDidSplice.fire({insertedNodes:ve,deletedNodes:re});let F=B;for(;F;){if(F.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}F=F.parent}}rerender(_){if(_.length===0)throw new u.jh(this.user,"Invalid tree location");const{node:d,listIndex:m,revealed:S}=this.getTreeNodeWithListIndex(_);d.visible&&S&&this.list.splice(m,1,[d])}has(_){return this.hasTreeNode(_)}getListIndex(_){const{listIndex:d,visible:m,revealed:S}=this.getTreeNodeWithListIndex(_);return m&&S?d:-1}getListRenderCount(_){return this.getTreeNode(_).renderNodeCount}isCollapsible(_){return this.getTreeNode(_).collapsible}setCollapsible(_,d){const m=this.getTreeNode(_);typeof d>"u"&&(d=!m.collapsible);const S={collapsible:d};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(_,S))}isCollapsed(_){return this.getTreeNode(_).collapsed}setCollapsed(_,d,m){const S=this.getTreeNode(_);typeof d>"u"&&(d=!S.collapsed);const D={collapsed:d,recursive:m||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(_,D))}_setCollapseState(_,d){const{node:m,listIndex:S,revealed:D}=this.getTreeNodeWithListIndex(_),E=this._setListNodeCollapseState(m,S,D,d);if(m!==this.root&&this.autoExpandSingleChildren&&E&&!b(d)&&m.collapsible&&!m.collapsed&&!d.recursive){let B=-1;for(let R=0;R<m.children.length;R++)if(m.children[R].visible)if(B>-1){B=-1;break}else B=R;B>-1&&this._setCollapseState([..._,B],d)}return E}_setListNodeCollapseState(_,d,m,S){const D=this._setNodeCollapseState(_,S,!1);if(!m||!_.visible||!D)return D;const E=_.renderNodeCount,B=this.updateNodeAfterCollapseChange(_),R=E-(d===-1?0:1);return this.list.splice(d+1,R,B.slice(1)),D}_setNodeCollapseState(_,d,m){let S;if(_===this.root?S=!1:(b(d)?(S=_.collapsible!==d.collapsible,_.collapsible=d.collapsible):_.collapsible?(S=_.collapsed!==d.collapsed,_.collapsed=d.collapsed):S=!1,S&&this._onDidChangeCollapseState.fire({node:_,deep:m})),!b(d)&&d.recursive)for(const D of _.children)S=this._setNodeCollapseState(D,d,!0)||S;return S}expandTo(_){this.eventBufferer.bufferEvents(()=>{let d=this.getTreeNode(_);for(;d.parent;)d=d.parent,_=_.slice(0,_.length-1),d.collapsed&&this._setCollapseState(_,{collapsed:!1,recursive:!1})})}refilter(){const _=this.root.renderNodeCount,d=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,_,d),this.refilterDelayer.cancel()}createTreeNode(_,d,m,S,D,E){const B={parent:d,element:_.element,children:[],depth:d.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof _.collapsible=="boolean"?_.collapsible:typeof _.collapsed<"u",collapsed:typeof _.collapsed>"u"?this.collapseByDefault:_.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},R=this._filterNode(B,m);B.visibility=R,S&&D.push(B);const z=_.children||O.f.empty(),W=S&&R!==0&&!B.collapsed;let $=0,Q=1;for(const q of z){const ne=this.createTreeNode(q,B,R,W,D,E);B.children.push(ne),Q+=ne.renderNodeCount,ne.visible&&(ne.visibleChildIndex=$++)}return this.allowNonCollapsibleParents||(B.collapsible=B.collapsible||B.children.length>0),B.visibleChildrenCount=$,B.visible=R===2?$>0:R===1,B.visible?B.collapsed||(B.renderNodeCount=Q):(B.renderNodeCount=0,S&&D.pop()),E?.(B),B}updateNodeAfterCollapseChange(_){const d=_.renderNodeCount,m=[];return this._updateNodeAfterCollapseChange(_,m),this._updateAncestorsRenderNodeCount(_.parent,m.length-d),m}_updateNodeAfterCollapseChange(_,d){if(_.visible===!1)return 0;if(d.push(_),_.renderNodeCount=1,!_.collapsed)for(const m of _.children)_.renderNodeCount+=this._updateNodeAfterCollapseChange(m,d);return this._onDidChangeRenderNodeCount.fire(_),_.renderNodeCount}updateNodeAfterFilterChange(_){const d=_.renderNodeCount,m=[];return this._updateNodeAfterFilterChange(_,_.visible?1:0,m),this._updateAncestorsRenderNodeCount(_.parent,m.length-d),m}_updateNodeAfterFilterChange(_,d,m,S=!0){let D;if(_!==this.root){if(D=this._filterNode(_,d),D===0)return _.visible=!1,_.renderNodeCount=0,!1;S&&m.push(_)}const E=m.length;_.renderNodeCount=_===this.root?0:1;let B=!1;if(!_.collapsed||D!==0){let R=0;for(const z of _.children)B=this._updateNodeAfterFilterChange(z,D,m,S&&!_.collapsed)||B,z.visible&&(z.visibleChildIndex=R++);_.visibleChildrenCount=R}else _.visibleChildrenCount=0;return _!==this.root&&(_.visible=D===2?B:D===1,_.visibility=D),_.visible?_.collapsed||(_.renderNodeCount+=m.length-E):(_.renderNodeCount=0,S&&m.pop()),this._onDidChangeRenderNodeCount.fire(_),_.visible}_updateAncestorsRenderNodeCount(_,d){if(d!==0)for(;_;)_.renderNodeCount+=d,this._onDidChangeRenderNodeCount.fire(_),_=_.parent}_filterNode(_,d){const m=this.filter?this.filter.filter(_.element,d):1;return typeof m=="boolean"?(_.filterData=void 0,m?1:0):A(m)?(_.filterData=m.data,I(m.visibility)):(_.filterData=void 0,I(m))}hasTreeNode(_,d=this.root){if(!_||_.length===0)return!0;const[m,...S]=_;return m<0||m>d.children.length?!1:this.hasTreeNode(S,d.children[m])}getTreeNode(_,d=this.root){if(!_||_.length===0)return d;const[m,...S]=_;if(m<0||m>d.children.length)throw new u.jh(this.user,"Invalid tree location");return this.getTreeNode(S,d.children[m])}getTreeNodeWithListIndex(_){if(_.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:d,listIndex:m,revealed:S,visible:D}=this.getParentNodeWithListIndex(_),E=_[_.length-1];if(E<0||E>d.children.length)throw new u.jh(this.user,"Invalid tree location");const B=d.children[E];return{node:B,listIndex:m,revealed:S,visible:D&&B.visible}}getParentNodeWithListIndex(_,d=this.root,m=0,S=!0,D=!0){const[E,...B]=_;if(E<0||E>d.children.length)throw new u.jh(this.user,"Invalid tree location");for(let R=0;R<E;R++)m+=d.children[R].renderNodeCount;return S=S&&!d.collapsed,D=D&&d.visible,B.length===0?{parentNode:d,listIndex:m,revealed:S,visible:D}:this.getParentNodeWithListIndex(B,d.children[E],m+1,S,D)}getNode(_=[]){return this.getTreeNode(_)}getNodeLocation(_){const d=[];let m=_;for(;m.parent;)d.push(m.parent.children.indexOf(m)),m=m.parent;return d.reverse()}getParentNodeLocation(_){if(_.length!==0)return _.length===1?[]:(0,G.bS)(_)[0]}getFirstElementChild(_){const d=this.getTreeNode(_);if(d.children.length!==0)return d.children[0].element}}},51922:(Mt,He,c)=>{c.d(He,{Cn:()=>A,TM:()=>C,Uk:()=>u,XP:()=>M,hw:()=>w,iM:()=>P,kh:()=>b,lx:()=>U,oH:()=>v,ot:()=>I,vJ:()=>O});function u(_,d){const m=G(_,d);if(m!==-1)return _[m]}function G(_,d,m=_.length-1){for(let S=m;S>=0;S--){const D=_[S];if(d(D))return S}return-1}function U(_,d){const m=P(_,d);return m===-1?void 0:_[m]}function P(_,d,m=0,S=_.length){let D=m,E=S;for(;D<E;){const B=Math.floor((D+E)/2);d(_[B])?D=B+1:E=B}return D-1}function M(_,d){const m=w(_,d);return m===_.length?void 0:_[m]}function w(_,d,m=0,S=_.length){let D=m,E=S;for(;D<E;){const B=Math.floor((D+E)/2);d(_[B])?E=B:D=B+1}return D}class O{static{this.assertInvariants=!1}constructor(d){this._array=d,this._findLastMonotonousLastIdx=0}findLastMonotonous(d){if(O.assertInvariants){if(this._prevFindLastPredicate){for(const S of this._array)if(this._prevFindLastPredicate(S)&&!d(S))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=d}const m=P(this._array,d,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=m+1,m===-1?void 0:this._array[m]}}function A(_,d){if(_.length===0)return;let m=_[0];for(let S=1;S<_.length;S++){const D=_[S];d(D,m)>0&&(m=D)}return m}function I(_,d){if(_.length===0)return;let m=_[0];for(let S=1;S<_.length;S++){const D=_[S];d(D,m)>=0&&(m=D)}return m}function b(_,d){return A(_,(m,S)=>-d(m,S))}function C(_,d){if(_.length===0)return-1;let m=0;for(let S=1;S<_.length;S++){const D=_[S];d(D,_[m])>0&&(m=S)}return m}function v(_,d){for(const m of _){const S=d(m);if(S!==void 0)return S}}},52229:(Mt,He,c)=>{c.d(He,{c:()=>P});var u=c(76350),G=c(98414),U=c(87207);class P{static _handleEolEdits(w,O){let A;const I=[];for(const b of O)typeof b.eol=="number"&&(A=b.eol),b.range&&typeof b.text=="string"&&I.push(b);return typeof A=="number"&&w.hasModel()&&w.getModel().pushEOL(A),I}static _isFullModelReplaceEdit(w,O){if(!w.hasModel())return!1;const A=w.getModel(),I=A.validateRange(O.range);return A.getFullModelRange().equalsRange(I)}static execute(w,O,A){A&&w.pushUndoStop();const I=U.D.capture(w),b=P._handleEolEdits(w,O);b.length===1&&P._isFullModelReplaceEdit(w,b[0])?w.executeEdits("formatEditsCommand",b.map(C=>u.k.replace(G.Q.lift(C.range),C.text))):w.executeEdits("formatEditsCommand",b.map(C=>u.k.replaceMove(G.Q.lift(C.range),C.text))),A&&w.pushUndoStop(),I.restoreRelativeVerticalPositionOfCursor(w)}}},52906:(Mt,He,c)=>{c.d(He,{m:()=>Ae,p:()=>Re});var u=c(31938),G=c(25334),U=c(80074),P=c(27759),M=c(43860),w=c(67538),O=c(42640),A=c(56491),I=c(60599),b=c(45573),C=c(15903);class v extends I.jG{constructor(K,F,N={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new A._B),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new I.Cm),N.hoverDelegate=N.hoverDelegate??this._register((0,C.bW)()),this.options=N,this.toggleMenuAction=this._register(new _(()=>this.toggleMenuActionViewItem?.show(),N.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",K.appendChild(this.element),this.actionBar=this._register(new U.E(this.element,{orientation:N.orientation,ariaLabel:N.ariaLabel,actionRunner:N.actionRunner,allowContextMenu:N.allowContextMenu,highlightToggledItems:N.highlightToggledItems,hoverDelegate:N.hoverDelegate,actionViewItemProvider:(j,me)=>{if(j.id===_.ID)return this.toggleMenuActionViewItem=new P.d(j,j.menuActions,F,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:O.L.asClassNameArray(N.moreIcon??w.W.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(N.actionViewItemProvider){const ce=N.actionViewItemProvider(j,me);if(ce)return ce}if(j instanceof M.YH){const ce=new P.d(j,j.actions,F,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:j.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return ce.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(ce),this.disposables.add(this._onDidChangeDropdownVisibility.add(ce.onDidChangeVisibility)),ce}}}))}set actionRunner(K){this.actionBar.actionRunner=K}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(K){return this.actionBar.getAction(K)}setActions(K,F){this.clear();const N=K?K.slice(0):[];this.hasSecondaryActions=!!(F&&F.length>0),this.hasSecondaryActions&&F&&(this.toggleMenuAction.menuActions=F.slice(0),N.push(this.toggleMenuAction)),N.forEach(j=>{this.actionBar.push(j,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(j)})})}getKeybindingLabel(K){return this.options.getKeyBinding?.(K)?.getLabel()??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}class _ extends M.rc{static{this.ID="toolbar.toggle.more"}constructor(K,F){F=F||b.kg("moreActions","More Actions..."),super(_.ID,F,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=K}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(K){this._menuActions=K}}var d=c(93009),m=c(99042),S=c(87856),D=c(13697),E=c(4857),B=c(76222),R=c(51159),z=c(93750),W=c(25894),$=c(4879),Q=c(87386),q=c(91090),ne=function(re,K,F,N){var j=arguments.length,me=j<3?K:N===null?N=Object.getOwnPropertyDescriptor(K,F):N,ce;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")me=Reflect.decorate(re,K,F,N);else for(var he=re.length-1;he>=0;he--)(ce=re[he])&&(me=(j<3?ce(me):j>3?ce(K,F,me):ce(K,F))||me);return j>3&&me&&Object.defineProperty(K,F,me),me},ve=function(re,K){return function(F,N){K(F,N,re)}};let Re=class extends v{constructor(K,F,N,j,me,ce,he,Le){super(K,me,{getKeyBinding:ae=>ce.lookupKeybinding(ae.id)??void 0,...F,allowContextMenu:!0,skipTelemetry:typeof F?.telemetrySource=="string"}),this._options=F,this._menuService=N,this._contextKeyService=j,this._contextMenuService=me,this._keybindingService=ce,this._commandService=he,this._sessionDisposables=this._store.add(new I.Cm);const Y=F?.telemetrySource;Y&&this._store.add(this.actionBar.onDidRun(ae=>Le.publicLog2("workbenchActionExecuted",{id:ae.action.id,from:Y})))}setActions(K,F=[],N){this._sessionDisposables.clear();const j=K.slice(),me=F.slice(),ce=[];let he=0;const Le=[];let Y=!1;if(this._options?.hiddenItemStrategy!==-1)for(let ae=0;ae<j.length;ae++){const Ce=j[ae];!(Ce instanceof B.Xe)&&!(Ce instanceof B.nI)||Ce.hideActions&&(ce.push(Ce.hideActions.toggle),Ce.hideActions.toggle.checked&&he++,Ce.hideActions.isHidden&&(Y=!0,j[ae]=void 0,this._options?.hiddenItemStrategy!==0&&(Le[ae]=Ce)))}if(this._options?.overflowBehavior!==void 0){const ae=(0,m.E)(new Set(this._options.overflowBehavior.exempted),D.f.map(j,ye=>ye?.id)),Ce=this._options.overflowBehavior.maxItems-ae.size;let Pe=0;for(let ye=0;ye<j.length;ye++){const Ke=j[ye];Ke&&(Pe++,!ae.has(Ke.id)&&Pe>=Ce&&(j[ye]=void 0,Le[ye]=Ke))}}(0,d.SK)(j),(0,d.SK)(Le),super.setActions(j,M.wv.join(Le,me)),(ce.length>0||j.length>0)&&this._sessionDisposables.add((0,u.ko)(this.getElement(),"contextmenu",ae=>{const Ce=new G.P((0,u.zk)(this.getElement()),ae),Pe=this.getItemAction(Ce.target);if(!Pe)return;Ce.preventDefault(),Ce.stopPropagation();const ye=[];if(Pe instanceof B.Xe&&Pe.menuKeybinding)ye.push(Pe.menuKeybinding);else if(!(Pe instanceof B.nI||Pe instanceof _)){const qe=!!this._keybindingService.lookupKeybinding(Pe.id);ye.push((0,R.D)(this._commandService,this._keybindingService,Pe.id,void 0,qe))}if(ce.length>0){let qe=!1;if(he===1&&this._options?.hiddenItemStrategy===0){qe=!0;for(let Ue=0;Ue<ce.length;Ue++)if(ce[Ue].checked){ce[Ue]=(0,M.ih)({id:Pe.id,label:Pe.label,checked:!0,enabled:!1,run(){}});break}}if(!qe&&(Pe instanceof B.Xe||Pe instanceof B.nI)){if(!Pe.hideActions)return;ye.push(Pe.hideActions.hide)}else ye.push((0,M.ih)({id:"label",label:(0,b.kg)("hide","Hide"),enabled:!1,run(){}}))}const Ke=M.wv.join(ye,ce);this._options?.resetMenu&&!N&&(N=[this._options.resetMenu]),Y&&N&&(Ke.push(new M.wv),Ke.push((0,M.ih)({id:"resetThisMenu",label:(0,b.kg)("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(N)}))),Ke.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>Ce,getActions:()=>Ke,menuId:this._options?.contextMenu,menuActionOptions:{renderShortTitle:!0,...this._options?.menuOptions},skipTelemetry:typeof this._options?.telemetrySource=="string",contextKeyService:this._contextKeyService})}))}};Re=ne([ve(2,B.ez),ve(3,W.fN),ve(4,$.Z),ve(5,Q.b),ve(6,z.d),ve(7,q.k)],Re);let Ae=class extends Re{constructor(K,F,N,j,me,ce,he,Le,Y){super(K,{resetMenu:F,...N},j,me,ce,he,Le,Y),this._onDidChangeMenuItems=this._store.add(new A.vl),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const ae=this._store.add(j.createMenu(F,me,{emitEventsForSubmenuChanges:!0})),Ce=()=>{const Pe=[],ye=[];(0,E.Ot)(ae,N?.menuOptions,{primary:Pe,secondary:ye},N?.toolbarOptions?.primaryGroup,N?.toolbarOptions?.shouldInlineSubmenu,N?.toolbarOptions?.useSeparatorsInPrimaryActions),K.classList.toggle("has-no-actions",Pe.length===0&&ye.length===0),super.setActions(Pe,ye)};this._store.add(ae.onDidChange(()=>{Ce(),this._onDidChangeMenuItems.fire(this)})),Ce()}setActions(){throw new S.D7("This toolbar is populated from a menu.")}};Ae=ne([ve(3,B.ez),ve(4,W.fN),ve(5,$.Z),ve(6,Q.b),ve(7,z.d),ve(8,q.k)],Ae)},53397:(Mt,He,c)=>{c.d(He,{Ix:()=>b,bc:()=>A,nV:()=>I});var u=c(15903),G=c(47896),U=c(67538),P=c(45573);const M=P.kg("caseDescription","Match Case"),w=P.kg("wordsDescription","Match Whole Word"),O=P.kg("regexDescription","Use Regular Expression");class A extends G.l{constructor(v){super({icon:U.W.caseSensitive,title:M+v.appendTitle,isChecked:v.isChecked,hoverDelegate:v.hoverDelegate??(0,u.nZ)("element"),inputActiveOptionBorder:v.inputActiveOptionBorder,inputActiveOptionForeground:v.inputActiveOptionForeground,inputActiveOptionBackground:v.inputActiveOptionBackground})}}class I extends G.l{constructor(v){super({icon:U.W.wholeWord,title:w+v.appendTitle,isChecked:v.isChecked,hoverDelegate:v.hoverDelegate??(0,u.nZ)("element"),inputActiveOptionBorder:v.inputActiveOptionBorder,inputActiveOptionForeground:v.inputActiveOptionForeground,inputActiveOptionBackground:v.inputActiveOptionBackground})}}class b extends G.l{constructor(v){super({icon:U.W.regex,title:O+v.appendTitle,isChecked:v.isChecked,hoverDelegate:v.hoverDelegate??(0,u.nZ)("element"),inputActiveOptionBorder:v.inputActiveOptionBorder,inputActiveOptionForeground:v.inputActiveOptionForeground,inputActiveOptionBackground:v.inputActiveOptionBackground})}}},53605:(Mt,He,c)=>{c.d(He,{i:()=>M});var u=c(41461),G=c(79821);class U extends G.V{constructor(O,A){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=A,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let I=0,b=O.length;I<b;I++)this.set(O.charCodeAt(I),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(O,A){let I=null;for(const b of this._getIntlSegmenterWordsOnLine(O)){if(b.index>A)break;I=b}return I}findNextIntlWordAtOrAfterOffset(O,A){for(const I of this._getIntlSegmenterWordsOnLine(O))if(!(I.index<A))return I;return null}_getIntlSegmenterWordsOnLine(O){return this._segmenter?this._cachedLine===O?this._cachedSegments:(this._cachedLine=O,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(O)),this._cachedSegments):[]}_filterWordSegments(O){const A=[];for(const I of O)this._isWordLike(I)&&A.push(I);return A}_isWordLike(O){return!!O.isWordLike}}const P=new u.qK(10);function M(w,O){const A=`${w}/${O.join(",")}`;let I=P.get(A);return I||(I=new U(w,O),P.set(A,I)),I}},53784:(Mt,He,c)=>{c.d(He,{D:()=>u,Z:()=>U});class u{constructor(M){this.domNode=M,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(M){const w=G(M);this._maxWidth!==w&&(this._maxWidth=w,this.domNode.style.maxWidth=this._maxWidth)}setWidth(M){const w=G(M);this._width!==w&&(this._width=w,this.domNode.style.width=this._width)}setHeight(M){const w=G(M);this._height!==w&&(this._height=w,this.domNode.style.height=this._height)}setTop(M){const w=G(M);this._top!==w&&(this._top=w,this.domNode.style.top=this._top)}setLeft(M){const w=G(M);this._left!==w&&(this._left=w,this.domNode.style.left=this._left)}setBottom(M){const w=G(M);this._bottom!==w&&(this._bottom=w,this.domNode.style.bottom=this._bottom)}setRight(M){const w=G(M);this._right!==w&&(this._right=w,this.domNode.style.right=this._right)}setPaddingLeft(M){const w=G(M);this._paddingLeft!==w&&(this._paddingLeft=w,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(M){this._fontFamily!==M&&(this._fontFamily=M,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(M){this._fontWeight!==M&&(this._fontWeight=M,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(M){const w=G(M);this._fontSize!==w&&(this._fontSize=w,this.domNode.style.fontSize=this._fontSize)}setFontStyle(M){this._fontStyle!==M&&(this._fontStyle=M,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(M){this._fontFeatureSettings!==M&&(this._fontFeatureSettings=M,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(M){this._fontVariationSettings!==M&&(this._fontVariationSettings=M,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(M){this._textDecoration!==M&&(this._textDecoration=M,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(M){const w=G(M);this._lineHeight!==w&&(this._lineHeight=w,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(M){const w=G(M);this._letterSpacing!==w&&(this._letterSpacing=w,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(M){this._className!==M&&(this._className=M,this.domNode.className=this._className)}toggleClassName(M,w){this.domNode.classList.toggle(M,w),this._className=this.domNode.className}setDisplay(M){this._display!==M&&(this._display=M,this.domNode.style.display=this._display)}setPosition(M){this._position!==M&&(this._position=M,this.domNode.style.position=this._position)}setVisibility(M){this._visibility!==M&&(this._visibility=M,this.domNode.style.visibility=this._visibility)}setColor(M){this._color!==M&&(this._color=M,this.domNode.style.color=this._color)}setBackgroundColor(M){this._backgroundColor!==M&&(this._backgroundColor=M,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(M){this._layerHint!==M&&(this._layerHint=M,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(M){this._boxShadow!==M&&(this._boxShadow=M,this.domNode.style.boxShadow=M)}setContain(M){this._contain!==M&&(this._contain=M,this.domNode.style.contain=this._contain)}setAttribute(M,w){this.domNode.setAttribute(M,w)}removeAttribute(M){this.domNode.removeAttribute(M)}appendChild(M){this.domNode.appendChild(M.domNode)}removeChild(M){this.domNode.removeChild(M.domNode)}}function G(P){return typeof P=="number"?`${P}px`:P}function U(P){return new u(P)}},53897:(Mt,He,c)=>{c.d(He,{Bc:()=>w,VS:()=>A,_W:()=>_,it:()=>O,nI:()=>d,nK:()=>I,oO:()=>v});var u=c(87856),G=c(60317),U=c(38266),P=c(85565),M=c(37473);class w{constructor(S="",D=!1){if(this.value=S,typeof this.value!="string")throw(0,u.Qg)("value");typeof D=="boolean"?(this.isTrusted=D,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=D.isTrusted??void 0,this.supportThemeIcons=D.supportThemeIcons??!1,this.supportHtml=D.supportHtml??!1)}appendText(S,D=0){return this.value+=b(this.supportThemeIcons?(0,G.m2)(S):S).replace(/([ \t]+)/g,(E,B)=>"&nbsp;".repeat(B.length)).replace(/\>/gm,"\\>").replace(/\n/g,D===1?`\\
`:`

`),this}appendMarkdown(S){return this.value+=S,this}appendCodeblock(S,D){return this.value+=`
${C(D,S)}
`,this}appendLink(S,D,E){return this.value+="[",this.value+=this._escape(D,"]"),this.value+="](",this.value+=this._escape(String(S),")"),E&&(this.value+=` "${this._escape(this._escape(E,'"'),")")}"`),this.value+=")",this}_escape(S,D){const E=new RegExp((0,P.bm)(D),"g");return S.replace(E,(B,R)=>S.charAt(R-1)!=="\\"?`\\${B}`:B)}}function O(m){return A(m)?!m.value:Array.isArray(m)?m.every(O):!0}function A(m){return m instanceof w?!0:m&&typeof m=="object"?typeof m.value=="string"&&(typeof m.isTrusted=="boolean"||typeof m.isTrusted=="object"||m.isTrusted===void 0)&&(typeof m.supportThemeIcons=="boolean"||m.supportThemeIcons===void 0):!1}function I(m,S){return m===S?!0:!m||!S?!1:m.value===S.value&&m.isTrusted===S.isTrusted&&m.supportThemeIcons===S.supportThemeIcons&&m.supportHtml===S.supportHtml&&(m.baseUri===S.baseUri||!!m.baseUri&&!!S.baseUri&&(0,U.n4)(M.r.from(m.baseUri),M.r.from(S.baseUri)))}function b(m){return m.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function C(m,S){const D=m.match(/^`+/gm)?.reduce((B,R)=>B.length>R.length?B:R).length??0,E=D>=3?D+1:3;return[`${"`".repeat(E)}${S}`,m,`${"`".repeat(E)}`].join(`
`)}function v(m){return m.replace(/"/g,"&quot;")}function _(m){return m&&m.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function d(m){const S=[],D=m.split("|").map(B=>B.trim());m=D[0];const E=D[1];if(E){const B=/height=(\d+)/.exec(E),R=/width=(\d+)/.exec(E),z=B?B[1]:"",W=R?R[1]:"",$=isFinite(parseInt(W)),Q=isFinite(parseInt(z));$&&S.push(`width="${W}"`),Q&&S.push(`height="${z}"`)}return{href:m,dimensions:S}}},54021:(Mt,He,c)=>{c.d(He,{Ez:()=>C,SJ:()=>m,fV:()=>A,ny:()=>w,v$:()=>O,zl:()=>d});var u=c(87856),G=c(90692),U=c(85565),P=c(37473),M=c(8264),w;(function(S){S.inMemory="inmemory",S.vscode="vscode",S.internal="private",S.walkThrough="walkThrough",S.walkThroughSnippet="walkThroughSnippet",S.http="http",S.https="https",S.file="file",S.mailto="mailto",S.untitled="untitled",S.data="data",S.command="command",S.vscodeRemote="vscode-remote",S.vscodeRemoteResource="vscode-remote-resource",S.vscodeManagedRemoteResource="vscode-managed-remote-resource",S.vscodeUserData="vscode-userdata",S.vscodeCustomEditor="vscode-custom-editor",S.vscodeNotebookCell="vscode-notebook-cell",S.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",S.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",S.vscodeNotebookCellOutput="vscode-notebook-cell-output",S.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",S.vscodeNotebookMetadata="vscode-notebook-metadata",S.vscodeInteractiveInput="vscode-interactive-input",S.vscodeSettings="vscode-settings",S.vscodeWorkspaceTrust="vscode-workspace-trust",S.vscodeTerminal="vscode-terminal",S.vscodeChatCodeBlock="vscode-chat-code-block",S.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",S.vscodeChatSesssion="vscode-chat-editor",S.webviewPanel="webview-panel",S.vscodeWebview="vscode-webview",S.extension="extension",S.vscodeFileResource="vscode-file",S.tmp="tmp",S.vsls="vsls",S.vscodeSourceControl="vscode-scm",S.commentsInput="comment",S.codeSetting="code-setting",S.outputChannel="output"})(w||(w={}));function O(S,D){return P.r.isUri(S)?(0,U.Q_)(S.scheme,D):(0,U.ns)(S,D+":")}function A(S,...D){return D.some(E=>O(S,E))}const I="tkn";class b{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(D){this._preferredWebSchema=D}get _remoteResourcesPath(){return M.SA.join(this._serverRootPath,w.vscodeRemoteResource)}rewrite(D){if(this._delegate)try{return this._delegate(D)}catch($){return u.dz($),D}const E=D.authority;let B=this._hosts[E];B&&B.indexOf(":")!==-1&&B.indexOf("[")===-1&&(B=`[${B}]`);const R=this._ports[E],z=this._connectionTokens[E];let W=`path=${encodeURIComponent(D.path)}`;return typeof z=="string"&&(W+=`&${I}=${encodeURIComponent(z)}`),P.r.from({scheme:G.HZ?this._preferredWebSchema:w.vscodeRemoteResource,authority:`${B}:${R}`,path:this._remoteResourcesPath,query:W})}}const C=new b,v="vscode-app";class _{static{this.FALLBACK_AUTHORITY=v}asBrowserUri(D){const E=this.toUri(D);return this.uriToBrowserUri(E)}uriToBrowserUri(D){return D.scheme===w.vscodeRemote?C.rewrite(D):D.scheme===w.file&&(G.ib||G.lg===`${w.vscodeFileResource}://${_.FALLBACK_AUTHORITY}`)?D.with({scheme:w.vscodeFileResource,authority:D.authority||_.FALLBACK_AUTHORITY,query:null,fragment:null}):D}toUri(D,E){if(P.r.isUri(D))return D;if(globalThis._VSCODE_FILE_ROOT){const B=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(B))return P.r.joinPath(P.r.parse(B,!0),D);const R=M.fj(B,D);return P.r.file(R)}return P.r.parse(E.toUrl(D))}}const d=new _;var m;(function(S){const D=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);S.CoopAndCoep=Object.freeze(D.get("3"));const E="vscode-coi";function B(z){let W;typeof z=="string"?W=new URL(z).searchParams:z instanceof URL?W=z.searchParams:P.r.isUri(z)&&(W=new URL(z.toString(!0)).searchParams);const $=W?.get(E);if($)return D.get($)}S.getHeadersFromQuery=B;function R(z,W,$){if(!globalThis.crossOriginIsolated)return;const Q=W&&$?"3":$?"2":"1";z instanceof URLSearchParams?z.set(E,Q):z[E]=Q}S.addSearchParam=R})(m||(m={}))},55766:(Mt,He,c)=>{c.d(He,{p:()=>u});var u;(function(G){G[G.FILE=0]="FILE",G[G.FOLDER=1]="FOLDER",G[G.ROOT_FOLDER=2]="ROOT_FOLDER"})(u||(u={}))},55946:(Mt,He,c)=>{c.d(He,{h:()=>u});const u=Symbol("MicrotaskDelay")},56491:(Mt,He,c)=>{c.d(He,{Jh:()=>I,QT:()=>q,Qy:()=>z,Wj:()=>Re,_B:()=>ne,at:()=>ve,fV:()=>$,uI:()=>Q,vl:()=>R});var u=c(87856),G=c(74730),U=c(60599),P=c(77714),M=c(4156);const w=!1,O=!1,A=!1;var I;(function(Ae){Ae.None=()=>U.jG.None;function re(oe){if(A){const{onDidAddListener:Te}=oe,Ve=_.create();let We=0;oe.onDidAddListener=()=>{++We===2&&Ve.print(),Te?.()}}}function K(oe,Te){return Pe(oe,()=>{},0,void 0,!0,void 0,Te)}Ae.defer=K;function F(oe){return(Te,Ve=null,We)=>{let dt=!1,Ye;return Ye=oe(mt=>{if(!dt)return Ye?Ye.dispose():dt=!0,Te.call(Ve,mt)},null,We),dt&&Ye.dispose(),Ye}}Ae.once=F;function N(oe,Te){return Ae.once(Ae.filter(oe,Te))}Ae.onceIf=N;function j(oe,Te,Ve){return ae((We,dt=null,Ye)=>oe(mt=>We.call(dt,Te(mt)),null,Ye),Ve)}Ae.map=j;function me(oe,Te,Ve){return ae((We,dt=null,Ye)=>oe(mt=>{Te(mt),We.call(dt,mt)},null,Ye),Ve)}Ae.forEach=me;function ce(oe,Te,Ve){return ae((We,dt=null,Ye)=>oe(mt=>Te(mt)&&We.call(dt,mt),null,Ye),Ve)}Ae.filter=ce;function he(oe){return oe}Ae.signal=he;function Le(...oe){return(Te,Ve=null,We)=>{const dt=(0,U.qE)(...oe.map(Ye=>Ye(mt=>Te.call(Ve,mt))));return Ce(dt,We)}}Ae.any=Le;function Y(oe,Te,Ve,We){let dt=Ve;return j(oe,Ye=>(dt=Te(dt,Ye),dt),We)}Ae.reduce=Y;function ae(oe,Te){let Ve;const We={onWillAddFirstListener(){Ve=oe(dt.fire,dt)},onDidRemoveLastListener(){Ve?.dispose()}};Te||re(We);const dt=new R(We);return Te?.add(dt),dt.event}function Ce(oe,Te){return Te instanceof Array?Te.push(oe):Te&&Te.add(oe),oe}function Pe(oe,Te,Ve=100,We=!1,dt=!1,Ye,mt){let Dt,Se,we,Xt=0,ri;const ke={leakWarningThreshold:Ye,onWillAddFirstListener(){Dt=oe(Fe=>{Xt++,Se=Te(Se,Fe),We&&!we&&(Z.fire(Se),Se=void 0),ri=()=>{const pt=Se;Se=void 0,we=void 0,(!We||Xt>1)&&Z.fire(pt),Xt=0},typeof Ve=="number"?(clearTimeout(we),we=setTimeout(ri,Ve)):we===void 0&&(we=0,queueMicrotask(ri))})},onWillRemoveListener(){dt&&Xt>0&&ri?.()},onDidRemoveLastListener(){ri=void 0,Dt.dispose()}};mt||re(ke);const Z=new R(ke);return mt?.add(Z),Z.event}Ae.debounce=Pe;function ye(oe,Te=0,Ve){return Ae.debounce(oe,(We,dt)=>We?(We.push(dt),We):[dt],Te,void 0,!0,void 0,Ve)}Ae.accumulate=ye;function Ke(oe,Te=(We,dt)=>We===dt,Ve){let We=!0,dt;return ce(oe,Ye=>{const mt=We||!Te(Ye,dt);return We=!1,dt=Ye,mt},Ve)}Ae.latch=Ke;function qe(oe,Te,Ve){return[Ae.filter(oe,Te,Ve),Ae.filter(oe,We=>!Te(We),Ve)]}Ae.split=qe;function Ue(oe,Te=!1,Ve=[],We){let dt=Ve.slice(),Ye=oe(Se=>{dt?dt.push(Se):Dt.fire(Se)});We&&We.add(Ye);const mt=()=>{dt?.forEach(Se=>Dt.fire(Se)),dt=null},Dt=new R({onWillAddFirstListener(){Ye||(Ye=oe(Se=>Dt.fire(Se)),We&&We.add(Ye))},onDidAddFirstListener(){dt&&(Te?setTimeout(mt):mt())},onDidRemoveLastListener(){Ye&&Ye.dispose(),Ye=null}});return We&&We.add(Dt),Dt.event}Ae.buffer=Ue;function x(oe,Te){return(We,dt,Ye)=>{const mt=Te(new Ze);return oe(function(Dt){const Se=mt.evaluate(Dt);Se!==it&&We.call(dt,Se)},void 0,Ye)}}Ae.chain=x;const it=Symbol("HaltChainable");class Ze{constructor(){this.steps=[]}map(Te){return this.steps.push(Te),this}forEach(Te){return this.steps.push(Ve=>(Te(Ve),Ve)),this}filter(Te){return this.steps.push(Ve=>Te(Ve)?Ve:it),this}reduce(Te,Ve){let We=Ve;return this.steps.push(dt=>(We=Te(We,dt),We)),this}latch(Te=(Ve,We)=>Ve===We){let Ve=!0,We;return this.steps.push(dt=>{const Ye=Ve||!Te(dt,We);return Ve=!1,We=dt,Ye?dt:it}),this}evaluate(Te){for(const Ve of this.steps)if(Te=Ve(Te),Te===it)break;return Te}}function _t(oe,Te,Ve=We=>We){const We=(...Dt)=>mt.fire(Ve(...Dt)),dt=()=>oe.on(Te,We),Ye=()=>oe.removeListener(Te,We),mt=new R({onWillAddFirstListener:dt,onDidRemoveLastListener:Ye});return mt.event}Ae.fromNodeEventEmitter=_t;function ot(oe,Te,Ve=We=>We){const We=(...Dt)=>mt.fire(Ve(...Dt)),dt=()=>oe.addEventListener(Te,We),Ye=()=>oe.removeEventListener(Te,We),mt=new R({onWillAddFirstListener:dt,onDidRemoveLastListener:Ye});return mt.event}Ae.fromDOMEventEmitter=ot;function Pt(oe){return new Promise(Te=>F(oe)(Te))}Ae.toPromise=Pt;function Wt(oe){const Te=new R;return oe.then(Ve=>{Te.fire(Ve)},()=>{Te.fire(void 0)}).finally(()=>{Te.dispose()}),Te.event}Ae.fromPromise=Wt;function Rt(oe,Te){return oe(Ve=>Te.fire(Ve))}Ae.forward=Rt;function at(oe,Te,Ve){return Te(Ve),oe(We=>Te(We))}Ae.runAndSubscribe=at;class Xe{constructor(Te,Ve){this._observable=Te,this._counter=0,this._hasChanged=!1;const We={onWillAddFirstListener:()=>{Te.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{Te.removeObserver(this)}};Ve||re(We),this.emitter=new R(We),Ve&&Ve.add(this.emitter)}beginUpdate(Te){this._counter++}handlePossibleChange(Te){}handleChange(Te,Ve){this._hasChanged=!0}endUpdate(Te){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function pe(oe,Te){return new Xe(oe,Te).emitter.event}Ae.fromObservable=pe;function te(oe){return(Te,Ve,We)=>{let dt=0,Ye=!1;const mt={beginUpdate(){dt++},endUpdate(){dt--,dt===0&&(oe.reportChanges(),Ye&&(Ye=!1,Te.call(Ve)))},handlePossibleChange(){},handleChange(){Ye=!0}};oe.addObserver(mt),oe.reportChanges();const Dt={dispose(){oe.removeObserver(mt)}};return We instanceof U.Cm?We.add(Dt):Array.isArray(We)&&We.push(Dt),Dt}}Ae.fromObservableLight=te})(I||(I={}));class b{static{this.all=new Set}static{this._idPool=0}constructor(re){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${re}_${b._idPool++}`,b.all.add(this)}start(re){this._stopWatch=new M.W,this.listenerCount=re}stop(){if(this._stopWatch){const re=this._stopWatch.elapsed();this.durations.push(re),this.elapsedOverall+=re,this.invocationCount+=1,this._stopWatch=void 0}}}let C=-1;class v{static{this._idPool=1}constructor(re,K,F=(v._idPool++).toString(16).padStart(3,"0")){this._errorHandler=re,this.threshold=K,this.name=F,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(re,K){const F=this.threshold;if(F<=0||K<F)return;this._stacks||(this._stacks=new Map);const N=this._stacks.get(re.value)||0;if(this._stacks.set(re.value,N+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=F*.5;const[j,me]=this.getMostFrequentStack(),ce=`[${this.name}] potential listener LEAK detected, having ${K} listeners already. MOST frequent listener (${me}):`,he=new d(ce,j);this._errorHandler(he)}return()=>{const j=this._stacks.get(re.value)||0;this._stacks.set(re.value,j-1)}}getMostFrequentStack(){if(!this._stacks)return;let re,K=0;for(const[F,N]of this._stacks)(!re||K<N)&&(re=[F,N],K=N);return re}}class _{static create(){const re=new Error;return new _(re.stack??"")}constructor(re){this.value=re}print(){}}class d extends Error{constructor(re,K){super(re),this.name="ListenerLeakError",this.stack=K}}class m extends Error{constructor(re,K){super(re),this.name="ListenerRefusalError",this.stack=K}}class S{constructor(re){this.value=re}}const D=2,E=(Ae,re)=>{if(Ae instanceof S)re(Ae);else for(let K=0;K<Ae.length;K++){const F=Ae[K];F&&re(F)}};let B;if(w){const Ae=[];setInterval(()=>{Ae.length!==0&&(Ae.length=0)},3e3),B=new FinalizationRegistry(re=>{typeof re=="string"&&Ae.push(re)})}class R{constructor(re){this._size=0,this._options=re,this._leakageMon=C>0||this._options?.leakWarningThreshold?new v(re?.onListenerError??u.dz,this._options?.leakWarningThreshold??C):void 0,this._perfMon=this._options?._profName?new b(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(O){const re=this._listeners;queueMicrotask(()=>{E(re,K=>K.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(re,K,F)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const he=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`,Le=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],Y=new m(`${he}. HINT: Stack shows most frequent listener (${Le[1]}-times)`,Le[0]);return(this._options?.onListenerError||u.dz)(Y),U.jG.None}if(this._disposed)return U.jG.None;K&&(re=re.bind(K));const N=new S(re);let j,me;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(N.stack=_.create(),j=this._leakageMon.check(N.stack,this._size+1)),O&&(N.stack=me??_.create()),this._listeners?this._listeners instanceof S?(this._deliveryQueue??=new W,this._listeners=[this._listeners,N]):this._listeners.push(N):(this._options?.onWillAddFirstListener?.(this),this._listeners=N,this._options?.onDidAddFirstListener?.(this)),this._size++;const ce=(0,U.s)(()=>{B?.unregister(ce),j?.(),this._removeListener(N)});if(F instanceof U.Cm?F.add(ce):Array.isArray(F)&&F.push(ce),B){const he=new Error().stack.split(`
`).slice(2,3).join(`
`).trim(),Le=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(he);B.register(ce,Le?.[2]??he,ce)}return ce},this._event}_removeListener(re){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}const K=this._listeners,F=K.indexOf(re);if(F===-1)throw new Error("Attempted to dispose unknown listener");this._size--,K[F]=void 0;const N=this._deliveryQueue.current===this;if(this._size*D<=K.length){let j=0;for(let me=0;me<K.length;me++)K[me]?K[j++]=K[me]:N&&(this._deliveryQueue.end--,j<this._deliveryQueue.i&&this._deliveryQueue.i--);K.length=j}}_deliver(re,K){if(!re)return;const F=this._options?.onListenerError||u.dz;if(!F){re.value(K);return}try{re.value(K)}catch(N){F(N)}}_deliverQueue(re){const K=re.current._listeners;for(;re.i<re.end;)this._deliver(K[re.i++],re.value);re.reset()}fire(re){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof S)this._deliver(this._listeners,re);else{const K=this._deliveryQueue;K.enqueue(this,re,this._listeners.length),this._deliverQueue(K)}this._perfMon?.stop()}hasListeners(){return this._size>0}}const z=()=>new W;class W{constructor(){this.i=-1,this.end=0}enqueue(re,K,F){this.i=0,this.end=F,this.current=re,this.value=K}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class $ extends R{constructor(re){super(re),this._isPaused=0,this._eventQueue=new P.w,this._mergeFn=re?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const re=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(re))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(re){this._size&&(this._isPaused!==0?this._eventQueue.push(re):super.fire(re))}}class Q extends ${constructor(re){super(re),this._delay=re.delay??100}fire(re){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(re)}}class q extends R{constructor(re){super(re),this._queuedEvents=[],this._mergeFn=re?.merge}fire(re){this.hasListeners()&&(this._queuedEvents.push(re),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(K=>super.fire(K)),this._queuedEvents=[]}))}}class ne{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new R({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(re){const K={event:re,listener:null};this.events.push(K),this.hasListeners&&this.hook(K);const F=()=>{this.hasListeners&&this.unhook(K);const N=this.events.indexOf(K);this.events.splice(N,1)};return(0,U.s)((0,G.P)(F))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(re=>this.hook(re))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(re=>this.unhook(re))}hook(re){re.listener=re.event(K=>this.emitter.fire(K))}unhook(re){re.listener?.dispose(),re.listener=null}dispose(){this.emitter.dispose();for(const re of this.events)re.listener?.dispose();this.events=[]}}class ve{constructor(){this.data=[]}wrapEvent(re,K,F){return(N,j,me)=>re(ce=>{const he=this.data[this.data.length-1];if(!K){he?he.buffers.push(()=>N.call(j,ce)):N.call(j,ce);return}const Le=he;if(!Le){N.call(j,K(F,ce));return}Le.items??=[],Le.items.push(ce),Le.buffers.length===0&&he.buffers.push(()=>{Le.reducedResult??=F?Le.items.reduce(K,F):Le.items.reduce(K),N.call(j,Le.reducedResult)})},void 0,me)}bufferEvents(re){const K={buffers:new Array};this.data.push(K);const F=re();return this.data.pop(),K.buffers.forEach(N=>N()),F}}class Re{constructor(){this.listening=!1,this.inputEvent=I.None,this.inputEventListener=U.jG.None,this.emitter=new R({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(re){this.inputEvent=re,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=re(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}},57352:(Mt,He,c)=>{c.d(He,{E6:()=>A,Hw:()=>U,YN:()=>G,gf:()=>M,n9:()=>w,oq:()=>P,tu:()=>I,vp:()=>O});var u=c(45573),G;(function(b){b.inspectTokensAction=u.kg("inspectTokens","Developer: Inspect Tokens")})(G||(G={}));var U;(function(b){b.gotoLineActionLabel=u.kg("gotoLineActionLabel","Go to Line/Column...")})(U||(U={}));var P;(function(b){b.helpQuickAccessActionLabel=u.kg("helpQuickAccess","Show all Quick Access Providers")})(P||(P={}));var M;(function(b){b.quickCommandActionLabel=u.kg("quickCommandActionLabel","Command Palette"),b.quickCommandHelp=u.kg("quickCommandActionHelp","Show And Run Commands")})(M||(M={}));var w;(function(b){b.quickOutlineActionLabel=u.kg("quickOutlineActionLabel","Go to Symbol..."),b.quickOutlineByCategoryActionLabel=u.kg("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(w||(w={}));var O;(function(b){b.editorViewAccessibleLabel=u.kg("editorViewAccessibleLabel","Editor content")})(O||(O={}));var A;(function(b){b.toggleHighContrast=u.kg("toggleHighContrast","Toggle High Contrast Theme")})(A||(A={}));var I;(function(b){b.bulkEditServiceSummary=u.kg("bulkEditServiceSummary","Made {0} edits in {1} files")})(I||(I={}))},58242:(Mt,He,c)=>{c.d(He,{S5:()=>G,n:()=>P,yk:()=>U});var u=c(31938);function G(b,C={}){const v=P(C);return v.textContent=b,v}function U(b,C={}){const v=P(C);return w(v,O(b,!!C.renderCodeSegments),C.actionHandler,C.renderCodeSegments),v}function P(b){const C=b.inline?"span":"div",v=document.createElement(C);return b.className&&(v.className=b.className),v}class M{constructor(C){this.source=C,this.index=0}eos(){return this.index>=this.source.length}next(){const C=this.peek();return this.advance(),C}peek(){return this.source[this.index]}advance(){this.index++}}function w(b,C,v,_){let d;if(C.type===2)d=document.createTextNode(C.content||"");else if(C.type===3)d=document.createElement("b");else if(C.type===4)d=document.createElement("i");else if(C.type===7&&_)d=document.createElement("code");else if(C.type===5&&v){const m=document.createElement("a");v.disposables.add(u.b2(m,"click",S=>{v.callback(String(C.index),S)})),d=m}else C.type===8?d=document.createElement("br"):C.type===1&&(d=b);d&&b!==d&&b.appendChild(d),d&&Array.isArray(C.children)&&C.children.forEach(m=>{w(d,m,v,_)})}function O(b,C){const v={type:1,children:[]};let _=0,d=v;const m=[],S=new M(b);for(;!S.eos();){let D=S.next();const E=D==="\\"&&I(S.peek(),C)!==0;if(E&&(D=S.next()),!E&&A(D,C)&&D===S.peek()){S.advance(),d.type===2&&(d=m.pop());const B=I(D,C);if(d.type===B||d.type===5&&B===6)d=m.pop();else{const R={type:B,children:[]};B===5&&(R.index=_,_++),d.children.push(R),m.push(d),d=R}}else if(D===`
`)d.type===2&&(d=m.pop()),d.children.push({type:8});else if(d.type!==2){const B={type:2,content:D};d.children.push(B),m.push(d),d=B}else d.content+=D}return d.type===2&&(d=m.pop()),m.length,v}function A(b,C){return I(b,C)!==0}function I(b,C){switch(b){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return C?7:0;default:return 0}}},59105:(Mt,He,c)=>{c.r(He),c.d(He,{ITextModelService:()=>G});var u=c(81545);const G=(0,u.u1)("textModelService")},59548:(Mt,He,c)=>{c.d(He,{A5:()=>K,Ah:()=>F,DD:()=>W,DO:()=>j,Gn:()=>u,H_:()=>Pe,Ic:()=>N,Io:()=>P,Kb:()=>b,M$:()=>S,OV:()=>Re,QP:()=>M,Qj:()=>O,R3:()=>q,SB:()=>Le,U7:()=>ye,VW:()=>E,VX:()=>ne,WA:()=>ae,WU:()=>d,XR:()=>he,YT:()=>Ae,ZS:()=>m,_E:()=>U,cj:()=>$,dE:()=>re,d_:()=>Q,e0:()=>C,h5:()=>A,hS:()=>ve,hW:()=>me,jT:()=>Y,kK:()=>qe,kf:()=>_,l:()=>D,m9:()=>Ke,of:()=>I,ok:()=>G,ov:()=>ce,p2:()=>v,qw:()=>R,r4:()=>B,sm:()=>z,t7:()=>w,tJ:()=>Ue,v0:()=>Ce});var u;(function(x){x[x.Unknown=0]="Unknown",x[x.Disabled=1]="Disabled",x[x.Enabled=2]="Enabled"})(u||(u={}));var G;(function(x){x[x.Invoke=1]="Invoke",x[x.Auto=2]="Auto"})(G||(G={}));var U;(function(x){x[x.None=0]="None",x[x.KeepWhitespace=1]="KeepWhitespace",x[x.InsertAsSnippet=4]="InsertAsSnippet"})(U||(U={}));var P;(function(x){x[x.Method=0]="Method",x[x.Function=1]="Function",x[x.Constructor=2]="Constructor",x[x.Field=3]="Field",x[x.Variable=4]="Variable",x[x.Class=5]="Class",x[x.Struct=6]="Struct",x[x.Interface=7]="Interface",x[x.Module=8]="Module",x[x.Property=9]="Property",x[x.Event=10]="Event",x[x.Operator=11]="Operator",x[x.Unit=12]="Unit",x[x.Value=13]="Value",x[x.Constant=14]="Constant",x[x.Enum=15]="Enum",x[x.EnumMember=16]="EnumMember",x[x.Keyword=17]="Keyword",x[x.Text=18]="Text",x[x.Color=19]="Color",x[x.File=20]="File",x[x.Reference=21]="Reference",x[x.Customcolor=22]="Customcolor",x[x.Folder=23]="Folder",x[x.TypeParameter=24]="TypeParameter",x[x.User=25]="User",x[x.Issue=26]="Issue",x[x.Snippet=27]="Snippet"})(P||(P={}));var M;(function(x){x[x.Deprecated=1]="Deprecated"})(M||(M={}));var w;(function(x){x[x.Invoke=0]="Invoke",x[x.TriggerCharacter=1]="TriggerCharacter",x[x.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(w||(w={}));var O;(function(x){x[x.EXACT=0]="EXACT",x[x.ABOVE=1]="ABOVE",x[x.BELOW=2]="BELOW"})(O||(O={}));var A;(function(x){x[x.NotSet=0]="NotSet",x[x.ContentFlush=1]="ContentFlush",x[x.RecoverFromMarkers=2]="RecoverFromMarkers",x[x.Explicit=3]="Explicit",x[x.Paste=4]="Paste",x[x.Undo=5]="Undo",x[x.Redo=6]="Redo"})(A||(A={}));var I;(function(x){x[x.LF=1]="LF",x[x.CRLF=2]="CRLF"})(I||(I={}));var b;(function(x){x[x.Text=0]="Text",x[x.Read=1]="Read",x[x.Write=2]="Write"})(b||(b={}));var C;(function(x){x[x.None=0]="None",x[x.Keep=1]="Keep",x[x.Brackets=2]="Brackets",x[x.Advanced=3]="Advanced",x[x.Full=4]="Full"})(C||(C={}));var v;(function(x){x[x.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",x[x.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",x[x.accessibilitySupport=2]="accessibilitySupport",x[x.accessibilityPageSize=3]="accessibilityPageSize",x[x.ariaLabel=4]="ariaLabel",x[x.ariaRequired=5]="ariaRequired",x[x.autoClosingBrackets=6]="autoClosingBrackets",x[x.autoClosingComments=7]="autoClosingComments",x[x.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",x[x.autoClosingDelete=9]="autoClosingDelete",x[x.autoClosingOvertype=10]="autoClosingOvertype",x[x.autoClosingQuotes=11]="autoClosingQuotes",x[x.autoIndent=12]="autoIndent",x[x.automaticLayout=13]="automaticLayout",x[x.autoSurround=14]="autoSurround",x[x.bracketPairColorization=15]="bracketPairColorization",x[x.guides=16]="guides",x[x.codeLens=17]="codeLens",x[x.codeLensFontFamily=18]="codeLensFontFamily",x[x.codeLensFontSize=19]="codeLensFontSize",x[x.colorDecorators=20]="colorDecorators",x[x.colorDecoratorsLimit=21]="colorDecoratorsLimit",x[x.columnSelection=22]="columnSelection",x[x.comments=23]="comments",x[x.contextmenu=24]="contextmenu",x[x.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",x[x.cursorBlinking=26]="cursorBlinking",x[x.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",x[x.cursorStyle=28]="cursorStyle",x[x.cursorSurroundingLines=29]="cursorSurroundingLines",x[x.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",x[x.cursorWidth=31]="cursorWidth",x[x.disableLayerHinting=32]="disableLayerHinting",x[x.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",x[x.domReadOnly=34]="domReadOnly",x[x.dragAndDrop=35]="dragAndDrop",x[x.dropIntoEditor=36]="dropIntoEditor",x[x.emptySelectionClipboard=37]="emptySelectionClipboard",x[x.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",x[x.extraEditorClassName=39]="extraEditorClassName",x[x.fastScrollSensitivity=40]="fastScrollSensitivity",x[x.find=41]="find",x[x.fixedOverflowWidgets=42]="fixedOverflowWidgets",x[x.folding=43]="folding",x[x.foldingStrategy=44]="foldingStrategy",x[x.foldingHighlight=45]="foldingHighlight",x[x.foldingImportsByDefault=46]="foldingImportsByDefault",x[x.foldingMaximumRegions=47]="foldingMaximumRegions",x[x.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",x[x.fontFamily=49]="fontFamily",x[x.fontInfo=50]="fontInfo",x[x.fontLigatures=51]="fontLigatures",x[x.fontSize=52]="fontSize",x[x.fontWeight=53]="fontWeight",x[x.fontVariations=54]="fontVariations",x[x.formatOnPaste=55]="formatOnPaste",x[x.formatOnType=56]="formatOnType",x[x.glyphMargin=57]="glyphMargin",x[x.gotoLocation=58]="gotoLocation",x[x.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",x[x.hover=60]="hover",x[x.inDiffEditor=61]="inDiffEditor",x[x.inlineSuggest=62]="inlineSuggest",x[x.inlineEdit=63]="inlineEdit",x[x.letterSpacing=64]="letterSpacing",x[x.lightbulb=65]="lightbulb",x[x.lineDecorationsWidth=66]="lineDecorationsWidth",x[x.lineHeight=67]="lineHeight",x[x.lineNumbers=68]="lineNumbers",x[x.lineNumbersMinChars=69]="lineNumbersMinChars",x[x.linkedEditing=70]="linkedEditing",x[x.links=71]="links",x[x.matchBrackets=72]="matchBrackets",x[x.minimap=73]="minimap",x[x.mouseStyle=74]="mouseStyle",x[x.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",x[x.mouseWheelZoom=76]="mouseWheelZoom",x[x.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",x[x.multiCursorModifier=78]="multiCursorModifier",x[x.multiCursorPaste=79]="multiCursorPaste",x[x.multiCursorLimit=80]="multiCursorLimit",x[x.occurrencesHighlight=81]="occurrencesHighlight",x[x.overviewRulerBorder=82]="overviewRulerBorder",x[x.overviewRulerLanes=83]="overviewRulerLanes",x[x.padding=84]="padding",x[x.pasteAs=85]="pasteAs",x[x.parameterHints=86]="parameterHints",x[x.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",x[x.placeholder=88]="placeholder",x[x.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",x[x.quickSuggestions=90]="quickSuggestions",x[x.quickSuggestionsDelay=91]="quickSuggestionsDelay",x[x.readOnly=92]="readOnly",x[x.readOnlyMessage=93]="readOnlyMessage",x[x.renameOnType=94]="renameOnType",x[x.renderControlCharacters=95]="renderControlCharacters",x[x.renderFinalNewline=96]="renderFinalNewline",x[x.renderLineHighlight=97]="renderLineHighlight",x[x.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",x[x.renderValidationDecorations=99]="renderValidationDecorations",x[x.renderWhitespace=100]="renderWhitespace",x[x.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",x[x.roundedSelection=102]="roundedSelection",x[x.rulers=103]="rulers",x[x.scrollbar=104]="scrollbar",x[x.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",x[x.scrollBeyondLastLine=106]="scrollBeyondLastLine",x[x.scrollPredominantAxis=107]="scrollPredominantAxis",x[x.selectionClipboard=108]="selectionClipboard",x[x.selectionHighlight=109]="selectionHighlight",x[x.selectOnLineNumbers=110]="selectOnLineNumbers",x[x.showFoldingControls=111]="showFoldingControls",x[x.showUnused=112]="showUnused",x[x.snippetSuggestions=113]="snippetSuggestions",x[x.smartSelect=114]="smartSelect",x[x.smoothScrolling=115]="smoothScrolling",x[x.stickyScroll=116]="stickyScroll",x[x.stickyTabStops=117]="stickyTabStops",x[x.stopRenderingLineAfter=118]="stopRenderingLineAfter",x[x.suggest=119]="suggest",x[x.suggestFontSize=120]="suggestFontSize",x[x.suggestLineHeight=121]="suggestLineHeight",x[x.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",x[x.suggestSelection=123]="suggestSelection",x[x.tabCompletion=124]="tabCompletion",x[x.tabIndex=125]="tabIndex",x[x.unicodeHighlighting=126]="unicodeHighlighting",x[x.unusualLineTerminators=127]="unusualLineTerminators",x[x.useShadowDOM=128]="useShadowDOM",x[x.useTabStops=129]="useTabStops",x[x.wordBreak=130]="wordBreak",x[x.wordSegmenterLocales=131]="wordSegmenterLocales",x[x.wordSeparators=132]="wordSeparators",x[x.wordWrap=133]="wordWrap",x[x.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",x[x.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",x[x.wordWrapColumn=136]="wordWrapColumn",x[x.wordWrapOverride1=137]="wordWrapOverride1",x[x.wordWrapOverride2=138]="wordWrapOverride2",x[x.wrappingIndent=139]="wrappingIndent",x[x.wrappingStrategy=140]="wrappingStrategy",x[x.showDeprecated=141]="showDeprecated",x[x.inlayHints=142]="inlayHints",x[x.editorClassName=143]="editorClassName",x[x.pixelRatio=144]="pixelRatio",x[x.tabFocusMode=145]="tabFocusMode",x[x.layoutInfo=146]="layoutInfo",x[x.wrappingInfo=147]="wrappingInfo",x[x.defaultColorDecorators=148]="defaultColorDecorators",x[x.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",x[x.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"})(v||(v={}));var _;(function(x){x[x.TextDefined=0]="TextDefined",x[x.LF=1]="LF",x[x.CRLF=2]="CRLF"})(_||(_={}));var d;(function(x){x[x.LF=0]="LF",x[x.CRLF=1]="CRLF"})(d||(d={}));var m;(function(x){x[x.Left=1]="Left",x[x.Center=2]="Center",x[x.Right=3]="Right"})(m||(m={}));var S;(function(x){x[x.Increase=0]="Increase",x[x.Decrease=1]="Decrease"})(S||(S={}));var D;(function(x){x[x.None=0]="None",x[x.Indent=1]="Indent",x[x.IndentOutdent=2]="IndentOutdent",x[x.Outdent=3]="Outdent"})(D||(D={}));var E;(function(x){x[x.Both=0]="Both",x[x.Right=1]="Right",x[x.Left=2]="Left",x[x.None=3]="None"})(E||(E={}));var B;(function(x){x[x.Type=1]="Type",x[x.Parameter=2]="Parameter"})(B||(B={}));var R;(function(x){x[x.Automatic=0]="Automatic",x[x.Explicit=1]="Explicit"})(R||(R={}));var z;(function(x){x[x.Invoke=0]="Invoke",x[x.Automatic=1]="Automatic"})(z||(z={}));var W;(function(x){x[x.DependsOnKbLayout=-1]="DependsOnKbLayout",x[x.Unknown=0]="Unknown",x[x.Backspace=1]="Backspace",x[x.Tab=2]="Tab",x[x.Enter=3]="Enter",x[x.Shift=4]="Shift",x[x.Ctrl=5]="Ctrl",x[x.Alt=6]="Alt",x[x.PauseBreak=7]="PauseBreak",x[x.CapsLock=8]="CapsLock",x[x.Escape=9]="Escape",x[x.Space=10]="Space",x[x.PageUp=11]="PageUp",x[x.PageDown=12]="PageDown",x[x.End=13]="End",x[x.Home=14]="Home",x[x.LeftArrow=15]="LeftArrow",x[x.UpArrow=16]="UpArrow",x[x.RightArrow=17]="RightArrow",x[x.DownArrow=18]="DownArrow",x[x.Insert=19]="Insert",x[x.Delete=20]="Delete",x[x.Digit0=21]="Digit0",x[x.Digit1=22]="Digit1",x[x.Digit2=23]="Digit2",x[x.Digit3=24]="Digit3",x[x.Digit4=25]="Digit4",x[x.Digit5=26]="Digit5",x[x.Digit6=27]="Digit6",x[x.Digit7=28]="Digit7",x[x.Digit8=29]="Digit8",x[x.Digit9=30]="Digit9",x[x.KeyA=31]="KeyA",x[x.KeyB=32]="KeyB",x[x.KeyC=33]="KeyC",x[x.KeyD=34]="KeyD",x[x.KeyE=35]="KeyE",x[x.KeyF=36]="KeyF",x[x.KeyG=37]="KeyG",x[x.KeyH=38]="KeyH",x[x.KeyI=39]="KeyI",x[x.KeyJ=40]="KeyJ",x[x.KeyK=41]="KeyK",x[x.KeyL=42]="KeyL",x[x.KeyM=43]="KeyM",x[x.KeyN=44]="KeyN",x[x.KeyO=45]="KeyO",x[x.KeyP=46]="KeyP",x[x.KeyQ=47]="KeyQ",x[x.KeyR=48]="KeyR",x[x.KeyS=49]="KeyS",x[x.KeyT=50]="KeyT",x[x.KeyU=51]="KeyU",x[x.KeyV=52]="KeyV",x[x.KeyW=53]="KeyW",x[x.KeyX=54]="KeyX",x[x.KeyY=55]="KeyY",x[x.KeyZ=56]="KeyZ",x[x.Meta=57]="Meta",x[x.ContextMenu=58]="ContextMenu",x[x.F1=59]="F1",x[x.F2=60]="F2",x[x.F3=61]="F3",x[x.F4=62]="F4",x[x.F5=63]="F5",x[x.F6=64]="F6",x[x.F7=65]="F7",x[x.F8=66]="F8",x[x.F9=67]="F9",x[x.F10=68]="F10",x[x.F11=69]="F11",x[x.F12=70]="F12",x[x.F13=71]="F13",x[x.F14=72]="F14",x[x.F15=73]="F15",x[x.F16=74]="F16",x[x.F17=75]="F17",x[x.F18=76]="F18",x[x.F19=77]="F19",x[x.F20=78]="F20",x[x.F21=79]="F21",x[x.F22=80]="F22",x[x.F23=81]="F23",x[x.F24=82]="F24",x[x.NumLock=83]="NumLock",x[x.ScrollLock=84]="ScrollLock",x[x.Semicolon=85]="Semicolon",x[x.Equal=86]="Equal",x[x.Comma=87]="Comma",x[x.Minus=88]="Minus",x[x.Period=89]="Period",x[x.Slash=90]="Slash",x[x.Backquote=91]="Backquote",x[x.BracketLeft=92]="BracketLeft",x[x.Backslash=93]="Backslash",x[x.BracketRight=94]="BracketRight",x[x.Quote=95]="Quote",x[x.OEM_8=96]="OEM_8",x[x.IntlBackslash=97]="IntlBackslash",x[x.Numpad0=98]="Numpad0",x[x.Numpad1=99]="Numpad1",x[x.Numpad2=100]="Numpad2",x[x.Numpad3=101]="Numpad3",x[x.Numpad4=102]="Numpad4",x[x.Numpad5=103]="Numpad5",x[x.Numpad6=104]="Numpad6",x[x.Numpad7=105]="Numpad7",x[x.Numpad8=106]="Numpad8",x[x.Numpad9=107]="Numpad9",x[x.NumpadMultiply=108]="NumpadMultiply",x[x.NumpadAdd=109]="NumpadAdd",x[x.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",x[x.NumpadSubtract=111]="NumpadSubtract",x[x.NumpadDecimal=112]="NumpadDecimal",x[x.NumpadDivide=113]="NumpadDivide",x[x.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",x[x.ABNT_C1=115]="ABNT_C1",x[x.ABNT_C2=116]="ABNT_C2",x[x.AudioVolumeMute=117]="AudioVolumeMute",x[x.AudioVolumeUp=118]="AudioVolumeUp",x[x.AudioVolumeDown=119]="AudioVolumeDown",x[x.BrowserSearch=120]="BrowserSearch",x[x.BrowserHome=121]="BrowserHome",x[x.BrowserBack=122]="BrowserBack",x[x.BrowserForward=123]="BrowserForward",x[x.MediaTrackNext=124]="MediaTrackNext",x[x.MediaTrackPrevious=125]="MediaTrackPrevious",x[x.MediaStop=126]="MediaStop",x[x.MediaPlayPause=127]="MediaPlayPause",x[x.LaunchMediaPlayer=128]="LaunchMediaPlayer",x[x.LaunchMail=129]="LaunchMail",x[x.LaunchApp2=130]="LaunchApp2",x[x.Clear=131]="Clear",x[x.MAX_VALUE=132]="MAX_VALUE"})(W||(W={}));var $;(function(x){x[x.Hint=1]="Hint",x[x.Info=2]="Info",x[x.Warning=4]="Warning",x[x.Error=8]="Error"})($||($={}));var Q;(function(x){x[x.Unnecessary=1]="Unnecessary",x[x.Deprecated=2]="Deprecated"})(Q||(Q={}));var q;(function(x){x[x.Inline=1]="Inline",x[x.Gutter=2]="Gutter"})(q||(q={}));var ne;(function(x){x[x.Normal=1]="Normal",x[x.Underlined=2]="Underlined"})(ne||(ne={}));var ve;(function(x){x[x.UNKNOWN=0]="UNKNOWN",x[x.TEXTAREA=1]="TEXTAREA",x[x.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",x[x.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",x[x.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",x[x.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",x[x.CONTENT_TEXT=6]="CONTENT_TEXT",x[x.CONTENT_EMPTY=7]="CONTENT_EMPTY",x[x.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",x[x.CONTENT_WIDGET=9]="CONTENT_WIDGET",x[x.OVERVIEW_RULER=10]="OVERVIEW_RULER",x[x.SCROLLBAR=11]="SCROLLBAR",x[x.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",x[x.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(ve||(ve={}));var Re;(function(x){x[x.AIGenerated=1]="AIGenerated"})(Re||(Re={}));var Ae;(function(x){x[x.Invoke=0]="Invoke",x[x.Automatic=1]="Automatic"})(Ae||(Ae={}));var re;(function(x){x[x.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",x[x.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",x[x.TOP_CENTER=2]="TOP_CENTER"})(re||(re={}));var K;(function(x){x[x.Left=1]="Left",x[x.Center=2]="Center",x[x.Right=4]="Right",x[x.Full=7]="Full"})(K||(K={}));var F;(function(x){x[x.Word=0]="Word",x[x.Line=1]="Line",x[x.Suggest=2]="Suggest"})(F||(F={}));var N;(function(x){x[x.Left=0]="Left",x[x.Right=1]="Right",x[x.None=2]="None",x[x.LeftOfInjectedText=3]="LeftOfInjectedText",x[x.RightOfInjectedText=4]="RightOfInjectedText"})(N||(N={}));var j;(function(x){x[x.Off=0]="Off",x[x.On=1]="On",x[x.Relative=2]="Relative",x[x.Interval=3]="Interval",x[x.Custom=4]="Custom"})(j||(j={}));var me;(function(x){x[x.None=0]="None",x[x.Text=1]="Text",x[x.Blocks=2]="Blocks"})(me||(me={}));var ce;(function(x){x[x.Smooth=0]="Smooth",x[x.Immediate=1]="Immediate"})(ce||(ce={}));var he;(function(x){x[x.Auto=1]="Auto",x[x.Hidden=2]="Hidden",x[x.Visible=3]="Visible"})(he||(he={}));var Le;(function(x){x[x.LTR=0]="LTR",x[x.RTL=1]="RTL"})(Le||(Le={}));var Y;(function(x){x.Off="off",x.OnCode="onCode",x.On="on"})(Y||(Y={}));var ae;(function(x){x[x.Invoke=1]="Invoke",x[x.TriggerCharacter=2]="TriggerCharacter",x[x.ContentChange=3]="ContentChange"})(ae||(ae={}));var Ce;(function(x){x[x.File=0]="File",x[x.Module=1]="Module",x[x.Namespace=2]="Namespace",x[x.Package=3]="Package",x[x.Class=4]="Class",x[x.Method=5]="Method",x[x.Property=6]="Property",x[x.Field=7]="Field",x[x.Constructor=8]="Constructor",x[x.Enum=9]="Enum",x[x.Interface=10]="Interface",x[x.Function=11]="Function",x[x.Variable=12]="Variable",x[x.Constant=13]="Constant",x[x.String=14]="String",x[x.Number=15]="Number",x[x.Boolean=16]="Boolean",x[x.Array=17]="Array",x[x.Object=18]="Object",x[x.Key=19]="Key",x[x.Null=20]="Null",x[x.EnumMember=21]="EnumMember",x[x.Struct=22]="Struct",x[x.Event=23]="Event",x[x.Operator=24]="Operator",x[x.TypeParameter=25]="TypeParameter"})(Ce||(Ce={}));var Pe;(function(x){x[x.Deprecated=1]="Deprecated"})(Pe||(Pe={}));var ye;(function(x){x[x.Hidden=0]="Hidden",x[x.Blink=1]="Blink",x[x.Smooth=2]="Smooth",x[x.Phase=3]="Phase",x[x.Expand=4]="Expand",x[x.Solid=5]="Solid"})(ye||(ye={}));var Ke;(function(x){x[x.Line=1]="Line",x[x.Block=2]="Block",x[x.Underline=3]="Underline",x[x.LineThin=4]="LineThin",x[x.BlockOutline=5]="BlockOutline",x[x.UnderlineThin=6]="UnderlineThin"})(Ke||(Ke={}));var qe;(function(x){x[x.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",x[x.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",x[x.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",x[x.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(qe||(qe={}));var Ue;(function(x){x[x.None=0]="None",x[x.Same=1]="Same",x[x.Indent=2]="Indent",x[x.DeepIndent=3]="DeepIndent"})(Ue||(Ue={}))},59890:(Mt,He,c)=>{c.d(He,{M4:()=>C,N4:()=>O,jQ:()=>A,vV:()=>b,vr:()=>I});var u=c(31938),G=c(15625),U=c(13511),P=c(60599),M=c(45573);const w=u.$;class O extends P.jG{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new U.MU(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}class A extends P.jG{static render(_,d,m){return new A(_,d,m)}constructor(_,d,m){super(),this.actionLabel=d.label,this.actionKeybindingLabel=m,this.actionContainer=u.BC(_,w("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=u.BC(this.actionContainer,w("a.action")),this.action.setAttribute("role","button"),d.iconClass&&u.BC(this.action,w(`span.icon.${d.iconClass}`));const S=u.BC(this.action,w("span"));S.textContent=m?`${d.label} (${m})`:d.label,this._store.add(new b(this.actionContainer,d.run)),this._store.add(new C(this.actionContainer,d.run,[3,10])),this.setEnabled(!0)}setEnabled(_){_?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function I(v,_){return v&&_?(0,M.kg)("acessibleViewHint","Inspect this in the accessible view with {0}.",_):v?(0,M.kg)("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class b extends P.jG{constructor(_,d){super(),this._register(u.ko(_,u.Bx.CLICK,m=>{m.stopPropagation(),m.preventDefault(),d(_)}))}}class C extends P.jG{constructor(_,d,m){super(),this._register(u.ko(_,u.Bx.KEY_DOWN,S=>{const D=new G.Z(S);m.some(E=>D.equals(E))&&(S.stopPropagation(),S.preventDefault(),d(_))}))}}},60153:(Mt,He,c)=>{c.d(He,{Np:()=>U,jA:()=>M,z9:()=>G});var u=c(74719);function G(w){return w&&typeof w.getEditorType=="function"?w.getEditorType()===u._.ICodeEditor:!1}function U(w){return w&&typeof w.getEditorType=="function"?w.getEditorType()===u._.IDiffEditor:!1}function P(w){return!!w&&typeof w=="object"&&typeof w.onDidChangeActiveEditor=="function"}function M(w){return G(w)?w:U(w)?w.getModifiedEditor():P(w)&&G(w.activeCodeEditor)?w.activeCodeEditor:null}},60317:(Mt,He,c)=>{c.d(He,{R$:()=>v,_k:()=>d,m2:()=>O,pS:()=>C,pz:()=>m,sA:()=>I});var u=c(5262),G=c(85565),U=c(42640);const P="$(",M=new RegExp(`\\$\\(${U.L.iconNameExpression}(?:${U.L.iconModifierExpression})?\\)`,"g"),w=new RegExp(`(\\\\)?${M.source}`,"g");function O(S){return S.replace(w,(D,E)=>E?D:`\\${D}`)}const A=new RegExp(`\\\\${M.source}`,"g");function I(S){return S.replace(A,D=>`\\${D}`)}const b=new RegExp(`(\\s)?(\\\\)?${M.source}(\\s)?`,"g");function C(S){return S.indexOf(P)===-1?S:S.replace(b,(D,E,B,R)=>B?D:E||R||"")}function v(S){return S?S.replace(/\$\((.*?)\)/g,(D,E)=>` ${E} `).trim():""}const _=new RegExp(`\\$\\(${U.L.iconNameCharacter}+\\)`,"g");function d(S){_.lastIndex=0;let D="";const E=[];let B=0;for(;;){const R=_.lastIndex,z=_.exec(S),W=S.substring(R,z?.index);if(W.length>0){D+=W;for(let $=0;$<W.length;$++)E.push(B)}if(!z)break;B+=z[0].length}return{text:D,iconOffsets:E}}function m(S,D,E=!1){const{text:B,iconOffsets:R}=D;if(!R||R.length===0)return(0,u.yr)(S,B,E);const z=(0,G.NB)(B," "),W=B.length-z.length,$=(0,u.yr)(S,z,E);if($)for(const Q of $){const q=R[Q.start+W]+W;Q.start+=q,Q.end+=q}return $}},60599:(Mt,He,c)=>{c.d(He,{$w:()=>R,AS:()=>v,Ay:()=>w,BO:()=>B,Cm:()=>m,HE:()=>D,VD:()=>O,Xm:()=>C,jG:()=>S,lC:()=>b,mp:()=>E,qE:()=>_,s:()=>d});var u=c(74730),G=c(13697);const U=!1;let P=null;function M(z){P=z}if(U){const z="__is_disposable_tracked__";M(new class{trackDisposable(W){const $=new Error("Potentially leaked disposable").stack;setTimeout(()=>{W[z]},3e3)}setParent(W,$){if(W&&W!==S.None)try{W[z]=!0}catch{}}markAsDisposed(W){if(W&&W!==S.None)try{W[z]=!0}catch{}}markAsSingleton(W){}})}function w(z){return P?.trackDisposable(z),z}function O(z){P?.markAsDisposed(z)}function A(z,W){P?.setParent(z,W)}function I(z,W){if(P)for(const $ of z)P.setParent($,W)}function b(z){return P?.markAsSingleton(z),z}function C(z){return typeof z=="object"&&z!==null&&typeof z.dispose=="function"&&z.dispose.length===0}function v(z){if(G.f.is(z)){const W=[];for(const $ of z)if($)try{$.dispose()}catch(Q){W.push(Q)}if(W.length===1)throw W[0];if(W.length>1)throw new AggregateError(W,"Encountered errors while disposing of store");return Array.isArray(z)?[]:z}else if(z)return z.dispose(),z}function _(...z){const W=d(()=>v(z));return I(z,W),W}function d(z){const W=w({dispose:(0,u.P)(()=>{O(W),z()})});return W}class m{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this._toDispose=new Set,this._isDisposed=!1,w(this)}dispose(){this._isDisposed||(O(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{v(this._toDispose)}finally{this._toDispose.clear()}}add(W){if(!W)return W;if(W===this)throw new Error("Cannot register a disposable on itself!");return A(W,this),this._isDisposed?m.DISABLE_DISPOSED_WARNING:this._toDispose.add(W),W}deleteAndLeak(W){W&&this._toDispose.has(W)&&(this._toDispose.delete(W),A(W,null))}}class S{static{this.None=Object.freeze({dispose(){}})}constructor(){this._store=new m,w(this),A(this._store,this)}dispose(){O(this),this._store.dispose()}_register(W){if(W===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(W)}}class D{constructor(){this._isDisposed=!1,w(this)}get value(){return this._isDisposed?void 0:this._value}set value(W){this._isDisposed||W===this._value||(this._value?.dispose(),W&&A(W,this),this._value=W)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,O(this),this._value?.dispose(),this._value=void 0}}class E{constructor(W){this._disposable=W,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}class B{constructor(W){this.object=W}dispose(){}}class R{constructor(){this._store=new Map,this._isDisposed=!1,w(this)}dispose(){O(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{v(this._store.values())}finally{this._store.clear()}}get(W){return this._store.get(W)}set(W,$,Q=!1){this._isDisposed,Q||this._store.get(W)?.dispose(),this._store.set(W,$)}deleteAndDispose(W){this._store.get(W)?.dispose(),this._store.delete(W)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}},61329:(Mt,He,c)=>{c.d(He,{_:()=>U});var u=c(31938),G=c(60599);class U{constructor(){this._hooks=new G.Cm,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(M,w){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const O=this._onStopCallback;this._onStopCallback=null,M&&O&&O(w)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(M,w,O,A,I){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=A,this._onStopCallback=I;let b=M;try{M.setPointerCapture(w),this._hooks.add((0,G.s)(()=>{try{M.releasePointerCapture(w)}catch{}}))}catch{b=u.zk(M)}this._hooks.add(u.ko(b,u.Bx.POINTER_MOVE,C=>{if(C.buttons!==O){this.stopMonitoring(!0);return}C.preventDefault(),this._pointerMoveCallback(C)})),this._hooks.add(u.ko(b,u.Bx.POINTER_UP,C=>this.stopMonitoring(!0)))}}},61353:(Mt,He,c)=>{c.d(He,{C:()=>I,a0:()=>v,dQ:()=>A,nb:()=>b,rm:()=>C,un:()=>O});var u=c(6105),G=c(37486),U=c(60599),P=c(70679),M=c(3960),w=c(10137);function O(m,S){return S!==void 0?new _(new M.nA(m,void 0,S),S,void 0,void 0,void 0,G.nx):new _(new M.nA(void 0,void 0,m),m,void 0,void 0,void 0,G.nx)}function A(m,S,D){return new d(new M.nA(m,void 0,S),S,void 0,void 0,void 0,G.nx,D)}function I(m,S){return new _(new M.nA(m.owner,m.debugName,m.debugReferenceFn),S,void 0,void 0,m.onLastObserverRemoved,m.equalsFn??G.nx)}(0,P.N2)(I);function b(m,S){return new _(new M.nA(m.owner,m.debugName,void 0),S,m.createEmptyChangeSummary,m.handleChange,void 0,m.equalityComparer??G.nx)}function C(m,S){let D,E;S===void 0?(D=m,E=void 0):(E=m,D=S);const B=new U.Cm;return new _(new M.nA(E,void 0,D),R=>(B.clear(),D(R,B)),void 0,void 0,()=>B.dispose(),G.nx)}function v(m,S){let D,E;S===void 0?(D=m,E=void 0):(E=m,D=S);let B;return new _(new M.nA(E,void 0,D),R=>{B?B.clear():B=new U.Cm;const z=D(R);return z&&B.add(z),z},void 0,void 0,()=>{B&&(B.dispose(),B=void 0)},G.nx)}class _ extends P.ZK{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(S,D,E,B,R=void 0,z){super(),this._debugNameData=S,this._computeFn=D,this.createChangeSummary=E,this._handleChange=B,this._handleLastObserverRemoved=R,this._equalityComparator=z,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=this.createChangeSummary?.(),(0,w.tZ)()?.handleDerivedCreated(this)}onLastObserverRemoved(){this.state=0,this.value=void 0;for(const S of this.dependencies)S.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this.observers.size===0){const S=this._computeFn(this,this.createChangeSummary?.());return this.onLastObserverRemoved(),S}else{do{if(this.state===1){for(const S of this.dependencies)if(S.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;const S=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=S;const D=this.state!==0,E=this.value;this.state=3;const B=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this.value=this._computeFn(this,B)}finally{for(const z of this.dependenciesToBeRemoved)z.removeObserver(this);this.dependenciesToBeRemoved.clear()}const R=D&&!this._equalityComparator(E,this.value);if((0,w.tZ)()?.handleDerivedRecomputed(this,{oldValue:E,newValue:this.value,change:void 0,didChange:R,hadValue:D}),R)for(const z of this.observers)z.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(S){this.updateCount++;const D=this.updateCount===1;if(this.state===3&&(this.state=1,!D))for(const E of this.observers)E.handlePossibleChange(this);if(D)for(const E of this.observers)E.beginUpdate(this)}endUpdate(S){if(this.updateCount--,this.updateCount===0){const D=[...this.observers];for(const E of D)E.endUpdate(this)}(0,u.Ft)(()=>this.updateCount>=0)}handlePossibleChange(S){if(this.state===3&&this.dependencies.has(S)&&!this.dependenciesToBeRemoved.has(S)){this.state=1;for(const D of this.observers)D.handlePossibleChange(this)}}handleChange(S,D){if(this.dependencies.has(S)&&!this.dependenciesToBeRemoved.has(S)){const E=this._handleChange?this._handleChange({changedObservable:S,change:D,didChange:R=>R===S},this.changeSummary):!0,B=this.state===3;if(E&&(this.state===1||B)&&(this.state=2,B))for(const R of this.observers)R.handlePossibleChange(this)}}readObservable(S){S.addObserver(this);const D=S.get();return this.dependencies.add(S),this.dependenciesToBeRemoved.delete(S),D}addObserver(S){const D=!this.observers.has(S)&&this.updateCount>0;super.addObserver(S),D&&S.beginUpdate(this)}removeObserver(S){const D=this.observers.has(S)&&this.updateCount>0;super.removeObserver(S),D&&S.endUpdate(this)}}class d extends _{constructor(S,D,E,B,R=void 0,z,W){super(S,D,E,B,R,z),this.set=W}}},61423:(Mt,He,c)=>{c.d(He,{Yh:()=>Re,QM:()=>Q});var u=c(45573),G=c(38594),U=c(33902),P=c(78690),M=c(44727),w=c(37100),O=c(92998),A=c(69504),I=c(98414);class b{static columnSelect(F,N,j,me,ce,he){const Le=Math.abs(ce-j)+1,Y=j>ce,ae=me>he,Ce=me<he,Pe=[];for(let ye=0;ye<Le;ye++){const Ke=j+(Y?-ye:ye),qe=F.columnFromVisibleColumn(N,Ke,me),Ue=F.columnFromVisibleColumn(N,Ke,he),x=F.visibleColumnFromColumn(N,new A.y(Ke,qe)),it=F.visibleColumnFromColumn(N,new A.y(Ke,Ue));Ce&&(x>he||it<me)||ae&&(it>me||x<he)||Pe.push(new O.mG(new I.Q(Ke,qe,Ke,qe),0,0,new A.y(Ke,Ue),0))}if(Pe.length===0)for(let ye=0;ye<Le;ye++){const Ke=j+(Y?-ye:ye),qe=N.getLineMaxColumn(Ke);Pe.push(new O.mG(new I.Q(Ke,qe,Ke,qe),0,0,new A.y(Ke,qe),0))}return{viewStates:Pe,reversed:Y,fromLineNumber:j,fromVisualColumn:me,toLineNumber:ce,toVisualColumn:he}}static columnSelectLeft(F,N,j){let me=j.toViewVisualColumn;return me>0&&me--,b.columnSelect(F,N,j.fromViewLineNumber,j.fromViewVisualColumn,j.toViewLineNumber,me)}static columnSelectRight(F,N,j){let me=0;const ce=Math.min(j.fromViewLineNumber,j.toViewLineNumber),he=Math.max(j.fromViewLineNumber,j.toViewLineNumber);for(let Y=ce;Y<=he;Y++){const ae=N.getLineMaxColumn(Y),Ce=F.visibleColumnFromColumn(N,new A.y(Y,ae));me=Math.max(me,Ce)}let Le=j.toViewVisualColumn;return Le<me&&Le++,this.columnSelect(F,N,j.fromViewLineNumber,j.fromViewVisualColumn,j.toViewLineNumber,Le)}static columnSelectUp(F,N,j,me){const ce=me?F.pageSize:1,he=Math.max(1,j.toViewLineNumber-ce);return this.columnSelect(F,N,j.fromViewLineNumber,j.fromViewVisualColumn,he,j.toViewVisualColumn)}static columnSelectDown(F,N,j,me){const ce=me?F.pageSize:1,he=Math.min(N.getLineCount(),j.toViewLineNumber+ce);return this.columnSelect(F,N,j.fromViewLineNumber,j.fromViewVisualColumn,he,j.toViewVisualColumn)}}var C=c(71899),v=c(31997),_=c(14932),d=c(89464),m=c(25894),S=c(3478),D=c(31938),E=c(3320);const B=0;class R extends M.DX{runEditorCommand(F,N,j){const me=N._getViewModel();me&&this.runCoreEditorCommand(me,j||{})}}var z;(function(K){const F=function(j){if(!U.Gv(j))return!1;const me=j;return!(!U.Kg(me.to)||!U.b0(me.by)&&!U.Kg(me.by)||!U.b0(me.value)&&!U.Et(me.value)||!U.b0(me.revealCursor)&&!U.Lm(me.revealCursor))};K.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:F,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},K.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},K.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function N(j){let me;switch(j.to){case K.RawDirection.Up:me=1;break;case K.RawDirection.Right:me=2;break;case K.RawDirection.Down:me=3;break;case K.RawDirection.Left:me=4;break;default:return null}let ce;switch(j.by){case K.RawUnit.Line:ce=1;break;case K.RawUnit.WrappedLine:ce=2;break;case K.RawUnit.Page:ce=3;break;case K.RawUnit.HalfPage:ce=4;break;case K.RawUnit.Editor:ce=5;break;case K.RawUnit.Column:ce=6;break;default:ce=2}const he=Math.floor(j.value||1),Le=!!j.revealCursor;return{direction:me,unit:ce,value:he,revealCursor:Le,select:!!j.select}}K.parse=N})(z||(z={}));var W;(function(K){const F=function(N){if(!U.Gv(N))return!1;const j=N;return!(!U.Et(j.lineNumber)&&!U.Kg(j.lineNumber)||!U.b0(j.at)&&!U.Kg(j.at))};K.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:F,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},K.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(W||(W={}));class ${constructor(F){F.addImplementation(1e4,"code-editor",(N,j)=>{const me=N.get(w.T).getFocusedCodeEditor();return me&&me.hasTextFocus()?this._runEditorCommand(N,me,j):!1}),F.addImplementation(1e3,"generic-dom-input-textarea",(N,j)=>{const me=(0,D.bq)();return me&&["input","textarea"].indexOf(me.tagName.toLowerCase())>=0?(this.runDOMCommand(me),!0):!1}),F.addImplementation(0,"generic-dom",(N,j)=>{const me=N.get(w.T).getActiveCodeEditor();return me?(me.focus(),this._runEditorCommand(N,me,j)):!1})}_runEditorCommand(F,N,j){const me=this.runEditorCommand(F,N,j);return me||!0}}var Q;(function(K){class F extends R{constructor(Ze){super(Ze),this._inSelectionMode=Ze.inSelectionMode}runCoreEditorCommand(Ze,_t){if(!_t.position)return;Ze.model.pushStackElement(),Ze.setCursorStates(_t.source,3,[v.c.moveTo(Ze,Ze.getPrimaryCursorState(),this._inSelectionMode,_t.position,_t.viewPosition)])&&_t.revealType!==2&&Ze.revealAllCursors(_t.source,!0,!0)}}K.MoveTo=(0,M.E_)(new F({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),K.MoveToSelect=(0,M.E_)(new F({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class N extends R{runCoreEditorCommand(Ze,_t){Ze.model.pushStackElement();const ot=this._getColumnSelectResult(Ze,Ze.getPrimaryCursorState(),Ze.getCursorColumnSelectData(),_t);ot!==null&&(Ze.setCursorStates(_t.source,3,ot.viewStates.map(Pt=>O.MF.fromViewState(Pt))),Ze.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:ot.fromLineNumber,fromViewVisualColumn:ot.fromVisualColumn,toViewLineNumber:ot.toLineNumber,toViewVisualColumn:ot.toVisualColumn}),ot.reversed?Ze.revealTopMostCursor(_t.source):Ze.revealBottomMostCursor(_t.source))}}K.ColumnSelect=(0,M.E_)(new class extends N{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(it,Ze,_t,ot){if(typeof ot.position>"u"||typeof ot.viewPosition>"u"||typeof ot.mouseColumn>"u")return null;const Pt=it.model.validatePosition(ot.position),Wt=it.coordinatesConverter.validateViewPosition(new A.y(ot.viewPosition.lineNumber,ot.viewPosition.column),Pt),Rt=ot.doColumnSelect?_t.fromViewLineNumber:Wt.lineNumber,at=ot.doColumnSelect?_t.fromViewVisualColumn:ot.mouseColumn-1;return b.columnSelect(it.cursorConfig,it,Rt,at,Wt.lineNumber,ot.mouseColumn-1)}}),K.CursorColumnSelectLeft=(0,M.E_)(new class extends N{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(it,Ze,_t,ot){return b.columnSelectLeft(it.cursorConfig,it,_t)}}),K.CursorColumnSelectRight=(0,M.E_)(new class extends N{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(it,Ze,_t,ot){return b.columnSelectRight(it.cursorConfig,it,_t)}});class j extends N{constructor(Ze){super(Ze),this._isPaged=Ze.isPaged}_getColumnSelectResult(Ze,_t,ot,Pt){return b.columnSelectUp(Ze.cursorConfig,Ze,ot,this._isPaged)}}K.CursorColumnSelectUp=(0,M.E_)(new j({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:3600,linux:{primary:0}}})),K.CursorColumnSelectPageUp=(0,M.E_)(new j({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:3595,linux:{primary:0}}}));class me extends N{constructor(Ze){super(Ze),this._isPaged=Ze.isPaged}_getColumnSelectResult(Ze,_t,ot,Pt){return b.columnSelectDown(Ze.cursorConfig,Ze,ot,this._isPaged)}}K.CursorColumnSelectDown=(0,M.E_)(new me({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:3602,linux:{primary:0}}})),K.CursorColumnSelectPageDown=(0,M.E_)(new me({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:3596,linux:{primary:0}}}));class ce extends R{constructor(){super({id:"cursorMove",precondition:void 0,metadata:v.S.metadata})}runCoreEditorCommand(Ze,_t){const ot=v.S.parse(_t);ot&&this._runCursorMove(Ze,_t.source,ot)}_runCursorMove(Ze,_t,ot){Ze.model.pushStackElement(),Ze.setCursorStates(_t,3,ce._move(Ze,Ze.getCursorStates(),ot)),Ze.revealAllCursors(_t,!0)}static _move(Ze,_t,ot){const Pt=ot.select,Wt=ot.value;switch(ot.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return v.c.simpleMove(Ze,_t,ot.direction,Pt,Wt,ot.unit);case 11:case 13:case 12:case 14:return v.c.viewportMove(Ze,_t,ot.direction,Pt,Wt);default:return null}}}K.CursorMoveImpl=ce,K.CursorMove=(0,M.E_)(new ce);class he extends R{constructor(Ze){super(Ze),this._staticArgs=Ze.args}runCoreEditorCommand(Ze,_t){let ot=this._staticArgs;this._staticArgs.value===-1&&(ot={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:_t.pageSize||Ze.cursorConfig.pageSize}),Ze.model.pushStackElement(),Ze.setCursorStates(_t.source,3,v.c.simpleMove(Ze,Ze.getCursorStates(),ot.direction,ot.select,ot.value,ot.unit)),Ze.revealAllCursors(_t.source,!0)}}K.CursorLeft=(0,M.E_)(new he({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),K.CursorLeftSelect=(0,M.E_)(new he({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:1039}})),K.CursorRight=(0,M.E_)(new he({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),K.CursorRightSelect=(0,M.E_)(new he({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:1041}})),K.CursorUp=(0,M.E_)(new he({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),K.CursorUpSelect=(0,M.E_)(new he({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),K.CursorPageUp=(0,M.E_)(new he({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:11}})),K.CursorPageUpSelect=(0,M.E_)(new he({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:1035}})),K.CursorDown=(0,M.E_)(new he({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),K.CursorDownSelect=(0,M.E_)(new he({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),K.CursorPageDown=(0,M.E_)(new he({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:12}})),K.CursorPageDownSelect=(0,M.E_)(new he({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:1036}})),K.CreateCursor=(0,M.E_)(new class extends R{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(it,Ze){if(!Ze.position)return;let _t;Ze.wholeLine?_t=v.c.line(it,it.getPrimaryCursorState(),!1,Ze.position,Ze.viewPosition):_t=v.c.moveTo(it,it.getPrimaryCursorState(),!1,Ze.position,Ze.viewPosition);const ot=it.getCursorStates();if(ot.length>1){const Pt=_t.modelState?_t.modelState.position:null,Wt=_t.viewState?_t.viewState.position:null;for(let Rt=0,at=ot.length;Rt<at;Rt++){const Xe=ot[Rt];if(!(Pt&&!Xe.modelState.selection.containsPosition(Pt))&&!(Wt&&!Xe.viewState.selection.containsPosition(Wt))){ot.splice(Rt,1),it.model.pushStackElement(),it.setCursorStates(Ze.source,3,ot);return}}}ot.push(_t),it.model.pushStackElement(),it.setCursorStates(Ze.source,3,ot)}}),K.LastCursorMoveToSelect=(0,M.E_)(new class extends R{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(it,Ze){if(!Ze.position)return;const _t=it.getLastAddedCursorIndex(),ot=it.getCursorStates(),Pt=ot.slice(0);Pt[_t]=v.c.moveTo(it,ot[_t],!0,Ze.position,Ze.viewPosition),it.model.pushStackElement(),it.setCursorStates(Ze.source,3,Pt)}});class Le extends R{constructor(Ze){super(Ze),this._inSelectionMode=Ze.inSelectionMode}runCoreEditorCommand(Ze,_t){Ze.model.pushStackElement(),Ze.setCursorStates(_t.source,3,v.c.moveToBeginningOfLine(Ze,Ze.getCursorStates(),this._inSelectionMode)),Ze.revealAllCursors(_t.source,!0)}}K.CursorHome=(0,M.E_)(new Le({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),K.CursorHomeSelect=(0,M.E_)(new Le({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class Y extends R{constructor(Ze){super(Ze),this._inSelectionMode=Ze.inSelectionMode}runCoreEditorCommand(Ze,_t){Ze.model.pushStackElement(),Ze.setCursorStates(_t.source,3,this._exec(Ze.getCursorStates())),Ze.revealAllCursors(_t.source,!0)}_exec(Ze){const _t=[];for(let ot=0,Pt=Ze.length;ot<Pt;ot++){const Wt=Ze[ot],Rt=Wt.modelState.position.lineNumber;_t[ot]=O.MF.fromModelState(Wt.modelState.move(this._inSelectionMode,Rt,1,0))}return _t}}K.CursorLineStart=(0,M.E_)(new Y({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:0,mac:{primary:287}}})),K.CursorLineStartSelect=(0,M.E_)(new Y({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:0,mac:{primary:1311}}}));class ae extends R{constructor(Ze){super(Ze),this._inSelectionMode=Ze.inSelectionMode}runCoreEditorCommand(Ze,_t){Ze.model.pushStackElement(),Ze.setCursorStates(_t.source,3,v.c.moveToEndOfLine(Ze,Ze.getCursorStates(),this._inSelectionMode,_t.sticky||!1)),Ze.revealAllCursors(_t.source,!0)}}K.CursorEnd=(0,M.E_)(new ae({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:B,kbExpr:d.R.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:u.kg("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),K.CursorEndSelect=(0,M.E_)(new ae({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:B,kbExpr:d.R.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:u.kg("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class Ce extends R{constructor(Ze){super(Ze),this._inSelectionMode=Ze.inSelectionMode}runCoreEditorCommand(Ze,_t){Ze.model.pushStackElement(),Ze.setCursorStates(_t.source,3,this._exec(Ze,Ze.getCursorStates())),Ze.revealAllCursors(_t.source,!0)}_exec(Ze,_t){const ot=[];for(let Pt=0,Wt=_t.length;Pt<Wt;Pt++){const Rt=_t[Pt],at=Rt.modelState.position.lineNumber,Xe=Ze.model.getLineMaxColumn(at);ot[Pt]=O.MF.fromModelState(Rt.modelState.move(this._inSelectionMode,at,Xe,0))}return ot}}K.CursorLineEnd=(0,M.E_)(new Ce({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:0,mac:{primary:291}}})),K.CursorLineEndSelect=(0,M.E_)(new Ce({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:0,mac:{primary:1315}}}));class Pe extends R{constructor(Ze){super(Ze),this._inSelectionMode=Ze.inSelectionMode}runCoreEditorCommand(Ze,_t){Ze.model.pushStackElement(),Ze.setCursorStates(_t.source,3,v.c.moveToBeginningOfBuffer(Ze,Ze.getCursorStates(),this._inSelectionMode)),Ze.revealAllCursors(_t.source,!0)}}K.CursorTop=(0,M.E_)(new Pe({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:2062,mac:{primary:2064}}})),K.CursorTopSelect=(0,M.E_)(new Pe({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:3086,mac:{primary:3088}}}));class ye extends R{constructor(Ze){super(Ze),this._inSelectionMode=Ze.inSelectionMode}runCoreEditorCommand(Ze,_t){Ze.model.pushStackElement(),Ze.setCursorStates(_t.source,3,v.c.moveToEndOfBuffer(Ze,Ze.getCursorStates(),this._inSelectionMode)),Ze.revealAllCursors(_t.source,!0)}}K.CursorBottom=(0,M.E_)(new ye({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:2061,mac:{primary:2066}}})),K.CursorBottomSelect=(0,M.E_)(new ye({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:3085,mac:{primary:3090}}}));class Ke extends R{constructor(){super({id:"editorScroll",precondition:void 0,metadata:z.metadata})}determineScrollMethod(Ze){const _t=[6],ot=[1,2,3,4,5,6],Pt=[4,2],Wt=[1,3];return _t.includes(Ze.unit)&&Pt.includes(Ze.direction)?this._runHorizontalEditorScroll.bind(this):ot.includes(Ze.unit)&&Wt.includes(Ze.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(Ze,_t){const ot=z.parse(_t);if(!ot)return;const Pt=this.determineScrollMethod(ot);Pt&&Pt(Ze,_t.source,ot)}_runVerticalEditorScroll(Ze,_t,ot){const Pt=this._computeDesiredScrollTop(Ze,ot);if(ot.revealCursor){const Wt=Ze.getCompletelyVisibleViewRangeAtScrollTop(Pt);Ze.setCursorStates(_t,3,[v.c.findPositionInViewportIfOutside(Ze,Ze.getPrimaryCursorState(),Wt,ot.select)])}Ze.viewLayout.setScrollPosition({scrollTop:Pt},0)}_computeDesiredScrollTop(Ze,_t){if(_t.unit===1){const Wt=Ze.viewLayout.getFutureViewport(),Rt=Ze.getCompletelyVisibleViewRangeAtScrollTop(Wt.top),at=Ze.coordinatesConverter.convertViewRangeToModelRange(Rt);let Xe;_t.direction===1?Xe=Math.max(1,at.startLineNumber-_t.value):Xe=Math.min(Ze.model.getLineCount(),at.startLineNumber+_t.value);const pe=Ze.coordinatesConverter.convertModelPositionToViewPosition(new A.y(Xe,1));return Ze.viewLayout.getVerticalOffsetForLineNumber(pe.lineNumber)}if(_t.unit===5){let Wt=0;return _t.direction===3&&(Wt=Ze.model.getLineCount()-Ze.cursorConfig.pageSize),Ze.viewLayout.getVerticalOffsetForLineNumber(Wt)}let ot;_t.unit===3?ot=Ze.cursorConfig.pageSize*_t.value:_t.unit===4?ot=Math.round(Ze.cursorConfig.pageSize/2)*_t.value:ot=_t.value;const Pt=(_t.direction===1?-1:1)*ot;return Ze.viewLayout.getCurrentScrollTop()+Pt*Ze.cursorConfig.lineHeight}_runHorizontalEditorScroll(Ze,_t,ot){const Pt=this._computeDesiredScrollLeft(Ze,ot);Ze.viewLayout.setScrollPosition({scrollLeft:Pt},0)}_computeDesiredScrollLeft(Ze,_t){const ot=(_t.direction===4?-1:1)*_t.value;return Ze.viewLayout.getCurrentScrollLeft()+ot*Ze.cursorConfig.typicalHalfwidthCharacterWidth}}K.EditorScrollImpl=Ke,K.EditorScroll=(0,M.E_)(new Ke),K.ScrollLineUp=(0,M.E_)(new class extends R{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(it,Ze){K.EditorScroll.runCoreEditorCommand(it,{to:z.RawDirection.Up,by:z.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:Ze.source})}}),K.ScrollPageUp=(0,M.E_)(new class extends R{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(it,Ze){K.EditorScroll.runCoreEditorCommand(it,{to:z.RawDirection.Up,by:z.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:Ze.source})}}),K.ScrollEditorTop=(0,M.E_)(new class extends R{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus}})}runCoreEditorCommand(it,Ze){K.EditorScroll.runCoreEditorCommand(it,{to:z.RawDirection.Up,by:z.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:Ze.source})}}),K.ScrollLineDown=(0,M.E_)(new class extends R{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(it,Ze){K.EditorScroll.runCoreEditorCommand(it,{to:z.RawDirection.Down,by:z.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:Ze.source})}}),K.ScrollPageDown=(0,M.E_)(new class extends R{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(it,Ze){K.EditorScroll.runCoreEditorCommand(it,{to:z.RawDirection.Down,by:z.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:Ze.source})}}),K.ScrollEditorBottom=(0,M.E_)(new class extends R{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus}})}runCoreEditorCommand(it,Ze){K.EditorScroll.runCoreEditorCommand(it,{to:z.RawDirection.Down,by:z.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:Ze.source})}}),K.ScrollLeft=(0,M.E_)(new class extends R{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus}})}runCoreEditorCommand(it,Ze){K.EditorScroll.runCoreEditorCommand(it,{to:z.RawDirection.Left,by:z.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:Ze.source})}}),K.ScrollRight=(0,M.E_)(new class extends R{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus}})}runCoreEditorCommand(it,Ze){K.EditorScroll.runCoreEditorCommand(it,{to:z.RawDirection.Right,by:z.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:Ze.source})}});class qe extends R{constructor(Ze){super(Ze),this._inSelectionMode=Ze.inSelectionMode}runCoreEditorCommand(Ze,_t){_t.position&&(Ze.model.pushStackElement(),Ze.setCursorStates(_t.source,3,[v.c.word(Ze,Ze.getPrimaryCursorState(),this._inSelectionMode,_t.position)]),_t.revealType!==2&&Ze.revealAllCursors(_t.source,!0,!0))}}K.WordSelect=(0,M.E_)(new qe({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),K.WordSelectDrag=(0,M.E_)(new qe({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),K.LastCursorWordSelect=(0,M.E_)(new class extends R{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(it,Ze){if(!Ze.position)return;const _t=it.getLastAddedCursorIndex(),ot=it.getCursorStates(),Pt=ot.slice(0),Wt=ot[_t];Pt[_t]=v.c.word(it,Wt,Wt.modelState.hasSelection(),Ze.position),it.model.pushStackElement(),it.setCursorStates(Ze.source,3,Pt)}});class Ue extends R{constructor(Ze){super(Ze),this._inSelectionMode=Ze.inSelectionMode}runCoreEditorCommand(Ze,_t){_t.position&&(Ze.model.pushStackElement(),Ze.setCursorStates(_t.source,3,[v.c.line(Ze,Ze.getPrimaryCursorState(),this._inSelectionMode,_t.position,_t.viewPosition)]),_t.revealType!==2&&Ze.revealAllCursors(_t.source,!1,!0))}}K.LineSelect=(0,M.E_)(new Ue({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),K.LineSelectDrag=(0,M.E_)(new Ue({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class x extends R{constructor(Ze){super(Ze),this._inSelectionMode=Ze.inSelectionMode}runCoreEditorCommand(Ze,_t){if(!_t.position)return;const ot=Ze.getLastAddedCursorIndex(),Pt=Ze.getCursorStates(),Wt=Pt.slice(0);Wt[ot]=v.c.line(Ze,Pt[ot],this._inSelectionMode,_t.position,_t.viewPosition),Ze.model.pushStackElement(),Ze.setCursorStates(_t.source,3,Wt)}}K.LastCursorLineSelect=(0,M.E_)(new x({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),K.LastCursorLineSelectDrag=(0,M.E_)(new x({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),K.CancelSelection=(0,M.E_)(new class extends R{constructor(){super({id:"cancelSelection",precondition:d.R.hasNonEmptySelection,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(it,Ze){it.model.pushStackElement(),it.setCursorStates(Ze.source,3,[v.c.cancelSelection(it,it.getPrimaryCursorState())]),it.revealAllCursors(Ze.source,!0)}}),K.RemoveSecondaryCursors=(0,M.E_)(new class extends R{constructor(){super({id:"removeSecondaryCursors",precondition:d.R.hasMultipleSelections,kbOpts:{weight:B+1,kbExpr:d.R.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(it,Ze){it.model.pushStackElement(),it.setCursorStates(Ze.source,3,[it.getPrimaryCursorState()]),it.revealAllCursors(Ze.source,!0),(0,P.h5)(u.kg("removedCursor","Removed secondary cursors"))}}),K.RevealLine=(0,M.E_)(new class extends R{constructor(){super({id:"revealLine",precondition:void 0,metadata:W.metadata})}runCoreEditorCommand(it,Ze){const _t=Ze,ot=_t.lineNumber||0;let Pt=typeof ot=="number"?ot+1:parseInt(ot)+1;Pt<1&&(Pt=1);const Wt=it.model.getLineCount();Pt>Wt&&(Pt=Wt);const Rt=new I.Q(Pt,1,Pt,it.model.getLineMaxColumn(Pt));let at=0;if(_t.at)switch(_t.at){case W.RawAtArgument.Top:at=3;break;case W.RawAtArgument.Center:at=1;break;case W.RawAtArgument.Bottom:at=4;break;default:break}const Xe=it.coordinatesConverter.convertModelRangeToViewRange(Rt);it.revealRange(Ze.source,!1,Xe,at,0)}}),K.SelectAll=new class extends ${constructor(){super(M.tc)}runDOMCommand(it){G.gm&&(it.focus(),it.select()),it.ownerDocument.execCommand("selectAll")}runEditorCommand(it,Ze,_t){const ot=Ze._getViewModel();ot&&this.runCoreEditorCommand(ot,_t)}runCoreEditorCommand(it,Ze){it.model.pushStackElement(),it.setCursorStates("keyboard",3,[v.c.selectAll(it,it.getPrimaryCursorState())])}},K.SetSelection=(0,M.E_)(new class extends R{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(it,Ze){Ze.selection&&(it.model.pushStackElement(),it.setCursorStates(Ze.source,3,[O.MF.fromModelSelection(Ze.selection)]))}})})(Q||(Q={}));const q=m.M$.and(d.R.textInputFocus,d.R.columnSelection);function ne(K,F){S.f.registerKeybindingRule({id:K,primary:F,when:q,weight:B+1})}ne(Q.CursorColumnSelectLeft.id,1039),ne(Q.CursorColumnSelectRight.id,1041),ne(Q.CursorColumnSelectUp.id,1040),ne(Q.CursorColumnSelectPageUp.id,1035),ne(Q.CursorColumnSelectDown.id,1042),ne(Q.CursorColumnSelectPageDown.id,1036);function ve(K){return K.register(),K}var Re;(function(K){class F extends M.DX{runEditorCommand(j,me,ce){const he=me._getViewModel();he&&this.runCoreEditingCommand(me,he,ce||{})}}K.CoreEditingCommand=F,K.LineBreakInsert=(0,M.E_)(new class extends F{constructor(){super({id:"lineBreakInsert",precondition:d.R.writable,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(N,j,me){N.pushUndoStop(),N.executeCommands(this.id,E.AO.lineBreakInsert(j.cursorConfig,j.model,j.getCursorStates().map(ce=>ce.modelState.selection)))}}),K.Outdent=(0,M.E_)(new class extends F{constructor(){super({id:"outdent",precondition:d.R.writable,kbOpts:{weight:B,kbExpr:m.M$.and(d.R.editorTextFocus,d.R.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(N,j,me){N.pushUndoStop(),N.executeCommands(this.id,_.T.outdent(j.cursorConfig,j.model,j.getCursorStates().map(ce=>ce.modelState.selection))),N.pushUndoStop()}}),K.Tab=(0,M.E_)(new class extends F{constructor(){super({id:"tab",precondition:d.R.writable,kbOpts:{weight:B,kbExpr:m.M$.and(d.R.editorTextFocus,d.R.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(N,j,me){N.pushUndoStop(),N.executeCommands(this.id,_.T.tab(j.cursorConfig,j.model,j.getCursorStates().map(ce=>ce.modelState.selection))),N.pushUndoStop()}}),K.DeleteLeft=(0,M.E_)(new class extends F{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(N,j,me){const[ce,he]=C.g.deleteLeft(j.getPrevEditOperationType(),j.cursorConfig,j.model,j.getCursorStates().map(Le=>Le.modelState.selection),j.getCursorAutoClosedCharacters());ce&&N.pushUndoStop(),N.executeCommands(this.id,he),j.setPrevEditOperationType(2)}}),K.DeleteRight=(0,M.E_)(new class extends F{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:B,kbExpr:d.R.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(N,j,me){const[ce,he]=C.g.deleteRight(j.getPrevEditOperationType(),j.cursorConfig,j.model,j.getCursorStates().map(Le=>Le.modelState.selection));ce&&N.pushUndoStop(),N.executeCommands(this.id,he),j.setPrevEditOperationType(3)}}),K.Undo=new class extends ${constructor(){super(M.aU)}runDOMCommand(N){N.ownerDocument.execCommand("undo")}runEditorCommand(N,j,me){if(!(!j.hasModel()||j.getOption(92)===!0))return j.getModel().undo()}},K.Redo=new class extends ${constructor(){super(M.ih)}runDOMCommand(N){N.ownerDocument.execCommand("redo")}runEditorCommand(N,j,me){if(!(!j.hasModel()||j.getOption(92)===!0))return j.getModel().redo()}}})(Re||(Re={}));class Ae extends M.uB{constructor(F,N,j){super({id:F,precondition:void 0,metadata:j}),this._handlerId=N}runCommand(F,N){const j=F.get(w.T).getFocusedCodeEditor();j&&j.trigger("keyboard",this._handlerId,N)}}function re(K,F){ve(new Ae("default:"+K,K)),ve(new Ae(K,K,F))}re("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),re("replacePreviousChar"),re("compositionType"),re("compositionStart"),re("compositionEnd"),re("paste"),re("cut")},62385:(Mt,He,c)=>{c.d(He,{x:()=>w});var u=c(31938),G=c(15625),U=c(25334),P=c(7069),M=c(60599);class w extends M.jG{onclick(A,I){this._register(u.ko(A,u.Bx.CLICK,b=>I(new U.P(u.zk(A),b))))}onmousedown(A,I){this._register(u.ko(A,u.Bx.MOUSE_DOWN,b=>I(new U.P(u.zk(A),b))))}onmouseover(A,I){this._register(u.ko(A,u.Bx.MOUSE_OVER,b=>I(new U.P(u.zk(A),b))))}onmouseleave(A,I){this._register(u.ko(A,u.Bx.MOUSE_LEAVE,b=>I(new U.P(u.zk(A),b))))}onkeydown(A,I){this._register(u.ko(A,u.Bx.KEY_DOWN,b=>I(new G.Z(b))))}onkeyup(A,I){this._register(u.ko(A,u.Bx.KEY_UP,b=>I(new G.Z(b))))}oninput(A,I){this._register(u.ko(A,u.Bx.INPUT,I))}onblur(A,I){this._register(u.ko(A,u.Bx.BLUR,I))}onfocus(A,I){this._register(u.ko(A,u.Bx.FOCUS,I))}ignoreGesture(A){return P.q.ignoreTarget(A)}}},62681:(Mt,He,c)=>{c.d(He,{wZ:()=>A,MT:()=>w,zL:()=>O,UW:()=>C,Md:()=>_});var u=c(45573),G=c(85565),U=c(81275),P=c(19154);class M{constructor(ne,ve,Re,Ae){this.endIndex=ne,this.type=ve,this.metadata=Re,this.containsRTL=Ae,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class w{constructor(ne,ve){this.startOffset=ne,this.endOffset=ve}equals(ne){return this.startOffset===ne.startOffset&&this.endOffset===ne.endOffset}}class O{constructor(ne,ve,Re,Ae,re,K,F,N,j,me,ce,he,Le,Y,ae,Ce,Pe,ye,Ke){this.useMonospaceOptimizations=ne,this.canUseHalfwidthRightwardsArrow=ve,this.lineContent=Re,this.continuesWithWrappedLine=Ae,this.isBasicASCII=re,this.containsRTL=K,this.fauxIndentLength=F,this.lineTokens=N,this.lineDecorations=j.sort(P.d.compare),this.tabSize=me,this.startVisibleColumn=ce,this.spaceWidth=he,this.stopRenderingLineAfter=ae,this.renderWhitespace=Ce==="all"?4:Ce==="boundary"?1:Ce==="selection"?2:Ce==="trailing"?3:0,this.renderControlCharacters=Pe,this.fontLigatures=ye,this.selectionsOnLine=Ke&&Ke.sort((x,it)=>x.startOffset<it.startOffset?-1:1);const qe=Math.abs(Y-he),Ue=Math.abs(Le-he);qe<Ue?(this.renderSpaceWidth=Y,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=Le,this.renderSpaceCharCode=183)}sameSelection(ne){if(this.selectionsOnLine===null)return ne===null;if(ne===null||ne.length!==this.selectionsOnLine.length)return!1;for(let ve=0;ve<this.selectionsOnLine.length;ve++)if(!this.selectionsOnLine[ve].equals(ne[ve]))return!1;return!0}equals(ne){return this.useMonospaceOptimizations===ne.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===ne.canUseHalfwidthRightwardsArrow&&this.lineContent===ne.lineContent&&this.continuesWithWrappedLine===ne.continuesWithWrappedLine&&this.isBasicASCII===ne.isBasicASCII&&this.containsRTL===ne.containsRTL&&this.fauxIndentLength===ne.fauxIndentLength&&this.tabSize===ne.tabSize&&this.startVisibleColumn===ne.startVisibleColumn&&this.spaceWidth===ne.spaceWidth&&this.renderSpaceWidth===ne.renderSpaceWidth&&this.renderSpaceCharCode===ne.renderSpaceCharCode&&this.stopRenderingLineAfter===ne.stopRenderingLineAfter&&this.renderWhitespace===ne.renderWhitespace&&this.renderControlCharacters===ne.renderControlCharacters&&this.fontLigatures===ne.fontLigatures&&P.d.equalsArr(this.lineDecorations,ne.lineDecorations)&&this.lineTokens.equals(ne.lineTokens)&&this.sameSelection(ne.selectionsOnLine)}}class A{constructor(ne,ve){this.partIndex=ne,this.charIndex=ve}}class I{static getPartIndex(ne){return(ne&4294901760)>>>16}static getCharIndex(ne){return(ne&65535)>>>0}constructor(ne,ve){this.length=ne,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(ne,ve,Re,Ae){const re=(ve<<16|Re<<0)>>>0;this._data[ne-1]=re,this._horizontalOffset[ne-1]=Ae}getHorizontalOffset(ne){return this._horizontalOffset.length===0?0:this._horizontalOffset[ne-1]}charOffsetToPartData(ne){return this.length===0?0:ne<0?this._data[0]:ne>=this.length?this._data[this.length-1]:this._data[ne]}getDomPosition(ne){const ve=this.charOffsetToPartData(ne-1),Re=I.getPartIndex(ve),Ae=I.getCharIndex(ve);return new A(Re,Ae)}getColumn(ne,ve){return this.partDataToCharOffset(ne.partIndex,ve,ne.charIndex)+1}partDataToCharOffset(ne,ve,Re){if(this.length===0)return 0;const Ae=(ne<<16|Re<<0)>>>0;let re=0,K=this.length-1;for(;re+1<K;){const ae=re+K>>>1,Ce=this._data[ae];if(Ce===Ae)return ae;Ce>Ae?K=ae:re=ae}if(re===K)return re;const F=this._data[re],N=this._data[K];if(F===Ae)return re;if(N===Ae)return K;const j=I.getPartIndex(F),me=I.getCharIndex(F),ce=I.getPartIndex(N);let he;j!==ce?he=ve:he=I.getCharIndex(N);const Le=Re-me,Y=he-Re;return Le<=Y?re:K}}class b{constructor(ne,ve,Re){this._renderLineOutputBrand=void 0,this.characterMapping=ne,this.containsRTL=ve,this.containsForeignElements=Re}}function C(q,ne){if(q.lineContent.length===0){if(q.lineDecorations.length>0){ne.appendString("<span>");let ve=0,Re=0,Ae=0;for(const K of q.lineDecorations)(K.type===1||K.type===2)&&(ne.appendString('<span class="'),ne.appendString(K.className),ne.appendString('"></span>'),K.type===1&&(Ae|=1,ve++),K.type===2&&(Ae|=2,Re++));ne.appendString("</span>");const re=new I(1,ve+Re);return re.setColumnInfo(1,ve,0,0),new b(re,!1,Ae)}return ne.appendString("<span><span></span></span>"),new b(new I(0,0),!1,0)}return W(m(q),ne)}class v{constructor(ne,ve,Re,Ae){this.characterMapping=ne,this.html=ve,this.containsRTL=Re,this.containsForeignElements=Ae}}function _(q){const ne=new U.fe(1e4),ve=C(q,ne);return new v(ve.characterMapping,ne.build(),ve.containsRTL,ve.containsForeignElements)}class d{constructor(ne,ve,Re,Ae,re,K,F,N,j,me,ce,he,Le,Y,ae,Ce){this.fontIsMonospace=ne,this.canUseHalfwidthRightwardsArrow=ve,this.lineContent=Re,this.len=Ae,this.isOverflowing=re,this.overflowingCharCount=K,this.parts=F,this.containsForeignElements=N,this.fauxIndentLength=j,this.tabSize=me,this.startVisibleColumn=ce,this.containsRTL=he,this.spaceWidth=Le,this.renderSpaceCharCode=Y,this.renderWhitespace=ae,this.renderControlCharacters=Ce}}function m(q){const ne=q.lineContent;let ve,Re,Ae;q.stopRenderingLineAfter!==-1&&q.stopRenderingLineAfter<ne.length?(ve=!0,Re=ne.length-q.stopRenderingLineAfter,Ae=q.stopRenderingLineAfter):(ve=!1,Re=0,Ae=ne.length);let re=S(ne,q.containsRTL,q.lineTokens,q.fauxIndentLength,Ae);q.renderControlCharacters&&!q.isBasicASCII&&(re=B(ne,re)),(q.renderWhitespace===4||q.renderWhitespace===1||q.renderWhitespace===2&&q.selectionsOnLine||q.renderWhitespace===3&&!q.continuesWithWrappedLine)&&(re=R(q,ne,Ae,re));let K=0;if(q.lineDecorations.length>0){for(let F=0,N=q.lineDecorations.length;F<N;F++){const j=q.lineDecorations[F];j.type===3||j.type===1?K|=1:j.type===2&&(K|=2)}re=z(ne,Ae,re,q.lineDecorations)}return q.containsRTL||(re=D(ne,re,!q.isBasicASCII||q.fontLigatures)),new d(q.useMonospaceOptimizations,q.canUseHalfwidthRightwardsArrow,ne,Ae,ve,Re,re,K,q.fauxIndentLength,q.tabSize,q.startVisibleColumn,q.containsRTL,q.spaceWidth,q.renderSpaceCharCode,q.renderWhitespace,q.renderControlCharacters)}function S(q,ne,ve,Re,Ae){const re=[];let K=0;Re>0&&(re[K++]=new M(Re,"",0,!1));let F=Re;for(let N=0,j=ve.getCount();N<j;N++){const me=ve.getEndOffset(N);if(me<=Re)continue;const ce=ve.getClassName(N);if(me>=Ae){const Le=ne?G.E_(q.substring(F,Ae)):!1;re[K++]=new M(Ae,ce,0,Le);break}const he=ne?G.E_(q.substring(F,me)):!1;re[K++]=new M(me,ce,0,he),F=me}return re}function D(q,ne,ve){let Re=0;const Ae=[];let re=0;if(ve)for(let K=0,F=ne.length;K<F;K++){const N=ne[K],j=N.endIndex;if(Re+50<j){const me=N.type,ce=N.metadata,he=N.containsRTL;let Le=-1,Y=Re;for(let ae=Re;ae<j;ae++)q.charCodeAt(ae)===32&&(Le=ae),Le!==-1&&ae-Y>=50&&(Ae[re++]=new M(Le+1,me,ce,he),Y=Le+1,Le=-1);Y!==j&&(Ae[re++]=new M(j,me,ce,he))}else Ae[re++]=N;Re=j}else for(let K=0,F=ne.length;K<F;K++){const N=ne[K],j=N.endIndex,me=j-Re;if(me>50){const ce=N.type,he=N.metadata,Le=N.containsRTL,Y=Math.ceil(me/50);for(let ae=1;ae<Y;ae++){const Ce=Re+ae*50;Ae[re++]=new M(Ce,ce,he,Le)}Ae[re++]=new M(j,ce,he,Le)}else Ae[re++]=N;Re=j}return Ae}function E(q){return q<32?q!==9:q===127||q>=8234&&q<=8238||q>=8294&&q<=8297||q>=8206&&q<=8207||q===1564}function B(q,ne){const ve=[];let Re=new M(0,"",0,!1),Ae=0;for(const re of ne){const K=re.endIndex;for(;Ae<K;Ae++){const F=q.charCodeAt(Ae);E(F)&&(Ae>Re.endIndex&&(Re=new M(Ae,re.type,re.metadata,re.containsRTL),ve.push(Re)),Re=new M(Ae+1,"mtkcontrol",re.metadata,!1),ve.push(Re))}Ae>Re.endIndex&&(Re=new M(K,re.type,re.metadata,re.containsRTL),ve.push(Re))}return ve}function R(q,ne,ve,Re){const Ae=q.continuesWithWrappedLine,re=q.fauxIndentLength,K=q.tabSize,F=q.startVisibleColumn,N=q.useMonospaceOptimizations,j=q.selectionsOnLine,me=q.renderWhitespace===1,ce=q.renderWhitespace===3,he=q.renderSpaceWidth!==q.spaceWidth,Le=[];let Y=0,ae=0,Ce=Re[ae].type,Pe=Re[ae].containsRTL,ye=Re[ae].endIndex;const Ke=Re.length;let qe=!1,Ue=G.HG(ne),x;Ue===-1?(qe=!0,Ue=ve,x=ve):x=G.lT(ne);let it=!1,Ze=0,_t=j&&j[Ze],ot=F%K;for(let Wt=re;Wt<ve;Wt++){const Rt=ne.charCodeAt(Wt);_t&&Wt>=_t.endOffset&&(Ze++,_t=j&&j[Ze]);let at;if(Wt<Ue||Wt>x)at=!0;else if(Rt===9)at=!0;else if(Rt===32)if(me)if(it)at=!0;else{const Xe=Wt+1<ve?ne.charCodeAt(Wt+1):0;at=Xe===32||Xe===9}else at=!0;else at=!1;if(at&&j&&(at=!!_t&&_t.startOffset<=Wt&&_t.endOffset>Wt),at&&ce&&(at=qe||Wt>x),at&&Pe&&Wt>=Ue&&Wt<=x&&(at=!1),it){if(!at||!N&&ot>=K){if(he){const Xe=Y>0?Le[Y-1].endIndex:re;for(let pe=Xe+1;pe<=Wt;pe++)Le[Y++]=new M(pe,"mtkw",1,!1)}else Le[Y++]=new M(Wt,"mtkw",1,!1);ot=ot%K}}else(Wt===ye||at&&Wt>re)&&(Le[Y++]=new M(Wt,Ce,0,Pe),ot=ot%K);for(Rt===9?ot=K:G.ne(Rt)?ot+=2:ot++,it=at;Wt===ye&&(ae++,ae<Ke);)Ce=Re[ae].type,Pe=Re[ae].containsRTL,ye=Re[ae].endIndex}let Pt=!1;if(it)if(Ae&&me){const Wt=ve>0?ne.charCodeAt(ve-1):0,Rt=ve>1?ne.charCodeAt(ve-2):0;Wt===32&&Rt!==32&&Rt!==9||(Pt=!0)}else Pt=!0;if(Pt)if(he){const Wt=Y>0?Le[Y-1].endIndex:re;for(let Rt=Wt+1;Rt<=ve;Rt++)Le[Y++]=new M(Rt,"mtkw",1,!1)}else Le[Y++]=new M(ve,"mtkw",1,!1);else Le[Y++]=new M(ve,Ce,0,Pe);return Le}function z(q,ne,ve,Re){Re.sort(P.d.compare);const Ae=P.Bs.normalize(q,Re),re=Ae.length;let K=0;const F=[];let N=0,j=0;for(let ce=0,he=ve.length;ce<he;ce++){const Le=ve[ce],Y=Le.endIndex,ae=Le.type,Ce=Le.metadata,Pe=Le.containsRTL;for(;K<re&&Ae[K].startOffset<Y;){const ye=Ae[K];if(ye.startOffset>j&&(j=ye.startOffset,F[N++]=new M(j,ae,Ce,Pe)),ye.endOffset+1<=Y)j=ye.endOffset+1,F[N++]=new M(j,ae+" "+ye.className,Ce|ye.metadata,Pe),K++;else{j=Y,F[N++]=new M(j,ae+" "+ye.className,Ce|ye.metadata,Pe);break}}Y>j&&(j=Y,F[N++]=new M(j,ae,Ce,Pe))}const me=ve[ve.length-1].endIndex;if(K<re&&Ae[K].startOffset===me)for(;K<re&&Ae[K].startOffset===me;){const ce=Ae[K];F[N++]=new M(j,ce.className,ce.metadata,!1),K++}return F}function W(q,ne){const ve=q.fontIsMonospace,Re=q.canUseHalfwidthRightwardsArrow,Ae=q.containsForeignElements,re=q.lineContent,K=q.len,F=q.isOverflowing,N=q.overflowingCharCount,j=q.parts,me=q.fauxIndentLength,ce=q.tabSize,he=q.startVisibleColumn,Le=q.containsRTL,Y=q.spaceWidth,ae=q.renderSpaceCharCode,Ce=q.renderWhitespace,Pe=q.renderControlCharacters,ye=new I(K+1,j.length);let Ke=!1,qe=0,Ue=he,x=0,it=0,Ze=0;Le?ne.appendString('<span dir="ltr">'):ne.appendString("<span>");for(let _t=0,ot=j.length;_t<ot;_t++){const Pt=j[_t],Wt=Pt.endIndex,Rt=Pt.type,at=Pt.containsRTL,Xe=Ce!==0&&Pt.isWhitespace(),pe=Xe&&!ve&&(Rt==="mtkw"||!Ae),te=qe===Wt&&Pt.isPseudoAfter();if(x=0,ne.appendString("<span "),at&&ne.appendString('style="unicode-bidi:isolate" '),ne.appendString('class="'),ne.appendString(pe?"mtkz":Rt),ne.appendASCIICharCode(34),Xe){let oe=0;{let Te=qe,Ve=Ue;for(;Te<Wt;Te++){const dt=(re.charCodeAt(Te)===9?ce-Ve%ce:1)|0;oe+=dt,Te>=me&&(Ve+=dt)}}for(pe&&(ne.appendString(' style="width:'),ne.appendString(String(Y*oe)),ne.appendString('px"')),ne.appendASCIICharCode(62);qe<Wt;qe++){ye.setColumnInfo(qe+1,_t-Ze,x,it),Ze=0;const Te=re.charCodeAt(qe);let Ve,We;if(Te===9){Ve=ce-Ue%ce|0,We=Ve,!Re||We>1?ne.appendCharCode(8594):ne.appendCharCode(65515);for(let dt=2;dt<=We;dt++)ne.appendCharCode(160)}else Ve=2,We=1,ne.appendCharCode(ae),ne.appendCharCode(8204);x+=Ve,it+=We,qe>=me&&(Ue+=We)}}else for(ne.appendASCIICharCode(62);qe<Wt;qe++){ye.setColumnInfo(qe+1,_t-Ze,x,it),Ze=0;const oe=re.charCodeAt(qe);let Te=1,Ve=1;switch(oe){case 9:Te=ce-Ue%ce,Ve=Te;for(let We=1;We<=Te;We++)ne.appendCharCode(160);break;case 32:ne.appendCharCode(160);break;case 60:ne.appendString("&lt;");break;case 62:ne.appendString("&gt;");break;case 38:ne.appendString("&amp;");break;case 0:Pe?ne.appendCharCode(9216):ne.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:ne.appendCharCode(65533);break;default:G.ne(oe)&&Ve++,Pe&&oe<32?ne.appendCharCode(9216+oe):Pe&&oe===127?ne.appendCharCode(9249):Pe&&E(oe)?(ne.appendString("[U+"),ne.appendString($(oe)),ne.appendString("]"),Te=8,Ve=Te):ne.appendCharCode(oe)}x+=Te,it+=Ve,qe>=me&&(Ue+=Ve)}te?Ze++:Ze=0,qe>=K&&!Ke&&Pt.isPseudoAfter()&&(Ke=!0,ye.setColumnInfo(qe+1,_t,x,it)),ne.appendString("</span>")}return Ke||ye.setColumnInfo(K+1,j.length-1,x,it),F&&(ne.appendString('<span class="mtkoverflow">'),ne.appendString(u.kg("showMore","Show more ({0})",Q(N))),ne.appendString("</span>")),ne.appendString("</span>"),new b(ye,Le,Ae)}function $(q){return q.toString(16).toUpperCase().padStart(4,"0")}function Q(q){return q<1024?u.kg("overflow.chars","{0} chars",q):q<1024*1024?`${(q/1024).toFixed(1)} KB`:`${(q/1024/1024).toFixed(1)} MB`}},63074:(Mt,He,c)=>{c.d(He,{ur:()=>Q,uO:()=>Ae});var u=c(95263),G=c(31938),U=c(89530),P=c(7069),M=c(13511),w=c(93009),O=c(37519),A=c(77065),I=c(56491),b=c(60599),C=c(94698),v=c(1822);function _(re,K){const F=[];for(const N of K){if(re.start>=N.range.end)continue;if(re.end<N.range.start)break;const j=C.Q.intersect(re,N.range);C.Q.isEmpty(j)||F.push({range:j,size:N.size})}return F}function d({start:re,end:K},F){return{start:re+F,end:K+F}}function m(re){const K=[];let F=null;for(const N of re){const j=N.range.start,me=N.range.end,ce=N.size;if(F&&ce===F.size){F.range.end=me;continue}F={range:{start:j,end:me},size:ce},K.push(F)}return K}function S(...re){return m(re.reduce((K,F)=>K.concat(F),[]))}class D{get paddingTop(){return this._paddingTop}set paddingTop(K){this._size=this._size+K-this._paddingTop,this._paddingTop=K}constructor(K){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=K??0,this._size=this._paddingTop}splice(K,F,N=[]){const j=N.length-F,me=_({start:0,end:K},this.groups),ce=_({start:K+F,end:Number.POSITIVE_INFINITY},this.groups).map(Le=>({range:d(Le.range,j),size:Le.size})),he=N.map((Le,Y)=>({range:{start:K+Y,end:K+Y+1},size:Le.size}));this.groups=S(me,he,ce),this._size=this._paddingTop+this.groups.reduce((Le,Y)=>Le+Y.size*(Y.range.end-Y.range.start),0)}get count(){const K=this.groups.length;return K?this.groups[K-1].range.end:0}get size(){return this._size}indexAt(K){if(K<0)return-1;if(K<this._paddingTop)return 0;let F=0,N=this._paddingTop;for(const j of this.groups){const me=j.range.end-j.range.start,ce=N+me*j.size;if(K<ce)return F+Math.floor((K-N)/j.size);F+=me,N=ce}return F}indexAfter(K){return Math.min(this.indexAt(K)+1,this.count)}positionAt(K){if(K<0)return-1;let F=0,N=0;for(const j of this.groups){const me=j.range.end-j.range.start,ce=N+me;if(K<ce)return this._paddingTop+F+(K-N)*j.size;F+=me*j.size,N=ce}return-1}}class E{constructor(K){this.renderers=K,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(K){let F=this.getTemplateCache(K).pop(),N=!1;if(F)N=this.transactionNodesPendingRemoval.has(F.domNode),N&&this.transactionNodesPendingRemoval.delete(F.domNode);else{const j=(0,G.$)(".monaco-list-row"),ce=this.getRenderer(K).renderTemplate(j);F={domNode:j,templateId:K,templateData:ce}}return{row:F,isReusingConnectedDomNode:N}}release(K){K&&this.releaseRow(K)}transact(K){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{K()}finally{for(const F of this.transactionNodesPendingRemoval)this.doRemoveNode(F);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(K){const{domNode:F,templateId:N}=K;F&&(this.inTransaction?this.transactionNodesPendingRemoval.add(F):this.doRemoveNode(F)),this.getTemplateCache(N).push(K)}doRemoveNode(K){K.classList.remove("scrolling"),K.remove()}getTemplateCache(K){let F=this.cache.get(K);return F||(F=[],this.cache.set(K,F)),F}dispose(){this.cache.forEach((K,F)=>{for(const N of K)this.getRenderer(F).disposeTemplate(N.templateData),N.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(K){const F=this.renderers.get(K);if(!F)throw new Error(`No renderer found for ${K}`);return F}}var B=c(87856),R=c(23957),z=function(re,K,F,N){var j=arguments.length,me=j<3?K:N===null?N=Object.getOwnPropertyDescriptor(K,F):N,ce;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")me=Reflect.decorate(re,K,F,N);else for(var he=re.length-1;he>=0;he--)(ce=re[he])&&(me=(j<3?ce(me):j>3?ce(K,F,me):ce(K,F))||me);return j>3&&me&&Object.defineProperty(K,F,me),me};const W={CurrentDragAndDropData:void 0},$={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(re){return[re]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class Q{constructor(K){this.elements=K}update(){}getData(){return this.elements}}class q{constructor(K){this.elements=K}update(){}getData(){return this.elements}}class ne{constructor(){this.types=[],this.files=[]}update(K){if(K.types&&this.types.splice(0,this.types.length,...K.types),K.files){this.files.splice(0,this.files.length);for(let F=0;F<K.files.length;F++){const N=K.files.item(F);N&&(N.size||N.type)&&this.files.push(N)}}}getData(){return{types:this.types,files:this.files}}}function ve(re,K){return Array.isArray(re)&&Array.isArray(K)?(0,w.aI)(re,K):re===K}class Re{constructor(K){K?.getSetSize?this.getSetSize=K.getSetSize.bind(K):this.getSetSize=(F,N,j)=>j,K?.getPosInSet?this.getPosInSet=K.getPosInSet.bind(K):this.getPosInSet=(F,N)=>N+1,K?.getRole?this.getRole=K.getRole.bind(K):this.getRole=F=>"listitem",K?.isChecked?this.isChecked=K.isChecked.bind(K):this.isChecked=F=>{}}}class Ae{static{this.InstanceCount=0}get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(K){if(K!==this._horizontalScrolling){if(K&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=K,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const F of this.items)this.measureItemWidth(F);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:(0,G.y6)(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(K,F,N,j=$){if(this.virtualDelegate=F,this.domId=`list_id_${++Ae.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new O.ve(50),this.splicing=!1,this.dragOverAnimationStopDisposable=b.jG.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=b.jG.None,this.onDragLeaveTimeout=b.jG.None,this.disposables=new b.Cm,this._onDidChangeContentHeight=new I.vl,this._onDidChangeContentWidth=new I.vl,this.onDidChangeContentHeight=I.Jh.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,j.horizontalScrolling&&j.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(j.paddingTop??0);for(const ce of N)this.renderers.set(ce.templateId,ce);this.cache=this.disposables.add(new E(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof j.mouseSupport=="boolean"?j.mouseSupport:!0),this._horizontalScrolling=j.horizontalScrolling??$.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof j.paddingBottom>"u"?0:j.paddingBottom,this.accessibilityProvider=new Re(j.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(j.transformOptimization??$.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(P.q.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new v.yE({forceIntegerValues:!0,smoothScrollDuration:j.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:ce=>(0,G.PG)((0,G.zk)(this.domNode),ce)})),this.scrollableElement=this.disposables.add(new M.oO(this.rowsContainer,{alwaysConsumeMouseWheel:j.alwaysConsumeMouseWheel??$.alwaysConsumeMouseWheel,horizontal:1,vertical:j.verticalScrollMode??$.verticalScrollMode,useShadows:j.useShadows??$.useShadows,mouseWheelScrollSensitivity:j.mouseWheelScrollSensitivity,fastScrollSensitivity:j.fastScrollSensitivity,scrollByPage:j.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),K.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add((0,G.ko)(this.rowsContainer,P.B.Change,ce=>this.onTouchChange(ce))),this.disposables.add((0,G.ko)(this.scrollableElement.getDomNode(),"scroll",ce=>ce.target.scrollTop=0)),this.disposables.add((0,G.ko)(this.domNode,"dragover",ce=>this.onDragOver(this.toDragEvent(ce)))),this.disposables.add((0,G.ko)(this.domNode,"drop",ce=>this.onDrop(this.toDragEvent(ce)))),this.disposables.add((0,G.ko)(this.domNode,"dragleave",ce=>this.onDragLeave(this.toDragEvent(ce)))),this.disposables.add((0,G.ko)(this.domNode,"dragend",ce=>this.onDragEnd(ce))),this.setRowLineHeight=j.setRowLineHeight??$.setRowLineHeight,this.setRowHeight=j.setRowHeight??$.setRowHeight,this.supportDynamicHeights=j.supportDynamicHeights??$.supportDynamicHeights,this.dnd=j.dnd??this.disposables.add($.dnd),this.layout(j.initialSize?.height,j.initialSize?.width)}updateOptions(K){K.paddingBottom!==void 0&&(this.paddingBottom=K.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),K.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(K.smoothScrolling?125:0),K.horizontalScrolling!==void 0&&(this.horizontalScrolling=K.horizontalScrolling);let F;if(K.scrollByPage!==void 0&&(F={...F??{},scrollByPage:K.scrollByPage}),K.mouseWheelScrollSensitivity!==void 0&&(F={...F??{},mouseWheelScrollSensitivity:K.mouseWheelScrollSensitivity}),K.fastScrollSensitivity!==void 0&&(F={...F??{},fastScrollSensitivity:K.fastScrollSensitivity}),F&&this.scrollableElement.updateOptions(F),K.paddingTop!==void 0&&K.paddingTop!==this.rangeMap.paddingTop){const N=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),j=K.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=K.paddingTop,this.render(N,Math.max(0,this.lastRenderTop+j),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(K){return new D(K)}splice(K,F,N=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(K,F,N)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(K,F,N=[]){const j=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),me={start:K,end:K+F},ce=C.Q.intersect(j,me),he=new Map;for(let ot=ce.end-1;ot>=ce.start;ot--){const Pt=this.items[ot];if(Pt.dragStartDisposable.dispose(),Pt.checkedDisposable.dispose(),Pt.row){let Wt=he.get(Pt.templateId);Wt||(Wt=[],he.set(Pt.templateId,Wt));const Rt=this.renderers.get(Pt.templateId);Rt&&Rt.disposeElement&&Rt.disposeElement(Pt.element,ot,Pt.row.templateData,Pt.size),Wt.unshift(Pt.row)}Pt.row=null,Pt.stale=!0}const Le={start:K+F,end:this.items.length},Y=C.Q.intersect(Le,j),ae=C.Q.relativeComplement(Le,j),Ce=N.map(ot=>({id:String(this.itemId++),element:ot,templateId:this.virtualDelegate.getTemplateId(ot),size:this.virtualDelegate.getHeight(ot),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(ot),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:b.jG.None,checkedDisposable:b.jG.None,stale:!1}));let Pe;K===0&&F>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,Ce),Pe=this.items,this.items=Ce):(this.rangeMap.splice(K,F,Ce),Pe=this.items.splice(K,F,...Ce));const ye=N.length-F,Ke=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),qe=d(Y,ye),Ue=C.Q.intersect(Ke,qe);for(let ot=Ue.start;ot<Ue.end;ot++)this.updateItemInDOM(this.items[ot],ot);const x=C.Q.relativeComplement(qe,Ke);for(const ot of x)for(let Pt=ot.start;Pt<ot.end;Pt++)this.removeItemFromDOM(Pt);const it=ae.map(ot=>d(ot,ye)),_t=[{start:K,end:K+N.length},...it].map(ot=>C.Q.intersect(Ke,ot)).reverse();for(const ot of _t)for(let Pt=ot.end-1;Pt>=ot.start;Pt--){const Wt=this.items[Pt],at=he.get(Wt.templateId)?.pop();this.insertItemInDOM(Pt,at)}for(const ot of he.values())for(const Pt of ot)this.cache.release(Pt);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),Pe.map(ot=>ot.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=(0,G.PG)((0,G.zk)(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let K=0;for(const F of this.items)typeof F.width<"u"&&(K=Math.max(K,F.width));this.scrollWidth=K,this.scrollableElement.setScrollDimensions({scrollWidth:K===0?0:K+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const K of this.items)K.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(K){return this.items[K].element}indexOf(K){return this.items.findIndex(F=>F.element===K)}domElement(K){const F=this.items[K].row;return F&&F.domNode}elementHeight(K){return this.items[K].size}elementTop(K){return this.rangeMap.positionAt(K)}indexAt(K){return this.rangeMap.indexAt(K)}indexAfter(K){return this.rangeMap.indexAfter(K)}layout(K,F){const N={height:typeof K=="number"?K:(0,G.H4)(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,N.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(N),typeof F<"u"&&(this.renderWidth=F,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof F=="number"?F:(0,G.y6)(this.domNode)})}render(K,F,N,j,me,ce=!1){const he=this.getRenderRange(F,N),Le=C.Q.relativeComplement(he,K).reverse(),Y=C.Q.relativeComplement(K,he);if(ce){const ae=C.Q.intersect(K,he);for(let Ce=ae.start;Ce<ae.end;Ce++)this.updateItemInDOM(this.items[Ce],Ce)}this.cache.transact(()=>{for(const ae of Y)for(let Ce=ae.start;Ce<ae.end;Ce++)this.removeItemFromDOM(Ce);for(const ae of Le)for(let Ce=ae.end-1;Ce>=ae.start;Ce--)this.insertItemInDOM(Ce)}),j!==void 0&&(this.rowsContainer.style.left=`-${j}px`),this.rowsContainer.style.top=`-${F}px`,this.horizontalScrolling&&me!==void 0&&(this.rowsContainer.style.width=`${Math.max(me,this.renderWidth)}px`),this.lastRenderTop=F,this.lastRenderHeight=N}insertItemInDOM(K,F){const N=this.items[K];if(!N.row)if(F)N.row=F,N.stale=!0;else{const Le=this.cache.alloc(N.templateId);N.row=Le.row,N.stale||=Le.isReusingConnectedDomNode}const j=this.accessibilityProvider.getRole(N.element)||"listitem";N.row.domNode.setAttribute("role",j);const me=this.accessibilityProvider.isChecked(N.element);if(typeof me=="boolean")N.row.domNode.setAttribute("aria-checked",String(!!me));else if(me){const Le=Y=>N.row.domNode.setAttribute("aria-checked",String(!!Y));Le(me.value),N.checkedDisposable=me.onDidChange(()=>Le(me.value))}if(N.stale||!N.row.domNode.parentElement){const Le=this.items.at(K+1)?.row?.domNode??null;(N.row.domNode.parentElement!==this.rowsContainer||N.row.domNode.nextElementSibling!==Le)&&this.rowsContainer.insertBefore(N.row.domNode,Le),N.stale=!1}this.updateItemInDOM(N,K);const ce=this.renderers.get(N.templateId);if(!ce)throw new Error(`No renderer found for template id ${N.templateId}`);ce?.renderElement(N.element,K,N.row.templateData,N.size);const he=this.dnd.getDragURI(N.element);N.dragStartDisposable.dispose(),N.row.domNode.draggable=!!he,he&&(N.dragStartDisposable=(0,G.ko)(N.row.domNode,"dragstart",Le=>this.onDragStart(N.element,he,Le))),this.horizontalScrolling&&(this.measureItemWidth(N),this.eventuallyUpdateScrollWidth())}measureItemWidth(K){if(!K.row||!K.row.domNode)return;K.row.domNode.style.width="fit-content",K.width=(0,G.y6)(K.row.domNode);const F=(0,G.zk)(K.row.domNode).getComputedStyle(K.row.domNode);F.paddingLeft&&(K.width+=parseFloat(F.paddingLeft)),F.paddingRight&&(K.width+=parseFloat(F.paddingRight)),K.row.domNode.style.width=""}updateItemInDOM(K,F){K.row.domNode.style.top=`${this.elementTop(F)}px`,this.setRowHeight&&(K.row.domNode.style.height=`${K.size}px`),this.setRowLineHeight&&(K.row.domNode.style.lineHeight=`${K.size}px`),K.row.domNode.setAttribute("data-index",`${F}`),K.row.domNode.setAttribute("data-last-element",F===this.length-1?"true":"false"),K.row.domNode.setAttribute("data-parity",F%2===0?"even":"odd"),K.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(K.element,F,this.length))),K.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(K.element,F))),K.row.domNode.setAttribute("id",this.getElementDomId(F)),K.row.domNode.classList.toggle("drop-target",K.dropTarget)}removeItemFromDOM(K){const F=this.items[K];if(F.dragStartDisposable.dispose(),F.checkedDisposable.dispose(),F.row){const N=this.renderers.get(F.templateId);N&&N.disposeElement&&N.disposeElement(F.element,K,F.row.templateData,F.size),this.cache.release(F.row),F.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(K,F){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:K,reuseAnimation:F})}get scrollTop(){return this.getScrollTop()}set scrollTop(K){this.setScrollTop(K)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return I.Jh.map(this.disposables.add(new U.f(this.domNode,"click")).event,K=>this.toMouseEvent(K),this.disposables)}get onMouseDblClick(){return I.Jh.map(this.disposables.add(new U.f(this.domNode,"dblclick")).event,K=>this.toMouseEvent(K),this.disposables)}get onMouseMiddleClick(){return I.Jh.filter(I.Jh.map(this.disposables.add(new U.f(this.domNode,"auxclick")).event,K=>this.toMouseEvent(K),this.disposables),K=>K.browserEvent.button===1,this.disposables)}get onMouseDown(){return I.Jh.map(this.disposables.add(new U.f(this.domNode,"mousedown")).event,K=>this.toMouseEvent(K),this.disposables)}get onMouseOver(){return I.Jh.map(this.disposables.add(new U.f(this.domNode,"mouseover")).event,K=>this.toMouseEvent(K),this.disposables)}get onMouseOut(){return I.Jh.map(this.disposables.add(new U.f(this.domNode,"mouseout")).event,K=>this.toMouseEvent(K),this.disposables)}get onContextMenu(){return I.Jh.any(I.Jh.map(this.disposables.add(new U.f(this.domNode,"contextmenu")).event,K=>this.toMouseEvent(K),this.disposables),I.Jh.map(this.disposables.add(new U.f(this.domNode,P.B.Contextmenu)).event,K=>this.toGestureEvent(K),this.disposables))}get onTouchStart(){return I.Jh.map(this.disposables.add(new U.f(this.domNode,"touchstart")).event,K=>this.toTouchEvent(K),this.disposables)}get onTap(){return I.Jh.map(this.disposables.add(new U.f(this.rowsContainer,P.B.Tap)).event,K=>this.toGestureEvent(K),this.disposables)}toMouseEvent(K){const F=this.getItemIndexFromEventTarget(K.target||null),N=typeof F>"u"?void 0:this.items[F],j=N&&N.element;return{browserEvent:K,index:F,element:j}}toTouchEvent(K){const F=this.getItemIndexFromEventTarget(K.target||null),N=typeof F>"u"?void 0:this.items[F],j=N&&N.element;return{browserEvent:K,index:F,element:j}}toGestureEvent(K){const F=this.getItemIndexFromEventTarget(K.initialTarget||null),N=typeof F>"u"?void 0:this.items[F],j=N&&N.element;return{browserEvent:K,index:F,element:j}}toDragEvent(K){const F=this.getItemIndexFromEventTarget(K.target||null),N=typeof F>"u"?void 0:this.items[F],j=N&&N.element,me=this.getTargetSector(K,F);return{browserEvent:K,index:F,element:j,sector:me}}onScroll(K){try{const F=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(F,K.scrollTop,K.height,K.scrollLeft,K.scrollWidth),this.supportDynamicHeights&&this._rerender(K.scrollTop,K.height,K.inSmoothScrolling)}catch(F){throw F}}onTouchChange(K){K.preventDefault(),K.stopPropagation(),this.scrollTop-=K.translationY}onDragStart(K,F,N){if(!N.dataTransfer)return;const j=this.dnd.getDragElements(K);if(N.dataTransfer.effectAllowed="copyMove",N.dataTransfer.setData(u.t.TEXT,F),N.dataTransfer.setDragImage){let me;this.dnd.getDragLabel&&(me=this.dnd.getDragLabel(j,N)),typeof me>"u"&&(me=String(j.length));const ce=(0,G.$)(".monaco-drag-image");ce.textContent=me,(Y=>{for(;Y&&!Y.classList.contains("monaco-workbench");)Y=Y.parentElement;return Y||this.domNode.ownerDocument})(this.domNode).appendChild(ce),N.dataTransfer.setDragImage(ce,-10,-10),setTimeout(()=>ce.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new Q(j),W.CurrentDragAndDropData=new q(j),this.dnd.onDragStart?.(this.currentDragData,N)}onDragOver(K){if(K.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),W.CurrentDragAndDropData&&W.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(K.browserEvent),!K.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(W.CurrentDragAndDropData)this.currentDragData=W.CurrentDragAndDropData;else{if(!K.browserEvent.dataTransfer.types)return!1;this.currentDragData=new ne}const F=this.dnd.onDragOver(this.currentDragData,K.element,K.index,K.sector,K.browserEvent);if(this.canDrop=typeof F=="boolean"?F:F.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;K.browserEvent.dataTransfer.dropEffect=typeof F!="boolean"&&F.effect?.type===0?"copy":"move";let N;typeof F!="boolean"&&F.feedback?N=F.feedback:typeof K.index>"u"?N=[-1]:N=[K.index],N=(0,w.dM)(N).filter(me=>me>=-1&&me<this.length).sort((me,ce)=>me-ce),N=N[0]===-1?[-1]:N;let j=typeof F!="boolean"&&F.effect&&F.effect.position?F.effect.position:"drop-target";if(ve(this.currentDragFeedback,N)&&this.currentDragFeedbackPosition===j)return!0;if(this.currentDragFeedback=N,this.currentDragFeedbackPosition=j,this.currentDragFeedbackDisposable.dispose(),N[0]===-1)this.domNode.classList.add(j),this.rowsContainer.classList.add(j),this.currentDragFeedbackDisposable=(0,b.s)(()=>{this.domNode.classList.remove(j),this.rowsContainer.classList.remove(j)});else{if(N.length>1&&j!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");j==="drop-target-after"&&N[0]<this.length-1&&(N[0]+=1,j="drop-target-before");for(const me of N){const ce=this.items[me];ce.dropTarget=!0,ce.row?.domNode.classList.add(j)}this.currentDragFeedbackDisposable=(0,b.s)(()=>{for(const me of N){const ce=this.items[me];ce.dropTarget=!1,ce.row?.domNode.classList.remove(j)}})}return!0}onDragLeave(K){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=(0,O.EQ)(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,K.element,K.index,K.browserEvent)}onDrop(K){if(!this.canDrop)return;const F=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,W.CurrentDragAndDropData=void 0,!(!F||!K.browserEvent.dataTransfer)&&(K.browserEvent.preventDefault(),F.update(K.browserEvent.dataTransfer),this.dnd.drop(F,K.element,K.index,K.sector,K.browserEvent))}onDragEnd(K){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,W.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(K)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=b.jG.None}setupDragAndDropScrollTopAnimation(K){if(!this.dragOverAnimationDisposable){const F=(0,G.cL)(this.domNode).top;this.dragOverAnimationDisposable=(0,G.i0)((0,G.zk)(this.domNode),this.animateDragAndDropScrollTop.bind(this,F))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=(0,O.EQ)(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=K.pageY}animateDragAndDropScrollTop(K){if(this.dragOverMouseY===void 0)return;const F=this.dragOverMouseY-K,N=this.renderHeight-35;F<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(F-35))):F>N&&(this.scrollTop+=Math.min(14,Math.floor(.3*(F-N))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(K,F){if(F===void 0)return;const N=K.offsetY/this.items[F].size,j=Math.floor(N/.25);return(0,R.qE)(j,0,3)}getItemIndexFromEventTarget(K){const F=this.scrollableElement.getDomNode();let N=K;for(;((0,G.sb)(N)||(0,G.xZ)(N))&&N!==this.rowsContainer&&F.contains(N);){const j=N.getAttribute("data-index");if(j){const me=Number(j);if(!isNaN(me))return me}N=N.parentElement}}getRenderRange(K,F){return{start:this.rangeMap.indexAt(K),end:this.rangeMap.indexAfter(K+F-1)}}_rerender(K,F,N){const j=this.getRenderRange(K,F);let me,ce;K===this.elementTop(j.start)?(me=j.start,ce=0):j.end-j.start>1&&(me=j.start+1,ce=this.elementTop(me)-K);let he=0;for(;;){const Le=this.getRenderRange(K,F);let Y=!1;for(let ae=Le.start;ae<Le.end;ae++){const Ce=this.probeDynamicHeight(ae);Ce!==0&&this.rangeMap.splice(ae,1,[this.items[ae]]),he+=Ce,Y=Y||Ce!==0}if(!Y){he!==0&&this.eventuallyUpdateScrollDimensions();const ae=C.Q.relativeComplement(j,Le);for(const Pe of ae)for(let ye=Pe.start;ye<Pe.end;ye++)this.items[ye].row&&this.removeItemFromDOM(ye);const Ce=C.Q.relativeComplement(Le,j).reverse();for(const Pe of Ce)for(let ye=Pe.end-1;ye>=Pe.start;ye--)this.insertItemInDOM(ye);for(let Pe=Le.start;Pe<Le.end;Pe++)this.items[Pe].row&&this.updateItemInDOM(this.items[Pe],Pe);if(typeof me=="number"){const Pe=this.scrollable.getFutureScrollPosition().scrollTop-K,ye=this.elementTop(me)-ce+Pe;this.setScrollTop(ye,N)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(K){const F=this.items[K];if(this.virtualDelegate.getDynamicHeight){const ce=this.virtualDelegate.getDynamicHeight(F.element);if(ce!==null){const he=F.size;return F.size=ce,F.lastDynamicHeightWidth=this.renderWidth,ce-he}}if(!F.hasDynamicHeight||F.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(F.element))return 0;const N=F.size;if(F.row)return F.row.domNode.style.height="",F.size=F.row.domNode.offsetHeight,F.size===0&&(0,G.QX)(F.row.domNode,(0,G.zk)(F.row.domNode).document.body),F.lastDynamicHeightWidth=this.renderWidth,F.size-N;const{row:j}=this.cache.alloc(F.templateId);j.domNode.style.height="",this.rowsContainer.appendChild(j.domNode);const me=this.renderers.get(F.templateId);if(!me)throw new B.D7("Missing renderer for templateId: "+F.templateId);return me.renderElement(F.element,K,j.templateData,void 0),F.size=j.domNode.offsetHeight,me.disposeElement?.(F.element,K,j.templateData,void 0),this.virtualDelegate.setDynamicHeight?.(F.element,F.size),F.lastDynamicHeightWidth=this.renderWidth,j.domNode.remove(),this.cache.release(j),F.size-N}getElementDomId(K){return`${this.domId}_${K}`}dispose(){for(const K of this.items)if(K.dragStartDisposable.dispose(),K.checkedDisposable.dispose(),K.row){const F=this.renderers.get(K.row.templateId);F&&(F.disposeElement?.(K.element,-1,K.row.templateData,void 0),F.disposeTemplate(K.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}}z([A.B],Ae.prototype,"onMouseClick",null),z([A.B],Ae.prototype,"onMouseDblClick",null),z([A.B],Ae.prototype,"onMouseMiddleClick",null),z([A.B],Ae.prototype,"onMouseDown",null),z([A.B],Ae.prototype,"onMouseOver",null),z([A.B],Ae.prototype,"onMouseOut",null),z([A.B],Ae.prototype,"onContextMenu",null),z([A.B],Ae.prototype,"onTouchStart",null),z([A.B],Ae.prototype,"onTap",null)},64246:(Mt,He,c)=>{c.d(He,{Bb:()=>G,HD:()=>U,zM:()=>u});var u;(function(P){P.DARK="dark",P.LIGHT="light",P.HIGH_CONTRAST_DARK="hcDark",P.HIGH_CONTRAST_LIGHT="hcLight"})(u||(u={}));function G(P){return P===u.HIGH_CONTRAST_DARK||P===u.HIGH_CONTRAST_LIGHT}function U(P){return P===u.DARK||P===u.HIGH_CONTRAST_DARK}},64840:(Mt,He,c)=>{c.d(He,{Fo:()=>b,YM:()=>v,m5:()=>_,uw:()=>M});class u{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(m,S){this._keyCodeToStr[m]=S,this._strToKeyCode[S.toLowerCase()]=m}keyCodeToStr(m){return this._keyCodeToStr[m]}strToKeyCode(m){return this._strToKeyCode[m.toLowerCase()]||0}}const G=new u,U=new u,P=new u,M=new Array(230),w={},O=[],A=Object.create(null),I=Object.create(null),b=[],C=[];for(let d=0;d<=193;d++)b[d]=-1;for(let d=0;d<=132;d++)C[d]=-1;(function(){const d="",m=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",d,d],[1,1,"Hyper",0,d,0,d,d,d],[1,2,"Super",0,d,0,d,d,d],[1,3,"Fn",0,d,0,d,d,d],[1,4,"FnLock",0,d,0,d,d,d],[1,5,"Suspend",0,d,0,d,d,d],[1,6,"Resume",0,d,0,d,d,d],[1,7,"Turbo",0,d,0,d,d,d],[1,8,"Sleep",0,d,0,"VK_SLEEP",d,d],[1,9,"WakeUp",0,d,0,d,d,d],[0,10,"KeyA",31,"A",65,"VK_A",d,d],[0,11,"KeyB",32,"B",66,"VK_B",d,d],[0,12,"KeyC",33,"C",67,"VK_C",d,d],[0,13,"KeyD",34,"D",68,"VK_D",d,d],[0,14,"KeyE",35,"E",69,"VK_E",d,d],[0,15,"KeyF",36,"F",70,"VK_F",d,d],[0,16,"KeyG",37,"G",71,"VK_G",d,d],[0,17,"KeyH",38,"H",72,"VK_H",d,d],[0,18,"KeyI",39,"I",73,"VK_I",d,d],[0,19,"KeyJ",40,"J",74,"VK_J",d,d],[0,20,"KeyK",41,"K",75,"VK_K",d,d],[0,21,"KeyL",42,"L",76,"VK_L",d,d],[0,22,"KeyM",43,"M",77,"VK_M",d,d],[0,23,"KeyN",44,"N",78,"VK_N",d,d],[0,24,"KeyO",45,"O",79,"VK_O",d,d],[0,25,"KeyP",46,"P",80,"VK_P",d,d],[0,26,"KeyQ",47,"Q",81,"VK_Q",d,d],[0,27,"KeyR",48,"R",82,"VK_R",d,d],[0,28,"KeyS",49,"S",83,"VK_S",d,d],[0,29,"KeyT",50,"T",84,"VK_T",d,d],[0,30,"KeyU",51,"U",85,"VK_U",d,d],[0,31,"KeyV",52,"V",86,"VK_V",d,d],[0,32,"KeyW",53,"W",87,"VK_W",d,d],[0,33,"KeyX",54,"X",88,"VK_X",d,d],[0,34,"KeyY",55,"Y",89,"VK_Y",d,d],[0,35,"KeyZ",56,"Z",90,"VK_Z",d,d],[0,36,"Digit1",22,"1",49,"VK_1",d,d],[0,37,"Digit2",23,"2",50,"VK_2",d,d],[0,38,"Digit3",24,"3",51,"VK_3",d,d],[0,39,"Digit4",25,"4",52,"VK_4",d,d],[0,40,"Digit5",26,"5",53,"VK_5",d,d],[0,41,"Digit6",27,"6",54,"VK_6",d,d],[0,42,"Digit7",28,"7",55,"VK_7",d,d],[0,43,"Digit8",29,"8",56,"VK_8",d,d],[0,44,"Digit9",30,"9",57,"VK_9",d,d],[0,45,"Digit0",21,"0",48,"VK_0",d,d],[1,46,"Enter",3,"Enter",13,"VK_RETURN",d,d],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",d,d],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",d,d],[1,49,"Tab",2,"Tab",9,"VK_TAB",d,d],[1,50,"Space",10,"Space",32,"VK_SPACE",d,d],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,d,0,d,d,d],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",d,d],[1,64,"F1",59,"F1",112,"VK_F1",d,d],[1,65,"F2",60,"F2",113,"VK_F2",d,d],[1,66,"F3",61,"F3",114,"VK_F3",d,d],[1,67,"F4",62,"F4",115,"VK_F4",d,d],[1,68,"F5",63,"F5",116,"VK_F5",d,d],[1,69,"F6",64,"F6",117,"VK_F6",d,d],[1,70,"F7",65,"F7",118,"VK_F7",d,d],[1,71,"F8",66,"F8",119,"VK_F8",d,d],[1,72,"F9",67,"F9",120,"VK_F9",d,d],[1,73,"F10",68,"F10",121,"VK_F10",d,d],[1,74,"F11",69,"F11",122,"VK_F11",d,d],[1,75,"F12",70,"F12",123,"VK_F12",d,d],[1,76,"PrintScreen",0,d,0,d,d,d],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",d,d],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",d,d],[1,79,"Insert",19,"Insert",45,"VK_INSERT",d,d],[1,80,"Home",14,"Home",36,"VK_HOME",d,d],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",d,d],[1,82,"Delete",20,"Delete",46,"VK_DELETE",d,d],[1,83,"End",13,"End",35,"VK_END",d,d],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",d,d],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",d],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",d],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",d],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",d],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",d,d],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",d,d],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",d,d],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",d,d],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",d,d],[1,94,"NumpadEnter",3,d,0,d,d,d],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",d,d],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",d,d],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",d,d],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",d,d],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",d,d],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",d,d],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",d,d],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",d,d],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",d,d],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",d,d],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",d,d],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",d,d],[1,107,"ContextMenu",58,"ContextMenu",93,d,d,d],[1,108,"Power",0,d,0,d,d,d],[1,109,"NumpadEqual",0,d,0,d,d,d],[1,110,"F13",71,"F13",124,"VK_F13",d,d],[1,111,"F14",72,"F14",125,"VK_F14",d,d],[1,112,"F15",73,"F15",126,"VK_F15",d,d],[1,113,"F16",74,"F16",127,"VK_F16",d,d],[1,114,"F17",75,"F17",128,"VK_F17",d,d],[1,115,"F18",76,"F18",129,"VK_F18",d,d],[1,116,"F19",77,"F19",130,"VK_F19",d,d],[1,117,"F20",78,"F20",131,"VK_F20",d,d],[1,118,"F21",79,"F21",132,"VK_F21",d,d],[1,119,"F22",80,"F22",133,"VK_F22",d,d],[1,120,"F23",81,"F23",134,"VK_F23",d,d],[1,121,"F24",82,"F24",135,"VK_F24",d,d],[1,122,"Open",0,d,0,d,d,d],[1,123,"Help",0,d,0,d,d,d],[1,124,"Select",0,d,0,d,d,d],[1,125,"Again",0,d,0,d,d,d],[1,126,"Undo",0,d,0,d,d,d],[1,127,"Cut",0,d,0,d,d,d],[1,128,"Copy",0,d,0,d,d,d],[1,129,"Paste",0,d,0,d,d,d],[1,130,"Find",0,d,0,d,d,d],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",d,d],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",d,d],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",d,d],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",d,d],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",d,d],[1,136,"KanaMode",0,d,0,d,d,d],[0,137,"IntlYen",0,d,0,d,d,d],[1,138,"Convert",0,d,0,d,d,d],[1,139,"NonConvert",0,d,0,d,d,d],[1,140,"Lang1",0,d,0,d,d,d],[1,141,"Lang2",0,d,0,d,d,d],[1,142,"Lang3",0,d,0,d,d,d],[1,143,"Lang4",0,d,0,d,d,d],[1,144,"Lang5",0,d,0,d,d,d],[1,145,"Abort",0,d,0,d,d,d],[1,146,"Props",0,d,0,d,d,d],[1,147,"NumpadParenLeft",0,d,0,d,d,d],[1,148,"NumpadParenRight",0,d,0,d,d,d],[1,149,"NumpadBackspace",0,d,0,d,d,d],[1,150,"NumpadMemoryStore",0,d,0,d,d,d],[1,151,"NumpadMemoryRecall",0,d,0,d,d,d],[1,152,"NumpadMemoryClear",0,d,0,d,d,d],[1,153,"NumpadMemoryAdd",0,d,0,d,d,d],[1,154,"NumpadMemorySubtract",0,d,0,d,d,d],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",d,d],[1,156,"NumpadClearEntry",0,d,0,d,d,d],[1,0,d,5,"Ctrl",17,"VK_CONTROL",d,d],[1,0,d,4,"Shift",16,"VK_SHIFT",d,d],[1,0,d,6,"Alt",18,"VK_MENU",d,d],[1,0,d,57,"Meta",91,"VK_COMMAND",d,d],[1,157,"ControlLeft",5,d,0,"VK_LCONTROL",d,d],[1,158,"ShiftLeft",4,d,0,"VK_LSHIFT",d,d],[1,159,"AltLeft",6,d,0,"VK_LMENU",d,d],[1,160,"MetaLeft",57,d,0,"VK_LWIN",d,d],[1,161,"ControlRight",5,d,0,"VK_RCONTROL",d,d],[1,162,"ShiftRight",4,d,0,"VK_RSHIFT",d,d],[1,163,"AltRight",6,d,0,"VK_RMENU",d,d],[1,164,"MetaRight",57,d,0,"VK_RWIN",d,d],[1,165,"BrightnessUp",0,d,0,d,d,d],[1,166,"BrightnessDown",0,d,0,d,d,d],[1,167,"MediaPlay",0,d,0,d,d,d],[1,168,"MediaRecord",0,d,0,d,d,d],[1,169,"MediaFastForward",0,d,0,d,d,d],[1,170,"MediaRewind",0,d,0,d,d,d],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",d,d],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",d,d],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",d,d],[1,174,"Eject",0,d,0,d,d,d],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",d,d],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",d,d],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",d,d],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",d,d],[1,179,"LaunchApp1",0,d,0,"VK_MEDIA_LAUNCH_APP1",d,d],[1,180,"SelectTask",0,d,0,d,d,d],[1,181,"LaunchScreenSaver",0,d,0,d,d,d],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",d,d],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",d,d],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",d,d],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",d,d],[1,186,"BrowserStop",0,d,0,"VK_BROWSER_STOP",d,d],[1,187,"BrowserRefresh",0,d,0,"VK_BROWSER_REFRESH",d,d],[1,188,"BrowserFavorites",0,d,0,"VK_BROWSER_FAVORITES",d,d],[1,189,"ZoomToggle",0,d,0,d,d,d],[1,190,"MailReply",0,d,0,d,d,d],[1,191,"MailForward",0,d,0,d,d,d],[1,192,"MailSend",0,d,0,d,d,d],[1,0,d,114,"KeyInComposition",229,d,d,d],[1,0,d,116,"ABNT_C2",194,"VK_ABNT_C2",d,d],[1,0,d,96,"OEM_8",223,"VK_OEM_8",d,d],[1,0,d,0,d,0,"VK_KANA",d,d],[1,0,d,0,d,0,"VK_HANGUL",d,d],[1,0,d,0,d,0,"VK_JUNJA",d,d],[1,0,d,0,d,0,"VK_FINAL",d,d],[1,0,d,0,d,0,"VK_HANJA",d,d],[1,0,d,0,d,0,"VK_KANJI",d,d],[1,0,d,0,d,0,"VK_CONVERT",d,d],[1,0,d,0,d,0,"VK_NONCONVERT",d,d],[1,0,d,0,d,0,"VK_ACCEPT",d,d],[1,0,d,0,d,0,"VK_MODECHANGE",d,d],[1,0,d,0,d,0,"VK_SELECT",d,d],[1,0,d,0,d,0,"VK_PRINT",d,d],[1,0,d,0,d,0,"VK_EXECUTE",d,d],[1,0,d,0,d,0,"VK_SNAPSHOT",d,d],[1,0,d,0,d,0,"VK_HELP",d,d],[1,0,d,0,d,0,"VK_APPS",d,d],[1,0,d,0,d,0,"VK_PROCESSKEY",d,d],[1,0,d,0,d,0,"VK_PACKET",d,d],[1,0,d,0,d,0,"VK_DBE_SBCSCHAR",d,d],[1,0,d,0,d,0,"VK_DBE_DBCSCHAR",d,d],[1,0,d,0,d,0,"VK_ATTN",d,d],[1,0,d,0,d,0,"VK_CRSEL",d,d],[1,0,d,0,d,0,"VK_EXSEL",d,d],[1,0,d,0,d,0,"VK_EREOF",d,d],[1,0,d,0,d,0,"VK_PLAY",d,d],[1,0,d,0,d,0,"VK_ZOOM",d,d],[1,0,d,0,d,0,"VK_NONAME",d,d],[1,0,d,0,d,0,"VK_PA1",d,d],[1,0,d,0,d,0,"VK_OEM_CLEAR",d,d]],S=[],D=[];for(const E of m){const[B,R,z,W,$,Q,q,ne,ve]=E;if(D[R]||(D[R]=!0,O[R]=z,A[z]=R,I[z.toLowerCase()]=R,B&&(b[R]=W,W!==0&&W!==3&&W!==5&&W!==4&&W!==6&&W!==57&&(C[W]=R))),!S[W]){if(S[W]=!0,!$)throw new Error(`String representation missing for key code ${W} around scan code ${z}`);G.define(W,$),U.define(W,ne||$),P.define(W,ve||ne||$)}Q&&(M[Q]=W),q&&(w[q]=W)}C[3]=46})();var v;(function(d){function m(z){return G.keyCodeToStr(z)}d.toString=m;function S(z){return G.strToKeyCode(z)}d.fromString=S;function D(z){return U.keyCodeToStr(z)}d.toUserSettingsUS=D;function E(z){return P.keyCodeToStr(z)}d.toUserSettingsGeneral=E;function B(z){return U.strToKeyCode(z)||P.strToKeyCode(z)}d.fromUserSettings=B;function R(z){if(z>=98&&z<=113)return null;switch(z){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return G.keyCodeToStr(z)}d.toElectronAccelerator=R})(v||(v={}));function _(d,m){const S=(m&65535)<<16>>>0;return(d|S)>>>0}},65068:(Mt,He,c)=>{c.r(He),c.d(He,{CancellationTokenSource:()=>hg,Emitter:()=>Xs,KeyCode:()=>rc,KeyMod:()=>cd,MarkerSeverity:()=>Ih,MarkerTag:()=>ym,Position:()=>dd,Range:()=>xh,Selection:()=>kh,SelectionDirection:()=>wm,Token:()=>hd,Uri:()=>Mh,editor:()=>Lm,languages:()=>ud});var u=c(8775),G=c(45892),U=c(42008),P=c(60599),M=c(85565),w=c(37473),O=c(36295),A=c(44727),I=c(37100),b=c(3223),C=c(37519),v=c(72340),_=c(13716),d=c(87856),m=c(54021),S=c(93009),D=c(45573);const E=!0;let B;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?B=globalThis.workerttPolicy:B=(0,_.H)("defaultWorkerFactory",{createScriptURL:de=>de});function R(de,r){const p=globalThis.MonacoEnvironment;if(p){if(typeof p.getWorker=="function")return p.getWorker("workerMain.js",r);if(typeof p.getWorkerUrl=="function"){const L=p.getWorkerUrl("workerMain.js",r);return new Worker(B?B.createScriptURL(L):L,{name:r,type:E?"module":void 0})}}if(de){const L=z(r,de.toString(!0)),V=new Worker(B?B.createScriptURL(L):L,{name:r,type:E?"module":void 0});return E?W(V):V}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function z(de,r,p){const L=/^((http:)|(https:)|(file:)|(vscode-file:))/.test(r);if(!(L&&r.substring(0,globalThis.origin.length)!==globalThis.origin)){const X=r.lastIndexOf("?"),ge=r.lastIndexOf("#",X),De=X>0?new URLSearchParams(r.substring(X+1,~ge?ge:void 0)):new URLSearchParams;m.SJ.addSearchParam(De,!0,!0),De.toString()?r=`${r}?${De.toString()}#${de}`:r=`${r}#${de}`}!E&&!L&&(r=new URL(r,globalThis.origin).toString());const V=new Blob([(0,S.Yc)([`/*${de}*/`,p?`globalThis.MonacoEnvironment = { baseUrl: '${p}' };`:void 0,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify((0,D.Ec)())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify((0,D.i8)())};`,`globalThis._VSCODE_FILE_ROOT = '${globalThis._VSCODE_FILE_ROOT}';`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",E?`await import(ttPolicy?.createScriptURL('${r}') ?? '${r}');`:`importScripts(ttPolicy?.createScriptURL('${r}') ?? '${r}');`,E?"globalThis.postMessage({ type: 'vscode-worker-ready' });":void 0,`/*${de}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(V)}function W(de){return new Promise((r,p)=>{de.onmessage=function(L){L.data.type==="vscode-worker-ready"&&(de.onmessage=null,r(de))},de.onerror=p})}function $(de){return typeof de.then=="function"}class Q extends P.jG{constructor(r,p,L,V,X,ge){super(),this.id=L,this.label=V;const De=R(r,V);$(De)?this.worker=De:this.worker=Promise.resolve(De),this.postMessage(p,[]),this.worker.then($e=>{$e.onmessage=function(tt){X(tt.data)},$e.onmessageerror=ge,typeof $e.addEventListener=="function"&&$e.addEventListener("error",ge)}),this._register((0,P.s)(()=>{this.worker?.then($e=>{$e.onmessage=null,$e.onmessageerror=null,$e.removeEventListener("error",ge),$e.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(r,p){this.worker?.then(L=>{try{L.postMessage(r,p)}catch(V){(0,d.dz)(V),(0,d.dz)(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:V}))}})}}class q{constructor(r,p){this.amdModuleId=r,this.label=p,this.esmModuleLocation=E?m.zl.asBrowserUri(`${r}.esm.js`):void 0}}class ne{static{this.LAST_WORKER_ID=0}constructor(){this._webWorkerFailedBeforeError=!1}create(r,p,L){const V=++ne.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new Q(r.esmModuleLocation,r.amdModuleId,V,r.label||"anonymous"+V,p,X=>{(0,v.logOnceWebWorkerWarning)(X),this._webWorkerFailedBeforeError=X,L(X)})}}function ve(de,r){const p=typeof de=="string"?new q(de,r):de;return new v.SimpleWorkerClient(new ne,p)}var Re=c(98414),Ae=c(61231),re=c(49336),K=c(65365),F=c(84059),N=c(92824),j=c(4156),me=c(84139),ce=c(38554),he=c(81182),Le=c(33924),Y=c(31938),ae=c(15763),Ce=c(41439),Pe=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},ye=function(de,r){return function(p,L){r(p,L,de)}};const Ke=5*60*1e3;function qe(de,r){const p=de.getModel(r);return!(!p||p.isTooLargeForSyncing())}let Ue=class extends P.jG{constructor(r,p,L,V,X,ge){super(),this._languageConfigurationService=X,this._modelService=p,this._workerManager=this._register(new it(r,this._modelService)),this._logService=V,this._register(ge.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(De,$e)=>{if(!qe(this._modelService,De.uri))return Promise.resolve({links:[]});const ft=await(await this._workerWithResources([De.uri])).$computeLinks(De.uri.toString());return ft&&{links:ft}}})),this._register(ge.completionProvider.register("*",new x(this._workerManager,L,this._modelService,this._languageConfigurationService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(r){return qe(this._modelService,r)}async computedUnicodeHighlights(r,p,L){return(await this._workerWithResources([r])).$computeUnicodeHighlights(r.toString(),p,L)}async computeDiff(r,p,L,V){const ge=await(await this._workerWithResources([r,p],!0)).$computeDiff(r.toString(),p.toString(),L,V);if(!ge)return null;return{identical:ge.identical,quitEarly:ge.quitEarly,changes:$e(ge.changes),moves:ge.moves.map(tt=>new ce.t(new he.WL(new Le.M(tt[0],tt[1]),new Le.M(tt[2],tt[3])),$e(tt[4])))};function $e(tt){return tt.map(ft=>new he.wm(new Le.M(ft[0],ft[1]),new Le.M(ft[2],ft[3]),ft[4]?.map(Nt=>new he.q6(new Re.Q(Nt[0],Nt[1],Nt[2],Nt[3]),new Re.Q(Nt[4],Nt[5],Nt[6],Nt[7])))))}}async computeMoreMinimalEdits(r,p,L=!1){if((0,S.EI)(p)){if(!qe(this._modelService,r))return Promise.resolve(p);const V=j.W.create(),X=this._workerWithResources([r]).then(ge=>ge.$computeMoreMinimalEdits(r.toString(),p,L));return X.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",r.toString(!0),V.elapsed())),Promise.race([X,(0,C.wR)(1e3).then(()=>p)])}else return Promise.resolve(void 0)}canNavigateValueSet(r){return qe(this._modelService,r)}async navigateValueSet(r,p,L){const V=this._modelService.getModel(r);if(!V)return null;const X=this._languageConfigurationService.getLanguageConfiguration(V.getLanguageId()).getWordDefinition(),ge=X.source,De=X.flags;return(await this._workerWithResources([r])).$navigateValueSet(r.toString(),p,L,ge,De)}canComputeWordRanges(r){return qe(this._modelService,r)}async computeWordRanges(r,p){const L=this._modelService.getModel(r);if(!L)return Promise.resolve(null);const V=this._languageConfigurationService.getLanguageConfiguration(L.getLanguageId()).getWordDefinition(),X=V.source,ge=V.flags;return(await this._workerWithResources([r])).$computeWordRanges(r.toString(),p,X,ge)}async findSectionHeaders(r,p){return(await this._workerWithResources([r])).$findSectionHeaders(r.toString(),p)}async computeDefaultDocumentColors(r){return(await this._workerWithResources([r])).$computeDefaultDocumentColors(r.toString())}async _workerWithResources(r,p=!1){return await(await this._workerManager.withWorker()).workerWithSyncedResources(r,p)}};Ue=Pe([ye(1,K.IModelService),ye(2,F.ITextResourceConfigurationService),ye(3,N.rr),ye(4,Ae.JZ),ye(5,me.ILanguageFeaturesService)],Ue);class x{constructor(r,p,L,V){this.languageConfigurationService=V,this._debugDisplayName="wordbasedCompletions",this._workerManager=r,this._configurationService=p,this._modelService=L}async provideCompletionItems(r,p){const L=this._configurationService.getValue(r.uri,p,"editor");if(L.wordBasedSuggestions==="off")return;const V=[];if(L.wordBasedSuggestions==="currentDocument")qe(this._modelService,r.uri)&&V.push(r.uri);else for(const Nt of this._modelService.getModels())qe(this._modelService,Nt.uri)&&(Nt===r?V.unshift(Nt.uri):(L.wordBasedSuggestions==="allDocuments"||Nt.getLanguageId()===r.getLanguageId())&&V.push(Nt.uri));if(V.length===0)return;const X=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId()).getWordDefinition(),ge=r.getWordAtPosition(p),De=ge?new Re.Q(p.lineNumber,ge.startColumn,p.lineNumber,ge.endColumn):Re.Q.fromPositions(p),$e=De.setEndPosition(p.lineNumber,p.column),ft=await(await this._workerManager.withWorker()).textualSuggest(V,ge?.word,X);if(ft)return{duration:ft.duration,suggestions:ft.words.map(Nt=>({kind:18,label:Nt,insertText:Nt,range:{insert:$e,replace:De}}))}}}let it=class extends P.jG{constructor(r,p){super(),this._workerDescriptor=r,this._modelService=p,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new Y.Be).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(Ke/2),U.G),this._register(this._modelService.onModelRemoved(V=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>Ke&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new _t(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};it=Pe([ye(1,K.IModelService)],it);class Ze{constructor(r){this._instance=r,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(r,p){throw new Error("Not supported")}}let _t=class extends P.jG{constructor(r,p,L){super(),this._workerDescriptor=r,this._disposed=!1,this._modelService=L,this._keepIdleModels=p,this._worker=null,this._modelManager=null}fhr(r,p){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(ve(this._workerDescriptor)),Ce.EditorWorkerHost.setChannel(this._worker,this._createEditorWorkerHost())}catch(r){(0,v.logOnceWebWorkerWarning)(r),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const r=this._getOrCreateWorker().proxy;return await r.$ping(),r}catch(r){return(0,v.logOnceWebWorkerWarning)(r),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new Ze(new re.EditorSimpleWorker(this._createEditorWorkerHost(),null))}_createEditorWorkerHost(){return{$fhr:(r,p)=>this.fhr(r,p)}}_getOrCreateModelManager(r){return this._modelManager||(this._modelManager=this._register(new ae.WorkerTextModelSyncClient(r,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(r,p=!1){if(this._disposed)return Promise.reject((0,d.aD)());const L=await this._getProxy();return this._getOrCreateModelManager(L).ensureSyncedResources(r,p),L}async textualSuggest(r,p,L){const V=await this.workerWithSyncedResources(r),X=L.source,ge=L.flags;return V.$textualSuggest(r.map(De=>De.toString()),p,X,ge)}dispose(){super.dispose(),this._disposed=!0}};_t=Pe([ye(2,K.IModelService)],_t);var ot=c(56491),Pt=c(77714),Wt=c(41403),Rt=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},at=function(de,r){return function(p,L){r(p,L,de)}};let Xe=class extends P.jG{constructor(r){super(),this._themeService=r,this._onWillCreateCodeEditor=this._register(new ot.vl),this._onCodeEditorAdd=this._register(new ot.vl),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new ot.vl),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new ot.vl),this._onDiffEditorAdd=this._register(new ot.vl),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new ot.vl),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new Pt.w,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(r){this._codeEditors[r.getId()]=r,this._onCodeEditorAdd.fire(r)}removeCodeEditor(r){delete this._codeEditors[r.getId()]&&this._onCodeEditorRemove.fire(r)}listCodeEditors(){return Object.keys(this._codeEditors).map(r=>this._codeEditors[r])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(r){this._diffEditors[r.getId()]=r,this._onDiffEditorAdd.fire(r)}listDiffEditors(){return Object.keys(this._diffEditors).map(r=>this._diffEditors[r])}getFocusedCodeEditor(){let r=null;const p=this.listCodeEditors();for(const L of p){if(L.hasTextFocus())return L;L.hasWidgetFocus()&&(r=L)}return r}removeDecorationType(r){const p=this._decorationOptionProviders.get(r);p&&(p.refCount--,p.refCount<=0&&(this._decorationOptionProviders.delete(r),p.dispose(),this.listCodeEditors().forEach(L=>L.removeDecorationsByType(r))))}setModelProperty(r,p,L){const V=r.toString();let X;this._modelProperties.has(V)?X=this._modelProperties.get(V):(X=new Map,this._modelProperties.set(V,X)),X.set(p,L)}getModelProperty(r,p){const L=r.toString();if(this._modelProperties.has(L))return this._modelProperties.get(L).get(p)}async openCodeEditor(r,p,L){for(const V of this._codeEditorOpenHandlers){const X=await V(r,p,L);if(X!==null)return X}return null}registerCodeEditorOpenHandler(r){const p=this._codeEditorOpenHandlers.unshift(r);return(0,P.s)(p)}};Xe=Rt([at(0,Wt.Gy)],Xe);class pe{constructor(r){this._styleSheet=r}}var te=c(25894),oe=c(73429),Te=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},Ve=function(de,r){return function(p,L){r(p,L,de)}};let We=class extends Xe{constructor(r,p){super(p),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=r.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(L,V,X)=>V?this.doOpenEditor(V,L):null))}_checkContextKey(){let r=!1;for(const p of this.listCodeEditors())if(!p.isSimpleWidget){r=!0;break}this._editorIsOpen.set(r)}setActiveCodeEditor(r){this._activeCodeEditor=r}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(r,p){if(!this.findModel(r,p.resource)){if(p.resource){const X=p.resource.scheme;if(X===m.ny.http||X===m.ny.https)return(0,Y.CE)(p.resource.toString()),r}return null}const V=p.options?p.options.selection:null;if(V)if(typeof V.endLineNumber=="number"&&typeof V.endColumn=="number")r.setSelection(V),r.revealRangeInCenter(V,1);else{const X={lineNumber:V.startLineNumber,column:V.startColumn};r.setPosition(X),r.revealPositionInCenter(X,1)}return r}findModel(r,p){const L=r.getModel();return L&&L.uri.toString()!==p.toString()?null:L}};We=Te([Ve(0,te.fN),Ve(1,Wt.Gy)],We),(0,oe.v)(I.T,We,0);var dt=c(81545);const Ye=(0,dt.u1)("layoutService");var mt=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},Dt=function(de,r){return function(p,L){r(p,L,de)}};let Se=class{get mainContainer(){return(0,S.Fy)(this._codeEditorService.listCodeEditors())?.getContainerDomNode()??U.G.document.body}get activeContainer(){return(this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor())?.getContainerDomNode()??this.mainContainer}get mainContainerDimension(){return Y.tG(this.mainContainer)}get activeContainerDimension(){return Y.tG(this.activeContainer)}get containers(){return(0,S.Yc)(this._codeEditorService.listCodeEditors().map(r=>r.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){this._codeEditorService.getFocusedCodeEditor()?.focus()}constructor(r){this._codeEditorService=r,this.onDidLayoutMainContainer=ot.Jh.None,this.onDidLayoutActiveContainer=ot.Jh.None,this.onDidLayoutContainer=ot.Jh.None,this.onDidChangeActiveContainer=ot.Jh.None,this.onDidAddContainer=ot.Jh.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};Se=mt([Dt(0,I.T)],Se);let we=class extends Se{get mainContainer(){return this._container}constructor(r,p){super(p),this._container=r}};we=mt([Dt(1,I.T)],we),(0,oe.v)(Ye,Se,1);var Xt=c(49048),ri=c(39726),ke=c(22250),Z=c(30894),Fe=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},pt=function(de,r){return function(p,L){r(p,L,de)}};const et=!1;function Zt(de){return de.scheme===m.ny.file?de.fsPath:de.path}let bi=0;class ci{constructor(r,p,L,V,X,ge,De){this.id=++bi,this.type=0,this.actual=r,this.label=r.label,this.confirmBeforeUndo=r.confirmBeforeUndo||!1,this.resourceLabel=p,this.strResource=L,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=V,this.groupOrder=X,this.sourceId=ge,this.sourceOrder=De,this.isValid=!0}setValid(r){this.isValid=r}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Oi{constructor(r,p){this.resourceLabel=r,this.reason=p}}class Ii{constructor(){this.elements=new Map}createMessage(){const r=[],p=[];for(const[,V]of this.elements)(V.reason===0?r:p).push(V.resourceLabel);const L=[];return r.length>0&&L.push(D.kg({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",r.join(", "))),p.length>0&&L.push(D.kg({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",p.join(", "))),L.join(`
`)}get size(){return this.elements.size}has(r){return this.elements.has(r)}set(r,p){this.elements.set(r,p)}delete(r){return this.elements.delete(r)}}class yi{constructor(r,p,L,V,X,ge,De){this.id=++bi,this.type=1,this.actual=r,this.label=r.label,this.confirmBeforeUndo=r.confirmBeforeUndo||!1,this.resourceLabels=p,this.strResources=L,this.groupId=V,this.groupOrder=X,this.sourceId=ge,this.sourceOrder=De,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(r,p,L){this.removedResources||(this.removedResources=new Ii),this.removedResources.has(p)||this.removedResources.set(p,new Oi(r,L))}setValid(r,p,L){L?this.invalidatedResources&&(this.invalidatedResources.delete(p),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new Ii),this.invalidatedResources.has(p)||this.invalidatedResources.set(p,new Oi(r,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Vt{constructor(r,p){this.resourceLabel=r,this.strResource=p,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const r of this._past)r.type===1&&r.removeResource(this.resourceLabel,this.strResource,0);for(const r of this._future)r.type===1&&r.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const r=[];r.push(`* ${this.strResource}:`);for(let p=0;p<this._past.length;p++)r.push(`   * [UNDO] ${this._past[p]}`);for(let p=this._future.length-1;p>=0;p--)r.push(`   * [REDO] ${this._future[p]}`);return r.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(r,p){r.type===1?r.setValid(this.resourceLabel,this.strResource,p):r.setValid(p)}setElementsValidFlag(r,p){for(const L of this._past)p(L.actual)&&this._setElementValidFlag(L,r);for(const L of this._future)p(L.actual)&&this._setElementValidFlag(L,r)}pushElement(r){for(const p of this._future)p.type===1&&p.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(r),this.versionId++}createSnapshot(r){const p=[];for(let L=0,V=this._past.length;L<V;L++)p.push(this._past[L].id);for(let L=this._future.length-1;L>=0;L--)p.push(this._future[L].id);return new Z.To(r,p)}restoreSnapshot(r){const p=r.elements.length;let L=!0,V=0,X=-1;for(let De=0,$e=this._past.length;De<$e;De++,V++){const tt=this._past[De];L&&(V>=p||tt.id!==r.elements[V])&&(L=!1,X=0),!L&&tt.type===1&&tt.removeResource(this.resourceLabel,this.strResource,0)}let ge=-1;for(let De=this._future.length-1;De>=0;De--,V++){const $e=this._future[De];L&&(V>=p||$e.id!==r.elements[V])&&(L=!1,ge=De),!L&&$e.type===1&&$e.removeResource(this.resourceLabel,this.strResource,0)}X!==-1&&(this._past=this._past.slice(0,X)),ge!==-1&&(this._future=this._future.slice(ge+1)),this.versionId++}getElements(){const r=[],p=[];for(const L of this._past)r.push(L.actual);for(const L of this._future)p.push(L.actual);return{past:r,future:p}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(r,p){for(let L=this._past.length-1;L>=0;L--)if(this._past[L]===r){p.has(this.strResource)?this._past[L]=p.get(this.strResource):this._past.splice(L,1);break}this.versionId++}splitFutureWorkspaceElement(r,p){for(let L=this._future.length-1;L>=0;L--)if(this._future[L]===r){p.has(this.strResource)?this._future[L]=p.get(this.strResource):this._future.splice(L,1);break}this.versionId++}moveBackward(r){this._past.pop(),this._future.push(r),this.versionId++}moveForward(r){this._future.pop(),this._past.push(r),this.versionId++}}class _n{constructor(r){this.editStacks=r,this._versionIds=[];for(let p=0,L=this.editStacks.length;p<L;p++)this._versionIds[p]=this.editStacks[p].versionId}isValid(){for(let r=0,p=this.editStacks.length;r<p;r++)if(this._versionIds[r]!==this.editStacks[r].versionId)return!1;return!0}}const oi=new Vt("","");oi.locked=!0;let Ne=class{constructor(r,p){this._dialogService=r,this._notificationService=p,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(r){for(const p of this._uriComparisonKeyComputers)if(p[0]===r.scheme)return p[1].getComparisonKey(r);return r.toString()}_print(r){const p=[];for(const L of this._editStacks)p.push(L[1].toString())}pushElement(r,p=Z.I_.None,L=Z.Ym.None){if(r.type===0){const V=Zt(r.resource),X=this.getUriComparisonKey(r.resource);this._pushElement(new ci(r,V,X,p.id,p.nextOrder(),L.id,L.nextOrder()))}else{const V=new Set,X=[],ge=[];for(const De of r.resources){const $e=Zt(De),tt=this.getUriComparisonKey(De);V.has(tt)||(V.add(tt),X.push($e),ge.push(tt))}X.length===1?this._pushElement(new ci(r,X[0],ge[0],p.id,p.nextOrder(),L.id,L.nextOrder())):this._pushElement(new yi(r,X,ge,p.id,p.nextOrder(),L.id,L.nextOrder()))}et&&this._print("pushElement")}_pushElement(r){for(let p=0,L=r.strResources.length;p<L;p++){const V=r.resourceLabels[p],X=r.strResources[p];let ge;this._editStacks.has(X)?ge=this._editStacks.get(X):(ge=new Vt(V,X),this._editStacks.set(X,ge)),ge.pushElement(r)}}getLastElement(r){const p=this.getUriComparisonKey(r);if(this._editStacks.has(p)){const L=this._editStacks.get(p);if(L.hasFutureElements())return null;const V=L.getClosestPastElement();return V?V.actual:null}return null}_splitPastWorkspaceElement(r,p){const L=r.actual.split(),V=new Map;for(const X of L){const ge=Zt(X.resource),De=this.getUriComparisonKey(X.resource),$e=new ci(X,ge,De,0,0,0,0);V.set($e.strResource,$e)}for(const X of r.strResources){if(p&&p.has(X))continue;this._editStacks.get(X).splitPastWorkspaceElement(r,V)}}_splitFutureWorkspaceElement(r,p){const L=r.actual.split(),V=new Map;for(const X of L){const ge=Zt(X.resource),De=this.getUriComparisonKey(X.resource),$e=new ci(X,ge,De,0,0,0,0);V.set($e.strResource,$e)}for(const X of r.strResources){if(p&&p.has(X))continue;this._editStacks.get(X).splitFutureWorkspaceElement(r,V)}}removeElements(r){const p=typeof r=="string"?r:this.getUriComparisonKey(r);this._editStacks.has(p)&&(this._editStacks.get(p).dispose(),this._editStacks.delete(p)),et&&this._print("removeElements")}setElementsValidFlag(r,p,L){const V=this.getUriComparisonKey(r);this._editStacks.has(V)&&this._editStacks.get(V).setElementsValidFlag(p,L),et&&this._print("setElementsValidFlag")}createSnapshot(r){const p=this.getUriComparisonKey(r);return this._editStacks.has(p)?this._editStacks.get(p).createSnapshot(r):new Z.To(r,[])}restoreSnapshot(r){const p=this.getUriComparisonKey(r.resource);if(this._editStacks.has(p)){const L=this._editStacks.get(p);L.restoreSnapshot(r),!L.hasPastElements()&&!L.hasFutureElements()&&(L.dispose(),this._editStacks.delete(p))}et&&this._print("restoreSnapshot")}getElements(r){const p=this.getUriComparisonKey(r);return this._editStacks.has(p)?this._editStacks.get(p).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(r){if(!r)return[null,null];let p=null,L=null;for(const[V,X]of this._editStacks){const ge=X.getClosestPastElement();ge&&ge.sourceId===r&&(!p||ge.sourceOrder>p.sourceOrder)&&(p=ge,L=V)}return[p,L]}canUndo(r){if(r instanceof Z.Ym){const[,L]=this._findClosestUndoElementWithSource(r.id);return!!L}const p=this.getUriComparisonKey(r);return this._editStacks.has(p)?this._editStacks.get(p).hasPastElements():!1}_onError(r,p){(0,d.dz)(r);for(const L of p.strResources)this.removeElements(L);this._notificationService.error(r)}_acquireLocks(r){for(const p of r.editStacks)if(p.locked)throw new Error("Cannot acquire edit stack lock");for(const p of r.editStacks)p.locked=!0;return()=>{for(const p of r.editStacks)p.locked=!1}}_safeInvokeWithLocks(r,p,L,V,X){const ge=this._acquireLocks(L);let De;try{De=p()}catch($e){return ge(),V.dispose(),this._onError($e,r)}return De?De.then(()=>(ge(),V.dispose(),X()),$e=>(ge(),V.dispose(),this._onError($e,r))):(ge(),V.dispose(),X())}async _invokeWorkspacePrepare(r){if(typeof r.actual.prepareUndoRedo>"u")return P.jG.None;const p=r.actual.prepareUndoRedo();return typeof p>"u"?P.jG.None:p}_invokeResourcePrepare(r,p){if(r.actual.type!==1||typeof r.actual.prepareUndoRedo>"u")return p(P.jG.None);const L=r.actual.prepareUndoRedo();return L?(0,P.Xm)(L)?p(L):L.then(V=>p(V)):p(P.jG.None)}_getAffectedEditStacks(r){const p=[];for(const L of r.strResources)p.push(this._editStacks.get(L)||oi);return new _n(p)}_tryToSplitAndUndo(r,p,L,V){if(p.canSplit())return this._splitPastWorkspaceElement(p,L),this._notificationService.warn(V),new gt(this._undo(r,0,!0));for(const X of p.strResources)this.removeElements(X);return this._notificationService.warn(V),new gt}_checkWorkspaceUndo(r,p,L,V){if(p.removedResources)return this._tryToSplitAndUndo(r,p,p.removedResources,D.kg({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",p.label,p.removedResources.createMessage()));if(V&&p.invalidatedResources)return this._tryToSplitAndUndo(r,p,p.invalidatedResources,D.kg({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",p.label,p.invalidatedResources.createMessage()));const X=[];for(const De of L.editStacks)De.getClosestPastElement()!==p&&X.push(De.resourceLabel);if(X.length>0)return this._tryToSplitAndUndo(r,p,null,D.kg({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",p.label,X.join(", ")));const ge=[];for(const De of L.editStacks)De.locked&&ge.push(De.resourceLabel);return ge.length>0?this._tryToSplitAndUndo(r,p,null,D.kg({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",p.label,ge.join(", "))):L.isValid()?null:this._tryToSplitAndUndo(r,p,null,D.kg({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",p.label))}_workspaceUndo(r,p,L){const V=this._getAffectedEditStacks(p),X=this._checkWorkspaceUndo(r,p,V,!1);return X?X.returnValue:this._confirmAndExecuteWorkspaceUndo(r,p,V,L)}_isPartOfUndoGroup(r){if(!r.groupId)return!1;for(const[,p]of this._editStacks){const L=p.getClosestPastElement();if(L){if(L===r){const V=p.getSecondClosestPastElement();if(V&&V.groupId===r.groupId)return!0}if(L.groupId===r.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(r,p,L,V){if(p.canSplit()&&!this._isPartOfUndoGroup(p)){let De;(function(ft){ft[ft.All=0]="All",ft[ft.This=1]="This",ft[ft.Cancel=2]="Cancel"})(De||(De={}));const{result:$e}=await this._dialogService.prompt({type:Xt.A.Info,message:D.kg("confirmWorkspace","Would you like to undo '{0}' across all files?",p.label),buttons:[{label:D.kg({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",L.editStacks.length),run:()=>De.All},{label:D.kg({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>De.This}],cancelButton:{run:()=>De.Cancel}});if($e===De.Cancel)return;if($e===De.This)return this._splitPastWorkspaceElement(p,null),this._undo(r,0,!0);const tt=this._checkWorkspaceUndo(r,p,L,!1);if(tt)return tt.returnValue;V=!0}let X;try{X=await this._invokeWorkspacePrepare(p)}catch(De){return this._onError(De,p)}const ge=this._checkWorkspaceUndo(r,p,L,!0);if(ge)return X.dispose(),ge.returnValue;for(const De of L.editStacks)De.moveBackward(p);return this._safeInvokeWithLocks(p,()=>p.actual.undo(),L,X,()=>this._continueUndoInGroup(p.groupId,V))}_resourceUndo(r,p,L){if(!p.isValid){r.flushAllElements();return}if(r.locked){const V=D.kg({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",p.label);this._notificationService.warn(V);return}return this._invokeResourcePrepare(p,V=>(r.moveBackward(p),this._safeInvokeWithLocks(p,()=>p.actual.undo(),new _n([r]),V,()=>this._continueUndoInGroup(p.groupId,L))))}_findClosestUndoElementInGroup(r){if(!r)return[null,null];let p=null,L=null;for(const[V,X]of this._editStacks){const ge=X.getClosestPastElement();ge&&ge.groupId===r&&(!p||ge.groupOrder>p.groupOrder)&&(p=ge,L=V)}return[p,L]}_continueUndoInGroup(r,p){if(!r)return;const[,L]=this._findClosestUndoElementInGroup(r);if(L)return this._undo(L,0,p)}undo(r){if(r instanceof Z.Ym){const[,p]=this._findClosestUndoElementWithSource(r.id);return p?this._undo(p,r.id,!1):void 0}return typeof r=="string"?this._undo(r,0,!1):this._undo(this.getUriComparisonKey(r),0,!1)}_undo(r,p=0,L){if(!this._editStacks.has(r))return;const V=this._editStacks.get(r),X=V.getClosestPastElement();if(!X)return;if(X.groupId){const[De,$e]=this._findClosestUndoElementInGroup(X.groupId);if(X!==De&&$e)return this._undo($e,p,L)}if((X.sourceId!==p||X.confirmBeforeUndo)&&!L)return this._confirmAndContinueUndo(r,p,X);try{return X.type===1?this._workspaceUndo(r,X,L):this._resourceUndo(V,X,L)}finally{et&&this._print("undo")}}async _confirmAndContinueUndo(r,p,L){if((await this._dialogService.confirm({message:D.kg("confirmDifferentSource","Would you like to undo '{0}'?",L.label),primaryButton:D.kg({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:D.kg("confirmDifferentSource.no","No")})).confirmed)return this._undo(r,p,!0)}_findClosestRedoElementWithSource(r){if(!r)return[null,null];let p=null,L=null;for(const[V,X]of this._editStacks){const ge=X.getClosestFutureElement();ge&&ge.sourceId===r&&(!p||ge.sourceOrder<p.sourceOrder)&&(p=ge,L=V)}return[p,L]}canRedo(r){if(r instanceof Z.Ym){const[,L]=this._findClosestRedoElementWithSource(r.id);return!!L}const p=this.getUriComparisonKey(r);return this._editStacks.has(p)?this._editStacks.get(p).hasFutureElements():!1}_tryToSplitAndRedo(r,p,L,V){if(p.canSplit())return this._splitFutureWorkspaceElement(p,L),this._notificationService.warn(V),new gt(this._redo(r));for(const X of p.strResources)this.removeElements(X);return this._notificationService.warn(V),new gt}_checkWorkspaceRedo(r,p,L,V){if(p.removedResources)return this._tryToSplitAndRedo(r,p,p.removedResources,D.kg({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",p.label,p.removedResources.createMessage()));if(V&&p.invalidatedResources)return this._tryToSplitAndRedo(r,p,p.invalidatedResources,D.kg({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",p.label,p.invalidatedResources.createMessage()));const X=[];for(const De of L.editStacks)De.getClosestFutureElement()!==p&&X.push(De.resourceLabel);if(X.length>0)return this._tryToSplitAndRedo(r,p,null,D.kg({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",p.label,X.join(", ")));const ge=[];for(const De of L.editStacks)De.locked&&ge.push(De.resourceLabel);return ge.length>0?this._tryToSplitAndRedo(r,p,null,D.kg({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",p.label,ge.join(", "))):L.isValid()?null:this._tryToSplitAndRedo(r,p,null,D.kg({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",p.label))}_workspaceRedo(r,p){const L=this._getAffectedEditStacks(p),V=this._checkWorkspaceRedo(r,p,L,!1);return V?V.returnValue:this._executeWorkspaceRedo(r,p,L)}async _executeWorkspaceRedo(r,p,L){let V;try{V=await this._invokeWorkspacePrepare(p)}catch(ge){return this._onError(ge,p)}const X=this._checkWorkspaceRedo(r,p,L,!0);if(X)return V.dispose(),X.returnValue;for(const ge of L.editStacks)ge.moveForward(p);return this._safeInvokeWithLocks(p,()=>p.actual.redo(),L,V,()=>this._continueRedoInGroup(p.groupId))}_resourceRedo(r,p){if(!p.isValid){r.flushAllElements();return}if(r.locked){const L=D.kg({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",p.label);this._notificationService.warn(L);return}return this._invokeResourcePrepare(p,L=>(r.moveForward(p),this._safeInvokeWithLocks(p,()=>p.actual.redo(),new _n([r]),L,()=>this._continueRedoInGroup(p.groupId))))}_findClosestRedoElementInGroup(r){if(!r)return[null,null];let p=null,L=null;for(const[V,X]of this._editStacks){const ge=X.getClosestFutureElement();ge&&ge.groupId===r&&(!p||ge.groupOrder<p.groupOrder)&&(p=ge,L=V)}return[p,L]}_continueRedoInGroup(r){if(!r)return;const[,p]=this._findClosestRedoElementInGroup(r);if(p)return this._redo(p)}redo(r){if(r instanceof Z.Ym){const[,p]=this._findClosestRedoElementWithSource(r.id);return p?this._redo(p):void 0}return typeof r=="string"?this._redo(r):this._redo(this.getUriComparisonKey(r))}_redo(r){if(!this._editStacks.has(r))return;const p=this._editStacks.get(r),L=p.getClosestFutureElement();if(L){if(L.groupId){const[V,X]=this._findClosestRedoElementInGroup(L.groupId);if(L!==V&&X)return this._redo(X)}try{return L.type===1?this._workspaceRedo(r,L):this._resourceRedo(p,L)}finally{et&&this._print("redo")}}}};Ne=Fe([pt(0,ri.X),pt(1,ke.Ot)],Ne);class gt{constructor(r){this.returnValue=r}}(0,oe.v)(Z.$D,Ne,1);var ei=c(34771),ai=c(75817),Ci=c(80301),wi=c(19867),ji=c(13199),Di=c(4879),dn=c(87386),nn=c(54752),Dn=c(59890),Mi=c(62385),Zn=c(74990),us=c(73659),xs=c(53897),Wn=c(90692),Rn=c(73240),Bn=c(78690),ws=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},Ln=function(de,r){return function(p,L){r(p,L,de)}};const Qn=Y.$;let hi=class extends Mi.x{get _targetWindow(){return Y.zk(this._target.targetElements[0])}get _targetDocumentElement(){return Y.zk(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(r){this._isLocked!==r&&(this._isLocked=r,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(r,p,L,V,X,ge){super(),this._keybindingService=p,this._configurationService=L,this._openerService=V,this._instantiationService=X,this._accessibilityService=ge,this._messageListeners=new P.Cm,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new ot.vl),this._onRequestLayout=this._register(new ot.vl),this._linkHandler=r.linkHandler||(Jt=>(0,us.i)(this._openerService,Jt,(0,xs.VS)(r.content)?r.content.isTrusted:void 0)),this._target="targetElements"in r.target?r.target:new ui(r.target),this._hoverPointer=r.appearance?.showPointer?Qn("div.workbench-hover-pointer"):void 0,this._hover=this._register(new Dn.N4),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),r.appearance?.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),r.appearance?.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),r.additionalClasses&&this._hover.containerDomNode.classList.add(...r.additionalClasses),r.position?.forcePosition&&(this._forcePosition=!0),r.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=r.position?.hoverPosition??3,this.onmousedown(this._hover.containerDomNode,Jt=>Jt.stopPropagation()),this.onkeydown(this._hover.containerDomNode,Jt=>{Jt.equals(9)&&this.dispose()}),this._register(Y.ko(this._targetWindow,"blur",()=>this.dispose()));const De=Qn("div.hover-row.markdown-hover"),$e=Qn("div.hover-contents");if(typeof r.content=="string")$e.textContent=r.content,$e.style.whiteSpace="pre-wrap";else if(Y.sb(r.content))$e.appendChild(r.content),$e.classList.add("html-hover-contents");else{const Jt=r.content,_i=this._instantiationService.createInstance(us.T,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||u.jU.fontFamily}),{element:Gi}=_i.render(Jt,{actionHandler:{callback:kn=>this._linkHandler(kn),disposables:this._messageListeners},asyncRenderCallback:()=>{$e.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});$e.appendChild(Gi)}if(De.appendChild($e),this._hover.contentsDomNode.appendChild(De),r.actions&&r.actions.length>0){const Jt=Qn("div.hover-row.status-bar"),_i=Qn("div.actions");r.actions.forEach(Gi=>{const kn=this._keybindingService.lookupKeybinding(Gi.commandId),Gn=kn?kn.getLabel():null;Dn.jQ.render(_i,{label:Gi.label,commandId:Gi.commandId,run:Pn=>{Gi.run(Pn),this.dispose()},iconClass:Gi.iconClass},Gn)}),Jt.appendChild(_i),this._hover.containerDomNode.appendChild(Jt)}this._hoverContainer=Qn("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let tt;if(r.actions&&r.actions.length>0?tt=!1:r.persistence?.hideOnHover===void 0?tt=typeof r.content=="string"||(0,xs.VS)(r.content)&&!r.content.value.includes("](")&&!r.content.value.includes("</a>"):tt=r.persistence.hideOnHover,r.appearance?.showHoverHint){const Jt=Qn("div.hover-row.status-bar"),_i=Qn("div.info");_i.textContent=(0,D.kg)("hoverhint","Hold {0} key to mouse over",Wn.zx?"Option":"Alt"),Jt.appendChild(_i),this._hover.containerDomNode.appendChild(Jt)}const ft=[...this._target.targetElements];tt||ft.push(this._hoverContainer);const Nt=this._register(new vt(ft));if(this._register(Nt.onMouseOut(()=>{this._isLocked||this.dispose()})),tt){const Jt=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new vt(Jt)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=Nt}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const r=this._hover.containerDomNode,p=this.findLastFocusableChild(this._hover.containerDomNode);if(p){const L=Y.Hs(this._hoverContainer,Qn("div")),V=Y.BC(this._hoverContainer,Qn("div"));L.tabIndex=0,V.tabIndex=0,this._register(Y.ko(V,"focus",X=>{r.focus(),X.preventDefault()})),this._register(Y.ko(L,"focus",X=>{p.focus(),X.preventDefault()}))}}findLastFocusableChild(r){if(r.hasChildNodes())for(let p=0;p<r.childNodes.length;p++){const L=r.childNodes.item(r.childNodes.length-p-1);if(L.nodeType===L.ELEMENT_NODE){const X=L;if(typeof X.tabIndex=="number"&&X.tabIndex>=0)return X}const V=this.findLastFocusableChild(L);if(V)return V}}render(r){r.appendChild(this._hoverContainer);const L=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&(0,Dn.vr)(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel());L&&(0,Bn.h5)(L),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const r=ft=>{const Nt=Y.mU(ft),Jt=ft.getBoundingClientRect();return{top:Jt.top*Nt,bottom:Jt.bottom*Nt,right:Jt.right*Nt,left:Jt.left*Nt}},p=this._target.targetElements.map(ft=>r(ft)),{top:L,right:V,bottom:X,left:ge}=p[0],De=V-ge,$e=X-L,tt={top:L,right:V,bottom:X,left:ge,width:De,height:$e,center:{x:ge+De/2,y:L+$e/2}};if(this.adjustHorizontalHoverPosition(tt),this.adjustVerticalHoverPosition(tt),this.adjustHoverMaxHeight(tt),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:tt.left+=3,tt.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:tt.left-=3,tt.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:tt.top+=3,tt.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:tt.top-=3,tt.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}tt.center.x=tt.left+De/2,tt.center.y=tt.top+$e/2}this.computeXCordinate(tt),this.computeYCordinate(tt),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(tt)),this._hover.onContentsChanged()}computeXCordinate(r){const p=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=r.right:this._hoverPosition===0?this._x=r.left-p:(this._hoverPointer?this._x=r.center.x-this._hover.containerDomNode.clientWidth/2:this._x=r.left,this._x+p>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-p-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=r.left+2)}computeYCordinate(r){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=r.top:this._hoverPosition===2?this._y=r.bottom-2:this._hoverPointer?this._y=r.center.y+this._hover.containerDomNode.clientHeight/2:this._y=r.bottom,this._y>this._targetWindow.innerHeight&&(this._y=r.bottom)}adjustHorizontalHoverPosition(r){if(this._target.x!==void 0)return;const p=this._hoverPointer?3:0;if(this._forcePosition){const L=p+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-r.right-L}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${r.left-L}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-r.right<this._hover.containerDomNode.clientWidth+p&&(r.left>=this._hover.containerDomNode.clientWidth+p?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(r.left<this._hover.containerDomNode.clientWidth+p&&(this._targetDocumentElement.clientWidth-r.right>=this._hover.containerDomNode.clientWidth+p?this._hoverPosition=1:this._hoverPosition=2),r.left-this._hover.containerDomNode.clientWidth-p<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(r){if(this._target.y!==void 0||this._forcePosition)return;const p=this._hoverPointer?3:0;this._hoverPosition===3?r.top-this._hover.containerDomNode.clientHeight-p<0&&(this._hoverPosition=2):this._hoverPosition===2&&r.bottom+this._hover.containerDomNode.clientHeight+p>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(r){let p=this._targetWindow.innerHeight/2;if(this._forcePosition){const L=(this._hoverPointer?3:0)+2;this._hoverPosition===3?p=Math.min(p,r.top-L):this._hoverPosition===2&&(p=Math.min(p,this._targetWindow.innerHeight-r.bottom-L))}if(this._hover.containerDomNode.style.maxHeight=`${p}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const L=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==L&&(this._hover.contentsDomNode.style.paddingRight=L)}}setHoverPointerPosition(r){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const p=this._hover.containerDomNode.clientHeight;p>r.height?this._hoverPointer.style.top=`${r.center.y-(this._y-p)-3}px`:this._hoverPointer.style.top=`${Math.round(p/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const p=this._hover.containerDomNode.clientWidth;let L=Math.round(p/2)-3;const V=this._x+L;(V<r.left||V>r.right)&&(L=r.center.x-this._x-3),this._hoverPointer.style.left=`${L}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};hi=ws([Ln(1,dn.b),Ln(2,nn.pG),Ln(3,Zn.C),Ln(4,dt._Y),Ln(5,Rn.j)],hi);class vt extends Mi.x{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(r){super(),this._elements=r,this._isMouseIn=!0,this._onMouseOut=this._register(new ot.vl),this._elements.forEach(p=>this.onmouseover(p,()=>this._onTargetMouseOver(p))),this._elements.forEach(p=>this.onmouseleave(p,()=>this._onTargetMouseLeave(p)))}_onTargetMouseOver(r){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(r)}_onTargetMouseLeave(r){this._isMouseIn=!1,this._evaluateMouseState(r)}_evaluateMouseState(r){this._clearEvaluateMouseStateTimeout(r),this._mouseTimeout=Y.zk(r).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(r){this._mouseTimeout&&(Y.zk(r).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class ui{constructor(r){this._element=r,this.targetElements=[this._element]}dispose(){}}var wt=c(15625),In=c(926),Ki=c(94698);function Tt(de){const r=de;return!!r&&typeof r.x=="number"&&typeof r.y=="number"}var $i;(function(de){de[de.AVOID=0]="AVOID",de[de.ALIGN=1]="ALIGN"})($i||($i={}));function St(de,r,p){const L=p.mode===$i.ALIGN?p.offset:p.offset+p.size,V=p.mode===$i.ALIGN?p.offset+p.size:p.offset;return p.position===0?r<=de-L?L:r<=V?V-r:Math.max(de-r,0):r<=V?V-r:r<=de-L?L:0}class yt extends P.jG{static{this.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"]}static{this.BUBBLE_DOWN_EVENTS=["click"]}constructor(r,p){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=P.jG.None,this.toDisposeOnSetContainer=P.jG.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=Y.$(".context-view"),Y.jD(this.view),this.setContainer(r,p),this._register((0,P.s)(()=>this.setContainer(null,1)))}setContainer(r,p){this.useFixedPosition=p!==1;const L=this.useShadowDOM;if(this.useShadowDOM=p===3,!(r===this.container&&L===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,this.shadowRootHostElement?.remove(),this.shadowRootHostElement=null),this.container=null),r)){if(this.container=r,this.useShadowDOM){this.shadowRootHostElement=Y.$(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const X=document.createElement("style");X.textContent=Yt,this.shadowRoot.appendChild(X),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(Y.$("slot"))}else this.container.appendChild(this.view);const V=new P.Cm;yt.BUBBLE_UP_EVENTS.forEach(X=>{V.add(Y.b2(this.container,X,ge=>{this.onDOMEvent(ge,!1)}))}),yt.BUBBLE_DOWN_EVENTS.forEach(X=>{V.add(Y.b2(this.container,X,ge=>{this.onDOMEvent(ge,!0)},!0))}),this.toDisposeOnSetContainer=V}}show(r){this.isVisible()&&this.hide(),Y.w_(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(r.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",Y.WU(this.view),this.toDisposeOnClean=r.render(this.view)||P.jG.None,this.delegate=r,this.doLayout(),this.delegate.focus?.()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(Wn.un&&In.e.pointerEvents)){this.hide();return}this.delegate?.layout?.(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const r=this.delegate.getAnchor();let p;if(Y.sb(r)){const Jt=Y.BK(r),_i=Y.mU(r);p={top:Jt.top*_i,left:Jt.left*_i,width:Jt.width*_i,height:Jt.height*_i}}else Tt(r)?p={top:r.y,left:r.x,width:r.width||1,height:r.height||2}:p={top:r.posy,left:r.posx,width:2,height:2};const L=Y.Tr(this.view),V=Y.OK(this.view),X=this.delegate.anchorPosition||0,ge=this.delegate.anchorAlignment||0,De=this.delegate.anchorAxisAlignment||0;let $e,tt;const ft=Y.fz();if(De===0){const Jt={offset:p.top-ft.pageYOffset,size:p.height,position:X===0?0:1},_i={offset:p.left,size:p.width,position:ge===0?0:1,mode:$i.ALIGN};$e=St(ft.innerHeight,V,Jt)+ft.pageYOffset,Ki.Q.intersects({start:$e,end:$e+V},{start:Jt.offset,end:Jt.offset+Jt.size})&&(_i.mode=$i.AVOID),tt=St(ft.innerWidth,L,_i)}else{const Jt={offset:p.left,size:p.width,position:ge===0?0:1},_i={offset:p.top,size:p.height,position:X===0?0:1,mode:$i.ALIGN};tt=St(ft.innerWidth,L,Jt),Ki.Q.intersects({start:tt,end:tt+L},{start:Jt.offset,end:Jt.offset+Jt.size})&&(_i.mode=$i.AVOID),$e=St(ft.innerHeight,V,_i)+ft.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(X===0?"bottom":"top"),this.view.classList.add(ge===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const Nt=Y.BK(this.container);this.view.style.top=`${$e-(this.useFixedPosition?Y.BK(this.view).top:Nt.top)}px`,this.view.style.left=`${tt-(this.useFixedPosition?Y.BK(this.view).left:Nt.left)}px`,this.view.style.width="initial"}hide(r){const p=this.delegate;this.delegate=null,p?.onHide&&p.onHide(r),this.toDisposeOnClean.dispose(),Y.jD(this.view)}isVisible(){return!!this.delegate}onDOMEvent(r,p){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(r,Y.zk(r).document.activeElement):p&&!Y.QX(r.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}const Yt=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var ii=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},Li=function(de,r){return function(p,L){r(p,L,de)}};let Bi=class extends P.jG{constructor(r){super(),this.layoutService=r,this.contextView=this._register(new yt(this.layoutService.mainContainer,1)),this.layout(),this._register(r.onDidLayoutContainer(()=>this.layout()))}showContextView(r,p,L){let V;p?p===this.layoutService.getContainer((0,Y.zk)(p))?V=1:L?V=3:V=2:V=1,this.contextView.setContainer(p??this.layoutService.activeContainer,V),this.contextView.show(r);const X={close:()=>{this.openContextView===X&&this.hideContextView()}};return this.openContextView=X,X}layout(){this.contextView.layout()}hideContextView(r){this.contextView.hide(r),this.openContextView=void 0}};Bi=ii([Li(0,Ye)],Bi);class Pi extends Bi{getContextViewElement(){return this.contextView.getViewElement()}}var un=c(46204),Cn=c(33902);class sn{constructor(r,p,L){this.hoverDelegate=r,this.target=p,this.fadeInAnimation=L}async update(r,p,L){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let V;if(r===void 0||(0,Cn.Kg)(r)||(0,Y.sb)(r))V=r;else if(!(0,Cn.Tn)(r.markdown))V=r.markdown??r.markdownNotSupportedFallback;else{this._hoverWidget||this.show((0,D.kg)("iconLabel.loading","Loading..."),p,L),this._cancellationTokenSource=new un.Qi;const X=this._cancellationTokenSource.token;if(V=await r.markdown(X),V===void 0&&(V=r.markdownNotSupportedFallback),this.isDisposed||X.isCancellationRequested)return}this.show(V,p,L)}show(r,p,L){const V=this._hoverWidget;if(this.hasContent(r)){const X={content:r,target:this.target,actions:L?.actions,linkHandler:L?.linkHandler,trapFocus:L?.trapFocus,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!V,showHoverHint:L?.appearance?.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(X,p)}V?.dispose()}hasContent(r){return r?(0,xs.VS)(r)?!!r.value:!0:!1}get isDisposed(){return this._hoverWidget?.isDisposed}dispose(){this._hoverWidget?.dispose(),this._cancellationTokenSource?.dispose(!0),this._cancellationTokenSource=void 0}}var yn=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},fs=function(de,r){return function(p,L){r(p,L,de)}};let cs=class extends P.jG{constructor(r,p,L,V,X){super(),this._instantiationService=r,this._keybindingService=L,this._layoutService=V,this._accessibilityService=X,this._managedHovers=new Map,p.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new Bi(this._layoutService))}showHover(r,p,L){if(_s(this._currentHoverOptions)===_s(r)||this._currentHover&&this._currentHoverOptions?.persistence?.sticky)return;this._currentHoverOptions=r,this._lastHoverOptions=r;const V=r.trapFocus||this._accessibilityService.isScreenReaderOptimized(),X=(0,Y.bq)();L||(V&&X?X.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=X):this._lastFocusedElementBeforeOpen=void 0);const ge=new P.Cm,De=this._instantiationService.createInstance(hi,r);if(r.persistence?.sticky&&(De.isLocked=!0),De.onDispose(()=>{this._currentHover?.domNode&&(0,Y.nR)(this._currentHover.domNode)&&this._lastFocusedElementBeforeOpen?.focus(),this._currentHoverOptions===r&&(this._currentHoverOptions=void 0),ge.dispose()},void 0,ge),!r.container){const $e=(0,Y.sb)(r.target)?r.target:r.target.targetElements[0];r.container=this._layoutService.getContainer((0,Y.zk)($e))}if(this._contextViewHandler.showContextView(new Mn(De,p),r.container),De.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,ge),r.persistence?.sticky)ge.add((0,Y.ko)((0,Y.zk)(r.container).document,Y.Bx.MOUSE_DOWN,$e=>{(0,Y.QX)($e.target,De.domNode)||this.doHideHover()}));else{if("targetElements"in r.target)for(const tt of r.target.targetElements)ge.add((0,Y.ko)(tt,Y.Bx.CLICK,()=>this.hideHover()));else ge.add((0,Y.ko)(r.target,Y.Bx.CLICK,()=>this.hideHover()));const $e=(0,Y.bq)();if($e){const tt=(0,Y.zk)($e).document;ge.add((0,Y.ko)($e,Y.Bx.KEY_DOWN,ft=>this._keyDown(ft,De,!!r.persistence?.hideOnKeyDown))),ge.add((0,Y.ko)(tt,Y.Bx.KEY_DOWN,ft=>this._keyDown(ft,De,!!r.persistence?.hideOnKeyDown))),ge.add((0,Y.ko)($e,Y.Bx.KEY_UP,ft=>this._keyUp(ft,De))),ge.add((0,Y.ko)(tt,Y.Bx.KEY_UP,ft=>this._keyUp(ft,De)))}}if("IntersectionObserver"in U.G){const $e=new IntersectionObserver(ft=>this._intersectionChange(ft,De),{threshold:0}),tt="targetElements"in r.target?r.target.targetElements[0]:r.target;$e.observe(tt),ge.add((0,P.s)(()=>$e.disconnect()))}return this._currentHover=De,De}hideHover(){this._currentHover?.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(r,p){r[r.length-1].isIntersecting||p.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(r,p,L){if(r.key==="Alt"){p.isLocked=!0;return}const V=new wt.Z(r);this._keybindingService.resolveKeyboardEvent(V).getSingleModifierDispatchChords().some(ge=>!!ge)||this._keybindingService.softDispatch(V,V.target).kind!==0||L&&(!this._currentHoverOptions?.trapFocus||r.key!=="Tab")&&(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus())}_keyUp(r,p){r.key==="Alt"&&(p.isLocked=!1,p.isMouseIn||(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus()))}setupManagedHover(r,p,L,V){p.setAttribute("custom-hover","true"),p.title!==""&&(p.title="");let X,ge;const De=(Nn,fn)=>{const hs=ge!==void 0;Nn&&(ge?.dispose(),ge=void 0),fn&&(X?.dispose(),X=void 0),hs&&(r.onDidHideHover?.(),ge=void 0)},$e=(Nn,fn,hs,So)=>new C.pc(async()=>{(!ge||ge.isDisposed)&&(ge=new sn(r,hs||p,Nn>0),await ge.update(typeof L=="function"?L():L,fn,{...V,trapFocus:So}))},Nn);let tt=!1;const ft=(0,Y.ko)(p,Y.Bx.MOUSE_DOWN,()=>{tt=!0,De(!0,!0)},!0),Nt=(0,Y.ko)(p,Y.Bx.MOUSE_UP,()=>{tt=!1},!0),Jt=(0,Y.ko)(p,Y.Bx.MOUSE_LEAVE,Nn=>{tt=!1,De(!1,Nn.fromElement===p)},!0),_i=Nn=>{if(X)return;const fn=new P.Cm,hs={targetElements:[p],dispose:()=>{}};if(r.placement===void 0||r.placement==="mouse"){const So=Ts=>{hs.x=Ts.x+10,(0,Y.sb)(Ts.target)&&vs(Ts.target,p)!==p&&De(!0,!0)};fn.add((0,Y.ko)(p,Y.Bx.MOUSE_MOVE,So,!0))}X=fn,!((0,Y.sb)(Nn.target)&&vs(Nn.target,p)!==p)&&fn.add($e(r.delay,!1,hs))},Gi=(0,Y.ko)(p,Y.Bx.MOUSE_OVER,_i,!0),kn=()=>{if(tt||X)return;const Nn={targetElements:[p],dispose:()=>{}},fn=new P.Cm,hs=()=>De(!0,!0);fn.add((0,Y.ko)(p,Y.Bx.BLUR,hs,!0)),fn.add($e(r.delay,!1,Nn)),X=fn};let Gn;const Pn=p.tagName.toLowerCase();Pn!=="input"&&Pn!=="textarea"&&(Gn=(0,Y.ko)(p,Y.Bx.FOCUS,kn,!0));const as={show:Nn=>{De(!1,!0),$e(0,Nn,void 0,Nn)},hide:()=>{De(!0,!0)},update:async(Nn,fn)=>{L=Nn,await ge?.update(L,void 0,fn)},dispose:()=>{this._managedHovers.delete(p),Gi.dispose(),Jt.dispose(),ft.dispose(),Nt.dispose(),Gn?.dispose(),De(!0,!0)}};return this._managedHovers.set(p,as),as}showManagedHover(r){const p=this._managedHovers.get(r);p&&p.show(!0)}dispose(){this._managedHovers.forEach(r=>r.dispose()),super.dispose()}};cs=yn([fs(0,dt._Y),fs(1,Di.Z),fs(2,dn.b),fs(3,Ye),fs(4,Rn.j)],cs);function _s(de){if(de!==void 0)return de?.id??de}class Mn{get anchorPosition(){return this._hover.anchor}constructor(r,p=!1){this._hover=r,this._focus=p,this.layer=1}render(r){return this._hover.render(r),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function vs(de,r){for(r=r??(0,Y.zk)(de).document.body;!de.hasAttribute("custom-hover")&&de!==r;)de=de.parentElement;return de}(0,oe.v)(ji.TN,cs,1),(0,Wt.zy)((de,r)=>{const p=de.getColor(wi.oZ8);p&&(r.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${p.transparent(.5)}; }`),r.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${p.transparent(.5)}; }`))});var Xi=c(46454),Fi=c(69708),os=c(98020),no=c(76350),so=c(69504),co=c(59105),$n=c(93750),Kn=c(41461),Xn=c(96523),zt=c(39642);function le(de){return Object.isFrozen(de)?de:b.ol(de)}class Be{static createEmptyModel(r){return new Be({},[],[],void 0,r)}constructor(r,p,L,V,X){this._contents=r,this._keys=p,this._overrides=L,this.raw=V,this.logService=X,this.overrideConfigurations=new Map}get rawConfiguration(){if(!this._rawConfiguration)if(this.raw?.length){const r=this.raw.map(p=>{if(p instanceof Be)return p;const L=new ht("",this.logService);return L.parseRaw(p),L.configurationModel});this._rawConfiguration=r.reduce((p,L)=>L===p?L:p.merge(L),r[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(r){return r?(0,nn.gD)(this.contents,r):this.contents}inspect(r,p){const L=this;return{get value(){return le(L.rawConfiguration.getValue(r))},get override(){return p?le(L.rawConfiguration.getOverrideValue(r,p)):void 0},get merged(){return le(p?L.rawConfiguration.override(p).getValue(r):L.rawConfiguration.getValue(r))},get overrides(){const V=[];for(const{contents:X,identifiers:ge,keys:De}of L.rawConfiguration.overrides){const $e=new Be(X,De,[],void 0,L.logService).getValue(r);$e!==void 0&&V.push({identifiers:ge,value:$e})}return V.length?le(V):void 0}}}getOverrideValue(r,p){const L=this.getContentsForOverrideIdentifer(p);return L?r?(0,nn.gD)(L,r):L:void 0}override(r){let p=this.overrideConfigurations.get(r);return p||(p=this.createOverrideConfigurationModel(r),this.overrideConfigurations.set(r,p)),p}merge(...r){const p=b.Go(this.contents),L=b.Go(this.overrides),V=[...this.keys],X=this.raw?.length?[...this.raw]:[this];for(const ge of r)if(X.push(...ge.raw?.length?ge.raw:[ge]),!ge.isEmpty()){this.mergeContents(p,ge.contents);for(const De of ge.overrides){const[$e]=L.filter(tt=>S.aI(tt.identifiers,De.identifiers));$e?(this.mergeContents($e.contents,De.contents),$e.keys.push(...De.keys),$e.keys=S.dM($e.keys)):L.push(b.Go(De))}for(const De of ge.keys)V.indexOf(De)===-1&&V.push(De)}return new Be(p,V,L,X.every(ge=>ge instanceof Be)?void 0:X,this.logService)}createOverrideConfigurationModel(r){const p=this.getContentsForOverrideIdentifer(r);if(!p||typeof p!="object"||!Object.keys(p).length)return this;const L={};for(const V of S.dM([...Object.keys(this.contents),...Object.keys(p)])){let X=this.contents[V];const ge=p[V];ge&&(typeof X=="object"&&typeof ge=="object"?(X=b.Go(X),this.mergeContents(X,ge)):X=ge),L[V]=X}return new Be(L,this.keys,this.overrides,void 0,this.logService)}mergeContents(r,p){for(const L of Object.keys(p)){if(L in r&&Cn.Gv(r[L])&&Cn.Gv(p[L])){this.mergeContents(r[L],p[L]);continue}r[L]=b.Go(p[L])}}getContentsForOverrideIdentifer(r){let p=null,L=null;const V=X=>{X&&(L?this.mergeContents(L,X):L=b.Go(X))};for(const X of this.overrides)X.identifiers.length===1&&X.identifiers[0]===r?p=X.contents:X.identifiers.includes(r)&&V(X.contents);return V(p),L}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(r,p){this.updateValue(r,p,!1)}removeValue(r){const p=this.keys.indexOf(r);p!==-1&&(this.keys.splice(p,1),(0,nn.iB)(this.contents,r),Xn.rC.test(r)&&this.overrides.splice(this.overrides.findIndex(L=>S.aI(L.identifiers,(0,Xn.Gv)(r))),1))}updateValue(r,p,L){if((0,nn.kW)(this.contents,r,p,V=>this.logService.error(V)),L=L||this.keys.indexOf(r)===-1,L&&this.keys.push(r),Xn.rC.test(r)){const V=(0,Xn.Gv)(r),X={identifiers:V,keys:Object.keys(this.contents[r]),contents:(0,nn.ad)(this.contents[r],De=>this.logService.error(De))},ge=this.overrides.findIndex(De=>S.aI(De.identifiers,V));ge!==-1?this.overrides[ge]=X:this.overrides.push(X)}}}class ht{constructor(r,p){this._name=r,this.logService=p,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||Be.createEmptyModel(this.logService)}parseRaw(r,p){this._raw=r;const{contents:L,keys:V,overrides:X,restricted:ge,hasExcludedProperties:De}=this.doParseRaw(r,p);this._configurationModel=new Be(L,V,X,De?[r]:void 0,this.logService),this._restrictedConfigurations=ge||[]}doParseRaw(r,p){const L=zt.O.as(Xn.Fd.Configuration).getConfigurationProperties(),V=this.filter(r,L,!0,p);r=V.raw;const X=(0,nn.ad)(r,$e=>this.logService.error(`Conflict in settings file ${this._name}: ${$e}`)),ge=Object.keys(r),De=this.toOverrides(r,$e=>this.logService.error(`Conflict in settings file ${this._name}: ${$e}`));return{contents:X,keys:ge,overrides:De,restricted:V.restricted,hasExcludedProperties:V.hasExcludedProperties}}filter(r,p,L,V){let X=!1;if(!V?.scopes&&!V?.skipRestricted&&!V?.exclude?.length)return{raw:r,restricted:[],hasExcludedProperties:X};const ge={},De=[];for(const $e in r)if(Xn.rC.test($e)&&L){const tt=this.filter(r[$e],p,!1,V);ge[$e]=tt.raw,X=X||tt.hasExcludedProperties,De.push(...tt.restricted)}else{const tt=p[$e],ft=tt?typeof tt.scope<"u"?tt.scope:3:void 0;tt?.restricted&&De.push($e),!V.exclude?.includes($e)&&(V.include?.includes($e)||(ft===void 0||V.scopes===void 0||V.scopes.includes(ft))&&!(V.skipRestricted&&tt?.restricted))?ge[$e]=r[$e]:X=!0}return{raw:ge,restricted:De,hasExcludedProperties:X}}toOverrides(r,p){const L=[];for(const V of Object.keys(r))if(Xn.rC.test(V)){const X={};for(const ge in r[V])X[ge]=r[V][ge];L.push({identifiers:(0,Xn.Gv)(V),keys:Object.keys(X),contents:(0,nn.ad)(X,p)})}return L}}class Ft{constructor(r,p,L,V,X,ge,De,$e,tt,ft,Nt,Jt,_i){this.key=r,this.overrides=p,this._value=L,this.overrideIdentifiers=V,this.defaultConfiguration=X,this.policyConfiguration=ge,this.applicationConfiguration=De,this.userConfiguration=$e,this.localUserConfiguration=tt,this.remoteUserConfiguration=ft,this.workspaceConfiguration=Nt,this.folderConfigurationModel=Jt,this.memoryConfigurationModel=_i}toInspectValue(r){return r?.value!==void 0||r?.override!==void 0||r?.overrides!==void 0?r:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class Ot{constructor(r,p,L,V,X,ge,De,$e,tt,ft){this._defaultConfiguration=r,this._policyConfiguration=p,this._applicationConfiguration=L,this._localUserConfiguration=V,this._remoteUserConfiguration=X,this._workspaceConfiguration=ge,this._folderConfigurations=De,this._memoryConfiguration=$e,this._memoryConfigurationByResource=tt,this.logService=ft,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Kn.fT,this._userConfiguration=null}getValue(r,p,L){return this.getConsolidatedConfigurationModel(r,p,L).getValue(r)}updateValue(r,p,L={}){let V;L.resource?(V=this._memoryConfigurationByResource.get(L.resource),V||(V=Be.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(L.resource,V))):V=this._memoryConfiguration,p===void 0?V.removeValue(r):V.setValue(r,p),L.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(r,p,L){const V=this.getConsolidatedConfigurationModel(r,p,L),X=this.getFolderConfigurationModelForResource(p.resource,L),ge=p.resource?this._memoryConfigurationByResource.get(p.resource)||this._memoryConfiguration:this._memoryConfiguration,De=new Set;for(const $e of V.overrides)for(const tt of $e.identifiers)V.getOverrideValue(r,tt)!==void 0&&De.add(tt);return new Ft(r,p,V.getValue(r),De.size?[...De]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,L?this._workspaceConfiguration:void 0,X||void 0,ge)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(r,p,L){let V=this.getConsolidatedConfigurationModelForResource(p,L);return p.overrideIdentifier&&(V=V.override(p.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(r)!==void 0&&(V=V.merge(this._policyConfiguration)),V}getConsolidatedConfigurationModelForResource({resource:r},p){let L=this.getWorkspaceConsolidatedConfiguration();if(p&&r){const V=p.getFolder(r);V&&(L=this.getFolderConsolidatedConfiguration(V.uri)||L);const X=this._memoryConfigurationByResource.get(r);X&&(L=L.merge(X))}return L}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(r){let p=this._foldersConsolidatedConfigurations.get(r);if(!p){const L=this.getWorkspaceConsolidatedConfiguration(),V=this._folderConfigurations.get(r);V?(p=L.merge(V),this._foldersConsolidatedConfigurations.set(r,p)):p=L}return p}getFolderConfigurationModelForResource(r,p){if(p&&r){const L=p.getFolder(r);if(L)return this._folderConfigurations.get(L.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((r,p)=>{const{contents:L,overrides:V,keys:X}=this._folderConfigurations.get(p);return r.push([p,{contents:L,overrides:V,keys:X}]),r},[])}}static parse(r,p){const L=this.parseConfigurationModel(r.defaults,p),V=this.parseConfigurationModel(r.policy,p),X=this.parseConfigurationModel(r.application,p),ge=this.parseConfigurationModel(r.user,p),De=this.parseConfigurationModel(r.workspace,p),$e=r.folders.reduce((tt,ft)=>(tt.set(w.r.revive(ft[0]),this.parseConfigurationModel(ft[1],p)),tt),new Kn.fT);return new Ot(L,V,X,ge,Be.createEmptyModel(p),De,$e,Be.createEmptyModel(p),new Kn.fT,p)}static parseConfigurationModel(r,p){return new Be(r.contents,r.keys,r.overrides,void 0,p)}}class qt{constructor(r,p,L,V,X){this.change=r,this.previous=p,this.currentConfiguraiton=L,this.currentWorkspace=V,this.logService=X,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const ge of r.keys)this.affectedKeys.add(ge);for(const[,ge]of r.overrides)for(const De of ge)this.affectedKeys.add(De);this._affectsConfigStr=this._marker;for(const ge of this.affectedKeys)this._affectsConfigStr+=ge+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=Ot.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(r,p){const L=this._marker+r,V=this._affectsConfigStr.indexOf(L);if(V<0)return!1;const X=V+L.length;if(X>=this._affectsConfigStr.length)return!1;const ge=this._affectsConfigStr.charCodeAt(X);if(ge!==this._markerCode1&&ge!==this._markerCode2)return!1;if(p){const De=this.previousConfiguration?this.previousConfiguration.getValue(r,p,this.previous?.workspace):void 0,$e=this.currentConfiguraiton.getValue(r,p,this.currentWorkspace);return!b.aI(De,$e)}return!0}}var Si=c(91194);const mi={kind:0},qi={kind:1};function Wi(de,r,p){return{kind:2,commandId:de,commandArgs:r,isBubble:p}}class Ei{constructor(r,p,L){this._log=L,this._defaultKeybindings=r,this._defaultBoundCommands=new Map;for(const V of r){const X=V.command;X&&X.charAt(0)!=="-"&&this._defaultBoundCommands.set(X,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Ei.handleRemovals([].concat(r).concat(p));for(let V=0,X=this._keybindings.length;V<X;V++){const ge=this._keybindings[V];if(ge.chords.length===0)continue;const De=ge.when?.substituteConstants();De&&De.type===0||this._addKeyPress(ge.chords[0],ge)}}static _isTargetedForRemoval(r,p,L){if(p){for(let V=0;V<p.length;V++)if(p[V]!==r.chords[V])return!1}return!(L&&L.type!==1&&(!r.when||!(0,te.jQ)(L,r.when)))}static handleRemovals(r){const p=new Map;for(let V=0,X=r.length;V<X;V++){const ge=r[V];if(ge.command&&ge.command.charAt(0)==="-"){const De=ge.command.substring(1);p.has(De)?p.get(De).push(ge):p.set(De,[ge])}}if(p.size===0)return r;const L=[];for(let V=0,X=r.length;V<X;V++){const ge=r[V];if(!ge.command||ge.command.length===0){L.push(ge);continue}if(ge.command.charAt(0)==="-")continue;const De=p.get(ge.command);if(!De||!ge.isDefault){L.push(ge);continue}let $e=!1;for(const tt of De){const ft=tt.when;if(this._isTargetedForRemoval(ge,tt.chords,ft)){$e=!0;break}}if(!$e){L.push(ge);continue}}return L}_addKeyPress(r,p){const L=this._map.get(r);if(typeof L>"u"){this._map.set(r,[p]),this._addToLookupMap(p);return}for(let V=L.length-1;V>=0;V--){const X=L[V];if(X.command===p.command)continue;let ge=!0;for(let De=1;De<X.chords.length&&De<p.chords.length;De++)if(X.chords[De]!==p.chords[De]){ge=!1;break}ge&&Ei.whenIsEntirelyIncluded(X.when,p.when)&&this._removeFromLookupMap(X)}L.push(p),this._addToLookupMap(p)}_addToLookupMap(r){if(!r.command)return;let p=this._lookupMap.get(r.command);typeof p>"u"?(p=[r],this._lookupMap.set(r.command,p)):p.push(r)}_removeFromLookupMap(r){if(!r.command)return;const p=this._lookupMap.get(r.command);if(!(typeof p>"u")){for(let L=0,V=p.length;L<V;L++)if(p[L]===r){p.splice(L,1);return}}}static whenIsEntirelyIncluded(r,p){return!p||p.type===1?!0:!r||r.type===1?!1:(0,te.M0)(r,p)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(r,p){const L=this._lookupMap.get(r);if(typeof L>"u"||L.length===0)return null;if(L.length===1)return L[0];for(let V=L.length-1;V>=0;V--){const X=L[V];if(p.contextMatchesRules(X.when))return X}return L[L.length-1]}resolve(r,p,L){const V=[...p,L];this._log(`| Resolving ${V}`);const X=this._map.get(V[0]);if(X===void 0)return this._log("\\ No keybinding entries."),mi;let ge=null;if(V.length<2)ge=X;else{ge=[];for(let $e=0,tt=X.length;$e<tt;$e++){const ft=X[$e];if(V.length>ft.chords.length)continue;let Nt=!0;for(let Jt=1;Jt<V.length;Jt++)if(ft.chords[Jt]!==V[Jt]){Nt=!1;break}Nt&&ge.push(ft)}}const De=this._findCommand(r,ge);return De?V.length<De.chords.length?(this._log(`\\ From ${ge.length} keybinding entries, awaiting ${De.chords.length-V.length} more chord(s), when: ${Qi(De.when)}, source: ${on(De)}.`),qi):(this._log(`\\ From ${ge.length} keybinding entries, matched ${De.command}, when: ${Qi(De.when)}, source: ${on(De)}.`),Wi(De.command,De.commandArgs,De.bubble)):(this._log(`\\ From ${ge.length} keybinding entries, no when clauses matched the context.`),mi)}_findCommand(r,p){for(let L=p.length-1;L>=0;L--){const V=p[L];if(Ei._contextMatchesRules(r,V.when))return V}return null}static _contextMatchesRules(r,p){return p?p.evaluate(r):!0}}function Qi(de){return de?`${de.serialize()}`:"no when condition"}function on(de){return de.extensionId?de.isBuiltinExtension?`built-in extension ${de.extensionId}`:`user extension ${de.extensionId}`:de.isDefault?"built-in":"user"}const an=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class Zi extends P.jG{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:ot.Jh.None}get inChordMode(){return this._currentChords.length>0}constructor(r,p,L,V,X){super(),this._contextKeyService=r,this._commandService=p,this._telemetryService=L,this._notificationService=V,this._logService=X,this._onDidUpdateKeybindings=this._register(new ot.vl),this._currentChords=[],this._currentChordChecker=new C.vb,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Et.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new C.pc,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(r){this._logging&&this._logService.info(`[KeybindingService]: ${r}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(r,p){const L=this._getResolver().lookupPrimaryKeybinding(r,p||this._contextKeyService);if(L)return L.resolvedKeybinding}dispatchEvent(r,p){return this._dispatch(r,p)}softDispatch(r,p){this._log("/ Soft dispatching keyboard event");const L=this.resolveKeyboardEvent(r);if(L.hasMultipleChords())return mi;const[V]=L.getDispatchChords();if(V===null)return this._log("\\ Keyboard event cannot be dispatched"),mi;const X=this._contextKeyService.getContext(p),ge=this._currentChords.map(({keypress:De})=>De);return this._getResolver().resolve(X,ge,V)}_scheduleLeaveChordMode(){const r=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-r>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(r,p){switch(this._currentChords.push({keypress:r,label:p}),this._currentChords.length){case 0:throw(0,d.iH)("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(D.kg("first.chord","({0}) was pressed. Waiting for second key of chord...",p));break;default:{const L=this._currentChords.map(({label:V})=>V).join(", ");this._currentChordStatusMessage=this._notificationService.status(D.kg("next.chord","({0}) was pressed. Waiting for next key of chord...",L))}}this._scheduleLeaveChordMode(),Si.M.enabled&&Si.M.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],Si.M.enable()}_dispatch(r,p){return this._doDispatch(this.resolveKeyboardEvent(r),p,!1)}_singleModifierDispatch(r,p){const L=this.resolveKeyboardEvent(r),[V]=L.getSingleModifierDispatchChords();if(V)return this._ignoreSingleModifiers.has(V)?(this._log(`+ Ignoring single modifier ${V} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Et.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Et.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${V}.`),this._currentSingleModifier=V,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):V===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${V} ${V}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(L,p,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${V}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[X]=L.getChords();return this._ignoreSingleModifiers=new Et(X),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(r,p,L=!1){let V=!1;if(r.hasMultipleChords())return!1;let X=null,ge=null;if(L){const[ft]=r.getSingleModifierDispatchChords();X=ft,ge=ft?[ft]:[]}else[X]=r.getDispatchChords(),ge=this._currentChords.map(({keypress:ft})=>ft);if(X===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),V;const De=this._contextKeyService.getContext(p),$e=r.getLabel(),tt=this._getResolver().resolve(De,ge,X);switch(tt.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",$e,"[ No matching keybinding ]"),this.inChordMode){const ft=this._currentChords.map(({label:Nt})=>Nt).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${ft}, ${$e}".`),this._notificationService.status(D.kg("missing.chord","The key combination ({0}, {1}) is not a command.",ft,$e),{hideAfter:10*1e3}),this._leaveChordMode(),V=!0}return V}case 1:return this._logService.trace("KeybindingService#dispatch",$e,"[ Several keybindings match - more chords needed ]"),V=!0,this._expectAnotherChord(X,$e),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),V;case 2:{if(this._logService.trace("KeybindingService#dispatch",$e,`[ Will dispatch command ${tt.commandId} ]`),tt.commandId===null||tt.commandId===""){if(this.inChordMode){const ft=this._currentChords.map(({label:Nt})=>Nt).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${ft}, ${$e}".`),this._notificationService.status(D.kg("missing.chord","The key combination ({0}, {1}) is not a command.",ft,$e),{hideAfter:10*1e3}),this._leaveChordMode(),V=!0}}else{this.inChordMode&&this._leaveChordMode(),tt.isBubble||(V=!0),this._log(`+ Invoking command ${tt.commandId}.`),this._currentlyDispatchingCommandId=tt.commandId;try{typeof tt.commandArgs>"u"?this._commandService.executeCommand(tt.commandId).then(void 0,ft=>this._notificationService.warn(ft)):this._commandService.executeCommand(tt.commandId,tt.commandArgs).then(void 0,ft=>this._notificationService.warn(ft))}finally{this._currentlyDispatchingCommandId=null}an.test(tt.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:tt.commandId,from:"keybinding",detail:r.getUserSettingsLabel()??void 0})}return V}}}mightProducePrintableCharacter(r){return r.ctrlKey||r.metaKey?!1:r.keyCode>=31&&r.keyCode<=56||r.keyCode>=21&&r.keyCode<=30}}class Et{static{this.EMPTY=new Et(null)}constructor(r){this._ctrlKey=r?r.ctrlKey:!1,this._shiftKey=r?r.shiftKey:!1,this._altKey=r?r.altKey:!1,this._metaKey=r?r.metaKey:!1}has(r){switch(r){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}var _e=c(3478);class ue{constructor(r,p,L,V,X,ge,De){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=r,this.chords=r?Ee(r.getDispatchChords()):[],r&&this.chords.length===0&&(this.chords=Ee(r.getSingleModifierDispatchChords())),this.bubble=p?p.charCodeAt(0)===94:!1,this.command=this.bubble?p.substr(1):p,this.commandArgs=L,this.when=V,this.isDefault=X,this.extensionId=ge,this.isBuiltinExtension=De}}function Ee(de){const r=[];for(let p=0,L=de.length;p<L;p++){const V=de[p];if(!V)return[];r.push(V)}return r}var Ie=c(64840),ze=c(47192);class Je extends Xi.z5{constructor(r,p){if(super(),p.length===0)throw(0,d.Qg)("chords");this._os=r,this._chords=p}getLabel(){return ze.Of.toLabel(this._os,this._chords,r=>this._getLabel(r))}getAriaLabel(){return ze.r0.toLabel(this._os,this._chords,r=>this._getAriaLabel(r))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:ze.rr.toLabel(this._os,this._chords,r=>this._getElectronAccelerator(r))}getUserSettingsLabel(){return ze.G$.toLabel(this._os,this._chords,r=>this._getUserSettingsLabel(r))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(r=>this._getChord(r))}_getChord(r){return new Xi.FW(r.ctrlKey,r.shiftKey,r.altKey,r.metaKey,this._getLabel(r),this._getAriaLabel(r))}getDispatchChords(){return this._chords.map(r=>this._getChordDispatch(r))}getSingleModifierDispatchChords(){return this._chords.map(r=>this._getSingleModifierChordDispatch(r))}}class rt extends Je{constructor(r,p){super(p,r)}_keyCodeToUILabel(r){if(this._os===2)switch(r){case 15:return"\u2190";case 16:return"\u2191";case 17:return"\u2192";case 18:return"\u2193"}return Ie.YM.toString(r)}_getLabel(r){return r.isDuplicateModifierCase()?"":this._keyCodeToUILabel(r.keyCode)}_getAriaLabel(r){return r.isDuplicateModifierCase()?"":Ie.YM.toString(r.keyCode)}_getElectronAccelerator(r){return Ie.YM.toElectronAccelerator(r.keyCode)}_getUserSettingsLabel(r){if(r.isDuplicateModifierCase())return"";const p=Ie.YM.toUserSettingsUS(r.keyCode);return p&&p.toLowerCase()}_getChordDispatch(r){return rt.getDispatchStr(r)}static getDispatchStr(r){if(r.isModifierKey())return null;let p="";return r.ctrlKey&&(p+="ctrl+"),r.shiftKey&&(p+="shift+"),r.altKey&&(p+="alt+"),r.metaKey&&(p+="meta+"),p+=Ie.YM.toString(r.keyCode),p}_getSingleModifierChordDispatch(r){return r.keyCode===5&&!r.shiftKey&&!r.altKey&&!r.metaKey?"ctrl":r.keyCode===4&&!r.ctrlKey&&!r.altKey&&!r.metaKey?"shift":r.keyCode===6&&!r.ctrlKey&&!r.shiftKey&&!r.metaKey?"alt":r.keyCode===57&&!r.ctrlKey&&!r.shiftKey&&!r.altKey?"meta":null}static _scanCodeToKeyCode(r){const p=Ie.Fo[r];if(p!==-1)return p;switch(r){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(r){if(!r)return null;if(r instanceof Xi.dG)return r;const p=this._scanCodeToKeyCode(r.scanCode);return p===0?null:new Xi.dG(r.ctrlKey,r.shiftKey,r.altKey,r.metaKey,p)}static resolveKeybinding(r,p){const L=Ee(r.chords.map(V=>this._toKeyCodeChord(V)));return L.length>0?[new rt(L,p)]:[]}}var Ct=c(47484),jt=c(67933),It=c(91090),Ut=c(32182),Bt=c(57352),Kt=c(38266),ct=c(34918),Ht=c(4401),Qt=c(43860),fi=c(4857),en=c(76222),di=c(25334),$t=c(38594),vi=c(7069),Hi=c(80074),Ui=c(38795),Yn=c(13511),En=c(67538),ys=c(91467),zn=c(42640),Hn=c(60317);const ds=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,Vi=/(&amp;)?(&amp;)([^\s&])/g;var mn;(function(de){de[de.Right=0]="Right",de[de.Left=1]="Left"})(mn||(mn={}));var Ri;(function(de){de[de.Above=0]="Above",de[de.Below=1]="Below"})(Ri||(Ri={}));class gs extends Hi.E{constructor(r,p,L,V){r.classList.add("monaco-menu-container"),r.setAttribute("role","presentation");const X=document.createElement("div");X.classList.add("monaco-menu"),X.setAttribute("role","presentation"),super(X,{orientation:1,actionViewItemProvider:tt=>this.doGetActionViewItem(tt,L,ge),context:L.context,actionRunner:L.actionRunner,ariaLabel:L.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Wn.zx||Wn.j9?[10]:[]],keyDown:!0}}),this.menuStyles=V,this.menuElement=X,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(r,V),this._register(vi.q.addTarget(X)),this._register((0,Y.ko)(X,Y.Bx.KEY_DOWN,tt=>{new wt.Z(tt).equals(2)&&tt.preventDefault()})),L.enableMnemonics&&this._register((0,Y.ko)(X,Y.Bx.KEY_DOWN,tt=>{const ft=tt.key.toLocaleLowerCase();if(this.mnemonics.has(ft)){Y.fs.stop(tt,!0);const Nt=this.mnemonics.get(ft);if(Nt.length===1&&(Nt[0]instanceof xn&&Nt[0].container&&this.focusItemByElement(Nt[0].container),Nt[0].onClick(tt)),Nt.length>1){const Jt=Nt.shift();Jt&&Jt.container&&(this.focusItemByElement(Jt.container),Nt.push(Jt)),this.mnemonics.set(ft,Nt)}}})),Wn.j9&&this._register((0,Y.ko)(X,Y.Bx.KEY_DOWN,tt=>{const ft=new wt.Z(tt);ft.equals(14)||ft.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Y.fs.stop(tt,!0)):(ft.equals(13)||ft.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Y.fs.stop(tt,!0))})),this._register((0,Y.ko)(this.domNode,Y.Bx.MOUSE_OUT,tt=>{const ft=tt.relatedTarget;(0,Y.QX)(ft,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),tt.stopPropagation())})),this._register((0,Y.ko)(this.actionsList,Y.Bx.MOUSE_OVER,tt=>{let ft=tt.target;if(!(!ft||!(0,Y.QX)(ft,this.actionsList)||ft===this.actionsList)){for(;ft.parentElement!==this.actionsList&&ft.parentElement!==null;)ft=ft.parentElement;if(ft.classList.contains("action-item")){const Nt=this.focusedItem;this.setFocusedItem(ft),Nt!==this.focusedItem&&this.updateFocus()}}})),this._register(vi.q.addTarget(this.actionsList)),this._register((0,Y.ko)(this.actionsList,vi.B.Tap,tt=>{let ft=tt.initialTarget;if(!(!ft||!(0,Y.QX)(ft,this.actionsList)||ft===this.actionsList)){for(;ft.parentElement!==this.actionsList&&ft.parentElement!==null;)ft=ft.parentElement;if(ft.classList.contains("action-item")){const Nt=this.focusedItem;this.setFocusedItem(ft),Nt!==this.focusedItem&&this.updateFocus()}}}));const ge={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new Yn.MU(X,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const De=this.scrollableElement.getDomNode();De.style.position="",this.styleScrollElement(De,V),this._register((0,Y.ko)(X,vi.B.Change,tt=>{Y.fs.stop(tt,!0);const ft=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:ft-tt.translationY})})),this._register((0,Y.ko)(De,Y.Bx.MOUSE_UP,tt=>{tt.preventDefault()}));const $e=(0,Y.zk)(r);X.style.maxHeight=`${Math.max(10,$e.innerHeight-r.getBoundingClientRect().top-35)}px`,p=p.filter((tt,ft)=>!(L.submenuIds?.has(tt.id)||tt instanceof Qt.wv&&(ft===p.length-1||ft===0||p[ft-1]instanceof Qt.wv))),this.push(p,{icon:!0,label:!0,isMenu:!0}),r.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(tt=>!(tt instanceof ks)).forEach((tt,ft,Nt)=>{tt.updatePositionInSet(ft+1,Nt.length)})}initializeOrUpdateStyleSheet(r,p){this.styleSheet||((0,Y.Cl)(r)?this.styleSheet=(0,Y.li)(r):(gs.globalStyleSheet||(gs.globalStyleSheet=(0,Y.li)()),this.styleSheet=gs.globalStyleSheet)),this.styleSheet.textContent=zi(p,(0,Y.Cl)(r))}styleScrollElement(r,p){const L=p.foregroundColor??"",V=p.backgroundColor??"",X=p.borderColor?`1px solid ${p.borderColor}`:"",ge="5px",De=p.shadowColor?`0 2px 8px ${p.shadowColor}`:"";r.style.outline=X,r.style.borderRadius=ge,r.style.color=L,r.style.backgroundColor=V,r.style.boxShadow=De}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(r){const p=this.focusedItem;this.setFocusedItem(r),p!==this.focusedItem&&this.updateFocus()}setFocusedItem(r){for(let p=0;p<this.actionsList.children.length;p++){const L=this.actionsList.children[p];if(r===L){this.focusedItem=p;break}}}updateFocus(r){super.updateFocus(r,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(r,p,L){if(r instanceof Qt.wv)return new ks(p.context,r,{icon:!0},this.menuStyles);if(r instanceof Qt.YH){const V=new xn(r,r.actions,L,{...p,submenuIds:new Set([...p.submenuIds||[],r.id])},this.menuStyles);if(p.enableMnemonics){const X=V.getMnemonic();if(X&&V.isEnabled()){let ge=[];this.mnemonics.has(X)&&(ge=this.mnemonics.get(X)),ge.push(V),this.mnemonics.set(X,ge)}}return V}else{const V={enableMnemonics:p.enableMnemonics,useEventAsContext:p.useEventAsContext};if(p.getKeyBinding){const ge=p.getKeyBinding(r);if(ge){const De=ge.getLabel();De&&(V.keybinding=De)}}const X=new zs(p.context,r,V,this.menuStyles);if(p.enableMnemonics){const ge=X.getMnemonic();if(ge&&X.isEnabled()){let De=[];this.mnemonics.has(ge)&&(De=this.mnemonics.get(ge)),De.push(X),this.mnemonics.set(ge,De)}}return X}}}class zs extends Ui.EH{constructor(r,p,L,V){if(L.isMenu=!0,super(p,p,L),this.menuStyle=V,this.options=L,this.options.icon=L.icon!==void 0?L.icon:!1,this.options.label=L.label!==void 0?L.label:!0,this.cssClass="",this.options.label&&L.enableMnemonics){const X=this.action.label;if(X){const ge=ds.exec(X);ge&&(this.mnemonic=(ge[1]?ge[1]:ge[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new C.uC(()=>{this.element&&(this._register((0,Y.ko)(this.element,Y.Bx.MOUSE_UP,X=>{if(Y.fs.stop(X,!0),$t.gm){if(new di.P((0,Y.zk)(this.element),X).rightButton)return;this.onClick(X)}else setTimeout(()=>{this.onClick(X)},0)})),this._register((0,Y.ko)(this.element,Y.Bx.CONTEXT_MENU,X=>{Y.fs.stop(X,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(r){super.render(r),this.element&&(this.container=r,this.item=(0,Y.BC)(this.element,(0,Y.$)("a.action-menu-item")),this._action.id===Qt.wv.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=(0,Y.BC)(this.item,(0,Y.$)("span.menu-item-check"+zn.L.asCSSSelector(En.W.menuSelection))),this.check.setAttribute("role","none"),this.label=(0,Y.BC)(this.item,(0,Y.$)("span.action-label")),this.options.label&&this.options.keybinding&&((0,Y.BC)(this.item,(0,Y.$)("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item?.focus(),this.applyStyle()}updatePositionInSet(r,p){this.item&&(this.item.setAttribute("aria-posinset",`${r}`),this.item.setAttribute("aria-setsize",`${p}`))}updateLabel(){if(this.label&&this.options.label){(0,Y.w_)(this.label);let r=(0,Hn.pS)(this.action.label);if(r){const p=Gs(r);this.options.enableMnemonics||(r=p),this.label.setAttribute("aria-label",p.replace(/&&/g,"&"));const L=ds.exec(r);if(L){r=M.ih(r),Vi.lastIndex=0;let V=Vi.exec(r);for(;V&&V[1];)V=Vi.exec(r);const X=ge=>ge.replace(/&amp;&amp;/g,"&amp;");V?this.label.append(M.NB(X(r.substr(0,V.index))," "),(0,Y.$)("u",{"aria-hidden":"true"},V[3]),M.BO(X(r.substr(V.index+V[0].length))," ")):this.label.innerText=X(r).trim(),this.item?.setAttribute("aria-keyshortcuts",(L[1]?L[1]:L[3]).toLocaleLowerCase())}else this.label.innerText=r.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const r=this.action.checked;this.item.classList.toggle("checked",!!r),r!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",r?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const r=this.element&&this.element.classList.contains("focused"),p=r&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,L=r&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,V=r&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",X=r&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=p??"",this.item.style.backgroundColor=L??"",this.item.style.outline=V,this.item.style.outlineOffset=X),this.check&&(this.check.style.color=p??"")}}class xn extends zs{constructor(r,p,L,V,X){super(r,r,V,X),this.submenuActions=p,this.parentData=L,this.submenuOptions=V,this.mysubmenu=null,this.submenuDisposables=this._register(new P.Cm),this.mouseOver=!1,this.expandDirection=V&&V.expandDirection!==void 0?V.expandDirection:{horizontal:mn.Right,vertical:Ri.Below},this.showScheduler=new C.uC(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new C.uC(()=>{this.element&&!(0,Y.QX)((0,Y.bq)(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(r){super.render(r),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=(0,Y.BC)(this.item,(0,Y.$)("span.submenu-indicator"+zn.L.asCSSSelector(En.W.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register((0,Y.ko)(this.element,Y.Bx.KEY_UP,p=>{const L=new wt.Z(p);(L.equals(17)||L.equals(3))&&(Y.fs.stop(p,!0),this.createSubmenu(!0))})),this._register((0,Y.ko)(this.element,Y.Bx.KEY_DOWN,p=>{const L=new wt.Z(p);(0,Y.bq)()===this.item&&(L.equals(17)||L.equals(3))&&Y.fs.stop(p,!0)})),this._register((0,Y.ko)(this.element,Y.Bx.MOUSE_OVER,p=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register((0,Y.ko)(this.element,Y.Bx.MOUSE_LEAVE,p=>{this.mouseOver=!1})),this._register((0,Y.ko)(this.element,Y.Bx.FOCUS_OUT,p=>{this.element&&!(0,Y.QX)((0,Y.bq)(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(r){Y.fs.stop(r,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(r){if(this.parentData.submenu&&(r||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(r,p,L,V){const X={top:0,left:0};return X.left=St(r.width,p.width,{position:V.horizontal===mn.Right?0:1,offset:L.left,size:L.width}),X.left>=L.left&&X.left<L.left+L.width&&(L.left+10+p.width<=r.width&&(X.left=L.left+10),L.top+=10,L.height=0),X.top=St(r.height,p.height,{position:0,offset:L.top,size:0}),X.top+p.height===L.top&&X.top+L.height+p.height<=r.height&&(X.top+=L.height),X}createSubmenu(r=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=(0,Y.BC)(this.element,(0,Y.$)("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const p=(0,Y.zk)(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),L=parseFloat(p.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new gs(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new Qt.HJ],this.submenuOptions,this.menuStyle);const V=this.element.getBoundingClientRect(),X={top:V.top-L,left:V.left,height:V.height+2*L,width:V.width},ge=this.submenuContainer.getBoundingClientRect(),De=(0,Y.zk)(this.element),{top:$e,left:tt}=this.calculateSubmenuMenuLayout(new Y.fg(De.innerWidth,De.innerHeight),Y.fg.lift(ge),X,this.expandDirection);this.submenuContainer.style.left=`${tt-ge.left}px`,this.submenuContainer.style.top=`${$e-ge.top}px`,this.submenuDisposables.add((0,Y.ko)(this.submenuContainer,Y.Bx.KEY_UP,ft=>{new wt.Z(ft).equals(15)&&(Y.fs.stop(ft,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add((0,Y.ko)(this.submenuContainer,Y.Bx.KEY_DOWN,ft=>{new wt.Z(ft).equals(15)&&Y.fs.stop(ft,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(r),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(r){this.item&&this.item?.setAttribute("aria-expanded",r)}applyStyle(){super.applyStyle();const p=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=p??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class ks extends Ui.Z4{constructor(r,p,L,V){super(r,p,L),this.menuStyles=V}render(r){super.render(r),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function Gs(de){const r=ds,p=r.exec(de);if(!p)return de;const L=!p[1];return de.replace(r,L?"$2$3":"").trim()}function Po(de){const r=(0,ys.J)()[de.id];return`.codicon-${de.id}:before { content: '\\${r.toString(16)}'; }`}function zi(de,r){let p=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${Po(En.W.menuSelection)}
${Po(En.W.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(r){p+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const L=de.scrollbarShadow;L&&(p+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${L} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${L} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${L} 6px 6px 6px -6px inset;
				}
			`);const V=de.scrollbarSliderBackground;V&&(p+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${V};
				}
			`);const X=de.scrollbarSliderHoverBackground;X&&(p+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${X};
				}
			`);const ge=de.scrollbarSliderActiveBackground;ge&&(p+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${ge};
				}
			`)}return p}var Ps=c(7285);class Qs{constructor(r,p,L,V){this.contextViewService=r,this.telemetryService=p,this.notificationService=L,this.keybindingService=V,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(r){this.options=r}showContextMenu(r){const p=r.getActions();if(!p.length)return;this.focusToReturn=(0,Y.bq)();let L;const V=(0,Y.sb)(r.domForShadowRoot)?r.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>r.getAnchor(),canRelayout:!1,anchorAlignment:r.anchorAlignment,anchorAxisAlignment:r.anchorAxisAlignment,render:X=>{this.lastContainer=X;const ge=r.getMenuClassName?r.getMenuClassName():"";ge&&(X.className+=" "+ge),this.options.blockMouse&&(this.block=X.appendChild((0,Y.$)(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",this.blockDisposable?.dispose(),this.blockDisposable=(0,Y.ko)(this.block,Y.Bx.MOUSE_DOWN,ft=>ft.stopPropagation()));const De=new P.Cm,$e=r.actionRunner||new Qt.LN;$e.onWillRun(ft=>this.onActionRun(ft,!r.skipTelemetry),this,De),$e.onDidRun(this.onDidActionRun,this,De),L=new gs(X,p,{actionViewItemProvider:r.getActionViewItem,context:r.getActionsContext?r.getActionsContext():null,actionRunner:$e,getKeyBinding:r.getKeyBinding?r.getKeyBinding:ft=>this.keybindingService.lookupKeybinding(ft.id)},Ps.XS),L.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,De),L.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,De);const tt=(0,Y.zk)(X);return De.add((0,Y.ko)(tt,Y.Bx.BLUR,()=>this.contextViewService.hideContextView(!0))),De.add((0,Y.ko)(tt,Y.Bx.MOUSE_DOWN,ft=>{if(ft.defaultPrevented)return;const Nt=new di.P(tt,ft);let Jt=Nt.target;if(!Nt.rightButton){for(;Jt;){if(Jt===X)return;Jt=Jt.parentElement}this.contextViewService.hideContextView(!0)}})),(0,P.qE)(De,L)},focus:()=>{L?.focus(!!r.autoSelectFirstItem)},onHide:X=>{r.onHide?.(!!X),this.block&&(this.block.remove(),this.block=null),this.blockDisposable?.dispose(),this.blockDisposable=null,this.lastContainer&&((0,Y.bq)()===this.lastContainer||(0,Y.QX)((0,Y.bq)(),this.lastContainer))&&this.focusToReturn?.focus(),this.lastContainer=null}},V,!!V)}onActionRun(r,p){p&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:r.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(r){r.error&&!(0,d.MB)(r.error)&&this.notificationService.error(r.error)}}var wr=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},xo=function(de,r){return function(p,L){r(p,L,de)}};let Is=class extends P.jG{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new Qs(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(r,p,L,V,X,ge){super(),this.telemetryService=r,this.notificationService=p,this.contextViewService=L,this.keybindingService=V,this.menuService=X,this.contextKeyService=ge,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new ot.vl),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new ot.vl)}configure(r){this.contextMenuHandler.configure(r)}showContextMenu(r){r=Ls.transform(r,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...r,onHide:p=>{r.onHide?.(p),this._onDidHideContextMenu.fire()}}),Y.Di.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};Is=wr([xo(0,It.k),xo(1,ke.Ot),xo(2,Di.l),xo(3,dn.b),xo(4,en.ez),xo(5,te.fN)],Is);var Ls;(function(de){function r(L){return L&&L.menuId instanceof en.D8}function p(L,V,X){if(!r(L))return L;const{menuId:ge,menuActionOptions:De,contextKeyService:$e}=L;return{...L,getActions:()=>{const tt=[];if(ge){const ft=V.getMenuActions(ge,$e??X,De);(0,fi.$u)(ft,tt)}return L.getActions?Qt.wv.join(L.getActions(),tt):tt}}}de.transform=p})(Ls||(Ls={}));var Ec=c(24385),pa;(function(de){de[de.API=0]="API",de[de.USER=1]="USER"})(pa||(pa={}));var lr=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},Bs=function(de,r){return function(p,L){r(p,L,de)}};let js=class{constructor(r){this._commandService=r}async open(r,p){if(!(0,m.v$)(r,m.ny.command))return!1;if(!p?.allowCommands||(typeof r=="string"&&(r=w.r.parse(r)),Array.isArray(p.allowCommands)&&!p.allowCommands.includes(r.path)))return!0;let L=[];try{L=(0,Ec.qg)(decodeURIComponent(r.query))}catch{try{L=(0,Ec.qg)(r.query)}catch{}}return Array.isArray(L)||(L=[L]),await this._commandService.executeCommand(r.path,...L),!0}};js=lr([Bs(0,$n.d)],js);let _a=class{constructor(r){this._editorService=r}async open(r,p){typeof r=="string"&&(r=w.r.parse(r));const{selection:L,uri:V}=(0,Zn.e)(r);return r=V,r.scheme===m.ny.file&&(r=(0,Kt.Fd)(r)),await this._editorService.openCodeEditor({resource:r,options:{selection:L,source:p?.fromUserGesture?pa.USER:pa.API,...p?.editorOptions}},this._editorService.getFocusedCodeEditor(),p?.openToSide),!0}};_a=lr([Bs(0,I.T)],_a);let Js=class{constructor(r,p){this._openers=new Pt.w,this._validators=new Pt.w,this._resolvers=new Pt.w,this._resolvedUriTargets=new Kn.fT(L=>L.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Pt.w,this._defaultExternalOpener={openExternal:async L=>((0,m.fV)(L,m.ny.http,m.ny.https)?Y.CE(L):U.G.location.href=L,!0)},this._openers.push({open:async(L,V)=>V?.openExternal||(0,m.fV)(L,m.ny.mailto,m.ny.http,m.ny.https,m.ny.vsls)?(await this._doOpenExternal(L,V),!0):!1}),this._openers.push(new js(p)),this._openers.push(new _a(r))}registerOpener(r){return{dispose:this._openers.unshift(r)}}async open(r,p){const L=typeof r=="string"?w.r.parse(r):r,V=this._resolvedUriTargets.get(L)??r;for(const X of this._validators)if(!await X.shouldOpen(V,p))return!1;for(const X of this._openers)if(await X.open(r,p))return!0;return!1}async resolveExternalUri(r,p){for(const L of this._resolvers)try{const V=await L.resolveExternalUri(r,p);if(V)return this._resolvedUriTargets.has(V.resolved)||this._resolvedUriTargets.set(V.resolved,r),V}catch{}throw new Error("Could not resolve external URI: "+r.toString())}async _doOpenExternal(r,p){const L=typeof r=="string"?w.r.parse(r):r;let V;try{V=(await this.resolveExternalUri(L,p)).resolved}catch{V=L}let X;if(typeof r=="string"&&L.toString()===V.toString()?X=r:X=encodeURI(V.toString(!0)),p?.allowContributedOpeners){const ge=typeof p?.allowContributedOpeners=="string"?p?.allowContributedOpeners:void 0;for(const De of this._externalOpeners)if(await De.openExternal(X,{sourceUri:L,preferredOpenerId:ge},un.XO.None))return!0}return this._defaultExternalOpener.openExternal(X,{sourceUri:L},un.XO.None)}dispose(){this._validators.clear()}};Js=lr([Bs(0,I.T),Bs(1,$n.d)],Js);var hn=c(69393),Ys=c(71521),Nl=c(27406),qd=c(12305),yr=c(12162),Ni=c(88238),vn=c(36470),ms=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},As=function(de,r){return function(p,L){r(p,L,de)}};let Ga=class extends P.jG{constructor(r,p){super(),this.quickInputService=r,this.instantiationService=p,this.registry=zt.O.as(Ni.Fd.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(r="",p){this.doShowOrPick(r,!1,p)}doShowOrPick(r,p,L){const[V,X]=this.getOrInstantiateProvider(r,L?.enabledProviderPrefixes),ge=this.visibleQuickAccess,De=ge?.descriptor;if(ge&&X&&De===X){r!==X.prefix&&!L?.preserveValue&&(ge.picker.value=r),this.adjustValueSelection(ge.picker,X,L);return}if(X&&!L?.preserveValue){let Gi;if(ge&&De&&De!==X){const kn=ge.value.substr(De.prefix.length);kn&&(Gi=`${X.prefix}${kn}`)}if(!Gi){const kn=V?.defaultFilterValue;kn===Ni.aJ.LAST?Gi=this.lastAcceptedPickerValues.get(X):typeof kn=="string"&&(Gi=`${X.prefix}${kn}`)}typeof Gi=="string"&&(r=Gi)}const $e=ge?.picker?.valueSelection,tt=ge?.picker?.value,ft=new P.Cm,Nt=ft.add(this.quickInputService.createQuickPick({useSeparators:!0}));Nt.value=r,this.adjustValueSelection(Nt,X,L),Nt.placeholder=L?.placeholder??X?.placeholder,Nt.quickNavigate=L?.quickNavigateConfiguration,Nt.hideInput=!!Nt.quickNavigate&&!ge,(typeof L?.itemActivation=="number"||L?.quickNavigateConfiguration)&&(Nt.itemActivation=L?.itemActivation??vn.C1.SECOND),Nt.contextKey=X?.contextKey,Nt.filterValue=Gi=>Gi.substring(X?X.prefix.length:0);let Jt;p&&(Jt=new C.Zv,ft.add(ot.Jh.once(Nt.onWillAccept)(Gi=>{Gi.veto(),Nt.hide()}))),ft.add(this.registerPickerListeners(Nt,V,X,r,L));const _i=ft.add(new un.Qi);if(V&&ft.add(V.provide(Nt,_i.token,L?.providerOptions)),ot.Jh.once(Nt.onDidHide)(()=>{Nt.selectedItems.length===0&&_i.cancel(),ft.dispose(),Jt?.complete(Nt.selectedItems.slice(0))}),Nt.show(),$e&&tt===r&&(Nt.valueSelection=$e),p)return Jt?.p}adjustValueSelection(r,p,L){let V;L?.preserveValue?V=[r.value.length,r.value.length]:V=[p?.prefix.length??0,r.value.length],r.valueSelection=V}registerPickerListeners(r,p,L,V,X){const ge=new P.Cm,De=this.visibleQuickAccess={picker:r,descriptor:L,value:V};return ge.add((0,P.s)(()=>{De===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),ge.add(r.onDidChangeValue($e=>{const[tt]=this.getOrInstantiateProvider($e,X?.enabledProviderPrefixes);tt!==p?this.show($e,{enabledProviderPrefixes:X?.enabledProviderPrefixes,preserveValue:!0,providerOptions:X?.providerOptions}):De.value=$e})),L&&ge.add(r.onDidAccept(()=>{this.lastAcceptedPickerValues.set(L,r.value)})),ge}getOrInstantiateProvider(r,p){const L=this.registry.getQuickAccessProvider(r);if(!L||p&&!p?.includes(L.prefix))return[void 0,void 0];let V=this.mapProviderToDescriptor.get(L);return V||(V=this.instantiationService.createInstance(L.ctor),this.mapProviderToDescriptor.set(L,V)),[V,L]}};Ga=ms([As(0,vn.GK),As(1,dt._Y)],Ga);var Vr=c(47896),Lr=c(89530),va=c(17577),Qa=c(6113),Tl=c(77065),Ur=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X};class cr{constructor(r){this.nodes=r}toString(){return this.nodes.map(r=>typeof r=="string"?r:r.label).join("")}}Ur([Tl.B],cr.prototype,"toString",null);const Jn=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function Rl(de){const r=[];let p=0,L;for(;L=Jn.exec(de);){L.index-p>0&&r.push(de.substring(p,L.index));const[,V,X,,ge]=L;ge?r.push({label:V,href:X,title:ge}):r.push({label:V,href:X}),p=L.index+L[0].length}return p<de.length&&r.push(de.substring(p)),new cr(r)}const zr={},Zo=new Qa.n("quick-input-button-icon-");function Dr(de){if(!de)return;let r;const p=de.dark.toString();return zr[p]?r=zr[p]:(r=Zo.nextId(),Y.Wt(`.${r}, .hc-light .${r}`,`background-image: ${Y.Tf(de.light||de.dark)}`),Y.Wt(`.vs-dark .${r}, .hc-black .${r}`,`background-image: ${Y.Tf(de.dark)}`),zr[p]=r),r}function Er(de,r,p){let L=de.iconClass||Dr(de.iconPath);return de.alwaysVisible&&(L=L?`${L} always-visible`:"always-visible"),{id:r,label:"",tooltip:de.tooltip||"",class:L,enabled:!0,run:p}}function xc(de,r,p){Y.Ln(r);const L=Rl(de);let V=0;for(const X of L.nodes)if(typeof X=="string")r.append(...(0,va.n)(X));else{let ge=X.title;!ge&&X.href.startsWith("command:")?ge=(0,D.kg)("executeCommand","Click to execute command '{0}'",X.href.substring(8)):ge||(ge=X.href);const De=Y.$("a",{href:X.href,title:ge,tabIndex:V++},X.label);De.style.textDecoration="underline";const $e=_i=>{Y.sd(_i)&&Y.fs.stop(_i,!0),p.callback(X.href)},tt=p.disposables.add(new Lr.f(De,Y.Bx.CLICK)).event,ft=p.disposables.add(new Lr.f(De,Y.Bx.KEY_DOWN)).event,Nt=ot.Jh.chain(ft,_i=>_i.filter(Gi=>{const kn=new wt.Z(Gi);return kn.equals(10)||kn.equals(3)}));p.disposables.add(vi.q.addTarget(De));const Jt=p.disposables.add(new Lr.f(De,vi.B.Tap)).event;ot.Jh.any(tt,Jt,Nt)($e,null,p.disposables),r.appendChild(De)}}var Pl=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},jr=function(de,r){return function(p,L){r(p,L,de)}};const kc="inQuickInput",eh=new te.N1(kc,!1,(0,D.kg)("inQuickInput","Whether keyboard focus is inside the quick input control")),xr=te.M$.has(kc),Al="quickInputType",Ya=new te.N1(Al,void 0,(0,D.kg)("quickInputType","The type of the currently visible quick input")),Kr="cursorAtEndOfQuickInputBox",Zs=new te.N1(Kr,!1,(0,D.kg)("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),is=te.M$.has(Kr),On={iconClass:zn.L.asClassName(En.W.quickInputBack),tooltip:(0,D.kg)("quickInput.back","Back"),handle:-1};class Ks extends P.jG{static{this.noPromptMessage=(0,D.kg)("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel")}constructor(r){super(),this.ui=r,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=Ks.noPromptMessage,this._severity=Xt.A.Ignore,this.onDidTriggerButtonEmitter=this._register(new ot.vl),this.onDidHideEmitter=this._register(new ot.vl),this.onWillHideEmitter=this._register(new ot.vl),this.onDisposeEmitter=this._register(new ot.vl),this.visibleDisposables=this._register(new P.Cm),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(r){this._title=r,this.update()}get description(){return this._description}set description(r){this._description=r,this.update()}get step(){return this._steps}set step(r){this._steps=r,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(r){this._totalSteps=r,this.update()}get enabled(){return this._enabled}set enabled(r){this._enabled=r,this.update()}get contextKey(){return this._contextKey}set contextKey(r){this._contextKey=r,this.update()}get busy(){return this._busy}set busy(r){this._busy=r,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(r){const p=this._ignoreFocusOut!==r&&!Wn.un;this._ignoreFocusOut=r&&!Wn.un,p&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(r){this._leftButtons=r.filter(p=>p===On),this._rightButtons=r.filter(p=>p!==On&&p.location!==vn.dH.Inline),this._inlineButtons=r.filter(p=>p.location===vn.dH.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(r){this._toggles=r??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(r){this._validationMessage=r,this.update()}get severity(){return this._severity}set severity(r){this._severity=r,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(r=>{this.buttons.indexOf(r)!==-1&&this.onDidTriggerButtonEmitter.fire(r)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(r=vn.kF.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:r})}willHide(r=vn.kF.Other){this.onWillHideEmitter.fire({reason:r})}update(){if(!this.visible)return;const r=this.getTitle();r&&this.ui.title.textContent!==r?this.ui.title.textContent=r:!r&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="\xA0");const p=this.getDescription();if(this.ui.description1.textContent!==p&&(this.ui.description1.textContent=p),this.ui.description2.textContent!==p&&(this.ui.description2.textContent=p),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?Y.Ln(this.ui.widget,this._widget):Y.Ln(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new C.pc,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const V=this._leftButtons.map((De,$e)=>Er(De,`id-${$e}`,async()=>this.onDidTriggerButtonEmitter.fire(De)));this.ui.leftActionBar.push(V,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const X=this._rightButtons.map((De,$e)=>Er(De,`id-${$e}`,async()=>this.onDidTriggerButtonEmitter.fire(De)));this.ui.rightActionBar.push(X,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const ge=this._inlineButtons.map((De,$e)=>Er(De,`id-${$e}`,async()=>this.onDidTriggerButtonEmitter.fire(De)));this.ui.inlineActionBar.push(ge,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const V=this.toggles?.filter(X=>X instanceof Vr.l)??[];this.ui.inputBox.toggles=V}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const L=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==L&&(this._lastValidationMessage=L,Y.Ln(this.ui.message),xc(L,this.ui.message,{callback:V=>{this.ui.linkOpenerDelegate(V)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?(0,D.kg)("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(r){if(this.ui.inputBox.showDecoration(r),r!==Xt.A.Ignore){const p=this.ui.inputBox.stylesForType(r);this.ui.message.style.color=p.foreground?`${p.foreground}`:"",this.ui.message.style.backgroundColor=p.background?`${p.background}`:"",this.ui.message.style.border=p.border?`1px solid ${p.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}class Ca extends Ks{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new ot.vl),this.onWillAcceptEmitter=this._register(new ot.vl),this.onDidAcceptEmitter=this._register(new ot.vl),this.onDidCustomEmitter=this._register(new ot.vl),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=vn.C1.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new ot.vl),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new ot.vl),this.onDidTriggerItemButtonEmitter=this._register(new ot.vl),this.onDidTriggerSeparatorButtonEmitter=this._register(new ot.vl),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new ot.at,this.type="quickPick",this.filterValue=r=>r,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}static{this.DEFAULT_ARIA_LABEL=(0,D.kg)("quickInputBox.ariaLabel","Type to narrow down results.")}get quickNavigate(){return this._quickNavigate}set quickNavigate(r){this._quickNavigate=r,this.update()}get value(){return this._value}set value(r){this.doSetValue(r)}doSetValue(r,p){this._value!==r&&(this._value=r,p||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(r){this._ariaLabel=r,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(r){this._placeholder=r,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(r){this.ui.list.scrollTop=r}set items(r){this._items=r,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(r){this._canSelectMany=r,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(r){this._canAcceptInBackground=r}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(r){this._matchOnDescription=r,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(r){this._matchOnDetail=r,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(r){this._matchOnLabel=r,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(r){this._matchOnLabelMode=r,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(r){this._sortByLabel=r,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(r){this._keepScrollPosition=r}get itemActivation(){return this._itemActivation}set itemActivation(r){this._itemActivation=r}get activeItems(){return this._activeItems}set activeItems(r){this._activeItems=r,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(r){this._selectedItems=r,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?vn.Ym:this.ui.keyMods}get valueSelection(){const r=this.ui.inputBox.getSelection();if(r)return[r.start,r.end]}set valueSelection(r){this._valueSelection=r,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(r){this._customButton=r,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(r){this._customButtonLabel=r,this.update()}get customHover(){return this._customButtonHover}set customHover(r){this._customButtonHover=r,this.update()}get ok(){return this._ok}set ok(r){this._ok=r,this.update()}get hideInput(){return!!this._hideInput}set hideInput(r){this._hideInput=r,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(vn.Fp.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(r=>{this.doSetValue(r,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(r,p)=>p)(r=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&(0,S.aI)(r,this._activeItems,(p,L)=>p===L)||(this._activeItems=r,this.onDidChangeActiveEmitter.fire(r))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:r,event:p})=>{if(this.canSelectMany){r.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&(0,S.aI)(r,this._selectedItems,(L,V)=>L===V)||(this._selectedItems=r,this.onDidChangeSelectionEmitter.fire(r),r.length&&this.handleAccept(Y.Er(p)&&p.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(r=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&(0,S.aI)(r,this._selectedItems,(p,L)=>p===L)||(this._selectedItems=r,this.onDidChangeSelectionEmitter.fire(r))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(r=>this.onDidTriggerItemButtonEmitter.fire(r))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(r=>this.onDidTriggerSeparatorButtonEmitter.fire(r))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(r){let p=!1;this.onWillAcceptEmitter.fire({veto:()=>p=!0}),p||this.onDidAcceptEmitter.fire({inBackground:r})}registerQuickNavigation(){return Y.ko(this.ui.container,Y.Bx.KEY_UP,r=>{if(this.canSelectMany||!this._quickNavigate)return;const p=new wt.Z(r),L=p.keyCode;this._quickNavigate.keybindings.some(ge=>{const De=ge.getChords();return De.length>1?!1:De[0].shiftKey&&L===4?!(p.ctrlKey||p.altKey||p.metaKey):!!(De[0].altKey&&L===6||De[0].ctrlKey&&L===5||De[0].metaKey&&L===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const r=this.keepScrollPosition?this.scrollTop:0,p=!!this.description,L={title:!!this.title||!!this.step||!!this.titleButtons.length,description:p,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||p,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(L),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let V=this.ariaLabel;!V&&L.inputBox&&(V=this.placeholder||Ca.DEFAULT_ARIA_LABEL,this.title&&(V+=` - ${this.title}`)),this.ui.list.ariaLabel!==V&&(this.ui.list.ariaLabel=V??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case vn.C1.NONE:this._itemActivation=vn.C1.FIRST;break;case vn.C1.SECOND:this.ui.list.focus(vn.Fp.Second),this._itemActivation=vn.C1.FIRST;break;case vn.C1.LAST:this.ui.list.focus(vn.Fp.Last),this._itemActivation=vn.C1.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",L.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(vn.Fp.First)),this.keepScrollPosition&&(this.scrollTop=r)}focus(r){this.ui.list.focus(r),this.canSelectMany&&this.ui.list.domFocus()}accept(r){r&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(r??!1))}}class th extends Ks{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new ot.vl),this.onDidAcceptEmitter=this._register(new ot.vl),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(r){this._value=r||"",this.update()}get placeholder(){return this._placeholder}set placeholder(r){this._placeholder=r,this.update()}get password(){return this._password}set password(r){this._password=r,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(r=>{r!==this.value&&(this._value=r,this.onDidValueChangeEmitter.fire(r))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const r={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(r),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}}let Xo=class extends ji.fO{constructor(r,p){super("element",!1,L=>this.getOverrideOptions(L),r,p)}getOverrideOptions(r){const p=(Y.sb(r.content)?r.content.textContent??"":typeof r.content=="string"?r.content:r.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:p,skipFadeInAnimation:!0}}}};Xo=Pl([jr(0,nn.pG),jr(1,ji.TN)],Xo);var Do=c(95660),Ic=c(94528);const Ol="done",Za="active",Xa="infinite",Ao="infinite-long-running",$r="discrete";class ba extends P.jG{static{this.LONG_RUNNING_INFINITE_THRESHOLD=1e4}constructor(r,p){super(),this.progressSignal=this._register(new P.HE),this.workedVal=0,this.showDelayedScheduler=this._register(new C.uC(()=>(0,Y.WU)(this.element),0)),this.longRunningScheduler=this._register(new C.uC(()=>this.infiniteLongRunning(),ba.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(r,p)}create(r,p){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),r.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=p?.progressBarBackground||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(Za,Xa,Ao,$r),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(r){return this.element.classList.add(Ol),this.element.classList.contains(Xa)?(this.bit.style.opacity="0",r?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",r?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove($r,Ol,Ao),this.element.classList.add(Za,Xa),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(Ao)}getContainer(){return this.element}}var Fl=c(78398);const dr=Y.$;class Wl extends P.jG{constructor(r,p,L){super(),this.parent=r,this.onKeyDown=X=>Y.b2(this.findInput.inputBox.inputElement,Y.Bx.KEY_DOWN,X),this.onDidChange=X=>this.findInput.onDidChange(X),this.container=Y.BC(this.parent,dr(".quick-input-box")),this.findInput=this._register(new Fl.c(this.container,void 0,{label:"",inputBoxStyles:p,toggleStyles:L}));const V=this.findInput.inputBox.inputElement;V.role="combobox",V.ariaHasPopup="menu",V.ariaAutoComplete="list",V.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(r){this.findInput.setValue(r)}select(r=null){this.findInput.inputBox.select(r)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(r){this.findInput.inputBox.setPlaceHolder(r)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(r){this.findInput.inputBox.inputElement.type=r?"password":"text"}set enabled(r){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!r)}set toggles(r){this.findInput.setAdditionalToggles(r)}setAttribute(r,p){this.findInput.inputBox.inputElement.setAttribute(r,p)}showDecoration(r){r===Xt.A.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:r===Xt.A.Info?1:r===Xt.A.Warning?2:3,content:""})}stylesForType(r){return this.findInput.inputBox.stylesForType(r===Xt.A.Info?1:r===Xt.A.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}var Oo=c(88360),Ja=c(8954),Sa=c(49418),ih=c(64246),Fo=c(37145);const Mc=new Fo.d(()=>{const de=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:de,collatorIsNumeric:de.resolvedOptions().numeric}}),xu=new Fo.d(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),Nc=new Fo.d(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function nh(de,r,p=!1){const L=de||"",V=r||"",X=Mc.value.collator.compare(L,V);return Mc.value.collatorIsNumeric&&X===0&&L!==V?L<V?-1:1:X}function sh(de,r,p){const L=de.toLowerCase(),V=r.toLowerCase(),X=wa(de,r,p);if(X)return X;const ge=L.endsWith(p),De=V.endsWith(p);if(ge!==De)return ge?-1:1;const $e=nh(L,V);return $e!==0?$e:L.localeCompare(V)}function wa(de,r,p){const L=de.toLowerCase(),V=r.toLowerCase(),X=L.startsWith(p),ge=V.startsWith(p);if(X!==ge)return X?-1:1;if(X&&ge){if(L.length<V.length)return-1;if(L.length>V.length)return 1}return 0}var ya=c(35946),qn=c(63886),Bl=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},Tc=function(de,r){return function(p,L){r(p,L,de)}},La;const Wo=Y.$;class oh{constructor(r,p,L){this.index=r,this.hasCheckbox=p,this._hidden=!1,this._init=new Fo.d(()=>{const V=L.label??"",X=(0,Hn._k)(V).text.trim(),ge=L.ariaLabel||[V,this.saneDescription,this.saneDetail].map(De=>(0,Hn.R$)(De)).filter(De=>!!De).join(", ");return{saneLabel:V,saneSortLabel:X,saneAriaLabel:ge}}),this._saneDescription=L.description,this._saneTooltip=L.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(r){this._element=r}get hidden(){return this._hidden}set hidden(r){this._hidden=r}get saneDescription(){return this._saneDescription}set saneDescription(r){this._saneDescription=r}get saneDetail(){return this._saneDetail}set saneDetail(r){this._saneDetail=r}get saneTooltip(){return this._saneTooltip}set saneTooltip(r){this._saneTooltip=r}get labelHighlights(){return this._labelHighlights}set labelHighlights(r){this._labelHighlights=r}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(r){this._descriptionHighlights=r}get detailHighlights(){return this._detailHighlights}set detailHighlights(r){this._detailHighlights=r}}class $s extends oh{constructor(r,p,L,V,X,ge){super(r,p,X),this.fireButtonTriggered=L,this._onChecked=V,this.item=X,this._separator=ge,this._checked=!1,this.onChecked=p?ot.Jh.map(ot.Jh.filter(this._onChecked.event,De=>De.element===this),De=>De.checked):ot.Jh.None,this._saneDetail=X.detail,this._labelHighlights=X.highlights?.label,this._descriptionHighlights=X.highlights?.description,this._detailHighlights=X.highlights?.detail}get separator(){return this._separator}set separator(r){this._separator=r}get checked(){return this._checked}set checked(r){r!==this._checked&&(this._checked=r,this._onChecked.fire({element:this,checked:r}))}get checkboxDisabled(){return!!this.item.disabled}}var Jo;(function(de){de[de.NONE=0]="NONE",de[de.MOUSE_HOVER=1]="MOUSE_HOVER",de[de.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(Jo||(Jo={}));class Gr extends oh{constructor(r,p,L){super(r,!1,L),this.fireSeparatorButtonTriggered=p,this.separator=L,this.children=new Array,this.focusInsideSeparator=Jo.NONE}}class ku{getHeight(r){return r instanceof Gr?30:r.saneDetail?44:22}getTemplateId(r){return r instanceof $s?kr.ID:qa.ID}}class Iu{getWidgetAriaLabel(){return(0,D.kg)("quickInput","Quick Input")}getAriaLabel(r){return r.separator?.label?`${r.saneAriaLabel}, ${r.separator.label}`:r.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(r){return r.hasCheckbox?"checkbox":"option"}isChecked(r){if(!(!r.hasCheckbox||!(r instanceof $s)))return{get value(){return r.checked},onDidChange:p=>r.onChecked(()=>p())}}}class rh{constructor(r){this.hoverDelegate=r}renderTemplate(r){const p=Object.create(null);p.toDisposeElement=new P.Cm,p.toDisposeTemplate=new P.Cm,p.entry=Y.BC(r,Wo(".quick-input-list-entry"));const L=Y.BC(p.entry,Wo("label.quick-input-list-label"));p.toDisposeTemplate.add(Y.b2(L,Y.Bx.CLICK,tt=>{p.checkbox.offsetParent||tt.preventDefault()})),p.checkbox=Y.BC(L,Wo("input.quick-input-list-checkbox")),p.checkbox.type="checkbox";const V=Y.BC(L,Wo(".quick-input-list-rows")),X=Y.BC(V,Wo(".quick-input-list-row")),ge=Y.BC(V,Wo(".quick-input-list-row"));p.label=new Ja.s(X,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),p.toDisposeTemplate.add(p.label),p.icon=Y.Hs(p.label.element,Wo(".quick-input-list-icon"));const De=Y.BC(X,Wo(".quick-input-list-entry-keybinding"));p.keybinding=new Sa.x(De,Wn.OS),p.toDisposeTemplate.add(p.keybinding);const $e=Y.BC(ge,Wo(".quick-input-list-label-meta"));return p.detail=new Ja.s($e,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),p.toDisposeTemplate.add(p.detail),p.separator=Y.BC(p.entry,Wo(".quick-input-list-separator")),p.actionBar=new Hi.E(p.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),p.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),p.toDisposeTemplate.add(p.actionBar),p}disposeTemplate(r){r.toDisposeElement.dispose(),r.toDisposeTemplate.dispose()}disposeElement(r,p,L){L.toDisposeElement.clear(),L.actionBar.clear()}}let kr=class extends rh{static{La=this}static{this.ID="quickpickitem"}constructor(r,p){super(r),this.themeService=p,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return La.ID}renderTemplate(r){const p=super.renderTemplate(r);return p.toDisposeTemplate.add(Y.b2(p.checkbox,Y.Bx.CHANGE,L=>{p.element.checked=p.checkbox.checked})),p}renderElement(r,p,L){const V=r.element;L.element=V,V.element=L.entry??void 0;const X=V.item;L.checkbox.checked=V.checked,L.toDisposeElement.add(V.onChecked(Jt=>L.checkbox.checked=Jt)),L.checkbox.disabled=V.checkboxDisabled;const{labelHighlights:ge,descriptionHighlights:De,detailHighlights:$e}=V;if(X.iconPath){const Jt=(0,ih.HD)(this.themeService.getColorTheme().type)?X.iconPath.dark:X.iconPath.light??X.iconPath.dark,_i=w.r.revive(Jt);L.icon.className="quick-input-list-icon",L.icon.style.backgroundImage=Y.Tf(_i)}else L.icon.style.backgroundImage="",L.icon.className=X.iconClass?`quick-input-list-icon ${X.iconClass}`:"";let tt;!V.saneTooltip&&V.saneDescription&&(tt={markdown:{value:V.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:V.saneDescription});const ft={matches:ge||[],descriptionTitle:tt,descriptionMatches:De||[],labelEscapeNewLines:!0};if(ft.extraClasses=X.iconClasses,ft.italic=X.italic,ft.strikethrough=X.strikethrough,L.entry.classList.remove("quick-input-list-separator-as-item"),L.label.setLabel(V.saneLabel,V.saneDescription,ft),L.keybinding.set(X.keybinding),V.saneDetail){let Jt;V.saneTooltip||(Jt={markdown:{value:V.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:V.saneDetail}),L.detail.element.style.display="",L.detail.setLabel(V.saneDetail,void 0,{matches:$e,title:Jt,labelEscapeNewLines:!0})}else L.detail.element.style.display="none";V.separator?.label?(L.separator.textContent=V.separator.label,L.separator.style.display="",this.addItemWithSeparator(V)):L.separator.style.display="none",L.entry.classList.toggle("quick-input-list-separator-border",!!V.separator);const Nt=X.buttons;Nt&&Nt.length?(L.actionBar.push(Nt.map((Jt,_i)=>Er(Jt,`id-${_i}`,()=>V.fireButtonTriggered({button:Jt,item:V.item}))),{icon:!0,label:!1}),L.entry.classList.add("has-actions")):L.entry.classList.remove("has-actions")}disposeElement(r,p,L){this.removeItemWithSeparator(r.element),super.disposeElement(r,p,L)}isItemWithSeparatorVisible(r){return this._itemsWithSeparatorsFrequency.has(r)}addItemWithSeparator(r){this._itemsWithSeparatorsFrequency.set(r,(this._itemsWithSeparatorsFrequency.get(r)||0)+1)}removeItemWithSeparator(r){const p=this._itemsWithSeparatorsFrequency.get(r)||0;p>1?this._itemsWithSeparatorsFrequency.set(r,p-1):this._itemsWithSeparatorsFrequency.delete(r)}};kr=La=Bl([Tc(1,Wt.Gy)],kr);class qa extends rh{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}static{this.ID="quickpickseparator"}get templateId(){return qa.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(r){return this._visibleSeparatorsFrequency.has(r)}renderTemplate(r){const p=super.renderTemplate(r);return p.checkbox.style.display="none",p}renderElement(r,p,L){const V=r.element;L.element=V,V.element=L.entry??void 0,V.element.classList.toggle("focus-inside",!!V.focusInsideSeparator);const X=V.separator,{labelHighlights:ge,descriptionHighlights:De,detailHighlights:$e}=V;L.icon.style.backgroundImage="",L.icon.className="";let tt;!V.saneTooltip&&V.saneDescription&&(tt={markdown:{value:V.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:V.saneDescription});const ft={matches:ge||[],descriptionTitle:tt,descriptionMatches:De||[],labelEscapeNewLines:!0};if(L.entry.classList.add("quick-input-list-separator-as-item"),L.label.setLabel(V.saneLabel,V.saneDescription,ft),V.saneDetail){let Jt;V.saneTooltip||(Jt={markdown:{value:V.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:V.saneDetail}),L.detail.element.style.display="",L.detail.setLabel(V.saneDetail,void 0,{matches:$e,title:Jt,labelEscapeNewLines:!0})}else L.detail.element.style.display="none";L.separator.style.display="none",L.entry.classList.add("quick-input-list-separator-border");const Nt=X.buttons;Nt&&Nt.length?(L.actionBar.push(Nt.map((Jt,_i)=>Er(Jt,`id-${_i}`,()=>V.fireSeparatorButtonTriggered({button:Jt,separator:V.separator}))),{icon:!0,label:!1}),L.entry.classList.add("has-actions")):L.entry.classList.remove("has-actions"),this.addSeparator(V)}disposeElement(r,p,L){this.removeSeparator(r.element),this.isSeparatorVisible(r.element)||r.element.element?.classList.remove("focus-inside"),super.disposeElement(r,p,L)}addSeparator(r){this._visibleSeparatorsFrequency.set(r,(this._visibleSeparatorsFrequency.get(r)||0)+1)}removeSeparator(r){const p=this._visibleSeparatorsFrequency.get(r)||0;p>1?this._visibleSeparatorsFrequency.set(r,p-1):this._visibleSeparatorsFrequency.delete(r)}}let el=class extends P.jG{constructor(r,p,L,V,X,ge){super(),this.parent=r,this.hoverDelegate=p,this.linkOpenerDelegate=L,this.accessibilityService=ge,this._onKeyDown=new ot.vl,this._onLeave=new ot.vl,this.onLeave=this._onLeave.event,this._visibleCountObservable=(0,qn.FY)("VisibleCount",0),this.onChangedVisibleCount=ot.Jh.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=(0,qn.FY)("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=ot.Jh.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=(0,qn.FY)("CheckedCount",0),this.onChangedCheckedCount=ot.Jh.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=(0,qn.Zh)({equalsFn:S.aI},new Array),this.onChangedCheckedElements=ot.Jh.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new ot.vl,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new ot.vl,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new ot.vl,this._elementCheckedEventBufferer=new ot.at,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new P.Cm),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=Y.BC(this.parent,Wo(".quick-input-list")),this._separatorRenderer=new qa(p),this._itemRenderer=X.createInstance(kr,p),this._tree=this._register(X.createInstance(Oo.zL,"QuickInput",this._container,new ku,[this._itemRenderer,this._separatorRenderer],{filter:{filter(De){return De.hidden?0:De instanceof Gr?2:1}},sorter:{compare:(De,$e)=>{if(!this.sortByLabel||!this._lastQueryString)return 0;const tt=this._lastQueryString.toLowerCase();return Nu(De,$e,tt)}},accessibilityProvider:new Iu,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:ya.KP.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=V,this._registerListeners()}get onDidChangeFocus(){return ot.Jh.map(this._tree.onDidChangeFocus,r=>r.elements.filter(p=>p instanceof $s).map(p=>p.item),this._store)}get onDidChangeSelection(){return ot.Jh.map(this._tree.onDidChangeSelection,r=>({items:r.elements.filter(p=>p instanceof $s).map(p=>p.item),event:r.browserEvent}),this._store)}get displayed(){return this._container.style.display!=="none"}set displayed(r){this._container.style.display=r?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(r){this._tree.scrollTop=r}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(r){this._tree.ariaLabel=r??""}set enabled(r){this._tree.getHTMLElement().style.pointerEvents=r?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(r){this._matchOnDescription=r}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(r){this._matchOnDetail=r}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(r){this._matchOnLabel=r}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(r){this._matchOnLabelMode=r}get sortByLabel(){return this._sortByLabel}set sortByLabel(r){this._sortByLabel=r}get shouldLoop(){return this._shouldLoop}set shouldLoop(r){this._shouldLoop=r}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(r=>{const p=new wt.Z(r);switch(p.keyCode){case 10:this.toggleCheckbox();break}this._onKeyDown.fire(p)}))}_registerOnContainerClick(){this._register(Y.ko(this._container,Y.Bx.CLICK,r=>{(r.x||r.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(Y.ko(this._container,Y.Bx.AUXCLICK,r=>{r.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const r=this._itemElements.filter(p=>!p.hidden).length;this._visibleCountObservable.set(r,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(r,p)=>p)(r=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(r=>{r.element&&(r.browserEvent.preventDefault(),this._tree.setSelection([r.element]))}))}_registerHoverListeners(){const r=this._register(new C.Th(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async p=>{if(Y.nY(p.browserEvent.target)){r.cancel();return}if(!(!Y.nY(p.browserEvent.relatedTarget)&&Y.QX(p.browserEvent.relatedTarget,p.element?.element)))try{await r.trigger(async()=>{p.element instanceof $s&&this.showHover(p.element)})}catch(L){if(!(0,d.MB)(L))throw L}})),this._register(this._tree.onMouseOut(p=>{Y.QX(p.browserEvent.relatedTarget,p.element?.element)||r.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(r=>{const p=r.elements[0]?this._tree.getParentElement(r.elements[0]):null;for(const L of this._separatorRenderer.visibleSeparators){const V=L===p;!!(L.focusInsideSeparator&Jo.ACTIVE_ITEM)!==V&&(V?L.focusInsideSeparator|=Jo.ACTIVE_ITEM:L.focusInsideSeparator&=~Jo.ACTIVE_ITEM,this._tree.rerender(L))}})),this._register(this._tree.onMouseOver(r=>{const p=r.element?this._tree.getParentElement(r.element):null;for(const L of this._separatorRenderer.visibleSeparators){if(L!==p)continue;!!(L.focusInsideSeparator&Jo.MOUSE_HOVER)||(L.focusInsideSeparator|=Jo.MOUSE_HOVER,this._tree.rerender(L))}})),this._register(this._tree.onMouseOut(r=>{const p=r.element?this._tree.getParentElement(r.element):null;for(const L of this._separatorRenderer.visibleSeparators){if(L!==p)continue;!!(L.focusInsideSeparator&Jo.MOUSE_HOVER)&&(L.focusInsideSeparator&=~Jo.MOUSE_HOVER,this._tree.rerender(L))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(r=>{const p=r.elements.filter(L=>L instanceof $s);p.length!==r.elements.length&&(r.elements.length===1&&r.elements[0]instanceof Gr&&(this._tree.setFocus([r.elements[0].children[0]]),this._tree.reveal(r.elements[0],0)),this._tree.setSelection(p))}))}setAllVisibleChecked(r){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(p=>{!p.hidden&&!p.checkboxDisabled&&(p.checked=r)})})}setElements(r){this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=r,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes");let p;this._itemElements=new Array,this._elementTree=r.reduce((L,V,X)=>{let ge;if(V.type==="separator"){if(!V.buttons)return L;p=new Gr(X,De=>this._onSeparatorButtonTriggered.fire(De),V),ge=p}else{const De=X>0?r[X-1]:void 0;let $e;De&&De.type==="separator"&&!De.buttons&&(p=void 0,$e=De);const tt=new $s(X,this._hasCheckboxes,ft=>this._onButtonTriggered.fire(ft),this._elementChecked,V,$e);if(this._itemElements.push(tt),p)return p.children.push(tt),L;ge=tt}return L.push(ge),L},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const L=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),V=L?.parentNode;if(L&&V){const X=L.nextSibling;L.remove(),V.insertBefore(L,X)}},0)}setFocusedElements(r){const p=r.map(L=>this._itemElements.find(V=>V.item===L)).filter(L=>!!L).filter(L=>!L.hidden);if(this._tree.setFocus(p),r.length>0){const L=this._tree.getFocus()[0];L&&this._tree.reveal(L)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(r){const p=r.map(L=>this._itemElements.find(V=>V.item===L)).filter(L=>!!L);this._tree.setSelection(p)}getCheckedElements(){return this._itemElements.filter(r=>r.checked).map(r=>r.item)}setCheckedElements(r){this._elementCheckedEventBufferer.bufferEvents(()=>{const p=new Set;for(const L of r)p.add(L);for(const L of this._itemElements)L.checked=p.has(L.item)})}focus(r){if(this._itemElements.length)switch(r===vn.Fp.Second&&this._itemElements.length<2&&(r=vn.Fp.First),r){case vn.Fp.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,p=>p.element instanceof $s);break;case vn.Fp.Second:{this._tree.scrollTop=0;let p=!1;this._tree.focusFirst(void 0,L=>L.element instanceof $s?p?!0:(p=!p,!1):!1);break}case vn.Fp.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,p=>p.element instanceof $s);break;case vn.Fp.Next:{const p=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,V=>V.element instanceof $s?(this._tree.reveal(V.element),!0):!1);const L=this._tree.getFocus();p.length&&p[0]===L[0]&&p[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case vn.Fp.Previous:{const p=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,V=>{if(!(V.element instanceof $s))return!1;const X=this._tree.getParentElement(V.element);return X===null||X.children[0]!==V.element?this._tree.reveal(V.element):this._tree.reveal(X),!0});const L=this._tree.getFocus();p.length&&p[0]===L[0]&&p[0]===this._itemElements[0]&&this._onLeave.fire();break}case vn.Fp.NextPage:this._tree.focusNextPage(void 0,p=>p.element instanceof $s?(this._tree.reveal(p.element),!0):!1);break;case vn.Fp.PreviousPage:this._tree.focusPreviousPage(void 0,p=>{if(!(p.element instanceof $s))return!1;const L=this._tree.getParentElement(p.element);return L===null||L.children[0]!==p.element?this._tree.reveal(p.element):this._tree.reveal(L),!0});break;case vn.Fp.NextSeparator:{let p=!1;const L=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,X=>{if(p)return!0;if(X.element instanceof Gr)p=!0,this._separatorRenderer.isSeparatorVisible(X.element)?this._tree.reveal(X.element.children[0]):this._tree.reveal(X.element,0);else if(X.element instanceof $s){if(X.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(X.element)?this._tree.reveal(X.element):this._tree.reveal(X.element,0),!0;if(X.element===this._elementTree[0])return this._tree.reveal(X.element,0),!0}return!1});const V=this._tree.getFocus()[0];L===V&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,X=>X.element instanceof $s));break}case vn.Fp.PreviousSeparator:{let p,L=!!this._tree.getFocus()[0]?.separator;this._tree.focusPrevious(void 0,!0,void 0,V=>{if(V.element instanceof Gr)L?p||(this._separatorRenderer.isSeparatorVisible(V.element)?this._tree.reveal(V.element):this._tree.reveal(V.element,0),p=V.element.children[0]):L=!0;else if(V.element instanceof $s&&!p){if(V.element.separator)this._itemRenderer.isItemWithSeparatorVisible(V.element)?this._tree.reveal(V.element):this._tree.reveal(V.element,0),p=V.element;else if(V.element===this._elementTree[0])return this._tree.reveal(V.element,0),!0}return!1}),p&&this._tree.setFocus([p]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(r){this._tree.getHTMLElement().style.maxHeight=r?`${Math.floor(r/44)*44+6}px`:"",this._tree.layout()}filter(r){if(this._lastQueryString=r,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const p=r;if(r=r.trim(),!r||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(L=>{L.labelHighlights=void 0,L.descriptionHighlights=void 0,L.detailHighlights=void 0,L.hidden=!1;const V=L.index&&this._inputElements[L.index-1];L.item&&(L.separator=V&&V.type==="separator"&&!V.buttons?V:void 0)});else{let L;this._itemElements.forEach(V=>{let X;this.matchOnLabelMode==="fuzzy"?X=this.matchOnLabel?(0,Hn.pz)(r,(0,Hn._k)(V.saneLabel))??void 0:void 0:X=this.matchOnLabel?Mu(p,(0,Hn._k)(V.saneLabel))??void 0:void 0;const ge=this.matchOnDescription?(0,Hn.pz)(r,(0,Hn._k)(V.saneDescription||""))??void 0:void 0,De=this.matchOnDetail?(0,Hn.pz)(r,(0,Hn._k)(V.saneDetail||""))??void 0:void 0;if(X||ge||De?(V.labelHighlights=X,V.descriptionHighlights=ge,V.detailHighlights=De,V.hidden=!1):(V.labelHighlights=void 0,V.descriptionHighlights=void 0,V.detailHighlights=void 0,V.hidden=V.item?!V.item.alwaysShow:!0),V.item?V.separator=void 0:V.separator&&(V.hidden=!0),!this.sortByLabel){const $e=V.index&&this._inputElements[V.index-1]||void 0;$e?.type==="separator"&&!$e.buttons&&(L=$e),L&&!V.hidden&&(V.separator=L,L=void 0)}})}return this._setElementsToTree(this._sortByLabel&&r?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const r=this._tree.getFocus().filter(L=>L instanceof $s),p=this._allVisibleChecked(r);for(const L of r)L.checkboxDisabled||(L.checked=!p)})}style(r){this._tree.style(r)}toggleHover(){const r=this._tree.getFocus()[0];if(!r?.saneTooltip||!(r instanceof $s))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(r);const p=new P.Cm;p.add(this._tree.onDidChangeFocus(L=>{L.elements[0]instanceof $s&&this.showHover(L.elements[0])})),this._lastHover&&p.add(this._lastHover),this._elementDisposable.add(p)}_setElementsToTree(r){const p=new Array;for(const L of r)L instanceof Gr?p.push({element:L,collapsible:!1,collapsed:!1,children:L.children.map(V=>({element:V,collapsible:!1,collapsed:!1}))}):p.push({element:L,collapsible:!1,collapsed:!1});this._tree.setChildren(null,p)}_allVisibleChecked(r,p=!0){for(let L=0,V=r.length;L<V;L++){const X=r[L];if(!X.hidden)if(X.checked)p=!0;else return!1}return p}_updateCheckedObservables(){(0,qn.Rn)(r=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),r);const p=this._itemElements.filter(L=>L.checked).length;this._checkedCountObservable.set(p,r),this._checkedElementsObservable.set(this.getCheckedElements(),r)})}showHover(r){this._lastHover&&!this._lastHover.isDisposed&&(this.hoverDelegate.onDidHideHover?.(),this._lastHover?.dispose()),!(!r.element||!r.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:r.saneTooltip,target:r.element,linkHandler:p=>{this.linkOpenerDelegate(p)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};Bl([Tl.B],el.prototype,"onDidChangeFocus",null),Bl([Tl.B],el.prototype,"onDidChangeSelection",null),el=Bl([Tc(4,dt._Y),Tc(5,Rn.j)],el);function Mu(de,r){const{text:p,iconOffsets:L}=r;if(!L||L.length===0)return Da(de,p);const V=(0,M.NB)(p," "),X=p.length-V.length,ge=Da(de,V);if(ge)for(const De of ge){const $e=L[De.start+X]+X;De.start+=$e,De.end+=$e}return ge}function Da(de,r){const p=r.toLowerCase().indexOf(de.toLowerCase());return p!==-1?[{start:p,end:p+de.length}]:null}function Nu(de,r,p){const L=de.labelHighlights||[],V=r.labelHighlights||[];return L.length&&!V.length?-1:!L.length&&V.length?1:L.length===0&&V.length===0?0:sh(de.saneSortLabel,r.saneSortLabel,p)}var Tu=c(4977);const ah={weight:200,when:te.M$.and(te.M$.equals(Al,"quickPick"),xr),metadata:{description:(0,D.kg)("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function ho(de,r={}){_e.f.registerCommandAndKeybindingRule({...ah,...de,secondary:Vl(de.primary,de.secondary??[],r)})}const Hl=Wn.zx?256:2048;function Vl(de,r,p={}){return p.withAltMod&&r.push(512+de),p.withCtrlMod&&(r.push(Hl+de),p.withAltMod&&r.push(512+Hl+de)),p.withCmdMod&&Wn.zx&&(r.push(2048+de),p.withCtrlMod&&r.push(2304+de),p.withAltMod&&(r.push(2560+de),p.withCtrlMod&&r.push(2816+de))),r}function po(de,r){return p=>{const L=p.get(vn.GK).currentQuickInput;if(L)return r&&L.quickNavigate?L.focus(r):L.focus(de)}}ho({id:"quickInput.pageNext",primary:12,handler:po(vn.Fp.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),ho({id:"quickInput.pagePrevious",primary:11,handler:po(vn.Fp.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),ho({id:"quickInput.first",primary:Hl+14,handler:po(vn.Fp.First)},{withAltMod:!0,withCmdMod:!0}),ho({id:"quickInput.last",primary:Hl+13,handler:po(vn.Fp.Last)},{withAltMod:!0,withCmdMod:!0}),ho({id:"quickInput.next",primary:18,handler:po(vn.Fp.Next)},{withCtrlMod:!0}),ho({id:"quickInput.previous",primary:16,handler:po(vn.Fp.Previous)},{withCtrlMod:!0});const Ea=(0,D.kg)("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),lh=(0,D.kg)("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");Wn.zx?(ho({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:po(vn.Fp.NextSeparator,vn.Fp.Next),metadata:{description:Ea}}),ho({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:po(vn.Fp.NextSeparator)},{withCtrlMod:!0}),ho({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:po(vn.Fp.PreviousSeparator,vn.Fp.Previous),metadata:{description:lh}}),ho({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:po(vn.Fp.PreviousSeparator)},{withCtrlMod:!0})):(ho({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:po(vn.Fp.NextSeparator,vn.Fp.Next),metadata:{description:Ea}}),ho({id:"quickInput.nextSeparator",primary:2578,handler:po(vn.Fp.NextSeparator)}),ho({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:po(vn.Fp.PreviousSeparator,vn.Fp.Previous),metadata:{description:lh}}),ho({id:"quickInput.previousSeparator",primary:2576,handler:po(vn.Fp.PreviousSeparator)})),ho({id:"quickInput.acceptInBackground",when:te.M$.and(ah.when,te.M$.or(Tu.J7.negate(),is)),primary:17,weight:250,handler:de=>{de.get(vn.GK).currentQuickInput?.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var Ru=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},Rc=function(de,r){return function(p,L){r(p,L,de)}},Pc;const qs=Y.$;let Ac=class extends P.jG{static{Pc=this}static{this.MAX_WIDTH=600}get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(r,p,L,V){super(),this.options=r,this.layoutService=p,this.instantiationService=L,this.contextKeyService=V,this.enabled=!0,this.onDidAcceptEmitter=this._register(new ot.vl),this.onDidCustomEmitter=this._register(new ot.vl),this.onDidTriggerButtonEmitter=this._register(new ot.vl),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new ot.vl),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new ot.vl),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=eh.bindTo(this.contextKeyService),this.quickInputTypeContext=Ya.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=Zs.bindTo(this.contextKeyService),this.idPrefix=r.idPrefix,this._container=r.container,this.styles=r.styles,this._register(ot.Jh.runAndSubscribe(Y.Iv,({window:X,disposables:ge})=>this.registerKeyModsListeners(X,ge),{window:U.G,disposables:this._store})),this._register(Y.q3(X=>{this.ui&&Y.zk(this.ui.container)===X&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(r,p){const L=V=>{this.keyMods.ctrlCmd=V.ctrlKey||V.metaKey,this.keyMods.alt=V.altKey};for(const V of[Y.Bx.KEY_DOWN,Y.Bx.KEY_UP,Y.Bx.MOUSE_DOWN])p.add(Y.ko(r,V,L,!0))}getUI(r){if(this.ui)return r&&Y.zk(this._container)!==Y.zk(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const p=Y.BC(this._container,qs(".quick-input-widget.show-file-icons"));p.tabIndex=-1,p.style.display="none";const L=Y.li(p),V=Y.BC(p,qs(".quick-input-titlebar")),X=this._register(new Hi.E(V,{hoverDelegate:this.options.hoverDelegate}));X.domNode.classList.add("quick-input-left-action-bar");const ge=Y.BC(V,qs(".quick-input-title")),De=this._register(new Hi.E(V,{hoverDelegate:this.options.hoverDelegate}));De.domNode.classList.add("quick-input-right-action-bar");const $e=Y.BC(p,qs(".quick-input-header")),tt=Y.BC($e,qs("input.quick-input-check-all"));tt.type="checkbox",tt.setAttribute("aria-label",(0,D.kg)("quickInput.checkAll","Toggle all checkboxes")),this._register(Y.b2(tt,Y.Bx.CHANGE,Tn=>{const go=tt.checked;Ss.setAllVisibleChecked(go)})),this._register(Y.ko(tt,Y.Bx.CLICK,Tn=>{(Tn.x||Tn.y)&&_i.setFocus()}));const ft=Y.BC($e,qs(".quick-input-description")),Nt=Y.BC($e,qs(".quick-input-and-message")),Jt=Y.BC(Nt,qs(".quick-input-filter")),_i=this._register(new Wl(Jt,this.styles.inputBox,this.styles.toggle));_i.setAttribute("aria-describedby",`${this.idPrefix}message`);const Gi=Y.BC(Jt,qs(".quick-input-visible-count"));Gi.setAttribute("aria-live","polite"),Gi.setAttribute("aria-atomic","true");const kn=new Ic.x(Gi,{countFormat:(0,D.kg)({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),Gn=Y.BC(Jt,qs(".quick-input-count"));Gn.setAttribute("aria-live","polite");const Pn=new Ic.x(Gn,{countFormat:(0,D.kg)({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),as=this._register(new Hi.E($e,{hoverDelegate:this.options.hoverDelegate}));as.domNode.classList.add("quick-input-inline-action-bar");const Nn=Y.BC($e,qs(".quick-input-action")),fn=this._register(new Do.$(Nn,this.styles.button));fn.label=(0,D.kg)("ok","OK"),this._register(fn.onDidClick(Tn=>{this.onDidAcceptEmitter.fire()}));const hs=Y.BC($e,qs(".quick-input-action")),So=this._register(new Do.$(hs,{...this.styles.button,supportIcons:!0}));So.label=(0,D.kg)("custom","Custom"),this._register(So.onDidClick(Tn=>{this.onDidCustomEmitter.fire()}));const Ts=Y.BC(Nt,qs(`#${this.idPrefix}message.quick-input-message`)),Oa=this._register(new ba(p,this.styles.progressBar));Oa.getContainer().classList.add("quick-input-progress");const Un=Y.BC(p,qs(".quick-input-html-widget"));Un.tabIndex=-1;const bs=Y.BC(p,qs(".quick-input-description")),ao=this.idPrefix+"list",Ss=this._register(this.instantiationService.createInstance(el,p,this.options.hoverDelegate,this.options.linkOpenerDelegate,ao));_i.setAttribute("aria-controls",ao),this._register(Ss.onDidChangeFocus(()=>{_i.setAttribute("aria-activedescendant",Ss.getActiveDescendant()??"")})),this._register(Ss.onChangedAllVisibleChecked(Tn=>{tt.checked=Tn})),this._register(Ss.onChangedVisibleCount(Tn=>{kn.setCount(Tn)})),this._register(Ss.onChangedCheckedCount(Tn=>{Pn.setCount(Tn)})),this._register(Ss.onLeave(()=>{setTimeout(()=>{this.controller&&(_i.setFocus(),this.controller instanceof Ca&&this.controller.canSelectMany&&Ss.clearFocus())},0)}));const ul=Y.w5(p);return this._register(ul),this._register(Y.ko(p,Y.Bx.FOCUS,Tn=>{const go=this.getUI();if(Y.QX(Tn.relatedTarget,go.inputContainer)){const da=go.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==da&&this.endOfQuickInputBoxContext.set(da)}Y.QX(Tn.relatedTarget,go.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=Y.sb(Tn.relatedTarget)?Tn.relatedTarget:void 0)},!0)),this._register(ul.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(vn.kF.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(_i.onKeyDown(Tn=>{const go=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==go&&this.endOfQuickInputBoxContext.set(go)})),this._register(Y.ko(p,Y.Bx.FOCUS,Tn=>{_i.setFocus()})),this._register(Y.b2(p,Y.Bx.KEY_DOWN,Tn=>{if(!Y.QX(Tn.target,Un))switch(Tn.keyCode){case 3:Y.fs.stop(Tn,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:Y.fs.stop(Tn,!0),this.hide(vn.kF.Gesture);break;case 2:if(!Tn.altKey&&!Tn.ctrlKey&&!Tn.metaKey){const go=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(p.classList.contains("show-checkboxes")?go.push("input"):go.push("input[type=text]"),this.getUI().list.displayed&&go.push(".monaco-list"),this.getUI().message&&go.push(".quick-input-message a"),this.getUI().widget){if(Y.QX(Tn.target,this.getUI().widget))break;go.push(".quick-input-html-widget")}const da=p.querySelectorAll(go.join(", "));Tn.shiftKey&&Tn.target===da[0]?(Y.fs.stop(Tn,!0),Ss.clearFocus()):!Tn.shiftKey&&Y.QX(Tn.target,da[da.length-1])&&(Y.fs.stop(Tn,!0),da[0].focus())}break;case 10:Tn.ctrlKey&&(Y.fs.stop(Tn,!0),this.getUI().list.toggleHover());break}})),this.ui={container:p,styleSheet:L,leftActionBar:X,titleBar:V,title:ge,description1:bs,description2:ft,widget:Un,rightActionBar:De,inlineActionBar:as,checkAll:tt,inputContainer:Nt,filterContainer:Jt,inputBox:_i,visibleCountContainer:Gi,visibleCount:kn,countContainer:Gn,count:Pn,okContainer:Nn,ok:fn,message:Ts,customButtonContainer:hs,customButton:So,list:Ss,progressBar:Oa,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:Tn=>this.show(Tn),hide:()=>this.hide(),setVisibilities:Tn=>this.setVisibilities(Tn),setEnabled:Tn=>this.setEnabled(Tn),setContextKey:Tn=>this.options.setContextKey(Tn),linkOpenerDelegate:Tn=>this.options.linkOpenerDelegate(Tn)},this.updateStyles(),this.ui}reparentUI(r){this.ui&&(this._container=r,Y.BC(this._container,this.ui.container))}pick(r,p={},L=un.XO.None){return new Promise((V,X)=>{let ge=ft=>{ge=V,p.onKeyMods?.(De.keyMods),V(ft)};if(L.isCancellationRequested){ge(void 0);return}const De=this.createQuickPick({useSeparators:!0});let $e;const tt=[De,De.onDidAccept(()=>{if(De.canSelectMany)ge(De.selectedItems.slice()),De.hide();else{const ft=De.activeItems[0];ft&&(ge(ft),De.hide())}}),De.onDidChangeActive(ft=>{const Nt=ft[0];Nt&&p.onDidFocus&&p.onDidFocus(Nt)}),De.onDidChangeSelection(ft=>{if(!De.canSelectMany){const Nt=ft[0];Nt&&(ge(Nt),De.hide())}}),De.onDidTriggerItemButton(ft=>p.onDidTriggerItemButton&&p.onDidTriggerItemButton({...ft,removeItem:()=>{const Nt=De.items.indexOf(ft.item);if(Nt!==-1){const Jt=De.items.slice(),_i=Jt.splice(Nt,1),Gi=De.activeItems.filter(Gn=>Gn!==_i[0]),kn=De.keepScrollPosition;De.keepScrollPosition=!0,De.items=Jt,Gi&&(De.activeItems=Gi),De.keepScrollPosition=kn}}})),De.onDidTriggerSeparatorButton(ft=>p.onDidTriggerSeparatorButton?.(ft)),De.onDidChangeValue(ft=>{$e&&!ft&&(De.activeItems.length!==1||De.activeItems[0]!==$e)&&(De.activeItems=[$e])}),L.onCancellationRequested(()=>{De.hide()}),De.onDidHide(()=>{(0,P.AS)(tt),ge(void 0)})];De.title=p.title,p.value&&(De.value=p.value),De.canSelectMany=!!p.canPickMany,De.placeholder=p.placeHolder,De.ignoreFocusOut=!!p.ignoreFocusLost,De.matchOnDescription=!!p.matchOnDescription,De.matchOnDetail=!!p.matchOnDetail,De.matchOnLabel=p.matchOnLabel===void 0||p.matchOnLabel,De.quickNavigate=p.quickNavigate,De.hideInput=!!p.hideInput,De.contextKey=p.contextKey,De.busy=!0,Promise.all([r,p.activeItem]).then(([ft,Nt])=>{$e=Nt,De.busy=!1,De.items=ft,De.canSelectMany&&(De.selectedItems=ft.filter(Jt=>Jt.type!=="separator"&&Jt.picked)),$e&&(De.activeItems=[$e])}),De.show(),Promise.resolve(r).then(void 0,ft=>{X(ft),De.hide()})})}createQuickPick(r={useSeparators:!1}){const p=this.getUI(!0);return new Ca(p)}createInputBox(){const r=this.getUI(!0);return new th(r)}show(r){const p=this.getUI(!0);this.onShowEmitter.fire();const L=this.controller;this.controller=r,L?.didHide(),this.setEnabled(!0),p.leftActionBar.clear(),p.title.textContent="",p.description1.textContent="",p.description2.textContent="",Y.Ln(p.widget),p.rightActionBar.clear(),p.inlineActionBar.clear(),p.checkAll.checked=!1,p.inputBox.placeholder="",p.inputBox.password=!1,p.inputBox.showDecoration(Xt.A.Ignore),p.visibleCount.setCount(0),p.count.setCount(0),Y.Ln(p.message),p.progressBar.stop(),p.list.setElements([]),p.list.matchOnDescription=!1,p.list.matchOnDetail=!1,p.list.matchOnLabel=!0,p.list.sortByLabel=!0,p.ignoreFocusOut=!1,p.inputBox.toggles=void 0;const V=this.options.backKeybindingLabel();On.tooltip=V?(0,D.kg)("quickInput.backWithKeybinding","Back ({0})",V):(0,D.kg)("quickInput.back","Back"),p.container.style.display="",this.updateLayout(),p.inputBox.setFocus(),this.quickInputTypeContext.set(r.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(r){const p=this.getUI();p.title.style.display=r.title?"":"none",p.description1.style.display=r.description&&(r.inputBox||r.checkAll)?"":"none",p.description2.style.display=r.description&&!(r.inputBox||r.checkAll)?"":"none",p.checkAll.style.display=r.checkAll?"":"none",p.inputContainer.style.display=r.inputBox?"":"none",p.filterContainer.style.display=r.inputBox?"":"none",p.visibleCountContainer.style.display=r.visibleCount?"":"none",p.countContainer.style.display=r.count?"":"none",p.okContainer.style.display=r.ok?"":"none",p.customButtonContainer.style.display=r.customButton?"":"none",p.message.style.display=r.message?"":"none",p.progressBar.getContainer().style.display=r.progressBar?"":"none",p.list.displayed=!!r.list,p.container.classList.toggle("show-checkboxes",!!r.checkBox),p.container.classList.toggle("hidden-input",!r.inputBox&&!r.description),this.updateLayout()}setEnabled(r){if(r!==this.enabled){this.enabled=r;for(const p of this.getUI().leftActionBar.viewItems)p.action.enabled=r;for(const p of this.getUI().rightActionBar.viewItems)p.action.enabled=r;this.getUI().checkAll.disabled=!r,this.getUI().inputBox.enabled=r,this.getUI().ok.enabled=r,this.getUI().list.enabled=r}}hide(r){const p=this.controller;if(!p)return;p.willHide(r);const L=this.ui?.container,V=L&&!Y.nR(L);if(this.controller=null,this.onHideEmitter.fire(),L&&(L.style.display="none"),!V){let X=this.previousFocusElement;for(;X&&!X.offsetParent;)X=X.parentElement??void 0;X?.offsetParent?(X.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}p.didHide(r)}layout(r,p){this.dimension=r,this.titleBarOffset=p,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const r=this.ui.container.style,p=Math.min(this.dimension.width*.62,Pc.MAX_WIDTH);r.width=p+"px",r.marginLeft="-"+p/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(r){this.styles=r,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:r,quickInputBackground:p,quickInputForeground:L,widgetBorder:V,widgetShadow:X}=this.styles.widget;this.ui.titleBar.style.backgroundColor=r??"",this.ui.container.style.backgroundColor=p??"",this.ui.container.style.color=L??"",this.ui.container.style.border=V?`1px solid ${V}`:"",this.ui.container.style.boxShadow=X?`0 0 8px 2px ${X}`:"",this.ui.list.style(this.styles.list);const ge=[];this.styles.pickerGroup.pickerGroupBorder&&ge.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&ge.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&ge.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(ge.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&ge.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&ge.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&ge.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&ge.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&ge.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),ge.push("}"));const De=ge.join(`
`);De!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=De)}}};Ac=Pc=Ru([Rc(1,Ye),Rc(2,dt._Y),Rc(3,te.fN)],Ac);var Ul=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},Ir=function(de,r){return function(p,L){r(p,L,de)}};let Qr=class extends Wt.lR{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(Ga))),this._quickAccess}constructor(r,p,L,V,X){super(L),this.instantiationService=r,this.contextKeyService=p,this.layoutService=V,this.configurationService=X,this._onShow=this._register(new ot.vl),this._onHide=this._register(new ot.vl),this.contexts=new Map}createController(r=this.layoutService,p){const L={idPrefix:"quickInput_",container:r.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:X=>this.setContextKey(X),linkOpenerDelegate:X=>{this.instantiationService.invokeFunction(ge=>{ge.get(Zn.C).open(X,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>r.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(Xo))},V=this._register(this.instantiationService.createInstance(Ac,{...L,...p}));return V.layout(r.activeContainerDimension,r.activeContainerOffset.quickPickTop),this._register(r.onDidLayoutActiveContainer(X=>{(0,Y.zk)(r.activeContainer)===(0,Y.zk)(V.container)&&V.layout(X,r.activeContainerOffset.quickPickTop)})),this._register(r.onDidChangeActiveContainer(()=>{V.isVisible()||V.layout(r.activeContainerDimension,r.activeContainerOffset.quickPickTop)})),this._register(V.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(V.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),V}setContextKey(r){let p;r&&(p=this.contexts.get(r),p||(p=new te.N1(r,!1).bindTo(this.contextKeyService),this.contexts.set(r,p))),!(p&&p.get())&&(this.resetContextKeys(),p?.set(!0))}resetContextKeys(){this.contexts.forEach(r=>{r.get()&&r.reset()})}pick(r,p,L=un.XO.None){return this.controller.pick(r,p,L)}createQuickPick(r={useSeparators:!1}){return this.controller.createQuickPick(r)}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:(0,wi.GuP)(wi.ELA),quickInputForeground:(0,wi.GuP)(wi.HJZ),quickInputTitleBackground:(0,wi.GuP)(wi.er1),widgetBorder:(0,wi.GuP)(wi.DSL),widgetShadow:(0,wi.GuP)(wi.f9l)},inputBox:Ps.ho,toggle:Ps.mk,countBadge:Ps.m$,button:Ps.cv,progressBar:Ps.oJ,keybindingLabel:Ps.ir,list:(0,Ps.t8)({listBackground:wi.ELA,listFocusBackground:wi.AlL,listFocusForeground:wi.nH,listInactiveFocusForeground:wi.nH,listInactiveSelectionIconForeground:wi.c7i,listInactiveFocusBackground:wi.AlL,listFocusOutline:wi.buw,listInactiveFocusOutline:wi.buw}),pickerGroup:{pickerGroupBorder:(0,wi.GuP)(wi.iwL),pickerGroupForeground:(0,wi.GuP)(wi.NBf)}}}};Qr=Ul([Ir(0,dt._Y),Ir(1,te.fN),Ir(2,Wt.Gy),Ir(3,Ye),Ir(4,nn.pG)],Qr);var Oc=c(74730),Fc=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},qo=function(de,r){return function(p,L){r(p,L,de)}};let xa=class extends Qr{constructor(r,p,L,V,X,ge){super(p,L,V,new we(r.getContainerDomNode(),X),ge),this.host=void 0;const De=Yr.get(r);if(De){const $e=De.widget;this.host={_serviceBrand:void 0,get mainContainer(){return $e.getDomNode()},getContainer(){return $e.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[$e.getDomNode()]},get activeContainer(){return $e.getDomNode()},get mainContainerDimension(){return r.getLayoutInfo()},get activeContainerDimension(){return r.getLayoutInfo()},get onDidLayoutMainContainer(){return r.onDidLayoutChange},get onDidLayoutActiveContainer(){return r.onDidLayoutChange},get onDidLayoutContainer(){return ot.Jh.map(r.onDidLayoutChange,tt=>({container:$e.getDomNode(),dimension:tt}))},get onDidChangeActiveContainer(){return ot.Jh.None},get onDidAddContainer(){return ot.Jh.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>r.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};xa=Fc([qo(1,dt._Y),qo(2,te.fN),qo(3,Wt.Gy),qo(4,I.T),qo(5,nn.pG)],xa);let rs=class{get activeService(){const r=this.codeEditorService.getFocusedCodeEditor();if(!r)throw new Error("Quick input service needs a focused editor to work.");let p=this.mapEditorToService.get(r);if(!p){const L=p=this.instantiationService.createInstance(xa,r);this.mapEditorToService.set(r,p),(0,Oc.P)(r.onDidDispose)(()=>{L.dispose(),this.mapEditorToService.delete(r)})}return p}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(r,p){this.instantiationService=r,this.codeEditorService=p,this.mapEditorToService=new Map}pick(r,p,L=un.XO.None){return this.activeService.pick(r,p,L)}createQuickPick(r={useSeparators:!1}){return this.activeService.createQuickPick(r)}createInputBox(){return this.activeService.createInputBox()}};rs=Fc([qo(0,dt._Y),qo(1,I.T)],rs);class Yr{static{this.ID="editor.controller.quickInput"}static get(r){return r.getContribution(Yr.ID)}constructor(r){this.editor=r,this.widget=new tl(this.editor)}dispose(){this.widget.dispose()}}class tl{static{this.ID="editor.contrib.quickInputWidget"}constructor(r){this.codeEditor=r,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return tl.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}(0,A.HW)(Yr.ID,Yr,4);var Zr=c(14318),_o=c(65327),Wc=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},Bo=function(de,r){return function(p,L){r(p,L,de)}};let il=class extends P.jG{constructor(r,p,L){super(),this._contextKeyService=r,this._layoutService=p,this._configurationService=L,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new ot.vl,this._onDidChangeReducedMotion=new ot.vl,this._onDidChangeLinkUnderline=new ot.vl,this._accessibilityModeEnabledContext=Rn.f.bindTo(this._contextKeyService);const V=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(ge=>{ge.affectsConfiguration("editor.accessibilitySupport")&&(V(),this._onDidChangeScreenReaderOptimized.fire()),ge.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),V(),this._register(this.onDidChangeScreenReaderOptimized(()=>V()));const X=U.G.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=X.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(X),this.initLinkUnderlineListeners()}initReducedMotionListeners(r){this._register((0,Y.ko)(r,"change",()=>{this._systemMotionReduced=r.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const p=()=>{const L=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",L),this._layoutService.mainContainer.classList.toggle("enable-motion",!L)};p(),this._register(this.onDidChangeReducedMotion(()=>p()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(p=>{if(p.affectsConfiguration("accessibility.underlineLinks")){const L=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=L,this._onDidChangeLinkUnderline.fire()}}));const r=()=>{const p=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",p)};r(),this._register(this.onDidChangeLinkUnderlines(()=>r()))}onDidChangeLinkUnderlines(r){return this._onDidChangeLinkUnderline.event(r)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const r=this._configurationService.getValue("editor.accessibilitySupport");return r==="on"||r==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const r=this._configMotionReduced;return r==="on"||r==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};il=Wc([Bo(0,te.fN),Bo(1,Ye),Bo(2,nn.pG)],il);var Bc=c(51159),ko=c(79475),Mr=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},Xr=function(de,r){return function(p,L){r(p,L,de)}},Nr;const nl="application/vnd.code.resources";let Io=class extends P.jG{static{Nr=this}constructor(r,p){super(),this.layoutService=r,this.logService=p,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,($t.nr||$t.c8)&&this.installWebKitWriteTextWorkaround(),this._register(ot.Jh.runAndSubscribe(Y.Iv,({window:L,disposables:V})=>{V.add((0,Y.ko)(L.document,"copy",()=>this.clearResourcesState()))},{window:U.G,disposables:this._store}))}installWebKitWriteTextWorkaround(){const r=()=>{const p=new C.Zv;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=p,(0,Y.fz)().navigator.clipboard.write([new ClipboardItem({"text/plain":p.p})]).catch(async L=>{(!(L instanceof Error)||L.name!=="NotAllowedError"||!p.isRejected)&&this.logService.error(L)})};this._register(ot.Jh.runAndSubscribe(this.layoutService.onDidAddContainer,({container:p,disposables:L})=>{L.add((0,Y.ko)(p,"click",r)),L.add((0,Y.ko)(p,"keydown",r))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(r,p){if(this.clearResourcesState(),p){this.mapTextToType.set(p,r);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(r);try{return await(0,Y.fz)().navigator.clipboard.writeText(r)}catch{}this.fallbackWriteText(r)}fallbackWriteText(r){const p=(0,Y.a)(),L=p.activeElement,V=p.body.appendChild((0,Y.$)("textarea",{"aria-hidden":!0}));V.style.height="1px",V.style.width="1px",V.style.position="absolute",V.value=r,V.focus(),V.select(),p.execCommand("copy"),(0,Y.sb)(L)&&L.focus(),V.remove()}async readText(r){if(r)return this.mapTextToType.get(r)||"";try{return await(0,Y.fz)().navigator.clipboard.readText()}catch{}return""}async readFindText(){return this.findText}async writeFindText(r){this.findText=r}static{this.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3}async readResources(){try{const p=await(0,Y.fz)().navigator.clipboard.read();for(const L of p)if(L.types.includes(`web ${nl}`)){const V=await L.getType(`web ${nl}`);return JSON.parse(await V.text()).map(ge=>w.r.from(ge))}}catch{}const r=await this.computeResourcesStateHash();return this.resourcesStateHash!==r&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const r=await this.readText();return(0,ko.tW)(r.substring(0,Nr.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}};Io=Nr=Mr([Xr(0,Ye),Xr(1,N.rr)],Io);var sl=c(85653),hr=c(13697),zl=c(70264),Hc=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},Vc=function(de,r){return function(p,L){r(p,L,de)}};const ur="data-keybinding-context";class jl{constructor(r,p){this._id=r,this._parent=p,this._value=Object.create(null),this._value._contextId=r}get value(){return{...this._value}}setValue(r,p){return this._value[r]!==p?(this._value[r]=p,!0):!1}removeValue(r){return r in this._value?(delete this._value[r],!0):!1}getValue(r){const p=this._value[r];return typeof p>"u"&&this._parent?this._parent.getValue(r):p}}class oo extends jl{static{this.INSTANCE=new oo}constructor(){super(-1,null)}setValue(r,p){return!1}removeValue(r){return!1}getValue(r){}}class Ho extends jl{static{this._keyPrefix="config."}constructor(r,p,L){super(r,null),this._configurationService=p,this._values=zl.cB.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(V=>{if(V.source===7){const X=Array.from(this._values,([ge])=>ge);this._values.clear(),L.fire(new er(X))}else{const X=[];for(const ge of V.affectedKeys){const De=`config.${ge}`,$e=this._values.findSuperstr(De);$e!==void 0&&(X.push(...hr.f.map($e,([tt])=>tt)),this._values.deleteSuperstr(De)),this._values.has(De)&&(X.push(De),this._values.delete(De))}L.fire(new er(X))}})}dispose(){this._listener.dispose()}getValue(r){if(r.indexOf(Ho._keyPrefix)!==0)return super.getValue(r);if(this._values.has(r))return this._values.get(r);const p=r.substr(Ho._keyPrefix.length),L=this._configurationService.getValue(p);let V;switch(typeof L){case"number":case"boolean":case"string":V=L;break;default:Array.isArray(L)?V=JSON.stringify(L):V=L}return this._values.set(r,V),V}setValue(r,p){return super.setValue(r,p)}removeValue(r){return super.removeValue(r)}}class ka{constructor(r,p,L){this._service=r,this._key=p,this._defaultValue=L,this.reset()}set(r){this._service.setContext(this._key,r)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class Kl{constructor(r){this.key=r}affectsSome(r){return r.has(this.key)}allKeysContainedIn(r){return this.affectsSome(r)}}class er{constructor(r){this.keys=r}affectsSome(r){for(const p of this.keys)if(r.has(p))return!0;return!1}allKeysContainedIn(r){return this.keys.every(p=>r.has(p))}}class Uc{constructor(r){this.events=r}affectsSome(r){for(const p of this.events)if(p.affectsSome(r))return!0;return!1}allKeysContainedIn(r){return this.events.every(p=>p.allKeysContainedIn(r))}}function Hs(de,r){return de.allKeysContainedIn(new Set(Object.keys(r)))}class gr extends P.jG{constructor(r){super(),this._onDidChangeContext=this._register(new ot.fV({merge:p=>new Uc(p)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=r}createKey(r,p){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new ka(this,r,p)}bufferChangeEvents(r){this._onDidChangeContext.pause();try{r()}finally{this._onDidChangeContext.resume()}}createScoped(r){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Tr(this,r)}contextMatchesRules(r){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const p=this.getContextValuesContainer(this._myContextId);return r?r.evaluate(p):!0}getContextKeyValue(r){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(r)}setContext(r,p){if(this._isDisposed)return;const L=this.getContextValuesContainer(this._myContextId);L&&L.setValue(r,p)&&this._onDidChangeContext.fire(new Kl(r))}removeContext(r){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(r)&&this._onDidChangeContext.fire(new Kl(r))}getContext(r){return this._isDisposed?oo.INSTANCE:this.getContextValuesContainer(Ia(r))}dispose(){super.dispose(),this._isDisposed=!0}}let tr=class extends gr{constructor(r){super(0),this._contexts=new Map,this._lastContextId=0;const p=this._register(new Ho(this._myContextId,r,this._onDidChangeContext));this._contexts.set(this._myContextId,p)}getContextValuesContainer(r){return this._isDisposed?oo.INSTANCE:this._contexts.get(r)||oo.INSTANCE}createChildContext(r=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const p=++this._lastContextId;return this._contexts.set(p,new jl(p,this.getContextValuesContainer(r))),p}disposeContext(r){this._isDisposed||this._contexts.delete(r)}};tr=Hc([Vc(0,nn.pG)],tr);class Tr extends gr{constructor(r,p){if(super(r.createChildContext()),this._parentChangeListener=this._register(new P.HE),this._parent=r,this._updateParentChangeListener(),this._domNode=p,this._domNode.hasAttribute(ur)){let L="";this._domNode.classList&&(L=Array.from(this._domNode.classList.values()).join(", "))}this._domNode.setAttribute(ur,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(r=>{const L=this._parent.getContextValuesContainer(this._myContextId).value;Hs(r,L)||this._onDidChangeContext.fire(r)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(ur),super.dispose())}getContextValuesContainer(r){return this._isDisposed?oo.INSTANCE:this._parent.getContextValuesContainer(r)}createChildContext(r=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(r)}disposeContext(r){this._isDisposed||this._parent.disposeContext(r)}}function Ia(de){for(;de;){if(de.hasAttribute(ur)){const r=de.getAttribute(ur);return r?parseInt(r,10):NaN}de=de.parentElement}return 0}function Ms(de,r,p){de.get(te.fN).createKey(String(r),Rr(p))}function Rr(de){return(0,b.PI)(de,r=>{if(typeof r=="object"&&r.$mid===1)return w.r.revive(r).toString();if(r instanceof w.r)return r.toString()})}$n.w.registerCommand("_setContext",Ms),$n.w.registerCommand({id:"getContextKeyInfo",handler(){return[...te.N1.all()].sort((de,r)=>de.key.localeCompare(r.key))},metadata:{description:(0,D.kg)("getContextKeyInfo","A command that returns information about context keys"),args:[]}}),$n.w.registerCommand("_generateContextKeyInfo",function(){const de=[],r=new Set;for(const p of te.N1.all())r.has(p.key)||(r.add(p.key),de.push(p));de.sort((p,L)=>p.key.localeCompare(L.key))});var ns=c(60753);class eo{constructor(r,p){this.key=r,this.data=p,this.incoming=new Map,this.outgoing=new Map}}class $l{constructor(r){this._hashFn=r,this._nodes=new Map}roots(){const r=[];for(const p of this._nodes.values())p.outgoing.size===0&&r.push(p);return r}insertEdge(r,p){const L=this.lookupOrInsertNode(r),V=this.lookupOrInsertNode(p);L.outgoing.set(V.key,V),V.incoming.set(L.key,L)}removeNode(r){const p=this._hashFn(r);this._nodes.delete(p);for(const L of this._nodes.values())L.outgoing.delete(p),L.incoming.delete(p)}lookupOrInsertNode(r){const p=this._hashFn(r);let L=this._nodes.get(p);return L||(L=new eo(p,r),this._nodes.set(p,L)),L}isEmpty(){return this._nodes.size===0}toString(){const r=[];for(const[p,L]of this._nodes)r.push(`${p}
	(-> incoming)[${[...L.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...L.outgoing.keys()].join(",")}]
`);return r.join(`
`)}findCycleSlow(){for(const[r,p]of this._nodes){const L=new Set([r]),V=this._findCycle(p,L);if(V)return V}}_findCycle(r,p){for(const[L,V]of r.outgoing){if(p.has(L))return[...p,L].join(" -> ");p.add(L);const X=this._findCycle(V,p);if(X)return X;p.delete(L)}}}var Ma=c(68624);const st=!1;class n extends Error{constructor(r){super("cyclic dependency between services"),this.message=r.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${r.toString()}`}}class a{constructor(r=new Ma.a,p=!1,L,V=st){this._services=r,this._strict=p,this._parent=L,this._enableTracing=V,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(dt._Y,this),this._globalGraph=V?L?._globalGraph??new $l(X=>X):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,(0,P.AS)(this._children),this._children.clear();for(const r of this._servicesToMaybeDispose)(0,P.Xm)(r)&&r.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(r,p){this._throwIfDisposed();const L=this,V=new class extends a{dispose(){L._children.delete(V),super.dispose()}}(r,this._strict,this,this._enableTracing);return this._children.add(V),p?.add(V),V}invokeFunction(r,...p){this._throwIfDisposed();const L=f.traceInvocation(this._enableTracing,r);let V=!1;try{return r({get:ge=>{if(V)throw(0,d.iH)("service accessor is only valid during the invocation of its target method");const De=this._getOrCreateServiceInstance(ge,L);if(!De)throw new Error(`[invokeFunction] unknown service '${ge}'`);return De}},...p)}finally{V=!0,L.stop()}}createInstance(r,...p){this._throwIfDisposed();let L,V;return r instanceof ns.d?(L=f.traceCreation(this._enableTracing,r.ctor),V=this._createInstance(r.ctor,r.staticArguments.concat(p),L)):(L=f.traceCreation(this._enableTracing,r),V=this._createInstance(r,p,L)),L.stop(),V}_createInstance(r,p=[],L){const V=dt._$.getServiceDependencies(r).sort((De,$e)=>De.index-$e.index),X=[];for(const De of V){const $e=this._getOrCreateServiceInstance(De.id,L);$e||this._throwIfStrict(`[createInstance] ${r.name} depends on UNKNOWN service ${De.id}.`,!1),X.push($e)}const ge=V.length>0?V[0].index:p.length;if(p.length!==ge){const De=ge-p.length;De>0?p=p.concat(new Array(De)):p=p.slice(0,ge)}return Reflect.construct(r,p.concat(X))}_setCreatedServiceInstance(r,p){if(this._services.get(r)instanceof ns.d)this._services.set(r,p);else if(this._parent)this._parent._setCreatedServiceInstance(r,p);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(r){const p=this._services.get(r);return!p&&this._parent?this._parent._getServiceInstanceOrDescriptor(r):p}_getOrCreateServiceInstance(r,p){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(r));const L=this._getServiceInstanceOrDescriptor(r);return L instanceof ns.d?this._safeCreateAndCacheServiceInstance(r,L,p.branch(r,!0)):(p.branch(r,!1),L)}_safeCreateAndCacheServiceInstance(r,p,L){if(this._activeInstantiations.has(r))throw new Error(`illegal state - RECURSIVELY instantiating service '${r}'`);this._activeInstantiations.add(r);try{return this._createAndCacheServiceInstance(r,p,L)}finally{this._activeInstantiations.delete(r)}}_createAndCacheServiceInstance(r,p,L){const V=new $l($e=>$e.id.toString());let X=0;const ge=[{id:r,desc:p,_trace:L}],De=new Set;for(;ge.length;){const $e=ge.pop();if(!De.has(String($e.id))){if(De.add(String($e.id)),V.lookupOrInsertNode($e),X++>1e3)throw new n(V);for(const tt of dt._$.getServiceDependencies($e.desc.ctor)){const ft=this._getServiceInstanceOrDescriptor(tt.id);if(ft||this._throwIfStrict(`[createInstance] ${r} depends on ${tt.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String($e.id),String(tt.id)),ft instanceof ns.d){const Nt={id:tt.id,desc:ft,_trace:$e._trace.branch(tt.id,!0)};V.insertEdge($e,Nt),ge.push(Nt)}}}}for(;;){const $e=V.roots();if($e.length===0){if(!V.isEmpty())throw new n(V);break}for(const{data:tt}of $e){if(this._getServiceInstanceOrDescriptor(tt.id)instanceof ns.d){const Nt=this._createServiceInstanceWithOwner(tt.id,tt.desc.ctor,tt.desc.staticArguments,tt.desc.supportsDelayedInstantiation,tt._trace);this._setCreatedServiceInstance(tt.id,Nt)}V.removeNode(tt)}}return this._getServiceInstanceOrDescriptor(r)}_createServiceInstanceWithOwner(r,p,L=[],V,X){if(this._services.get(r)instanceof ns.d)return this._createServiceInstance(r,p,L,V,X,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(r,p,L,V,X);throw new Error(`illegalState - creating UNKNOWN service instance ${p.name}`)}_createServiceInstance(r,p,L=[],V,X,ge){if(V){const De=new a(void 0,this._strict,this,this._enableTracing);De._globalGraphImplicitDependency=String(r);const $e=new Map,tt=new C.F6(()=>{const ft=De._createInstance(p,L,X);for(const[Nt,Jt]of $e){const _i=ft[Nt];if(typeof _i=="function")for(const Gi of Jt)Gi.disposable=_i.apply(ft,Gi.listener)}return $e.clear(),ge.add(ft),ft});return new Proxy(Object.create(null),{get(ft,Nt){if(!tt.isInitialized&&typeof Nt=="string"&&(Nt.startsWith("onDid")||Nt.startsWith("onWill"))){let Gi=$e.get(Nt);return Gi||(Gi=new Pt.w,$e.set(Nt,Gi)),(Gn,Pn,as)=>{if(tt.isInitialized)return tt.value[Nt](Gn,Pn,as);{const Nn={listener:[Gn,Pn,as],disposable:void 0},fn=Gi.push(Nn);return(0,P.s)(()=>{fn(),Nn.disposable?.dispose()})}}}if(Nt in ft)return ft[Nt];const Jt=tt.value;let _i=Jt[Nt];return typeof _i!="function"||(_i=_i.bind(Jt),ft[Nt]=_i),_i},set(ft,Nt,Jt){return tt.value[Nt]=Jt,!0},getPrototypeOf(ft){return p.prototype}})}else{const De=this._createInstance(p,L,X);return ge.add(De),De}}_throwIfStrict(r,p){if(this._strict)throw new Error(r)}}class f{static{this.all=new Set}static{this._None=new class extends f{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(r,p){return r?new f(2,p.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):f._None}static traceCreation(r,p){return r?new f(1,p.name):f._None}static{this._totals=0}constructor(r,p){this.type=r,this.name=p,this._start=Date.now(),this._dep=[]}branch(r,p){const L=new f(3,r.toString());return this._dep.push([r,p,L]),L}stop(){const r=Date.now()-this._start;f._totals+=r;let p=!1;function L(X,ge){const De=[],$e=new Array(X+1).join("	");for(const[tt,ft,Nt]of ge._dep)if(ft&&Nt){p=!0,De.push(`${$e}CREATES -> ${tt}`);const Jt=L(X+1,Nt);Jt&&De.push(Jt)}else De.push(`${$e}uses -> ${tt}`);return De.join(`
`)}const V=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${L(1,this)}`,`DONE, took ${r.toFixed(2)}ms (grand total ${f._totals.toFixed(2)}ms)`];(r>2||p)&&f.all.add(V.join(`
`))}}var y=c(21358);const T=new Set([m.ny.inMemory,m.ny.vscodeSourceControl,m.ny.walkThrough,m.ny.walkThroughSnippet,m.ny.vscodeChatCodeBlock]);class J{constructor(){this._byResource=new Kn.fT,this._byOwner=new Map}set(r,p,L){let V=this._byResource.get(r);V||(V=new Map,this._byResource.set(r,V)),V.set(p,L);let X=this._byOwner.get(p);X||(X=new Kn.fT,this._byOwner.set(p,X)),X.set(r,L)}get(r,p){return this._byResource.get(r)?.get(p)}delete(r,p){let L=!1,V=!1;const X=this._byResource.get(r);X&&(L=X.delete(p));const ge=this._byOwner.get(p);if(ge&&(V=ge.delete(r)),L!==V)throw new Error("illegal state");return L&&V}values(r){return typeof r=="string"?this._byOwner.get(r)?.values()??hr.f.empty():w.r.isUri(r)?this._byResource.get(r)?.values()??hr.f.empty():hr.f.map(hr.f.concat(...this._byOwner.values()),p=>p[1])}}class se{constructor(r){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new Kn.fT,this._service=r,this._subscription=r.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(r){for(const p of r){const L=this._data.get(p);L&&this._substract(L);const V=this._resourceStats(p);this._add(V),this._data.set(p,V)}}_resourceStats(r){const p={errors:0,warnings:0,infos:0,unknowns:0};if(T.has(r.scheme))return p;for(const{severity:L}of this._service.read({resource:r}))L===y.cj.Error?p.errors+=1:L===y.cj.Warning?p.warnings+=1:L===y.cj.Info?p.infos+=1:p.unknowns+=1;return p}_substract(r){this.errors-=r.errors,this.warnings-=r.warnings,this.infos-=r.infos,this.unknowns-=r.unknowns}_add(r){this.errors+=r.errors,this.warnings+=r.warnings,this.infos+=r.infos,this.unknowns+=r.unknowns}}class be{constructor(){this._onMarkerChanged=new ot.uI({delay:0,merge:be._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new J,this._stats=new se(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(r,p){for(const L of p||[])this.changeOne(r,L,[])}changeOne(r,p,L){if((0,S.Ct)(L))this._data.delete(p,r)&&this._onMarkerChanged.fire([p]);else{const V=[];for(const X of L){const ge=be._toMarker(r,p,X);ge&&V.push(ge)}this._data.set(p,r,V),this._onMarkerChanged.fire([p])}}static _toMarker(r,p,L){let{code:V,severity:X,message:ge,source:De,startLineNumber:$e,startColumn:tt,endLineNumber:ft,endColumn:Nt,relatedInformation:Jt,tags:_i}=L;if(ge)return $e=$e>0?$e:1,tt=tt>0?tt:1,ft=ft>=$e?ft:$e,Nt=Nt>0?Nt:tt,{resource:p,owner:r,code:V,severity:X,message:ge,source:De,startLineNumber:$e,startColumn:tt,endLineNumber:ft,endColumn:Nt,relatedInformation:Jt,tags:_i}}changeAll(r,p){const L=[],V=this._data.values(r);if(V)for(const X of V){const ge=hr.f.first(X);ge&&(L.push(ge.resource),this._data.delete(ge.resource,r))}if((0,S.EI)(p)){const X=new Kn.fT;for(const{resource:ge,marker:De}of p){const $e=be._toMarker(r,ge,De);if(!$e)continue;const tt=X.get(ge);tt?tt.push($e):(X.set(ge,[$e]),L.push(ge))}for(const[ge,De]of X)this._data.set(ge,r,De)}L.length>0&&this._onMarkerChanged.fire(L)}read(r=Object.create(null)){let{owner:p,resource:L,severities:V,take:X}=r;if((!X||X<0)&&(X=-1),p&&L){const ge=this._data.get(L,p);if(ge){const De=[];for(const $e of ge)if(be._accept($e,V)){const tt=De.push($e);if(X>0&&tt===X)break}return De}else return[]}else if(!p&&!L){const ge=[];for(const De of this._data.values())for(const $e of De)if(be._accept($e,V)){const tt=ge.push($e);if(X>0&&tt===X)return ge}return ge}else{const ge=this._data.values(L??p),De=[];for(const $e of ge)for(const tt of $e)if(be._accept(tt,V)){const ft=De.push(tt);if(X>0&&ft===X)return De}return De}}static _accept(r,p){return p===void 0||(p&r.severity)===r.severity}static _merge(r){const p=new Kn.fT;for(const L of r)for(const V of L)p.set(V,!0);return Array.from(p.keys())}}var Oe=c(68669);class Ge extends P.jG{get configurationModel(){return this._configurationModel}constructor(r){super(),this.logService=r,this._configurationModel=Be.createEmptyModel(this.logService)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=Be.createEmptyModel(this.logService);const r=zt.O.as(Xn.Fd.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(r),r)}updateConfigurationModel(r,p){const L=this.getConfigurationDefaultOverrides();for(const V of r){const X=L[V],ge=p[V];X!==void 0?this._configurationModel.setValue(V,X):ge?this._configurationModel.setValue(V,ge.default):this._configurationModel.removeValue(V)}}}var je=c(13656);class nt extends P.jG{constructor(r,p=[]){super(),this.logger=new N.Dk([r,...p]),this._register(r.onDidChangeLogLevel(L=>this.setLevel(L)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(r){this.logger.setLevel(r)}getLevel(){return this.logger.getLevel()}trace(r,...p){this.logger.trace(r,...p)}debug(r,...p){this.logger.debug(r,...p)}info(r,...p){this.logger.info(r,...p)}warn(r,...p){this.logger.warn(r,...p)}error(r,...p){this.logger.error(r,...p)}}var lt=c(34593),bt=c(26390),xt=c(99523);class At{getParseResult(r){}}var Gt=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},ti=function(de,r){return function(p,L){r(p,L,de)}};class li{constructor(r){this.disposed=!1,this.model=r,this._onWillDispose=new ot.vl}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let ki=class{constructor(r){this.modelService=r}createModelReference(r){const p=this.modelService.getModel(r);return p?Promise.resolve(new P.BO(new li(p))):Promise.reject(new Error("Model not found"))}};ki=Gt([ti(0,K.IModelService)],ki);class Ti{static{this.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}}}show(){return Ti.NULL_PROGRESS_RUNNER}async showWhile(r,p){await r}}class Yi{withProgress(r,p,L){return p({report:()=>{}})}}class Ai{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class Ji{async confirm(r){return{confirmed:this.doConfirm(r.message,r.detail),checkboxChecked:!1}}doConfirm(r,p){let L=r;return p&&(L=L+`

`+p),U.G.confirm(L)}async prompt(r){let p;if(this.doConfirm(r.message,r.detail)){const V=[...r.buttons??[]];r.cancelButton&&typeof r.cancelButton!="string"&&typeof r.cancelButton!="boolean"&&V.push(r.cancelButton),p=await V[0]?.run({checkboxChecked:!1})}return{result:p}}async error(r,p){await this.prompt({type:Xt.A.Error,message:r,detail:p})}}class xi{static{this.NO_OP=new ke.Kz}info(r){return this.notify({severity:Xt.A.Info,message:r})}warn(r){return this.notify({severity:Xt.A.Warning,message:r})}error(r){return this.notify({severity:Xt.A.Error,message:r})}notify(r){switch(r.severity){case Xt.A.Error:break;case Xt.A.Warning:break;default:break}return xi.NO_OP}prompt(r,p,L,V){return xi.NO_OP}status(r,p){return P.jG.None}}let cn=class{constructor(r){this._onWillExecuteCommand=new ot.vl,this._onDidExecuteCommand=new ot.vl,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=r}executeCommand(r,...p){const L=$n.w.getCommand(r);if(!L)return Promise.reject(new Error(`command '${r}' not found`));try{this._onWillExecuteCommand.fire({commandId:r,args:p});const V=this._instantiationService.invokeFunction.apply(this._instantiationService,[L.handler,...p]);return this._onDidExecuteCommand.fire({commandId:r,args:p}),Promise.resolve(V)}catch(V){return Promise.reject(V)}}};cn=Gt([ti(0,dt._Y)],cn);let rn=class extends Zi{constructor(r,p,L,V,X,ge){super(r,p,L,V,X),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const De=_i=>{const Gi=new P.Cm;Gi.add(Y.ko(_i,Y.Bx.KEY_DOWN,kn=>{const Gn=new wt.Z(kn);this._dispatch(Gn,Gn.target)&&(Gn.preventDefault(),Gn.stopPropagation())})),Gi.add(Y.ko(_i,Y.Bx.KEY_UP,kn=>{const Gn=new wt.Z(kn);this._singleModifierDispatch(Gn,Gn.target)&&Gn.preventDefault()})),this._domNodeListeners.push(new gn(_i,Gi))},$e=_i=>{for(let Gi=0;Gi<this._domNodeListeners.length;Gi++){const kn=this._domNodeListeners[Gi];kn.domNode===_i&&(this._domNodeListeners.splice(Gi,1),kn.dispose())}},tt=_i=>{_i.getOption(61)||De(_i.getContainerDomNode())},ft=_i=>{_i.getOption(61)||$e(_i.getContainerDomNode())};this._register(ge.onCodeEditorAdd(tt)),this._register(ge.onCodeEditorRemove(ft)),ge.listCodeEditors().forEach(tt);const Nt=_i=>{De(_i.getContainerDomNode())},Jt=_i=>{$e(_i.getContainerDomNode())};this._register(ge.onDiffEditorAdd(Nt)),this._register(ge.onDiffEditorRemove(Jt)),ge.listDiffEditors().forEach(Nt)}addDynamicKeybinding(r,p,L,V){return(0,P.qE)($n.w.registerCommand(r,L),this.addDynamicKeybindings([{keybinding:p,command:r,when:V}]))}addDynamicKeybindings(r){const p=r.map(L=>({keybinding:(0,Xi.Zv)(L.keybinding,Wn.OS),command:L.command??null,commandArgs:L.commandArgs,when:L.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(p),this.updateResolver(),(0,P.s)(()=>{for(let L=0;L<this._dynamicKeybindings.length;L++)if(this._dynamicKeybindings[L]===p[0]){this._dynamicKeybindings.splice(L,p.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const r=this._toNormalizedKeybindingItems(_e.f.getDefaultKeybindings(),!0),p=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Ei(r,p,L=>this._log(L))}return this._cachedResolver}_documentHasFocus(){return U.G.document.hasFocus()}_toNormalizedKeybindingItems(r,p){const L=[];let V=0;for(const X of r){const ge=X.when||void 0,De=X.keybinding;if(!De)L[V++]=new ue(void 0,X.command,X.commandArgs,ge,p,null,!1);else{const $e=rt.resolveKeybinding(De,Wn.OS);for(const tt of $e)L[V++]=new ue(tt,X.command,X.commandArgs,ge,p,null,!1)}}return L}resolveKeyboardEvent(r){const p=new Xi.dG(r.ctrlKey,r.shiftKey,r.altKey,r.metaKey,r.keyCode);return new rt([p],Wn.OS)}};rn=Gt([ti(0,te.fN),ti(1,$n.d),ti(2,It.k),ti(3,ke.Ot),ti(4,N.rr),ti(5,I.T)],rn);class gn extends P.jG{constructor(r,p){super(),this.domNode=r,this._register(p)}}function Sn(de){return de&&typeof de=="object"&&(!de.overrideIdentifier||typeof de.overrideIdentifier=="string")&&(!de.resource||de.resource instanceof w.r)}let Vn=class{constructor(r){this.logService=r,this._onDidChangeConfiguration=new ot.vl,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const p=new Ge(r);this._configuration=new Ot(p.reload(),Be.createEmptyModel(r),Be.createEmptyModel(r),Be.createEmptyModel(r),Be.createEmptyModel(r),Be.createEmptyModel(r),new Kn.fT,Be.createEmptyModel(r),new Kn.fT,r),p.dispose()}getValue(r,p){const L=typeof r=="string"?r:void 0,V=Sn(r)?r:Sn(p)?p:{};return this._configuration.getValue(L,V,void 0)}updateValues(r){const p={data:this._configuration.toData()},L=[];for(const V of r){const[X,ge]=V;this.getValue(X)!==ge&&(this._configuration.updateValue(X,ge),L.push(X))}if(L.length>0){const V=new qt({keys:L,overrides:[]},p,this._configuration,void 0,this.logService);V.source=8,this._onDidChangeConfiguration.fire(V)}return Promise.resolve()}updateValue(r,p,L,V){return this.updateValues([[r,p]])}inspect(r,p={}){return this._configuration.inspect(r,p,void 0)}};Vn=Gt([ti(0,N.rr)],Vn);let jn=class{constructor(r,p,L){this.configurationService=r,this.modelService=p,this.languageService=L,this._onDidChangeConfiguration=new ot.vl,this.configurationService.onDidChangeConfiguration(V=>{this._onDidChangeConfiguration.fire({affectedKeys:V.affectedKeys,affectsConfiguration:(X,ge)=>V.affectsConfiguration(ge)})})}getValue(r,p,L){const V=so.y.isIPosition(p)?p:null,X=V?typeof L=="string"?L:void 0:typeof p=="string"?p:void 0,ge=r?this.getLanguage(r,V):void 0;return typeof X>"u"?this.configurationService.getValue({resource:r,overrideIdentifier:ge}):this.configurationService.getValue(X,{resource:r,overrideIdentifier:ge})}getLanguage(r,p){const L=this.modelService.getModel(r);return L?p?L.getLanguageIdAtPosition(p.lineNumber,p.column):L.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(r)}};jn=Gt([ti(0,nn.pG),ti(1,K.IModelService),ti(2,Ys.L)],jn);let Ns=class{constructor(r){this.configurationService=r}getEOL(r,p){const L=this.configurationService.getValue("files.eol",{overrideIdentifier:p,resource:r});return L&&typeof L=="string"&&L!=="auto"?L:Wn.j9||Wn.zx?`
`:`\r
`}};Ns=Gt([ti(0,nn.pG)],Ns);class Cs{publicLog2(){}}class Os{static{this.SCHEME="inmemory"}constructor(){const r=w.r.from({scheme:Os.SCHEME,authority:"model",path:"/"});this.workspace={id:Ut.cn,folders:[new Ut.mX({uri:r,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(r){return r&&r.scheme===Os.SCHEME?this.workspace.folders[0]:null}}function es(de,r,p){if(!r||!(de instanceof Vn))return;const L=[];Object.keys(r).forEach(V=>{(0,os.vf)(V)&&L.push([`editor.${V}`,r[V]]),p&&(0,os.Gn)(V)&&L.push([`diffEditor.${V}`,r[V]])}),L.length>0&&de.updateValues(L)}let to=class{constructor(r){this._modelService=r}hasPreviewHandler(){return!1}async apply(r,p){const L=Array.isArray(r)?r:Fi.jN.convert(r),V=new Map;for(const De of L){if(!(De instanceof Fi.cw))throw new Error("bad edit - only text edits are supported");const $e=this._modelService.getModel(De.resource);if(!$e)throw new Error("bad edit - model not found");if(typeof De.versionId=="number"&&$e.getVersionId()!==De.versionId)throw new Error("bad state - model changed in the meantime");let tt=V.get($e);tt||(tt=[],V.set($e,tt)),tt.push(no.k.replaceMove(Re.Q.lift(De.textEdit.range),De.textEdit.text))}let X=0,ge=0;for(const[De,$e]of V)De.pushStackElement(),De.pushEditOperations([],$e,()=>[]),De.pushStackElement(),ge+=1,X+=$e.length;return{ariaSummary:M.GP(Bt.tu.bulkEditServiceSummary,X,ge),isApplied:X>0}}};to=Gt([ti(0,K.IModelService)],to);class Vs{getUriLabel(r,p){return r.scheme==="file"?r.fsPath:r.path}getUriBasenameLabel(r){return(0,Kt.P8)(r)}}let ch=class extends Pi{constructor(r,p){super(r),this._codeEditorService=p}showContextView(r,p,L){if(!p){const V=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();V&&(p=V.getContainerDomNode())}return super.showContextView(r,p,L)}};ch=Gt([ti(0,Ye),ti(1,I.T)],ch);class Gl{constructor(){this._neverEmitter=new ot.vl,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class Ql extends Ht.LanguageService{constructor(){super()}}class wn extends nt{constructor(){super(new N.Cr)}}let zc=class extends Is{constructor(r,p,L,V,X,ge){super(r,p,L,V,X,ge),this.configure({blockMouse:!1})}};zc=Gt([ti(0,It.k),ti(1,ke.Ot),ti(2,Di.l),ti(3,dn.b),ti(4,en.ez),ti(5,te.fN)],zc);const Jr={amdModuleId:"vs/editor/common/services/editorSimpleWorker",esmModuleLocation:void 0,label:"editorWorkerService"};let ir=class extends Ue{constructor(r,p,L,V,X){super(Jr,r,p,L,V,X)}};ir=Gt([ti(0,K.IModelService),ti(1,F.ITextResourceConfigurationService),ti(2,N.rr),ti(3,Ae.JZ),ti(4,me.ILanguageFeaturesService)],ir);class Pu{async playSignal(r,p){}}(0,oe.v)(N.rr,wn,0),(0,oe.v)(nn.pG,Vn,0),(0,oe.v)(F.ITextResourceConfigurationService,jn,0),(0,oe.v)(F.ITextResourcePropertiesService,Ns,0),(0,oe.v)(Ut.VR,Os,0),(0,oe.v)(Ct.L,Vs,0),(0,oe.v)(It.k,Cs,0),(0,oe.v)(ri.X,Ji,0),(0,oe.v)(bt.k,Ai,0),(0,oe.v)(ke.Ot,xi,0),(0,oe.v)(y.DR,be,0),(0,oe.v)(Ys.L,Ql,0),(0,oe.v)(_o.L,Zr.Sx,0),(0,oe.v)(K.IModelService,yr.ModelService,0),(0,oe.v)(qd.IMarkerDecorationsService,Nl.MarkerDecorationsService,0),(0,oe.v)(te.fN,tr,0),(0,oe.v)(jt.G5,Yi,0),(0,oe.v)(jt.N8,Ti,0),(0,oe.v)(Oe.CS,Oe.pc,0),(0,oe.v)(hn.IEditorWorkerService,ir,0),(0,oe.v)(Fi.nu,to,0),(0,oe.v)(ct.L,Gl,0),(0,oe.v)(co.ITextModelService,ki,0),(0,oe.v)(Rn.j,il,0),(0,oe.v)(Oo.PE,Oo.aG,0),(0,oe.v)($n.d,cn,0),(0,oe.v)(dn.b,rn,0),(0,oe.v)(vn.GK,rs,0),(0,oe.v)(Di.l,ch,0),(0,oe.v)(Zn.C,Js,0),(0,oe.v)(sl.h,Io,0),(0,oe.v)(Di.Z,zc,0),(0,oe.v)(en.ez,Bc.$,0),(0,oe.v)(je.Nt,Pu,0),(0,oe.v)(xt.ITreeSitterParserService,At,0);var tn;(function(de){const r=new Ma.a;for(const[$e,tt]of(0,oe.N)())r.set($e,tt);const p=new a(r,!0);r.set(dt._Y,p);function L($e){V||ge({});const tt=r.get($e);if(!tt)throw new Error("Missing service "+$e);return tt instanceof ns.d?p.invokeFunction(ft=>ft.get($e)):tt}de.get=L;let V=!1;const X=new ot.vl;function ge($e){if(V)return p;V=!0;for(const[ft,Nt]of(0,oe.N)())r.get(ft)||r.set(ft,Nt);for(const ft in $e)if($e.hasOwnProperty(ft)){const Nt=(0,dt.u1)(ft);r.get(Nt)instanceof ns.d&&r.set(Nt,$e[ft])}const tt=(0,lt.T)();for(const ft of tt)try{p.createInstance(ft)}catch(Nt){(0,d.dz)(Nt)}return X.fire(),p}de.initialize=ge;function De($e){if(V)return $e();const tt=new P.Cm,ft=tt.add(X.event(()=>{ft.dispose(),tt.add($e())}));return tt}de.withServices=De})(tn||(tn={}));function Yl(de,r){return new dh(de,r)}class dh extends _t{constructor(r,p){const L={amdModuleId:Jr.amdModuleId,esmModuleLocation:Jr.esmModuleLocation,label:p.label};super(L,p.keepIdleModels||!1,r),this._foreignModuleId=p.moduleId,this._foreignModuleCreateData=p.createData||null,this._foreignModuleHost=p.host||null,this._foreignProxy=null}fhr(r,p){if(!this._foreignModuleHost||typeof this._foreignModuleHost[r]!="function")return Promise.reject(new Error("Missing method "+r+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[r].apply(this._foreignModuleHost,p))}catch(L){return Promise.reject(L)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(r=>{const p=this._foreignModuleHost?(0,b.V0)(this._foreignModuleHost):[];return r.$loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,p).then(L=>{this._foreignModuleCreateData=null;const V=(De,$e)=>r.$fmr(De,$e),X=(De,$e)=>function(){const tt=Array.prototype.slice.call(arguments,0);return $e(De,tt)},ge={};for(const De of L)ge[De]=X(De,V);return ge})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(r){return this.workerWithSyncedResources(r).then(p=>this.getProxy())}}var Au=c(75942),hh=c(68869),Of=c(74719),Ds=c(9709),jc=c(49896),qr=c(32287),uh=c(26342),An=c(59548),Zl=c(14216),ea=c(62681),Na=c(42577);function ol(de){return Array.isArray(de)}function Ff(de){return!ol(de)}function Ou(de){return typeof de=="string"}function Fu(de){return!Ou(de)}function ta(de){return!de}function Mo(de,r){return de.ignoreCase&&r?r.toLowerCase():r}function vo(de){return de.replace(/[&<>'"_]/g,"-")}function zv(de,r){}function ss(de,r){return new Error(`${de.languageId}: ${r}`)}function ia(de,r,p,L,V){const X=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let ge=null;return r.replace(X,function(De,$e,tt,ft,Nt,Jt,_i,Gi,kn){return ta(tt)?ta(ft)?!ta(Nt)&&Nt<L.length?Mo(de,L[Nt]):!ta(_i)&&de&&typeof de[_i]=="string"?de[_i]:(ge===null&&(ge=V.split("."),ge.unshift(V)),!ta(Jt)&&Jt<ge.length?Mo(de,ge[Jt]):""):Mo(de,p):"$"})}function Wf(de,r,p){const L=/\$[sS](\d\d?)/g;let V=null;return r.replace(L,function(X,ge){return V===null&&(V=p.split("."),V.unshift(p)),!ta(ge)&&ge<V.length?Mo(de,V[ge]):""})}function Xl(de,r){let p=r;for(;p&&p.length>0;){const L=de.tokenizer[p];if(L)return L;const V=p.lastIndexOf(".");V<0?p=null:p=p.substr(0,V)}return null}function Bf(de,r){let p=r;for(;p&&p.length>0;){if(de.stateNames[p])return!0;const V=p.lastIndexOf(".");V<0?p=null:p=p.substr(0,V)}return!1}var Hf=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},Vf=function(de,r){return function(p,L){r(p,L,de)}},gh;const Kc=5;class na{static{this._INSTANCE=new na(Kc)}static create(r,p){return this._INSTANCE.create(r,p)}constructor(r){this._maxCacheDepth=r,this._entries=Object.create(null)}create(r,p){if(r!==null&&r.depth>=this._maxCacheDepth)return new Vo(r,p);let L=Vo.getStackElementId(r);L.length>0&&(L+="|"),L+=p;let V=this._entries[L];return V||(V=new Vo(r,p),this._entries[L]=V,V)}}class Vo{constructor(r,p){this.parent=r,this.state=p,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(r){let p="";for(;r!==null;)p.length>0&&(p+="|"),p+=r.state,r=r.parent;return p}static _equals(r,p){for(;r!==null&&p!==null;){if(r===p)return!0;if(r.state!==p.state)return!1;r=r.parent,p=p.parent}return r===null&&p===null}equals(r){return Vo._equals(this,r)}push(r){return na.create(this,r)}pop(){return this.parent}popall(){let r=this;for(;r.parent;)r=r.parent;return r}switchTo(r){return na.create(this.parent,r)}}class Uo{constructor(r,p){this.languageId=r,this.state=p}equals(r){return this.languageId===r.languageId&&this.state.equals(r.state)}clone(){return this.state.clone()===this.state?this:new Uo(this.languageId,this.state)}}class Pr{static{this._INSTANCE=new Pr(Kc)}static create(r,p){return this._INSTANCE.create(r,p)}constructor(r){this._maxCacheDepth=r,this._entries=Object.create(null)}create(r,p){if(p!==null)return new rl(r,p);if(r!==null&&r.depth>=this._maxCacheDepth)return new rl(r,p);const L=Vo.getStackElementId(r);let V=this._entries[L];return V||(V=new rl(r,null),this._entries[L]=V,V)}}class rl{constructor(r,p){this.stack=r,this.embeddedLanguageData=p}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Pr.create(this.stack,this.embeddedLanguageData)}equals(r){return!(r instanceof rl)||!this.stack.equals(r.stack)?!1:this.embeddedLanguageData===null&&r.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||r.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(r.embeddedLanguageData)}}class Uf{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(r){this._languageId=r}emit(r,p){this._lastTokenType===p&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=p,this._lastTokenLanguage=this._languageId,this._tokens.push(new Ds.ou(r,p,this._languageId)))}nestedLanguageTokenize(r,p,L,V){const X=L.languageId,ge=L.state,De=Ds.dG.get(X);if(!De)return this.enterLanguage(X),this.emit(V,""),ge;const $e=De.tokenize(r,p,ge);if(V!==0)for(const tt of $e.tokens)this._tokens.push(new Ds.ou(tt.offset+V,tt.type,tt.language));else this._tokens=this._tokens.concat($e.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,$e.endState}finalize(r){return new Ds.$M(this._tokens,r)}}class sa{constructor(r,p){this._languageService=r,this._theme=p,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(r){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(r)}emit(r,p){const L=this._theme.match(this._currentLanguageId,p)|1024;this._lastTokenMetadata!==L&&(this._lastTokenMetadata=L,this._tokens.push(r),this._tokens.push(L))}static _merge(r,p,L){const V=r!==null?r.length:0,X=p.length,ge=L!==null?L.length:0;if(V===0&&X===0&&ge===0)return new Uint32Array(0);if(V===0&&X===0)return L;if(X===0&&ge===0)return r;const De=new Uint32Array(V+X+ge);r!==null&&De.set(r);for(let $e=0;$e<X;$e++)De[V+$e]=p[$e];return L!==null&&De.set(L,V+X),De}nestedLanguageTokenize(r,p,L,V){const X=L.languageId,ge=L.state,De=Ds.dG.get(X);if(!De)return this.enterLanguage(X),this.emit(V,""),ge;const $e=De.tokenizeEncoded(r,p,ge);if(V!==0)for(let tt=0,ft=$e.tokens.length;tt<ft;tt+=2)$e.tokens[tt]+=V;return this._prependTokens=sa._merge(this._prependTokens,this._tokens,$e.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,$e.endState}finalize(r){return new Ds.rY(sa._merge(this._prependTokens,this._tokens,null),r)}}let Jl=gh=class extends P.jG{constructor(r,p,L,V,X){super(),this._configurationService=X,this._languageService=r,this._standaloneThemeService=p,this._languageId=L,this._lexer=V,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let ge=!1;this._register(Ds.dG.onDidChange(De=>{if(ge)return;let $e=!1;for(let tt=0,ft=De.changedLanguages.length;tt<ft;tt++){const Nt=De.changedLanguages[tt];if(this._embeddedLanguages[Nt]){$e=!0;break}}$e&&(ge=!0,Ds.dG.handleChange([this._languageId]),ge=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(De=>{De.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const r=[];for(const p in this._embeddedLanguages){const L=Ds.dG.get(p);if(L){if(L instanceof gh){const V=L.getLoadStatus();V.loaded===!1&&r.push(V.promise)}continue}Ds.dG.isResolved(p)||r.push(Ds.dG.getOrCreate(p))}return r.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(r).then(p=>{})}}getInitialState(){const r=na.create(null,this._lexer.start);return Pr.create(r,null)}tokenize(r,p,L){if(r.length>=this._maxTokenizationLineLength)return(0,qr.$H)(this._languageId,L);const V=new Uf,X=this._tokenize(r,p,L,V);return V.finalize(X)}tokenizeEncoded(r,p,L){if(r.length>=this._maxTokenizationLineLength)return(0,qr.Lh)(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),L);const V=new sa(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),X=this._tokenize(r,p,L,V);return V.finalize(X)}_tokenize(r,p,L,V){return L.embeddedLanguageData?this._nestedTokenize(r,p,L,0,V):this._myTokenize(r,p,L,0,V)}_findLeavingNestedLanguageOffset(r,p){let L=this._lexer.tokenizer[p.stack.state];if(!L&&(L=Xl(this._lexer,p.stack.state),!L))throw ss(this._lexer,"tokenizer state is not defined: "+p.stack.state);let V=-1,X=!1;for(const ge of L){if(!Fu(ge.action)||ge.action.nextEmbedded!=="@pop")continue;X=!0;let De=ge.resolveRegex(p.stack.state);const $e=De.source;if($e.substr(0,4)==="^(?:"&&$e.substr($e.length-1,1)===")"){const ft=(De.ignoreCase?"i":"")+(De.unicode?"u":"");De=new RegExp($e.substr(4,$e.length-5),ft)}const tt=r.search(De);tt===-1||tt!==0&&ge.matchOnlyAtLineStart||(V===-1||tt<V)&&(V=tt)}if(!X)throw ss(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+p.stack.state);return V}_nestedTokenize(r,p,L,V,X){const ge=this._findLeavingNestedLanguageOffset(r,L);if(ge===-1){const tt=X.nestedLanguageTokenize(r,p,L.embeddedLanguageData,V);return Pr.create(L.stack,new Uo(L.embeddedLanguageData.languageId,tt))}const De=r.substring(0,ge);De.length>0&&X.nestedLanguageTokenize(De,!1,L.embeddedLanguageData,V);const $e=r.substring(ge);return this._myTokenize($e,p,L,V+ge,X)}_safeRuleName(r){return r?r.name:"(unknown)"}_myTokenize(r,p,L,V,X){X.enterLanguage(this._languageId);const ge=r.length,De=p&&this._lexer.includeLF?r+`
`:r,$e=De.length;let tt=L.embeddedLanguageData,ft=L.stack,Nt=0,Jt=null,_i=!0;for(;_i||Nt<$e;){const Gi=Nt,kn=ft.depth,Gn=Jt?Jt.groups.length:0,Pn=ft.state;let as=null,Nn=null,fn=null,hs=null,So=null;if(Jt){as=Jt.matches;const Un=Jt.groups.shift();Nn=Un.matched,fn=Un.action,hs=Jt.rule,Jt.groups.length===0&&(Jt=null)}else{if(!_i&&Nt>=$e)break;_i=!1;let Un=this._lexer.tokenizer[Pn];if(!Un&&(Un=Xl(this._lexer,Pn),!Un))throw ss(this._lexer,"tokenizer state is not defined: "+Pn);const bs=De.substr(Nt);for(const ao of Un)if((Nt===0||!ao.matchOnlyAtLineStart)&&(as=bs.match(ao.resolveRegex(Pn)),as)){Nn=as[0],fn=ao.action;break}}if(as||(as=[""],Nn=""),fn||(Nt<$e&&(as=[De.charAt(Nt)],Nn=as[0]),fn=this._lexer.defaultToken),Nn===null)break;for(Nt+=Nn.length;Ff(fn)&&Fu(fn)&&fn.test;)fn=fn.test(Nn,as,Pn,Nt===$e);let Ts=null;if(typeof fn=="string"||Array.isArray(fn))Ts=fn;else if(fn.group)Ts=fn.group;else if(fn.token!==null&&fn.token!==void 0){if(fn.tokenSubst?Ts=ia(this._lexer,fn.token,Nn,as,Pn):Ts=fn.token,fn.nextEmbedded)if(fn.nextEmbedded==="@pop"){if(!tt)throw ss(this._lexer,"cannot pop embedded language if not inside one");tt=null}else{if(tt)throw ss(this._lexer,"cannot enter embedded language from within an embedded language");So=ia(this._lexer,fn.nextEmbedded,Nn,as,Pn)}if(fn.goBack&&(Nt=Math.max(0,Nt-fn.goBack)),fn.switchTo&&typeof fn.switchTo=="string"){let Un=ia(this._lexer,fn.switchTo,Nn,as,Pn);if(Un[0]==="@"&&(Un=Un.substr(1)),Xl(this._lexer,Un))ft=ft.switchTo(Un);else throw ss(this._lexer,"trying to switch to a state '"+Un+"' that is undefined in rule: "+this._safeRuleName(hs))}else{if(fn.transform&&typeof fn.transform=="function")throw ss(this._lexer,"action.transform not supported");if(fn.next)if(fn.next==="@push"){if(ft.depth>=this._lexer.maxStack)throw ss(this._lexer,"maximum tokenizer stack size reached: ["+ft.state+","+ft.parent.state+",...]");ft=ft.push(Pn)}else if(fn.next==="@pop"){if(ft.depth<=1)throw ss(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(hs));ft=ft.pop()}else if(fn.next==="@popall")ft=ft.popall();else{let Un=ia(this._lexer,fn.next,Nn,as,Pn);if(Un[0]==="@"&&(Un=Un.substr(1)),Xl(this._lexer,Un))ft=ft.push(Un);else throw ss(this._lexer,"trying to set a next state '"+Un+"' that is undefined in rule: "+this._safeRuleName(hs))}}fn.log&&typeof fn.log=="string"&&(this._lexer,this._lexer.languageId+""+ia(this._lexer,fn.log,Nn,as,Pn),void 0)}if(Ts===null)throw ss(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(hs));const Oa=Un=>{const bs=this._languageService.getLanguageIdByLanguageName(Un)||this._languageService.getLanguageIdByMimeType(Un)||Un,ao=this._getNestedEmbeddedLanguageData(bs);if(Nt<$e){const Ss=r.substr(Nt);return this._nestedTokenize(Ss,p,Pr.create(ft,ao),V+Nt,X)}else return Pr.create(ft,ao)};if(Array.isArray(Ts)){if(Jt&&Jt.groups.length>0)throw ss(this._lexer,"groups cannot be nested: "+this._safeRuleName(hs));if(as.length!==Ts.length+1)throw ss(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(hs));let Un=0;for(let bs=1;bs<as.length;bs++)Un+=as[bs].length;if(Un!==Nn.length)throw ss(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(hs));Jt={rule:hs,matches:as,groups:[]};for(let bs=0;bs<Ts.length;bs++)Jt.groups[bs]={action:Ts[bs],matched:as[bs+1]};Nt-=Nn.length;continue}else{if(Ts==="@rematch"&&(Nt-=Nn.length,Nn="",as=null,Ts="",So!==null))return Oa(So);if(Nn.length===0){if($e===0||kn!==ft.depth||Pn!==ft.state||(Jt?Jt.groups.length:0)!==Gn)continue;throw ss(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(hs))}let Un=null;if(Ou(Ts)&&Ts.indexOf("@brackets")===0){const bs=Ts.substr(9),ao=ql(this._lexer,Nn);if(!ao)throw ss(this._lexer,"@brackets token returned but no bracket defined as: "+Nn);Un=vo(ao.token+bs)}else{const bs=Ts===""?"":Ts+this._lexer.tokenPostfix;Un=vo(bs)}Gi<ge&&X.emit(Gi+V,Un)}if(So!==null)return Oa(So)}return Pr.create(ft,tt)}_getNestedEmbeddedLanguageData(r){if(!this._languageService.isRegisteredLanguageId(r))return new Uo(r,qr.r3);r!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(r),Ds.dG.getOrCreate(r),this._embeddedLanguages[r]=!0);const p=Ds.dG.get(r);return p?new Uo(r,p.getInitialState()):new Uo(r,qr.r3)}};Jl=gh=Hf([Vf(4,nn.pG)],Jl);function ql(de,r){if(!r)return null;r=Mo(de,r);const p=de.brackets;for(const L of p){if(L.open===r)return{token:L.token,bracketType:1};if(L.close===r)return{token:L.token,bracketType:-1}}return null}const Wu=(0,_.H)("standaloneColorizer",{createHTML:de=>de});class $c{static colorizeElement(r,p,L,V){V=V||{};const X=V.theme||"vs",ge=V.mimeType||L.getAttribute("lang")||L.getAttribute("data-lang");if(!ge)return Promise.resolve();const De=p.getLanguageIdByMimeType(ge)||ge;r.setTheme(X);const $e=L.firstChild?L.firstChild.nodeValue:"";L.className+=" "+X;const tt=ft=>{const Nt=Wu?.createHTML(ft)??ft;L.innerHTML=Nt};return this.colorize(p,$e||"",De,V).then(tt,ft=>{})}static async colorize(r,p,L,V){const X=r.languageIdCodec;let ge=4;V&&typeof V.tabSize=="number"&&(ge=V.tabSize),M.LU(p)&&(p=p.substr(1));const De=M.uz(p);if(!r.isRegisteredLanguageId(L))return ec(De,ge,X);const $e=await Ds.dG.getOrCreate(L);return $e?Bu(De,ge,$e,X):ec(De,ge,X)}static colorizeLine(r,p,L,V,X=4){const ge=Na.qL.isBasicASCII(r,p),De=Na.qL.containsRTL(r,ge,L);return(0,ea.Md)(new ea.zL(!1,!0,r,!1,ge,De,0,V,[],X,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(r,p,L=4){const V=r.getLineContent(p);r.tokenization.forceTokenization(p);const ge=r.tokenization.getLineTokens(p).inflate();return this.colorizeLine(V,r.mightContainNonBasicASCII(),r.mightContainRTL(),ge,L)}}function Bu(de,r,p,L){return new Promise((V,X)=>{const ge=()=>{const De=Hu(de,r,p,L);if(p instanceof Jl){const $e=p.getLoadStatus();if($e.loaded===!1){$e.promise.then(ge,X);return}}V(De)};ge()})}function ec(de,r,p){let L=[];const X=new Uint32Array(2);X[0]=0,X[1]=33587200;for(let ge=0,De=de.length;ge<De;ge++){const $e=de[ge];X[0]=$e.length;const tt=new Zl.f(X,$e,p),ft=Na.qL.isBasicASCII($e,!0),Nt=Na.qL.containsRTL($e,ft,!0),Jt=(0,ea.Md)(new ea.zL(!1,!0,$e,!1,ft,Nt,0,tt,[],r,0,0,0,0,-1,"none",!1,!1,null));L=L.concat(Jt.html),L.push("<br/>")}return L.join("")}function Hu(de,r,p,L){let V=[],X=p.getInitialState();for(let ge=0,De=de.length;ge<De;ge++){const $e=de[ge],tt=p.tokenizeEncoded($e,!0,X);Zl.f.convertToEndOffset(tt.tokens,$e.length);const ft=new Zl.f(tt.tokens,$e,L),Nt=Na.qL.isBasicASCII($e,!0),Jt=Na.qL.containsRTL($e,Nt,!0),_i=(0,ea.Md)(new ea.zL(!1,!0,$e,!1,Nt,Jt,0,ft.inflate(),[],r,0,0,0,0,-1,"none",!1,!1,null));V=V.concat(_i.html),V.push("<br/>"),X=tt.endState}return V.join("")}var zf=c(84519),jf=c(5408),Vu=c(42535),Kf=c(15903),$f=c(91779),fh=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},ts=function(de,r){return function(p,L){r(p,L,de)}};let Gf=0,Uu=!1;function Gc(de){if(!de){if(Uu)return;Uu=!0}Bn.vr(de||U.G.document.body)}let Qc=class extends zf.x{constructor(r,p,L,V,X,ge,De,$e,tt,ft,Nt,Jt,_i){const Gi={...p};Gi.ariaLabel=Gi.ariaLabel||Bt.vp.editorViewAccessibleLabel,super(r,Gi,{},L,V,X,ge,tt,ft,Nt,Jt,_i),$e instanceof rn?this._standaloneKeybindingService=$e:this._standaloneKeybindingService=null,Gc(Gi.ariaContainerElement),(0,Kf.MW)((kn,Gn)=>L.createInstance(ji.fO,kn,Gn,{})),(0,$f.e)(De)}addCommand(r,p,L){if(!this._standaloneKeybindingService)return null;const V="DYNAMIC_"+ ++Gf,X=te.M$.deserialize(L);return this._standaloneKeybindingService.addDynamicKeybinding(V,r,p,X),V}createContextKey(r,p){return this._contextKeyService.createKey(r,p)}addAction(r){if(typeof r.id!="string"||typeof r.label!="string"||typeof r.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return P.jG.None;const p=r.id,L=r.label,V=te.M$.and(te.M$.equals("editorId",this.getId()),te.M$.deserialize(r.precondition)),X=r.keybindings,ge=te.M$.and(V,te.M$.deserialize(r.keybindingContext)),De=r.contextMenuGroupId||null,$e=r.contextMenuOrder||0,tt=(_i,...Gi)=>Promise.resolve(r.run(this,...Gi)),ft=new P.Cm,Nt=this.getId()+":"+p;if(ft.add($n.w.registerCommand(Nt,tt)),De){const _i={command:{id:Nt,title:L},when:V,group:De,order:$e};ft.add(en.ZG.appendMenuItem(en.D8.EditorContext,_i))}if(Array.isArray(X))for(const _i of X)ft.add(this._standaloneKeybindingService.addDynamicKeybinding(Nt,_i,tt,ge));const Jt=new jf.f(Nt,L,L,void 0,V,(..._i)=>Promise.resolve(r.run(this,..._i)),this._contextKeyService);return this._actions.set(p,Jt),ft.add((0,P.s)(()=>{this._actions.delete(p)})),ft}_triggerCommand(r,p){if(this._codeEditorService instanceof We)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(r,p)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(r,p)}};Qc=fh([ts(2,dt._Y),ts(3,I.T),ts(4,$n.d),ts(5,te.fN),ts(6,ji.TN),ts(7,dn.b),ts(8,Wt.Gy),ts(9,ke.Ot),ts(10,Rn.j),ts(11,Ae.JZ),ts(12,me.ILanguageFeaturesService)],Qc);let al=class extends Qc{constructor(r,p,L,V,X,ge,De,$e,tt,ft,Nt,Jt,_i,Gi,kn,Gn){const Pn={...p};es(Nt,Pn,!1);const as=tt.registerEditorContainer(r);typeof Pn.theme=="string"&&tt.setTheme(Pn.theme),typeof Pn.autoDetectHighContrast<"u"&&tt.setAutoDetectHighContrast(!!Pn.autoDetectHighContrast);const Nn=Pn.model;delete Pn.model,super(r,Pn,L,V,X,ge,De,$e,tt,ft,Jt,kn,Gn),this._configurationService=Nt,this._standaloneThemeService=tt,this._register(as);let fn;if(typeof Nn>"u"){const hs=Gi.getLanguageIdByMimeType(Pn.language)||Pn.language||jc.vH;fn=Yc(_i,Gi,Pn.value||"",hs,void 0),this._ownsModel=!0}else fn=Nn,this._ownsModel=!1;if(this._attachModel(fn),fn){const hs={oldModelUrl:null,newModelUrl:fn.uri};this._onDidChangeModel.fire(hs)}}dispose(){super.dispose()}updateOptions(r){es(this._configurationService,r,!1),typeof r.theme=="string"&&this._standaloneThemeService.setTheme(r.theme),typeof r.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!r.autoDetectHighContrast),super.updateOptions(r)}_postDetachModelCleanup(r){super._postDetachModelCleanup(r),r&&this._ownsModel&&(r.dispose(),this._ownsModel=!1)}};al=fh([ts(2,dt._Y),ts(3,I.T),ts(4,$n.d),ts(5,te.fN),ts(6,ji.TN),ts(7,dn.b),ts(8,_o.L),ts(9,ke.Ot),ts(10,nn.pG),ts(11,Rn.j),ts(12,K.IModelService),ts(13,Ys.L),ts(14,Ae.JZ),ts(15,me.ILanguageFeaturesService)],al);let mh=class extends Vu.T{constructor(r,p,L,V,X,ge,De,$e,tt,ft,Nt,Jt){const _i={...p};es($e,_i,!0);const Gi=ge.registerEditorContainer(r);typeof _i.theme=="string"&&ge.setTheme(_i.theme),typeof _i.autoDetectHighContrast<"u"&&ge.setAutoDetectHighContrast(!!_i.autoDetectHighContrast),super(r,_i,{},V,L,X,Jt,ft),this._configurationService=$e,this._standaloneThemeService=ge,this._register(Gi)}dispose(){super.dispose()}updateOptions(r){es(this._configurationService,r,!0),typeof r.theme=="string"&&this._standaloneThemeService.setTheme(r.theme),typeof r.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!r.autoDetectHighContrast),super.updateOptions(r)}_createInnerEditor(r,p,L){return r.createInstance(Qc,p,L)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(r,p,L){return this.getModifiedEditor().addCommand(r,p,L)}createContextKey(r,p){return this.getModifiedEditor().createContextKey(r,p)}addAction(r){return this.getModifiedEditor().addAction(r)}};mh=fh([ts(2,dt._Y),ts(3,te.fN),ts(4,I.T),ts(5,_o.L),ts(6,ke.Ot),ts(7,nn.pG),ts(8,Di.Z),ts(9,jt.N8),ts(10,sl.h),ts(11,je.Nt)],mh);function Yc(de,r,p,L,V){if(p=p||"",!L){const X=p.indexOf(`
`);let ge=p;return X!==-1&&(ge=p.substring(0,X)),si(de,p,r.createByFilepathOrFirstLine(V||null,ge),V)}return si(de,p,r.createById(L),V)}function si(de,r,p,L){return de.createModel(r,p,L)}var No=c(74040),zu=c(51922),Co=c(70679),ju=c(1822),Ta=c(47223),tc=c(88935),ph=c(47545),To=c(89464),ic=c(49349),_h=c(52906),Qf=c(12634),Yf=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},Ra=function(de,r){return function(p,L){r(p,L,de)}};class Zf{constructor(r,p){this.viewModel=r,this.deltaScrollVertical=p}getId(){return this.viewModel}}let Zc=class extends P.jG{constructor(r,p,L,V,X){super(),this._container=r,this._overflowWidgetsDomNode=p,this._workbenchUIElementFactory=L,this._instantiationService=V,this._viewModel=(0,Co.FY)(this,void 0),this._collapsed=(0,qn.un)(this,$e=>this._viewModel.read($e)?.collapsed.read($e)),this._editorContentHeight=(0,Co.FY)(this,500),this.contentHeight=(0,qn.un)(this,$e=>(this._collapsed.read($e)?0:this._editorContentHeight.read($e))+this._outerEditorHeight),this._modifiedContentWidth=(0,Co.FY)(this,0),this._modifiedWidth=(0,Co.FY)(this,0),this._originalContentWidth=(0,Co.FY)(this,0),this._originalWidth=(0,Co.FY)(this,0),this.maxScroll=(0,qn.un)(this,$e=>{const tt=this._modifiedContentWidth.read($e)-this._modifiedWidth.read($e),ft=this._originalContentWidth.read($e)-this._originalWidth.read($e);return tt>ft?{maxScroll:tt,width:this._modifiedWidth.read($e)}:{maxScroll:ft,width:this._originalWidth.read($e)}}),this._elements=(0,Y.h)("div.multiDiffEntry",[(0,Y.h)("div.header@header",[(0,Y.h)("div.header-content",[(0,Y.h)("div.collapse-button@collapseButton"),(0,Y.h)("div.file-path",[(0,Y.h)("div.title.modified.show-file-icons@primaryPath",[]),(0,Y.h)("div.status.deleted@status",["R"]),(0,Y.h)("div.title.original.show-file-icons@secondaryPath",[])]),(0,Y.h)("div.actions@actions")])]),(0,Y.h)("div.editorParent",[(0,Y.h)("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(Vu.T,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=(0,ic.Ud)(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=(0,ic.Ud)(this.editor.getOriginalEditor()).isFocused,this.isFocused=(0,qn.un)(this,$e=>this.isModifedFocused.read($e)||this.isOriginalFocused.read($e)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=this._register(new P.Cm),this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const ge=new Do.$(this._elements.collapseButton,{});this._register((0,qn.fm)($e=>{ge.element.className="",ge.icon=this._collapsed.read($e)?En.W.chevronRight:En.W.chevronDown})),this._register(ge.onDidClick(()=>{this._viewModel.get()?.collapsed.set(!this._collapsed.get(),void 0)})),this._register((0,qn.fm)($e=>{this._elements.editor.style.display=this._collapsed.read($e)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange($e=>{const tt=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(tt,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange($e=>{const tt=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(tt,void 0)})),this._register(this.editor.onDidContentSizeChange($e=>{(0,Co.YY)(tt=>{this._editorContentHeight.set($e.contentHeight,tt),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),tt),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),tt)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange($e=>{if(this._isSettingScrollTop||!$e.scrollTopChanged||!this._data)return;const tt=$e.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(tt)})),this._register((0,qn.fm)($e=>{const tt=this._viewModel.read($e)?.isActive.read($e);this._elements.root.classList.toggle("active",tt)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._contextKeyService=this._register(X.createScoped(this._elements.actions));const De=this._register(this._instantiationService.createChild(new Ma.a([te.fN,this._contextKeyService])));this._register(De.createInstance(_h.m,this._elements.actions,en.D8.MultiDiffEditorFileToolbar,{actionRunner:this._register(new Qf.I(()=>this._viewModel.get()?.modifiedUri)),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:$e=>$e.startsWith("navigation")},actionViewItemProvider:($e,tt)=>(0,fi.rN)(De,$e,tt)}))}setScrollLeft(r){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(r):this.editor.getOriginalEditor().setScrollLeft(r)}setData(r){this._data=r;function p(V){return{...V,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(!r){(0,Co.YY)(V=>{this._viewModel.set(void 0,V),this.editor.setDiffModel(null,V),this._dataStore.clear()});return}const L=r.viewModel.documentDiffItem;if((0,Co.YY)(V=>{this._resourceLabel?.setUri(r.viewModel.modifiedUri??r.viewModel.originalUri,{strikethrough:r.viewModel.modifiedUri===void 0});let X=!1,ge=!1,De=!1,$e="";r.viewModel.modifiedUri&&r.viewModel.originalUri&&r.viewModel.modifiedUri.path!==r.viewModel.originalUri.path?($e="R",X=!0):r.viewModel.modifiedUri?r.viewModel.originalUri||($e="A",De=!0):($e="D",ge=!0),this._elements.status.classList.toggle("renamed",X),this._elements.status.classList.toggle("deleted",ge),this._elements.status.classList.toggle("added",De),this._elements.status.innerText=$e,this._resourceLabel2?.setUri(X?r.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(r.viewModel,V),this.editor.setDiffModel(r.viewModel.diffEditorViewModelRef,V),this.editor.updateOptions(p(L.options??{}))}),L.onOptionsDidChange&&this._dataStore.add(L.onOptionsDidChange(()=>{this.editor.updateOptions(p(L.options??{}))})),r.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,V=>{V||this.setData(void 0)}),r.viewModel.documentDiffItem.contextKeys)for(const[V,X]of Object.entries(r.viewModel.documentDiffItem.contextKeys))this._contextKeyService.createKey(V,X)}render(r,p,L,V){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${r.start}px`,this._elements.root.style.height=`${r.length}px`,this._elements.root.style.width=`${p}px`,this._elements.root.style.position="absolute";const X=r.length-this._headerHeight,ge=Math.max(0,Math.min(V.start-r.start,X));this._elements.header.style.transform=`translateY(${ge}px)`,(0,Co.YY)(De=>{this.editor.layout({width:p-2*8-2*1,height:r.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=L,this.editor.getOriginalEditor().setScrollTop(L)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",ge>0||L>0),this._elements.header.classList.toggle("collapsed",ge===X)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};Zc=Yf([Ra(3,dt._Y),Ra(4,te.fN)],Zc);class vh{constructor(r){this._create=r,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(r){let p;if(this._unused.size===0)p=this._create(r),this._itemData.set(p,r);else{const L=[...this._unused.values()];p=L.find(V=>this._itemData.get(V).getId()===r.getId())??L[0],this._unused.delete(p),this._itemData.set(p,r),p.setData(r)}return this._used.add(p),{object:p,dispose:()=>{this._used.delete(p),this._unused.size>5?p.dispose():this._unused.add(p)}}}dispose(){for(const r of this._used)r.dispose();for(const r of this._unused)r.dispose();this._used.clear(),this._unused.clear()}}var Xc=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},Ku=function(de,r){return function(p,L){r(p,L,de)}};let Jc=class extends P.jG{constructor(r,p,L,V,X,ge){super(),this._element=r,this._dimension=p,this._viewModel=L,this._workbenchUIElementFactory=V,this._parentContextKeyService=X,this._parentInstantiationService=ge,this._scrollableElements=(0,Y.h)("div.scrollContent",[(0,Y.h)("div@content",{style:{overflow:"hidden"}}),(0,Y.h)("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new ju.yE({forceIntegerValues:!1,scheduleAtNextAnimationFrame:$e=>(0,Y.PG)((0,Y.zk)(this._element),$e),smoothScrollDuration:100})),this._scrollableElement=this._register(new Yn.oO(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=(0,Y.h)("div.monaco-component.multiDiffEditor",{},[(0,Y.h)("div",{},[this._scrollableElement.getDomNode()]),(0,Y.h)("div.placeholder@placeholder",{},[(0,Y.h)("div",[(0,D.kg)("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new Ta.pN(this._element,void 0)),this._objectPool=this._register(new vh($e=>{const tt=this._instantiationService.createInstance(Zc,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return tt.setData($e),tt})),this.scrollTop=(0,qn.y0)(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=(0,qn.y0)(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=(0,qn.rm)(this,($e,tt)=>{const ft=this._viewModel.read($e);if(!ft)return{items:[],getItem:Gi=>{throw new d.D7}};const Nt=ft.items.read($e),Jt=new Map;return{items:Nt.map(Gi=>{const kn=tt.add(new oa(Gi,this._objectPool,this.scrollLeft,Pn=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+Pn})})),Gn=this._lastDocStates?.[kn.getKey()];return Gn&&(0,Co.Rn)(Pn=>{kn.setViewState(Gn,Pn)}),Jt.set(Gi,kn),kn}),getItem:Gi=>Jt.get(Gi)}}),this._viewItems=this._viewItemsInfo.map(this,$e=>$e.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,($e,tt)=>$e.reduce((ft,Nt)=>ft+Nt.contentHeight.read(tt)+this._spaceBetweenPx,0)),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new Ma.a([te.fN,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(To.R.inMultiDiffEditor.key,!0),this._register((0,qn.yC)(($e,tt)=>{const ft=this._viewModel.read($e);if(ft&&ft.contextKeys)for(const[Nt,Jt]of Object.entries(ft.contextKeys)){const _i=this._contextKeyService.createKey(Nt,void 0);_i.set(Jt),tt.add((0,P.s)(()=>_i.reset()))}}));const De=this._parentContextKeyService.createKey(To.R.multiDiffEditorAllCollapsed.key,!1);this._register((0,qn.fm)($e=>{const tt=this._viewModel.read($e);if(tt){const ft=tt.items.read($e).every(Nt=>Nt.collapsed.read($e));De.set(ft)}})),this._register((0,qn.fm)($e=>{const tt=this._dimension.read($e);this._sizeObserver.observe(tt)})),this._register((0,qn.fm)($e=>{const tt=this._viewItems.read($e);this._elements.placeholder.classList.toggle("visible",tt.length===0)})),this._scrollableElements.content.style.position="relative",this._register((0,qn.fm)($e=>{const tt=this._sizeObserver.height.read($e);this._scrollableElements.root.style.height=`${tt}px`;const ft=this._totalHeight.read($e);this._scrollableElements.content.style.height=`${ft}px`;const Nt=this._sizeObserver.width.read($e);let Jt=Nt;const _i=this._viewItems.read($e),Gi=(0,zu.Cn)(_i,(0,S.VE)(kn=>kn.maxScroll.read($e).maxScroll,S.U9));if(Gi){const kn=Gi.maxScroll.read($e);Jt=Nt+kn.maxScroll}this._scrollableElement.setScrollDimensions({width:Nt,height:tt,scrollHeight:ft,scrollWidth:Jt})})),r.replaceChildren(this._elements.root),this._register((0,P.s)(()=>{r.replaceChildren()})),this._register(this._register((0,qn.fm)($e=>{(0,Co.YY)(tt=>{this.render($e)})})))}render(r){const p=this.scrollTop.read(r);let L=0,V=0,X=0;const ge=this._sizeObserver.height.read(r),De=tc.L.ofStartAndLength(p,ge),$e=this._sizeObserver.width.read(r);for(const tt of this._viewItems.read(r)){const ft=tt.contentHeight.read(r),Nt=Math.min(ft,ge),Jt=tc.L.ofStartAndLength(V,Nt),_i=tc.L.ofStartAndLength(X,ft);if(_i.isBefore(De))L-=ft-Nt,tt.hide();else if(_i.isAfter(De))tt.hide();else{const Gi=Math.max(0,Math.min(De.start-_i.start,ft-Nt));L-=Gi;const kn=tc.L.ofStartAndLength(p+L,ge);tt.render(Jt,Gi,$e,kn)}V+=Nt+this._spaceBetweenPx,X+=ft+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(p+L)}px)`}};Jc=Xc([Ku(4,te.fN),Ku(5,dt._Y)],Jc);class oa extends P.jG{constructor(r,p,L,V){super(),this.viewModel=r,this._objectPool=p,this._scrollLeft=L,this._deltaScrollVertical=V,this._templateRef=this._register((0,Co.X2)(this,void 0)),this.contentHeight=(0,qn.un)(this,X=>this._templateRef.read(X)?.object.contentHeight?.read(X)??this.viewModel.lastTemplateData.read(X).contentHeight),this.maxScroll=(0,qn.un)(this,X=>this._templateRef.read(X)?.object.maxScroll.read(X)??{maxScroll:0,scrollWidth:0}),this.template=(0,qn.un)(this,X=>this._templateRef.read(X)?.object),this._isHidden=(0,qn.FY)(this,!1),this._isFocused=(0,qn.un)(this,X=>this.template.read(X)?.isFocused.read(X)??!1),this.viewModel.setIsFocused(this._isFocused,void 0),this._register((0,qn.fm)(X=>{const ge=this._scrollLeft.read(X);this._templateRef.read(X)?.object.setScrollLeft(ge)})),this._register((0,qn.fm)(X=>{const ge=this._templateRef.read(X);!ge||!this._isHidden.read(X)||ge.object.isFocused.read(X)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){return`VirtualViewItem(${this.viewModel.documentDiffItem.modified?.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(r,p){this.viewModel.collapsed.set(r.collapsed,p),this._updateTemplateData(p);const L=this.viewModel.lastTemplateData.get(),V=r.selections?.map(ph.L.liftSelection);this.viewModel.lastTemplateData.set({...L,selections:V},p);const X=this._templateRef.get();X&&V&&X.object.editor.setSelections(V)}_updateTemplateData(r){const p=this._templateRef.get();p&&this.viewModel.lastTemplateData.set({contentHeight:p.object.contentHeight.get(),selections:p.object.editor.getSelections()??void 0},r)}_clear(){const r=this._templateRef.get();r&&(0,Co.Rn)(p=>{this._updateTemplateData(p),r.object.hide(),this._templateRef.set(void 0,p)})}hide(){this._isHidden.set(!0,void 0)}render(r,p,L,V){this._isHidden.set(!1,void 0);let X=this._templateRef.get();if(!X){X=this._objectPool.getUnusedObj(new Zf(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(X,void 0);const ge=this.viewModel.lastTemplateData.get().selections;ge&&X.object.editor.setSelections(ge)}X.object.render(r,L,p,V)}}const $u=(0,wi.x1A)("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},(0,D.kg)("multiDiffEditor.headerBackground","The background color of the diff editor's header")),jv=(0,wi.x1A)("multiDiffEditor.background",wi.YtV,(0,D.kg)("multiDiffEditor.background","The background color of the multi file diff editor")),Kv=(0,wi.x1A)("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},(0,D.kg)("multiDiffEditor.border","The border color of the multi file diff editor"));var Xf=function(de,r,p,L){var V=arguments.length,X=V<3?r:L===null?L=Object.getOwnPropertyDescriptor(r,p):L,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(de,r,p,L);else for(var De=de.length-1;De>=0;De--)(ge=de[De])&&(X=(V<3?ge(X):V>3?ge(r,p,X):ge(r,p))||X);return V>3&&X&&Object.defineProperty(r,p,X),X},ra=function(de,r){return function(p,L){r(p,L,de)}};let aa=class extends P.jG{constructor(r,p,L){super(),this._element=r,this._workbenchUIElementFactory=p,this._instantiationService=L,this._dimension=(0,qn.FY)(this,void 0),this._viewModel=(0,qn.FY)(this,void 0),this._widgetImpl=(0,qn.rm)(this,(V,X)=>((0,No.b)(Zc,V),X.add(this._instantiationService.createInstance((0,No.b)(Jc,V),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register((0,qn.OI)(this._widgetImpl))}};aa=Xf([ra(2,dt._Y)],aa);function Jf(de,r,p){return tn.initialize(p||{}).createInstance(al,de,r)}function qc(de){return tn.get(I.T).onCodeEditorAdd(p=>{de(p)})}function fr(de){return tn.get(I.T).onDiffEditorAdd(p=>{de(p)})}function Gu(){return tn.get(I.T).listCodeEditors()}function qf(){return tn.get(I.T).listDiffEditors()}function Ch(de,r,p){return tn.initialize(p||{}).createInstance(mh,de,r)}function Qu(de,r){const p=tn.initialize(r||{});return new aa(de,{},p)}function ed(de){if(typeof de.id!="string"||typeof de.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return $n.w.registerCommand(de.id,de.run)}function Yu(de){if(typeof de.id!="string"||typeof de.label!="string"||typeof de.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const r=te.M$.deserialize(de.precondition),p=(V,...X)=>A.DX.runEditorCommand(V,X,r,(ge,De,$e)=>Promise.resolve(de.run(De,...$e))),L=new P.Cm;if(L.add($n.w.registerCommand(de.id,p)),de.contextMenuGroupId){const V={command:{id:de.id,title:de.label},when:r,group:de.contextMenuGroupId,order:de.contextMenuOrder||0};L.add(en.ZG.appendMenuItem(en.D8.EditorContext,V))}if(Array.isArray(de.keybindings)){const V=tn.get(dn.b);if(V instanceof rn){const X=te.M$.and(r,te.M$.deserialize(de.keybindingContext));L.add(V.addDynamicKeybindings(de.keybindings.map(ge=>({keybinding:ge,command:de.id,when:X}))))}}return L}function em(de){return Zu([de])}function Zu(de){const r=tn.get(dn.b);return r instanceof rn?r.addDynamicKeybindings(de.map(p=>({keybinding:p.keybinding,command:p.command,commandArgs:p.commandArgs,when:te.M$.deserialize(p.when)}))):P.jG.None}function tm(de,r,p){const L=tn.get(Ys.L),V=L.getLanguageIdByMimeType(r)||r;return Yc(tn.get(K.IModelService),L,de,V,p)}function Xu(de,r){const p=tn.get(Ys.L),L=p.getLanguageIdByMimeType(r)||r||jc.vH;de.setLanguage(p.createById(L))}function td(de,r,p){de&&tn.get(y.DR).changeOne(r,de.uri,p)}function nr(de){tn.get(y.DR).changeAll(de,[])}function ll(de){return tn.get(y.DR).read(de)}function im(de){return tn.get(y.DR).onMarkerChanged(de)}function nm(de){return tn.get(K.IModelService).getModel(de)}function bh(){return tn.get(K.IModelService).getModels()}function Ju(de){return tn.get(K.IModelService).onModelAdded(de)}function sm(de){return tn.get(K.IModelService).onModelRemoved(de)}function om(de){return tn.get(K.IModelService).onModelLanguageChanged(p=>{de({model:p.model,oldLanguage:p.oldLanguageId})})}function Pa(de){return Yl(tn.get(K.IModelService),de)}function cl(de,r){const p=tn.get(Ys.L),L=tn.get(_o.L);return $c.colorizeElement(L,p,de,r).then(()=>{L.registerEditorContainer(de)})}function rm(de,r,p){const L=tn.get(Ys.L);return tn.get(_o.L).registerEditorContainer(U.G.document.body),$c.colorize(L,de,r,p)}function am(de,r,p=4){return tn.get(_o.L).registerEditorContainer(U.G.document.body),$c.colorizeModelLine(de,r,p)}function zo(de){const r=Ds.dG.get(de);return r||{getInitialState:()=>qr.r3,tokenize:(p,L,V)=>(0,qr.$H)(de,V)}}function qu(de,r){Ds.dG.getOrCreate(r);const p=zo(r),L=(0,M.uz)(de),V=[];let X=p.getInitialState();for(let ge=0,De=L.length;ge<De;ge++){const $e=L[ge],tt=p.tokenize($e,!0,X);V[ge]=tt.tokens,X=tt.endState}return V}function nc(de,r){tn.get(_o.L).defineTheme(de,r)}function id(de){tn.get(_o.L).setTheme(de)}function lm(){O.T.clearAllFontInfos()}function cm(de,r){return $n.w.registerCommand({id:de,handler:r})}function eg(de){return tn.get(Zn.C).registerOpener({async open(p){return typeof p=="string"&&(p=w.r.parse(p)),de.open(p)}})}function dm(de){return tn.get(I.T).registerCodeEditorOpenHandler(async(p,L,V)=>{if(!L)return null;const X=p.options?.selection;let ge;return X&&typeof X.endLineNumber=="number"&&typeof X.endColumn=="number"?ge=X:X&&(ge={lineNumber:X.startLineNumber,column:X.startColumn}),await de.openCodeEditor(L,p.resource,ge)?L:null})}function sr(){return{create:Jf,getEditors:Gu,getDiffEditors:qf,onDidCreateEditor:qc,onDidCreateDiffEditor:fr,createDiffEditor:Ch,addCommand:ed,addEditorAction:Yu,addKeybindingRule:em,addKeybindingRules:Zu,createModel:tm,setModelLanguage:Xu,setModelMarkers:td,getModelMarkers:ll,removeAllMarkers:nr,onDidChangeMarkers:im,getModels:bh,getModel:nm,onDidCreateModel:Ju,onWillDisposeModel:sm,onDidChangeModelLanguage:om,createWebWorker:Pa,colorizeElement:cl,colorize:rm,colorizeModelLine:am,tokenize:qu,defineTheme:nc,setTheme:id,remeasureFonts:lm,registerCommand:cm,registerLinkOpener:eg,registerEditorOpener:dm,AccessibilitySupport:An.Gn,ContentWidgetPositionPreference:An.Qj,CursorChangeReason:An.h5,DefaultEndOfLine:An.of,EditorAutoIndentStrategy:An.e0,EditorOption:An.p2,EndOfLinePreference:An.kf,EndOfLineSequence:An.WU,MinimapPosition:An.R3,MinimapSectionHeaderStyle:An.VX,MouseTargetType:An.hS,OverlayWidgetPositionPreference:An.dE,OverviewRulerLane:An.A5,GlyphMarginLane:An.ZS,RenderLineNumbersType:An.DO,RenderMinimap:An.hW,ScrollbarVisibility:An.XR,ScrollType:An.ov,TextEditorCursorBlinkingStyle:An.U7,TextEditorCursorStyle:An.m9,TrackedRangeStickiness:An.kK,WrappingIndent:An.tJ,InjectedTextCursorStops:An.VW,PositionAffinity:An.Ic,ShowLightbulbIconMode:An.jT,ConfigurationChangedEvent:u.lw,BareFontInfo:hh._8,FontInfo:hh.YJ,TextModelResolvedOptions:uh.X2,FindMatch:uh.Dg,ApplyUpdateResult:u.hZ,EditorZoom:Au.D,createMultiFileDiffEditor:Qu,EditorType:Of._,EditorOptions:u.qB}}var ps=c(34920);function Sh(de,r){if(!r||!Array.isArray(r))return!1;for(const p of r)if(!de(p))return!1;return!0}function dl(de,r){return typeof de=="boolean"?de:r}function wh(de,r){return typeof de=="string"?de:r}function nd(de){const r={};for(const p of de)r[p]=!0;return r}function yh(de,r=!1){r&&(de=de.map(function(L){return L.toLowerCase()}));const p=nd(de);return r?function(L){return p[L.toLowerCase()]!==void 0&&p.hasOwnProperty(L.toLowerCase())}:function(L){return p[L]!==void 0&&p.hasOwnProperty(L)}}function hl(de,r,p){r=r.replace(/@@/g,"");let L=0,V;do V=!1,r=r.replace(/@(\w+)/g,function(ge,De){V=!0;let $e="";if(typeof de[De]=="string")$e=de[De];else if(de[De]&&de[De]instanceof RegExp)$e=de[De].source;else throw de[De]===void 0?ss(de,"language definition does not contain attribute '"+De+"', used at: "+r):ss(de,"attribute reference '"+De+"' must be a string, used at: "+r);return ta($e)?"":"(?:"+$e+")"}),L++;while(V&&L<5);r=r.replace(/\x01/g,"@");const X=(de.ignoreCase?"i":"")+(de.unicode?"u":"");if(p&&r.match(/\$[sS](\d\d?)/g)){let De=null,$e=null;return tt=>($e&&De===tt||(De=tt,$e=new RegExp(Wf(de,r,tt),X)),$e)}return new RegExp(r,X)}function tg(de,r,p,L){if(L<0)return de;if(L<r.length)return r[L];if(L>=100){L=L-100;const V=p.split(".");if(V.unshift(p),L<V.length)return V[L]}return null}function Lh(de,r,p,L){let V=-1,X=p,ge=p.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);ge&&(ge[3]&&(V=parseInt(ge[3]),ge[2]&&(V=V+100)),X=ge[4]);let De="~",$e=X;!X||X.length===0?(De="!=",$e=""):/^\w*$/.test($e)?De="==":(ge=X.match(/^(@|!@|~|!~|==|!=)(.*)$/),ge&&(De=ge[1],$e=ge[2]));let tt;if((De==="~"||De==="!~")&&/^(\w|\|)*$/.test($e)){const ft=yh($e.split("|"),de.ignoreCase);tt=function(Nt){return De==="~"?ft(Nt):!ft(Nt)}}else if(De==="@"||De==="!@"){const ft=de[$e];if(!ft)throw ss(de,"the @ match target '"+$e+"' is not defined, in rule: "+r);if(!Sh(function(Jt){return typeof Jt=="string"},ft))throw ss(de,"the @ match target '"+$e+"' must be an array of strings, in rule: "+r);const Nt=yh(ft,de.ignoreCase);tt=function(Jt){return De==="@"?Nt(Jt):!Nt(Jt)}}else if(De==="~"||De==="!~")if($e.indexOf("$")<0){const ft=hl(de,"^"+$e+"$",!1);tt=function(Nt){return De==="~"?ft.test(Nt):!ft.test(Nt)}}else tt=function(ft,Nt,Jt,_i){return hl(de,"^"+ia(de,$e,Nt,Jt,_i)+"$",!1).test(ft)};else if($e.indexOf("$")<0){const ft=Mo(de,$e);tt=function(Nt){return De==="=="?Nt===ft:Nt!==ft}}else{const ft=Mo(de,$e);tt=function(Nt,Jt,_i,Gi,kn){const Gn=ia(de,ft,Jt,_i,Gi);return De==="=="?Nt===Gn:Nt!==Gn}}return V===-1?{name:p,value:L,test:function(ft,Nt,Jt,_i){return tt(ft,ft,Nt,Jt,_i)}}:{name:p,value:L,test:function(ft,Nt,Jt,_i){const Gi=tg(ft,Nt,Jt,V);return tt(Gi||"",ft,Nt,Jt,_i)}}}function la(de,r,p){if(p){if(typeof p=="string")return p;if(p.token||p.token===""){if(typeof p.token!="string")throw ss(de,"a 'token' attribute must be of type string, in rule: "+r);{const L={token:p.token};if(p.token.indexOf("$")>=0&&(L.tokenSubst=!0),typeof p.bracket=="string")if(p.bracket==="@open")L.bracket=1;else if(p.bracket==="@close")L.bracket=-1;else throw ss(de,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+r);if(p.next){if(typeof p.next!="string")throw ss(de,"the next state must be a string value in rule: "+r);{let V=p.next;if(!/^(@pop|@push|@popall)$/.test(V)&&(V[0]==="@"&&(V=V.substr(1)),V.indexOf("$")<0&&!Bf(de,ia(de,V,"",[],""))))throw ss(de,"the next state '"+p.next+"' is not defined in rule: "+r);L.next=V}}return typeof p.goBack=="number"&&(L.goBack=p.goBack),typeof p.switchTo=="string"&&(L.switchTo=p.switchTo),typeof p.log=="string"&&(L.log=p.log),typeof p.nextEmbedded=="string"&&(L.nextEmbedded=p.nextEmbedded,de.usesEmbedded=!0),L}}else if(Array.isArray(p)){const L=[];for(let V=0,X=p.length;V<X;V++)L[V]=la(de,r,p[V]);return{group:L}}else if(p.cases){const L=[];for(const X in p.cases)if(p.cases.hasOwnProperty(X)){const ge=la(de,r,p.cases[X]);X==="@default"||X==="@"||X===""?L.push({test:void 0,value:ge,name:X}):X==="@eos"?L.push({test:function(De,$e,tt,ft){return ft},value:ge,name:X}):L.push(Lh(de,r,X,ge))}const V=de.defaultToken;return{test:function(X,ge,De,$e){for(const tt of L)if(!tt.test||tt.test(X,ge,De,$e))return tt.value;return V}}}else throw ss(de,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+r)}else return{token:""}}class hm{constructor(r){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=r}setRegex(r,p){let L;if(typeof p=="string")L=p;else if(p instanceof RegExp)L=p.source;else throw ss(r,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=L.length>0&&L[0]==="^",this.name=this.name+": "+L,this.regex=hl(r,"^(?:"+(this.matchOnlyAtLineStart?L.substr(1):L)+")",!0)}setAction(r,p){this.action=la(r,this.name,p)}resolveRegex(r){return this.regex instanceof RegExp?this.regex:this.regex(r)}}function Aa(de,r){if(!r||typeof r!="object")throw new Error("Monarch: expecting a language definition object");const p={languageId:de,includeLF:dl(r.includeLF,!1),noThrow:!1,maxStack:100,start:typeof r.start=="string"?r.start:null,ignoreCase:dl(r.ignoreCase,!1),unicode:dl(r.unicode,!1),tokenPostfix:wh(r.tokenPostfix,"."+de),defaultToken:wh(r.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},L=r;L.languageId=de,L.includeLF=p.includeLF,L.ignoreCase=p.ignoreCase,L.unicode=p.unicode,L.noThrow=p.noThrow,L.usesEmbedded=p.usesEmbedded,L.stateNames=r.tokenizer,L.defaultToken=p.defaultToken;function V(ge,De,$e){for(const tt of $e){let ft=tt.include;if(ft){if(typeof ft!="string")throw ss(p,"an 'include' attribute must be a string at: "+ge);if(ft[0]==="@"&&(ft=ft.substr(1)),!r.tokenizer[ft])throw ss(p,"include target '"+ft+"' is not defined at: "+ge);V(ge+"."+ft,De,r.tokenizer[ft])}else{const Nt=new hm(ge);if(Array.isArray(tt)&&tt.length>=1&&tt.length<=3)if(Nt.setRegex(L,tt[0]),tt.length>=3)if(typeof tt[1]=="string")Nt.setAction(L,{token:tt[1],next:tt[2]});else if(typeof tt[1]=="object"){const Jt=tt[1];Jt.next=tt[2],Nt.setAction(L,Jt)}else throw ss(p,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+ge);else Nt.setAction(L,tt[1]);else{if(!tt.regex)throw ss(p,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+ge);tt.name&&typeof tt.name=="string"&&(Nt.name=tt.name),tt.matchOnlyAtStart&&(Nt.matchOnlyAtLineStart=dl(tt.matchOnlyAtLineStart,!1)),Nt.setRegex(L,tt.regex),Nt.setAction(L,tt.action)}De.push(Nt)}}}if(!r.tokenizer||typeof r.tokenizer!="object")throw ss(p,"a language definition must define the 'tokenizer' attribute as an object");p.tokenizer=[];for(const ge in r.tokenizer)if(r.tokenizer.hasOwnProperty(ge)){p.start||(p.start=ge);const De=r.tokenizer[ge];p.tokenizer[ge]=new Array,V("tokenizer."+ge,p.tokenizer[ge],De)}if(p.usesEmbedded=L.usesEmbedded,r.brackets){if(!Array.isArray(r.brackets))throw ss(p,"the 'brackets' attribute must be defined as an array")}else r.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const X=[];for(const ge of r.brackets){let De=ge;if(De&&Array.isArray(De)&&De.length===3&&(De={token:De[2],open:De[0],close:De[1]}),De.open===De.close)throw ss(p,"open and close brackets in a 'brackets' attribute must be different: "+De.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof De.open=="string"&&typeof De.token=="string"&&typeof De.close=="string")X.push({token:De.token+p.tokenPostfix,open:Mo(p,De.open),close:Mo(p,De.close)});else throw ss(p,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return p.brackets=X,p.noThrow=!0,p}function sd(de){jc.W6.registerLanguage(de)}function Us(){let de=[];return de=de.concat(jc.W6.getLanguages()),de}function um(de){return tn.get(Ys.L).languageIdCodec.encodeLanguageId(de)}function Ar(de,r){return tn.withServices(()=>{const L=tn.get(Ys.L).onDidRequestRichLanguageFeatures(V=>{V===de&&(L.dispose(),r())});return L})}function jo(de,r){return tn.withServices(()=>{const L=tn.get(Ys.L).onDidRequestBasicLanguageFeatures(V=>{V===de&&(L.dispose(),r())});return L})}function ig(de,r){if(!tn.get(Ys.L).isRegisteredLanguageId(de))throw new Error(`Cannot set configuration for unknown language ${de}`);return tn.get(Ae.JZ).register(de,r,100)}class ng{constructor(r,p){this._languageId=r,this._actual=p}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(r,p,L){if(typeof this._actual.tokenize=="function")return sc.adaptTokenize(this._languageId,this._actual,r,L);throw new Error("Not supported!")}tokenizeEncoded(r,p,L){const V=this._actual.tokenizeEncoded(r,L);return new Ds.rY(V.tokens,V.endState)}}class sc{constructor(r,p,L,V){this._languageId=r,this._actual=p,this._languageService=L,this._standaloneThemeService=V}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(r,p){const L=[];let V=0;for(let X=0,ge=r.length;X<ge;X++){const De=r[X];let $e=De.startIndex;X===0?$e=0:$e<V&&($e=V),L[X]=new Ds.ou($e,De.scopes,p),V=$e}return L}static adaptTokenize(r,p,L,V){const X=p.tokenize(L,V),ge=sc._toClassicTokens(X.tokens,r);let De;return X.endState.equals(V)?De=V:De=X.endState,new Ds.$M(ge,De)}tokenize(r,p,L){return sc.adaptTokenize(this._languageId,this._actual,r,L)}_toBinaryTokens(r,p){const L=r.encodeLanguageId(this._languageId),V=this._standaloneThemeService.getColorTheme().tokenTheme,X=[];let ge=0,De=0;for(let tt=0,ft=p.length;tt<ft;tt++){const Nt=p[tt],Jt=V.match(L,Nt.scopes)|1024;if(ge>0&&X[ge-1]===Jt)continue;let _i=Nt.startIndex;tt===0?_i=0:_i<De&&(_i=De),X[ge++]=_i,X[ge++]=Jt,De=_i}const $e=new Uint32Array(ge);for(let tt=0;tt<ge;tt++)$e[tt]=X[tt];return $e}tokenizeEncoded(r,p,L){const V=this._actual.tokenize(r,L),X=this._toBinaryTokens(this._languageService.languageIdCodec,V.tokens);let ge;return V.endState.equals(L)?ge=L:ge=V.endState,new Ds.rY(X,ge)}}function gm(de){return typeof de.getInitialState=="function"}function fm(de){return"tokenizeEncoded"in de}function sg(de){return de&&typeof de.then=="function"}function Dh(de){const r=tn.get(_o.L);if(de){const p=[null];for(let L=1,V=de.length;L<V;L++)p[L]=ps.Q1.fromHex(de[L]);r.setColorMapOverride(p)}else r.setColorMapOverride(null)}function og(de,r){return fm(r)?new ng(de,r):new sc(de,r,tn.get(Ys.L),tn.get(_o.L))}function od(de,r){const p=new Ds.v_(async()=>{const L=await Promise.resolve(r.create());return L?gm(L)?og(de,L):new Jl(tn.get(Ys.L),tn.get(_o.L),de,Aa(de,L),tn.get(nn.pG)):null});return Ds.dG.registerFactory(de,p)}function rg(de,r){if(!tn.get(Ys.L).isRegisteredLanguageId(de))throw new Error(`Cannot set tokens provider for unknown language ${de}`);return sg(r)?od(de,{create:()=>r}):Ds.dG.register(de,og(de,r))}function ag(de,r){const p=L=>new Jl(tn.get(Ys.L),tn.get(_o.L),de,Aa(de,L),tn.get(nn.pG));return sg(r)?od(de,{create:()=>r}):Ds.dG.register(de,p(r))}function uo(de,r){return tn.get(me.ILanguageFeaturesService).referenceProvider.register(de,r)}function rd(de,r){return tn.get(me.ILanguageFeaturesService).renameProvider.register(de,r)}function mm(de,r){return tn.get(me.ILanguageFeaturesService).newSymbolNamesProvider.register(de,r)}function pm(de,r){return tn.get(me.ILanguageFeaturesService).signatureHelpProvider.register(de,r)}function ad(de,r){return tn.get(me.ILanguageFeaturesService).hoverProvider.register(de,{provideHover:async(L,V,X,ge)=>{const De=L.getWordAtPosition(V);return Promise.resolve(r.provideHover(L,V,X,ge)).then($e=>{if($e)return!$e.range&&De&&($e.range=new Re.Q(V.lineNumber,De.startColumn,V.lineNumber,De.endColumn)),$e.range||($e.range=new Re.Q(V.lineNumber,V.column,V.lineNumber,V.column)),$e})}})}function _m(de,r){return tn.get(me.ILanguageFeaturesService).documentSymbolProvider.register(de,r)}function lg(de,r){return tn.get(me.ILanguageFeaturesService).documentHighlightProvider.register(de,r)}function cg(de,r){return tn.get(me.ILanguageFeaturesService).linkedEditingRangeProvider.register(de,r)}function vm(de,r){return tn.get(me.ILanguageFeaturesService).definitionProvider.register(de,r)}function Cm(de,r){return tn.get(me.ILanguageFeaturesService).implementationProvider.register(de,r)}function $v(de,r){return tn.get(me.ILanguageFeaturesService).typeDefinitionProvider.register(de,r)}function Gv(de,r){return tn.get(me.ILanguageFeaturesService).codeLensProvider.register(de,r)}function Qv(de,r,p){return tn.get(me.ILanguageFeaturesService).codeActionProvider.register(de,{providedCodeActionKinds:p?.providedCodeActionKinds,documentation:p?.documentation,provideCodeActions:(V,X,ge,De)=>{const tt=tn.get(y.DR).read({resource:V.uri}).filter(ft=>Re.Q.areIntersectingOrTouching(ft,X));return r.provideCodeActions(V,X,{markers:tt,only:ge.only,trigger:ge.trigger},De)},resolveCodeAction:r.resolveCodeAction})}function Yv(de,r){return tn.get(me.ILanguageFeaturesService).documentFormattingEditProvider.register(de,r)}function dg(de,r){return tn.get(me.ILanguageFeaturesService).documentRangeFormattingEditProvider.register(de,r)}function Zv(de,r){return tn.get(me.ILanguageFeaturesService).onTypeFormattingEditProvider.register(de,r)}function Xv(de,r){return tn.get(me.ILanguageFeaturesService).linkProvider.register(de,r)}function Jv(de,r){return tn.get(me.ILanguageFeaturesService).completionProvider.register(de,r)}function qv(de,r){return tn.get(me.ILanguageFeaturesService).colorProvider.register(de,r)}function e0(de,r){return tn.get(me.ILanguageFeaturesService).foldingRangeProvider.register(de,r)}function mr(de,r){return tn.get(me.ILanguageFeaturesService).declarationProvider.register(de,r)}function pr(de,r){return tn.get(me.ILanguageFeaturesService).selectionRangeProvider.register(de,r)}function ca(de,r){return tn.get(me.ILanguageFeaturesService).documentSemanticTokensProvider.register(de,r)}function bm(de,r){return tn.get(me.ILanguageFeaturesService).documentRangeSemanticTokensProvider.register(de,r)}function oc(de,r){return tn.get(me.ILanguageFeaturesService).inlineCompletionsProvider.register(de,r)}function bo(de,r){return tn.get(me.ILanguageFeaturesService).inlineEditProvider.register(de,r)}function Eh(de,r){return tn.get(me.ILanguageFeaturesService).inlayHintsProvider.register(de,r)}function ld(){return{register:sd,getLanguages:Us,onLanguage:Ar,onLanguageEncountered:jo,getEncodedLanguageId:um,setLanguageConfiguration:ig,setColorMap:Dh,registerTokensProviderFactory:od,setTokensProvider:rg,setMonarchTokensProvider:ag,registerReferenceProvider:uo,registerRenameProvider:rd,registerNewSymbolNameProvider:mm,registerCompletionItemProvider:Jv,registerSignatureHelpProvider:pm,registerHoverProvider:ad,registerDocumentSymbolProvider:_m,registerDocumentHighlightProvider:lg,registerLinkedEditingRangeProvider:cg,registerDefinitionProvider:vm,registerImplementationProvider:Cm,registerTypeDefinitionProvider:$v,registerCodeLensProvider:Gv,registerCodeActionProvider:Qv,registerDocumentFormattingEditProvider:Yv,registerDocumentRangeFormattingEditProvider:dg,registerOnTypeFormattingEditProvider:Zv,registerLinkProvider:Xv,registerColorProvider:qv,registerFoldingRangeProvider:e0,registerDeclarationProvider:mr,registerSelectionRangeProvider:pr,registerDocumentSemanticTokensProvider:ca,registerDocumentRangeSemanticTokensProvider:bm,registerInlineCompletionsProvider:oc,registerInlineEditProvider:bo,registerInlayHintsProvider:Eh,DocumentHighlightKind:An.Kb,CompletionItemKind:An.Io,CompletionItemTag:An.QP,CompletionItemInsertTextRule:An._E,SymbolKind:An.v0,SymbolTag:An.H_,IndentAction:An.l,CompletionTriggerKind:An.t7,SignatureHelpTriggerKind:An.WA,InlayHintKind:An.r4,InlineCompletionTriggerKind:An.qw,InlineEditTriggerKind:An.sm,CodeActionTriggerType:An.ok,NewSymbolNameTag:An.OV,NewSymbolNameTriggerKind:An.YT,PartialAcceptTriggerKind:An.Ah,HoverVerbosityAction:An.M$,FoldingRangeKind:Ds.lO,SelectedSuggestionInfo:Ds.GE}}var Sm=c(2352);u.qB.wrappingIndent.defaultValue=0,u.qB.glyphMargin.defaultValue=!1,u.qB.autoIndent.defaultValue=3,u.qB.overviewRulerLanes.defaultValue=2,Sm.Pj.setFormatterSelector((de,r,p)=>Promise.resolve(de[0]));const ro=(0,G.createMonacoBaseAPI)();ro.editor=sr(),ro.languages=ld();const hg=ro.CancellationTokenSource,Xs=ro.Emitter,rc=ro.KeyCode,cd=ro.KeyMod,dd=ro.Position,xh=ro.Range,kh=ro.Selection,wm=ro.SelectionDirection,Ih=ro.MarkerSeverity,ym=ro.MarkerTag,Mh=ro.Uri,hd=ro.Token,Lm=ro.editor,ud=ro.languages;(globalThis.MonacoEnvironment?.globalAPI||typeof define=="function"&&c.amdO)&&(globalThis.monaco=ro),typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]})},65327:(Mt,He,c)=>{c.d(He,{L:()=>G});var u=c(81545);const G=(0,u.u1)("themeService")},65365:(Mt,He,c)=>{c.r(He),c.d(He,{IModelService:()=>G});var u=c(81545);const G=(0,u.u1)("modelService")},66412:(Mt,He,c)=>{c.d(He,{s:()=>G});var u=c(23418);class G{static whitespaceVisibleColumn(P,M,w){const O=P.length;let A=0,I=-1,b=-1;for(let C=0;C<O;C++){if(C===M)return[I,b,A];switch(A%w===0&&(I=C,b=A),P.charCodeAt(C)){case 32:A+=1;break;case 9:A=u.A.nextRenderTabStop(A,w);break;default:return[-1,-1,-1]}}return M===O?[I,b,A]:[-1,-1,-1]}static atomicPosition(P,M,w,O){const A=P.length,[I,b,C]=G.whitespaceVisibleColumn(P,M,w);if(C===-1)return-1;let v;switch(O){case 0:v=!0;break;case 1:v=!1;break;case 2:if(C%w===0)return M;v=C%w<=w/2;break}if(v){if(I===-1)return-1;let m=b;for(let S=I;S<A;++S){if(m===b+w)return I;switch(P.charCodeAt(S)){case 32:m+=1;break;case 9:m=u.A.nextRenderTabStop(m,w);break;default:return-1}}return m===b+w?I:-1}const _=u.A.nextRenderTabStop(C,w);let d=C;for(let m=M;m<A;m++){if(d===_)return m;switch(P.charCodeAt(m)){case 32:d+=1;break;case 9:d=u.A.nextRenderTabStop(d,w);break;default:return-1}}return d===_?A:-1}}},66498:(Mt,He,c)=>{c.d(He,{$f:()=>w,MU:()=>O,Yb:()=>I,_t:()=>A,vn:()=>M});var u=c(85565),G=c(81483),U=c(32857);function P(C,v,_){const d=C.tokenization.getLanguageIdAtPosition(v,0);if(v>1){let m,S=-1;for(m=v-1;m>=1;m--){if(C.tokenization.getLanguageIdAtPosition(m,0)!==d)return S;const D=C.getLineContent(m);if(_.shouldIgnore(m)||/^\s+$/.test(D)||D===""){S=m;continue}return m}}return-1}function M(C,v,_,d=!0,m){if(C<4)return null;const S=m.getLanguageConfiguration(v.tokenization.getLanguageId()).indentRulesSupport;if(!S)return null;const D=new U.no(v,S,m);if(_<=1)return{indentation:"",action:null};for(let B=_-1;B>0&&v.getLineContent(B)==="";B--)if(B===1)return{indentation:"",action:null};const E=P(v,_,D);if(E<0)return null;if(E<1)return{indentation:"",action:null};if(D.shouldIncrease(E)||D.shouldIndentNextLine(E)){const B=v.getLineContent(E);return{indentation:u.UU(B),action:G.l.Indent,line:E}}else if(D.shouldDecrease(E)){const B=v.getLineContent(E);return{indentation:u.UU(B),action:null,line:E}}else{if(E===1)return{indentation:u.UU(v.getLineContent(E)),action:null,line:E};const B=E-1,R=S.getIndentMetadata(v.getLineContent(B));if(!(R&3)&&R&4){let z=0;for(let W=B-1;W>0;W--)if(!D.shouldIndentNextLine(W)){z=W;break}return{indentation:u.UU(v.getLineContent(z+1)),action:null,line:z+1}}if(d)return{indentation:u.UU(v.getLineContent(E)),action:null,line:E};for(let z=E;z>0;z--){if(D.shouldIncrease(z))return{indentation:u.UU(v.getLineContent(z)),action:G.l.Indent,line:z};if(D.shouldIndentNextLine(z)){let W=0;for(let $=z-1;$>0;$--)if(!D.shouldIndentNextLine(z)){W=$;break}return{indentation:u.UU(v.getLineContent(W+1)),action:null,line:W+1}}else if(D.shouldDecrease(z))return{indentation:u.UU(v.getLineContent(z)),action:null,line:z}}return{indentation:u.UU(v.getLineContent(1)),action:null,line:1}}}function w(C,v,_,d,m,S){if(C<4)return null;const D=S.getLanguageConfiguration(_);if(!D)return null;const E=S.getLanguageConfiguration(_).indentRulesSupport;if(!E)return null;const B=new U.no(v,E,S),R=M(C,v,d,void 0,S);if(R){const z=R.line;if(z!==void 0){let W=!0;for(let $=z;$<d-1;$++)if(!/^\s*$/.test(v.getLineContent($))){W=!1;break}if(W){const $=D.onEnter(C,"",v.getLineContent(z),"");if($){let Q=u.UU(v.getLineContent(z));return $.removeText&&(Q=Q.substring(0,Q.length-$.removeText)),$.indentAction===G.l.Indent||$.indentAction===G.l.IndentOutdent?Q=m.shiftIndent(Q):$.indentAction===G.l.Outdent&&(Q=m.unshiftIndent(Q)),B.shouldDecrease(d)&&(Q=m.unshiftIndent(Q)),$.appendText&&(Q+=$.appendText),u.UU(Q)}}}return B.shouldDecrease(d)?R.action===G.l.Indent?R.indentation:m.unshiftIndent(R.indentation):R.action===G.l.Indent?m.shiftIndent(R.indentation):R.indentation}return null}function O(C,v,_,d,m){if(C<4)return null;const S=v.getLanguageIdAtPosition(_.startLineNumber,_.startColumn),D=m.getLanguageConfiguration(S).indentRulesSupport;if(!D)return null;v.tokenization.forceTokenization(_.startLineNumber);const B=new U.V(v,m).getProcessedTokenContextAroundRange(_),R=B.afterRangeProcessedTokens,z=B.beforeRangeProcessedTokens,W=u.UU(z.getLineContent()),$=b(v,_.startLineNumber,z),Q=(0,U.WR)(v,_.getStartPosition()),q=v.getLineContent(_.startLineNumber),ne=u.UU(q),ve=M(C,$,_.startLineNumber+1,void 0,m);if(!ve){const Ae=Q?ne:W;return{beforeEnter:Ae,afterEnter:Ae}}let Re=Q?ne:ve.indentation;return ve.action===G.l.Indent&&(Re=d.shiftIndent(Re)),D.shouldDecrease(R.getLineContent())&&(Re=d.unshiftIndent(Re)),{beforeEnter:Q?ne:W,afterEnter:Re}}function A(C,v,_,d,m,S){const D=C.autoIndent;if(D<4||(0,U.WR)(v,_.getStartPosition()))return null;const B=v.getLanguageIdAtPosition(_.startLineNumber,_.startColumn),R=S.getLanguageConfiguration(B).indentRulesSupport;if(!R)return null;const W=new U.V(v,S).getProcessedTokenContextAroundRange(_),$=W.beforeRangeProcessedTokens.getLineContent(),Q=W.afterRangeProcessedTokens.getLineContent(),q=$+Q,ne=$+d+Q;if(!R.shouldDecrease(q)&&R.shouldDecrease(ne)){const Re=M(D,v,_.startLineNumber,!1,S);if(!Re)return null;let Ae=Re.indentation;return Re.action!==G.l.Indent&&(Ae=m.unshiftIndent(Ae)),Ae}const ve=_.startLineNumber-1;if(ve>0){const Re=v.getLineContent(ve);if(R.shouldIndentNextLine(Re)&&R.shouldIncrease(ne)){const re=M(D,v,_.startLineNumber,!1,S)?.indentation;if(re!==void 0){const K=v.getLineContent(_.startLineNumber),F=u.UU(K),j=m.shiftIndent(re)===F,me=/^\s*$/.test(q),ce=C.autoClosingPairs.autoClosingPairsOpenByEnd.get(d),Le=ce&&ce.length>0&&me;if(j&&Le)return re}}}return null}function I(C,v,_){const d=_.getLanguageConfiguration(C.getLanguageId()).indentRulesSupport;return!d||v<1||v>C.getLineCount()?null:d.getIndentMetadata(C.getLineContent(v))}function b(C,v,_){return{tokenization:{getLineTokens:m=>m===v?_:C.tokenization.getLineTokens(m),getLanguageId:()=>C.getLanguageId(),getLanguageIdAtPosition:(m,S)=>C.getLanguageIdAtPosition(m,S)},getLineContent:m=>m===v?_.getLineContent():C.getLineContent(m)}}},67538:(Mt,He,c)=>{c.d(He,{W:()=>P});var u=c(91467);const G={add:(0,u.k)("add",6e4),plus:(0,u.k)("plus",6e4),gistNew:(0,u.k)("gist-new",6e4),repoCreate:(0,u.k)("repo-create",6e4),lightbulb:(0,u.k)("lightbulb",60001),lightBulb:(0,u.k)("light-bulb",60001),repo:(0,u.k)("repo",60002),repoDelete:(0,u.k)("repo-delete",60002),gistFork:(0,u.k)("gist-fork",60003),repoForked:(0,u.k)("repo-forked",60003),gitPullRequest:(0,u.k)("git-pull-request",60004),gitPullRequestAbandoned:(0,u.k)("git-pull-request-abandoned",60004),recordKeys:(0,u.k)("record-keys",60005),keyboard:(0,u.k)("keyboard",60005),tag:(0,u.k)("tag",60006),gitPullRequestLabel:(0,u.k)("git-pull-request-label",60006),tagAdd:(0,u.k)("tag-add",60006),tagRemove:(0,u.k)("tag-remove",60006),person:(0,u.k)("person",60007),personFollow:(0,u.k)("person-follow",60007),personOutline:(0,u.k)("person-outline",60007),personFilled:(0,u.k)("person-filled",60007),gitBranch:(0,u.k)("git-branch",60008),gitBranchCreate:(0,u.k)("git-branch-create",60008),gitBranchDelete:(0,u.k)("git-branch-delete",60008),sourceControl:(0,u.k)("source-control",60008),mirror:(0,u.k)("mirror",60009),mirrorPublic:(0,u.k)("mirror-public",60009),star:(0,u.k)("star",60010),starAdd:(0,u.k)("star-add",60010),starDelete:(0,u.k)("star-delete",60010),starEmpty:(0,u.k)("star-empty",60010),comment:(0,u.k)("comment",60011),commentAdd:(0,u.k)("comment-add",60011),alert:(0,u.k)("alert",60012),warning:(0,u.k)("warning",60012),search:(0,u.k)("search",60013),searchSave:(0,u.k)("search-save",60013),logOut:(0,u.k)("log-out",60014),signOut:(0,u.k)("sign-out",60014),logIn:(0,u.k)("log-in",60015),signIn:(0,u.k)("sign-in",60015),eye:(0,u.k)("eye",60016),eyeUnwatch:(0,u.k)("eye-unwatch",60016),eyeWatch:(0,u.k)("eye-watch",60016),circleFilled:(0,u.k)("circle-filled",60017),primitiveDot:(0,u.k)("primitive-dot",60017),closeDirty:(0,u.k)("close-dirty",60017),debugBreakpoint:(0,u.k)("debug-breakpoint",60017),debugBreakpointDisabled:(0,u.k)("debug-breakpoint-disabled",60017),debugHint:(0,u.k)("debug-hint",60017),terminalDecorationSuccess:(0,u.k)("terminal-decoration-success",60017),primitiveSquare:(0,u.k)("primitive-square",60018),edit:(0,u.k)("edit",60019),pencil:(0,u.k)("pencil",60019),info:(0,u.k)("info",60020),issueOpened:(0,u.k)("issue-opened",60020),gistPrivate:(0,u.k)("gist-private",60021),gitForkPrivate:(0,u.k)("git-fork-private",60021),lock:(0,u.k)("lock",60021),mirrorPrivate:(0,u.k)("mirror-private",60021),close:(0,u.k)("close",60022),removeClose:(0,u.k)("remove-close",60022),x:(0,u.k)("x",60022),repoSync:(0,u.k)("repo-sync",60023),sync:(0,u.k)("sync",60023),clone:(0,u.k)("clone",60024),desktopDownload:(0,u.k)("desktop-download",60024),beaker:(0,u.k)("beaker",60025),microscope:(0,u.k)("microscope",60025),vm:(0,u.k)("vm",60026),deviceDesktop:(0,u.k)("device-desktop",60026),file:(0,u.k)("file",60027),fileText:(0,u.k)("file-text",60027),more:(0,u.k)("more",60028),ellipsis:(0,u.k)("ellipsis",60028),kebabHorizontal:(0,u.k)("kebab-horizontal",60028),mailReply:(0,u.k)("mail-reply",60029),reply:(0,u.k)("reply",60029),organization:(0,u.k)("organization",60030),organizationFilled:(0,u.k)("organization-filled",60030),organizationOutline:(0,u.k)("organization-outline",60030),newFile:(0,u.k)("new-file",60031),fileAdd:(0,u.k)("file-add",60031),newFolder:(0,u.k)("new-folder",60032),fileDirectoryCreate:(0,u.k)("file-directory-create",60032),trash:(0,u.k)("trash",60033),trashcan:(0,u.k)("trashcan",60033),history:(0,u.k)("history",60034),clock:(0,u.k)("clock",60034),folder:(0,u.k)("folder",60035),fileDirectory:(0,u.k)("file-directory",60035),symbolFolder:(0,u.k)("symbol-folder",60035),logoGithub:(0,u.k)("logo-github",60036),markGithub:(0,u.k)("mark-github",60036),github:(0,u.k)("github",60036),terminal:(0,u.k)("terminal",60037),console:(0,u.k)("console",60037),repl:(0,u.k)("repl",60037),zap:(0,u.k)("zap",60038),symbolEvent:(0,u.k)("symbol-event",60038),error:(0,u.k)("error",60039),stop:(0,u.k)("stop",60039),variable:(0,u.k)("variable",60040),symbolVariable:(0,u.k)("symbol-variable",60040),array:(0,u.k)("array",60042),symbolArray:(0,u.k)("symbol-array",60042),symbolModule:(0,u.k)("symbol-module",60043),symbolPackage:(0,u.k)("symbol-package",60043),symbolNamespace:(0,u.k)("symbol-namespace",60043),symbolObject:(0,u.k)("symbol-object",60043),symbolMethod:(0,u.k)("symbol-method",60044),symbolFunction:(0,u.k)("symbol-function",60044),symbolConstructor:(0,u.k)("symbol-constructor",60044),symbolBoolean:(0,u.k)("symbol-boolean",60047),symbolNull:(0,u.k)("symbol-null",60047),symbolNumeric:(0,u.k)("symbol-numeric",60048),symbolNumber:(0,u.k)("symbol-number",60048),symbolStructure:(0,u.k)("symbol-structure",60049),symbolStruct:(0,u.k)("symbol-struct",60049),symbolParameter:(0,u.k)("symbol-parameter",60050),symbolTypeParameter:(0,u.k)("symbol-type-parameter",60050),symbolKey:(0,u.k)("symbol-key",60051),symbolText:(0,u.k)("symbol-text",60051),symbolReference:(0,u.k)("symbol-reference",60052),goToFile:(0,u.k)("go-to-file",60052),symbolEnum:(0,u.k)("symbol-enum",60053),symbolValue:(0,u.k)("symbol-value",60053),symbolRuler:(0,u.k)("symbol-ruler",60054),symbolUnit:(0,u.k)("symbol-unit",60054),activateBreakpoints:(0,u.k)("activate-breakpoints",60055),archive:(0,u.k)("archive",60056),arrowBoth:(0,u.k)("arrow-both",60057),arrowDown:(0,u.k)("arrow-down",60058),arrowLeft:(0,u.k)("arrow-left",60059),arrowRight:(0,u.k)("arrow-right",60060),arrowSmallDown:(0,u.k)("arrow-small-down",60061),arrowSmallLeft:(0,u.k)("arrow-small-left",60062),arrowSmallRight:(0,u.k)("arrow-small-right",60063),arrowSmallUp:(0,u.k)("arrow-small-up",60064),arrowUp:(0,u.k)("arrow-up",60065),bell:(0,u.k)("bell",60066),bold:(0,u.k)("bold",60067),book:(0,u.k)("book",60068),bookmark:(0,u.k)("bookmark",60069),debugBreakpointConditionalUnverified:(0,u.k)("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:(0,u.k)("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:(0,u.k)("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:(0,u.k)("debug-breakpoint-data-unverified",60072),debugBreakpointData:(0,u.k)("debug-breakpoint-data",60073),debugBreakpointDataDisabled:(0,u.k)("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:(0,u.k)("debug-breakpoint-log-unverified",60074),debugBreakpointLog:(0,u.k)("debug-breakpoint-log",60075),debugBreakpointLogDisabled:(0,u.k)("debug-breakpoint-log-disabled",60075),briefcase:(0,u.k)("briefcase",60076),broadcast:(0,u.k)("broadcast",60077),browser:(0,u.k)("browser",60078),bug:(0,u.k)("bug",60079),calendar:(0,u.k)("calendar",60080),caseSensitive:(0,u.k)("case-sensitive",60081),check:(0,u.k)("check",60082),checklist:(0,u.k)("checklist",60083),chevronDown:(0,u.k)("chevron-down",60084),chevronLeft:(0,u.k)("chevron-left",60085),chevronRight:(0,u.k)("chevron-right",60086),chevronUp:(0,u.k)("chevron-up",60087),chromeClose:(0,u.k)("chrome-close",60088),chromeMaximize:(0,u.k)("chrome-maximize",60089),chromeMinimize:(0,u.k)("chrome-minimize",60090),chromeRestore:(0,u.k)("chrome-restore",60091),circleOutline:(0,u.k)("circle-outline",60092),circle:(0,u.k)("circle",60092),debugBreakpointUnverified:(0,u.k)("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:(0,u.k)("terminal-decoration-incomplete",60092),circleSlash:(0,u.k)("circle-slash",60093),circuitBoard:(0,u.k)("circuit-board",60094),clearAll:(0,u.k)("clear-all",60095),clippy:(0,u.k)("clippy",60096),closeAll:(0,u.k)("close-all",60097),cloudDownload:(0,u.k)("cloud-download",60098),cloudUpload:(0,u.k)("cloud-upload",60099),code:(0,u.k)("code",60100),collapseAll:(0,u.k)("collapse-all",60101),colorMode:(0,u.k)("color-mode",60102),commentDiscussion:(0,u.k)("comment-discussion",60103),creditCard:(0,u.k)("credit-card",60105),dash:(0,u.k)("dash",60108),dashboard:(0,u.k)("dashboard",60109),database:(0,u.k)("database",60110),debugContinue:(0,u.k)("debug-continue",60111),debugDisconnect:(0,u.k)("debug-disconnect",60112),debugPause:(0,u.k)("debug-pause",60113),debugRestart:(0,u.k)("debug-restart",60114),debugStart:(0,u.k)("debug-start",60115),debugStepInto:(0,u.k)("debug-step-into",60116),debugStepOut:(0,u.k)("debug-step-out",60117),debugStepOver:(0,u.k)("debug-step-over",60118),debugStop:(0,u.k)("debug-stop",60119),debug:(0,u.k)("debug",60120),deviceCameraVideo:(0,u.k)("device-camera-video",60121),deviceCamera:(0,u.k)("device-camera",60122),deviceMobile:(0,u.k)("device-mobile",60123),diffAdded:(0,u.k)("diff-added",60124),diffIgnored:(0,u.k)("diff-ignored",60125),diffModified:(0,u.k)("diff-modified",60126),diffRemoved:(0,u.k)("diff-removed",60127),diffRenamed:(0,u.k)("diff-renamed",60128),diff:(0,u.k)("diff",60129),diffSidebyside:(0,u.k)("diff-sidebyside",60129),discard:(0,u.k)("discard",60130),editorLayout:(0,u.k)("editor-layout",60131),emptyWindow:(0,u.k)("empty-window",60132),exclude:(0,u.k)("exclude",60133),extensions:(0,u.k)("extensions",60134),eyeClosed:(0,u.k)("eye-closed",60135),fileBinary:(0,u.k)("file-binary",60136),fileCode:(0,u.k)("file-code",60137),fileMedia:(0,u.k)("file-media",60138),filePdf:(0,u.k)("file-pdf",60139),fileSubmodule:(0,u.k)("file-submodule",60140),fileSymlinkDirectory:(0,u.k)("file-symlink-directory",60141),fileSymlinkFile:(0,u.k)("file-symlink-file",60142),fileZip:(0,u.k)("file-zip",60143),files:(0,u.k)("files",60144),filter:(0,u.k)("filter",60145),flame:(0,u.k)("flame",60146),foldDown:(0,u.k)("fold-down",60147),foldUp:(0,u.k)("fold-up",60148),fold:(0,u.k)("fold",60149),folderActive:(0,u.k)("folder-active",60150),folderOpened:(0,u.k)("folder-opened",60151),gear:(0,u.k)("gear",60152),gift:(0,u.k)("gift",60153),gistSecret:(0,u.k)("gist-secret",60154),gist:(0,u.k)("gist",60155),gitCommit:(0,u.k)("git-commit",60156),gitCompare:(0,u.k)("git-compare",60157),compareChanges:(0,u.k)("compare-changes",60157),gitMerge:(0,u.k)("git-merge",60158),githubAction:(0,u.k)("github-action",60159),githubAlt:(0,u.k)("github-alt",60160),globe:(0,u.k)("globe",60161),grabber:(0,u.k)("grabber",60162),graph:(0,u.k)("graph",60163),gripper:(0,u.k)("gripper",60164),heart:(0,u.k)("heart",60165),home:(0,u.k)("home",60166),horizontalRule:(0,u.k)("horizontal-rule",60167),hubot:(0,u.k)("hubot",60168),inbox:(0,u.k)("inbox",60169),issueReopened:(0,u.k)("issue-reopened",60171),issues:(0,u.k)("issues",60172),italic:(0,u.k)("italic",60173),jersey:(0,u.k)("jersey",60174),json:(0,u.k)("json",60175),kebabVertical:(0,u.k)("kebab-vertical",60176),key:(0,u.k)("key",60177),law:(0,u.k)("law",60178),lightbulbAutofix:(0,u.k)("lightbulb-autofix",60179),linkExternal:(0,u.k)("link-external",60180),link:(0,u.k)("link",60181),listOrdered:(0,u.k)("list-ordered",60182),listUnordered:(0,u.k)("list-unordered",60183),liveShare:(0,u.k)("live-share",60184),loading:(0,u.k)("loading",60185),location:(0,u.k)("location",60186),mailRead:(0,u.k)("mail-read",60187),mail:(0,u.k)("mail",60188),markdown:(0,u.k)("markdown",60189),megaphone:(0,u.k)("megaphone",60190),mention:(0,u.k)("mention",60191),milestone:(0,u.k)("milestone",60192),gitPullRequestMilestone:(0,u.k)("git-pull-request-milestone",60192),mortarBoard:(0,u.k)("mortar-board",60193),move:(0,u.k)("move",60194),multipleWindows:(0,u.k)("multiple-windows",60195),mute:(0,u.k)("mute",60196),noNewline:(0,u.k)("no-newline",60197),note:(0,u.k)("note",60198),octoface:(0,u.k)("octoface",60199),openPreview:(0,u.k)("open-preview",60200),package:(0,u.k)("package",60201),paintcan:(0,u.k)("paintcan",60202),pin:(0,u.k)("pin",60203),play:(0,u.k)("play",60204),run:(0,u.k)("run",60204),plug:(0,u.k)("plug",60205),preserveCase:(0,u.k)("preserve-case",60206),preview:(0,u.k)("preview",60207),project:(0,u.k)("project",60208),pulse:(0,u.k)("pulse",60209),question:(0,u.k)("question",60210),quote:(0,u.k)("quote",60211),radioTower:(0,u.k)("radio-tower",60212),reactions:(0,u.k)("reactions",60213),references:(0,u.k)("references",60214),refresh:(0,u.k)("refresh",60215),regex:(0,u.k)("regex",60216),remoteExplorer:(0,u.k)("remote-explorer",60217),remote:(0,u.k)("remote",60218),remove:(0,u.k)("remove",60219),replaceAll:(0,u.k)("replace-all",60220),replace:(0,u.k)("replace",60221),repoClone:(0,u.k)("repo-clone",60222),repoForcePush:(0,u.k)("repo-force-push",60223),repoPull:(0,u.k)("repo-pull",60224),repoPush:(0,u.k)("repo-push",60225),report:(0,u.k)("report",60226),requestChanges:(0,u.k)("request-changes",60227),rocket:(0,u.k)("rocket",60228),rootFolderOpened:(0,u.k)("root-folder-opened",60229),rootFolder:(0,u.k)("root-folder",60230),rss:(0,u.k)("rss",60231),ruby:(0,u.k)("ruby",60232),saveAll:(0,u.k)("save-all",60233),saveAs:(0,u.k)("save-as",60234),save:(0,u.k)("save",60235),screenFull:(0,u.k)("screen-full",60236),screenNormal:(0,u.k)("screen-normal",60237),searchStop:(0,u.k)("search-stop",60238),server:(0,u.k)("server",60240),settingsGear:(0,u.k)("settings-gear",60241),settings:(0,u.k)("settings",60242),shield:(0,u.k)("shield",60243),smiley:(0,u.k)("smiley",60244),sortPrecedence:(0,u.k)("sort-precedence",60245),splitHorizontal:(0,u.k)("split-horizontal",60246),splitVertical:(0,u.k)("split-vertical",60247),squirrel:(0,u.k)("squirrel",60248),starFull:(0,u.k)("star-full",60249),starHalf:(0,u.k)("star-half",60250),symbolClass:(0,u.k)("symbol-class",60251),symbolColor:(0,u.k)("symbol-color",60252),symbolConstant:(0,u.k)("symbol-constant",60253),symbolEnumMember:(0,u.k)("symbol-enum-member",60254),symbolField:(0,u.k)("symbol-field",60255),symbolFile:(0,u.k)("symbol-file",60256),symbolInterface:(0,u.k)("symbol-interface",60257),symbolKeyword:(0,u.k)("symbol-keyword",60258),symbolMisc:(0,u.k)("symbol-misc",60259),symbolOperator:(0,u.k)("symbol-operator",60260),symbolProperty:(0,u.k)("symbol-property",60261),wrench:(0,u.k)("wrench",60261),wrenchSubaction:(0,u.k)("wrench-subaction",60261),symbolSnippet:(0,u.k)("symbol-snippet",60262),tasklist:(0,u.k)("tasklist",60263),telescope:(0,u.k)("telescope",60264),textSize:(0,u.k)("text-size",60265),threeBars:(0,u.k)("three-bars",60266),thumbsdown:(0,u.k)("thumbsdown",60267),thumbsup:(0,u.k)("thumbsup",60268),tools:(0,u.k)("tools",60269),triangleDown:(0,u.k)("triangle-down",60270),triangleLeft:(0,u.k)("triangle-left",60271),triangleRight:(0,u.k)("triangle-right",60272),triangleUp:(0,u.k)("triangle-up",60273),twitter:(0,u.k)("twitter",60274),unfold:(0,u.k)("unfold",60275),unlock:(0,u.k)("unlock",60276),unmute:(0,u.k)("unmute",60277),unverified:(0,u.k)("unverified",60278),verified:(0,u.k)("verified",60279),versions:(0,u.k)("versions",60280),vmActive:(0,u.k)("vm-active",60281),vmOutline:(0,u.k)("vm-outline",60282),vmRunning:(0,u.k)("vm-running",60283),watch:(0,u.k)("watch",60284),whitespace:(0,u.k)("whitespace",60285),wholeWord:(0,u.k)("whole-word",60286),window:(0,u.k)("window",60287),wordWrap:(0,u.k)("word-wrap",60288),zoomIn:(0,u.k)("zoom-in",60289),zoomOut:(0,u.k)("zoom-out",60290),listFilter:(0,u.k)("list-filter",60291),listFlat:(0,u.k)("list-flat",60292),listSelection:(0,u.k)("list-selection",60293),selection:(0,u.k)("selection",60293),listTree:(0,u.k)("list-tree",60294),debugBreakpointFunctionUnverified:(0,u.k)("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:(0,u.k)("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:(0,u.k)("debug-breakpoint-function-disabled",60296),debugStackframeActive:(0,u.k)("debug-stackframe-active",60297),circleSmallFilled:(0,u.k)("circle-small-filled",60298),debugStackframeDot:(0,u.k)("debug-stackframe-dot",60298),terminalDecorationMark:(0,u.k)("terminal-decoration-mark",60298),debugStackframe:(0,u.k)("debug-stackframe",60299),debugStackframeFocused:(0,u.k)("debug-stackframe-focused",60299),debugBreakpointUnsupported:(0,u.k)("debug-breakpoint-unsupported",60300),symbolString:(0,u.k)("symbol-string",60301),debugReverseContinue:(0,u.k)("debug-reverse-continue",60302),debugStepBack:(0,u.k)("debug-step-back",60303),debugRestartFrame:(0,u.k)("debug-restart-frame",60304),debugAlt:(0,u.k)("debug-alt",60305),callIncoming:(0,u.k)("call-incoming",60306),callOutgoing:(0,u.k)("call-outgoing",60307),menu:(0,u.k)("menu",60308),expandAll:(0,u.k)("expand-all",60309),feedback:(0,u.k)("feedback",60310),gitPullRequestReviewer:(0,u.k)("git-pull-request-reviewer",60310),groupByRefType:(0,u.k)("group-by-ref-type",60311),ungroupByRefType:(0,u.k)("ungroup-by-ref-type",60312),account:(0,u.k)("account",60313),gitPullRequestAssignee:(0,u.k)("git-pull-request-assignee",60313),bellDot:(0,u.k)("bell-dot",60314),debugConsole:(0,u.k)("debug-console",60315),library:(0,u.k)("library",60316),output:(0,u.k)("output",60317),runAll:(0,u.k)("run-all",60318),syncIgnored:(0,u.k)("sync-ignored",60319),pinned:(0,u.k)("pinned",60320),githubInverted:(0,u.k)("github-inverted",60321),serverProcess:(0,u.k)("server-process",60322),serverEnvironment:(0,u.k)("server-environment",60323),pass:(0,u.k)("pass",60324),issueClosed:(0,u.k)("issue-closed",60324),stopCircle:(0,u.k)("stop-circle",60325),playCircle:(0,u.k)("play-circle",60326),record:(0,u.k)("record",60327),debugAltSmall:(0,u.k)("debug-alt-small",60328),vmConnect:(0,u.k)("vm-connect",60329),cloud:(0,u.k)("cloud",60330),merge:(0,u.k)("merge",60331),export:(0,u.k)("export",60332),graphLeft:(0,u.k)("graph-left",60333),magnet:(0,u.k)("magnet",60334),notebook:(0,u.k)("notebook",60335),redo:(0,u.k)("redo",60336),checkAll:(0,u.k)("check-all",60337),pinnedDirty:(0,u.k)("pinned-dirty",60338),passFilled:(0,u.k)("pass-filled",60339),circleLargeFilled:(0,u.k)("circle-large-filled",60340),circleLarge:(0,u.k)("circle-large",60341),circleLargeOutline:(0,u.k)("circle-large-outline",60341),combine:(0,u.k)("combine",60342),gather:(0,u.k)("gather",60342),table:(0,u.k)("table",60343),variableGroup:(0,u.k)("variable-group",60344),typeHierarchy:(0,u.k)("type-hierarchy",60345),typeHierarchySub:(0,u.k)("type-hierarchy-sub",60346),typeHierarchySuper:(0,u.k)("type-hierarchy-super",60347),gitPullRequestCreate:(0,u.k)("git-pull-request-create",60348),runAbove:(0,u.k)("run-above",60349),runBelow:(0,u.k)("run-below",60350),notebookTemplate:(0,u.k)("notebook-template",60351),debugRerun:(0,u.k)("debug-rerun",60352),workspaceTrusted:(0,u.k)("workspace-trusted",60353),workspaceUntrusted:(0,u.k)("workspace-untrusted",60354),workspaceUnknown:(0,u.k)("workspace-unknown",60355),terminalCmd:(0,u.k)("terminal-cmd",60356),terminalDebian:(0,u.k)("terminal-debian",60357),terminalLinux:(0,u.k)("terminal-linux",60358),terminalPowershell:(0,u.k)("terminal-powershell",60359),terminalTmux:(0,u.k)("terminal-tmux",60360),terminalUbuntu:(0,u.k)("terminal-ubuntu",60361),terminalBash:(0,u.k)("terminal-bash",60362),arrowSwap:(0,u.k)("arrow-swap",60363),copy:(0,u.k)("copy",60364),personAdd:(0,u.k)("person-add",60365),filterFilled:(0,u.k)("filter-filled",60366),wand:(0,u.k)("wand",60367),debugLineByLine:(0,u.k)("debug-line-by-line",60368),inspect:(0,u.k)("inspect",60369),layers:(0,u.k)("layers",60370),layersDot:(0,u.k)("layers-dot",60371),layersActive:(0,u.k)("layers-active",60372),compass:(0,u.k)("compass",60373),compassDot:(0,u.k)("compass-dot",60374),compassActive:(0,u.k)("compass-active",60375),azure:(0,u.k)("azure",60376),issueDraft:(0,u.k)("issue-draft",60377),gitPullRequestClosed:(0,u.k)("git-pull-request-closed",60378),gitPullRequestDraft:(0,u.k)("git-pull-request-draft",60379),debugAll:(0,u.k)("debug-all",60380),debugCoverage:(0,u.k)("debug-coverage",60381),runErrors:(0,u.k)("run-errors",60382),folderLibrary:(0,u.k)("folder-library",60383),debugContinueSmall:(0,u.k)("debug-continue-small",60384),beakerStop:(0,u.k)("beaker-stop",60385),graphLine:(0,u.k)("graph-line",60386),graphScatter:(0,u.k)("graph-scatter",60387),pieChart:(0,u.k)("pie-chart",60388),bracket:(0,u.k)("bracket",60175),bracketDot:(0,u.k)("bracket-dot",60389),bracketError:(0,u.k)("bracket-error",60390),lockSmall:(0,u.k)("lock-small",60391),azureDevops:(0,u.k)("azure-devops",60392),verifiedFilled:(0,u.k)("verified-filled",60393),newline:(0,u.k)("newline",60394),layout:(0,u.k)("layout",60395),layoutActivitybarLeft:(0,u.k)("layout-activitybar-left",60396),layoutActivitybarRight:(0,u.k)("layout-activitybar-right",60397),layoutPanelLeft:(0,u.k)("layout-panel-left",60398),layoutPanelCenter:(0,u.k)("layout-panel-center",60399),layoutPanelJustify:(0,u.k)("layout-panel-justify",60400),layoutPanelRight:(0,u.k)("layout-panel-right",60401),layoutPanel:(0,u.k)("layout-panel",60402),layoutSidebarLeft:(0,u.k)("layout-sidebar-left",60403),layoutSidebarRight:(0,u.k)("layout-sidebar-right",60404),layoutStatusbar:(0,u.k)("layout-statusbar",60405),layoutMenubar:(0,u.k)("layout-menubar",60406),layoutCentered:(0,u.k)("layout-centered",60407),target:(0,u.k)("target",60408),indent:(0,u.k)("indent",60409),recordSmall:(0,u.k)("record-small",60410),errorSmall:(0,u.k)("error-small",60411),terminalDecorationError:(0,u.k)("terminal-decoration-error",60411),arrowCircleDown:(0,u.k)("arrow-circle-down",60412),arrowCircleLeft:(0,u.k)("arrow-circle-left",60413),arrowCircleRight:(0,u.k)("arrow-circle-right",60414),arrowCircleUp:(0,u.k)("arrow-circle-up",60415),layoutSidebarRightOff:(0,u.k)("layout-sidebar-right-off",60416),layoutPanelOff:(0,u.k)("layout-panel-off",60417),layoutSidebarLeftOff:(0,u.k)("layout-sidebar-left-off",60418),blank:(0,u.k)("blank",60419),heartFilled:(0,u.k)("heart-filled",60420),map:(0,u.k)("map",60421),mapHorizontal:(0,u.k)("map-horizontal",60421),foldHorizontal:(0,u.k)("fold-horizontal",60421),mapFilled:(0,u.k)("map-filled",60422),mapHorizontalFilled:(0,u.k)("map-horizontal-filled",60422),foldHorizontalFilled:(0,u.k)("fold-horizontal-filled",60422),circleSmall:(0,u.k)("circle-small",60423),bellSlash:(0,u.k)("bell-slash",60424),bellSlashDot:(0,u.k)("bell-slash-dot",60425),commentUnresolved:(0,u.k)("comment-unresolved",60426),gitPullRequestGoToChanges:(0,u.k)("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:(0,u.k)("git-pull-request-new-changes",60428),searchFuzzy:(0,u.k)("search-fuzzy",60429),commentDraft:(0,u.k)("comment-draft",60430),send:(0,u.k)("send",60431),sparkle:(0,u.k)("sparkle",60432),insert:(0,u.k)("insert",60433),mic:(0,u.k)("mic",60434),thumbsdownFilled:(0,u.k)("thumbsdown-filled",60435),thumbsupFilled:(0,u.k)("thumbsup-filled",60436),coffee:(0,u.k)("coffee",60437),snake:(0,u.k)("snake",60438),game:(0,u.k)("game",60439),vr:(0,u.k)("vr",60440),chip:(0,u.k)("chip",60441),piano:(0,u.k)("piano",60442),music:(0,u.k)("music",60443),micFilled:(0,u.k)("mic-filled",60444),repoFetch:(0,u.k)("repo-fetch",60445),copilot:(0,u.k)("copilot",60446),lightbulbSparkle:(0,u.k)("lightbulb-sparkle",60447),robot:(0,u.k)("robot",60448),sparkleFilled:(0,u.k)("sparkle-filled",60449),diffSingle:(0,u.k)("diff-single",60450),diffMultiple:(0,u.k)("diff-multiple",60451),surroundWith:(0,u.k)("surround-with",60452),share:(0,u.k)("share",60453),gitStash:(0,u.k)("git-stash",60454),gitStashApply:(0,u.k)("git-stash-apply",60455),gitStashPop:(0,u.k)("git-stash-pop",60456),vscode:(0,u.k)("vscode",60457),vscodeInsiders:(0,u.k)("vscode-insiders",60458),codeOss:(0,u.k)("code-oss",60459),runCoverage:(0,u.k)("run-coverage",60460),runAllCoverage:(0,u.k)("run-all-coverage",60461),coverage:(0,u.k)("coverage",60462),githubProject:(0,u.k)("github-project",60463),mapVertical:(0,u.k)("map-vertical",60464),foldVertical:(0,u.k)("fold-vertical",60464),mapVerticalFilled:(0,u.k)("map-vertical-filled",60465),foldVerticalFilled:(0,u.k)("fold-vertical-filled",60465),goToSearch:(0,u.k)("go-to-search",60466),percentage:(0,u.k)("percentage",60467),sortPercentage:(0,u.k)("sort-percentage",60467),attach:(0,u.k)("attach",60468)},U={dialogError:(0,u.k)("dialog-error","error"),dialogWarning:(0,u.k)("dialog-warning","warning"),dialogInfo:(0,u.k)("dialog-info","info"),dialogClose:(0,u.k)("dialog-close","close"),treeItemExpanded:(0,u.k)("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:(0,u.k)("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:(0,u.k)("tree-filter-on-type-off","list-selection"),treeFilterClear:(0,u.k)("tree-filter-clear","close"),treeItemLoading:(0,u.k)("tree-item-loading","loading"),menuSelection:(0,u.k)("menu-selection","check"),menuSubmenu:(0,u.k)("menu-submenu","chevron-right"),menuBarMore:(0,u.k)("menubar-more","more"),scrollbarButtonLeft:(0,u.k)("scrollbar-button-left","triangle-left"),scrollbarButtonRight:(0,u.k)("scrollbar-button-right","triangle-right"),scrollbarButtonUp:(0,u.k)("scrollbar-button-up","triangle-up"),scrollbarButtonDown:(0,u.k)("scrollbar-button-down","triangle-down"),toolBarMore:(0,u.k)("toolbar-more","more"),quickInputBack:(0,u.k)("quick-input-back","arrow-left"),dropDownButton:(0,u.k)("drop-down-button",60084),symbolCustomColor:(0,u.k)("symbol-customcolor",60252),exportIcon:(0,u.k)("export",60332),workspaceUnspecified:(0,u.k)("workspace-unspecified",60355),newLine:(0,u.k)("newline",60394),thumbsDownFilled:(0,u.k)("thumbsdown-filled",60435),thumbsUpFilled:(0,u.k)("thumbsup-filled",60436),gitFetch:(0,u.k)("git-fetch",60445),lightbulbSparkleAutofix:(0,u.k)("lightbulb-sparkle-autofix",60447),debugBreakpointPending:(0,u.k)("debug-breakpoint-pending",60377)},P={...G,...U}},67933:(Mt,He,c)=>{c.d(He,{G5:()=>G,N8:()=>M,ke:()=>P});var u=c(81545);const G=(0,u.u1)("progressService"),U=Object.freeze({total(){},worked(){},done(){}});class P{static{this.None=Object.freeze({report(){}})}constructor(O){this.callback=O}report(O){this._value=O,this.callback(this._value)}}const M=(0,u.u1)("editorProgressService")},68624:(Mt,He,c)=>{c.d(He,{a:()=>u});class u{constructor(...U){this._entries=new Map;for(const[P,M]of U)this.set(P,M)}set(U,P){const M=this._entries.get(U);return this._entries.set(U,P),M}get(U){return this._entries.get(U)}}},68669:(Mt,He,c)=>{c.d(He,{CS:()=>v,pc:()=>S,LP:()=>_});var u=c(56491),G=c(60599),U=c(33902),P=c(37519),M=c(24385),w;(function(D){D[D.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",D[D.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(w||(w={}));var O;(function(D){D[D.None=0]="None",D[D.Initialized=1]="Initialized",D[D.Closed=2]="Closed"})(O||(O={}));class A extends G.jG{static{this.DEFAULT_FLUSH_DELAY=100}constructor(E,B=Object.create(null)){super(),this.database=E,this.options=B,this._onDidChangeStorage=this._register(new u.fV),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=O.None,this.cache=new Map,this.flushDelayer=this._register(new P.Th(A.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(E=>this.onDidChangeItemsExternal(E)))}onDidChangeItemsExternal(E){this._onDidChangeStorage.pause();try{E.changed?.forEach((B,R)=>this.acceptExternal(R,B)),E.deleted?.forEach(B=>this.acceptExternal(B,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(E,B){if(this.state===O.Closed)return;let R=!1;(0,U.z)(B)?R=this.cache.delete(E):this.cache.get(E)!==B&&(this.cache.set(E,B),R=!0),R&&this._onDidChangeStorage.fire({key:E,external:!0})}get(E,B){const R=this.cache.get(E);return(0,U.z)(R)?B:R}getBoolean(E,B){const R=this.get(E);return(0,U.z)(R)?B:R==="true"}getNumber(E,B){const R=this.get(E);return(0,U.z)(R)?B:parseInt(R,10)}async set(E,B,R=!1){if(this.state===O.Closed)return;if((0,U.z)(B))return this.delete(E,R);const z=(0,U.Gv)(B)||Array.isArray(B)?(0,M.As)(B):String(B);if(this.cache.get(E)!==z)return this.cache.set(E,z),this.pendingInserts.set(E,z),this.pendingDeletes.delete(E),this._onDidChangeStorage.fire({key:E,external:R}),this.doFlush()}async delete(E,B=!1){if(!(this.state===O.Closed||!this.cache.delete(E)))return this.pendingDeletes.has(E)||this.pendingDeletes.add(E),this.pendingInserts.delete(E),this._onDidChangeStorage.fire({key:E,external:B}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const E={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(E).finally(()=>{if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)this.whenFlushedCallbacks.pop()?.()})}async doFlush(E){return this.options.hint===w.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),E)}}class I{constructor(){this.onDidChangeItemsExternal=u.Jh.None,this.items=new Map}async updateItems(E){E.insert?.forEach((B,R)=>this.items.set(R,B)),E.delete?.forEach(B=>this.items.delete(B))}}var b=c(81545);const C="__$__targetStorageMarker",v=(0,b.u1)("storageService");var _;(function(D){D[D.NONE=0]="NONE",D[D.SHUTDOWN=1]="SHUTDOWN"})(_||(_={}));function d(D){const E=D.get(C);if(E)try{return JSON.parse(E)}catch{}return Object.create(null)}class m extends G.jG{static{this.DEFAULT_FLUSH_INTERVAL=60*1e3}constructor(E={flushInterval:m.DEFAULT_FLUSH_INTERVAL}){super(),this.options=E,this._onDidChangeValue=this._register(new u.fV),this._onDidChangeTarget=this._register(new u.fV),this._onWillSaveState=this._register(new u.vl),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(E,B,R){return u.Jh.filter(this._onDidChangeValue.event,z=>z.scope===E&&(B===void 0||z.key===B),R)}emitDidChangeValue(E,B){const{key:R,external:z}=B;if(R===C){switch(E){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:E})}else this._onDidChangeValue.fire({scope:E,key:R,target:this.getKeyTargets(E)[R],external:z})}get(E,B,R){return this.getStorage(B)?.get(E,R)}getBoolean(E,B,R){return this.getStorage(B)?.getBoolean(E,R)}getNumber(E,B,R){return this.getStorage(B)?.getNumber(E,R)}store(E,B,R,z,W=!1){if((0,U.z)(B)){this.remove(E,R,W);return}this.withPausedEmitters(()=>{this.updateKeyTarget(E,R,z),this.getStorage(R)?.set(E,B,W)})}remove(E,B,R=!1){this.withPausedEmitters(()=>{this.updateKeyTarget(E,B,void 0),this.getStorage(B)?.delete(E,R)})}withPausedEmitters(E){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{E()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(E,B,R,z=!1){const W=this.getKeyTargets(B);typeof R=="number"?W[E]!==R&&(W[E]=R,this.getStorage(B)?.set(C,JSON.stringify(W),z)):typeof W[E]=="number"&&(delete W[E],this.getStorage(B)?.set(C,JSON.stringify(W),z))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(E){switch(E){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(E){const B=this.getStorage(E);return B?d(B):Object.create(null)}}class S extends m{constructor(){super(),this.applicationStorage=this._register(new A(new I,{hint:w.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new A(new I,{hint:w.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new A(new I,{hint:w.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(E=>this.emitDidChangeValue(1,E))),this._register(this.profileStorage.onDidChangeStorage(E=>this.emitDidChangeValue(0,E))),this._register(this.applicationStorage.onDidChangeStorage(E=>this.emitDidChangeValue(-1,E)))}getStorage(E){switch(E){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}},68869:(Mt,He,c)=>{c.d(He,{YJ:()=>A,_8:()=>w});var u=c(90692),G=c(8775),U=c(75942);const P=u.zx?1.5:1.35,M=8;class w{static createFromValidatedSettings(b,C,v){const _=b.get(49),d=b.get(53),m=b.get(52),S=b.get(51),D=b.get(54),E=b.get(67),B=b.get(64);return w._create(_,d,m,S,D,E,B,C,v)}static _create(b,C,v,_,d,m,S,D,E){m===0?m=P*v:m<M&&(m=m*v),m=Math.round(m),m<M&&(m=M);const B=1+(E?0:U.D.getZoomLevel()*.1);return v*=B,m*=B,d===G.r_.TRANSLATE&&(C==="normal"||C==="bold"?d=G.r_.OFF:(d=`'wght' ${parseInt(C,10)}`,C="normal")),new w({pixelRatio:D,fontFamily:b,fontWeight:C,fontSize:v,fontFeatureSettings:_,fontVariationSettings:d,lineHeight:m,letterSpacing:S})}constructor(b){this._bareFontInfoBrand=void 0,this.pixelRatio=b.pixelRatio,this.fontFamily=String(b.fontFamily),this.fontWeight=String(b.fontWeight),this.fontSize=b.fontSize,this.fontFeatureSettings=b.fontFeatureSettings,this.fontVariationSettings=b.fontVariationSettings,this.lineHeight=b.lineHeight|0,this.letterSpacing=b.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const b=G.jU.fontFamily,C=w._wrapInQuotes(this.fontFamily);return b&&this.fontFamily!==b?`${C}, ${b}`:C}static _wrapInQuotes(b){return/[,"']/.test(b)?b:/[+ ]/.test(b)?`"${b}"`:b}}const O=2;class A extends w{constructor(b,C){super(b),this._editorStylingBrand=void 0,this.version=O,this.isTrusted=C,this.isMonospace=b.isMonospace,this.typicalHalfwidthCharacterWidth=b.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=b.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=b.canUseHalfwidthRightwardsArrow,this.spaceWidth=b.spaceWidth,this.middotWidth=b.middotWidth,this.wsmiddotWidth=b.wsmiddotWidth,this.maxDigitWidth=b.maxDigitWidth}equals(b){return this.fontFamily===b.fontFamily&&this.fontWeight===b.fontWeight&&this.fontSize===b.fontSize&&this.fontFeatureSettings===b.fontFeatureSettings&&this.fontVariationSettings===b.fontVariationSettings&&this.lineHeight===b.lineHeight&&this.letterSpacing===b.letterSpacing&&this.typicalHalfwidthCharacterWidth===b.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===b.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===b.canUseHalfwidthRightwardsArrow&&this.spaceWidth===b.spaceWidth&&this.middotWidth===b.middotWidth&&this.wsmiddotWidth===b.wsmiddotWidth&&this.maxDigitWidth===b.maxDigitWidth}}},69393:(Mt,He,c)=>{c.r(He),c.d(He,{IEditorWorkerService:()=>G});var u=c(81545);const G=(0,u.u1)("editorWorkerService")},69504:(Mt,He,c)=>{c.d(He,{y:()=>u});class u{constructor(U,P){this.lineNumber=U,this.column=P}with(U=this.lineNumber,P=this.column){return U===this.lineNumber&&P===this.column?this:new u(U,P)}delta(U=0,P=0){return this.with(this.lineNumber+U,this.column+P)}equals(U){return u.equals(this,U)}static equals(U,P){return!U&&!P?!0:!!U&&!!P&&U.lineNumber===P.lineNumber&&U.column===P.column}isBefore(U){return u.isBefore(this,U)}static isBefore(U,P){return U.lineNumber<P.lineNumber?!0:P.lineNumber<U.lineNumber?!1:U.column<P.column}isBeforeOrEqual(U){return u.isBeforeOrEqual(this,U)}static isBeforeOrEqual(U,P){return U.lineNumber<P.lineNumber?!0:P.lineNumber<U.lineNumber?!1:U.column<=P.column}static compare(U,P){const M=U.lineNumber|0,w=P.lineNumber|0;if(M===w){const O=U.column|0,A=P.column|0;return O-A}return M-w}clone(){return new u(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(U){return new u(U.lineNumber,U.column)}static isIPosition(U){return U&&typeof U.lineNumber=="number"&&typeof U.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}}},69708:(Mt,He,c)=>{c.d(He,{cw:()=>w,jN:()=>M,nu:()=>P});var u=c(81545),G=c(37473),U=c(33902);const P=(0,u.u1)("IWorkspaceEditService");class M{constructor(I){this.metadata=I}static convert(I){return I.edits.map(b=>{if(w.is(b))return w.lift(b);if(O.is(b))return O.lift(b);throw new Error("Unsupported edit")})}}class w extends M{static is(I){return I instanceof w?!0:(0,U.Gv)(I)&&G.r.isUri(I.resource)&&(0,U.Gv)(I.textEdit)}static lift(I){return I instanceof w?I:new w(I.resource,I.textEdit,I.versionId,I.metadata)}constructor(I,b,C=void 0,v){super(v),this.resource=I,this.textEdit=b,this.versionId=C}}class O extends M{static is(I){return I instanceof O?!0:(0,U.Gv)(I)&&(!!I.newResource||!!I.oldResource)}static lift(I){return I instanceof O?I:new O(I.oldResource,I.newResource,I.options,I.metadata)}constructor(I,b,C={},v){super(v),this.oldResource=I,this.newResource=b,this.options=C}}},70033:(Mt,He,c)=>{c.d(He,{m:()=>G});const u=20;class G{constructor(P,M,w,O,A,I){this._scrollbarSize=Math.round(M),this._oppositeScrollbarSize=Math.round(w),this._arrowSize=Math.round(P),this._visibleSize=O,this._scrollSize=A,this._scrollPosition=I,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new G(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(P){const M=Math.round(P);return this._visibleSize!==M?(this._visibleSize=M,this._refreshComputedValues(),!0):!1}setScrollSize(P){const M=Math.round(P);return this._scrollSize!==M?(this._scrollSize=M,this._refreshComputedValues(),!0):!1}setScrollPosition(P){const M=Math.round(P);return this._scrollPosition!==M?(this._scrollPosition=M,this._refreshComputedValues(),!0):!1}setScrollbarSize(P){this._scrollbarSize=Math.round(P)}setOppositeScrollbarSize(P){this._oppositeScrollbarSize=Math.round(P)}static _computeValues(P,M,w,O,A){const I=Math.max(0,w-P),b=Math.max(0,I-2*M),C=O>0&&O>w;if(!C)return{computedAvailableSize:Math.round(I),computedIsNeeded:C,computedSliderSize:Math.round(b),computedSliderRatio:0,computedSliderPosition:0};const v=Math.round(Math.max(u,Math.floor(w*b/O))),_=(b-v)/(O-w),d=A*_;return{computedAvailableSize:Math.round(I),computedIsNeeded:C,computedSliderSize:Math.round(v),computedSliderRatio:_,computedSliderPosition:Math.round(d)}}_refreshComputedValues(){const P=G._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=P.computedAvailableSize,this._computedIsNeeded=P.computedIsNeeded,this._computedSliderSize=P.computedSliderSize,this._computedSliderRatio=P.computedSliderRatio,this._computedSliderPosition=P.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(P){if(!this._computedIsNeeded)return 0;const M=P-this._arrowSize-this._computedSliderSize/2;return Math.round(M/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(P){if(!this._computedIsNeeded)return 0;const M=P-this._arrowSize;let w=this._scrollPosition;return M<this._computedSliderPosition?w-=this._visibleSize:w+=this._visibleSize,w}getDesiredScrollPositionFromDelta(P){if(!this._computedIsNeeded)return 0;const M=this._computedSliderPosition+P;return Math.round(M/this._computedSliderRatio)}}},70264:(Mt,He,c)=>{c.d(He,{cB:()=>O});var u=c(85565);class G{constructor(){this._value="",this._pos=0}reset(I){return this._value=I,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(I){const b=I.charCodeAt(0),C=this._value.charCodeAt(this._pos);return b-C}value(){return this._value[this._pos]}}class U{constructor(I=!0){this._caseSensitive=I}reset(I){return this._value=I,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let I=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(I)this._from++;else break;else I=!1;return this}cmp(I){return this._caseSensitive?(0,u.lF)(I,this._value,0,I.length,this._from,this._to):(0,u.zd)(I,this._value,0,I.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class P{constructor(I=!0,b=!0){this._splitOnBackslash=I,this._caseSensitive=b}reset(I){this._from=0,this._to=0,this._value=I,this._valueLen=I.length;for(let b=I.length-1;b>=0;b--,this._valueLen--){const C=this._value.charCodeAt(b);if(!(C===47||this._splitOnBackslash&&C===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let I=!0;for(;this._to<this._valueLen;this._to++){const b=this._value.charCodeAt(this._to);if(b===47||this._splitOnBackslash&&b===92)if(I)this._from++;else break;else I=!1}return this}cmp(I){return this._caseSensitive?(0,u.lF)(I,this._value,0,I.length,this._from,this._to):(0,u.zd)(I,this._value,0,I.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class M{constructor(I,b){this._ignorePathCasing=I,this._ignoreQueryAndFragment=b,this._states=[],this._stateIdx=0}reset(I){return this._value=I,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new P(!1,!this._ignorePathCasing(I)),this._pathIterator.reset(I.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(I)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(I){if(this._states[this._stateIdx]===1)return(0,u.W1)(I,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,u.W1)(I,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(I);if(this._states[this._stateIdx]===4)return(0,u.UD)(I,this._value.query);if(this._states[this._stateIdx]===5)return(0,u.UD)(I,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class w{constructor(){this.height=1}rotateLeft(){const I=this.right;return this.right=I.left,I.left=this,this.updateHeight(),I.updateHeight(),I}rotateRight(){const I=this.left;return this.left=I.right,I.right=this,this.updateHeight(),I.updateHeight(),I}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}class O{static forUris(I=()=>!1,b=()=>!1){return new O(new M(I,b))}static forStrings(){return new O(new G)}static forConfigKeys(){return new O(new U)}constructor(I){this._iter=I}clear(){this._root=void 0}set(I,b){const C=this._iter.reset(I);let v;this._root||(this._root=new w,this._root.segment=C.value());const _=[];for(v=this._root;;){const m=C.cmp(v.segment);if(m>0)v.left||(v.left=new w,v.left.segment=C.value()),_.push([-1,v]),v=v.left;else if(m<0)v.right||(v.right=new w,v.right.segment=C.value()),_.push([1,v]),v=v.right;else if(C.hasNext())C.next(),v.mid||(v.mid=new w,v.mid.segment=C.value()),_.push([0,v]),v=v.mid;else break}const d=v.value;v.value=b,v.key=I;for(let m=_.length-1;m>=0;m--){const S=_[m][1];S.updateHeight();const D=S.balanceFactor();if(D<-1||D>1){const E=_[m][0],B=_[m+1][0];if(E===1&&B===1)_[m][1]=S.rotateLeft();else if(E===-1&&B===-1)_[m][1]=S.rotateRight();else if(E===1&&B===-1)S.right=_[m+1][1]=_[m+1][1].rotateRight(),_[m][1]=S.rotateLeft();else if(E===-1&&B===1)S.left=_[m+1][1]=_[m+1][1].rotateLeft(),_[m][1]=S.rotateRight();else throw new Error;if(m>0)switch(_[m-1][0]){case-1:_[m-1][1].left=_[m][1];break;case 1:_[m-1][1].right=_[m][1];break;case 0:_[m-1][1].mid=_[m][1];break}else this._root=_[0][1]}}return d}get(I){return this._getNode(I)?.value}_getNode(I){const b=this._iter.reset(I);let C=this._root;for(;C;){const v=b.cmp(C.segment);if(v>0)C=C.left;else if(v<0)C=C.right;else if(b.hasNext())b.next(),C=C.mid;else break}return C}has(I){const b=this._getNode(I);return!(b?.value===void 0&&b?.mid===void 0)}delete(I){return this._delete(I,!1)}deleteSuperstr(I){return this._delete(I,!0)}_delete(I,b){const C=this._iter.reset(I),v=[];let _=this._root;for(;_;){const d=C.cmp(_.segment);if(d>0)v.push([-1,_]),_=_.left;else if(d<0)v.push([1,_]),_=_.right;else if(C.hasNext())C.next(),v.push([0,_]),_=_.mid;else break}if(_){if(b?(_.left=void 0,_.mid=void 0,_.right=void 0,_.height=1):(_.key=void 0,_.value=void 0),!_.mid&&!_.value)if(_.left&&_.right){const d=this._min(_.right);if(d.key){const{key:m,value:S,segment:D}=d;this._delete(d.key,!1),_.key=m,_.value=S,_.segment=D}}else{const d=_.left??_.right;if(v.length>0){const[m,S]=v[v.length-1];switch(m){case-1:S.left=d;break;case 0:S.mid=d;break;case 1:S.right=d;break}}else this._root=d}for(let d=v.length-1;d>=0;d--){const m=v[d][1];m.updateHeight();const S=m.balanceFactor();if(S>1?(m.right.balanceFactor()>=0||(m.right=m.right.rotateRight()),v[d][1]=m.rotateLeft()):S<-1&&(m.left.balanceFactor()<=0||(m.left=m.left.rotateLeft()),v[d][1]=m.rotateRight()),d>0)switch(v[d-1][0]){case-1:v[d-1][1].left=v[d][1];break;case 1:v[d-1][1].right=v[d][1];break;case 0:v[d-1][1].mid=v[d][1];break}else this._root=v[0][1]}}}_min(I){for(;I.left;)I=I.left;return I}findSubstr(I){const b=this._iter.reset(I);let C=this._root,v;for(;C;){const _=b.cmp(C.segment);if(_>0)C=C.left;else if(_<0)C=C.right;else if(b.hasNext())b.next(),v=C.value||v,C=C.mid;else break}return C&&C.value||v}findSuperstr(I){return this._findSuperstrOrElement(I,!1)}_findSuperstrOrElement(I,b){const C=this._iter.reset(I);let v=this._root;for(;v;){const _=C.cmp(v.segment);if(_>0)v=v.left;else if(_<0)v=v.right;else if(C.hasNext())C.next(),v=v.mid;else return v.mid?this._entries(v.mid):b?v.value:void 0}}forEach(I){for(const[b,C]of this)I(C,b)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(I){const b=[];return this._dfsEntries(I,b),b[Symbol.iterator]()}_dfsEntries(I,b){I&&(I.left&&this._dfsEntries(I.left,b),I.value&&b.push([I.key,I.value]),I.mid&&this._dfsEntries(I.mid,b),I.right&&this._dfsEntries(I.right,b))}}},70679:(Mt,He,c)=>{c.d(He,{Bm:()=>M,FB:()=>O,FY:()=>E,Lj:()=>B,N2:()=>I,PO:()=>S,Rn:()=>v,X2:()=>R,XL:()=>D,YY:()=>d,ZK:()=>C,fL:()=>m,zV:()=>b});var u=c(37486),G=c(3960),U=c(10137);let P;function M(W){P=W}let w;function O(W){w=W}let A;function I(W){A=W}class b{get TChange(){return null}reportChanges(){this.get()}read($){return $?$.readObservable(this):this.get()}map($,Q){const q=Q===void 0?void 0:$,ne=Q===void 0?$:Q;return A({owner:q,debugName:()=>{const ve=(0,G.qQ)(ne);if(ve!==void 0)return ve;const Ae=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(ne.toString());if(Ae)return`${this.debugName}.${Ae[2]}`;if(!q)return`${this.debugName} (mapped)`},debugReferenceFn:ne},ve=>ne(this.read(ve),ve))}flatten(){return A({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},$=>this.read($).read($))}recomputeInitiallyAndOnChange($,Q){return $.add(P(this,Q)),this}keepObserved($){return $.add(w(this)),this}}class C extends b{constructor(){super(...arguments),this.observers=new Set}addObserver($){const Q=this.observers.size;this.observers.add($),Q===0&&this.onFirstObserverAdded()}removeObserver($){this.observers.delete($)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function v(W,$){const Q=new D(W,$);try{W(Q)}finally{Q.finish()}}let _;function d(W){if(_)W(_);else{const $=new D(W,void 0);_=$;try{W($)}finally{$.finish(),_=void 0}}}async function m(W,$){const Q=new D(W,$);try{await W(Q)}finally{Q.finish()}}function S(W,$,Q){W?$(W):v($,Q)}class D{constructor($,Q){this._fn=$,this._getDebugName=Q,this.updatingObservers=[],(0,U.tZ)()?.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():(0,G.qQ)(this._fn)}updateObserver($,Q){this.updatingObservers.push({observer:$,observable:Q}),$.beginUpdate(Q)}finish(){const $=this.updatingObservers;for(let Q=0;Q<$.length;Q++){const{observer:q,observable:ne}=$[Q];q.endUpdate(ne)}this.updatingObservers=null,(0,U.tZ)()?.handleEndTransaction()}}function E(W,$){let Q;return typeof W=="string"?Q=new G.nA(void 0,W,void 0):Q=new G.nA(W,void 0,void 0),new B(Q,$,u.nx)}class B extends C{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor($,Q,q){super(),this._debugNameData=$,this._equalityComparator=q,this._value=Q}get(){return this._value}set($,Q,q){if(q===void 0&&this._equalityComparator(this._value,$))return;let ne;Q||(Q=ne=new D(()=>{},()=>`Setting ${this.debugName}`));try{const ve=this._value;this._setValue($),(0,U.tZ)()?.handleObservableChanged(this,{oldValue:ve,newValue:$,change:q,didChange:!0,hadValue:!0});for(const Re of this.observers)Q.updateObserver(Re,this),Re.handleChange(this,q)}finally{ne&&ne.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue($){this._value=$}}function R(W,$){let Q;return typeof W=="string"?Q=new G.nA(void 0,W,void 0):Q=new G.nA(W,void 0,void 0),new z(Q,$,u.nx)}class z extends B{_setValue($){this._value!==$&&(this._value&&this._value.dispose(),this._value=$)}dispose(){this._value?.dispose()}}},71245:(Mt,He,c)=>{c.d(He,{$8:()=>M,SL:()=>P,_3:()=>w,aY:()=>A,uY:()=>O});var u=c(93009),G=c(87856),U=c(88935);class P{static trivial(b,C){return new P([new M(U.L.ofLength(b.length),U.L.ofLength(C.length))],!1)}static trivialTimedOut(b,C){return new P([new M(U.L.ofLength(b.length),U.L.ofLength(C.length))],!0)}constructor(b,C){this.diffs=b,this.hitTimeout=C}}class M{static invert(b,C){const v=[];return(0,u.pN)(b,(_,d)=>{v.push(M.fromOffsetPairs(_?_.getEndExclusives():w.zero,d?d.getStarts():new w(C,(_?_.seq2Range.endExclusive-_.seq1Range.endExclusive:0)+C)))}),v}static fromOffsetPairs(b,C){return new M(new U.L(b.offset1,C.offset1),new U.L(b.offset2,C.offset2))}static assertSorted(b){let C;for(const v of b){if(C&&!(C.seq1Range.endExclusive<=v.seq1Range.start&&C.seq2Range.endExclusive<=v.seq2Range.start))throw new G.D7("Sequence diffs must be sorted");C=v}}constructor(b,C){this.seq1Range=b,this.seq2Range=C}swap(){return new M(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(b){return new M(this.seq1Range.join(b.seq1Range),this.seq2Range.join(b.seq2Range))}delta(b){return b===0?this:new M(this.seq1Range.delta(b),this.seq2Range.delta(b))}deltaStart(b){return b===0?this:new M(this.seq1Range.deltaStart(b),this.seq2Range.deltaStart(b))}deltaEnd(b){return b===0?this:new M(this.seq1Range.deltaEnd(b),this.seq2Range.deltaEnd(b))}intersect(b){const C=this.seq1Range.intersect(b.seq1Range),v=this.seq2Range.intersect(b.seq2Range);if(!(!C||!v))return new M(C,v)}getStarts(){return new w(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new w(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}class w{static{this.zero=new w(0,0)}static{this.max=new w(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)}constructor(b,C){this.offset1=b,this.offset2=C}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(b){return b===0?this:new w(this.offset1+b,this.offset2+b)}equals(b){return this.offset1===b.offset1&&this.offset2===b.offset2}}class O{static{this.instance=new O}isValid(){return!0}}class A{constructor(b){if(this.timeout=b,this.startTime=Date.now(),this.valid=!0,b<=0)throw new G.D7("timeout must be positive")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}}},71899:(Mt,He,c)=>{c.d(He,{g:()=>A});var u=c(85565),G=c(47917),U=c(92998),P=c(23418),M=c(85613),w=c(98414),O=c(69504);class A{static deleteRight(b,C,v,_){const d=[];let m=b!==3;for(let S=0,D=_.length;S<D;S++){const E=_[S];let B=E;if(B.isEmpty()){const R=E.getPosition(),z=M.I.right(C,v,R);B=new w.Q(z.lineNumber,z.column,R.lineNumber,R.column)}if(B.isEmpty()){d[S]=null;continue}B.startLineNumber!==B.endLineNumber&&(m=!0),d[S]=new G.iu(B,"")}return[m,d]}static isAutoClosingPairDelete(b,C,v,_,d,m,S){if(C==="never"&&v==="never"||b==="never")return!1;for(let D=0,E=m.length;D<E;D++){const B=m[D],R=B.getPosition();if(!B.isEmpty())return!1;const z=d.getLineContent(R.lineNumber);if(R.column<2||R.column>=z.length+1)return!1;const W=z.charAt(R.column-2),$=_.get(W);if(!$)return!1;if((0,U.vG)(W)){if(v==="never")return!1}else if(C==="never")return!1;const Q=z.charAt(R.column-1);let q=!1;for(const ne of $)ne.open===W&&ne.close===Q&&(q=!0);if(!q)return!1;if(b==="auto"){let ne=!1;for(let ve=0,Re=S.length;ve<Re;ve++){const Ae=S[ve];if(R.lineNumber===Ae.startLineNumber&&R.column===Ae.startColumn){ne=!0;break}}if(!ne)return!1}}return!0}static _runAutoClosingPairDelete(b,C,v){const _=[];for(let d=0,m=v.length;d<m;d++){const S=v[d].getPosition(),D=new w.Q(S.lineNumber,S.column-1,S.lineNumber,S.column+1);_[d]=new G.iu(D,"")}return[!0,_]}static deleteLeft(b,C,v,_,d){if(this.isAutoClosingPairDelete(C.autoClosingDelete,C.autoClosingBrackets,C.autoClosingQuotes,C.autoClosingPairs.autoClosingPairsOpenByEnd,v,_,d))return this._runAutoClosingPairDelete(C,v,_);const m=[];let S=b!==2;for(let D=0,E=_.length;D<E;D++){const B=A.getDeleteRange(_[D],v,C);if(B.isEmpty()){m[D]=null;continue}B.startLineNumber!==B.endLineNumber&&(S=!0),m[D]=new G.iu(B,"")}return[S,m]}static getDeleteRange(b,C,v){if(!b.isEmpty())return b;const _=b.getPosition();if(v.useTabStops&&_.column>1){const d=C.getLineContent(_.lineNumber),m=u.HG(d),S=m===-1?d.length+1:m+1;if(_.column<=S){const D=v.visibleColumnFromColumn(C,_),E=P.A.prevIndentTabStop(D,v.indentSize),B=v.columnFromVisibleColumn(C,_.lineNumber,E);return new w.Q(_.lineNumber,B,_.lineNumber,_.column)}}return w.Q.fromPositions(A.getPositionAfterDeleteLeft(_,C),_)}static getPositionAfterDeleteLeft(b,C){if(b.column>1){const v=u.Wd(b.column-1,C.getLineContent(b.lineNumber));return b.with(void 0,v+1)}else if(b.lineNumber>1){const v=b.lineNumber-1;return new O.y(v,C.getLineMaxColumn(v))}else return b}static cut(b,C,v){const _=[];let d=null;v.sort((m,S)=>O.y.compare(m.getStartPosition(),S.getEndPosition()));for(let m=0,S=v.length;m<S;m++){const D=v[m];if(D.isEmpty())if(b.emptySelectionClipboard){const E=D.getPosition();let B,R,z,W;E.lineNumber<C.getLineCount()?(B=E.lineNumber,R=1,z=E.lineNumber+1,W=1):E.lineNumber>1&&d?.endLineNumber!==E.lineNumber?(B=E.lineNumber-1,R=C.getLineMaxColumn(E.lineNumber-1),z=E.lineNumber,W=C.getLineMaxColumn(E.lineNumber)):(B=E.lineNumber,R=1,z=E.lineNumber,W=C.getLineMaxColumn(E.lineNumber));const $=new w.Q(B,R,z,W);d=$,$.isEmpty()?_[m]=null:_[m]=new G.iu($,"")}else _[m]=null;else _[m]=new G.iu(D,"")}return new U.vY(0,_,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}},72340:(Mt,He,c)=>{c.r(He),c.d(He,{SimpleWorkerClient:()=>E,SimpleWorkerServer:()=>z,create:()=>W,logOnceWebWorkerWarning:()=>C});var u=c(87856),G=c(56491),U=c(60599),P=c(54021),M=c(90692),w=c(85565);const O=!0,A="default",I="$initialize";let b=!1;function C($){M.HZ&&(b||(b=!0))}class v{constructor(Q,q,ne,ve,Re){this.vsWorker=Q,this.req=q,this.channel=ne,this.method=ve,this.args=Re,this.type=0}}class _{constructor(Q,q,ne,ve){this.vsWorker=Q,this.seq=q,this.res=ne,this.err=ve,this.type=1}}class d{constructor(Q,q,ne,ve,Re){this.vsWorker=Q,this.req=q,this.channel=ne,this.eventName=ve,this.arg=Re,this.type=2}}class m{constructor(Q,q,ne){this.vsWorker=Q,this.req=q,this.event=ne,this.type=3}}class S{constructor(Q,q){this.vsWorker=Q,this.req=q,this.type=4}}class D{constructor(Q){this._workerId=-1,this._handler=Q,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(Q){this._workerId=Q}sendMessage(Q,q,ne){const ve=String(++this._lastSentReq);return new Promise((Re,Ae)=>{this._pendingReplies[ve]={resolve:Re,reject:Ae},this._send(new v(this._workerId,ve,Q,q,ne))})}listen(Q,q,ne){let ve=null;const Re=new G.vl({onWillAddFirstListener:()=>{ve=String(++this._lastSentReq),this._pendingEmitters.set(ve,Re),this._send(new d(this._workerId,ve,Q,q,ne))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(ve),this._send(new S(this._workerId,ve)),ve=null}});return Re.event}handleMessage(Q){!Q||!Q.vsWorker||this._workerId!==-1&&Q.vsWorker!==this._workerId||this._handleMessage(Q)}createProxyToRemoteChannel(Q,q){const ne={get:(ve,Re)=>(typeof Re=="string"&&!ve[Re]&&(R(Re)?ve[Re]=Ae=>this.listen(Q,Re,Ae):B(Re)?ve[Re]=this.listen(Q,Re,void 0):Re.charCodeAt(0)===36&&(ve[Re]=async(...Ae)=>(await q?.(),this.sendMessage(Q,Re,Ae)))),ve[Re])};return new Proxy(Object.create(null),ne)}_handleMessage(Q){switch(Q.type){case 1:return this._handleReplyMessage(Q);case 0:return this._handleRequestMessage(Q);case 2:return this._handleSubscribeEventMessage(Q);case 3:return this._handleEventMessage(Q);case 4:return this._handleUnsubscribeEventMessage(Q)}}_handleReplyMessage(Q){if(!this._pendingReplies[Q.seq])return;const q=this._pendingReplies[Q.seq];if(delete this._pendingReplies[Q.seq],Q.err){let ne=Q.err;Q.err.$isError&&(ne=new Error,ne.name=Q.err.name,ne.message=Q.err.message,ne.stack=Q.err.stack),q.reject(ne);return}q.resolve(Q.res)}_handleRequestMessage(Q){const q=Q.req;this._handler.handleMessage(Q.channel,Q.method,Q.args).then(ve=>{this._send(new _(this._workerId,q,ve,void 0))},ve=>{ve.detail instanceof Error&&(ve.detail=(0,u.cU)(ve.detail)),this._send(new _(this._workerId,q,void 0,(0,u.cU)(ve)))})}_handleSubscribeEventMessage(Q){const q=Q.req,ne=this._handler.handleEvent(Q.channel,Q.eventName,Q.arg)(ve=>{this._send(new m(this._workerId,q,ve))});this._pendingEvents.set(q,ne)}_handleEventMessage(Q){this._pendingEmitters.has(Q.req)&&this._pendingEmitters.get(Q.req).fire(Q.event)}_handleUnsubscribeEventMessage(Q){this._pendingEvents.has(Q.req)&&(this._pendingEvents.get(Q.req).dispose(),this._pendingEvents.delete(Q.req))}_send(Q){const q=[];if(Q.type===0)for(let ne=0;ne<Q.args.length;ne++)Q.args[ne]instanceof ArrayBuffer&&q.push(Q.args[ne]);else Q.type===1&&Q.res instanceof ArrayBuffer&&q.push(Q.res);this._handler.sendMessage(Q,q)}}class E extends U.jG{constructor(Q,q){super(),this._localChannels=new Map,this._worker=this._register(Q.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:q.esmModuleLocation,label:q.label},Re=>{this._protocol.handleMessage(Re)},Re=>{(0,u.dz)(Re)})),this._protocol=new D({sendMessage:(Re,Ae)=>{this._worker.postMessage(Re,Ae)},handleMessage:(Re,Ae,re)=>this._handleMessage(Re,Ae,re),handleEvent:(Re,Ae,re)=>this._handleEvent(Re,Ae,re)}),this._protocol.setWorkerId(this._worker.getId());let ne=null;const ve=globalThis.require;typeof ve<"u"&&typeof ve.getConfig=="function"?ne=ve.getConfig():typeof globalThis.requirejs<"u"&&(ne=globalThis.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(A,I,[this._worker.getId(),JSON.parse(JSON.stringify(ne)),q.amdModuleId]),this.proxy=this._protocol.createProxyToRemoteChannel(A,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(Re=>{this._onError("Worker failed to load "+q.amdModuleId,Re)})}_handleMessage(Q,q,ne){const ve=this._localChannels.get(Q);if(!ve)return Promise.reject(new Error(`Missing channel ${Q} on main thread`));if(typeof ve[q]!="function")return Promise.reject(new Error(`Missing method ${q} on main thread channel ${Q}`));try{return Promise.resolve(ve[q].apply(ve,ne))}catch(Re){return Promise.reject(Re)}}_handleEvent(Q,q,ne){const ve=this._localChannels.get(Q);if(!ve)throw new Error(`Missing channel ${Q} on main thread`);if(R(q)){const Re=ve[q].call(ve,ne);if(typeof Re!="function")throw new Error(`Missing dynamic event ${q} on main thread channel ${Q}.`);return Re}if(B(q)){const Re=ve[q];if(typeof Re!="function")throw new Error(`Missing event ${q} on main thread channel ${Q}.`);return Re}throw new Error(`Malformed event name ${q}`)}setChannel(Q,q){this._localChannels.set(Q,q)}_onError(Q,q){}}function B($){return $[0]==="o"&&$[1]==="n"&&w.Wv($.charCodeAt(2))}function R($){return/^onDynamic/.test($)&&w.Wv($.charCodeAt(9))}class z{constructor(Q,q){this._localChannels=new Map,this._remoteChannels=new Map,this._requestHandlerFactory=q,this._requestHandler=null,this._protocol=new D({sendMessage:(ne,ve)=>{Q(ne,ve)},handleMessage:(ne,ve,Re)=>this._handleMessage(ne,ve,Re),handleEvent:(ne,ve,Re)=>this._handleEvent(ne,ve,Re)})}onmessage(Q){this._protocol.handleMessage(Q)}_handleMessage(Q,q,ne){if(Q===A&&q===I)return this.initialize(ne[0],ne[1],ne[2]);const ve=Q===A?this._requestHandler:this._localChannels.get(Q);if(!ve)return Promise.reject(new Error(`Missing channel ${Q} on worker thread`));if(typeof ve[q]!="function")return Promise.reject(new Error(`Missing method ${q} on worker thread channel ${Q}`));try{return Promise.resolve(ve[q].apply(ve,ne))}catch(Re){return Promise.reject(Re)}}_handleEvent(Q,q,ne){const ve=Q===A?this._requestHandler:this._localChannels.get(Q);if(!ve)throw new Error(`Missing channel ${Q} on worker thread`);if(R(q)){const Re=ve[q].call(ve,ne);if(typeof Re!="function")throw new Error(`Missing dynamic event ${q} on request handler.`);return Re}if(B(q)){const Re=ve[q];if(typeof Re!="function")throw new Error(`Missing event ${q} on request handler.`);return Re}throw new Error(`Malformed event name ${q}`)}getChannel(Q){if(!this._remoteChannels.has(Q)){const q=this._protocol.createProxyToRemoteChannel(Q);this._remoteChannels.set(Q,q)}return this._remoteChannels.get(Q)}async initialize(Q,q,ne){if(this._protocol.setWorkerId(Q),this._requestHandlerFactory){this._requestHandler=this._requestHandlerFactory(this);return}if(q&&(typeof q.baseUrl<"u"&&delete q.baseUrl,typeof q.paths<"u"&&typeof q.paths.vs<"u"&&delete q.paths.vs,typeof q.trustedTypesPolicy<"u"&&delete q.trustedTypesPolicy,q.catchError=!0,globalThis.require.config(q)),O){const ve=P.zl.asBrowserUri(`${ne}.js`).toString(!0);return c(32373)(`${ve}`).then(Re=>{if(this._requestHandler=Re.create(this),!this._requestHandler)throw new Error("No RequestHandler!")})}return new Promise((ve,Re)=>{const Ae=globalThis.require;Ae([ne],re=>{if(this._requestHandler=re.create(this),!this._requestHandler){Re(new Error("No RequestHandler!"));return}ve()},Re)})}}function W($){return new z($,null)}},73240:(Mt,He,c)=>{c.d(He,{f:()=>P,j:()=>U});var u=c(25894),G=c(81545);const U=(0,G.u1)("accessibilityService"),P=new u.N1("accessibilityModeEnabled",!1)},73405:(Mt,He,c)=>{c.d(He,{Lk:()=>I,NC:()=>P,Rl:()=>v,X5:()=>C,sq:()=>A});var u=c(93009),G=c(88935),U=c(71245);function P(_,d,m){let S=m;return S=M(_,d,S),S=M(_,d,S),S=w(_,d,S),S}function M(_,d,m){if(m.length===0)return m;const S=[];S.push(m[0]);for(let E=1;E<m.length;E++){const B=S[S.length-1];let R=m[E];if(R.seq1Range.isEmpty||R.seq2Range.isEmpty){const z=R.seq1Range.start-B.seq1Range.endExclusive;let W;for(W=1;W<=z&&!(_.getElement(R.seq1Range.start-W)!==_.getElement(R.seq1Range.endExclusive-W)||d.getElement(R.seq2Range.start-W)!==d.getElement(R.seq2Range.endExclusive-W));W++);if(W--,W===z){S[S.length-1]=new U.$8(new G.L(B.seq1Range.start,R.seq1Range.endExclusive-z),new G.L(B.seq2Range.start,R.seq2Range.endExclusive-z));continue}R=R.delta(-W)}S.push(R)}const D=[];for(let E=0;E<S.length-1;E++){const B=S[E+1];let R=S[E];if(R.seq1Range.isEmpty||R.seq2Range.isEmpty){const z=B.seq1Range.start-R.seq1Range.endExclusive;let W;for(W=0;W<z&&!(!_.isStronglyEqual(R.seq1Range.start+W,R.seq1Range.endExclusive+W)||!d.isStronglyEqual(R.seq2Range.start+W,R.seq2Range.endExclusive+W));W++);if(W===z){S[E+1]=new U.$8(new G.L(R.seq1Range.start+z,B.seq1Range.endExclusive),new G.L(R.seq2Range.start+z,B.seq2Range.endExclusive));continue}W>0&&(R=R.delta(W))}D.push(R)}return S.length>0&&D.push(S[S.length-1]),D}function w(_,d,m){if(!_.getBoundaryScore||!d.getBoundaryScore)return m;for(let S=0;S<m.length;S++){const D=S>0?m[S-1]:void 0,E=m[S],B=S+1<m.length?m[S+1]:void 0,R=new G.L(D?D.seq1Range.endExclusive+1:0,B?B.seq1Range.start-1:_.length),z=new G.L(D?D.seq2Range.endExclusive+1:0,B?B.seq2Range.start-1:d.length);E.seq1Range.isEmpty?m[S]=O(E,_,d,R,z):E.seq2Range.isEmpty&&(m[S]=O(E.swap(),d,_,z,R).swap())}return m}function O(_,d,m,S,D){let B=1;for(;_.seq1Range.start-B>=S.start&&_.seq2Range.start-B>=D.start&&m.isStronglyEqual(_.seq2Range.start-B,_.seq2Range.endExclusive-B)&&B<100;)B++;B--;let R=0;for(;_.seq1Range.start+R<S.endExclusive&&_.seq2Range.endExclusive+R<D.endExclusive&&m.isStronglyEqual(_.seq2Range.start+R,_.seq2Range.endExclusive+R)&&R<100;)R++;if(B===0&&R===0)return _;let z=0,W=-1;for(let $=-B;$<=R;$++){const Q=_.seq2Range.start+$,q=_.seq2Range.endExclusive+$,ne=_.seq1Range.start+$,ve=d.getBoundaryScore(ne)+m.getBoundaryScore(Q)+m.getBoundaryScore(q);ve>W&&(W=ve,z=$)}return _.delta(z)}function A(_,d,m){const S=[];for(const D of m){const E=S[S.length-1];if(!E){S.push(D);continue}D.seq1Range.start-E.seq1Range.endExclusive<=2||D.seq2Range.start-E.seq2Range.endExclusive<=2?S[S.length-1]=new U.$8(E.seq1Range.join(D.seq1Range),E.seq2Range.join(D.seq2Range)):S.push(D)}return S}function I(_,d,m){const S=U.$8.invert(m,_.length),D=[];let E=new U._3(0,0);function B(z,W){if(z.offset1<E.offset1||z.offset2<E.offset2)return;const $=_.findWordContaining(z.offset1),Q=d.findWordContaining(z.offset2);if(!$||!Q)return;let q=new U.$8($,Q);const ne=q.intersect(W);let ve=ne.seq1Range.length,Re=ne.seq2Range.length;for(;S.length>0;){const Ae=S[0];if(!(Ae.seq1Range.intersects(q.seq1Range)||Ae.seq2Range.intersects(q.seq2Range)))break;const K=_.findWordContaining(Ae.seq1Range.start),F=d.findWordContaining(Ae.seq2Range.start),N=new U.$8(K,F),j=N.intersect(Ae);if(ve+=j.seq1Range.length,Re+=j.seq2Range.length,q=q.join(N),q.seq1Range.endExclusive>=Ae.seq1Range.endExclusive)S.shift();else break}ve+Re<(q.seq1Range.length+q.seq2Range.length)*2/3&&D.push(q),E=q.getEndExclusives()}for(;S.length>0;){const z=S.shift();z.seq1Range.isEmpty||(B(z.getStarts(),z),B(z.getEndExclusives().delta(-1),z))}return b(m,D)}function b(_,d){const m=[];for(;_.length>0||d.length>0;){const S=_[0],D=d[0];let E;S&&(!D||S.seq1Range.start<D.seq1Range.start)?E=_.shift():E=d.shift(),m.length>0&&m[m.length-1].seq1Range.endExclusive>=E.seq1Range.start?m[m.length-1]=m[m.length-1].join(E):m.push(E)}return m}function C(_,d,m){let S=m;if(S.length===0)return S;let D=0,E;do{E=!1;const B=[S[0]];for(let R=1;R<S.length;R++){let z=function(q,ne){const ve=new G.L($.seq1Range.endExclusive,W.seq1Range.start);return _.getText(ve).replace(/\s/g,"").length<=4&&(q.seq1Range.length+q.seq2Range.length>5||ne.seq1Range.length+ne.seq2Range.length>5)};const W=S[R],$=B[B.length-1];z($,W)?(E=!0,B[B.length-1]=B[B.length-1].join(W)):B.push(W)}S=B}while(D++<10&&E);return S}function v(_,d,m){let S=m;if(S.length===0)return S;let D=0,E;do{E=!1;const R=[S[0]];for(let z=1;z<S.length;z++){let W=function(ne,ve){const Re=new G.L(Q.seq1Range.endExclusive,$.seq1Range.start);if(_.countLinesIn(Re)>5||Re.length>500)return!1;const re=_.getText(Re).trim();if(re.length>20||re.split(/\r\n|\r|\n/).length>1)return!1;const K=_.countLinesIn(ne.seq1Range),F=ne.seq1Range.length,N=d.countLinesIn(ne.seq2Range),j=ne.seq2Range.length,me=_.countLinesIn(ve.seq1Range),ce=ve.seq1Range.length,he=d.countLinesIn(ve.seq2Range),Le=ve.seq2Range.length,Y=2*40+50;function ae(Ce){return Math.min(Ce,Y)}return Math.pow(Math.pow(ae(K*40+F),1.5)+Math.pow(ae(N*40+j),1.5),1.5)+Math.pow(Math.pow(ae(me*40+ce),1.5)+Math.pow(ae(he*40+Le),1.5),1.5)>(Y**1.5)**1.5*1.3};const $=S[z],Q=R[R.length-1];W(Q,$)?(E=!0,R[R.length-1]=R[R.length-1].join($)):R.push($)}S=R}while(D++<10&&E);const B=[];return(0,u.kj)(S,(R,z,W)=>{let $=z;function Q(re){return re.length>0&&re.trim().length<=3&&z.seq1Range.length+z.seq2Range.length>100}const q=_.extendToFullLines(z.seq1Range),ne=_.getText(new G.L(q.start,z.seq1Range.start));Q(ne)&&($=$.deltaStart(-ne.length));const ve=_.getText(new G.L(z.seq1Range.endExclusive,q.endExclusive));Q(ve)&&($=$.deltaEnd(ve.length));const Re=U.$8.fromOffsetPairs(R?R.getEndExclusives():U._3.zero,W?W.getStarts():U._3.max),Ae=$.intersect(Re);B.length>0&&Ae.getStarts().equals(B[B.length-1].getEndExclusives())?B[B.length-1]=B[B.length-1].join(Ae):B.push(Ae)}),B}},73659:(Mt,He,c)=>{c.d(He,{T:()=>d,i:()=>m});var u=c(29554),G=c(13716),U=c(87856),P=c(56491),M=c(60599),w=c(36612),O=c(71521),A=c(49896),I=c(3207),b=c(74990),C=function(D,E,B,R){var z=arguments.length,W=z<3?E:R===null?R=Object.getOwnPropertyDescriptor(E,B):R,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(D,E,B,R);else for(var Q=D.length-1;Q>=0;Q--)($=D[Q])&&(W=(z<3?$(W):z>3?$(E,B,W):$(E,B))||W);return z>3&&W&&Object.defineProperty(E,B,W),W},v=function(D,E){return function(B,R){E(B,R,D)}},_;let d=class{static{_=this}static{this._ttpTokenizer=(0,G.H)("tokenizeToString",{createHTML(E){return E}})}constructor(E,B,R){this._options=E,this._languageService=B,this._openerService=R,this._onDidRenderAsync=new P.vl,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(E,B,R){if(!E)return{element:document.createElement("span"),dispose:()=>{}};const z=new M.Cm,W=z.add((0,u.Gc)(E,{...this._getRenderOptions(E,z),...B},R));return W.element.classList.add("rendered-markdown"),{element:W.element,dispose:()=>z.dispose()}}_getRenderOptions(E,B){return{codeBlockRenderer:async(R,z)=>{let W;R?W=this._languageService.getLanguageIdByLanguageName(R):this._options.editor&&(W=this._options.editor.getModel()?.getLanguageId()),W||(W=A.vH);const $=await(0,I.Yj)(this._languageService,z,W),Q=document.createElement("span");if(Q.innerHTML=_._ttpTokenizer?.createHTML($)??$,this._options.editor){const q=this._options.editor.getOption(50);(0,w.M)(Q,q)}else this._options.codeBlockFontFamily&&(Q.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(Q.style.fontSize=this._options.codeBlockFontSize),Q},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:R=>m(this._openerService,R,E.isTrusted),disposables:B}}}};d=_=C([v(1,O.L),v(2,b.C)],d);async function m(D,E,B){try{return await D.open(E,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:S(B)})}catch(R){return(0,U.dz)(R),!1}}function S(D){return D===!0?!0:D&&Array.isArray(D.enabledCommands)?D.enabledCommands:!1}},74040:(Mt,He,c)=>{c.d(He,{b:()=>U});var u=c(74273),G=c(63886);function U(M,w){return P([M],w),M}function P(M,w){(0,u.e)()&&(0,G.yQ)("reload",A=>(0,u.O)(({oldExports:I})=>{if([...Object.values(I)].some(b=>M.includes(b)))return b=>(A(void 0),!0)})).read(w)}},74273:(Mt,He,c)=>{c.d(He,{O:()=>U,e:()=>G});var u=c(89394);function G(){return u._K&&!!u._K.VSCODE_DEV}function U(w){if(G()){const O=P();return O.add(w),{dispose(){O.delete(w)}}}else return{dispose(){}}}function P(){M||(M=new Set);const w=globalThis;return w.$hotReload_applyNewExports||(w.$hotReload_applyNewExports=O=>{const A={config:{mode:void 0},...O},I=[];for(const b of M){const C=b(A);C&&I.push(C)}if(I.length>0)return b=>{let C=!1;for(const v of I)v(b)&&(C=!0);return C}}),M}let M;G()&&U(({oldExports:w,newSrc:O,config:A})=>{if(A.mode==="patch-prototype")return I=>{for(const b in I){const C=I[b];if(typeof C=="function"&&C.prototype){const v=w[b];if(v){for(const _ of Object.getOwnPropertyNames(C.prototype)){const d=Object.getOwnPropertyDescriptor(C.prototype,_),m=Object.getOwnPropertyDescriptor(v.prototype,_);d?.value?.toString(),m?.value?.toString(),Object.defineProperty(v.prototype,_,d)}I[b]=v}}}return!0}})},74692:(Mt,He,c)=>{c.d(He,{p:()=>u});var u;(function(G){const U={total:0,min:Number.MAX_VALUE,max:0},P={...U},M={...U},w={...U};let O=0;const A={keydown:0,input:0,render:0};function I(){B(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),A.keydown=1,queueMicrotask(b)}G.onKeyDown=I;function b(){A.keydown===1&&(performance.mark("keydown/end"),A.keydown=2)}function C(){performance.mark("input/start"),A.input=1,E()}G.onBeforeInput=C;function v(){A.input===0&&C(),queueMicrotask(_)}G.onInput=v;function _(){A.input===1&&(performance.mark("input/end"),A.input=2)}function d(){B()}G.onKeyUp=d;function m(){B()}G.onSelectionChange=m;function S(){A.keydown===2&&A.input===2&&A.render===0&&(performance.mark("render/start"),A.render=1,queueMicrotask(D),E())}G.onRenderStart=S;function D(){A.render===1&&(performance.mark("render/end"),A.render=2)}function E(){setTimeout(B)}function B(){A.keydown===2&&A.input===2&&A.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),R("keydown",U),R("input",P),R("render",M),R("inputlatency",w),O++,z())}function R(q,ne){const ve=performance.getEntriesByName(q)[0].duration;ne.total+=ve,ne.min=Math.min(ne.min,ve),ne.max=Math.max(ne.max,ve)}function z(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),A.keydown=0,A.input=0,A.render=0}function W(){if(O===0)return;const q={keydown:$(U),input:$(P),render:$(M),total:$(w),sampleCount:O};return Q(U),Q(P),Q(M),Q(w),O=0,q}G.getAndClearMeasurements=W;function $(q){return{average:q.total/O,max:q.max,min:q.min}}function Q(q){q.total=0,q.min=Number.MAX_VALUE,q.max=0}})(u||(u={}))},74719:(Mt,He,c)=>{c.d(He,{_:()=>u});const u={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"}},74730:(Mt,He,c)=>{c.d(He,{P:()=>u});function u(G,U){const P=this;let M=!1,w;return function(){if(M)return w;if(M=!0,U)try{w=G.apply(P,arguments)}finally{U()}else w=G.apply(P,arguments);return w}}},74990:(Mt,He,c)=>{c.d(He,{C:()=>G,e:()=>U});var u=c(81545);const G=(0,u.u1)("openerService");function U(P){let M;const w=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(P.fragment);return w&&(M={startLineNumber:parseInt(w[1]),startColumn:w[2]?parseInt(w[2]):1,endLineNumber:w[4]?parseInt(w[4]):void 0,endColumn:w[4]?w[5]?parseInt(w[5]):1:void 0},P=P.with({fragment:""})),{selection:M,uri:P}}},75745:(Mt,He,c)=>{c.r(He),c.d(He,{ITreeViewsDnDService:()=>P});var u=c(73429),G=c(81545),U=c(26902);const P=(0,G.u1)("treeViewsDndService");(0,u.v)(P,U.TreeViewsDnDService,1)},75817:(Mt,He,c)=>{c.r(He),c.d(He,{SemanticTokensStylingService:()=>b});var u=c(60599),G=c(71521),U=c(41403),P=c(92824),M=c(57787),w=c(43872),O=c(73429),A=function(C,v,_,d){var m=arguments.length,S=m<3?v:d===null?d=Object.getOwnPropertyDescriptor(v,_):d,D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(C,v,_,d);else for(var E=C.length-1;E>=0;E--)(D=C[E])&&(S=(m<3?D(S):m>3?D(v,_,S):D(v,_))||S);return m>3&&S&&Object.defineProperty(v,_,S),S},I=function(C,v){return function(_,d){v(_,d,C)}};let b=class extends u.jG{constructor(v,_,d){super(),this._themeService=v,this._logService=_,this._languageService=d,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(v){return this._caches.has(v)||this._caches.set(v,new M.SemanticTokensProviderStyling(v.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(v)}};b=A([I(0,U.Gy),I(1,P.rr),I(2,G.L)],b),(0,O.v)(w.ISemanticTokensStylingService,b,1)},75942:(Mt,He,c)=>{c.d(He,{D:()=>G});var u=c(56491);const G=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new u.vl,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(U){U=Math.min(Math.max(-5,U),20),this._zoomLevel!==U&&(this._zoomLevel=U,this._onDidChangeZoomLevel.fire(this._zoomLevel))}}},76222:(Mt,He,c)=>{c.d(He,{D8:()=>m,L:()=>z,Xe:()=>R,ZG:()=>E,ez:()=>S,i1:()=>d,is:()=>_,nI:()=>B,ug:()=>W});var u=c(43860),G=c(42640),U=c(56491),P=c(60599),M=c(77714),w=c(93750),O=c(25894),A=c(81545),I=c(3478),b=function($,Q,q,ne){var ve=arguments.length,Re=ve<3?Q:ne===null?ne=Object.getOwnPropertyDescriptor(Q,q):ne,Ae;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Re=Reflect.decorate($,Q,q,ne);else for(var re=$.length-1;re>=0;re--)(Ae=$[re])&&(Re=(ve<3?Ae(Re):ve>3?Ae(Q,q,Re):Ae(Q,q))||Re);return ve>3&&Re&&Object.defineProperty(Q,q,Re),Re},C=function($,Q){return function(q,ne){Q(q,ne,$)}},v;function _($){return $.command!==void 0}function d($){return $.submenu!==void 0}class m{static{this._instances=new Map}static{this.CommandPalette=new m("CommandPalette")}static{this.DebugBreakpointsContext=new m("DebugBreakpointsContext")}static{this.DebugCallStackContext=new m("DebugCallStackContext")}static{this.DebugConsoleContext=new m("DebugConsoleContext")}static{this.DebugVariablesContext=new m("DebugVariablesContext")}static{this.NotebookVariablesContext=new m("NotebookVariablesContext")}static{this.DebugHoverContext=new m("DebugHoverContext")}static{this.DebugWatchContext=new m("DebugWatchContext")}static{this.DebugToolBar=new m("DebugToolBar")}static{this.DebugToolBarStop=new m("DebugToolBarStop")}static{this.DebugCallStackToolbar=new m("DebugCallStackToolbar")}static{this.DebugCreateConfiguration=new m("DebugCreateConfiguration")}static{this.EditorContext=new m("EditorContext")}static{this.SimpleEditorContext=new m("SimpleEditorContext")}static{this.EditorContent=new m("EditorContent")}static{this.EditorLineNumberContext=new m("EditorLineNumberContext")}static{this.EditorContextCopy=new m("EditorContextCopy")}static{this.EditorContextPeek=new m("EditorContextPeek")}static{this.EditorContextShare=new m("EditorContextShare")}static{this.EditorTitle=new m("EditorTitle")}static{this.EditorTitleRun=new m("EditorTitleRun")}static{this.EditorTitleContext=new m("EditorTitleContext")}static{this.EditorTitleContextShare=new m("EditorTitleContextShare")}static{this.EmptyEditorGroup=new m("EmptyEditorGroup")}static{this.EmptyEditorGroupContext=new m("EmptyEditorGroupContext")}static{this.EditorTabsBarContext=new m("EditorTabsBarContext")}static{this.EditorTabsBarShowTabsSubmenu=new m("EditorTabsBarShowTabsSubmenu")}static{this.EditorTabsBarShowTabsZenModeSubmenu=new m("EditorTabsBarShowTabsZenModeSubmenu")}static{this.EditorActionsPositionSubmenu=new m("EditorActionsPositionSubmenu")}static{this.ExplorerContext=new m("ExplorerContext")}static{this.ExplorerContextShare=new m("ExplorerContextShare")}static{this.ExtensionContext=new m("ExtensionContext")}static{this.GlobalActivity=new m("GlobalActivity")}static{this.CommandCenter=new m("CommandCenter")}static{this.CommandCenterCenter=new m("CommandCenterCenter")}static{this.LayoutControlMenuSubmenu=new m("LayoutControlMenuSubmenu")}static{this.LayoutControlMenu=new m("LayoutControlMenu")}static{this.MenubarMainMenu=new m("MenubarMainMenu")}static{this.MenubarAppearanceMenu=new m("MenubarAppearanceMenu")}static{this.MenubarDebugMenu=new m("MenubarDebugMenu")}static{this.MenubarEditMenu=new m("MenubarEditMenu")}static{this.MenubarCopy=new m("MenubarCopy")}static{this.MenubarFileMenu=new m("MenubarFileMenu")}static{this.MenubarGoMenu=new m("MenubarGoMenu")}static{this.MenubarHelpMenu=new m("MenubarHelpMenu")}static{this.MenubarLayoutMenu=new m("MenubarLayoutMenu")}static{this.MenubarNewBreakpointMenu=new m("MenubarNewBreakpointMenu")}static{this.PanelAlignmentMenu=new m("PanelAlignmentMenu")}static{this.PanelPositionMenu=new m("PanelPositionMenu")}static{this.ActivityBarPositionMenu=new m("ActivityBarPositionMenu")}static{this.MenubarPreferencesMenu=new m("MenubarPreferencesMenu")}static{this.MenubarRecentMenu=new m("MenubarRecentMenu")}static{this.MenubarSelectionMenu=new m("MenubarSelectionMenu")}static{this.MenubarShare=new m("MenubarShare")}static{this.MenubarSwitchEditorMenu=new m("MenubarSwitchEditorMenu")}static{this.MenubarSwitchGroupMenu=new m("MenubarSwitchGroupMenu")}static{this.MenubarTerminalMenu=new m("MenubarTerminalMenu")}static{this.MenubarViewMenu=new m("MenubarViewMenu")}static{this.MenubarHomeMenu=new m("MenubarHomeMenu")}static{this.OpenEditorsContext=new m("OpenEditorsContext")}static{this.OpenEditorsContextShare=new m("OpenEditorsContextShare")}static{this.ProblemsPanelContext=new m("ProblemsPanelContext")}static{this.SCMInputBox=new m("SCMInputBox")}static{this.SCMChangesSeparator=new m("SCMChangesSeparator")}static{this.SCMChangesContext=new m("SCMChangesContext")}static{this.SCMIncomingChanges=new m("SCMIncomingChanges")}static{this.SCMIncomingChangesContext=new m("SCMIncomingChangesContext")}static{this.SCMIncomingChangesSetting=new m("SCMIncomingChangesSetting")}static{this.SCMOutgoingChanges=new m("SCMOutgoingChanges")}static{this.SCMOutgoingChangesContext=new m("SCMOutgoingChangesContext")}static{this.SCMOutgoingChangesSetting=new m("SCMOutgoingChangesSetting")}static{this.SCMIncomingChangesAllChangesContext=new m("SCMIncomingChangesAllChangesContext")}static{this.SCMIncomingChangesHistoryItemContext=new m("SCMIncomingChangesHistoryItemContext")}static{this.SCMOutgoingChangesAllChangesContext=new m("SCMOutgoingChangesAllChangesContext")}static{this.SCMOutgoingChangesHistoryItemContext=new m("SCMOutgoingChangesHistoryItemContext")}static{this.SCMChangeContext=new m("SCMChangeContext")}static{this.SCMResourceContext=new m("SCMResourceContext")}static{this.SCMResourceContextShare=new m("SCMResourceContextShare")}static{this.SCMResourceFolderContext=new m("SCMResourceFolderContext")}static{this.SCMResourceGroupContext=new m("SCMResourceGroupContext")}static{this.SCMSourceControl=new m("SCMSourceControl")}static{this.SCMSourceControlInline=new m("SCMSourceControlInline")}static{this.SCMSourceControlTitle=new m("SCMSourceControlTitle")}static{this.SCMHistoryTitle=new m("SCMHistoryTitle")}static{this.SCMTitle=new m("SCMTitle")}static{this.SearchContext=new m("SearchContext")}static{this.SearchActionMenu=new m("SearchActionContext")}static{this.StatusBarWindowIndicatorMenu=new m("StatusBarWindowIndicatorMenu")}static{this.StatusBarRemoteIndicatorMenu=new m("StatusBarRemoteIndicatorMenu")}static{this.StickyScrollContext=new m("StickyScrollContext")}static{this.TestItem=new m("TestItem")}static{this.TestItemGutter=new m("TestItemGutter")}static{this.TestProfilesContext=new m("TestProfilesContext")}static{this.TestMessageContext=new m("TestMessageContext")}static{this.TestMessageContent=new m("TestMessageContent")}static{this.TestPeekElement=new m("TestPeekElement")}static{this.TestPeekTitle=new m("TestPeekTitle")}static{this.TestCallStack=new m("TestCallStack")}static{this.TouchBarContext=new m("TouchBarContext")}static{this.TitleBarContext=new m("TitleBarContext")}static{this.TitleBarTitleContext=new m("TitleBarTitleContext")}static{this.TunnelContext=new m("TunnelContext")}static{this.TunnelPrivacy=new m("TunnelPrivacy")}static{this.TunnelProtocol=new m("TunnelProtocol")}static{this.TunnelPortInline=new m("TunnelInline")}static{this.TunnelTitle=new m("TunnelTitle")}static{this.TunnelLocalAddressInline=new m("TunnelLocalAddressInline")}static{this.TunnelOriginInline=new m("TunnelOriginInline")}static{this.ViewItemContext=new m("ViewItemContext")}static{this.ViewContainerTitle=new m("ViewContainerTitle")}static{this.ViewContainerTitleContext=new m("ViewContainerTitleContext")}static{this.ViewTitle=new m("ViewTitle")}static{this.ViewTitleContext=new m("ViewTitleContext")}static{this.CommentEditorActions=new m("CommentEditorActions")}static{this.CommentThreadTitle=new m("CommentThreadTitle")}static{this.CommentThreadActions=new m("CommentThreadActions")}static{this.CommentThreadAdditionalActions=new m("CommentThreadAdditionalActions")}static{this.CommentThreadTitleContext=new m("CommentThreadTitleContext")}static{this.CommentThreadCommentContext=new m("CommentThreadCommentContext")}static{this.CommentTitle=new m("CommentTitle")}static{this.CommentActions=new m("CommentActions")}static{this.CommentsViewThreadActions=new m("CommentsViewThreadActions")}static{this.InteractiveToolbar=new m("InteractiveToolbar")}static{this.InteractiveCellTitle=new m("InteractiveCellTitle")}static{this.InteractiveCellDelete=new m("InteractiveCellDelete")}static{this.InteractiveCellExecute=new m("InteractiveCellExecute")}static{this.InteractiveInputExecute=new m("InteractiveInputExecute")}static{this.InteractiveInputConfig=new m("InteractiveInputConfig")}static{this.ReplInputExecute=new m("ReplInputExecute")}static{this.IssueReporter=new m("IssueReporter")}static{this.NotebookToolbar=new m("NotebookToolbar")}static{this.NotebookStickyScrollContext=new m("NotebookStickyScrollContext")}static{this.NotebookCellTitle=new m("NotebookCellTitle")}static{this.NotebookCellDelete=new m("NotebookCellDelete")}static{this.NotebookCellInsert=new m("NotebookCellInsert")}static{this.NotebookCellBetween=new m("NotebookCellBetween")}static{this.NotebookCellListTop=new m("NotebookCellTop")}static{this.NotebookCellExecute=new m("NotebookCellExecute")}static{this.NotebookCellExecuteGoTo=new m("NotebookCellExecuteGoTo")}static{this.NotebookCellExecutePrimary=new m("NotebookCellExecutePrimary")}static{this.NotebookDiffCellInputTitle=new m("NotebookDiffCellInputTitle")}static{this.NotebookDiffCellMetadataTitle=new m("NotebookDiffCellMetadataTitle")}static{this.NotebookDiffCellOutputsTitle=new m("NotebookDiffCellOutputsTitle")}static{this.NotebookOutputToolbar=new m("NotebookOutputToolbar")}static{this.NotebookOutlineFilter=new m("NotebookOutlineFilter")}static{this.NotebookOutlineActionMenu=new m("NotebookOutlineActionMenu")}static{this.NotebookEditorLayoutConfigure=new m("NotebookEditorLayoutConfigure")}static{this.NotebookKernelSource=new m("NotebookKernelSource")}static{this.BulkEditTitle=new m("BulkEditTitle")}static{this.BulkEditContext=new m("BulkEditContext")}static{this.TimelineItemContext=new m("TimelineItemContext")}static{this.TimelineTitle=new m("TimelineTitle")}static{this.TimelineTitleContext=new m("TimelineTitleContext")}static{this.TimelineFilterSubMenu=new m("TimelineFilterSubMenu")}static{this.AccountsContext=new m("AccountsContext")}static{this.SidebarTitle=new m("SidebarTitle")}static{this.PanelTitle=new m("PanelTitle")}static{this.AuxiliaryBarTitle=new m("AuxiliaryBarTitle")}static{this.AuxiliaryBarHeader=new m("AuxiliaryBarHeader")}static{this.TerminalInstanceContext=new m("TerminalInstanceContext")}static{this.TerminalEditorInstanceContext=new m("TerminalEditorInstanceContext")}static{this.TerminalNewDropdownContext=new m("TerminalNewDropdownContext")}static{this.TerminalTabContext=new m("TerminalTabContext")}static{this.TerminalTabEmptyAreaContext=new m("TerminalTabEmptyAreaContext")}static{this.TerminalStickyScrollContext=new m("TerminalStickyScrollContext")}static{this.WebviewContext=new m("WebviewContext")}static{this.InlineCompletionsActions=new m("InlineCompletionsActions")}static{this.InlineEditsActions=new m("InlineEditsActions")}static{this.InlineEditActions=new m("InlineEditActions")}static{this.NewFile=new m("NewFile")}static{this.MergeInput1Toolbar=new m("MergeToolbar1Toolbar")}static{this.MergeInput2Toolbar=new m("MergeToolbar2Toolbar")}static{this.MergeBaseToolbar=new m("MergeBaseToolbar")}static{this.MergeInputResultToolbar=new m("MergeToolbarResultToolbar")}static{this.InlineSuggestionToolbar=new m("InlineSuggestionToolbar")}static{this.InlineEditToolbar=new m("InlineEditToolbar")}static{this.ChatContext=new m("ChatContext")}static{this.ChatCodeBlock=new m("ChatCodeblock")}static{this.ChatCompareBlock=new m("ChatCompareBlock")}static{this.ChatMessageTitle=new m("ChatMessageTitle")}static{this.ChatExecute=new m("ChatExecute")}static{this.ChatExecuteSecondary=new m("ChatExecuteSecondary")}static{this.ChatInputSide=new m("ChatInputSide")}static{this.AccessibleView=new m("AccessibleView")}static{this.MultiDiffEditorFileToolbar=new m("MultiDiffEditorFileToolbar")}static{this.DiffEditorHunkToolbar=new m("DiffEditorHunkToolbar")}static{this.DiffEditorSelectionToolbar=new m("DiffEditorSelectionToolbar")}constructor(Q){if(m._instances.has(Q))throw new TypeError(`MenuId with identifier '${Q}' already exists. Use MenuId.for(ident) or a unique identifier`);m._instances.set(Q,this),this.id=Q}}const S=(0,A.u1)("menuService");class D{static{this._all=new Map}static for(Q){let q=this._all.get(Q);return q||(q=new D(Q),this._all.set(Q,q)),q}static merge(Q){const q=new Set;for(const ne of Q)ne instanceof D&&q.add(ne.id);return q}constructor(Q){this.id=Q,this.has=q=>q===Q}}const E=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new U.QT({merge:D.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand($){return this._commands.set($.id,$),this._onDidChangeMenu.fire(D.for(m.CommandPalette)),(0,P.s)(()=>{this._commands.delete($.id)&&this._onDidChangeMenu.fire(D.for(m.CommandPalette))})}getCommand($){return this._commands.get($)}getCommands(){const $=new Map;return this._commands.forEach((Q,q)=>$.set(q,Q)),$}appendMenuItem($,Q){let q=this._menuItems.get($);q||(q=new M.w,this._menuItems.set($,q));const ne=q.push(Q);return this._onDidChangeMenu.fire(D.for($)),(0,P.s)(()=>{ne(),this._onDidChangeMenu.fire(D.for($))})}appendMenuItems($){const Q=new P.Cm;for(const{id:q,item:ne}of $)Q.add(this.appendMenuItem(q,ne));return Q}getMenuItems($){let Q;return this._menuItems.has($)?Q=[...this._menuItems.get($)]:Q=[],$===m.CommandPalette&&this._appendImplicitItems(Q),Q}_appendImplicitItems($){const Q=new Set;for(const q of $)_(q)&&(Q.add(q.command.id),q.alt&&Q.add(q.alt.id));this._commands.forEach((q,ne)=>{Q.has(ne)||$.push({command:q})})}};class B extends u.YH{constructor(Q,q,ne){super(`submenuitem.${Q.submenu.id}`,typeof Q.title=="string"?Q.title:Q.title.value,ne,"submenu"),this.item=Q,this.hideActions=q}}let R=v=class{static label(Q,q){return q?.renderShortTitle&&Q.shortTitle?typeof Q.shortTitle=="string"?Q.shortTitle:Q.shortTitle.value:typeof Q.title=="string"?Q.title:Q.title.value}constructor(Q,q,ne,ve,Re,Ae,re){this.hideActions=ve,this.menuKeybinding=Re,this._commandService=re,this.id=Q.id,this.label=v.label(Q,ne),this.tooltip=(typeof Q.tooltip=="string"?Q.tooltip:Q.tooltip?.value)??"",this.enabled=!Q.precondition||Ae.contextMatchesRules(Q.precondition),this.checked=void 0;let K;if(Q.toggled){const F=Q.toggled.condition?Q.toggled:{condition:Q.toggled};this.checked=Ae.contextMatchesRules(F.condition),this.checked&&F.tooltip&&(this.tooltip=typeof F.tooltip=="string"?F.tooltip:F.tooltip.value),this.checked&&G.L.isThemeIcon(F.icon)&&(K=F.icon),this.checked&&F.title&&(this.label=typeof F.title=="string"?F.title:F.title.value)}K||(K=G.L.isThemeIcon(Q.icon)?Q.icon:void 0),this.item=Q,this.alt=q?new v(q,void 0,ne,ve,void 0,Ae,re):void 0,this._options=ne,this.class=K&&G.L.asClassName(K)}run(...Q){let q=[];return this._options?.arg&&(q=[...q,this._options.arg]),this._options?.shouldForwardArgs&&(q=[...q,...Q]),this._commandService.executeCommand(this.id,...q)}};R=v=b([C(5,O.fN),C(6,w.d)],R);class z{constructor(Q){this.desc=Q}}function W($){const Q=[],q=new $,{f1:ne,menu:ve,keybinding:Re,...Ae}=q.desc;if(w.w.getCommand(Ae.id))throw new Error(`Cannot register two commands with the same id: ${Ae.id}`);if(Q.push(w.w.registerCommand({id:Ae.id,handler:(re,...K)=>q.run(re,...K),metadata:Ae.metadata})),Array.isArray(ve))for(const re of ve)Q.push(E.appendMenuItem(re.id,{command:{...Ae,precondition:re.precondition===null?void 0:Ae.precondition},...re}));else ve&&Q.push(E.appendMenuItem(ve.id,{command:{...Ae,precondition:ve.precondition===null?void 0:Ae.precondition},...ve}));if(ne&&(Q.push(E.appendMenuItem(m.CommandPalette,{command:Ae,when:Ae.precondition})),Q.push(E.addCommand(Ae))),Array.isArray(Re))for(const re of Re)Q.push(I.f.registerKeybindingRule({...re,id:Ae.id,when:Ae.precondition?O.M$.and(Ae.precondition,re.when):re.when}));else Re&&Q.push(I.f.registerKeybindingRule({...Re,id:Ae.id,when:Ae.precondition?O.M$.and(Ae.precondition,Re.when):Re.when}));return{dispose(){(0,P.AS)(Q)}}}},76322:(Mt,He,c)=>{c.d(He,{iE:()=>G,rW:()=>U});class u{constructor(M,w,O){this._colorZoneBrand=void 0,this.from=M|0,this.to=w|0,this.colorId=O|0}static compare(M,w){return M.colorId===w.colorId?M.from===w.from?M.to-w.to:M.from-w.from:M.colorId-w.colorId}}class G{constructor(M,w,O,A){this._overviewRulerZoneBrand=void 0,this.startLineNumber=M,this.endLineNumber=w,this.heightInLines=O,this.color=A,this._colorZone=null}static compare(M,w){return M.color===w.color?M.startLineNumber===w.startLineNumber?M.heightInLines===w.heightInLines?M.endLineNumber-w.endLineNumber:M.heightInLines-w.heightInLines:M.startLineNumber-w.startLineNumber:M.color<w.color?-1:1}setColorZone(M){this._colorZone=M}getColorZones(){return this._colorZone}}class U{constructor(M){this._getVerticalOffsetForLine=M,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(M){this._zones=M,this._zones.sort(G.compare)}setLineHeight(M){return this._lineHeight===M?!1:(this._lineHeight=M,this._colorZonesInvalid=!0,!0)}setPixelRatio(M){this._pixelRatio=M,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(M){return this._domWidth===M?!1:(this._domWidth=M,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(M){return this._domHeight===M?!1:(this._domHeight=M,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(M){return this._outerHeight===M?!1:(this._outerHeight=M,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const M=this._colorZonesInvalid,w=Math.floor(this._lineHeight),O=Math.floor(this.getCanvasHeight()),A=Math.floor(this._outerHeight),I=O/A,b=Math.floor(4*this._pixelRatio/2),C=[];for(let v=0,_=this._zones.length;v<_;v++){const d=this._zones[v];if(!M){const Q=d.getColorZones();if(Q){C.push(Q);continue}}const m=this._getVerticalOffsetForLine(d.startLineNumber),S=d.heightInLines===0?this._getVerticalOffsetForLine(d.endLineNumber)+w:m+d.heightInLines*w,D=Math.floor(I*m),E=Math.floor(I*S);let B=Math.floor((D+E)/2),R=E-B;R<b&&(R=b),B-R<0&&(B=R),B+R>O&&(B=O-R);const z=d.color;let W=this._color2Id[z];W||(W=++this._lastAssignedId,this._color2Id[z]=W,this._id2Color[W]=z);const $=new u(B-R,B+R,W);d.setColorZone($),C.push($)}return this._colorZonesInvalid=!1,C.sort(u.compare),C}}},76350:(Mt,He,c)=>{c.d(He,{k:()=>G});var u=c(98414);class G{static insert(P,M){return{range:new u.Q(P.lineNumber,P.column,P.lineNumber,P.column),text:M,forceMoveMarkers:!0}}static delete(P){return{range:P,text:null}}static replace(P,M){return{range:P,text:M}}static replaceMove(P,M){return{range:P,text:M,forceMoveMarkers:!0}}}},77065:(Mt,He,c)=>{c.d(He,{B:()=>u});function u(G,U,P){let M=null,w=null;if(typeof P.value=="function"?(M="value",w=P.value,w.length):typeof P.get=="function"&&(M="get",w=P.get),!w)throw new Error("not supported");const O=`$memoize$${U}`;P[M]=function(...A){return this.hasOwnProperty(O)||Object.defineProperty(this,O,{configurable:!1,enumerable:!1,writable:!1,value:w.apply(this,A)}),this[O]}}},77105:(Mt,He,c)=>{c.d(He,{Y:()=>v});var u=c(85565),G=c(23418),U=c(98414),P=c(47545),M=c(84279),w=c(61231),O=function(_,d,m,S){var D=arguments.length,E=D<3?d:S===null?S=Object.getOwnPropertyDescriptor(d,m):S,B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(_,d,m,S);else for(var R=_.length-1;R>=0;R--)(B=_[R])&&(E=(D<3?B(E):D>3?B(d,m,E):B(d,m))||E);return D>3&&E&&Object.defineProperty(d,m,E),E},A=function(_,d){return function(m,S){d(m,S,_)}},I;const b=Object.create(null);function C(_,d){if(d<=0)return"";b[_]||(b[_]=["",_]);const m=b[_];for(let S=m.length;S<=d;S++)m[S]=m[S-1]+_;return m[d]}let v=I=class{static unshiftIndent(d,m,S,D,E){const B=G.A.visibleColumnFromColumn(d,m,S);if(E){const R=C(" ",D),W=G.A.prevIndentTabStop(B,D)/D;return C(R,W)}else{const R="	",W=G.A.prevRenderTabStop(B,S)/S;return C(R,W)}}static shiftIndent(d,m,S,D,E){const B=G.A.visibleColumnFromColumn(d,m,S);if(E){const R=C(" ",D),W=G.A.nextIndentTabStop(B,D)/D;return C(R,W)}else{const R="	",W=G.A.nextRenderTabStop(B,S)/S;return C(R,W)}}constructor(d,m,S){this._languageConfigurationService=S,this._opts=m,this._selection=d,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(d,m,S){this._useLastEditRangeForCursorEndPosition?d.addTrackedEditOperation(m,S):d.addEditOperation(m,S)}getEditOperations(d,m){const S=this._selection.startLineNumber;let D=this._selection.endLineNumber;this._selection.endColumn===1&&S!==D&&(D=D-1);const{tabSize:E,indentSize:B,insertSpaces:R}=this._opts,z=S===D;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(d.getLineContent(S))&&(this._useLastEditRangeForCursorEndPosition=!0);let W=0,$=0;for(let Q=S;Q<=D;Q++,W=$){$=0;const q=d.getLineContent(Q);let ne=u.HG(q);if(this._opts.isUnshift&&(q.length===0||ne===0)||!z&&!this._opts.isUnshift&&q.length===0)continue;if(ne===-1&&(ne=q.length),Q>1&&G.A.visibleColumnFromColumn(q,ne+1,E)%B!==0&&d.tokenization.isCheapToTokenize(Q-1)){const Ae=(0,M.h)(this._opts.autoIndent,d,new U.Q(Q-1,d.getLineMaxColumn(Q-1),Q-1,d.getLineMaxColumn(Q-1)),this._languageConfigurationService);if(Ae){if($=W,Ae.appendText)for(let re=0,K=Ae.appendText.length;re<K&&$<B&&Ae.appendText.charCodeAt(re)===32;re++)$++;Ae.removeText&&($=Math.max(0,$-Ae.removeText));for(let re=0;re<$&&!(ne===0||q.charCodeAt(ne-1)!==32);re++)ne--}}if(this._opts.isUnshift&&ne===0)continue;let ve;this._opts.isUnshift?ve=I.unshiftIndent(q,ne+1,E,B,R):ve=I.shiftIndent(q,ne+1,E,B,R),this._addEditOperation(m,new U.Q(Q,1,Q,ne+1),ve),Q===S&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=ne+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&d.getLineLength(S)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const W=R?C(" ",B):"	";for(let $=S;$<=D;$++){const Q=d.getLineContent($);let q=u.HG(Q);if(!(this._opts.isUnshift&&(Q.length===0||q===0))&&!(!z&&!this._opts.isUnshift&&Q.length===0)&&(q===-1&&(q=Q.length),!(this._opts.isUnshift&&q===0)))if(this._opts.isUnshift){q=Math.min(q,B);for(let ne=0;ne<q;ne++)if(Q.charCodeAt(ne)===9){q=ne+1;break}this._addEditOperation(m,new U.Q($,1,$,q+1),"")}else this._addEditOperation(m,new U.Q($,1,$,1),W),$===S&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=m.trackSelection(this._selection)}computeCursorState(d,m){if(this._useLastEditRangeForCursorEndPosition){const D=m.getInverseEditOperations()[0];return new P.L(D.range.endLineNumber,D.range.endColumn,D.range.endLineNumber,D.range.endColumn)}const S=m.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const D=this._selection.startColumn;return S.startColumn<=D?S:S.getDirection()===0?new P.L(S.startLineNumber,D,S.endLineNumber,S.endColumn):new P.L(S.endLineNumber,S.endColumn,S.startLineNumber,D)}return S}};v=I=O([A(2,w.JZ)],v)},77714:(Mt,He,c)=>{c.d(He,{w:()=>G});class u{static{this.Undefined=new u(void 0)}constructor(P){this.element=P,this.next=u.Undefined,this.prev=u.Undefined}}class G{constructor(){this._first=u.Undefined,this._last=u.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===u.Undefined}clear(){let P=this._first;for(;P!==u.Undefined;){const M=P.next;P.prev=u.Undefined,P.next=u.Undefined,P=M}this._first=u.Undefined,this._last=u.Undefined,this._size=0}unshift(P){return this._insert(P,!1)}push(P){return this._insert(P,!0)}_insert(P,M){const w=new u(P);if(this._first===u.Undefined)this._first=w,this._last=w;else if(M){const A=this._last;this._last=w,w.prev=A,A.next=w}else{const A=this._first;this._first=w,w.next=A,A.prev=w}this._size+=1;let O=!1;return()=>{O||(O=!0,this._remove(w))}}shift(){if(this._first!==u.Undefined){const P=this._first.element;return this._remove(this._first),P}}pop(){if(this._last!==u.Undefined){const P=this._last.element;return this._remove(this._last),P}}_remove(P){if(P.prev!==u.Undefined&&P.next!==u.Undefined){const M=P.prev;M.next=P.next,P.next.prev=M}else P.prev===u.Undefined&&P.next===u.Undefined?(this._first=u.Undefined,this._last=u.Undefined):P.next===u.Undefined?(this._last=this._last.prev,this._last.next=u.Undefined):P.prev===u.Undefined&&(this._first=this._first.next,this._first.prev=u.Undefined);this._size-=1}*[Symbol.iterator](){let P=this._first;for(;P!==u.Undefined;)yield P.element,P=P.next}}},77837:(Mt,He,c)=>{c.d(He,{BK:()=>P,oJ:()=>w});var u=c(37076),G=c(70679),U=c(87856);class P{static fromFn(A){return new P(A())}constructor(A){this._value=(0,G.FY)(this,void 0),this.promiseResult=this._value,this.promise=A.then(I=>((0,G.Rn)(b=>{this._value.set(new M(I,void 0),b)}),I),I=>{throw(0,G.Rn)(b=>{this._value.set(new M(void 0,I),b)}),I})}}class M{constructor(A,I){this.data=A,this.error=I}}function w(O,A,I,b){return A||(A=C=>C!=null),new Promise((C,v)=>{let _=!0,d=!1;const m=O.map(D=>({isFinished:A(D),error:I?I(D):!1,state:D})),S=(0,u.fm)(D=>{const{isFinished:E,error:B,state:R}=m.read(D);(E||B)&&(_?d=!0:S.dispose(),B?v(B===!0?R:B):C(R))});if(b){const D=b.onCancellationRequested(()=>{S.dispose(),D.dispose(),v(new U.AL)});if(b.isCancellationRequested){S.dispose(),D.dispose(),v(new U.AL);return}}_=!1,d&&S.dispose()})}},78398:(Mt,He,c)=>{c.d(He,{c:()=>b});var u=c(31938),G=c(53397),U=c(79766),P=c(62385),M=c(56491),w=c(45573),O=c(60599),A=c(15903);const I=w.kg("defaultLabel","input");class b extends P.x{constructor(v,_,d){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new O.HE),this.additionalToggles=[],this._onDidOptionChange=this._register(new M.vl),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new M.vl),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new M.vl),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new M.vl),this._onKeyUp=this._register(new M.vl),this._onCaseSensitiveKeyDown=this._register(new M.vl),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new M.vl),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=d.placeholder||"",this.validation=d.validation,this.label=d.label||I,this.showCommonFindToggles=!!d.showCommonFindToggles;const m=d.appendCaseSensitiveLabel||"",S=d.appendWholeWordsLabel||"",D=d.appendRegexLabel||"",E=d.history||[],B=!!d.flexibleHeight,R=!!d.flexibleWidth,z=d.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new U.mJ(this.domNode,_,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:E,showHistoryHint:d.showHistoryHint,flexibleHeight:B,flexibleWidth:R,flexibleMaxHeight:z,inputBoxStyles:d.inputBoxStyles}));const W=this._register((0,A.bW)());if(this.showCommonFindToggles){this.regex=this._register(new G.Ix({appendTitle:D,isChecked:!1,hoverDelegate:W,...d.toggleStyles})),this._register(this.regex.onChange(Q=>{this._onDidOptionChange.fire(Q),!Q&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(Q=>{this._onRegexKeyDown.fire(Q)})),this.wholeWords=this._register(new G.nV({appendTitle:S,isChecked:!1,hoverDelegate:W,...d.toggleStyles})),this._register(this.wholeWords.onChange(Q=>{this._onDidOptionChange.fire(Q),!Q&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new G.bc({appendTitle:m,isChecked:!1,hoverDelegate:W,...d.toggleStyles})),this._register(this.caseSensitive.onChange(Q=>{this._onDidOptionChange.fire(Q),!Q&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(Q=>{this._onCaseSensitiveKeyDown.fire(Q)}));const $=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,Q=>{if(Q.equals(15)||Q.equals(17)||Q.equals(9)){const q=$.indexOf(this.domNode.ownerDocument.activeElement);if(q>=0){let ne=-1;Q.equals(17)?ne=(q+1)%$.length:Q.equals(15)&&(q===0?ne=$.length-1:ne=q-1),Q.equals(9)?($[q].blur(),this.inputBox.focus()):ne>=0&&$[ne].focus(),u.fs.stop(Q,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(d?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),v?.appendChild(this.domNode),this._register(u.ko(this.inputBox.inputElement,"compositionstart",$=>{this.imeSessionInProgress=!0})),this._register(u.ko(this.inputBox.inputElement,"compositionend",$=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,$=>this._onKeyDown.fire($)),this.onkeyup(this.inputBox.inputElement,$=>this._onKeyUp.fire($)),this.oninput(this.inputBox.inputElement,$=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,$=>this._onMouseDown.fire($))}get onDidChange(){return this.inputBox.onDidChange}layout(v){this.inputBox.layout(),this.updateInputBoxPadding(v.collapsedFindWidget)}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex?.enable(),this.wholeWords?.enable(),this.caseSensitive?.enable();for(const v of this.additionalToggles)v.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex?.disable(),this.wholeWords?.disable(),this.caseSensitive?.disable();for(const v of this.additionalToggles)v.disable()}setFocusInputOnOptionClick(v){this.fixFocusOnOptionClickEnabled=v}setEnabled(v){v?this.enable():this.disable()}setAdditionalToggles(v){for(const _ of this.additionalToggles)_.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new O.Cm;for(const _ of v??[])this.additionalTogglesDisposables.value.add(_),this.controls.appendChild(_.domNode),this.additionalTogglesDisposables.value.add(_.onChange(d=>{this._onDidOptionChange.fire(d),!d&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(_);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(v=!1){v?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(this.caseSensitive?.width()??0)+(this.wholeWords?.width()??0)+(this.regex?.width()??0)+this.additionalToggles.reduce((_,d)=>_+d.width(),0)}getValue(){return this.inputBox.value}setValue(v){this.inputBox.value!==v&&(this.inputBox.value=v)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive?.checked??!1}setCaseSensitive(v){this.caseSensitive&&(this.caseSensitive.checked=v)}getWholeWords(){return this.wholeWords?.checked??!1}setWholeWords(v){this.wholeWords&&(this.wholeWords.checked=v)}getRegex(){return this.regex?.checked??!1}setRegex(v){this.regex&&(this.regex.checked=v,this.validate())}focusOnCaseSensitive(){this.caseSensitive?.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(v){this.inputBox.showMessage(v)}clearMessage(){this.inputBox.hideMessage()}}},78690:(Mt,He,c)=>{c.d(He,{h5:()=>b,vr:()=>A,xE:()=>I});var u=c(31938);const G=2e4;let U,P,M,w,O;function A(v){U=document.createElement("div"),U.className="monaco-aria-container";const _=()=>{const m=document.createElement("div");return m.className="monaco-alert",m.setAttribute("role","alert"),m.setAttribute("aria-atomic","true"),U.appendChild(m),m};P=_(),M=_();const d=()=>{const m=document.createElement("div");return m.className="monaco-status",m.setAttribute("aria-live","polite"),m.setAttribute("aria-atomic","true"),U.appendChild(m),m};w=d(),O=d(),v.appendChild(U)}function I(v){U&&(P.textContent!==v?(u.w_(M),C(P,v)):(u.w_(P),C(M,v)))}function b(v){U&&(w.textContent!==v?(u.w_(O),C(w,v)):(u.w_(w),C(O,v)))}function C(v,_){u.w_(v),_.length>G&&(_=_.substr(0,G)),v.textContent=_,v.style.visibility="hidden",v.style.visibility="visible"}},79196:(Mt,He,c)=>{c.d(He,{f:()=>U});var u=c(77505),G=c(8264);function U(P,M,w,O,A,I){if(Array.isArray(P)){let b=0;for(const C of P){const v=U(C,M,w,O,A,I);if(v===10)return v;v>b&&(b=v)}return b}else{if(typeof P=="string")return O?P==="*"?5:P===w?10:0:0;if(P){const{language:b,pattern:C,scheme:v,hasAccessToAllModels:_,notebookType:d}=P;if(!O&&!_)return 0;d&&A&&(M=A);let m=0;if(v)if(v===M.scheme)m=10;else if(v==="*")m=5;else return 0;if(b)if(b===w)m=10;else if(b==="*")m=Math.max(m,5);else return 0;if(d)if(d===I)m=10;else if(d==="*"&&I!==void 0)m=Math.max(m,5);else return 0;if(C){let S;if(typeof C=="string"?S=C:S={...C,base:(0,G.S8)(C.base)},S===M.fsPath||(0,u.YW)(S,M.fsPath))m=10;else return 0}return m}else return 0}}},79475:(Mt,He,c)=>{c.d(He,{e2:()=>w,sN:()=>U,tW:()=>G,v7:()=>_});var u=c(85565);function G(d){return U(d,0)}function U(d,m){switch(typeof d){case"object":return d===null?P(349,m):Array.isArray(d)?O(d,m):A(d,m);case"string":return w(d,m);case"boolean":return M(d,m);case"number":return P(d,m);case"undefined":return P(937,m);default:return P(617,m)}}function P(d,m){return(m<<5)-m+d|0}function M(d,m){return P(d?433:863,m)}function w(d,m){m=P(149417,m);for(let S=0,D=d.length;S<D;S++)m=P(d.charCodeAt(S),m);return m}function O(d,m){return m=P(104579,m),d.reduce((S,D)=>U(D,S),m)}function A(d,m){return m=P(181387,m),Object.keys(d).sort().reduce((S,D)=>(S=w(D,S),U(d[D],S)),m)}function I(d,m,S=32){const D=S-m,E=~((1<<D)-1);return(d<<m|(E&d)>>>D)>>>0}function b(d,m=0,S=d.byteLength,D=0){for(let E=0;E<S;E++)d[m+E]=D}function C(d,m,S="0"){for(;d.length<m;)d=S+d;return d}function v(d,m=32){return d instanceof ArrayBuffer?Array.from(new Uint8Array(d)).map(S=>S.toString(16).padStart(2,"0")).join(""):C((d>>>0).toString(16),m/4)}class _{static{this._bigBlock32=new DataView(new ArrayBuffer(320))}constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(m){const S=m.length;if(S===0)return;const D=this._buff;let E=this._buffLen,B=this._leftoverHighSurrogate,R,z;for(B!==0?(R=B,z=-1,B=0):(R=m.charCodeAt(0),z=0);;){let W=R;if(u.pc(R))if(z+1<S){const $=m.charCodeAt(z+1);u.LJ($)?(z++,W=u.z_(R,$)):W=65533}else{B=R;break}else u.LJ(R)&&(W=65533);if(E=this._push(D,E,W),z++,z<S)R=m.charCodeAt(z);else break}this._buffLen=E,this._leftoverHighSurrogate=B}_push(m,S,D){return D<128?m[S++]=D:D<2048?(m[S++]=192|(D&1984)>>>6,m[S++]=128|(D&63)>>>0):D<65536?(m[S++]=224|(D&61440)>>>12,m[S++]=128|(D&4032)>>>6,m[S++]=128|(D&63)>>>0):(m[S++]=240|(D&1835008)>>>18,m[S++]=128|(D&258048)>>>12,m[S++]=128|(D&4032)>>>6,m[S++]=128|(D&63)>>>0),S>=64&&(this._step(),S-=64,this._totalLen+=64,m[0]=m[64],m[1]=m[65],m[2]=m[66]),S}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),v(this._h0)+v(this._h1)+v(this._h2)+v(this._h3)+v(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,b(this._buff,this._buffLen),this._buffLen>56&&(this._step(),b(this._buff));const m=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(m/4294967296),!1),this._buffDV.setUint32(60,m%4294967296,!1),this._step()}_step(){const m=_._bigBlock32,S=this._buffDV;for(let q=0;q<64;q+=4)m.setUint32(q,S.getUint32(q,!1),!1);for(let q=64;q<320;q+=4)m.setUint32(q,I(m.getUint32(q-12,!1)^m.getUint32(q-32,!1)^m.getUint32(q-56,!1)^m.getUint32(q-64,!1),1),!1);let D=this._h0,E=this._h1,B=this._h2,R=this._h3,z=this._h4,W,$,Q;for(let q=0;q<80;q++)q<20?(W=E&B|~E&R,$=1518500249):q<40?(W=E^B^R,$=1859775393):q<60?(W=E&B|E&R|B&R,$=2400959708):(W=E^B^R,$=3395469782),Q=I(D,5)+W+z+$+m.getUint32(q*4,!1)&4294967295,z=R,R=B,B=I(E,30),E=D,D=Q;this._h0=this._h0+D&4294967295,this._h1=this._h1+E&4294967295,this._h2=this._h2+B&4294967295,this._h3=this._h3+R&4294967295,this._h4=this._h4+z&4294967295}}},79766:(Mt,He,c)=>{c.d(He,{mJ:()=>E,x8:()=>S});var u=c(31938),G=c(89530),U=c(58242),P=c(80074),M=c(78690),w=c(91779),O=c(15903),A=c(13511),I=c(62385),b=c(56491);class C{constructor(R,z=0,W=R.length,$=z-1){this.items=R,this.start=z,this.end=W,this.index=$}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class v{constructor(R=[],z=10){this._initialize(R),this._limit=z,this._onChange()}getHistory(){return this._elements}add(R){this._history.delete(R),this._history.add(R),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(R){return this._history.has(R)}_onChange(){this._reduceToLimit();const R=this._elements;this._navigator=new C(R,0,R.length,R.length)}_reduceToLimit(){const R=this._elements;R.length>this._limit&&this._initialize(R.slice(R.length-this._limit))}_currentPosition(){const R=this._navigator.current();return R?this._elements.indexOf(R):-1}_initialize(R){this._history=new Set;for(const z of R)this._history.add(z)}get _elements(){const R=[];return this._history.forEach(z=>R.push(z)),R}}var _=c(3223),d=c(45573);const m=u.$,S={inputBackground:"#3C3C3C",inputForeground:"#CCCCCC",inputValidationInfoBorder:"#55AAFF",inputValidationInfoBackground:"#063B49",inputValidationWarningBorder:"#B89500",inputValidationWarningBackground:"#352A05",inputValidationErrorBorder:"#BE1100",inputValidationErrorBackground:"#5A1D1D",inputBorder:void 0,inputValidationErrorForeground:void 0,inputValidationInfoForeground:void 0,inputValidationWarningForeground:void 0};class D extends I.x{constructor(R,z,W){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new b.vl),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new b.vl),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=z,this.options=W,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=u.BC(R,m(".monaco-inputbox.idle"));const $=this.options.flexibleHeight?"textarea":"input",Q=u.BC(this.element,m(".ibwrapper"));if(this.input=u.BC(Q,m($+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=u.BC(Q,m("div.mirror")),this.mirror.innerText="\xA0",this.scrollableElement=new A.Se(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),u.BC(R,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(ve=>this.input.scrollTop=ve.scrollTop));const q=this._register(new G.f(R.ownerDocument,"selectionchange")),ne=b.Jh.filter(q.event,()=>R.ownerDocument.getSelection()?.anchorNode===Q);this._register(ne(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new P.E(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(R){this.placeholder=R,this.input.setAttribute("placeholder",R)}setTooltip(R){this.tooltip=R,this.hover?this.hover.update(R):this.hover=this._register((0,w.i)().setupManagedHover((0,O.nZ)("mouse"),this.input,R))}get inputElement(){return this.input}get value(){return this.input.value}set value(R){this.input.value!==R&&(this.input.value=R,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:u.OK(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return u.X7(this.input)}select(R=null){this.input.select(),R&&(this.input.setSelectionRange(R.start,R.end),R.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const R=this.input.selectionStart;if(R===null)return null;const z=this.input.selectionEnd??R;return{start:R,end:z}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(R){this.input.style.width=`calc(100% - ${R}px)`,this.mirror&&(this.mirror.style.paddingRight=R+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const R=this.cachedContentHeight,z=this.cachedHeight,W=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:R,height:z}),this.scrollableElement.setScrollPosition({scrollTop:W})}showMessage(R,z){if(this.state==="open"&&(0,_.aI)(this.message,R))return;this.message=R,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(R.type));const W=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${u.gI(W.border,"transparent")}`,this.message.content&&(this.hasFocus()||z)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let R=null;return this.validation&&(R=this.validation(this.value),R?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(R)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),R?.type}stylesForType(R){const z=this.options.inputBoxStyles;switch(R){case 1:return{border:z.inputValidationInfoBorder,background:z.inputValidationInfoBackground,foreground:z.inputValidationInfoForeground};case 2:return{border:z.inputValidationWarningBorder,background:z.inputValidationWarningBackground,foreground:z.inputValidationWarningForeground};default:return{border:z.inputValidationErrorBorder,background:z.inputValidationErrorBackground,foreground:z.inputValidationErrorForeground}}}classForType(R){switch(R){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let R;const z=()=>R.style.width=u.Tr(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:$=>{if(!this.message)return null;R=u.BC($,m(".monaco-inputbox-container")),z();const Q={inline:!0,className:"monaco-inputbox-message"},q=this.message.formatContent?(0,U.yk)(this.message.content,Q):(0,U.S5)(this.message.content,Q);q.classList.add(this.classForType(this.message.type));const ne=this.stylesForType(this.message.type);return q.style.backgroundColor=ne.background??"",q.style.color=ne.foreground??"",q.style.border=ne.border?`1px solid ${ne.border}`:"",u.BC(R,q),null},onHide:()=>{this.state="closed"},layout:z});let W;this.message.type===3?W=d.kg("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?W=d.kg("alertWarningMessage","Warning: {0}",this.message.content):W=d.kg("alertInfoMessage","Info: {0}",this.message.content),M.xE(W),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const R=this.value,W=R.charCodeAt(R.length-1)===10?" ":"";(R+W).replace(/\u000c/g,"")?this.mirror.textContent=R+W:this.mirror.innerText="\xA0",this.layout()}applyStyles(){const R=this.options.inputBoxStyles,z=R.inputBackground??"",W=R.inputForeground??"",$=R.inputBorder??"";this.element.style.backgroundColor=z,this.element.style.color=W,this.input.style.backgroundColor="inherit",this.input.style.color=W,this.element.style.border=`1px solid ${u.gI($,"transparent")}`}layout(){if(!this.mirror)return;const R=this.cachedContentHeight;this.cachedContentHeight=u.OK(this.mirror),R!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(R){const z=this.inputElement,W=z.selectionStart,$=z.selectionEnd,Q=z.value;W!==null&&$!==null&&(this.value=Q.substr(0,W)+R+Q.substr($),z.setSelectionRange(W+1,W+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar?.dispose(),super.dispose()}}class E extends D{constructor(R,z,W){const $=d.kg({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is \u21C5 to represent the up and down arrow keys.']}," or {0} for history","\u21C5"),Q=d.kg({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is \u21C5 to represent the up and down arrow keys.']}," ({0} for history)","\u21C5");super(R,z,W),this._onDidFocus=this._register(new b.vl),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new b.vl),this.onDidBlur=this._onDidBlur.event,this.history=new v(W.history,100);const q=()=>{if(W.showHistoryHint&&W.showHistoryHint()&&!this.placeholder.endsWith($)&&!this.placeholder.endsWith(Q)&&this.history.getHistory().length){const ne=this.placeholder.endsWith(")")?$:Q,ve=this.placeholder+ne;W.showPlaceholderOnFocus&&!u.X7(this.input)?this.placeholder=ve:this.setPlaceHolder(ve)}};this.observer=new MutationObserver((ne,ve)=>{ne.forEach(Re=>{Re.target.textContent||q()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>q()),this.onblur(this.input,()=>{const ne=ve=>{if(this.placeholder.endsWith(ve)){const Re=this.placeholder.slice(0,this.placeholder.length-ve.length);return W.showPlaceholderOnFocus?this.placeholder=Re:this.setPlaceHolder(Re),!0}else return!1};ne(Q)||ne($)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(R){this.value&&(R||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let R=this.getNextValue();R&&(R=R===this.value?this.getNextValue():R),this.value=R??"",M.h5(this.value?this.value:d.kg("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let R=this.getPreviousValue();R&&(R=R===this.value?this.getPreviousValue():R),R&&(this.value=R,M.h5(this.value))}setPlaceHolder(R){super.setPlaceHolder(R),this.setTooltip(R)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let R=this.history.current();return R||(R=this.history.last(),this.history.next()),R}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}},79821:(Mt,He,c)=>{c.d(He,{V:()=>G,y:()=>U});var u=c(34435);class G{constructor(M){const w=(0,u.W)(M);this._defaultValue=w,this._asciiMap=G._createAsciiMap(w),this._map=new Map}static _createAsciiMap(M){const w=new Uint8Array(256);return w.fill(M),w}set(M,w){const O=(0,u.W)(w);M>=0&&M<256?this._asciiMap[M]=O:this._map.set(M,O)}get(M){return M>=0&&M<256?this._asciiMap[M]:this._map.get(M)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class U{constructor(){this._actual=new G(0)}add(M){this._actual.set(M,1)}has(M){return this._actual.get(M)===1}clear(){return this._actual.clear()}}},80074:(Mt,He,c)=>{c.d(He,{E:()=>I});var u=c(31938),G=c(15625),U=c(38795),P=c(15903),M=c(43860),w=c(56491),O=c(60599),A=c(33902);class I extends O.jG{constructor(C,v={}){super(),this._actionRunnerDisposables=this._register(new O.Cm),this.viewItemDisposables=this._register(new O.$w),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new w.vl),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new w.vl({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new w.vl),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new w.vl),this.onWillRun=this._onWillRun.event,this.options=v,this._context=v.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:this.options.triggerKeys?.keyDown??!1,keys:this.options.triggerKeys?.keys??[3,10]},this._hoverDelegate=v.hoverDelegate??this._register((0,P.bW)()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new M.LN,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(m=>this._onDidRun.fire(m))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(m=>this._onWillRun.fire(m))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let _,d;switch(this._orientation){case 0:_=[15],d=[17];break;case 1:_=[16],d=[18],this.domNode.className+=" vertical";break}this._register(u.ko(this.domNode,u.Bx.KEY_DOWN,m=>{const S=new G.Z(m);let D=!0;const E=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;_&&(S.equals(_[0])||S.equals(_[1]))?D=this.focusPrevious():d&&(S.equals(d[0])||S.equals(d[1]))?D=this.focusNext():S.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():S.equals(14)?D=this.focusFirst():S.equals(13)?D=this.focusLast():S.equals(2)&&E instanceof U.EH&&E.trapsArrowNavigation?D=this.focusNext(void 0,!0):this.isTriggerKeyEvent(S)?this._triggerKeys.keyDown?this.doTrigger(S):this.triggerKeyDown=!0:D=!1,D&&(S.preventDefault(),S.stopPropagation())})),this._register(u.ko(this.domNode,u.Bx.KEY_UP,m=>{const S=new G.Z(m);this.isTriggerKeyEvent(S)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(S)),S.preventDefault(),S.stopPropagation()):(S.equals(2)||S.equals(1026)||S.equals(16)||S.equals(18)||S.equals(15)||S.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(u.w5(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(u.bq()===this.domNode||!u.QX(u.bq(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),C.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(C){if(this.focusable=C,this.focusable){const v=this.viewItems.find(_=>_ instanceof U.EH&&_.isEnabled());v instanceof U.EH&&v.setFocusable(!0)}else this.viewItems.forEach(v=>{v instanceof U.EH&&v.setFocusable(!1)})}isTriggerKeyEvent(C){let v=!1;return this._triggerKeys.keys.forEach(_=>{v=v||C.equals(_)}),v}updateFocusedItem(){for(let C=0;C<this.actionsList.children.length;C++){const v=this.actionsList.children[C];if(u.QX(u.bq(),v)){this.focusedItem=C,this.viewItems[this.focusedItem]?.showHover?.();break}}}get context(){return this._context}set context(C){this._context=C,this.viewItems.forEach(v=>v.setActionContext(C))}get actionRunner(){return this._actionRunner}set actionRunner(C){this._actionRunner=C,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(v=>this._onDidRun.fire(v))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(v=>this._onWillRun.fire(v))),this.viewItems.forEach(v=>v.actionRunner=C)}getContainer(){return this.domNode}getAction(C){if(typeof C=="number")return this.viewItems[C]?.action;if(u.sb(C)){for(;C.parentElement!==this.actionsList;){if(!C.parentElement)return;C=C.parentElement}for(let v=0;v<this.actionsList.childNodes.length;v++)if(this.actionsList.childNodes[v]===C)return this.viewItems[v].action}}push(C,v={}){const _=Array.isArray(C)?C:[C];let d=A.Et(v.index)?v.index:null;_.forEach(m=>{const S=document.createElement("li");S.className="action-item",S.setAttribute("role","presentation");let D;const E={hoverDelegate:this._hoverDelegate,...v,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(D=this.options.actionViewItemProvider(m,E)),D||(D=new U.Z4(this.context,m,E)),this.options.allowContextMenu||this.viewItemDisposables.set(D,u.ko(S,u.Bx.CONTEXT_MENU,B=>{u.fs.stop(B,!0)})),D.actionRunner=this._actionRunner,D.setActionContext(this.context),D.render(S),this.focusable&&D instanceof U.EH&&this.viewItems.length===0&&D.setFocusable(!0),d===null||d<0||d>=this.actionsList.children.length?(this.actionsList.appendChild(S),this.viewItems.push(D)):(this.actionsList.insertBefore(S,this.actionsList.children[d]),this.viewItems.splice(d,0,D),d++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=(0,O.AS)(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),u.w_(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(C){let v=!1,_;if(C===void 0?v=!0:typeof C=="number"?_=C:typeof C=="boolean"&&(v=C),v&&typeof this.focusedItem>"u"){const d=this.viewItems.findIndex(m=>m.isEnabled());this.focusedItem=d===-1?void 0:d,this.updateFocus(void 0,void 0,!0)}else _!==void 0&&(this.focusedItem=_),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(C,v){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const _=this.focusedItem;let d;do{if(!C&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=_,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,d=this.viewItems[this.focusedItem]}while(this.focusedItem!==_&&(this.options.focusOnlyEnabledItems&&!d.isEnabled()||d.action.id===M.wv.ID));return this.updateFocus(void 0,void 0,v),!0}focusPrevious(C){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const v=this.focusedItem;let _;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!C&&this.options.preventLoopNavigation)return this.focusedItem=v,!1;this.focusedItem=this.viewItems.length-1}_=this.viewItems[this.focusedItem]}while(this.focusedItem!==v&&(this.options.focusOnlyEnabledItems&&!_.isEnabled()||_.action.id===M.wv.ID));return this.updateFocus(!0),!0}updateFocus(C,v,_=!1){typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:v}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&this.viewItems[this.previouslyFocusedItem]?.blur();const d=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(d){let m=!0;A.Tn(d.focus)||(m=!1),this.options.focusOnlyEnabledItems&&A.Tn(d.isEnabled)&&!d.isEnabled()&&(m=!1),d.action.id===M.wv.ID&&(m=!1),m?(_||this.previouslyFocusedItem!==this.focusedItem)&&(d.focus(C),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:v}),this.previouslyFocusedItem=void 0),m&&d.showHover?.()}}doTrigger(C){if(typeof this.focusedItem>"u")return;const v=this.viewItems[this.focusedItem];if(v instanceof U.EH){const _=v._context===null||v._context===void 0?C:v._context;this.run(v._action,_)}}async run(C,v){await this._actionRunner.run(C,v)}dispose(){this._context=void 0,this.viewItems=(0,O.AS)(this.viewItems),this.getContainer().remove(),super.dispose()}}},80294:(Mt,He,c)=>{c.d(He,{Al:()=>d,EL:()=>w,HJ:()=>O,NB:()=>I,c7:()=>_,er:()=>A,iw:()=>b,nH:()=>v});var u=c(45573),G=c(34920),U=c(24167),P=c(41063),M=c(4034);const w=(0,U.x1)("quickInput.background",P.Cg,u.kg("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),O=(0,U.x1)("quickInput.foreground",P.Fi,u.kg("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),A=(0,U.x1)("quickInputTitle.background",{dark:new G.Q1(new G.bU(255,255,255,.105)),light:new G.Q1(new G.bU(0,0,0,.06)),hcDark:"#000000",hcLight:G.Q1.white},u.kg("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),I=(0,U.x1)("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:G.Q1.white,hcLight:"#0F4A85"},u.kg("pickerGroupForeground","Quick picker color for grouping labels.")),b=(0,U.x1)("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:G.Q1.white,hcLight:"#0F4A85"},u.kg("pickerGroupBorder","Quick picker color for grouping borders.")),C=(0,U.x1)("quickInput.list.focusBackground",null,"",void 0,u.kg("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),v=(0,U.x1)("quickInputList.focusForeground",M.GV,u.kg("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),_=(0,U.x1)("quickInputList.focusIconForeground",M.fE,u.kg("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),d=(0,U.x1)("quickInputList.focusBackground",{dark:(0,U.yL)(C,M.Rj),light:(0,U.yL)(C,M.Rj),hcDark:null,hcLight:null},u.kg("quickInput.listFocusBackground","Quick picker background color for the focused item."))},80301:(Mt,He,c)=>{c.r(He),c.d(He,{LanguageFeaturesService:()=>C});var u=c(56491),G=c(60599),U=c(26342),P=c(79196);function M(v){return typeof v=="string"?!1:Array.isArray(v)?v.every(M):!!v.exclusive}class w{constructor(_,d,m,S,D){this.uri=_,this.languageId=d,this.notebookUri=m,this.notebookType=S,this.recursive=D}equals(_){return this.notebookType===_.notebookType&&this.languageId===_.languageId&&this.uri.toString()===_.uri.toString()&&this.notebookUri?.toString()===_.notebookUri?.toString()&&this.recursive===_.recursive}}class O{constructor(_){this._notebookInfoResolver=_,this._clock=0,this._entries=[],this._onDidChange=new u.vl,this.onDidChange=this._onDidChange.event}register(_,d){let m={selector:_,provider:d,_score:-1,_time:this._clock++};return this._entries.push(m),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),(0,G.s)(()=>{if(m){const S=this._entries.indexOf(m);S>=0&&(this._entries.splice(S,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),m=void 0)}})}has(_){return this.all(_).length>0}all(_){if(!_)return[];this._updateScores(_,!1);const d=[];for(const m of this._entries)m._score>0&&d.push(m.provider);return d}ordered(_,d=!1){const m=[];return this._orderedForEach(_,d,S=>m.push(S.provider)),m}orderedGroups(_){const d=[];let m,S;return this._orderedForEach(_,!1,D=>{m&&S===D._score?m.push(D.provider):(S=D._score,m=[D.provider],d.push(m))}),d}_orderedForEach(_,d,m){this._updateScores(_,d);for(const S of this._entries)S._score>0&&m(S)}_updateScores(_,d){const m=this._notebookInfoResolver?.(_.uri),S=m?new w(_.uri,_.getLanguageId(),m.uri,m.type,d):new w(_.uri,_.getLanguageId(),void 0,void 0,d);if(!this._lastCandidate?.equals(S)){this._lastCandidate=S;for(const D of this._entries)if(D._score=(0,P.f)(D.selector,S.uri,S.languageId,(0,U.vd)(_),S.notebookUri,S.notebookType),M(D.selector)&&D._score>0)if(d)D._score=0;else{for(const E of this._entries)E._score=0;D._score=1e3;break}this._entries.sort(O._compareByScoreAndTime)}}static _compareByScoreAndTime(_,d){return _._score<d._score?1:_._score>d._score?-1:A(_.selector)&&!A(d.selector)?1:!A(_.selector)&&A(d.selector)?-1:_._time<d._time?1:_._time>d._time?-1:0}}function A(v){return typeof v=="string"?!1:Array.isArray(v)?v.some(A):!!v.isBuiltin}var I=c(84139),b=c(73429);class C{constructor(){this.referenceProvider=new O(this._score.bind(this)),this.renameProvider=new O(this._score.bind(this)),this.newSymbolNamesProvider=new O(this._score.bind(this)),this.codeActionProvider=new O(this._score.bind(this)),this.definitionProvider=new O(this._score.bind(this)),this.typeDefinitionProvider=new O(this._score.bind(this)),this.declarationProvider=new O(this._score.bind(this)),this.implementationProvider=new O(this._score.bind(this)),this.documentSymbolProvider=new O(this._score.bind(this)),this.inlayHintsProvider=new O(this._score.bind(this)),this.colorProvider=new O(this._score.bind(this)),this.codeLensProvider=new O(this._score.bind(this)),this.documentFormattingEditProvider=new O(this._score.bind(this)),this.documentRangeFormattingEditProvider=new O(this._score.bind(this)),this.onTypeFormattingEditProvider=new O(this._score.bind(this)),this.signatureHelpProvider=new O(this._score.bind(this)),this.hoverProvider=new O(this._score.bind(this)),this.documentHighlightProvider=new O(this._score.bind(this)),this.multiDocumentHighlightProvider=new O(this._score.bind(this)),this.selectionRangeProvider=new O(this._score.bind(this)),this.foldingRangeProvider=new O(this._score.bind(this)),this.linkProvider=new O(this._score.bind(this)),this.inlineCompletionsProvider=new O(this._score.bind(this)),this.inlineEditProvider=new O(this._score.bind(this)),this.completionProvider=new O(this._score.bind(this)),this.linkedEditingRangeProvider=new O(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new O(this._score.bind(this)),this.documentSemanticTokensProvider=new O(this._score.bind(this)),this.documentDropEditProvider=new O(this._score.bind(this)),this.documentPasteEditProvider=new O(this._score.bind(this))}_score(_){return this._notebookTypeResolver?.(_)}}(0,b.v)(I.ILanguageFeaturesService,C,1)},81064:(Mt,He,c)=>{c.d(He,{z:()=>G});var u=c(90692);const G=u.uF?'"Segoe WPC", "Segoe UI", sans-serif':u.zx?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif'},81182:(Mt,He,c)=>{c.d(He,{WL:()=>w,q6:()=>b,wm:()=>I});var u=c(87856),G=c(33924),U=c(69504),P=c(98414),M=c(86968);class w{static inverse(v,_,d){const m=[];let S=1,D=1;for(const B of v){const R=new w(new G.M(S,B.original.startLineNumber),new G.M(D,B.modified.startLineNumber));R.modified.isEmpty||m.push(R),S=B.original.endLineNumberExclusive,D=B.modified.endLineNumberExclusive}const E=new w(new G.M(S,_+1),new G.M(D,d+1));return E.modified.isEmpty||m.push(E),m}static clip(v,_,d){const m=[];for(const S of v){const D=S.original.intersect(_),E=S.modified.intersect(d);D&&!D.isEmpty&&E&&!E.isEmpty&&m.push(new w(D,E))}return m}constructor(v,_){this.original=v,this.modified=_}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new w(this.modified,this.original)}join(v){return new w(this.original.join(v.original),this.modified.join(v.modified))}toRangeMapping(){const v=this.original.toInclusiveRange(),_=this.modified.toInclusiveRange();if(v&&_)return new b(v,_);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new u.D7("not a valid diff");return new b(new P.Q(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new P.Q(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new b(new P.Q(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new P.Q(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(v,_){if(A(this.original.endLineNumberExclusive,v)&&A(this.modified.endLineNumberExclusive,_))return new b(new P.Q(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new P.Q(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new b(P.Q.fromPositions(new U.y(this.original.startLineNumber,1),O(new U.y(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),v)),P.Q.fromPositions(new U.y(this.modified.startLineNumber,1),O(new U.y(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),_)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new b(P.Q.fromPositions(O(new U.y(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),v),O(new U.y(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),v)),P.Q.fromPositions(O(new U.y(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),_),O(new U.y(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),_)));throw new u.D7}}function O(C,v){if(C.lineNumber<1)return new U.y(1,1);if(C.lineNumber>v.length)return new U.y(v.length,v[v.length-1].length+1);const _=v[C.lineNumber-1];return C.column>_.length+1?new U.y(C.lineNumber,_.length+1):C}function A(C,v){return C>=1&&C<=v.length}class I extends w{static fromRangeMappings(v){const _=G.M.join(v.map(m=>G.M.fromRangeInclusive(m.originalRange))),d=G.M.join(v.map(m=>G.M.fromRangeInclusive(m.modifiedRange)));return new I(_,d,v)}constructor(v,_,d){super(v,_),this.innerChanges=d}flip(){return new I(this.modified,this.original,this.innerChanges?.map(v=>v.flip()))}withInnerChangesFromLineRanges(){return new I(this.original,this.modified,[this.toRangeMapping()])}}class b{static assertSorted(v){for(let _=1;_<v.length;_++){const d=v[_-1],m=v[_];if(!(d.originalRange.getEndPosition().isBeforeOrEqual(m.originalRange.getStartPosition())&&d.modifiedRange.getEndPosition().isBeforeOrEqual(m.modifiedRange.getStartPosition())))throw new u.D7("Range mappings must be sorted")}}constructor(v,_){this.originalRange=v,this.modifiedRange=_}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new b(this.modifiedRange,this.originalRange)}toTextEdit(v){const _=v.getValueOfRange(this.modifiedRange);return new M.WR(this.originalRange,_)}}},81669:(Mt,He,c)=>{c.d(He,{$D:()=>D,Eq:()=>E,M0:()=>$,Mz:()=>W,No:()=>z,bs:()=>B});var u=c(38594),G=c(31938),U=c(89530),P=c(15625),M=c(74692),w=c(37519),O=c(56491),A=c(60599),I=c(36035),b=c(85565),C=c(5656),v=c(47545),_=c(73240),d=c(92824),m=function(Q,q,ne,ve){var Re=arguments.length,Ae=Re<3?q:ve===null?ve=Object.getOwnPropertyDescriptor(q,ne):ve,re;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ae=Reflect.decorate(Q,q,ne,ve);else for(var K=Q.length-1;K>=0;K--)(re=Q[K])&&(Ae=(Re<3?re(Ae):Re>3?re(q,ne,Ae):re(q,ne))||Ae);return Re>3&&Ae&&Object.defineProperty(q,ne,Ae),Ae},S=function(Q,q){return function(ne,ve){q(ne,ve,Q)}},D;(function(Q){Q.Tap="-monaco-textarea-synthetic-tap"})(D||(D={}));const E={forceCopyWithSyntaxHighlighting:!1};class B{static{this.INSTANCE=new B}constructor(){this._lastState=null}set(q,ne){this._lastState={lastCopiedValue:q,data:ne}}get(q){return this._lastState&&this._lastState.lastCopiedValue===q?this._lastState.data:(this._lastState=null,null)}}class R{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(q){q=q||"";const ne={text:q,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=q.length,ne}}let z=class extends A.jG{get textAreaState(){return this._textAreaState}constructor(q,ne,ve,Re,Ae,re){super(),this._host=q,this._textArea=ne,this._OS=ve,this._browser=Re,this._accessibilityService=Ae,this._logService=re,this._onFocus=this._register(new O.vl),this.onFocus=this._onFocus.event,this._onBlur=this._register(new O.vl),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new O.vl),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new O.vl),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new O.vl),this.onCut=this._onCut.event,this._onPaste=this._register(new O.vl),this.onPaste=this._onPaste.event,this._onType=this._register(new O.vl),this.onType=this._onType.event,this._onCompositionStart=this._register(new O.vl),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new O.vl),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new O.vl),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new O.vl),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new A.HE),this._asyncTriggerCut=this._register(new w.uC(()=>this._onCut.fire(),0)),this._textAreaState=C._O.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(O.Jh.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new w.uC(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let K=null;this._register(this._textArea.onKeyDown(F=>{const N=new P.Z(F);(N.keyCode===114||this._currentComposition&&N.keyCode===1)&&N.stopPropagation(),N.equals(9)&&N.preventDefault(),K=N,this._onKeyDown.fire(N)})),this._register(this._textArea.onKeyUp(F=>{const N=new P.Z(F);this._onKeyUp.fire(N)})),this._register(this._textArea.onCompositionStart(F=>{C.Hf;const N=new R;if(this._currentComposition){this._currentComposition=N;return}if(this._currentComposition=N,this._OS===2&&K&&K.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===F.data&&(K.code==="ArrowRight"||K.code==="ArrowLeft")){C.Hf,N.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:F.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:F.data});return}this._onCompositionStart.fire({data:F.data})})),this._register(this._textArea.onCompositionUpdate(F=>{C.Hf;const N=this._currentComposition;if(!N)return;if(this._browser.isAndroid){const me=C._O.readFromTextArea(this._textArea,this._textAreaState),ce=C._O.deduceAndroidCompositionInput(this._textAreaState,me);this._textAreaState=me,this._onType.fire(ce),this._onCompositionUpdate.fire(F);return}const j=N.handleCompositionUpdate(F.data);this._textAreaState=C._O.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(j),this._onCompositionUpdate.fire(F)})),this._register(this._textArea.onCompositionEnd(F=>{C.Hf;const N=this._currentComposition;if(!N)return;if(this._currentComposition=null,this._browser.isAndroid){const me=C._O.readFromTextArea(this._textArea,this._textAreaState),ce=C._O.deduceAndroidCompositionInput(this._textAreaState,me);this._textAreaState=me,this._onType.fire(ce),this._onCompositionEnd.fire();return}const j=N.handleCompositionUpdate(F.data);this._textAreaState=C._O.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(j),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(F=>{if(C.Hf,this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const N=C._O.readFromTextArea(this._textArea,this._textAreaState),j=C._O.deduceInput(this._textAreaState,N,this._OS===2);j.replacePrevCharCnt===0&&j.text.length===1&&(b.pc(j.text.charCodeAt(0))||j.text.charCodeAt(0)===127)||(this._textAreaState=N,(j.text!==""||j.replacePrevCharCnt!==0||j.replaceNextCharCnt!==0||j.positionDelta!==0)&&this._onType.fire(j))})),this._register(this._textArea.onCut(F=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(F),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(F=>{this._ensureClipboardGetsEditorSelection(F)})),this._register(this._textArea.onPaste(F=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),F.preventDefault(),!F.clipboardData)return;let[N,j]=W.getTextData(F.clipboardData);N&&(j=j||B.INSTANCE.get(N),this._onPaste.fire({text:N,metadata:j}))})),this._register(this._textArea.onFocus(()=>{const F=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!F&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new w.uC(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let q=0;return G.ko(this._textArea.ownerDocument,"selectionchange",ne=>{if(M.p.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const ve=Date.now(),Re=ve-q;if(q=ve,Re<5)return;const Ae=ve-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),Ae<100||!this._textAreaState.selection)return;const re=this._textArea.getValue();if(this._textAreaState.value!==re)return;const K=this._textArea.getSelectionStart(),F=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===K&&this._textAreaState.selectionEnd===F)return;const N=this._textAreaState.deduceEditorPosition(K),j=this._host.deduceModelPosition(N[0],N[1],N[2]),me=this._textAreaState.deduceEditorPosition(F),ce=this._host.deduceModelPosition(me[0],me[1],me[2]),he=new v.L(j.lineNumber,j.column,ce.lineNumber,ce.column);this._onSelectionChangeRequest.fire(he)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(q){this._hasFocus!==q&&(this._hasFocus=q,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(q,ne){this._hasFocus||(ne=ne.collapseSelection()),ne.writeToTextArea(q,this._textArea,this._hasFocus),this._textAreaState=ne}writeNativeTextAreaContent(q){!this._accessibilityService.isScreenReaderOptimized()&&q==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${q})`),this._setAndWriteTextAreaState(q,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(q){const ne=this._host.getDataToCopy(),ve={version:1,isFromEmptySelection:ne.isFromEmptySelection,multicursorText:ne.multicursorText,mode:ne.mode};B.INSTANCE.set(this._browser.isFirefox?ne.text.replace(/\r\n/g,`
`):ne.text,ve),q.preventDefault(),q.clipboardData&&W.setTextData(q.clipboardData,ne.text,ne.html,ve)}};z=m([S(4,_.j),S(5,d.rr)],z);const W={getTextData(Q){const q=Q.getData(I.K.text);let ne=null;const ve=Q.getData("vscode-editor-data");if(typeof ve=="string")try{ne=JSON.parse(ve),ne.version!==1&&(ne=null)}catch{}return q.length===0&&ne===null&&Q.files.length>0?[Array.prototype.slice.call(Q.files,0).map(Ae=>Ae.name).join(`
`),null]:[q,ne]},setTextData(Q,q,ne,ve){Q.setData(I.K.text,q),typeof ne=="string"&&Q.setData("text/html",ne),Q.setData("vscode-editor-data",JSON.stringify(ve))}};class $ extends A.jG{get ownerDocument(){return this._actual.ownerDocument}constructor(q){super(),this._actual=q,this.onKeyDown=this._register(new U.f(this._actual,"keydown")).event,this.onKeyUp=this._register(new U.f(this._actual,"keyup")).event,this.onCompositionStart=this._register(new U.f(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new U.f(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new U.f(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new U.f(this._actual,"beforeinput")).event,this.onInput=this._register(new U.f(this._actual,"input")).event,this.onCut=this._register(new U.f(this._actual,"cut")).event,this.onCopy=this._register(new U.f(this._actual,"copy")).event,this.onPaste=this._register(new U.f(this._actual,"paste")).event,this.onFocus=this._register(new U.f(this._actual,"focus")).event,this.onBlur=this._register(new U.f(this._actual,"blur")).event,this._onSyntheticTap=this._register(new O.vl),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>M.p.onKeyDown())),this._register(this.onBeforeInput(()=>M.p.onBeforeInput())),this._register(this.onInput(()=>M.p.onInput())),this._register(this.onKeyUp(()=>M.p.onKeyUp())),this._register(G.ko(this._actual,D.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const q=G.jG(this._actual);return q?q.activeElement===this._actual:this._actual.isConnected?G.bq()===this._actual:!1}setIgnoreSelectionChangeTime(q){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(q,ne){const ve=this._actual;ve.value!==ne&&(this.setIgnoreSelectionChangeTime("setValue"),ve.value=ne)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(q,ne,ve){const Re=this._actual;let Ae=null;const re=G.jG(Re);re?Ae=re.activeElement:Ae=G.bq();const K=G.zk(Ae),F=Ae===Re,N=Re.selectionStart,j=Re.selectionEnd;if(F&&N===ne&&j===ve){u.gm&&K.parent!==K&&Re.focus();return}if(F){this.setIgnoreSelectionChangeTime("setSelectionRange"),Re.setSelectionRange(ne,ve),u.gm&&K.parent!==K&&Re.focus();return}try{const me=G.zK(Re);this.setIgnoreSelectionChangeTime("setSelectionRange"),Re.focus(),Re.setSelectionRange(ne,ve),G.wk(Re,me)}catch{}}}},82895:(Mt,He,c)=>{c.d(He,{N:()=>U,c2:()=>P});var u=c(93009),G=c(34435);class U{constructor(O){this.values=O,this.prefixSum=new Uint32Array(O.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(O,A){O=(0,G.j)(O);const I=this.values,b=this.prefixSum,C=A.length;return C===0?!1:(this.values=new Uint32Array(I.length+C),this.values.set(I.subarray(0,O),0),this.values.set(I.subarray(O),O+C),this.values.set(A,O),O-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=O-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(b.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(O,A){return O=(0,G.j)(O),A=(0,G.j)(A),this.values[O]===A?!1:(this.values[O]=A,O-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=O-1),!0)}removeValues(O,A){O=(0,G.j)(O),A=(0,G.j)(A);const I=this.values,b=this.prefixSum;if(O>=I.length)return!1;const C=I.length-O;return A>=C&&(A=C),A===0?!1:(this.values=new Uint32Array(I.length-A),this.values.set(I.subarray(0,O),0),this.values.set(I.subarray(O+A),O),this.prefixSum=new Uint32Array(this.values.length),O-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=O-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(b.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(O){return O<0?0:(O=(0,G.j)(O),this._getPrefixSum(O))}_getPrefixSum(O){if(O<=this.prefixSumValidIndex[0])return this.prefixSum[O];let A=this.prefixSumValidIndex[0]+1;A===0&&(this.prefixSum[0]=this.values[0],A++),O>=this.values.length&&(O=this.values.length-1);for(let I=A;I<=O;I++)this.prefixSum[I]=this.prefixSum[I-1]+this.values[I];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],O),this.prefixSum[O]}getIndexOf(O){O=Math.floor(O),this.getTotalSum();let A=0,I=this.values.length-1,b=0,C=0,v=0;for(;A<=I;)if(b=A+(I-A)/2|0,C=this.prefixSum[b],v=C-this.values[b],O<v)I=b-1;else if(O>=C)A=b+1;else break;return new M(b,O-v)}}class P{constructor(O){this._values=O,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(O){return this._ensureValid(),O===0?0:this._prefixSum[O-1]}getIndexOf(O){this._ensureValid();const A=this._indexBySum[O],I=A>0?this._prefixSum[A-1]:0;return new M(A,O-I)}removeValues(O,A){this._values.splice(O,A),this._invalidate(O)}insertValues(O,A){this._values=(0,u.nK)(this._values,O,A),this._invalidate(O)}_invalidate(O){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,O-1)}_ensureValid(){if(!this._isValid){for(let O=this._validEndIndex+1,A=this._values.length;O<A;O++){const I=this._values[O],b=O>0?this._prefixSum[O-1]:0;this._prefixSum[O]=b+I;for(let C=0;C<I;C++)this._indexBySum[b+C]=O}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(O,A){this._values[O]!==A&&(this._values[O]=A,this._invalidate(O))}}class M{constructor(O,A){this.index=O,this.remainder=A,this._prefixSumIndexOfResultBrand=void 0,this.index=O,this.remainder=A}}},84139:(Mt,He,c)=>{c.r(He),c.d(He,{ILanguageFeaturesService:()=>G});var u=c(81545);const G=(0,u.u1)("ILanguageFeaturesService")},84279:(Mt,He,c)=>{c.d(He,{h:()=>P});var u=c(81483),G=c(61231),U=c(32857);function P(M,w,O,A){w.tokenization.forceTokenization(O.startLineNumber);const I=w.getLanguageIdAtPosition(O.startLineNumber,O.startColumn),b=A.getLanguageConfiguration(I);if(!b)return null;const v=new U.V(w,A).getProcessedTokenContextAroundRange(O),_=v.previousLineProcessedTokens.getLineContent(),d=v.beforeRangeProcessedTokens.getLineContent(),m=v.afterRangeProcessedTokens.getLineContent(),S=b.onEnter(M,_,d,m);if(!S)return null;const D=S.indentAction;let E=S.appendText;const B=S.removeText||0;E?D===u.l.Indent&&(E="	"+E):D===u.l.Indent||D===u.l.IndentOutdent?E="	":E="";let R=(0,G.Cw)(w,O.startLineNumber,O.startColumn);return B&&(R=R.substring(0,R.length-B)),{indentAction:D,appendText:E,removeText:B,indentation:R}}},84519:(Mt,He,c)=>{c.d(He,{x:()=>ka});var u=c(12305),G=c(44727),U=function(st,n,a,f){var y=arguments.length,T=y<3?n:f===null?f=Object.getOwnPropertyDescriptor(n,a):f,J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(st,n,a,f);else for(var se=st.length-1;se>=0;se--)(J=st[se])&&(T=(y<3?J(T):y>3?J(n,a,T):J(n,a))||T);return y>3&&T&&Object.defineProperty(n,a,T),T},P=function(st,n){return function(a,f){n(a,f,st)}};let M=class{static{this.ID="editor.contrib.markerDecorations"}constructor(n,a){}dispose(){}};M=U([P(1,u.IMarkerDecorationsService)],M),(0,G.HW)(M.ID,M,0);var w=c(31938),O=c(87856),A=c(56491),I=c(60599),b=c(54021),C=c(36612),v=c(38594),_=c(93009),d=c(3223),m=c(90692),S=c(45338),D=c(36295);class E{static{this.items=[]}constructor(n,a){this.key=n,this.migrate=a}apply(n){const a=E._read(n,this.key),f=T=>E._read(n,T),y=(T,J)=>E._write(n,T,J);this.migrate(a,f,y)}static _read(n,a){if(typeof n>"u")return;const f=a.indexOf(".");if(f>=0){const y=a.substring(0,f);return this._read(n[y],a.substring(f+1))}return n[a]}static _write(n,a,f){const y=a.indexOf(".");if(y>=0){const T=a.substring(0,y);n[T]=n[T]||{},this._write(n[T],a.substring(y+1),f);return}n[a]=f}}function B(st,n){E.items.push(new E(st,n))}function R(st,n){B(st,(a,f,y)=>{if(typeof a<"u"){for(const[T,J]of n)if(a===T){y(st,J);return}}})}function z(st){E.items.forEach(n=>n.apply(st))}R("wordWrap",[[!0,"on"],[!1,"off"]]),R("lineNumbers",[[!0,"on"],[!1,"off"]]),R("cursorBlinking",[["visible","solid"]]),R("renderWhitespace",[[!0,"boundary"],[!1,"none"]]),R("renderLineHighlight",[[!0,"line"],[!1,"none"]]),R("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]),R("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]),R("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),R("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),R("autoIndent",[[!1,"advanced"],[!0,"full"]]),R("matchBrackets",[[!0,"always"],[!1,"never"]]),R("renderFinalNewline",[[!0,"on"],[!1,"off"]]),R("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]),R("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]),R("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]),B("autoClosingBrackets",(st,n,a)=>{st===!1&&(a("autoClosingBrackets","never"),typeof n("autoClosingQuotes")>"u"&&a("autoClosingQuotes","never"),typeof n("autoSurround")>"u"&&a("autoSurround","never"))}),B("renderIndentGuides",(st,n,a)=>{typeof st<"u"&&(a("renderIndentGuides",void 0),typeof n("guides.indentation")>"u"&&a("guides.indentation",!!st))}),B("highlightActiveIndentGuide",(st,n,a)=>{typeof st<"u"&&(a("highlightActiveIndentGuide",void 0),typeof n("guides.highlightActiveIndentation")>"u"&&a("guides.highlightActiveIndentation",!!st))});const W={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};B("suggest.filteredTypes",(st,n,a)=>{if(st&&typeof st=="object"){for(const f of Object.entries(W))st[f[0]]===!1&&typeof n(`suggest.${f[1]}`)>"u"&&a(`suggest.${f[1]}`,!1);a("suggest.filteredTypes",void 0)}}),B("quickSuggestions",(st,n,a)=>{if(typeof st=="boolean"){const f=st?"on":"off";a("quickSuggestions",{comments:f,strings:f,other:f})}}),B("experimental.stickyScroll.enabled",(st,n,a)=>{typeof st=="boolean"&&(a("experimental.stickyScroll.enabled",void 0),typeof n("stickyScroll.enabled")>"u"&&a("stickyScroll.enabled",st))}),B("experimental.stickyScroll.maxLineCount",(st,n,a)=>{typeof st=="number"&&(a("experimental.stickyScroll.maxLineCount",void 0),typeof n("stickyScroll.maxLineCount")>"u"&&a("stickyScroll.maxLineCount",st))}),B("codeActionsOnSave",(st,n,a)=>{if(st&&typeof st=="object"){let f=!1;const y={};for(const T of Object.entries(st))typeof T[1]=="boolean"?(f=!0,y[T[0]]=T[1]?"explicit":"never"):y[T[0]]=T[1];f&&a("codeActionsOnSave",y)}}),B("codeActionWidget.includeNearbyQuickfixes",(st,n,a)=>{typeof st=="boolean"&&(a("codeActionWidget.includeNearbyQuickfixes",void 0),typeof n("codeActionWidget.includeNearbyQuickFixes")>"u"&&a("codeActionWidget.includeNearbyQuickFixes",st))}),B("lightbulb.enabled",(st,n,a)=>{typeof st=="boolean"&&a("lightbulb.enabled",st?void 0:"off")});var $=c(29552),Q=c(8775),q=c(75942),ne=c(68869),ve=c(73240),Re=c(92327),Ae=function(st,n,a,f){var y=arguments.length,T=y<3?n:f===null?f=Object.getOwnPropertyDescriptor(n,a):f,J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(st,n,a,f);else for(var se=st.length-1;se>=0;se--)(J=st[se])&&(T=(y<3?J(T):y>3?J(n,a,T):J(n,a))||T);return y>3&&T&&Object.defineProperty(n,a,T),T},re=function(st,n){return function(a,f){n(a,f,st)}};let K=class extends I.jG{constructor(n,a,f,y,T){super(),this._accessibilityService=T,this._onDidChange=this._register(new A.vl),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new A.vl),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new Q.n0,this.isSimpleWidget=n,this.contextMenuId=a,this._containerObserver=this._register(new S.u(y,f.dimension)),this._targetWindowId=(0,w.zk)(y).vscodeWindowId,this._rawOptions=he(f),this._validatedOptions=ce.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(q.D.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register($.M.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(D.T.onDidChange(()=>this._recomputeOptions())),this._register(Re.c.getInstance((0,w.zk)(y)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const n=this._computeOptions(),a=ce.checkEquals(this.options,n);a!==null&&(this.options=n,this._onDidChangeFast.fire(a),this._onDidChange.fire(a))}_computeOptions(){const n=this._readEnvConfiguration(),a=ne._8.createFromValidatedSettings(this._validatedOptions,n.pixelRatio,this.isSimpleWidget),f=this._readFontInfo(a),y={memory:this._computeOptionsMemory,outerWidth:n.outerWidth,outerHeight:n.outerHeight-this._reservedHeight,fontInfo:f,extraEditorClassName:n.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:n.emptySelectionClipboard,pixelRatio:n.pixelRatio,tabFocusMode:$.M.getTabFocusMode(),accessibilitySupport:n.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return ce.computeOptions(this._validatedOptions,y)}_readEnvConfiguration(){return{extraEditorClassName:N(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:v.Tc||v.gm,pixelRatio:Re.c.getInstance((0,w.ZF)(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(n){return D.T.readFontInfo((0,w.ZF)(this._targetWindowId,!0).window,n)}getRawOptions(){return this._rawOptions}updateOptions(n){const a=he(n);ce.applyUpdate(this._rawOptions,a)&&(this._validatedOptions=ce.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(n){this._containerObserver.observe(n)}setIsDominatedByLongLines(n){this._isDominatedByLongLines!==n&&(this._isDominatedByLongLines=n,this._recomputeOptions())}setModelLineCount(n){const a=F(n);this._lineNumbersDigitCount!==a&&(this._lineNumbersDigitCount=a,this._recomputeOptions())}setViewLineCount(n){this._viewLineCount!==n&&(this._viewLineCount=n,this._recomputeOptions())}setReservedHeight(n){this._reservedHeight!==n&&(this._reservedHeight=n,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(n){this._glyphMarginDecorationLaneCount!==n&&(this._glyphMarginDecorationLaneCount=n,this._recomputeOptions())}};K=Ae([re(4,ve.j)],K);function F(st){let n=0;for(;st;)st=Math.floor(st/10),n++;return n||1}function N(){let st="";return!v.nr&&!v.c8&&(st+="no-user-select "),v.nr&&(st+="no-minimap-shadow ",st+="enable-user-select "),m.zx&&(st+="mac "),st}class j{constructor(){this._values=[]}_read(n){return this._values[n]}get(n){return this._values[n]}_write(n,a){this._values[n]=a}}class me{constructor(){this._values=[]}_read(n){if(n>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[n]}get(n){return this._read(n)}_write(n,a){this._values[n]=a}}class ce{static validateOptions(n){const a=new j;for(const f of Q.BE){const y=f.name==="_never_"?void 0:n[f.name];a._write(f.id,f.validate(y))}return a}static computeOptions(n,a){const f=new me;for(const y of Q.BE)f._write(y.id,y.compute(a,f,n._read(y.id)));return f}static _deepEquals(n,a){if(typeof n!="object"||typeof a!="object"||!n||!a)return n===a;if(Array.isArray(n)||Array.isArray(a))return Array.isArray(n)&&Array.isArray(a)?_.aI(n,a):!1;if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const f in n)if(!ce._deepEquals(n[f],a[f]))return!1;return!0}static checkEquals(n,a){const f=[];let y=!1;for(const T of Q.BE){const J=!ce._deepEquals(n._read(T.id),a._read(T.id));f[T.id]=J,J&&(y=!0)}return y?new Q.lw(f):null}static applyUpdate(n,a){let f=!1;for(const y of Q.BE)if(a.hasOwnProperty(y.name)){const T=y.applyUpdate(n[y.name],a[y.name]);n[y.name]=T.newValue,f=f||T.didChange}return f}}function he(st){const n=d.Go(st);return z(n),n}var Le=c(37100),Y=c(53784),ae=c(74692),Ce=c(41841);class Pe extends I.jG{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(n){return!1}onCompositionEnd(n){return!1}onConfigurationChanged(n){return!1}onCursorStateChanged(n){return!1}onDecorationsChanged(n){return!1}onFlushed(n){return!1}onFocusChanged(n){return!1}onLanguageConfigurationChanged(n){return!1}onLineMappingChanged(n){return!1}onLinesChanged(n){return!1}onLinesDeleted(n){return!1}onLinesInserted(n){return!1}onRevealRangeRequest(n){return!1}onScrollChanged(n){return!1}onThemeChanged(n){return!1}onTokensChanged(n){return!1}onTokensColorsChanged(n){return!1}onZonesChanged(n){return!1}handleEvents(n){let a=!1;for(let f=0,y=n.length;f<y;f++){const T=n[f];switch(T.type){case 0:this.onCompositionStart(T)&&(a=!0);break;case 1:this.onCompositionEnd(T)&&(a=!0);break;case 2:this.onConfigurationChanged(T)&&(a=!0);break;case 3:this.onCursorStateChanged(T)&&(a=!0);break;case 4:this.onDecorationsChanged(T)&&(a=!0);break;case 5:this.onFlushed(T)&&(a=!0);break;case 6:this.onFocusChanged(T)&&(a=!0);break;case 7:this.onLanguageConfigurationChanged(T)&&(a=!0);break;case 8:this.onLineMappingChanged(T)&&(a=!0);break;case 9:this.onLinesChanged(T)&&(a=!0);break;case 10:this.onLinesDeleted(T)&&(a=!0);break;case 11:this.onLinesInserted(T)&&(a=!0);break;case 12:this.onRevealRangeRequest(T)&&(a=!0);break;case 13:this.onScrollChanged(T)&&(a=!0);break;case 15:this.onTokensChanged(T)&&(a=!0);break;case 14:this.onThemeChanged(T)&&(a=!0);break;case 16:this.onTokensColorsChanged(T)&&(a=!0);break;case 17:this.onZonesChanged(T)&&(a=!0);break;default:}}a&&(this._shouldRender=!0)}}class ye extends Pe{constructor(n){super(),this._context=n,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class Ke{static write(n,a){n.setAttribute("data-mprt",String(a))}static read(n){const a=n.getAttribute("data-mprt");return a===null?0:parseInt(a,10)}static collect(n,a){const f=[];let y=0;for(;n&&n!==n.ownerDocument.body&&n!==a;)n.nodeType===n.ELEMENT_NODE&&(f[y++]=this.read(n)),n=n.parentElement;const T=new Uint8Array(y);for(let J=0;J<y;J++)T[J]=f[y-J-1];return T}}var qe=c(22510),Ue=c(69504),x=c(98414),it=c(23418),Ze=c(66412),_t=c(37145);class ot{constructor(n=null){this.hitTarget=n,this.type=0}}class Pt{get hitTarget(){return this.spanNode}constructor(n,a,f){this.position=n,this.spanNode=a,this.injectedText=f,this.type=1}}var Wt;(function(st){function n(a,f,y){const T=a.getPositionFromDOMInfo(f,y);return T?new Pt(T,f,null):new ot(f)}st.createFromDOMInfo=n})(Wt||(Wt={}));class Rt{constructor(n,a){this.lastViewCursorsRenderData=n,this.lastTextareaPosition=a}}class at{static _deduceRage(n,a=null){return!a&&n?new x.Q(n.lineNumber,n.column,n.lineNumber,n.column):a??null}static createUnknown(n,a,f){return{type:0,element:n,mouseColumn:a,position:f,range:this._deduceRage(f)}}static createTextarea(n,a){return{type:1,element:n,mouseColumn:a,position:null,range:null}}static createMargin(n,a,f,y,T,J){return{type:n,element:a,mouseColumn:f,position:y,range:T,detail:J}}static createViewZone(n,a,f,y,T){return{type:n,element:a,mouseColumn:f,position:y,range:this._deduceRage(y),detail:T}}static createContentText(n,a,f,y,T){return{type:6,element:n,mouseColumn:a,position:f,range:this._deduceRage(f,y),detail:T}}static createContentEmpty(n,a,f,y){return{type:7,element:n,mouseColumn:a,position:f,range:this._deduceRage(f),detail:y}}static createContentWidget(n,a,f){return{type:9,element:n,mouseColumn:a,position:null,range:null,detail:f}}static createScrollbar(n,a,f){return{type:11,element:n,mouseColumn:a,position:f,range:this._deduceRage(f)}}static createOverlayWidget(n,a,f){return{type:12,element:n,mouseColumn:a,position:null,range:null,detail:f}}static createOutsideEditor(n,a,f,y){return{type:13,element:null,mouseColumn:n,position:a,range:this._deduceRage(a),outsidePosition:f,outsideDistance:y}}static _typeToString(n){return n===1?"TEXTAREA":n===2?"GUTTER_GLYPH_MARGIN":n===3?"GUTTER_LINE_NUMBERS":n===4?"GUTTER_LINE_DECORATIONS":n===5?"GUTTER_VIEW_ZONE":n===6?"CONTENT_TEXT":n===7?"CONTENT_EMPTY":n===8?"CONTENT_VIEW_ZONE":n===9?"CONTENT_WIDGET":n===10?"OVERVIEW_RULER":n===11?"SCROLLBAR":n===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(n){return this._typeToString(n.type)+": "+n.position+" - "+n.range+" - "+JSON.stringify(n.detail)}}class Xe{static isTextArea(n){return n.length===2&&n[0]===3&&n[1]===7}static isChildOfViewLines(n){return n.length>=4&&n[0]===3&&n[3]===8}static isStrictChildOfViewLines(n){return n.length>4&&n[0]===3&&n[3]===8}static isChildOfScrollableElement(n){return n.length>=2&&n[0]===3&&n[1]===6}static isChildOfMinimap(n){return n.length>=2&&n[0]===3&&n[1]===9}static isChildOfContentWidgets(n){return n.length>=4&&n[0]===3&&n[3]===1}static isChildOfOverflowGuard(n){return n.length>=1&&n[0]===3}static isChildOfOverflowingContentWidgets(n){return n.length>=1&&n[0]===2}static isChildOfOverlayWidgets(n){return n.length>=2&&n[0]===3&&n[1]===4}static isChildOfOverflowingOverlayWidgets(n){return n.length>=1&&n[0]===5}}class pe{constructor(n,a,f){this.viewModel=n.viewModel;const y=n.configuration.options;this.layoutInfo=y.get(146),this.viewDomNode=a.viewDomNode,this.lineHeight=y.get(67),this.stickyTabStops=y.get(117),this.typicalHalfwidthCharacterWidth=y.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=f,this._context=n,this._viewHelper=a}getZoneAtCoord(n){return pe.getZoneAtCoord(this._context,n)}static getZoneAtCoord(n,a){const f=n.viewLayout.getWhitespaceAtVerticalOffset(a);if(f){const y=f.verticalOffset+f.height/2,T=n.viewModel.getLineCount();let J=null,se,be=null;return f.afterLineNumber!==T&&(be=new Ue.y(f.afterLineNumber+1,1)),f.afterLineNumber>0&&(J=new Ue.y(f.afterLineNumber,n.viewModel.getLineMaxColumn(f.afterLineNumber))),be===null?se=J:J===null?se=be:a<y?se=J:se=be,{viewZoneId:f.id,afterLineNumber:f.afterLineNumber,positionBefore:J,positionAfter:be,position:se}}return null}getFullLineRangeAtCoord(n){if(this._context.viewLayout.isAfterLines(n)){const y=this._context.viewModel.getLineCount(),T=this._context.viewModel.getLineMaxColumn(y);return{range:new x.Q(y,T,y,T),isAfterLines:!0}}const a=this._context.viewLayout.getLineNumberAtVerticalOffset(n),f=this._context.viewModel.getLineMaxColumn(a);return{range:new x.Q(a,1,a,f),isAfterLines:!1}}getLineNumberAtVerticalOffset(n){return this._context.viewLayout.getLineNumberAtVerticalOffset(n)}isAfterLines(n){return this._context.viewLayout.isAfterLines(n)}isInTopPadding(n){return this._context.viewLayout.isInTopPadding(n)}isInBottomPadding(n){return this._context.viewLayout.isInBottomPadding(n)}getVerticalOffsetForLineNumber(n){return this._context.viewLayout.getVerticalOffsetForLineNumber(n)}findAttribute(n,a){return pe._findAttribute(n,a,this._viewHelper.viewDomNode)}static _findAttribute(n,a,f){for(;n&&n!==n.ownerDocument.body;){if(n.hasAttribute&&n.hasAttribute(a))return n.getAttribute(a);if(n===f)return null;n=n.parentNode}return null}getLineWidth(n){return this._viewHelper.getLineWidth(n)}visibleRangeForPosition(n,a){return this._viewHelper.visibleRangeForPosition(n,a)}getPositionFromDOMInfo(n,a){return this._viewHelper.getPositionFromDOMInfo(n,a)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class te{constructor(n,a,f,y){this.editorPos=a,this.pos=f,this.relativePos=y,this.mouseVerticalOffset=Math.max(0,n.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=n.getCurrentScrollLeft()+this.relativePos.x-n.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<n.layoutInfo.contentLeft&&this.relativePos.x>=n.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,We._getMouseColumn(this.mouseContentHorizontalOffset,n.typicalHalfwidthCharacterWidth))}}class oe extends te{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=Ke.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(n,a,f,y,T){super(n,a,f,y),this.hitTestResult=new _t.d(()=>We.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=n,this._eventTarget=T;const J=!!this._eventTarget;this._useHitTestTarget=!J}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(n=null){return n&&n.column<this._ctx.viewModel.getLineMaxColumn(n.lineNumber)?it.A.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(n.lineNumber),n.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(n=null){return at.createUnknown(this.target,this._getMouseColumn(n),n)}fulfillTextarea(){return at.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(n,a,f,y){return at.createMargin(n,this.target,this._getMouseColumn(a),a,f,y)}fulfillViewZone(n,a,f){return at.createViewZone(n,this.target,this._getMouseColumn(a),a,f)}fulfillContentText(n,a,f){return at.createContentText(this.target,this._getMouseColumn(n),n,a,f)}fulfillContentEmpty(n,a){return at.createContentEmpty(this.target,this._getMouseColumn(n),n,a)}fulfillContentWidget(n){return at.createContentWidget(this.target,this._getMouseColumn(),n)}fulfillScrollbar(n){return at.createScrollbar(this.target,this._getMouseColumn(n),n)}fulfillOverlayWidget(n){return at.createOverlayWidget(this.target,this._getMouseColumn(),n)}}const Te={isAfterLines:!0};function Ve(st){return{isAfterLines:!1,horizontalDistanceToText:st}}class We{constructor(n,a){this._context=n,this._viewHelper=a}mouseTargetIsWidget(n){const a=n.target,f=Ke.collect(a,this._viewHelper.viewDomNode);return!!(Xe.isChildOfContentWidgets(f)||Xe.isChildOfOverflowingContentWidgets(f)||Xe.isChildOfOverlayWidgets(f)||Xe.isChildOfOverflowingOverlayWidgets(f))}createMouseTarget(n,a,f,y,T){const J=new pe(this._context,this._viewHelper,n),se=new oe(J,a,f,y,T);try{const be=We._createMouseTarget(J,se);if(be.type===6&&J.stickyTabStops&&be.position!==null){const Oe=We._snapToSoftTabBoundary(be.position,J.viewModel),Ge=x.Q.fromPositions(Oe,Oe).plusRange(be.range);return se.fulfillContentText(Oe,Ge,be.detail)}return be}catch{return se.fulfillUnknown()}}static _createMouseTarget(n,a){if(a.target===null)return a.fulfillUnknown();const f=a;let y=null;return!Xe.isChildOfOverflowGuard(a.targetPath)&&!Xe.isChildOfOverflowingContentWidgets(a.targetPath)&&!Xe.isChildOfOverflowingOverlayWidgets(a.targetPath)&&(y=y||a.fulfillUnknown()),y=y||We._hitTestContentWidget(n,f),y=y||We._hitTestOverlayWidget(n,f),y=y||We._hitTestMinimap(n,f),y=y||We._hitTestScrollbarSlider(n,f),y=y||We._hitTestViewZone(n,f),y=y||We._hitTestMargin(n,f),y=y||We._hitTestViewCursor(n,f),y=y||We._hitTestTextArea(n,f),y=y||We._hitTestViewLines(n,f),y=y||We._hitTestScrollbar(n,f),y||a.fulfillUnknown()}static _hitTestContentWidget(n,a){if(Xe.isChildOfContentWidgets(a.targetPath)||Xe.isChildOfOverflowingContentWidgets(a.targetPath)){const f=n.findAttribute(a.target,"widgetId");return f?a.fulfillContentWidget(f):a.fulfillUnknown()}return null}static _hitTestOverlayWidget(n,a){if(Xe.isChildOfOverlayWidgets(a.targetPath)||Xe.isChildOfOverflowingOverlayWidgets(a.targetPath)){const f=n.findAttribute(a.target,"widgetId");return f?a.fulfillOverlayWidget(f):a.fulfillUnknown()}return null}static _hitTestViewCursor(n,a){if(a.target){const f=n.lastRenderData.lastViewCursorsRenderData;for(const y of f)if(a.target===y.domNode)return a.fulfillContentText(y.position,null,{mightBeForeignElement:!1,injectedText:null})}if(a.isInContentArea){const f=n.lastRenderData.lastViewCursorsRenderData,y=a.mouseContentHorizontalOffset,T=a.mouseVerticalOffset;for(const J of f){if(y<J.contentLeft||y>J.contentLeft+J.width)continue;const se=n.getVerticalOffsetForLineNumber(J.position.lineNumber);if(se<=T&&T<=se+J.height)return a.fulfillContentText(J.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(n,a){const f=n.getZoneAtCoord(a.mouseVerticalOffset);if(f){const y=a.isInContentArea?8:5;return a.fulfillViewZone(y,f.position,f)}return null}static _hitTestTextArea(n,a){return Xe.isTextArea(a.targetPath)?n.lastRenderData.lastTextareaPosition?a.fulfillContentText(n.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):a.fulfillTextarea():null}static _hitTestMargin(n,a){if(a.isInMarginArea){const f=n.getFullLineRangeAtCoord(a.mouseVerticalOffset),y=f.range.getStartPosition();let T=Math.abs(a.relativePos.x);const J={isAfterLines:f.isAfterLines,glyphMarginLeft:n.layoutInfo.glyphMarginLeft,glyphMarginWidth:n.layoutInfo.glyphMarginWidth,lineNumbersWidth:n.layoutInfo.lineNumbersWidth,offsetX:T};if(T-=n.layoutInfo.glyphMarginLeft,T<=n.layoutInfo.glyphMarginWidth){const se=n.viewModel.coordinatesConverter.convertViewPositionToModelPosition(f.range.getStartPosition()),be=n.viewModel.glyphLanes.getLanesAtLine(se.lineNumber);return J.glyphMarginLane=be[Math.floor(T/n.lineHeight)],a.fulfillMargin(2,y,f.range,J)}return T-=n.layoutInfo.glyphMarginWidth,T<=n.layoutInfo.lineNumbersWidth?a.fulfillMargin(3,y,f.range,J):(T-=n.layoutInfo.lineNumbersWidth,a.fulfillMargin(4,y,f.range,J))}return null}static _hitTestViewLines(n,a){if(!Xe.isChildOfViewLines(a.targetPath))return null;if(n.isInTopPadding(a.mouseVerticalOffset))return a.fulfillContentEmpty(new Ue.y(1,1),Te);if(n.isAfterLines(a.mouseVerticalOffset)||n.isInBottomPadding(a.mouseVerticalOffset)){const y=n.viewModel.getLineCount(),T=n.viewModel.getLineMaxColumn(y);return a.fulfillContentEmpty(new Ue.y(y,T),Te)}if(Xe.isStrictChildOfViewLines(a.targetPath)){const y=n.getLineNumberAtVerticalOffset(a.mouseVerticalOffset);if(n.viewModel.getLineLength(y)===0){const J=n.getLineWidth(y),se=Ve(a.mouseContentHorizontalOffset-J);return a.fulfillContentEmpty(new Ue.y(y,1),se)}const T=n.getLineWidth(y);if(a.mouseContentHorizontalOffset>=T){const J=Ve(a.mouseContentHorizontalOffset-T),se=new Ue.y(y,n.viewModel.getLineMaxColumn(y));return a.fulfillContentEmpty(se,J)}}const f=a.hitTestResult.value;return f.type===1?We.createMouseTargetFromHitTestPosition(n,a,f.spanNode,f.position,f.injectedText):a.wouldBenefitFromHitTestTargetSwitch?(a.switchToHitTestTarget(),this._createMouseTarget(n,a)):a.fulfillUnknown()}static _hitTestMinimap(n,a){if(Xe.isChildOfMinimap(a.targetPath)){const f=n.getLineNumberAtVerticalOffset(a.mouseVerticalOffset),y=n.viewModel.getLineMaxColumn(f);return a.fulfillScrollbar(new Ue.y(f,y))}return null}static _hitTestScrollbarSlider(n,a){if(Xe.isChildOfScrollableElement(a.targetPath)&&a.target&&a.target.nodeType===1){const f=a.target.className;if(f&&/\b(slider|scrollbar)\b/.test(f)){const y=n.getLineNumberAtVerticalOffset(a.mouseVerticalOffset),T=n.viewModel.getLineMaxColumn(y);return a.fulfillScrollbar(new Ue.y(y,T))}}return null}static _hitTestScrollbar(n,a){if(Xe.isChildOfScrollableElement(a.targetPath)){const f=n.getLineNumberAtVerticalOffset(a.mouseVerticalOffset),y=n.viewModel.getLineMaxColumn(f);return a.fulfillScrollbar(new Ue.y(f,y))}return null}getMouseColumn(n){const a=this._context.configuration.options,f=a.get(146),y=this._context.viewLayout.getCurrentScrollLeft()+n.x-f.contentLeft;return We._getMouseColumn(y,a.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(n,a){return n<0?1:Math.round(n/a)+1}static createMouseTargetFromHitTestPosition(n,a,f,y,T){const J=y.lineNumber,se=y.column,be=n.getLineWidth(J);if(a.mouseContentHorizontalOffset>be){const Gt=Ve(a.mouseContentHorizontalOffset-be);return a.fulfillContentEmpty(y,Gt)}const Oe=n.visibleRangeForPosition(J,se);if(!Oe)return a.fulfillUnknown(y);const Ge=Oe.left;if(Math.abs(a.mouseContentHorizontalOffset-Ge)<1)return a.fulfillContentText(y,null,{mightBeForeignElement:!!T,injectedText:T});const je=[];if(je.push({offset:Oe.left,column:se}),se>1){const Gt=n.visibleRangeForPosition(J,se-1);Gt&&je.push({offset:Gt.left,column:se-1})}const nt=n.viewModel.getLineMaxColumn(J);if(se<nt){const Gt=n.visibleRangeForPosition(J,se+1);Gt&&je.push({offset:Gt.left,column:se+1})}je.sort((Gt,ti)=>Gt.offset-ti.offset);const lt=a.pos.toClientCoordinates(w.zk(n.viewDomNode)),bt=f.getBoundingClientRect(),xt=bt.left<=lt.clientX&&lt.clientX<=bt.right;let At=null;for(let Gt=1;Gt<je.length;Gt++){const ti=je[Gt-1],li=je[Gt];if(ti.offset<=a.mouseContentHorizontalOffset&&a.mouseContentHorizontalOffset<=li.offset){At=new x.Q(J,ti.column,J,li.column);const ki=Math.abs(ti.offset-a.mouseContentHorizontalOffset),Ti=Math.abs(li.offset-a.mouseContentHorizontalOffset);y=ki<Ti?new Ue.y(J,ti.column):new Ue.y(J,li.column);break}}return a.fulfillContentText(y,At,{mightBeForeignElement:!xt||!!T,injectedText:T})}static _doHitTestWithCaretRangeFromPoint(n,a){const f=n.getLineNumberAtVerticalOffset(a.mouseVerticalOffset),y=n.getVerticalOffsetForLineNumber(f),T=y+n.lineHeight;if(!(f===n.viewModel.getLineCount()&&a.mouseVerticalOffset>T)){const se=Math.floor((y+T)/2);let be=a.pos.y+(se-a.mouseVerticalOffset);be<=a.editorPos.y&&(be=a.editorPos.y+1),be>=a.editorPos.y+a.editorPos.height&&(be=a.editorPos.y+a.editorPos.height-1);const Oe=new Ce.nz(a.pos.x,be),Ge=this._actualDoHitTestWithCaretRangeFromPoint(n,Oe.toClientCoordinates(w.zk(n.viewDomNode)));if(Ge.type===1)return Ge}return this._actualDoHitTestWithCaretRangeFromPoint(n,a.pos.toClientCoordinates(w.zk(n.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(n,a){const f=w.jG(n.viewDomNode);let y;if(f?typeof f.caretRangeFromPoint>"u"?y=dt(f,a.clientX,a.clientY):y=f.caretRangeFromPoint(a.clientX,a.clientY):y=n.viewDomNode.ownerDocument.caretRangeFromPoint(a.clientX,a.clientY),!y||!y.startContainer)return new ot;const T=y.startContainer;if(T.nodeType===T.TEXT_NODE){const J=T.parentNode,se=J?J.parentNode:null,be=se?se.parentNode:null;return(be&&be.nodeType===be.ELEMENT_NODE?be.className:null)===qe.Gb.CLASS_NAME?Wt.createFromDOMInfo(n,J,y.startOffset):new ot(T.parentNode)}else if(T.nodeType===T.ELEMENT_NODE){const J=T.parentNode,se=J?J.parentNode:null;return(se&&se.nodeType===se.ELEMENT_NODE?se.className:null)===qe.Gb.CLASS_NAME?Wt.createFromDOMInfo(n,T,T.textContent.length):new ot(T)}return new ot}static _doHitTestWithCaretPositionFromPoint(n,a){const f=n.viewDomNode.ownerDocument.caretPositionFromPoint(a.clientX,a.clientY);if(f.offsetNode.nodeType===f.offsetNode.TEXT_NODE){const y=f.offsetNode.parentNode,T=y?y.parentNode:null,J=T?T.parentNode:null;return(J&&J.nodeType===J.ELEMENT_NODE?J.className:null)===qe.Gb.CLASS_NAME?Wt.createFromDOMInfo(n,f.offsetNode.parentNode,f.offset):new ot(f.offsetNode.parentNode)}if(f.offsetNode.nodeType===f.offsetNode.ELEMENT_NODE){const y=f.offsetNode.parentNode,T=y&&y.nodeType===y.ELEMENT_NODE?y.className:null,J=y?y.parentNode:null,se=J&&J.nodeType===J.ELEMENT_NODE?J.className:null;if(T===qe.Gb.CLASS_NAME){const be=f.offsetNode.childNodes[Math.min(f.offset,f.offsetNode.childNodes.length-1)];if(be)return Wt.createFromDOMInfo(n,be,0)}else if(se===qe.Gb.CLASS_NAME)return Wt.createFromDOMInfo(n,f.offsetNode,0)}return new ot(f.offsetNode)}static _snapToSoftTabBoundary(n,a){const f=a.getLineContent(n.lineNumber),{tabSize:y}=a.model.getOptions(),T=Ze.s.atomicPosition(f,n.column-1,y,2);return T!==-1?new Ue.y(n.lineNumber,T+1):n}static doHitTest(n,a){let f=new ot;if(typeof n.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?f=this._doHitTestWithCaretRangeFromPoint(n,a):n.viewDomNode.ownerDocument.caretPositionFromPoint&&(f=this._doHitTestWithCaretPositionFromPoint(n,a.pos.toClientCoordinates(w.zk(n.viewDomNode)))),f.type===1){const y=n.viewModel.getInjectedTextAt(f.position),T=n.viewModel.normalizePosition(f.position,2);(y||!T.equals(f.position))&&(f=new Pt(T,f.spanNode,y))}return f}}function dt(st,n,a){const f=document.createRange();let y=st.elementFromPoint(n,a);if(y!==null){for(;y&&y.firstChild&&y.firstChild.nodeType!==y.firstChild.TEXT_NODE&&y.lastChild&&y.lastChild.firstChild;)y=y.lastChild;const T=y.getBoundingClientRect(),J=w.zk(y),se=J.getComputedStyle(y,null).getPropertyValue("font-style"),be=J.getComputedStyle(y,null).getPropertyValue("font-variant"),Oe=J.getComputedStyle(y,null).getPropertyValue("font-weight"),Ge=J.getComputedStyle(y,null).getPropertyValue("font-size"),je=J.getComputedStyle(y,null).getPropertyValue("line-height"),nt=J.getComputedStyle(y,null).getPropertyValue("font-family"),lt=`${se} ${be} ${Oe} ${Ge}/${je} ${nt}`,bt=y.innerText;let xt=T.left,At=0,Gt;if(n>T.left+T.width)At=bt.length;else{const ti=Ye.getInstance();for(let li=0;li<bt.length+1;li++){if(Gt=ti.getCharWidth(bt.charAt(li),lt)/2,xt+=Gt,n<xt){At=li;break}xt+=Gt}}f.setStart(y.firstChild,At),f.setEnd(y.firstChild,At)}return f}class Ye{static{this._INSTANCE=null}static getInstance(){return Ye._INSTANCE||(Ye._INSTANCE=new Ye),Ye._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(n,a){const f=n+a;if(this._cache[f])return this._cache[f];const y=this._canvas.getContext("2d");y.font=a;const J=y.measureText(n).width;return this._cache[f]=J,J}}var mt=c(926),Dt=c(7069),Se=c(42008),we=c(25334),Xt=c(47545),ri=c(13511);class ke extends Pe{constructor(n,a,f){super(),this._mouseLeaveMonitor=null,this._context=n,this.viewController=a,this.viewHelper=f,this.mouseTargetFactory=new We(this._context,f),this._mouseDownOperation=this._register(new Z(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(J,se)=>this._createMouseTarget(J,se),J=>this._getMouseColumn(J))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(146).height;const y=new Ce.$z(this.viewHelper.viewDomNode);this._register(y.onContextMenu(this.viewHelper.viewDomNode,J=>this._onContextMenu(J,!0))),this._register(y.onMouseMove(this.viewHelper.viewDomNode,J=>{this._onMouseMove(J),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=w.ko(this.viewHelper.viewDomNode.ownerDocument,"mousemove",se=>{this.viewHelper.viewDomNode.contains(se.target)||this._onMouseLeave(new Ce.dO(se,!1,this.viewHelper.viewDomNode))}))})),this._register(y.onMouseUp(this.viewHelper.viewDomNode,J=>this._onMouseUp(J))),this._register(y.onMouseLeave(this.viewHelper.viewDomNode,J=>this._onMouseLeave(J)));let T=0;this._register(y.onPointerDown(this.viewHelper.viewDomNode,(J,se)=>{T=se})),this._register(w.ko(this.viewHelper.viewDomNode,w.Bx.POINTER_UP,J=>{this._mouseDownOperation.onPointerUp()})),this._register(y.onMouseDown(this.viewHelper.viewDomNode,J=>this._onMouseDown(J,T))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const n=ri.QC.INSTANCE;let a=0,f=q.D.getZoomLevel(),y=!1,T=0;const J=be=>{if(this.viewController.emitMouseWheel(be),!this._context.configuration.options.get(76))return;const Oe=new we.$(be);if(n.acceptStandardWheelEvent(Oe),n.isPhysicalMouseWheel()){if(se(be)){const Ge=q.D.getZoomLevel(),je=Oe.deltaY>0?1:-1;q.D.setZoomLevel(Ge+je),Oe.preventDefault(),Oe.stopPropagation()}}else Date.now()-a>50&&(f=q.D.getZoomLevel(),y=se(be),T=0),a=Date.now(),T+=Oe.deltaY,y&&(q.D.setZoomLevel(f+T/5),Oe.preventDefault(),Oe.stopPropagation())};this._register(w.ko(this.viewHelper.viewDomNode,w.Bx.MOUSE_WHEEL,J,{capture:!0,passive:!1}));function se(be){return m.zx?(be.metaKey||be.ctrlKey)&&!be.shiftKey&&!be.altKey:be.ctrlKey&&!be.metaKey&&!be.shiftKey&&!be.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(n){if(n.hasChanged(146)){const a=this._context.configuration.options.get(146).height;this._height!==a&&(this._height=a,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(n){return this._mouseDownOperation.onCursorStateChanged(n),!1}onFocusChanged(n){return!1}getTargetAtClientPoint(n,a){const y=new Ce.Hh(n,a).toPageCoordinates(w.zk(this.viewHelper.viewDomNode)),T=(0,Ce.wt)(this.viewHelper.viewDomNode);if(y.y<T.y||y.y>T.y+T.height||y.x<T.x||y.x>T.x+T.width)return null;const J=(0,Ce.i_)(this.viewHelper.viewDomNode,T,y);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),T,y,J,null)}_createMouseTarget(n,a){let f=n.target;if(!this.viewHelper.viewDomNode.contains(f)){const y=w.jG(this.viewHelper.viewDomNode);y&&(f=y.elementsFromPoint(n.posx,n.posy).find(T=>this.viewHelper.viewDomNode.contains(T)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),n.editorPos,n.pos,n.relativePos,a?f:null)}_getMouseColumn(n){return this.mouseTargetFactory.getMouseColumn(n.relativePos)}_onContextMenu(n,a){this.viewController.emitContextMenu({event:n,target:this._createMouseTarget(n,a)})}_onMouseMove(n){this.mouseTargetFactory.mouseTargetIsWidget(n)||n.preventDefault(),!(this._mouseDownOperation.isActive()||n.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:n,target:this._createMouseTarget(n,!0)})}_onMouseLeave(n){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:n,target:null})}_onMouseUp(n){this.viewController.emitMouseUp({event:n,target:this._createMouseTarget(n,!0)})}_onMouseDown(n,a){const f=this._createMouseTarget(n,!0),y=f.type===6||f.type===7,T=f.type===2||f.type===3||f.type===4,J=f.type===3,se=this._context.configuration.options.get(110),be=f.type===8||f.type===5,Oe=f.type===9;let Ge=n.leftButton||n.middleButton;m.zx&&n.leftButton&&n.ctrlKey&&(Ge=!1);const je=()=>{n.preventDefault(),this.viewHelper.focusTextArea()};if(Ge&&(y||J&&se))je(),this._mouseDownOperation.start(f.type,n,a);else if(T)n.preventDefault();else if(be){const nt=f.detail;Ge&&this.viewHelper.shouldSuppressMouseDownOnViewZone(nt.viewZoneId)&&(je(),this._mouseDownOperation.start(f.type,n,a),n.preventDefault())}else Oe&&this.viewHelper.shouldSuppressMouseDownOnWidget(f.detail)&&(je(),n.preventDefault());this.viewController.emitMouseDown({event:n,target:f})}}class Z extends I.jG{constructor(n,a,f,y,T,J){super(),this._context=n,this._viewController=a,this._viewHelper=f,this._mouseTargetFactory=y,this._createMouseTarget=T,this._getMouseColumn=J,this._mouseMoveMonitor=this._register(new Ce.BA(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new Fe(this._context,this._viewHelper,this._mouseTargetFactory,(se,be,Oe)=>this._dispatchMouse(se,be,Oe))),this._mouseState=new et,this._currentSelection=new Xt.L(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(n){this._lastMouseEvent=n,this._mouseState.setModifiers(n);const a=this._findMousePosition(n,!1);a&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:n,target:a}):a.type===13&&(a.outsidePosition==="above"||a.outsidePosition==="below")?this._topBottomDragScrolling.start(a,n):(this._topBottomDragScrolling.stop(),this._dispatchMouse(a,!0,1)))}start(n,a,f){this._lastMouseEvent=a,this._mouseState.setStartedOnLineNumbers(n===3),this._mouseState.setStartButtons(a),this._mouseState.setModifiers(a);const y=this._findMousePosition(a,!0);if(!y||!y.position)return;this._mouseState.trySetCount(a.detail,y.position),a.detail=this._mouseState.count;const T=this._context.configuration.options;if(!T.get(92)&&T.get(35)&&!T.get(22)&&!this._mouseState.altKey&&a.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&y.type===6&&y.position&&this._currentSelection.containsPosition(y.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,f,a.buttons,J=>this._onMouseDownThenMove(J),J=>{const se=this._findMousePosition(this._lastMouseEvent,!1);w.kx(J)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:se?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(y,a.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,f,a.buttons,J=>this._onMouseDownThenMove(J),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(n){this._currentSelection=n.selections[0]}_getPositionOutsideEditor(n){const a=n.editorPos,f=this._context.viewModel,y=this._context.viewLayout,T=this._getMouseColumn(n);if(n.posy<a.y){const se=a.y-n.posy,be=Math.max(y.getCurrentScrollTop()-se,0),Oe=pe.getZoneAtCoord(this._context,be);if(Oe){const je=this._helpPositionJumpOverViewZone(Oe);if(je)return at.createOutsideEditor(T,je,"above",se)}const Ge=y.getLineNumberAtVerticalOffset(be);return at.createOutsideEditor(T,new Ue.y(Ge,1),"above",se)}if(n.posy>a.y+a.height){const se=n.posy-a.y-a.height,be=y.getCurrentScrollTop()+n.relativePos.y,Oe=pe.getZoneAtCoord(this._context,be);if(Oe){const je=this._helpPositionJumpOverViewZone(Oe);if(je)return at.createOutsideEditor(T,je,"below",se)}const Ge=y.getLineNumberAtVerticalOffset(be);return at.createOutsideEditor(T,new Ue.y(Ge,f.getLineMaxColumn(Ge)),"below",se)}const J=y.getLineNumberAtVerticalOffset(y.getCurrentScrollTop()+n.relativePos.y);if(n.posx<a.x){const se=a.x-n.posx;return at.createOutsideEditor(T,new Ue.y(J,1),"left",se)}if(n.posx>a.x+a.width){const se=n.posx-a.x-a.width;return at.createOutsideEditor(T,new Ue.y(J,f.getLineMaxColumn(J)),"right",se)}return null}_findMousePosition(n,a){const f=this._getPositionOutsideEditor(n);if(f)return f;const y=this._createMouseTarget(n,a);if(!y.position)return null;if(y.type===8||y.type===5){const J=this._helpPositionJumpOverViewZone(y.detail);if(J)return at.createViewZone(y.type,y.element,y.mouseColumn,J,y.detail)}return y}_helpPositionJumpOverViewZone(n){const a=new Ue.y(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),f=n.positionBefore,y=n.positionAfter;return f&&y?f.isBefore(a)?f:y:null}_dispatchMouse(n,a,f){n.position&&this._viewController.dispatchMouse({position:n.position,mouseColumn:n.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:f,inSelectionMode:a,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:n.type===6&&n.detail.injectedText!==null})}}class Fe extends I.jG{constructor(n,a,f,y){super(),this._context=n,this._viewHelper=a,this._mouseTargetFactory=f,this._dispatchMouse=y,this._operation=null}dispose(){super.dispose(),this.stop()}start(n,a){this._operation?this._operation.setPosition(n,a):this._operation=new pt(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,n,a)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class pt extends I.jG{constructor(n,a,f,y,T,J){super(),this._context=n,this._viewHelper=a,this._mouseTargetFactory=f,this._dispatchMouse=y,this._position=T,this._mouseEvent=J,this._lastTime=Date.now(),this._animationFrameDisposable=w.PG(w.zk(J.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(n,a){this._position=n,this._mouseEvent=a}_tick(){const n=Date.now(),a=n-this._lastTime;return this._lastTime=n,a}_getScrollSpeed(){const n=this._context.configuration.options.get(67),a=this._context.configuration.options.get(146).height/n,f=this._position.outsideDistance/n;return f<=1.5?Math.max(30,a*(1+f)):f<=3?Math.max(60,a*(2+f)):Math.max(200,a*(7+f))}_execute(){const n=this._context.configuration.options.get(67),a=this._getScrollSpeed(),f=this._tick(),y=a*(f/1e3)*n,T=this._position.outsidePosition==="above"?-y:y;this._context.viewModel.viewLayout.deltaScrollNow(0,T),this._viewHelper.renderNow();const J=this._context.viewLayout.getLinesViewportData(),se=this._position.outsidePosition==="above"?J.startLineNumber:J.endLineNumber;let be;{const Oe=(0,Ce.wt)(this._viewHelper.viewDomNode),Ge=this._context.configuration.options.get(146).horizontalScrollbarHeight,je=new Ce.nz(this._mouseEvent.pos.x,Oe.y+Oe.height-Ge-.1),nt=(0,Ce.i_)(this._viewHelper.viewDomNode,Oe,je);be=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),Oe,je,nt,null)}(!be.position||be.position.lineNumber!==se)&&(this._position.outsidePosition==="above"?be=at.createOutsideEditor(this._position.mouseColumn,new Ue.y(se,1),"above",this._position.outsideDistance):be=at.createOutsideEditor(this._position.mouseColumn,new Ue.y(se,this._context.viewModel.getLineMaxColumn(se)),"below",this._position.outsideDistance)),this._dispatchMouse(be,!0,2),this._animationFrameDisposable=w.PG(w.zk(be.element),()=>this._execute())}}class et{static{this.CLEAR_MOUSE_DOWN_COUNT_TIME=400}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(n){this._altKey=n.altKey,this._ctrlKey=n.ctrlKey,this._metaKey=n.metaKey,this._shiftKey=n.shiftKey}setStartButtons(n){this._leftButton=n.leftButton,this._middleButton=n.middleButton}setStartedOnLineNumbers(n){this._startedOnLineNumbers=n}trySetCount(n,a){const f=new Date().getTime();f-this._lastSetMouseDownCountTime>et.CLEAR_MOUSE_DOWN_COUNT_TIME&&(n=1),this._lastSetMouseDownCountTime=f,n>this._lastMouseDownCount+1&&(n=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(a)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=a,this._lastMouseDownCount=Math.min(n,this._lastMouseDownPositionEqualCount)}}var Zt=c(81669);class bi extends ke{constructor(n,a,f){super(n,a,f),this._register(Dt.q.addTarget(this.viewHelper.linesContentDomNode)),this._register(w.ko(this.viewHelper.linesContentDomNode,Dt.B.Tap,T=>this.onTap(T))),this._register(w.ko(this.viewHelper.linesContentDomNode,Dt.B.Change,T=>this.onChange(T))),this._register(w.ko(this.viewHelper.linesContentDomNode,Dt.B.Contextmenu,T=>this._onContextMenu(new Ce.dO(T,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(w.ko(this.viewHelper.linesContentDomNode,"pointerdown",T=>{const J=T.pointerType;if(J==="mouse"){this._lastPointerType="mouse";return}else J==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const y=new Ce.DW(this.viewHelper.viewDomNode);this._register(y.onPointerMove(this.viewHelper.viewDomNode,T=>this._onMouseMove(T))),this._register(y.onPointerUp(this.viewHelper.viewDomNode,T=>this._onMouseUp(T))),this._register(y.onPointerLeave(this.viewHelper.viewDomNode,T=>this._onMouseLeave(T))),this._register(y.onPointerDown(this.viewHelper.viewDomNode,(T,J)=>this._onMouseDown(T,J)))}onTap(n){!n.initialTarget||!this.viewHelper.linesContentDomNode.contains(n.initialTarget)||(n.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(n,!1))}onChange(n){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-n.translationX,-n.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(n,!0)}_dispatchGesture(n,a){const f=this._createMouseTarget(new Ce.dO(n,!1,this.viewHelper.viewDomNode),!1);f.position&&this.viewController.dispatchMouse({position:f.position,mouseColumn:f.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:n.tapCount,inSelectionMode:a,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:f.type===6&&f.detail.injectedText!==null})}_onMouseDown(n,a){n.browserEvent.pointerType!=="touch"&&super._onMouseDown(n,a)}}class ci extends ke{constructor(n,a,f){super(n,a,f),this._register(Dt.q.addTarget(this.viewHelper.linesContentDomNode)),this._register(w.ko(this.viewHelper.linesContentDomNode,Dt.B.Tap,y=>this.onTap(y))),this._register(w.ko(this.viewHelper.linesContentDomNode,Dt.B.Change,y=>this.onChange(y))),this._register(w.ko(this.viewHelper.linesContentDomNode,Dt.B.Contextmenu,y=>this._onContextMenu(new Ce.dO(y,!1,this.viewHelper.viewDomNode),!1)))}onTap(n){n.preventDefault(),this.viewHelper.focusTextArea();const a=this._createMouseTarget(new Ce.dO(n,!1,this.viewHelper.viewDomNode),!1);if(a.position){const f=document.createEvent("CustomEvent");f.initEvent(Zt.$D.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(f),this.viewController.moveTo(a.position,1)}}onChange(n){this._context.viewModel.viewLayout.deltaScrollNow(-n.translationX,-n.translationY)}}class Oi extends I.jG{constructor(n,a,f){super(),(m.un||m.m0&&m.Fr)&&mt.e.pointerEvents?this.handler=this._register(new bi(n,a,f)):Se.G.TouchEvent?this.handler=this._register(new ci(n,a,f)):this.handler=this._register(new ke(n,a,f))}getTargetAtClientPoint(n,a){return this.handler.getTargetAtClientPoint(n,a)}}var Ii=c(45573),yi=c(85565),Vt=c(5656);class _n extends Pe{}var oi=c(41403),Ne=c(54656);class gt extends _n{static{this.CLASS_NAME="line-numbers"}constructor(n){super(),this._context=n,this._readConfig(),this._lastCursorModelPosition=new Ue.y(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const n=this._context.configuration.options;this._lineHeight=n.get(67);const a=n.get(68);this._renderLineNumbers=a.renderType,this._renderCustomLineNumbers=a.renderFn,this._renderFinalNewline=n.get(96);const f=n.get(146);this._lineNumbersLeft=f.lineNumbersLeft,this._lineNumbersWidth=f.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(n){return this._readConfig(),!0}onCursorStateChanged(n){const a=n.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(a);let f=!1;return this._activeLineNumber!==a.lineNumber&&(this._activeLineNumber=a.lineNumber,f=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(f=!0),f}onFlushed(n){return!0}onLinesChanged(n){return!0}onLinesDeleted(n){return!0}onLinesInserted(n){return!0}onScrollChanged(n){return n.scrollTopChanged}onZonesChanged(n){return!0}onDecorationsChanged(n){return n.affectsLineNumber}_getLineRenderLineNumber(n){const a=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Ue.y(n,1));if(a.column!==1)return"";const f=a.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(f);if(this._renderLineNumbers===2){const y=Math.abs(this._lastCursorModelPosition.lineNumber-f);return y===0?'<span class="relative-current-line-number">'+f+"</span>":String(y)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===f||f%10===0)return String(f);const y=this._context.viewModel.getLineCount();return f===y?String(f):""}return String(f)}prepareRender(n){if(this._renderLineNumbers===0){this._renderResult=null;return}const a=m.j9?this._lineHeight%2===0?" lh-even":" lh-odd":"",f=n.visibleRange.startLineNumber,y=n.visibleRange.endLineNumber,T=this._context.viewModel.getDecorationsInViewport(n.visibleRange).filter(Oe=>!!Oe.options.lineNumberClassName);T.sort((Oe,Ge)=>x.Q.compareRangesUsingEnds(Oe.range,Ge.range));let J=0;const se=this._context.viewModel.getLineCount(),be=[];for(let Oe=f;Oe<=y;Oe++){const Ge=Oe-f;let je=this._getLineRenderLineNumber(Oe),nt="";for(;J<T.length&&T[J].range.endLineNumber<Oe;)J++;for(let lt=J;lt<T.length;lt++){const{range:bt,options:xt}=T[lt];bt.startLineNumber<=Oe&&(nt+=" "+xt.lineNumberClassName)}if(!je&&!nt){be[Ge]="";continue}Oe===se&&this._context.viewModel.getLineLength(Oe)===0&&(this._renderFinalNewline==="off"&&(je=""),this._renderFinalNewline==="dimmed"&&(nt+=" dimmed-line-number")),Oe===this._activeLineNumber&&(nt+=" active-line-number"),be[Ge]=`<div class="${gt.CLASS_NAME}${a}${nt}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${je}</div>`}this._renderResult=be}render(n,a){if(!this._renderResult)return"";const f=a-n;return f<0||f>=this._renderResult.length?"":this._renderResult[f]}}(0,oi.zy)((st,n)=>{const a=st.getColor(Ne.Qt),f=st.getColor(Ne.JB);f?n.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${f}; }`):a&&n.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${a.transparent(.4)}; }`)});class ei extends ye{static{this.CLASS_NAME="glyph-margin"}static{this.OUTER_CLASS_NAME="margin"}constructor(n){super(n);const a=this._context.configuration.options,f=a.get(146);this._canUseLayerHinting=!a.get(32),this._contentLeft=f.contentLeft,this._glyphMarginLeft=f.glyphMarginLeft,this._glyphMarginWidth=f.glyphMarginWidth,this._domNode=(0,Y.Z)(document.createElement("div")),this._domNode.setClassName(ei.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=(0,Y.Z)(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(ei.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(n){const a=this._context.configuration.options,f=a.get(146);return this._canUseLayerHinting=!a.get(32),this._contentLeft=f.contentLeft,this._glyphMarginLeft=f.glyphMarginLeft,this._glyphMarginWidth=f.glyphMarginWidth,!0}onScrollChanged(n){return super.onScrollChanged(n)||n.scrollTopChanged}prepareRender(n){}render(n){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const a=n.scrollTop-n.bigNumbersDelta;this._domNode.setTop(-a);const f=Math.min(n.scrollHeight,1e6);this._domNode.setHeight(f),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(f)}}var ai=c(53605);const Ci="monaco-mouse-cursor-text";var wi=c(9709),ji=c(34920),Di=c(91194),dn=c(87386),nn=c(81545),Dn=function(st,n,a,f){var y=arguments.length,T=y<3?n:f===null?f=Object.getOwnPropertyDescriptor(n,a):f,J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(st,n,a,f);else for(var se=st.length-1;se>=0;se--)(J=st[se])&&(T=(y<3?J(T):y>3?J(n,a,T):J(n,a))||T);return y>3&&T&&Object.defineProperty(n,a,T),T},Mi=function(st,n){return function(a,f){n(a,f,st)}};class Zn{constructor(n,a,f,y,T){this._context=n,this.modelLineNumber=a,this.distanceToModelLineStart=f,this.widthOfHiddenLineTextBefore=y,this.distanceToModelLineEnd=T,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(n){const a=new Ue.y(this.modelLineNumber,this.distanceToModelLineStart+1),f=new Ue.y(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(a),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(f),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=n.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=n.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(n){return this._previousPresentation||(n?this._previousPresentation=n:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const us=v.gm;let xs=class extends ye{constructor(n,a,f,y,T){super(n),this._keybindingService=y,this._instantiationService=T,this._primaryCursorPosition=new Ue.y(1,1),this._primaryCursorVisibleRange=null,this._viewController=a,this._visibleRangeProvider=f,this._scrollLeft=0,this._scrollTop=0;const J=this._context.configuration.options,se=J.get(146);this._setAccessibilityOptions(J),this._contentLeft=se.contentLeft,this._contentWidth=se.contentWidth,this._contentHeight=se.height,this._fontInfo=J.get(50),this._lineHeight=J.get(67),this._emptySelectionClipboard=J.get(37),this._copyWithSyntaxHighlighting=J.get(25),this._visibleTextArea=null,this._selections=[new Xt.L(1,1,1,1)],this._modelSelections=[new Xt.L(1,1,1,1)],this._lastRenderPosition=null,this.textArea=(0,Y.Z)(document.createElement("textarea")),Ke.write(this.textArea,7),this.textArea.setClassName(`inputarea ${Ci}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:be}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${be*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(J)),this.textArea.setAttribute("aria-required",J.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(J.get(125))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",Ii.kg("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",J.get(92)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=(0,Y.Z)(document.createElement("div")),this.textAreaCover.setPosition("absolute");const Oe={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:nt=>this._context.viewModel.getLineMaxColumn(nt),getValueInRange:(nt,lt)=>this._context.viewModel.getValueInRange(nt,lt),getValueLengthInRange:(nt,lt)=>this._context.viewModel.getValueLengthInRange(nt,lt),modifyPosition:(nt,lt)=>this._context.viewModel.modifyPosition(nt,lt)},Ge={getDataToCopy:()=>{const nt=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,m.uF),lt=this._context.viewModel.model.getEOL(),bt=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),xt=Array.isArray(nt)?nt:null,At=Array.isArray(nt)?nt.join(lt):nt;let Gt,ti=null;if(Zt.Eq.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&At.length<65536){const li=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);li&&(Gt=li.html,ti=li.mode)}return{isFromEmptySelection:bt,multicursorText:xt,text:At,html:Gt,mode:ti}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const nt=this._selections[0];if(m.zx&&nt.isEmpty()){const bt=nt.getStartPosition();let xt=this._getWordBeforePosition(bt);if(xt.length===0&&(xt=this._getCharacterBeforePosition(bt)),xt.length>0)return new Vt._O(xt,xt.length,xt.length,x.Q.fromPositions(bt),0)}if(m.zx&&!nt.isEmpty()&&Oe.getValueLengthInRange(nt,0)<500){const bt=Oe.getValueInRange(nt,0);return new Vt._O(bt,0,bt.length,nt,0)}if(v.nr&&!nt.isEmpty()){const bt="vscode-placeholder";return new Vt._O(bt,0,bt.length,null,void 0)}return Vt._O.EMPTY}if(v.m0){const nt=this._selections[0];if(nt.isEmpty()){const lt=nt.getStartPosition(),[bt,xt]=this._getAndroidWordAtPosition(lt);if(bt.length>0)return new Vt._O(bt,xt,xt,x.Q.fromPositions(lt),0)}return Vt._O.EMPTY}return Vt.Al.fromEditorSelection(Oe,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(nt,lt,bt)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(nt,lt,bt)},je=this._register(new Zt.M0(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(Zt.No,Ge,je,m.OS,{isAndroid:v.m0,isChrome:v.H8,isFirefox:v.gm,isSafari:v.nr})),this._register(this._textAreaInput.onKeyDown(nt=>{this._viewController.emitKeyDown(nt)})),this._register(this._textAreaInput.onKeyUp(nt=>{this._viewController.emitKeyUp(nt)})),this._register(this._textAreaInput.onPaste(nt=>{let lt=!1,bt=null,xt=null;nt.metadata&&(lt=this._emptySelectionClipboard&&!!nt.metadata.isFromEmptySelection,bt=typeof nt.metadata.multicursorText<"u"?nt.metadata.multicursorText:null,xt=nt.metadata.mode),this._viewController.paste(nt.text,lt,bt,xt)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(nt=>{nt.replacePrevCharCnt||nt.replaceNextCharCnt||nt.positionDelta?(Vt.Hf,this._viewController.compositionType(nt.text,nt.replacePrevCharCnt,nt.replaceNextCharCnt,nt.positionDelta)):(Vt.Hf,this._viewController.type(nt.text))})),this._register(this._textAreaInput.onSelectionChangeRequest(nt=>{this._viewController.setSelection(nt)})),this._register(this._textAreaInput.onCompositionStart(nt=>{const lt=this.textArea.domNode,bt=this._modelSelections[0],{distanceToModelLineStart:xt,widthOfHiddenTextBefore:At}=(()=>{const ti=lt.value.substring(0,Math.min(lt.selectionStart,lt.selectionEnd)),li=ti.lastIndexOf(`
`),ki=ti.substring(li+1),Ti=ki.lastIndexOf("	"),Yi=ki.length-Ti-1,Ai=bt.getStartPosition(),Ji=Math.min(Ai.column-1,Yi),xi=Ai.column-1-Ji,cn=ki.substring(0,ki.length-Ji),{tabSize:rn}=this._context.viewModel.model.getOptions(),gn=Wn(this.textArea.domNode.ownerDocument,cn,this._fontInfo,rn);return{distanceToModelLineStart:xi,widthOfHiddenTextBefore:gn}})(),{distanceToModelLineEnd:Gt}=(()=>{const ti=lt.value.substring(Math.max(lt.selectionStart,lt.selectionEnd)),li=ti.indexOf(`
`),ki=li===-1?ti:ti.substring(0,li),Ti=ki.indexOf("	"),Yi=Ti===-1?ki.length:ki.length-Ti-1,Ai=bt.getEndPosition(),Ji=Math.min(this._context.viewModel.model.getLineMaxColumn(Ai.lineNumber)-Ai.column,Yi);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(Ai.lineNumber)-Ai.column-Ji}})();this._context.viewModel.revealRange("keyboard",!0,x.Q.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new Zn(this._context,bt.startLineNumber,xt,At,Gt),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${Ci} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(nt=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${Ci}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(Di.M.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(n){this._textAreaInput.writeNativeTextAreaContent(n)}dispose(){super.dispose()}_getAndroidWordAtPosition(n){const a='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',f=this._context.viewModel.getLineContent(n.lineNumber),y=(0,ai.i)(a,[]);let T=!0,J=n.column,se=!0,be=n.column,Oe=0;for(;Oe<50&&(T||se);){if(T&&J<=1&&(T=!1),T){const Ge=f.charCodeAt(J-2);y.get(Ge)!==0?T=!1:J--}if(se&&be>f.length&&(se=!1),se){const Ge=f.charCodeAt(be-1);y.get(Ge)!==0?se=!1:be++}Oe++}return[f.substring(J-1,be-1),n.column-J]}_getWordBeforePosition(n){const a=this._context.viewModel.getLineContent(n.lineNumber),f=(0,ai.i)(this._context.configuration.options.get(132),[]);let y=n.column,T=0;for(;y>1;){const J=a.charCodeAt(y-2);if(f.get(J)!==0||T>50)return a.substring(y-1,n.column-1);T++,y--}return a.substring(0,n.column-1)}_getCharacterBeforePosition(n){if(n.column>1){const f=this._context.viewModel.getLineContent(n.lineNumber).charAt(n.column-2);if(!yi.pc(f.charCodeAt(0)))return f}return""}_getAriaLabel(n){if(n.get(2)===1){const f=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode")?.getAriaLabel(),y=this._keybindingService.lookupKeybinding("workbench.action.showCommands")?.getAriaLabel(),T=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings")?.getAriaLabel(),J=Ii.kg("accessibilityModeOff","The editor is not accessible at this time.");return f?Ii.kg("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",J,f):y?Ii.kg("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",J,y):T?Ii.kg("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",J,T):J}return n.get(4)}_setAccessibilityOptions(n){this._accessibilitySupport=n.get(2);const a=n.get(3);this._accessibilitySupport===2&&a===Q.qB.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=a;const y=n.get(146).wrappingColumn;if(y!==-1&&this._accessibilitySupport!==1){const T=n.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(y*T.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=us?0:1}onConfigurationChanged(n){const a=this._context.configuration.options,f=a.get(146);this._setAccessibilityOptions(a),this._contentLeft=f.contentLeft,this._contentWidth=f.contentWidth,this._contentHeight=f.height,this._fontInfo=a.get(50),this._lineHeight=a.get(67),this._emptySelectionClipboard=a.get(37),this._copyWithSyntaxHighlighting=a.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:y}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${y*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(a)),this.textArea.setAttribute("aria-required",a.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(a.get(125))),(n.hasChanged(34)||n.hasChanged(92))&&this._ensureReadOnlyAttribute(),n.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(n){return this._selections=n.selections.slice(0),this._modelSelections=n.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(n){return!0}onFlushed(n){return!0}onLinesChanged(n){return!0}onLinesDeleted(n){return!0}onLinesInserted(n){return!0}onScrollChanged(n){return this._scrollLeft=n.scrollLeft,this._scrollTop=n.scrollTop,!0}onZonesChanged(n){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(n){n.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",n.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),n.role&&this.textArea.setAttribute("role",n.role)}_ensureReadOnlyAttribute(){const n=this._context.configuration.options;!Di.M.enabled||n.get(34)&&n.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(n){this._primaryCursorPosition=new Ue.y(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=n.visibleRangeForPosition(this._primaryCursorPosition),this._visibleTextArea?.prepareRender(n)}render(n){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const f=this._visibleTextArea.visibleTextareaStart,y=this._visibleTextArea.visibleTextareaEnd,T=this._visibleTextArea.startPosition,J=this._visibleTextArea.endPosition;if(T&&J&&f&&y&&y.left>=this._scrollLeft&&f.left<=this._scrollLeft+this._contentWidth){const se=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,be=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let Oe=this._visibleTextArea.widthOfHiddenLineTextBefore,Ge=this._contentLeft+f.left-this._scrollLeft,je=y.left-f.left+1;if(Ge<this._contentLeft){const Gt=this._contentLeft-Ge;Ge+=Gt,Oe+=Gt,je-=Gt}je>this._contentWidth&&(je=this._contentWidth);const nt=this._context.viewModel.getViewLineData(T.lineNumber),lt=nt.tokens.findTokenIndexAtOffset(T.column-1),bt=nt.tokens.findTokenIndexAtOffset(J.column-1),xt=lt===bt,At=this._visibleTextArea.definePresentation(xt?nt.tokens.getPresentation(lt):null);this.textArea.domNode.scrollTop=be*this._lineHeight,this.textArea.domNode.scrollLeft=Oe,this._doRender({lastRenderPosition:null,top:se,left:Ge,width:je,height:this._lineHeight,useCover:!1,color:(wi.dG.getColorMap()||[])[At.foreground],italic:At.italic,bold:At.bold,underline:At.underline,strikethrough:At.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const n=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(n<this._contentLeft||n>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(a<0||a>this._contentHeight){this._renderAtTopLeft();return}if(m.zx||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:a,left:this._textAreaWrapping?this._contentLeft:n,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const f=this._textAreaInput.textAreaState.newlineCountBeforeSelection??this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=f*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:a,left:this._textAreaWrapping?this._contentLeft:n,width:this._textAreaWidth,height:us?0:1,useCover:!1})}_newlinecount(n){let a=0,f=-1;do{if(f=n.indexOf(`
`,f+1),f===-1)break;a++}while(!0);return a}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:us?0:1,useCover:!0})}_doRender(n){this._lastRenderPosition=n.lastRenderPosition;const a=this.textArea,f=this.textAreaCover;(0,C.M)(a,this._fontInfo),a.setTop(n.top),a.setLeft(n.left),a.setWidth(n.width),a.setHeight(n.height),a.setColor(n.color?ji.Q1.Format.CSS.formatHex(n.color):""),a.setFontStyle(n.italic?"italic":""),n.bold&&a.setFontWeight("bold"),a.setTextDecoration(`${n.underline?" underline":""}${n.strikethrough?" line-through":""}`),f.setTop(n.useCover?n.top:0),f.setLeft(n.useCover?n.left:0),f.setWidth(n.useCover?n.width:0),f.setHeight(n.useCover?n.height:0);const y=this._context.configuration.options;y.get(57)?f.setClassName("monaco-editor-background textAreaCover "+ei.OUTER_CLASS_NAME):y.get(68).renderType!==0?f.setClassName("monaco-editor-background textAreaCover "+gt.CLASS_NAME):f.setClassName("monaco-editor-background textAreaCover")}};xs=Dn([Mi(3,dn.b),Mi(4,nn._Y)],xs);function Wn(st,n,a,f){if(n.length===0)return 0;const y=st.createElement("div");y.style.position="absolute",y.style.top="-50000px",y.style.width="50000px";const T=st.createElement("span");(0,C.M)(T,a),T.style.whiteSpace="pre",T.style.tabSize=`${f*a.spaceWidth}px`,T.append(n),y.appendChild(T),st.body.appendChild(y);const J=T.offsetWidth;return y.remove(),J}var Rn=c(17195),Bn=c(61423);class ws{constructor(n,a,f,y){this.configuration=n,this.viewModel=a,this.userInputEvents=f,this.commandDelegate=y}paste(n,a,f,y){this.commandDelegate.paste(n,a,f,y)}type(n){this.commandDelegate.type(n)}compositionType(n,a,f,y){this.commandDelegate.compositionType(n,a,f,y)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(n){Bn.QM.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:n})}_validateViewColumn(n){const a=this.viewModel.getLineMinColumn(n.lineNumber);return n.column<a?new Ue.y(n.lineNumber,a):n}_hasMulticursorModifier(n){switch(this.configuration.options.get(78)){case"altKey":return n.altKey;case"ctrlKey":return n.ctrlKey;case"metaKey":return n.metaKey;default:return!1}}_hasNonMulticursorModifier(n){switch(this.configuration.options.get(78)){case"altKey":return n.ctrlKey||n.metaKey;case"ctrlKey":return n.altKey||n.metaKey;case"metaKey":return n.ctrlKey||n.altKey;default:return!1}}dispatchMouse(n){const a=this.configuration.options,f=m.j9&&a.get(108),y=a.get(22);n.middleButton&&!f?this._columnSelect(n.position,n.mouseColumn,n.inSelectionMode):n.startedOnLineNumbers?this._hasMulticursorModifier(n)?n.inSelectionMode?this._lastCursorLineSelect(n.position,n.revealType):this._createCursor(n.position,!0):n.inSelectionMode?this._lineSelectDrag(n.position,n.revealType):this._lineSelect(n.position,n.revealType):n.mouseDownCount>=4?this._selectAll():n.mouseDownCount===3?this._hasMulticursorModifier(n)?n.inSelectionMode?this._lastCursorLineSelectDrag(n.position,n.revealType):this._lastCursorLineSelect(n.position,n.revealType):n.inSelectionMode?this._lineSelectDrag(n.position,n.revealType):this._lineSelect(n.position,n.revealType):n.mouseDownCount===2?n.onInjectedText||(this._hasMulticursorModifier(n)?this._lastCursorWordSelect(n.position,n.revealType):n.inSelectionMode?this._wordSelectDrag(n.position,n.revealType):this._wordSelect(n.position,n.revealType)):this._hasMulticursorModifier(n)?this._hasNonMulticursorModifier(n)||(n.shiftKey?this._columnSelect(n.position,n.mouseColumn,!0):n.inSelectionMode?this._lastCursorMoveToSelect(n.position,n.revealType):this._createCursor(n.position,!1)):n.inSelectionMode?n.altKey?this._columnSelect(n.position,n.mouseColumn,!0):y?this._columnSelect(n.position,n.mouseColumn,!0):this._moveToSelect(n.position,n.revealType):this.moveTo(n.position,n.revealType)}_usualArgs(n,a){return n=this._validateViewColumn(n),{source:"mouse",position:this._convertViewToModelPosition(n),viewPosition:n,revealType:a}}moveTo(n,a){Bn.QM.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(n,a))}_moveToSelect(n,a){Bn.QM.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(n,a))}_columnSelect(n,a,f){n=this._validateViewColumn(n),Bn.QM.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(n),viewPosition:n,mouseColumn:a,doColumnSelect:f})}_createCursor(n,a){n=this._validateViewColumn(n),Bn.QM.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(n),viewPosition:n,wholeLine:a})}_lastCursorMoveToSelect(n,a){Bn.QM.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(n,a))}_wordSelect(n,a){Bn.QM.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(n,a))}_wordSelectDrag(n,a){Bn.QM.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(n,a))}_lastCursorWordSelect(n,a){Bn.QM.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(n,a))}_lineSelect(n,a){Bn.QM.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(n,a))}_lineSelectDrag(n,a){Bn.QM.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(n,a))}_lastCursorLineSelect(n,a){Bn.QM.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(n,a))}_lastCursorLineSelectDrag(n,a){Bn.QM.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(n,a))}_selectAll(){Bn.QM.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(n){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(n)}emitKeyDown(n){this.userInputEvents.emitKeyDown(n)}emitKeyUp(n){this.userInputEvents.emitKeyUp(n)}emitContextMenu(n){this.userInputEvents.emitContextMenu(n)}emitMouseMove(n){this.userInputEvents.emitMouseMove(n)}emitMouseLeave(n){this.userInputEvents.emitMouseLeave(n)}emitMouseUp(n){this.userInputEvents.emitMouseUp(n)}emitMouseDown(n){this.userInputEvents.emitMouseDown(n)}emitMouseDrag(n){this.userInputEvents.emitMouseDrag(n)}emitMouseDrop(n){this.userInputEvents.emitMouseDrop(n)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(n){this.userInputEvents.emitMouseWheel(n)}}var Ln=c(13716),Qn=c(81275);class hi{constructor(n){this._lineFactory=n,this._set(1,[])}flush(){this._set(1,[])}_set(n,a){this._lines=a,this._rendLineNumberStart=n}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(n){const a=n-this._rendLineNumberStart;if(a<0||a>=this._lines.length)throw new O.D7("Illegal value for lineNumber");return this._lines[a]}onLinesDeleted(n,a){if(this.getCount()===0)return null;const f=this.getStartLineNumber(),y=this.getEndLineNumber();if(a<f){const be=a-n+1;return this._rendLineNumberStart-=be,null}if(n>y)return null;let T=0,J=0;for(let be=f;be<=y;be++){const Oe=be-this._rendLineNumberStart;n<=be&&be<=a&&(J===0?(T=Oe,J=1):J++)}if(n<f){let be=0;a<f?be=a-n+1:be=f-n,this._rendLineNumberStart-=be}return this._lines.splice(T,J)}onLinesChanged(n,a){const f=n+a-1;if(this.getCount()===0)return!1;const y=this.getStartLineNumber(),T=this.getEndLineNumber();let J=!1;for(let se=n;se<=f;se++)se>=y&&se<=T&&(this._lines[se-this._rendLineNumberStart].onContentChanged(),J=!0);return J}onLinesInserted(n,a){if(this.getCount()===0)return null;const f=a-n+1,y=this.getStartLineNumber(),T=this.getEndLineNumber();if(n<=y)return this._rendLineNumberStart+=f,null;if(n>T)return null;if(f+n>T)return this._lines.splice(n-this._rendLineNumberStart,T-n+1);const J=[];for(let je=0;je<f;je++)J[je]=this._lineFactory.createLine();const se=n-this._rendLineNumberStart,be=this._lines.slice(0,se),Oe=this._lines.slice(se,this._lines.length-f),Ge=this._lines.slice(this._lines.length-f,this._lines.length);return this._lines=be.concat(J).concat(Oe),Ge}onTokensChanged(n){if(this.getCount()===0)return!1;const a=this.getStartLineNumber(),f=this.getEndLineNumber();let y=!1;for(let T=0,J=n.length;T<J;T++){const se=n[T];if(se.toLineNumber<a||se.fromLineNumber>f)continue;const be=Math.max(a,se.fromLineNumber),Oe=Math.min(f,se.toLineNumber);for(let Ge=be;Ge<=Oe;Ge++){const je=Ge-this._rendLineNumberStart;this._lines[je].onTokensChanged(),y=!0}}return y}}class vt{constructor(n){this._lineFactory=n,this.domNode=this._createDomNode(),this._linesCollection=new hi(this._lineFactory)}_createDomNode(){const n=(0,Y.Z)(document.createElement("div"));return n.setClassName("view-layer"),n.setPosition("absolute"),n.domNode.setAttribute("role","presentation"),n.domNode.setAttribute("aria-hidden","true"),n}onConfigurationChanged(n){return!!n.hasChanged(146)}onFlushed(n){return this._linesCollection.flush(),!0}onLinesChanged(n){return this._linesCollection.onLinesChanged(n.fromLineNumber,n.count)}onLinesDeleted(n){const a=this._linesCollection.onLinesDeleted(n.fromLineNumber,n.toLineNumber);if(a)for(let f=0,y=a.length;f<y;f++)a[f].getDomNode()?.remove();return!0}onLinesInserted(n){const a=this._linesCollection.onLinesInserted(n.fromLineNumber,n.toLineNumber);if(a)for(let f=0,y=a.length;f<y;f++)a[f].getDomNode()?.remove();return!0}onScrollChanged(n){return n.scrollTopChanged}onTokensChanged(n){return this._linesCollection.onTokensChanged(n.ranges)}onZonesChanged(n){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(n){return this._linesCollection.getLine(n)}renderLines(n){const a=this._linesCollection._get(),f=new ui(this.domNode.domNode,this._lineFactory,n),y={rendLineNumberStart:a.rendLineNumberStart,lines:a.lines,linesLength:a.lines.length},T=f.render(y,n.startLineNumber,n.endLineNumber,n.relativeVerticalOffset);this._linesCollection._set(T.rendLineNumberStart,T.lines)}}class ui{static{this._ttPolicy=(0,Ln.H)("editorViewLayer",{createHTML:n=>n})}constructor(n,a,f){this._domNode=n,this._lineFactory=a,this._viewportData=f}render(n,a,f,y){const T={rendLineNumberStart:n.rendLineNumberStart,lines:n.lines.slice(0),linesLength:n.linesLength};if(T.rendLineNumberStart+T.linesLength-1<a||f<T.rendLineNumberStart){T.rendLineNumberStart=a,T.linesLength=f-a+1,T.lines=[];for(let J=a;J<=f;J++)T.lines[J-a]=this._lineFactory.createLine();return this._finishRendering(T,!0,y),T}if(this._renderUntouchedLines(T,Math.max(a-T.rendLineNumberStart,0),Math.min(f-T.rendLineNumberStart,T.linesLength-1),y,a),T.rendLineNumberStart>a){const J=a,se=Math.min(f,T.rendLineNumberStart-1);J<=se&&(this._insertLinesBefore(T,J,se,y,a),T.linesLength+=se-J+1)}else if(T.rendLineNumberStart<a){const J=Math.min(T.linesLength,a-T.rendLineNumberStart);J>0&&(this._removeLinesBefore(T,J),T.linesLength-=J)}if(T.rendLineNumberStart=a,T.rendLineNumberStart+T.linesLength-1<f){const J=T.rendLineNumberStart+T.linesLength,se=f;J<=se&&(this._insertLinesAfter(T,J,se,y,a),T.linesLength+=se-J+1)}else if(T.rendLineNumberStart+T.linesLength-1>f){const J=Math.max(0,f-T.rendLineNumberStart+1),be=T.linesLength-1-J+1;be>0&&(this._removeLinesAfter(T,be),T.linesLength-=be)}return this._finishRendering(T,!1,y),T}_renderUntouchedLines(n,a,f,y,T){const J=n.rendLineNumberStart,se=n.lines;for(let be=a;be<=f;be++){const Oe=J+be;se[be].layoutLine(Oe,y[Oe-T],this._viewportData.lineHeight)}}_insertLinesBefore(n,a,f,y,T){const J=[];let se=0;for(let be=a;be<=f;be++)J[se++]=this._lineFactory.createLine();n.lines=J.concat(n.lines)}_removeLinesBefore(n,a){for(let f=0;f<a;f++)n.lines[f].getDomNode()?.remove();n.lines.splice(0,a)}_insertLinesAfter(n,a,f,y,T){const J=[];let se=0;for(let be=a;be<=f;be++)J[se++]=this._lineFactory.createLine();n.lines=n.lines.concat(J)}_removeLinesAfter(n,a){const f=n.linesLength-a;for(let y=0;y<a;y++)n.lines[f+y].getDomNode()?.remove();n.lines.splice(f,a)}_finishRenderingNewLines(n,a,f,y){ui._ttPolicy&&(f=ui._ttPolicy.createHTML(f));const T=this._domNode.lastChild;a||!T?this._domNode.innerHTML=f:T.insertAdjacentHTML("afterend",f);let J=this._domNode.lastChild;for(let se=n.linesLength-1;se>=0;se--){const be=n.lines[se];y[se]&&(be.setDomNode(J),J=J.previousSibling)}}_finishRenderingInvalidLines(n,a,f){const y=document.createElement("div");ui._ttPolicy&&(a=ui._ttPolicy.createHTML(a)),y.innerHTML=a;for(let T=0;T<n.linesLength;T++){const J=n.lines[T];if(f[T]){const se=y.firstChild,be=J.getDomNode();be.parentNode.replaceChild(se,be),J.setDomNode(se)}}}static{this._sb=new Qn.fe(1e5)}_finishRendering(n,a,f){const y=ui._sb,T=n.linesLength,J=n.lines,se=n.rendLineNumberStart,be=[];{y.reset();let Oe=!1;for(let Ge=0;Ge<T;Ge++){const je=J[Ge];be[Ge]=!1,!(je.getDomNode()||!je.renderLine(Ge+se,f[Ge],this._viewportData.lineHeight,this._viewportData,y))&&(be[Ge]=!0,Oe=!0)}Oe&&this._finishRenderingNewLines(n,a,y.build(),be)}{y.reset();let Oe=!1;const Ge=[];for(let je=0;je<T;je++){const nt=J[je];Ge[je]=!1,!(be[je]||!nt.renderLine(je+se,f[je],this._viewportData.lineHeight,this._viewportData,y))&&(Ge[je]=!0,Oe=!0)}Oe&&this._finishRenderingInvalidLines(n,y.build(),Ge)}}}class wt extends ye{constructor(n){super(n),this._dynamicOverlays=[],this._isFocused=!1,this._visibleLines=new vt({createLine:()=>new In(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;const f=this._context.configuration.options.get(50);(0,C.M)(this.domNode,f),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let n=0,a=this._dynamicOverlays.length;n<a;n++)if(this._dynamicOverlays[n].shouldRender())return!0;return!1}dispose(){super.dispose();for(let n=0,a=this._dynamicOverlays.length;n<a;n++)this._dynamicOverlays[n].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(n){this._dynamicOverlays.push(n)}onConfigurationChanged(n){this._visibleLines.onConfigurationChanged(n);const f=this._context.configuration.options.get(50);return(0,C.M)(this.domNode,f),!0}onFlushed(n){return this._visibleLines.onFlushed(n)}onFocusChanged(n){return this._isFocused=n.isFocused,!0}onLinesChanged(n){return this._visibleLines.onLinesChanged(n)}onLinesDeleted(n){return this._visibleLines.onLinesDeleted(n)}onLinesInserted(n){return this._visibleLines.onLinesInserted(n)}onScrollChanged(n){return this._visibleLines.onScrollChanged(n)||!0}onTokensChanged(n){return this._visibleLines.onTokensChanged(n)}onZonesChanged(n){return this._visibleLines.onZonesChanged(n)}prepareRender(n){const a=this._dynamicOverlays.filter(f=>f.shouldRender());for(let f=0,y=a.length;f<y;f++){const T=a[f];T.prepareRender(n),T.onDidRender()}}render(n){this._viewOverlaysRender(n),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(n){this._visibleLines.renderLines(n.viewportData)}}class In{constructor(n){this._dynamicOverlays=n,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(n){this._domNode=(0,Y.Z)(n)}onContentChanged(){}onTokensChanged(){}renderLine(n,a,f,y,T){let J="";for(let se=0,be=this._dynamicOverlays.length;se<be;se++){const Oe=this._dynamicOverlays[se];J+=Oe.render(y.startLineNumber,n)}return this._renderedContent===J?!1:(this._renderedContent=J,T.appendString('<div style="top:'),T.appendString(String(a)),T.appendString("px;height:"),T.appendString(String(f)),T.appendString('px;">'),T.appendString(J),T.appendString("</div>"),!0)}layoutLine(n,a,f){this._domNode&&(this._domNode.setTop(a),this._domNode.setHeight(f))}}class Ki extends wt{constructor(n){super(n);const f=this._context.configuration.options.get(146);this._contentWidth=f.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(n){const f=this._context.configuration.options.get(146);return this._contentWidth=f.contentWidth,super.onConfigurationChanged(n)||!0}onScrollChanged(n){return super.onScrollChanged(n)||n.scrollWidthChanged}_viewOverlaysRender(n){super._viewOverlaysRender(n),this.domNode.setWidth(Math.max(n.scrollWidth,this._contentWidth))}}class Tt extends wt{constructor(n){super(n);const a=this._context.configuration.options,f=a.get(146);this._contentLeft=f.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),(0,C.M)(this.domNode,a.get(50))}onConfigurationChanged(n){const a=this._context.configuration.options;(0,C.M)(this.domNode,a.get(50));const f=a.get(146);return this._contentLeft=f.contentLeft,super.onConfigurationChanged(n)||!0}onScrollChanged(n){return super.onScrollChanged(n)||n.scrollHeightChanged}_viewOverlaysRender(n){super._viewOverlaysRender(n);const a=Math.min(n.scrollHeight,1e6);this.domNode.setHeight(a),this.domNode.setWidth(this._contentLeft)}}class $i{constructor(n){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=n}emitKeyDown(n){this.onKeyDown?.(n)}emitKeyUp(n){this.onKeyUp?.(n)}emitContextMenu(n){this.onContextMenu?.(this._convertViewToModelMouseEvent(n))}emitMouseMove(n){this.onMouseMove?.(this._convertViewToModelMouseEvent(n))}emitMouseLeave(n){this.onMouseLeave?.(this._convertViewToModelMouseEvent(n))}emitMouseDown(n){this.onMouseDown?.(this._convertViewToModelMouseEvent(n))}emitMouseUp(n){this.onMouseUp?.(this._convertViewToModelMouseEvent(n))}emitMouseDrag(n){this.onMouseDrag?.(this._convertViewToModelMouseEvent(n))}emitMouseDrop(n){this.onMouseDrop?.(this._convertViewToModelMouseEvent(n))}emitMouseDropCanceled(){this.onMouseDropCanceled?.()}emitMouseWheel(n){this.onMouseWheel?.(n)}_convertViewToModelMouseEvent(n){return n.target?{event:n.event,target:this._convertViewToModelMouseTarget(n.target)}:n}_convertViewToModelMouseTarget(n){return $i.convertViewToModelMouseTarget(n,this._coordinatesConverter)}static convertViewToModelMouseTarget(n,a){const f={...n};return f.position&&(f.position=a.convertViewPositionToModelPosition(f.position)),f.range&&(f.range=a.convertViewRangeToModelRange(f.range)),(f.type===5||f.type===8)&&(f.detail=this.convertViewToModelViewZoneData(f.detail,a)),f}static convertViewToModelViewZoneData(n,a){return{viewZoneId:n.viewZoneId,positionBefore:n.positionBefore?a.convertViewPositionToModelPosition(n.positionBefore):n.positionBefore,positionAfter:n.positionAfter?a.convertViewPositionToModelPosition(n.positionAfter):n.positionAfter,position:a.convertViewPositionToModelPosition(n.position),afterLineNumber:a.convertViewPositionToModelPosition(new Ue.y(n.afterLineNumber,1)).lineNumber}}}class St extends ye{constructor(n){super(n),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=(0,Y.Z)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let n=!1;const f=this._context.configuration.options.get(146),y=f.contentWidth-f.verticalScrollbarWidth;this.contentWidth!==y&&(this.contentWidth=y,n=!0);const T=f.contentLeft;return this.contentLeft!==T&&(this.contentLeft=T,n=!0),n}dispose(){super.dispose()}onConfigurationChanged(n){return this.update()}onScrollChanged(n){return n.scrollTopChanged||n.scrollLeftChanged}onDecorationsChanged(n){return!0}onZonesChanged(n){return!0}prepareRender(n){}render(n){let a=0;const f=n.getDecorationsInViewport();for(const y of f){if(!y.options.blockClassName)continue;let T=this.blocks[a];T||(T=this.blocks[a]=(0,Y.Z)(document.createElement("div")),this.domNode.appendChild(T));let J,se;y.options.blockIsAfterEnd?(J=n.getVerticalOffsetAfterLineNumber(y.range.endLineNumber,!1),se=n.getVerticalOffsetAfterLineNumber(y.range.endLineNumber,!0)):(J=n.getVerticalOffsetForLineNumber(y.range.startLineNumber,!0),se=y.range.isEmpty()&&!y.options.blockDoesNotCollapse?n.getVerticalOffsetForLineNumber(y.range.startLineNumber,!1):n.getVerticalOffsetAfterLineNumber(y.range.endLineNumber,!0));const[be,Oe,Ge,je]=y.options.blockPadding??[0,0,0,0];T.setClassName("blockDecorations-block "+y.options.blockClassName),T.setLeft(this.contentLeft-je),T.setWidth(this.contentWidth+je+Oe),T.setTop(J-n.scrollTop-be),T.setHeight(se-J+be+Ge),a++}for(let y=a;y<this.blocks.length;y++)this.blocks[y].domNode.remove();this.blocks.length=a}}class yt extends ye{constructor(n,a){super(n),this._viewDomNode=a,this._widgets={},this.domNode=(0,Y.Z)(document.createElement("div")),Ke.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=(0,Y.Z)(document.createElement("div")),Ke.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(n){const a=Object.keys(this._widgets);for(const f of a)this._widgets[f].onConfigurationChanged(n);return!0}onDecorationsChanged(n){return!0}onFlushed(n){return!0}onLineMappingChanged(n){return this._updateAnchorsViewPositions(),!0}onLinesChanged(n){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(n){return this._updateAnchorsViewPositions(),!0}onLinesInserted(n){return this._updateAnchorsViewPositions(),!0}onScrollChanged(n){return!0}onZonesChanged(n){return!0}_updateAnchorsViewPositions(){const n=Object.keys(this._widgets);for(const a of n)this._widgets[a].updateAnchorViewPosition()}addWidget(n){const a=new Yt(this._context,this._viewDomNode,n);this._widgets[a.id]=a,a.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(a.domNode):this.domNode.appendChild(a.domNode),this.setShouldRender()}setWidgetPosition(n,a,f,y,T){this._widgets[n.getId()].setPosition(a,f,y,T),this.setShouldRender()}removeWidget(n){const a=n.getId();if(this._widgets.hasOwnProperty(a)){const f=this._widgets[a];delete this._widgets[a];const y=f.domNode.domNode;y.remove(),y.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(n){return this._widgets.hasOwnProperty(n)?this._widgets[n].suppressMouseDown:!1}onBeforeRender(n){const a=Object.keys(this._widgets);for(const f of a)this._widgets[f].onBeforeRender(n)}prepareRender(n){const a=Object.keys(this._widgets);for(const f of a)this._widgets[f].prepareRender(n)}render(n){const a=Object.keys(this._widgets);for(const f of a)this._widgets[f].render(n)}}class Yt{constructor(n,a,f){this._primaryAnchor=new ii(null,null),this._secondaryAnchor=new ii(null,null),this._context=n,this._viewDomNode=a,this._actual=f,this.domNode=(0,Y.Z)(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const y=this._context.configuration.options,T=y.get(146);this._fixedOverflowWidgets=y.get(42),this._contentWidth=T.contentWidth,this._contentLeft=T.contentLeft,this._lineHeight=y.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(n){const a=this._context.configuration.options;if(this._lineHeight=a.get(67),n.hasChanged(146)){const f=a.get(146);this._contentLeft=f.contentLeft,this._contentWidth=f.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(n,a,f){this._affinity=n,this._primaryAnchor=y(a,this._context.viewModel,this._affinity),this._secondaryAnchor=y(f,this._context.viewModel,this._affinity);function y(T,J,se){if(!T)return new ii(null,null);const be=J.model.validatePosition(T);if(J.coordinatesConverter.modelPositionIsVisible(be)){const Oe=J.coordinatesConverter.convertModelPositionToViewPosition(be,se??void 0);return new ii(T,Oe)}return new ii(T,null)}}_getMaxWidth(){const n=this.domNode.domNode.ownerDocument,a=n.defaultView;return this.allowEditorOverflow?a?.innerWidth||n.documentElement.offsetWidth||n.body.offsetWidth:this._contentWidth}setPosition(n,a,f,y){this._setPosition(y,n,a),this._preference=f,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(n,a,f,y){const T=n.top,J=T,se=n.top+n.height,be=y.viewportHeight-se,Oe=T-f,Ge=J>=f,je=se,nt=be>=f;let lt=n.left;return lt+a>y.scrollLeft+y.viewportWidth&&(lt=y.scrollLeft+y.viewportWidth-a),lt<y.scrollLeft&&(lt=y.scrollLeft),{fitsAbove:Ge,aboveTop:Oe,fitsBelow:nt,belowTop:je,left:lt}}_layoutHorizontalSegmentInPage(n,a,f,y){const se=Math.max(15,a.left-y),be=Math.min(a.left+a.width+y,n.width-15),Ge=this._viewDomNode.domNode.ownerDocument.defaultView;let je=a.left+f-(Ge?.scrollX??0);if(je+y>be){const nt=je-(be-y);je-=nt,f-=nt}if(je<se){const nt=je-se;je-=nt,f-=nt}return[f,je]}_layoutBoxInPage(n,a,f,y){const T=n.top-f,J=n.top+n.height,se=w.BK(this._viewDomNode.domNode),be=this._viewDomNode.domNode.ownerDocument,Oe=be.defaultView,Ge=se.top+T-(Oe?.scrollY??0),je=se.top+J-(Oe?.scrollY??0),nt=w.tG(be.body),[lt,bt]=this._layoutHorizontalSegmentInPage(nt,se,n.left-y.scrollLeft+this._contentLeft,a),xt=22,At=22,Gt=Ge>=xt,ti=je+f<=nt.height-At;return this._fixedOverflowWidgets?{fitsAbove:Gt,aboveTop:Math.max(Ge,xt),fitsBelow:ti,belowTop:je,left:bt}:{fitsAbove:Gt,aboveTop:T,fitsBelow:ti,belowTop:J,left:lt}}_prepareRenderWidgetAtExactPositionOverflowing(n){return new Li(n.top,n.left+this._contentLeft)}_getAnchorsCoordinates(n){const a=T(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),f=this._secondaryAnchor.viewPosition?.lineNumber===this._primaryAnchor.viewPosition?.lineNumber?this._secondaryAnchor.viewPosition:null,y=T(f,this._affinity,this._lineHeight);return{primary:a,secondary:y};function T(J,se,be){if(!J)return null;const Oe=n.visibleRangeForPosition(J);if(!Oe)return null;const Ge=J.column===1&&se===3?0:Oe.left,je=n.getVerticalOffsetForLineNumber(J.lineNumber)-n.scrollTop;return new Bi(je,Ge,be)}}_reduceAnchorCoordinates(n,a,f){if(!a)return n;const y=this._context.configuration.options.get(50);let T=a.left;return T<n.left?T=Math.max(T,n.left-f+y.typicalFullwidthCharacterWidth):T=Math.min(T,n.left+f-y.typicalFullwidthCharacterWidth),new Bi(n.top,T,n.height)}_prepareRenderWidget(n){if(!this._preference||this._preference.length===0)return null;const{primary:a,secondary:f}=this._getAnchorsCoordinates(n);if(!a)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let J=null;if(typeof this._actual.beforeRender=="function"&&(J=Pi(this._actual.beforeRender,this._actual)),J)this._cachedDomNodeOffsetWidth=J.width,this._cachedDomNodeOffsetHeight=J.height;else{const be=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(be.width),this._cachedDomNodeOffsetHeight=Math.round(be.height)}}const y=this._reduceAnchorCoordinates(a,f,this._cachedDomNodeOffsetWidth);let T;this.allowEditorOverflow?T=this._layoutBoxInPage(y,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,n):T=this._layoutBoxInViewport(y,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,n);for(let J=1;J<=2;J++)for(const se of this._preference)if(se===1){if(!T)return null;if(J===2||T.fitsAbove)return{kind:"inViewport",coordinate:new Li(T.aboveTop,T.left),position:1}}else if(se===2){if(!T)return null;if(J===2||T.fitsBelow)return{kind:"inViewport",coordinate:new Li(T.belowTop,T.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new Li(y.top,y.left)),position:0}:{kind:"inViewport",coordinate:new Li(y.top,y.left),position:0};return null}onBeforeRender(n){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<n.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>n.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(n){this._renderData=this._prepareRenderWidget(n)}render(n){if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this._renderData?.kind==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&Pi(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+n.scrollTop-n.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&Pi(this._actual.afterRender,this._actual,this._renderData.position)}}class ii{constructor(n,a){this.modelPosition=n,this.viewPosition=a}}class Li{constructor(n,a){this.top=n,this.left=a,this._coordinateBrand=void 0}}class Bi{constructor(n,a,f){this.top=n,this.left=a,this.height=f,this._anchorCoordinateBrand=void 0}}function Pi(st,n,...a){try{return st.call(n,...a)}catch{return null}}var un=c(64246);class Cn extends _n{constructor(n){super(),this._context=n;const a=this._context.configuration.options,f=a.get(146);this._renderLineHighlight=a.get(97),this._renderLineHighlightOnlyWhenFocus=a.get(98),this._wordWrap=f.isViewportWrapping,this._contentLeft=f.contentLeft,this._contentWidth=f.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Xt.L(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let n=!1;const a=new Set;for(const T of this._selections)a.add(T.positionLineNumber);const f=Array.from(a);f.sort((T,J)=>T-J),_.aI(this._cursorLineNumbers,f)||(this._cursorLineNumbers=f,n=!0);const y=this._selections.every(T=>T.isEmpty());return this._selectionIsEmpty!==y&&(this._selectionIsEmpty=y,n=!0),n}onThemeChanged(n){return this._readFromSelections()}onConfigurationChanged(n){const a=this._context.configuration.options,f=a.get(146);return this._renderLineHighlight=a.get(97),this._renderLineHighlightOnlyWhenFocus=a.get(98),this._wordWrap=f.isViewportWrapping,this._contentLeft=f.contentLeft,this._contentWidth=f.contentWidth,!0}onCursorStateChanged(n){return this._selections=n.selections,this._readFromSelections()}onFlushed(n){return!0}onLinesDeleted(n){return!0}onLinesInserted(n){return!0}onScrollChanged(n){return n.scrollWidthChanged||n.scrollTopChanged}onZonesChanged(n){return!0}onFocusChanged(n){return this._renderLineHighlightOnlyWhenFocus?(this._focused=n.isFocused,!0):!1}prepareRender(n){if(!this._shouldRenderThis()){this._renderData=null;return}const a=n.visibleRange.startLineNumber,f=n.visibleRange.endLineNumber,y=[];for(let J=a;J<=f;J++){const se=J-a;y[se]=""}if(this._wordWrap){const J=this._renderOne(n,!1);for(const se of this._cursorLineNumbers){const be=this._context.viewModel.coordinatesConverter,Oe=be.convertViewPositionToModelPosition(new Ue.y(se,1)).lineNumber,Ge=be.convertModelPositionToViewPosition(new Ue.y(Oe,1)).lineNumber,je=be.convertModelPositionToViewPosition(new Ue.y(Oe,this._context.viewModel.model.getLineMaxColumn(Oe))).lineNumber,nt=Math.max(Ge,a),lt=Math.min(je,f);for(let bt=nt;bt<=lt;bt++){const xt=bt-a;y[xt]=J}}}const T=this._renderOne(n,!0);for(const J of this._cursorLineNumbers){if(J<a||J>f)continue;const se=J-a;y[se]=T}this._renderData=y}render(n,a){if(!this._renderData)return"";const f=a-n;return f>=this._renderData.length?"":this._renderData[f]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class sn extends Cn{_renderOne(n,a){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(a?" current-line-exact":"")}" style="width:${Math.max(n.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class yn extends Cn{_renderOne(n,a){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&a?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}(0,oi.zy)((st,n)=>{const a=st.getColor(Ne.kG);if(a&&(n.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${a}; }`),n.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${a}; border: none; }`)),!a||a.isTransparent()||st.defines(Ne.Mf)){const f=st.getColor(Ne.Mf);f&&(n.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${f}; }`),n.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${f}; }`),(0,un.Bb)(st.type)&&(n.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),n.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});class fs extends _n{constructor(n){super(),this._context=n;const a=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=a.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(n){const a=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=a.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(n){return!0}onFlushed(n){return!0}onLinesChanged(n){return!0}onLinesDeleted(n){return!0}onLinesInserted(n){return!0}onScrollChanged(n){return n.scrollTopChanged||n.scrollWidthChanged}onZonesChanged(n){return!0}prepareRender(n){const a=n.getDecorationsInViewport();let f=[],y=0;for(let be=0,Oe=a.length;be<Oe;be++){const Ge=a[be];Ge.options.className&&(f[y++]=Ge)}f=f.sort((be,Oe)=>{if(be.options.zIndex<Oe.options.zIndex)return-1;if(be.options.zIndex>Oe.options.zIndex)return 1;const Ge=be.options.className,je=Oe.options.className;return Ge<je?-1:Ge>je?1:x.Q.compareRangesUsingStarts(be.range,Oe.range)});const T=n.visibleRange.startLineNumber,J=n.visibleRange.endLineNumber,se=[];for(let be=T;be<=J;be++){const Oe=be-T;se[Oe]=""}this._renderWholeLineDecorations(n,f,se),this._renderNormalDecorations(n,f,se),this._renderResult=se}_renderWholeLineDecorations(n,a,f){const y=n.visibleRange.startLineNumber,T=n.visibleRange.endLineNumber;for(let J=0,se=a.length;J<se;J++){const be=a[J];if(!be.options.isWholeLine)continue;const Oe='<div class="cdr '+be.options.className+'" style="left:0;width:100%;"></div>',Ge=Math.max(be.range.startLineNumber,y),je=Math.min(be.range.endLineNumber,T);for(let nt=Ge;nt<=je;nt++){const lt=nt-y;f[lt]+=Oe}}}_renderNormalDecorations(n,a,f){const y=n.visibleRange.startLineNumber;let T=null,J=!1,se=null,be=!1;for(let Oe=0,Ge=a.length;Oe<Ge;Oe++){const je=a[Oe];if(je.options.isWholeLine)continue;const nt=je.options.className,lt=!!je.options.showIfCollapsed;let bt=je.range;if(lt&&bt.endColumn===1&&bt.endLineNumber!==bt.startLineNumber&&(bt=new x.Q(bt.startLineNumber,bt.startColumn,bt.endLineNumber-1,this._context.viewModel.getLineMaxColumn(bt.endLineNumber-1))),T===nt&&J===lt&&x.Q.areIntersectingOrTouching(se,bt)){se=x.Q.plusRange(se,bt);continue}T!==null&&this._renderNormalDecoration(n,se,T,be,J,y,f),T=nt,J=lt,se=bt,be=je.options.shouldFillLineOnLineBreak??!1}T!==null&&this._renderNormalDecoration(n,se,T,be,J,y,f)}_renderNormalDecoration(n,a,f,y,T,J,se){const be=n.linesVisibleRangesForRange(a,f==="findMatch");if(be)for(let Oe=0,Ge=be.length;Oe<Ge;Oe++){const je=be[Oe];if(je.outsideRenderedLine)continue;const nt=je.lineNumber-J;if(T&&je.ranges.length===1){const lt=je.ranges[0];if(lt.width<this._typicalHalfwidthCharacterWidth){const bt=Math.round(lt.left+lt.width/2),xt=Math.max(0,Math.round(bt-this._typicalHalfwidthCharacterWidth/2));je.ranges[0]=new Rn.Y(xt,this._typicalHalfwidthCharacterWidth)}}for(let lt=0,bt=je.ranges.length;lt<bt;lt++){const xt=y&&je.continuesOnNextLine&&bt===1,At=je.ranges[lt],Gt='<div class="cdr '+f+'" style="left:'+String(At.left)+"px;width:"+(xt?"100%;":String(At.width)+"px;")+'"></div>';se[nt]+=Gt}}}render(n,a){if(!this._renderResult)return"";const f=a-n;return f<0||f>=this._renderResult.length?"":this._renderResult[f]}}class cs extends ye{constructor(n,a,f,y){super(n);const T=this._context.configuration.options,J=T.get(104),se=T.get(75),be=T.get(40),Oe=T.get(107),Ge={listenOnDomNode:f.domNode,className:"editor-scrollable "+(0,oi.Pz)(n.theme.type),useShadows:!1,lazyRender:!0,vertical:J.vertical,horizontal:J.horizontal,verticalHasArrows:J.verticalHasArrows,horizontalHasArrows:J.horizontalHasArrows,verticalScrollbarSize:J.verticalScrollbarSize,verticalSliderSize:J.verticalSliderSize,horizontalScrollbarSize:J.horizontalScrollbarSize,horizontalSliderSize:J.horizontalSliderSize,handleMouseWheel:J.handleMouseWheel,alwaysConsumeMouseWheel:J.alwaysConsumeMouseWheel,arrowSize:J.arrowSize,mouseWheelScrollSensitivity:se,fastScrollSensitivity:be,scrollPredominantAxis:Oe,scrollByPage:J.scrollByPage};this.scrollbar=this._register(new ri.oO(a.domNode,Ge,this._context.viewLayout.getScrollable())),Ke.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=(0,Y.Z)(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const je=(nt,lt,bt)=>{const xt={};if(lt){const At=nt.scrollTop;At&&(xt.scrollTop=this._context.viewLayout.getCurrentScrollTop()+At,nt.scrollTop=0)}if(bt){const At=nt.scrollLeft;At&&(xt.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+At,nt.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(xt,1)};this._register(w.ko(f.domNode,"scroll",nt=>je(f.domNode,!0,!0))),this._register(w.ko(a.domNode,"scroll",nt=>je(a.domNode,!0,!1))),this._register(w.ko(y.domNode,"scroll",nt=>je(y.domNode,!0,!1))),this._register(w.ko(this.scrollbarDomNode.domNode,"scroll",nt=>je(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const n=this._context.configuration.options,a=n.get(146);this.scrollbarDomNode.setLeft(a.contentLeft),n.get(73).side==="right"?this.scrollbarDomNode.setWidth(a.contentWidth+a.minimap.minimapWidth):this.scrollbarDomNode.setWidth(a.contentWidth),this.scrollbarDomNode.setHeight(a.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(n){this.scrollbar.delegateVerticalScrollbarPointerDown(n)}delegateScrollFromMouseWheelEvent(n){this.scrollbar.delegateScrollFromMouseWheelEvent(n)}onConfigurationChanged(n){if(n.hasChanged(104)||n.hasChanged(75)||n.hasChanged(40)){const a=this._context.configuration.options,f=a.get(104),y=a.get(75),T=a.get(40),J=a.get(107),se={vertical:f.vertical,horizontal:f.horizontal,verticalScrollbarSize:f.verticalScrollbarSize,horizontalScrollbarSize:f.horizontalScrollbarSize,scrollByPage:f.scrollByPage,handleMouseWheel:f.handleMouseWheel,mouseWheelScrollSensitivity:y,fastScrollSensitivity:T,scrollPredominantAxis:J};this.scrollbar.updateOptions(se)}return n.hasChanged(146)&&this._setLayout(),!0}onScrollChanged(n){return!0}onThemeChanged(n){return this.scrollbar.updateClassName("editor-scrollable "+(0,oi.Pz)(this._context.theme.type)),!0}prepareRender(n){}render(n){this.scrollbar.renderNow()}}var _s=c(26342);class Mn{constructor(n,a,f,y,T){this.startLineNumber=n,this.endLineNumber=a,this.className=f,this.tooltip=y,this._decorationToRenderBrand=void 0,this.zIndex=T??0}}class vs{constructor(n,a,f){this.className=n,this.zIndex=a,this.tooltip=f}}class Xi{constructor(){this.decorations=[]}add(n){this.decorations.push(n)}getDecorations(){return this.decorations}}class Fi extends _n{_render(n,a,f){const y=[];for(let se=n;se<=a;se++){const be=se-n;y[be]=new Xi}if(f.length===0)return y;f.sort((se,be)=>se.className===be.className?se.startLineNumber===be.startLineNumber?se.endLineNumber-be.endLineNumber:se.startLineNumber-be.startLineNumber:se.className<be.className?-1:1);let T=null,J=0;for(let se=0,be=f.length;se<be;se++){const Oe=f[se],Ge=Oe.className,je=Oe.zIndex;let nt=Math.max(Oe.startLineNumber,n)-n;const lt=Math.min(Oe.endLineNumber,a)-n;T===Ge?(nt=Math.max(J+1,nt),J=Math.max(J,lt)):(T=Ge,J=lt);for(let bt=nt;bt<=J;bt++)y[bt].add(new vs(Ge,je,Oe.tooltip))}return y}}class os extends ye{constructor(n){super(n),this._widgets={},this._context=n;const a=this._context.configuration.options,f=a.get(146);this.domNode=(0,Y.Z)(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=a.get(67),this._glyphMargin=a.get(57),this._glyphMarginLeft=f.glyphMarginLeft,this._glyphMarginWidth=f.glyphMarginWidth,this._glyphMarginDecorationLaneCount=f.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(n){const a=this._context.configuration.options,f=a.get(146);return this._lineHeight=a.get(67),this._glyphMargin=a.get(57),this._glyphMarginLeft=f.glyphMarginLeft,this._glyphMarginWidth=f.glyphMarginWidth,this._glyphMarginDecorationLaneCount=f.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(n){return!0}onFlushed(n){return!0}onLinesChanged(n){return!0}onLinesDeleted(n){return!0}onLinesInserted(n){return!0}onScrollChanged(n){return n.scrollTopChanged}onZonesChanged(n){return!0}addWidget(n){const a=(0,Y.Z)(n.getDomNode());this._widgets[n.getId()]={widget:n,preference:n.getPosition(),domNode:a,renderInfo:null},a.setPosition("absolute"),a.setDisplay("none"),a.setAttribute("widgetId",n.getId()),this.domNode.appendChild(a),this.setShouldRender()}setWidgetPosition(n,a){const f=this._widgets[n.getId()];return f.preference.lane===a.lane&&f.preference.zIndex===a.zIndex&&x.Q.equalsRange(f.preference.range,a.range)?!1:(f.preference=a,this.setShouldRender(),!0)}removeWidget(n){const a=n.getId();if(this._widgets[a]){const y=this._widgets[a].domNode.domNode;delete this._widgets[a],y.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(n,a){const f=n.visibleRange.startLineNumber,y=n.visibleRange.endLineNumber,T=n.getDecorationsInViewport();for(const J of T){const se=J.options.glyphMarginClassName;if(!se)continue;const be=Math.max(J.range.startLineNumber,f),Oe=Math.min(J.range.endLineNumber,y),Ge=J.options.glyphMargin?.position??_s.ZS.Center,je=J.options.zIndex??0;for(let nt=be;nt<=Oe;nt++){const lt=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Ue.y(nt,0)),bt=this._context.viewModel.glyphLanes.getLanesAtLine(lt.lineNumber).indexOf(Ge);a.push(new no(nt,bt,je,se))}}}_collectWidgetBasedGlyphRenderRequest(n,a){const f=n.visibleRange.startLineNumber,y=n.visibleRange.endLineNumber;for(const T of Object.values(this._widgets)){const J=T.preference.range,{startLineNumber:se,endLineNumber:be}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(x.Q.lift(J));if(!se||!be||be<f||se>y)continue;const Oe=Math.max(se,f),Ge=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Ue.y(Oe,0)),je=this._context.viewModel.glyphLanes.getLanesAtLine(Ge.lineNumber).indexOf(T.preference.lane);a.push(new so(Oe,je,T.preference.zIndex,T))}}_collectSortedGlyphRenderRequests(n){const a=[];return this._collectDecorationBasedGlyphRenderRequest(n,a),this._collectWidgetBasedGlyphRenderRequest(n,a),a.sort((f,y)=>f.lineNumber===y.lineNumber?f.laneIndex===y.laneIndex?f.zIndex===y.zIndex?y.type===f.type?f.type===0&&y.type===0?f.className<y.className?-1:1:0:y.type-f.type:y.zIndex-f.zIndex:f.laneIndex-y.laneIndex:f.lineNumber-y.lineNumber),a}prepareRender(n){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const y of Object.values(this._widgets))y.renderInfo=null;const a=new _.j3(this._collectSortedGlyphRenderRequests(n)),f=[];for(;a.length>0;){const y=a.peek();if(!y)break;const T=a.takeWhile(se=>se.lineNumber===y.lineNumber&&se.laneIndex===y.laneIndex);if(!T||T.length===0)break;const J=T[0];if(J.type===0){const se=[];for(const be of T){if(be.zIndex!==J.zIndex||be.type!==J.type)break;(se.length===0||se[se.length-1]!==be.className)&&se.push(be.className)}f.push(J.accept(se.join(" ")))}else J.widget.renderInfo={lineNumber:J.lineNumber,laneIndex:J.laneIndex}}this._decorationGlyphsToRender=f}render(n){if(!this._glyphMargin){for(const f of Object.values(this._widgets))f.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;)this._managedDomNodes.pop()?.domNode.remove();return}const a=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const f of Object.values(this._widgets))if(!f.renderInfo)f.domNode.setDisplay("none");else{const y=n.viewportData.relativeVerticalOffset[f.renderInfo.lineNumber-n.viewportData.startLineNumber],T=this._glyphMarginLeft+f.renderInfo.laneIndex*this._lineHeight;f.domNode.setDisplay("block"),f.domNode.setTop(y),f.domNode.setLeft(T),f.domNode.setWidth(a),f.domNode.setHeight(this._lineHeight)}for(let f=0;f<this._decorationGlyphsToRender.length;f++){const y=this._decorationGlyphsToRender[f],T=n.viewportData.relativeVerticalOffset[y.lineNumber-n.viewportData.startLineNumber],J=this._glyphMarginLeft+y.laneIndex*this._lineHeight;let se;f<this._managedDomNodes.length?se=this._managedDomNodes[f]:(se=(0,Y.Z)(document.createElement("div")),this._managedDomNodes.push(se),this.domNode.appendChild(se)),se.setClassName("cgmr codicon "+y.combinedClassName),se.setPosition("absolute"),se.setTop(T),se.setLeft(J),se.setWidth(a),se.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;)this._managedDomNodes.pop()?.domNode.remove()}}class no{constructor(n,a,f,y){this.lineNumber=n,this.laneIndex=a,this.zIndex=f,this.className=y,this.type=0}accept(n){return new co(this.lineNumber,this.laneIndex,n)}}class so{constructor(n,a,f,y){this.lineNumber=n,this.laneIndex=a,this.zIndex=f,this.widget=y,this.type=1}}class co{constructor(n,a,f){this.lineNumber=n,this.laneIndex=a,this.combinedClassName=f}}var $n=c(33902),Kn=c(8731),Xn=c(52630);class zt extends _n{constructor(n){super(),this._context=n,this._primaryPosition=null;const a=this._context.configuration.options,f=a.get(147),y=a.get(50);this._spaceWidth=y.spaceWidth,this._maxIndentLeft=f.wrappingColumn===-1?-1:f.wrappingColumn*y.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=a.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(n){const a=this._context.configuration.options,f=a.get(147),y=a.get(50);return this._spaceWidth=y.spaceWidth,this._maxIndentLeft=f.wrappingColumn===-1?-1:f.wrappingColumn*y.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=a.get(16),!0}onCursorStateChanged(n){const f=n.selections[0].getPosition();return this._primaryPosition?.equals(f)?!1:(this._primaryPosition=f,!0)}onDecorationsChanged(n){return!0}onFlushed(n){return!0}onLinesChanged(n){return!0}onLinesDeleted(n){return!0}onLinesInserted(n){return!0}onScrollChanged(n){return n.scrollTopChanged}onZonesChanged(n){return!0}onLanguageConfigurationChanged(n){return!0}prepareRender(n){if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const a=n.visibleRange.startLineNumber,f=n.visibleRange.endLineNumber,y=n.scrollWidth,T=this._primaryPosition,J=this.getGuidesByLine(a,Math.min(f+1,this._context.viewModel.getLineCount()),T),se=[];for(let be=a;be<=f;be++){const Oe=be-a,Ge=J[Oe];let je="";const nt=n.visibleRangeForPosition(new Ue.y(be,1))?.left??0;for(const lt of Ge){const bt=lt.column===-1?nt+(lt.visibleColumn-1)*this._spaceWidth:n.visibleRangeForPosition(new Ue.y(be,lt.column)).left;if(bt>y||this._maxIndentLeft>0&&bt>this._maxIndentLeft)break;const xt=lt.horizontalLine?lt.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",At=lt.horizontalLine?(n.visibleRangeForPosition(new Ue.y(be,lt.horizontalLine.endColumn))?.left??bt+this._spaceWidth)-bt:this._spaceWidth;je+=`<div class="core-guide ${lt.className} ${xt}" style="left:${bt}px;width:${At}px"></div>`}se[Oe]=je}this._renderResult=se}getGuidesByLine(n,a,f){const y=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(n,a,f,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Xn.N6.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Xn.N6.EnabledForActive:Xn.N6.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,T=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(n,a):null;let J=0,se=0,be=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&f){const je=this._context.viewModel.getActiveIndentGuide(f.lineNumber,n,a);J=je.startLineNumber,se=je.endLineNumber,be=je.indent}const{indentSize:Oe}=this._context.viewModel.model.getOptions(),Ge=[];for(let je=n;je<=a;je++){const nt=new Array;Ge.push(nt);const lt=y?y[je-n]:[],bt=new _.j3(lt),xt=T?T[je-n]:0;for(let At=1;At<=xt;At++){const Gt=(At-1)*Oe+1,ti=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||lt.length===0)&&J<=je&&je<=se&&At===be;nt.push(...bt.takeWhile(ki=>ki.visibleColumn<Gt)||[]);const li=bt.peek();(!li||li.visibleColumn!==Gt||li.horizontalLine)&&nt.push(new Xn.TH(Gt,-1,`core-guide-indent lvl-${(At-1)%30}`+(ti?" indent-active":""),null,-1,-1))}nt.push(...bt.takeWhile(At=>!0)||[])}return Ge}render(n,a){if(!this._renderResult)return"";const f=a-n;return f<0||f>=this._renderResult.length?"":this._renderResult[f]}}function le(st){if(!(st&&st.isTransparent()))return st}(0,oi.zy)((st,n)=>{const a=[{bracketColor:Ne.sN,guideColor:Ne.n4,guideColorActive:Ne.bB},{bracketColor:Ne.lQ,guideColor:Ne.I2,guideColorActive:Ne.WS},{bracketColor:Ne.ss,guideColor:Ne.Bo,guideColorActive:Ne.Pe},{bracketColor:Ne.l5,guideColor:Ne.If,guideColorActive:Ne.WD},{bracketColor:Ne.sH,guideColor:Ne.BD,guideColorActive:Ne.P1},{bracketColor:Ne.zp,guideColor:Ne.IW,guideColorActive:Ne.WY}],f=new Kn.k,y=[{indentColor:Ne.vV,indentColorActive:Ne.H0},{indentColor:Ne.ob,indentColorActive:Ne.Am},{indentColor:Ne.hz,indentColorActive:Ne.tK},{indentColor:Ne.ow,indentColorActive:Ne.A3},{indentColor:Ne.vP,indentColorActive:Ne.tp},{indentColor:Ne.CM,indentColorActive:Ne.As}],T=a.map(se=>{const be=st.getColor(se.bracketColor),Oe=st.getColor(se.guideColor),Ge=st.getColor(se.guideColorActive),je=le(le(Oe)??be?.transparent(.3)),nt=le(le(Ge)??be);if(!(!je||!nt))return{guideColor:je,guideColorActive:nt}}).filter($n.O9),J=y.map(se=>{const be=st.getColor(se.indentColor),Oe=st.getColor(se.indentColorActive),Ge=le(be),je=le(Oe);if(!(!Ge||!je))return{indentColor:Ge,indentColorActive:je}}).filter($n.O9);if(T.length>0){for(let se=0;se<30;se++){const be=T[se%T.length];n.addRule(`.monaco-editor .${f.getInlineClassNameOfLevel(se).replace(/ /g,".")} { --guide-color: ${be.guideColor}; --guide-color-active: ${be.guideColorActive}; }`)}n.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),n.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),n.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),n.addRule(`.monaco-editor .vertical.${f.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),n.addRule(`.monaco-editor .horizontal-top.${f.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),n.addRule(`.monaco-editor .horizontal-bottom.${f.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(J.length>0){for(let se=0;se<30;se++){const be=J[se%J.length];n.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${se} { --indent-color: ${be.indentColor}; --indent-color-active: ${be.indentColorActive}; }`)}n.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),n.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});var Be=c(37519);class ht{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const n=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=n.left,this._clientRectScale=n.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(n,a){this._domNode=n,this.endNode=a,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class Ft{constructor(){this._currentVisibleRange=new x.Q(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(n){this._currentVisibleRange=n}}class Ot{constructor(n,a,f,y,T,J,se){this.minimalReveal=n,this.lineNumber=a,this.startColumn=f,this.endColumn=y,this.startScrollTop=T,this.stopScrollTop=J,this.scrollType=se,this.type="range",this.minLineNumber=a,this.maxLineNumber=a}}class qt{constructor(n,a,f,y,T){this.minimalReveal=n,this.selections=a,this.startScrollTop=f,this.stopScrollTop=y,this.scrollType=T,this.type="selections";let J=a[0].startLineNumber,se=a[0].endLineNumber;for(let be=1,Oe=a.length;be<Oe;be++){const Ge=a[be];J=Math.min(J,Ge.startLineNumber),se=Math.max(se,Ge.endLineNumber)}this.minLineNumber=J,this.maxLineNumber=se}}class Si extends ye{static{this.HORIZONTAL_EXTRA_PX=30}constructor(n,a){super(n);const f=this._context.configuration,y=this._context.configuration.options,T=y.get(50),J=y.get(147);this._lineHeight=y.get(67),this._typicalHalfwidthCharacterWidth=T.typicalHalfwidthCharacterWidth,this._isViewportWrapping=J.isViewportWrapping,this._revealHorizontalRightPadding=y.get(101),this._cursorSurroundingLines=y.get(29),this._cursorSurroundingLinesStyle=y.get(30),this._canUseLayerHinting=!y.get(32),this._viewLineOptions=new qe.Ax(f,this._context.theme.type),this._linesContent=a,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new vt({createLine:()=>new qe.Gb(this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,Ke.write(this.domNode,8),this.domNode.setClassName(`view-lines ${Ci}`),(0,C.M)(this.domNode,T),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Be.uC(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Be.uC(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new Ft,this._horizontalRevealRequest=null,this._stickyScrollEnabled=y.get(116).enabled,this._maxNumberStickyLines=y.get(116).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(n){this._visibleLines.onConfigurationChanged(n),n.hasChanged(147)&&(this._maxLineWidth=0);const a=this._context.configuration.options,f=a.get(50),y=a.get(147);return this._lineHeight=a.get(67),this._typicalHalfwidthCharacterWidth=f.typicalHalfwidthCharacterWidth,this._isViewportWrapping=y.isViewportWrapping,this._revealHorizontalRightPadding=a.get(101),this._cursorSurroundingLines=a.get(29),this._cursorSurroundingLinesStyle=a.get(30),this._canUseLayerHinting=!a.get(32),this._stickyScrollEnabled=a.get(116).enabled,this._maxNumberStickyLines=a.get(116).maxLineCount,(0,C.M)(this.domNode,f),this._onOptionsMaybeChanged(),n.hasChanged(146)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const n=this._context.configuration,a=new qe.Ax(n,this._context.theme.type);if(!this._viewLineOptions.equals(a)){this._viewLineOptions=a;const f=this._visibleLines.getStartLineNumber(),y=this._visibleLines.getEndLineNumber();for(let T=f;T<=y;T++)this._visibleLines.getVisibleLine(T).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(n){const a=this._visibleLines.getStartLineNumber(),f=this._visibleLines.getEndLineNumber();let y=!1;for(let T=a;T<=f;T++)y=this._visibleLines.getVisibleLine(T).onSelectionChanged()||y;return y}onDecorationsChanged(n){{const a=this._visibleLines.getStartLineNumber(),f=this._visibleLines.getEndLineNumber();for(let y=a;y<=f;y++)this._visibleLines.getVisibleLine(y).onDecorationsChanged()}return!0}onFlushed(n){const a=this._visibleLines.onFlushed(n);return this._maxLineWidth=0,a}onLinesChanged(n){return this._visibleLines.onLinesChanged(n)}onLinesDeleted(n){return this._visibleLines.onLinesDeleted(n)}onLinesInserted(n){return this._visibleLines.onLinesInserted(n)}onRevealRangeRequest(n){const a=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),n.source,n.minimalReveal,n.range,n.selections,n.verticalType);if(a===-1)return!1;let f=this._context.viewLayout.validateScrollPosition({scrollTop:a});n.revealHorizontal?n.range&&n.range.startLineNumber!==n.range.endLineNumber?f={scrollTop:f.scrollTop,scrollLeft:0}:n.range?this._horizontalRevealRequest=new Ot(n.minimalReveal,n.range.startLineNumber,n.range.startColumn,n.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),f.scrollTop,n.scrollType):n.selections&&n.selections.length>0&&(this._horizontalRevealRequest=new qt(n.minimalReveal,n.selections,this._context.viewLayout.getCurrentScrollTop(),f.scrollTop,n.scrollType)):this._horizontalRevealRequest=null;const T=Math.abs(this._context.viewLayout.getCurrentScrollTop()-f.scrollTop)<=this._lineHeight?1:n.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(f,T),!0}onScrollChanged(n){if(this._horizontalRevealRequest&&n.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&n.scrollTopChanged){const a=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),f=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(n.scrollTop<a||n.scrollTop>f)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(n.scrollWidth),this._visibleLines.onScrollChanged(n)||!0}onTokensChanged(n){return this._visibleLines.onTokensChanged(n)}onZonesChanged(n){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(n)}onThemeChanged(n){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(n,a){const f=this._getViewLineDomNode(n);if(f===null)return null;const y=this._getLineNumberFor(f);if(y===-1||y<1||y>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(y)===1)return new Ue.y(y,1);const T=this._visibleLines.getStartLineNumber(),J=this._visibleLines.getEndLineNumber();if(y<T||y>J)return null;let se=this._visibleLines.getVisibleLine(y).getColumnOfNodeOffset(n,a);const be=this._context.viewModel.getLineMinColumn(y);return se<be&&(se=be),new Ue.y(y,se)}_getViewLineDomNode(n){for(;n&&n.nodeType===1;){if(n.className===qe.Gb.CLASS_NAME)return n;n=n.parentElement}return null}_getLineNumberFor(n){const a=this._visibleLines.getStartLineNumber(),f=this._visibleLines.getEndLineNumber();for(let y=a;y<=f;y++){const T=this._visibleLines.getVisibleLine(y);if(n===T.getDomNode())return y}return-1}getLineWidth(n){const a=this._visibleLines.getStartLineNumber(),f=this._visibleLines.getEndLineNumber();if(n<a||n>f)return-1;const y=new ht(this.domNode.domNode,this._textRangeRestingSpot),T=this._visibleLines.getVisibleLine(n).getWidth(y);return this._updateLineWidthsSlowIfDomDidLayout(y),T}linesVisibleRangesForRange(n,a){if(this.shouldRender())return null;const f=n.endLineNumber,y=x.Q.intersectRanges(n,this._lastRenderedData.getCurrentVisibleRange());if(!y)return null;const T=[];let J=0;const se=new ht(this.domNode.domNode,this._textRangeRestingSpot);let be=0;a&&(be=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Ue.y(y.startLineNumber,1)).lineNumber);const Oe=this._visibleLines.getStartLineNumber(),Ge=this._visibleLines.getEndLineNumber();for(let je=y.startLineNumber;je<=y.endLineNumber;je++){if(je<Oe||je>Ge)continue;const nt=je===y.startLineNumber?y.startColumn:1,lt=je!==y.endLineNumber,bt=lt?this._context.viewModel.getLineMaxColumn(je):y.endColumn,xt=this._visibleLines.getVisibleLine(je).getVisibleRangesForRange(je,nt,bt,se);if(xt){if(a&&je<f){const At=be;be=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Ue.y(je+1,1)).lineNumber,At!==be&&(xt.ranges[xt.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}T[J++]=new Rn.BG(xt.outsideRenderedLine,je,Rn.Y.from(xt.ranges),lt)}}return this._updateLineWidthsSlowIfDomDidLayout(se),J===0?null:T}_visibleRangesForLineRange(n,a,f){if(this.shouldRender()||n<this._visibleLines.getStartLineNumber()||n>this._visibleLines.getEndLineNumber())return null;const y=new ht(this.domNode.domNode,this._textRangeRestingSpot),T=this._visibleLines.getVisibleLine(n).getVisibleRangesForRange(n,a,f,y);return this._updateLineWidthsSlowIfDomDidLayout(y),T}visibleRangeForPosition(n){const a=this._visibleRangesForLineRange(n.lineNumber,n.column,n.column);return a?new Rn.qN(a.outsideRenderedLine,a.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(n){n.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(n){const a=this._visibleLines.getStartLineNumber(),f=this._visibleLines.getEndLineNumber();let y=1,T=!0;for(let J=a;J<=f;J++){const se=this._visibleLines.getVisibleLine(J);if(n&&!se.getWidthIsFast()){T=!1;continue}y=Math.max(y,se.getWidth(null))}return T&&a===1&&f===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(y),T}_checkMonospaceFontAssumptions(){let n=-1,a=-1;const f=this._visibleLines.getStartLineNumber(),y=this._visibleLines.getEndLineNumber();for(let T=f;T<=y;T++){const J=this._visibleLines.getVisibleLine(T);if(J.needsMonospaceFontCheck()){const se=J.getWidth(null);se>a&&(a=se,n=T)}}if(n!==-1&&!this._visibleLines.getVisibleLine(n).monospaceAssumptionsAreValid())for(let T=f;T<=y;T++)this._visibleLines.getVisibleLine(T).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(n){if(this._visibleLines.renderLines(n),this._lastRenderedData.setCurrentVisibleRange(n.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const f=this._horizontalRevealRequest;if(n.startLineNumber<=f.minLineNumber&&f.maxLineNumber<=n.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const y=this._computeScrollLeftToReveal(f);y&&(this._isViewportWrapping||this._ensureMaxLineWidth(y.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:y.scrollLeft},f.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),m.j9&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const f=this._visibleLines.getStartLineNumber(),y=this._visibleLines.getEndLineNumber();for(let T=f;T<=y;T++)if(this._visibleLines.getVisibleLine(T).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const a=this._context.viewLayout.getCurrentScrollTop()-n.bigNumbersDelta;this._linesContent.setTop(-a),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(n){const a=Math.ceil(n);this._maxLineWidth<a&&(this._maxLineWidth=a,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(n,a,f,y,T,J){const se=n.top,be=n.height,Oe=se+be;let Ge,je,nt;if(T&&T.length>0){let Gt=T[0].startLineNumber,ti=T[0].endLineNumber;for(let li=1,ki=T.length;li<ki;li++){const Ti=T[li];Gt=Math.min(Gt,Ti.startLineNumber),ti=Math.max(ti,Ti.endLineNumber)}Ge=!1,je=this._context.viewLayout.getVerticalOffsetForLineNumber(Gt),nt=this._context.viewLayout.getVerticalOffsetForLineNumber(ti)+this._lineHeight}else if(y)Ge=!0,je=this._context.viewLayout.getVerticalOffsetForLineNumber(y.startLineNumber),nt=this._context.viewLayout.getVerticalOffsetForLineNumber(y.endLineNumber)+this._lineHeight;else return-1;const lt=(a==="mouse"||f)&&this._cursorSurroundingLinesStyle==="default";let bt=0,xt=0;if(lt)f||(bt=this._lineHeight);else{const Gt=be/this._lineHeight,ti=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),li=Math.min(Gt/2,ti);bt=li*this._lineHeight,xt=Math.max(0,li-1)*this._lineHeight}f||(J===0||J===4)&&(xt+=this._lineHeight),je-=bt,nt+=xt;let At;if(nt-je>be){if(!Ge)return-1;At=je}else if(J===5||J===6)if(J===6&&se<=je&&nt<=Oe)At=se;else{const Gt=Math.max(5*this._lineHeight,be*.2),ti=je-Gt,li=nt-be;At=Math.max(li,ti)}else if(J===1||J===2)if(J===2&&se<=je&&nt<=Oe)At=se;else{const Gt=(je+nt)/2;At=Math.max(0,Gt-be/2)}else At=this._computeMinimumScrolling(se,Oe,je,nt,J===3,J===4);return At}_computeScrollLeftToReveal(n){const a=this._context.viewLayout.getCurrentViewport(),f=this._context.configuration.options.get(146),y=a.left,T=y+a.width-f.verticalScrollbarWidth;let J=1073741824,se=0;if(n.type==="range"){const Oe=this._visibleRangesForLineRange(n.lineNumber,n.startColumn,n.endColumn);if(!Oe)return null;for(const Ge of Oe.ranges)J=Math.min(J,Math.round(Ge.left)),se=Math.max(se,Math.round(Ge.left+Ge.width))}else for(const Oe of n.selections){if(Oe.startLineNumber!==Oe.endLineNumber)return null;const Ge=this._visibleRangesForLineRange(Oe.startLineNumber,Oe.startColumn,Oe.endColumn);if(!Ge)return null;for(const je of Ge.ranges)J=Math.min(J,Math.round(je.left)),se=Math.max(se,Math.round(je.left+je.width))}return n.minimalReveal||(J=Math.max(0,J-Si.HORIZONTAL_EXTRA_PX),se+=this._revealHorizontalRightPadding),n.type==="selections"&&se-J>a.width?null:{scrollLeft:this._computeMinimumScrolling(y,T,J,se),maxHorizontalOffset:se}}_computeMinimumScrolling(n,a,f,y,T,J){n=n|0,a=a|0,f=f|0,y=y|0,T=!!T,J=!!J;const se=a-n;if(y-f<se){if(T)return f;if(J)return Math.max(0,y-se);if(f<n)return f;if(y>a)return Math.max(0,y-se)}else return f;return n}}class mi extends Fi{constructor(n){super(),this._context=n;const f=this._context.configuration.options.get(146);this._decorationsLeft=f.decorationsLeft,this._decorationsWidth=f.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(n){const f=this._context.configuration.options.get(146);return this._decorationsLeft=f.decorationsLeft,this._decorationsWidth=f.decorationsWidth,!0}onDecorationsChanged(n){return!0}onFlushed(n){return!0}onLinesChanged(n){return!0}onLinesDeleted(n){return!0}onLinesInserted(n){return!0}onScrollChanged(n){return n.scrollTopChanged}onZonesChanged(n){return!0}_getDecorations(n){const a=n.getDecorationsInViewport(),f=[];let y=0;for(let T=0,J=a.length;T<J;T++){const se=a[T],be=se.options.linesDecorationsClassName,Oe=se.options.zIndex;be&&(f[y++]=new Mn(se.range.startLineNumber,se.range.endLineNumber,be,se.options.linesDecorationsTooltip??null,Oe));const Ge=se.options.firstLineDecorationClassName;Ge&&(f[y++]=new Mn(se.range.startLineNumber,se.range.startLineNumber,Ge,se.options.linesDecorationsTooltip??null,Oe))}return f}prepareRender(n){const a=n.visibleRange.startLineNumber,f=n.visibleRange.endLineNumber,y=this._render(a,f,this._getDecorations(n)),T=this._decorationsLeft.toString(),J=this._decorationsWidth.toString(),se='" style="left:'+T+"px;width:"+J+'px;"></div>',be=[];for(let Oe=a;Oe<=f;Oe++){const Ge=Oe-a,je=y[Ge].getDecorations();let nt="";for(const lt of je){let bt='<div class="cldr '+lt.className;lt.tooltip!==null&&(bt+='" title="'+lt.tooltip),bt+=se,nt+=bt}be[Ge]=nt}this._renderResult=be}render(n,a){return this._renderResult?this._renderResult[a-n]:""}}class qi extends Fi{constructor(n){super(),this._context=n,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(n){return!0}onDecorationsChanged(n){return!0}onFlushed(n){return!0}onLinesChanged(n){return!0}onLinesDeleted(n){return!0}onLinesInserted(n){return!0}onScrollChanged(n){return n.scrollTopChanged}onZonesChanged(n){return!0}_getDecorations(n){const a=n.getDecorationsInViewport(),f=[];let y=0;for(let T=0,J=a.length;T<J;T++){const se=a[T],be=se.options.marginClassName,Oe=se.options.zIndex;be&&(f[y++]=new Mn(se.range.startLineNumber,se.range.endLineNumber,be,null,Oe))}return f}prepareRender(n){const a=n.visibleRange.startLineNumber,f=n.visibleRange.endLineNumber,y=this._render(a,f,this._getDecorations(n)),T=[];for(let J=a;J<=f;J++){const se=J-a,be=y[se].getDecorations();let Oe="";for(const Ge of be)Oe+='<div class="cmdr '+Ge.className+'" style=""></div>';T[se]=Oe}this._renderResult=T}render(n,a){return this._renderResult?this._renderResult[a-n]:""}}var Wi=c(61329);class Ei{static{this.Empty=new Ei(0,0,0,0)}constructor(n,a,f,y){this._rgba8Brand=void 0,this.r=Ei._clamp(n),this.g=Ei._clamp(a),this.b=Ei._clamp(f),this.a=Ei._clamp(y)}equals(n){return this.r===n.r&&this.g===n.g&&this.b===n.b&&this.a===n.a}static _clamp(n){return n<0?0:n>255?255:n|0}}class Qi extends I.jG{static{this._INSTANCE=null}static getInstance(){return this._INSTANCE||(this._INSTANCE=(0,I.lC)(new Qi)),this._INSTANCE}constructor(){super(),this._onDidChange=new A.vl,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(wi.dG.onDidChange(n=>{n.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const n=wi.dG.getColorMap();if(!n){this._colors=[Ei.Empty],this._backgroundIsLight=!0;return}this._colors=[Ei.Empty];for(let f=1;f<n.length;f++){const y=n[f].rgba;this._colors[f]=new Ei(y.r,y.g,y.b,Math.round(y.a*255))}const a=n[2].getRelativeLuminance();this._backgroundIsLight=a>=.5,this._onDidChange.fire(void 0)}getColor(n){return(n<1||n>=this._colors.length)&&(n=2),this._colors[n]}backgroundIsLight(){return this._backgroundIsLight}}var on=c(42577),an=c(19867);const Zi=(()=>{const st=[];for(let n=32;n<=126;n++)st.push(n);return st.push(65533),st})(),Et=(st,n)=>(st-=32,st<0||st>96?n<=2?(st+96)%96:95:st);var _e=c(34435);class ue{constructor(n,a){this.scale=a,this._minimapCharRendererBrand=void 0,this.charDataNormal=ue.soften(n,12/15),this.charDataLight=ue.soften(n,50/60)}static soften(n,a){const f=new Uint8ClampedArray(n.length);for(let y=0,T=n.length;y<T;y++)f[y]=(0,_e.W)(n[y]*a);return f}renderChar(n,a,f,y,T,J,se,be,Oe,Ge,je){const nt=1*this.scale,lt=2*this.scale,bt=je?1:lt;if(a+nt>n.width||f+bt>n.height)return;const xt=Ge?this.charDataLight:this.charDataNormal,At=Et(y,Oe),Gt=n.width*4,ti=se.r,li=se.g,ki=se.b,Ti=T.r-ti,Yi=T.g-li,Ai=T.b-ki,Ji=Math.max(J,be),xi=n.data;let cn=At*nt*lt,rn=f*Gt+a*4;for(let gn=0;gn<bt;gn++){let Sn=rn;for(let Vn=0;Vn<nt;Vn++){const jn=xt[cn++]/255*(J/255);xi[Sn++]=ti+Ti*jn,xi[Sn++]=li+Yi*jn,xi[Sn++]=ki+Ai*jn,xi[Sn++]=Ji}rn+=Gt}}blockRenderChar(n,a,f,y,T,J,se,be){const Oe=1*this.scale,Ge=2*this.scale,je=be?1:Ge;if(a+Oe>n.width||f+je>n.height)return;const nt=n.width*4,lt=.5*(T/255),bt=J.r,xt=J.g,At=J.b,Gt=y.r-bt,ti=y.g-xt,li=y.b-At,ki=bt+Gt*lt,Ti=xt+ti*lt,Yi=At+li*lt,Ai=Math.max(T,se),Ji=n.data;let xi=f*nt+a*4;for(let cn=0;cn<je;cn++){let rn=xi;for(let gn=0;gn<Oe;gn++)Ji[rn++]=ki,Ji[rn++]=Ti,Ji[rn++]=Yi,Ji[rn++]=Ai;xi+=nt}}}var Ee=c(74730);const Ie={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},ze=st=>{const n=new Uint8ClampedArray(st.length/2);for(let a=0;a<st.length;a+=2)n[a>>1]=Ie[st[a]]<<4|Ie[st[a+1]]&15;return n},Je={1:(0,Ee.P)(()=>ze("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:(0,Ee.P)(()=>ze("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class rt{static create(n,a){if(this.lastCreated&&n===this.lastCreated.scale&&a===this.lastFontFamily)return this.lastCreated;let f;return Je[n]?f=new ue(Je[n](),n):f=rt.createFromSampleData(rt.createSampleData(a).data,n),this.lastFontFamily=a,this.lastCreated=f,f}static createSampleData(n){const a=document.createElement("canvas"),f=a.getContext("2d");a.style.height="16px",a.height=16,a.width=96*10,a.style.width=96*10+"px",f.fillStyle="#ffffff",f.font=`bold 16px ${n}`,f.textBaseline="middle";let y=0;for(const T of Zi)f.fillText(String.fromCharCode(T),y,16/2),y+=10;return f.getImageData(0,0,96*10,16)}static createFromSampleData(n,a){if(n.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const y=rt._downsample(n,a);return new ue(y,a)}static _downsampleChar(n,a,f,y,T){const J=1*T,se=2*T;let be=y,Oe=0;for(let Ge=0;Ge<se;Ge++){const je=Ge/se*16,nt=(Ge+1)/se*16;for(let lt=0;lt<J;lt++){const bt=lt/J*10,xt=(lt+1)/J*10;let At=0,Gt=0;for(let li=je;li<nt;li++){const ki=a+Math.floor(li)*3840,Ti=1-(li-Math.floor(li));for(let Yi=bt;Yi<xt;Yi++){const Ai=1-(Yi-Math.floor(Yi)),Ji=ki+Math.floor(Yi)*4,xi=Ai*Ti;Gt+=xi,At+=n[Ji]*n[Ji+3]/255*xi}}const ti=At/Gt;Oe=Math.max(Oe,ti),f[be++]=(0,_e.W)(ti)}}return Oe}static _downsample(n,a){const f=2*a*1*a,y=f*96,T=new Uint8ClampedArray(y);let J=0,se=0,be=0;for(let Oe=0;Oe<96;Oe++)be=Math.max(be,this._downsampleChar(n,se,T,J,a)),J+=f,se+=10*4;if(be>0){const Oe=255/be;for(let Ge=0;Ge<y;Ge++)T[Ge]*=Oe}return T}}var Ct=c(41461),jt=c(81064);const It=140,Ut=2;class Bt{constructor(n,a,f){const y=n.options,T=y.get(144),J=y.get(146),se=J.minimap,be=y.get(50),Oe=y.get(73);this.renderMinimap=se.renderMinimap,this.size=Oe.size,this.minimapHeightIsEditorHeight=se.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=y.get(106),this.paddingTop=y.get(84).top,this.paddingBottom=y.get(84).bottom,this.showSlider=Oe.showSlider,this.autohide=Oe.autohide,this.pixelRatio=T,this.typicalHalfwidthCharacterWidth=be.typicalHalfwidthCharacterWidth,this.lineHeight=y.get(67),this.minimapLeft=se.minimapLeft,this.minimapWidth=se.minimapWidth,this.minimapHeight=J.height,this.canvasInnerWidth=se.minimapCanvasInnerWidth,this.canvasInnerHeight=se.minimapCanvasInnerHeight,this.canvasOuterWidth=se.minimapCanvasOuterWidth,this.canvasOuterHeight=se.minimapCanvasOuterHeight,this.isSampling=se.minimapIsSampling,this.editorHeight=J.height,this.fontScale=se.minimapScale,this.minimapLineHeight=se.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=jt.z,this.sectionHeaderFontSize=Oe.sectionHeaderFontSize*T,this.sectionHeaderLetterSpacing=Oe.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=Bt._getSectionHeaderColor(a,f.getColor(1)),this.charRenderer=(0,Ee.P)(()=>rt.create(this.fontScale,be.fontFamily)),this.defaultBackgroundColor=f.getColor(2),this.backgroundColor=Bt._getMinimapBackground(a,this.defaultBackgroundColor),this.foregroundAlpha=Bt._getMinimapForegroundOpacity(a)}static _getMinimapBackground(n,a){const f=n.getColor(an.ILr);return f?new Ei(f.rgba.r,f.rgba.g,f.rgba.b,Math.round(255*f.rgba.a)):a}static _getMinimapForegroundOpacity(n){const a=n.getColor(an.K1Z);return a?Ei._clamp(Math.round(255*a.rgba.a)):255}static _getSectionHeaderColor(n,a){const f=n.getColor(an.By2);return f?new Ei(f.rgba.r,f.rgba.g,f.rgba.b,Math.round(255*f.rgba.a)):a}equals(n){return this.renderMinimap===n.renderMinimap&&this.size===n.size&&this.minimapHeightIsEditorHeight===n.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===n.scrollBeyondLastLine&&this.paddingTop===n.paddingTop&&this.paddingBottom===n.paddingBottom&&this.showSlider===n.showSlider&&this.autohide===n.autohide&&this.pixelRatio===n.pixelRatio&&this.typicalHalfwidthCharacterWidth===n.typicalHalfwidthCharacterWidth&&this.lineHeight===n.lineHeight&&this.minimapLeft===n.minimapLeft&&this.minimapWidth===n.minimapWidth&&this.minimapHeight===n.minimapHeight&&this.canvasInnerWidth===n.canvasInnerWidth&&this.canvasInnerHeight===n.canvasInnerHeight&&this.canvasOuterWidth===n.canvasOuterWidth&&this.canvasOuterHeight===n.canvasOuterHeight&&this.isSampling===n.isSampling&&this.editorHeight===n.editorHeight&&this.fontScale===n.fontScale&&this.minimapLineHeight===n.minimapLineHeight&&this.minimapCharWidth===n.minimapCharWidth&&this.sectionHeaderFontSize===n.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===n.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(n.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(n.backgroundColor)&&this.foregroundAlpha===n.foregroundAlpha}}class Kt{constructor(n,a,f,y,T,J,se,be,Oe){this.scrollTop=n,this.scrollHeight=a,this.sliderNeeded=f,this._computedSliderRatio=y,this.sliderTop=T,this.sliderHeight=J,this.topPaddingLineCount=se,this.startLineNumber=be,this.endLineNumber=Oe}getDesiredScrollTopFromDelta(n){return Math.round(this.scrollTop+n/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(n){return Math.round((n-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(n){const a=Math.max(this.startLineNumber,n.startLineNumber),f=Math.min(this.endLineNumber,n.endLineNumber);return a>f?null:[a,f]}getYForLineNumber(n,a){return+(n-this.startLineNumber+this.topPaddingLineCount)*a}static create(n,a,f,y,T,J,se,be,Oe,Ge,je){const nt=n.pixelRatio,lt=n.minimapLineHeight,bt=Math.floor(n.canvasInnerHeight/lt),xt=n.lineHeight;if(n.minimapHeightIsEditorHeight){let Yi=be*n.lineHeight+n.paddingTop+n.paddingBottom;n.scrollBeyondLastLine&&(Yi+=Math.max(0,T-n.lineHeight-n.paddingBottom));const Ai=Math.max(1,Math.floor(T*T/Yi)),Ji=Math.max(0,n.minimapHeight-Ai),xi=Ji/(Ge-T),cn=Oe*xi,rn=Ji>0,gn=Math.floor(n.canvasInnerHeight/n.minimapLineHeight),Sn=Math.floor(n.paddingTop/n.lineHeight);return new Kt(Oe,Ge,rn,xi,cn,Ai,Sn,1,Math.min(se,gn))}let At;if(J&&f!==se){const Yi=f-a+1;At=Math.floor(Yi*lt/nt)}else{const Yi=T/xt;At=Math.floor(Yi*lt/nt)}const Gt=Math.floor(n.paddingTop/xt);let ti=Math.floor(n.paddingBottom/xt);if(n.scrollBeyondLastLine){const Yi=T/xt;ti=Math.max(ti,Yi-1)}let li;if(ti>0){const Yi=T/xt;li=(Gt+se+ti-Yi-1)*lt/nt}else li=Math.max(0,(Gt+se)*lt/nt-At);li=Math.min(n.minimapHeight-At,li);const ki=li/(Ge-T),Ti=Oe*ki;if(bt>=Gt+se+ti){const Yi=li>0;return new Kt(Oe,Ge,Yi,ki,Ti,At,Gt,1,se)}else{let Yi;a>1?Yi=a+Gt:Yi=Math.max(1,Oe/xt);let Ai,Ji=Math.max(1,Math.floor(Yi-Ti*nt/lt));Ji<Gt?(Ai=Gt-Ji+1,Ji=1):(Ai=0,Ji=Math.max(1,Ji-Gt)),je&&je.scrollHeight===Ge&&(je.scrollTop>Oe&&(Ji=Math.min(Ji,je.startLineNumber),Ai=Math.max(Ai,je.topPaddingLineCount)),je.scrollTop<Oe&&(Ji=Math.max(Ji,je.startLineNumber),Ai=Math.min(Ai,je.topPaddingLineCount)));const xi=Math.min(se,Ji-Ai+bt-1),cn=(Oe-y)/xt;let rn;return Oe>=n.paddingTop?rn=(a-Ji+Ai+cn)*lt/nt:rn=Oe/n.paddingTop*(Ai+cn)*lt/nt,new Kt(Oe,Ge,!0,ki,rn,At,Ai,Ji,xi)}}}class ct{static{this.INVALID=new ct(-1)}constructor(n){this.dy=n}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}class Ht{constructor(n,a,f){this.renderedLayout=n,this._imageData=a,this._renderedLines=new hi({createLine:()=>ct.INVALID}),this._renderedLines._set(n.startLineNumber,f)}linesEquals(n){if(!this.scrollEquals(n))return!1;const f=this._renderedLines._get().lines;for(let y=0,T=f.length;y<T;y++)if(f[y].dy===-1)return!1;return!0}scrollEquals(n){return this.renderedLayout.startLineNumber===n.startLineNumber&&this.renderedLayout.endLineNumber===n.endLineNumber}_get(){const n=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:n.rendLineNumberStart,lines:n.lines}}onLinesChanged(n,a){return this._renderedLines.onLinesChanged(n,a)}onLinesDeleted(n,a){this._renderedLines.onLinesDeleted(n,a)}onLinesInserted(n,a){this._renderedLines.onLinesInserted(n,a)}onTokensChanged(n){return this._renderedLines.onTokensChanged(n)}}class Qt{constructor(n,a,f,y){this._backgroundFillData=Qt._createBackgroundFillData(a,f,y),this._buffers=[n.createImageData(a,f),n.createImageData(a,f)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const n=this._buffers[this._lastUsedBuffer];return n.data.set(this._backgroundFillData),n}static _createBackgroundFillData(n,a,f){const y=f.r,T=f.g,J=f.b,se=f.a,be=new Uint8ClampedArray(n*a*4);let Oe=0;for(let Ge=0;Ge<a;Ge++)for(let je=0;je<n;je++)be[Oe]=y,be[Oe+1]=T,be[Oe+2]=J,be[Oe+3]=se,Oe+=4;return be}}class fi{static compute(n,a,f){if(n.renderMinimap===0||!n.isSampling)return[null,[]];const{minimapLineCount:y}=Q.xZ.computeContainedMinimapLineCount({viewLineCount:a,scrollBeyondLastLine:n.scrollBeyondLastLine,paddingTop:n.paddingTop,paddingBottom:n.paddingBottom,height:n.editorHeight,lineHeight:n.lineHeight,pixelRatio:n.pixelRatio}),T=a/y,J=T/2;if(!f||f.minimapLines.length===0){const At=[];if(At[0]=1,y>1){for(let Gt=0,ti=y-1;Gt<ti;Gt++)At[Gt]=Math.round(Gt*T+J);At[y-1]=a}return[new fi(T,At),[]]}const se=f.minimapLines,be=se.length,Oe=[];let Ge=0,je=0,nt=1;const lt=10;let bt=[],xt=null;for(let At=0;At<y;At++){const Gt=Math.max(nt,Math.round(At*T)),ti=Math.max(Gt,Math.round((At+1)*T));for(;Ge<be&&se[Ge]<Gt;){if(bt.length<lt){const ki=Ge+1+je;xt&&xt.type==="deleted"&&xt._oldIndex===Ge-1?xt.deleteToLineNumber++:(xt={type:"deleted",_oldIndex:Ge,deleteFromLineNumber:ki,deleteToLineNumber:ki},bt.push(xt)),je--}Ge++}let li;if(Ge<be&&se[Ge]<=ti)li=se[Ge],Ge++;else if(At===0?li=1:At+1===y?li=a:li=Math.round(At*T+J),bt.length<lt){const ki=Ge+1+je;xt&&xt.type==="inserted"&&xt._i===At-1?xt.insertToLineNumber++:(xt={type:"inserted",_i:At,insertFromLineNumber:ki,insertToLineNumber:ki},bt.push(xt)),je++}Oe[At]=li,nt=li}if(bt.length<lt)for(;Ge<be;){const At=Ge+1+je;xt&&xt.type==="deleted"&&xt._oldIndex===Ge-1?xt.deleteToLineNumber++:(xt={type:"deleted",_oldIndex:Ge,deleteFromLineNumber:At,deleteToLineNumber:At},bt.push(xt)),je--,Ge++}else bt=[{type:"flush"}];return[new fi(T,Oe),bt]}constructor(n,a){this.samplingRatio=n,this.minimapLines=a}modelLineToMinimapLine(n){return Math.min(this.minimapLines.length,Math.max(1,Math.round(n/this.samplingRatio)))}modelLineRangeToMinimapLineRange(n,a){let f=this.modelLineToMinimapLine(n)-1;for(;f>0&&this.minimapLines[f-1]>=n;)f--;let y=this.modelLineToMinimapLine(a)-1;for(;y+1<this.minimapLines.length&&this.minimapLines[y+1]<=a;)y++;if(f===y){const T=this.minimapLines[f];if(T<n||T>a)return null}return[f+1,y+1]}decorationLineRangeToMinimapLineRange(n,a){let f=this.modelLineToMinimapLine(n),y=this.modelLineToMinimapLine(a);return n!==a&&y===f&&(y===this.minimapLines.length?f>1&&f--:y++),[f,y]}onLinesDeleted(n){const a=n.toLineNumber-n.fromLineNumber+1;let f=this.minimapLines.length,y=0;for(let T=this.minimapLines.length-1;T>=0&&!(this.minimapLines[T]<n.fromLineNumber);T--)this.minimapLines[T]<=n.toLineNumber?(this.minimapLines[T]=Math.max(1,n.fromLineNumber-1),f=Math.min(f,T),y=Math.max(y,T)):this.minimapLines[T]-=a;return[f,y]}onLinesInserted(n){const a=n.toLineNumber-n.fromLineNumber+1;for(let f=this.minimapLines.length-1;f>=0&&!(this.minimapLines[f]<n.fromLineNumber);f--)this.minimapLines[f]+=a}}class en extends ye{constructor(n){super(n),this._sectionHeaderCache=new Ct.qK(10,1.5),this.tokensColorTracker=Qi.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Bt(this._context.configuration,this._context.theme,this.tokensColorTracker);const[a]=fi.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=a,this._shouldCheckSampling=!1,this._actual=new di(n.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const n=new Bt(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(n)?!1:(this.options=n,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(n){return this._onOptionsMaybeChanged()}onCursorStateChanged(n){return this._selections=n.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(n){return n.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(n){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(n){if(this._samplingState){const a=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.fromLineNumber+n.count-1);return a?this._actual.onLinesChanged(a[0],a[1]-a[0]+1):!1}else return this._actual.onLinesChanged(n.fromLineNumber,n.count)}onLinesDeleted(n){if(this._samplingState){const[a,f]=this._samplingState.onLinesDeleted(n);return a<=f&&this._actual.onLinesChanged(a+1,f-a+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(n.fromLineNumber,n.toLineNumber)}onLinesInserted(n){return this._samplingState?(this._samplingState.onLinesInserted(n),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(n.fromLineNumber,n.toLineNumber)}onScrollChanged(n){return this._actual.onScrollChanged()}onThemeChanged(n){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(n){if(this._samplingState){const a=[];for(const f of n.ranges){const y=this._samplingState.modelLineRangeToMinimapLineRange(f.fromLineNumber,f.toLineNumber);y&&a.push({fromLineNumber:y[0],toLineNumber:y[1]})}return a.length?this._actual.onTokensChanged(a):!1}else return this._actual.onTokensChanged(n.ranges)}onTokensColorsChanged(n){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(n){return this._actual.onZonesChanged()}prepareRender(n){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(n){let a=n.visibleRange.startLineNumber,f=n.visibleRange.endLineNumber;this._samplingState&&(a=this._samplingState.modelLineToMinimapLine(a),f=this._samplingState.modelLineToMinimapLine(f));const y={viewportContainsWhitespaceGaps:n.viewportData.whitespaceViewportData.length>0,scrollWidth:n.scrollWidth,scrollHeight:n.scrollHeight,viewportStartLineNumber:a,viewportEndLineNumber:f,viewportStartLineNumberVerticalOffset:n.getVerticalOffsetForLineNumber(a),scrollTop:n.scrollTop,scrollLeft:n.scrollLeft,viewportWidth:n.viewportWidth,viewportHeight:n.viewportHeight};this._actual.render(y)}_recreateLineSampling(){this._minimapSelections=null;const n=!!this._samplingState,[a,f]=fi.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=a,n&&this._samplingState)for(const y of f)switch(y.type){case"deleted":this._actual.onLinesDeleted(y.deleteFromLineNumber,y.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(y.insertFromLineNumber,y.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(n){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[n-1]):this._context.viewModel.getLineContent(n)}getLineMaxColumn(n){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[n-1]):this._context.viewModel.getLineMaxColumn(n)}getMinimapLinesRenderingData(n,a,f){if(this._samplingState){const y=[];for(let T=0,J=a-n+1;T<J;T++)f[T]?y[T]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[n+T-1]):y[T]=null;return y}return this._context.viewModel.getMinimapLinesRenderingData(n,a,f).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const n of this._selections){const[a,f]=this._samplingState.decorationLineRangeToMinimapLineRange(n.startLineNumber,n.endLineNumber);this._minimapSelections.push(new Xt.L(a,n.startColumn,f,n.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(n,a){const f=this._getMinimapDecorationsInViewport(n,a).filter(y=>!y.options.minimap?.sectionHeaderStyle);if(this._samplingState){const y=[];for(const T of f){if(!T.options.minimap)continue;const J=T.range,se=this._samplingState.modelLineToMinimapLine(J.startLineNumber),be=this._samplingState.modelLineToMinimapLine(J.endLineNumber);y.push(new on.vo(new x.Q(se,J.startColumn,be,J.endColumn),T.options))}return y}return f}getSectionHeaderDecorationsInViewport(n,a){const f=this.options.minimapLineHeight,T=this.options.sectionHeaderFontSize/f;return n=Math.floor(Math.max(1,n-T)),this._getMinimapDecorationsInViewport(n,a).filter(J=>!!J.options.minimap?.sectionHeaderStyle)}_getMinimapDecorationsInViewport(n,a){let f;if(this._samplingState){const y=this._samplingState.minimapLines[n-1],T=this._samplingState.minimapLines[a-1];f=new x.Q(y,1,T,this._context.viewModel.getLineMaxColumn(T))}else f=new x.Q(n,1,a,this._context.viewModel.getLineMaxColumn(a));return this._context.viewModel.getMinimapDecorationsInRange(f)}getSectionHeaderText(n,a){const f=n.options.minimap?.sectionHeaderText;if(!f)return null;const y=this._sectionHeaderCache.get(f);if(y)return y;const T=a(f);return this._sectionHeaderCache.set(f,T),T}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(n){this._samplingState&&(n=this._samplingState.minimapLines[n-1]),this._context.viewModel.revealRange("mouse",!1,new x.Q(n,1,n,1),1,0)}setScrollTop(n){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:n},1)}}class di extends I.jG{constructor(n,a){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=n,this._model=a,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(an.yr0),this._domNode=(0,Y.Z)(document.createElement("div")),Ke.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=(0,Y.Z)(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=(0,Y.Z)(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=(0,Y.Z)(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=(0,Y.Z)(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=(0,Y.Z)(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=w.b2(this._domNode.domNode,w.Bx.POINTER_DOWN,f=>{if(f.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(f.button===0&&this._lastRenderData){const Oe=w.BK(this._slider.domNode),Ge=Oe.top+Oe.height/2;this._startSliderDragging(f,Ge,this._lastRenderData.renderedLayout)}return}const T=this._model.options.minimapLineHeight,J=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*f.offsetY;let be=Math.floor(J/T)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;be=Math.min(be,this._model.getLineCount()),this._model.revealLineNumber(be)}),this._sliderPointerMoveMonitor=new Wi._,this._sliderPointerDownListener=w.b2(this._slider.domNode,w.Bx.POINTER_DOWN,f=>{f.preventDefault(),f.stopPropagation(),f.button===0&&this._lastRenderData&&this._startSliderDragging(f,f.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Dt.q.addTarget(this._domNode.domNode),this._sliderTouchStartListener=w.ko(this._domNode.domNode,Dt.B.Start,f=>{f.preventDefault(),f.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(f))},{passive:!1}),this._sliderTouchMoveListener=w.ko(this._domNode.domNode,Dt.B.Change,f=>{f.preventDefault(),f.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(f)},{passive:!1}),this._sliderTouchEndListener=w.b2(this._domNode.domNode,Dt.B.End,f=>{f.preventDefault(),f.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(n,a,f){if(!n.target||!(n.target instanceof Element))return;const y=n.pageX;this._slider.toggleClassName("active",!0);const T=(J,se)=>{const be=w.BK(this._domNode.domNode),Oe=Math.min(Math.abs(se-y),Math.abs(se-be.left),Math.abs(se-be.left-be.width));if(m.uF&&Oe>It){this._model.setScrollTop(f.scrollTop);return}const Ge=J-a;this._model.setScrollTop(f.getDesiredScrollTopFromDelta(Ge))};n.pageY!==a&&T(n.pageY,y),this._sliderPointerMoveMonitor.startMonitoring(n.target,n.pointerId,n.buttons,J=>T(J.pageY,J.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(n){const a=this._domNode.domNode.getBoundingClientRect().top,f=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(n.pageY-a);this._model.setScrollTop(f)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const n=["minimap"];return this._model.options.showSlider==="always"?n.push("slider-always"):n.push("slider-mouseover"),this._model.options.autohide&&n.push("autohide"),n.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new Qt(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(n,a){return this._lastRenderData?this._lastRenderData.onLinesChanged(n,a):!1}onLinesDeleted(n,a){return this._lastRenderData?.onLinesDeleted(n,a),!0}onLinesInserted(n,a){return this._lastRenderData?.onLinesInserted(n,a),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(an.yr0),this._renderDecorations=!0,!0}onTokensChanged(n){return this._lastRenderData?this._lastRenderData.onTokensChanged(n):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(n){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}n.scrollLeft+n.viewportWidth>=n.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const f=Kt.create(this._model.options,n.viewportStartLineNumber,n.viewportEndLineNumber,n.viewportStartLineNumberVerticalOffset,n.viewportHeight,n.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),n.scrollTop,n.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(f.sliderNeeded?"block":"none"),this._slider.setTop(f.sliderTop),this._slider.setHeight(f.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(f.sliderHeight),this.renderDecorations(f),this._lastRenderData=this.renderLines(f)}renderDecorations(n){if(this._renderDecorations){this._renderDecorations=!1;const a=this._model.getSelections();a.sort(x.Q.compareRangesUsingStarts);const f=this._model.getMinimapDecorationsInViewport(n.startLineNumber,n.endLineNumber);f.sort((nt,lt)=>(nt.options.zIndex||0)-(lt.options.zIndex||0));const{canvasInnerWidth:y,canvasInnerHeight:T}=this._model.options,J=this._model.options.minimapLineHeight,se=this._model.options.minimapCharWidth,be=this._model.getOptions().tabSize,Oe=this._decorationsCanvas.domNode.getContext("2d");Oe.clearRect(0,0,y,T);const Ge=new $t(n.startLineNumber,n.endLineNumber,!1);this._renderSelectionLineHighlights(Oe,a,Ge,n,J),this._renderDecorationsLineHighlights(Oe,f,Ge,n,J);const je=new $t(n.startLineNumber,n.endLineNumber,null);this._renderSelectionsHighlights(Oe,a,je,n,J,be,se,y),this._renderDecorationsHighlights(Oe,f,je,n,J,be,se,y),this._renderSectionHeaders(n)}}_renderSelectionLineHighlights(n,a,f,y,T){if(!this._selectionColor||this._selectionColor.isTransparent())return;n.fillStyle=this._selectionColor.transparent(.5).toString();let J=0,se=0;for(const be of a){const Oe=y.intersectWithViewport(be);if(!Oe)continue;const[Ge,je]=Oe;for(let bt=Ge;bt<=je;bt++)f.set(bt,!0);const nt=y.getYForLineNumber(Ge,T),lt=y.getYForLineNumber(je,T);se>=nt||(se>J&&n.fillRect(Q.xq,J,n.canvas.width,se-J),J=nt),se=lt}se>J&&n.fillRect(Q.xq,J,n.canvas.width,se-J)}_renderDecorationsLineHighlights(n,a,f,y,T){const J=new Map;for(let se=a.length-1;se>=0;se--){const be=a[se],Oe=be.options.minimap;if(!Oe||Oe.position!==1)continue;const Ge=y.intersectWithViewport(be.range);if(!Ge)continue;const[je,nt]=Ge,lt=Oe.getColor(this._theme.value);if(!lt||lt.isTransparent())continue;let bt=J.get(lt.toString());bt||(bt=lt.transparent(.5).toString(),J.set(lt.toString(),bt)),n.fillStyle=bt;for(let xt=je;xt<=nt;xt++){if(f.has(xt))continue;f.set(xt,!0);const At=y.getYForLineNumber(je,T);n.fillRect(Q.xq,At,n.canvas.width,T)}}}_renderSelectionsHighlights(n,a,f,y,T,J,se,be){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const Oe of a){const Ge=y.intersectWithViewport(Oe);if(!Ge)continue;const[je,nt]=Ge;for(let lt=je;lt<=nt;lt++)this.renderDecorationOnLine(n,f,Oe,this._selectionColor,y,lt,T,T,J,se,be)}}_renderDecorationsHighlights(n,a,f,y,T,J,se,be){for(const Oe of a){const Ge=Oe.options.minimap;if(!Ge)continue;const je=y.intersectWithViewport(Oe.range);if(!je)continue;const[nt,lt]=je,bt=Ge.getColor(this._theme.value);if(!(!bt||bt.isTransparent()))for(let xt=nt;xt<=lt;xt++)switch(Ge.position){case 1:this.renderDecorationOnLine(n,f,Oe.range,bt,y,xt,T,T,J,se,be);continue;case 2:{const At=y.getYForLineNumber(xt,T);this.renderDecoration(n,bt,2,At,Ut,T);continue}}}}renderDecorationOnLine(n,a,f,y,T,J,se,be,Oe,Ge,je){const nt=T.getYForLineNumber(J,be);if(nt+se<0||nt>this._model.options.canvasInnerHeight)return;const{startLineNumber:lt,endLineNumber:bt}=f,xt=lt===J?f.startColumn:1,At=bt===J?f.endColumn:this._model.getLineMaxColumn(J),Gt=this.getXOffsetForPosition(a,J,xt,Oe,Ge,je),ti=this.getXOffsetForPosition(a,J,At,Oe,Ge,je);this.renderDecoration(n,y,Gt,nt,ti-Gt,se)}getXOffsetForPosition(n,a,f,y,T,J){if(f===1)return Q.xq;if((f-1)*T>=J)return J;let be=n.get(a);if(!be){const Oe=this._model.getLineContent(a);be=[Q.xq];let Ge=Q.xq;for(let je=1;je<Oe.length+1;je++){const nt=Oe.charCodeAt(je-1),lt=nt===9?y*T:yi.ne(nt)?2*T:T,bt=Ge+lt;if(bt>=J){be[je]=J;break}be[je]=bt,Ge=bt}n.set(a,be)}return f-1<be.length?be[f-1]:J}renderDecoration(n,a,f,y,T,J){n.fillStyle=a&&a.toString()||"",n.fillRect(f,y,T,J)}_renderSectionHeaders(n){const a=this._model.options.minimapLineHeight,f=this._model.options.sectionHeaderFontSize,y=this._model.options.sectionHeaderLetterSpacing,T=f*1.5,{canvasInnerWidth:J}=this._model.options,se=this._model.options.backgroundColor,be=`rgb(${se.r} ${se.g} ${se.b} / .7)`,Oe=this._model.options.sectionHeaderFontColor,Ge=`rgb(${Oe.r} ${Oe.g} ${Oe.b})`,je=Ge,nt=this._decorationsCanvas.domNode.getContext("2d");nt.letterSpacing=y+"px",nt.font="500 "+f+"px "+this._model.options.sectionHeaderFontFamily,nt.strokeStyle=je,nt.lineWidth=.2;const lt=this._model.getSectionHeaderDecorationsInViewport(n.startLineNumber,n.endLineNumber);lt.sort((xt,At)=>xt.range.startLineNumber-At.range.startLineNumber);const bt=di._fitSectionHeader.bind(null,nt,J-Q.xq);for(const xt of lt){const At=n.getYForLineNumber(xt.range.startLineNumber,a)+f,Gt=At-f,ti=Gt+2,li=this._model.getSectionHeaderText(xt,bt);di._renderSectionLabel(nt,li,xt.options.minimap?.sectionHeaderStyle===2,be,Ge,J,Gt,T,At,ti)}}static _fitSectionHeader(n,a,f){if(!f)return f;const y="\u2026",T=n.measureText(f).width,J=n.measureText(y).width;if(T<=a||T<=J)return f;const se=f.length,be=T/f.length,Oe=Math.floor((a-J)/be)-1;let Ge=Math.ceil(Oe/2);for(;Ge>0&&/\s/.test(f[Ge-1]);)--Ge;return f.substring(0,Ge)+y+f.substring(se-(Oe-Ge))}static _renderSectionLabel(n,a,f,y,T,J,se,be,Oe,Ge){a&&(n.fillStyle=y,n.fillRect(0,se,J,be),n.fillStyle=T,n.fillText(a,Q.xq,Oe)),f&&(n.beginPath(),n.moveTo(0,Ge),n.lineTo(J,Ge),n.closePath(),n.stroke())}renderLines(n){const a=n.startLineNumber,f=n.endLineNumber,y=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(n)){const jn=this._lastRenderData._get();return new Ht(n,jn.imageData,jn.lines)}const T=this._getBuffer();if(!T)return null;const[J,se,be]=di._renderUntouchedLines(T,n.topPaddingLineCount,a,f,y,this._lastRenderData),Oe=this._model.getMinimapLinesRenderingData(a,f,be),Ge=this._model.getOptions().tabSize,je=this._model.options.defaultBackgroundColor,nt=this._model.options.backgroundColor,lt=this._model.options.foregroundAlpha,bt=this._model.tokensColorTracker,xt=bt.backgroundIsLight(),At=this._model.options.renderMinimap,Gt=this._model.options.charRenderer(),ti=this._model.options.fontScale,li=this._model.options.minimapCharWidth,Ti=(At===1?2:3)*ti,Yi=y>Ti?Math.floor((y-Ti)/2):0,Ai=nt.a/255,Ji=new Ei(Math.round((nt.r-je.r)*Ai+je.r),Math.round((nt.g-je.g)*Ai+je.g),Math.round((nt.b-je.b)*Ai+je.b),255);let xi=n.topPaddingLineCount*y;const cn=[];for(let jn=0,Ns=f-a+1;jn<Ns;jn++)be[jn]&&di._renderLine(T,Ji,nt.a,xt,At,li,bt,lt,Gt,xi,Yi,Ge,Oe[jn],ti,y),cn[jn]=new ct(xi),xi+=y;const rn=J===-1?0:J,Sn=(se===-1?T.height:se)-rn;return this._canvas.domNode.getContext("2d").putImageData(T,0,0,0,rn,T.width,Sn),new Ht(n,T,cn)}static _renderUntouchedLines(n,a,f,y,T,J){const se=[];if(!J){for(let xi=0,cn=y-f+1;xi<cn;xi++)se[xi]=!0;return[-1,-1,se]}const be=J._get(),Oe=be.imageData.data,Ge=be.rendLineNumberStart,je=be.lines,nt=je.length,lt=n.width,bt=n.data,xt=(y-f+1)*T*lt*4;let At=-1,Gt=-1,ti=-1,li=-1,ki=-1,Ti=-1,Yi=a*T;for(let xi=f;xi<=y;xi++){const cn=xi-f,rn=xi-Ge,gn=rn>=0&&rn<nt?je[rn].dy:-1;if(gn===-1){se[cn]=!0,Yi+=T;continue}const Sn=gn*lt*4,Vn=(gn+T)*lt*4,jn=Yi*lt*4,Ns=(Yi+T)*lt*4;li===Sn&&Ti===jn?(li=Vn,Ti=Ns):(ti!==-1&&(bt.set(Oe.subarray(ti,li),ki),At===-1&&ti===0&&ti===ki&&(At=li),Gt===-1&&li===xt&&ti===ki&&(Gt=ti)),ti=Sn,li=Vn,ki=jn,Ti=Ns),se[cn]=!1,Yi+=T}ti!==-1&&(bt.set(Oe.subarray(ti,li),ki),At===-1&&ti===0&&ti===ki&&(At=li),Gt===-1&&li===xt&&ti===ki&&(Gt=ti));const Ai=At===-1?-1:At/(lt*4),Ji=Gt===-1?-1:Gt/(lt*4);return[Ai,Ji,se]}static _renderLine(n,a,f,y,T,J,se,be,Oe,Ge,je,nt,lt,bt,xt){const At=lt.content,Gt=lt.tokens,ti=n.width-J,li=xt===1;let ki=Q.xq,Ti=0,Yi=0;for(let Ai=0,Ji=Gt.getCount();Ai<Ji;Ai++){const xi=Gt.getEndOffset(Ai),cn=Gt.getForeground(Ai),rn=se.getColor(cn);for(;Ti<xi;Ti++){if(ki>ti)return;const gn=At.charCodeAt(Ti);if(gn===9){const Sn=nt-(Ti+Yi)%nt;Yi+=Sn-1,ki+=Sn*J}else if(gn===32)ki+=J;else{const Sn=yi.ne(gn)?2:1;for(let Vn=0;Vn<Sn;Vn++)if(T===2?Oe.blockRenderChar(n,ki,Ge+je,rn,be,a,f,li):Oe.renderChar(n,ki,Ge+je,gn,rn,be,a,f,bt,y,li),ki+=J,ki>ti)return}}}}}class $t{constructor(n,a,f){this._startLineNumber=n,this._endLineNumber=a,this._defaultValue=f,this._values=[];for(let y=0,T=this._endLineNumber-this._startLineNumber+1;y<T;y++)this._values[y]=f}has(n){return this.get(n)!==this._defaultValue}set(n,a){n<this._startLineNumber||n>this._endLineNumber||(this._values[n-this._startLineNumber]=a)}get(n){return n<this._startLineNumber||n>this._endLineNumber?this._defaultValue:this._values[n-this._startLineNumber]}}class vi extends ye{constructor(n,a){super(n),this._viewDomNode=a;const y=this._context.configuration.options.get(146);this._widgets={},this._verticalScrollbarWidth=y.verticalScrollbarWidth,this._minimapWidth=y.minimap.minimapWidth,this._horizontalScrollbarHeight=y.horizontalScrollbarHeight,this._editorHeight=y.height,this._editorWidth=y.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=(0,Y.Z)(document.createElement("div")),Ke.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=(0,Y.Z)(document.createElement("div")),Ke.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(n){const f=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=f.verticalScrollbarWidth,this._minimapWidth=f.minimap.minimapWidth,this._horizontalScrollbarHeight=f.horizontalScrollbarHeight,this._editorHeight=f.height,this._editorWidth=f.width,!0}addWidget(n){const a=(0,Y.Z)(n.getDomNode());this._widgets[n.getId()]={widget:n,preference:null,domNode:a},a.setPosition("absolute"),a.setAttribute("widgetId",n.getId()),n.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(a):this._domNode.appendChild(a),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(n,a){const f=this._widgets[n.getId()],y=a?a.preference:null,T=a?.stackOridinal;return f.preference===y&&f.stack===T?(this._updateMaxMinWidth(),!1):(f.preference=y,f.stack=T,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(n){const a=n.getId();if(this._widgets.hasOwnProperty(a)){const y=this._widgets[a].domNode.domNode;delete this._widgets[a],y.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){let n=0;const a=Object.keys(this._widgets);for(let f=0,y=a.length;f<y;f++){const T=a[f],se=this._widgets[T].widget.getMinContentWidthInPx?.();typeof se<"u"&&(n=Math.max(n,se))}this._context.viewLayout.setOverlayWidgetsMinWidth(n)}_renderWidget(n,a){const f=n.domNode;if(n.preference===null){f.setTop("");return}const y=2*this._verticalScrollbarWidth+this._minimapWidth;if(n.preference===0||n.preference===1){if(n.preference===1){const T=f.domNode.clientHeight;f.setTop(this._editorHeight-T-2*this._horizontalScrollbarHeight)}else f.setTop(0);n.stack!==void 0?(f.setTop(a[n.preference]),a[n.preference]+=f.domNode.clientWidth):f.setRight(y)}else if(n.preference===2)f.domNode.style.right="50%",n.stack!==void 0?(f.setTop(a[2]),a[2]+=f.domNode.clientHeight):f.setTop(0);else{const{top:T,left:J}=n.preference;if(this._context.configuration.options.get(42)&&n.widget.allowEditorOverflow){const be=this._viewDomNodeRect;f.setTop(T+be.top),f.setLeft(J+be.left),f.setPosition("fixed")}else f.setTop(T),f.setLeft(J),f.setPosition("absolute")}}prepareRender(n){this._viewDomNodeRect=w.BK(this._viewDomNode.domNode)}render(n){this._domNode.setWidth(this._editorWidth);const a=Object.keys(this._widgets),f=Array.from({length:3},()=>0);a.sort((y,T)=>(this._widgets[y].stack||0)-(this._widgets[T].stack||0));for(let y=0,T=a.length;y<T;y++){const J=a[y];this._renderWidget(this._widgets[J],f)}}}class Hi{constructor(n,a){const f=n.options;this.lineHeight=f.get(67),this.pixelRatio=f.get(144),this.overviewRulerLanes=f.get(83),this.renderBorder=f.get(82);const y=a.getColor(Ne.x9);this.borderColor=y?y.toString():null,this.hideCursor=f.get(59);const T=a.getColor(Ne.D0);this.cursorColorSingle=T?T.transparent(.7).toString():null;const J=a.getColor(Ne.sC);this.cursorColorPrimary=J?J.transparent(.7).toString():null;const se=a.getColor(Ne.we);this.cursorColorSecondary=se?se.transparent(.7).toString():null,this.themeType=a.type;const be=f.get(73),Oe=be.enabled,Ge=be.side,je=a.getColor(Ne.Xr),nt=wi.dG.getDefaultBackground();je?this.backgroundColor=je:Oe&&Ge==="right"?this.backgroundColor=nt:this.backgroundColor=null;const bt=f.get(146).overviewRuler;this.top=bt.top,this.right=bt.right,this.domWidth=bt.width,this.domHeight=bt.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[xt,At]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=xt,this.w=At}_initLanes(n,a,f){const y=a-n;if(f>=3){const T=Math.floor(y/3),J=Math.floor(y/3),se=y-T-J,be=n,Oe=be+T,Ge=be+T+se;return[[0,be,Oe,be,Ge,be,Oe,be],[0,T,se,T+se,J,T+se+J,se+J,T+se+J]]}else if(f===2){const T=Math.floor(y/2),J=y-T,se=n,be=se+T;return[[0,se,se,se,be,se,se,se],[0,T,T,T,J,T+J,T+J,T+J]]}else{const T=n,J=y;return[[0,T,T,T,T,T,T,T],[0,J,J,J,J,J,J,J]]}}equals(n){return this.lineHeight===n.lineHeight&&this.pixelRatio===n.pixelRatio&&this.overviewRulerLanes===n.overviewRulerLanes&&this.renderBorder===n.renderBorder&&this.borderColor===n.borderColor&&this.hideCursor===n.hideCursor&&this.cursorColorSingle===n.cursorColorSingle&&this.cursorColorPrimary===n.cursorColorPrimary&&this.cursorColorSecondary===n.cursorColorSecondary&&this.themeType===n.themeType&&ji.Q1.equals(this.backgroundColor,n.backgroundColor)&&this.top===n.top&&this.right===n.right&&this.domWidth===n.domWidth&&this.domHeight===n.domHeight&&this.canvasWidth===n.canvasWidth&&this.canvasHeight===n.canvasHeight}}class Ui extends ye{constructor(n){super(n),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=(0,Y.Z)(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=wi.dG.onDidChange(a=>{a.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new Ue.y(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(n){const a=new Hi(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(a)?!1:(this._settings=a,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,n&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(n){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(n){this._cursorPositions=[];for(let a=0,f=n.selections.length;a<f;a++){let y=this._settings.cursorColorSingle;f>1&&(y=a===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:n.selections[a].getPosition(),color:y})}return this._cursorPositions.sort((a,f)=>Ue.y.compare(a.position,f.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(n){return n.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(n){return this._markRenderingIsNeeded()}onScrollChanged(n){return n.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(n){return this._markRenderingIsNeeded()}onThemeChanged(n){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(n){}render(n){this._render(),this._actualShouldRender=0}_render(){const n=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(n?ji.Q1.Format.CSS.formatHexA(n):""),this._domNode.setDisplay("none");return}const a=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(a.sort(on.Uv.compareByRenderingProps),this._actualShouldRender===1&&!on.Uv.equalsArr(this._renderedDecorations,a)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!(0,_.aI)(this._renderedCursorPositions,this._cursorPositions,(bt,xt)=>bt.position.lineNumber===xt.position.lineNumber&&bt.color===xt.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=a,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const f=this._settings.canvasWidth,y=this._settings.canvasHeight,T=this._settings.lineHeight,J=this._context.viewLayout,se=this._context.viewLayout.getScrollHeight(),be=y/se,Oe=6*this._settings.pixelRatio|0,Ge=Oe/2|0,je=this._domNode.domNode.getContext("2d");n?n.isOpaque()?(je.fillStyle=ji.Q1.Format.CSS.formatHexA(n),je.fillRect(0,0,f,y)):(je.clearRect(0,0,f,y),je.fillStyle=ji.Q1.Format.CSS.formatHexA(n),je.fillRect(0,0,f,y)):je.clearRect(0,0,f,y);const nt=this._settings.x,lt=this._settings.w;for(const bt of a){const xt=bt.color,At=bt.data;je.fillStyle=xt;let Gt=0,ti=0,li=0;for(let ki=0,Ti=At.length/3;ki<Ti;ki++){const Yi=At[3*ki],Ai=At[3*ki+1],Ji=At[3*ki+2];let xi=J.getVerticalOffsetForLineNumber(Ai)*be|0,cn=(J.getVerticalOffsetForLineNumber(Ji)+T)*be|0;if(cn-xi<Oe){let gn=(xi+cn)/2|0;gn<Ge?gn=Ge:gn+Ge>y&&(gn=y-Ge),xi=gn-Ge,cn=gn+Ge}xi>li+1||Yi!==Gt?(ki!==0&&je.fillRect(nt[Gt],ti,lt[Gt],li-ti),Gt=Yi,ti=xi,li=cn):cn>li&&(li=cn)}je.fillRect(nt[Gt],ti,lt[Gt],li-ti)}if(!this._settings.hideCursor){const bt=2*this._settings.pixelRatio|0,xt=bt/2|0,At=this._settings.x[7],Gt=this._settings.w[7];let ti=-100,li=-100,ki=null;for(let Ti=0,Yi=this._cursorPositions.length;Ti<Yi;Ti++){const Ai=this._cursorPositions[Ti].color;if(!Ai)continue;const Ji=this._cursorPositions[Ti].position;let xi=J.getVerticalOffsetForLineNumber(Ji.lineNumber)*be|0;xi<xt?xi=xt:xi+xt>y&&(xi=y-xt);const cn=xi-xt,rn=cn+bt;cn>li+1||Ai!==ki?(Ti!==0&&ki&&je.fillRect(At,ti,Gt,li-ti),ti=cn,li=rn):rn>li&&(li=rn),ki=Ai,je.fillStyle=Ai}ki&&je.fillRect(At,ti,Gt,li-ti)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(je.beginPath(),je.lineWidth=1,je.strokeStyle=this._settings.borderColor,je.moveTo(0,0),je.lineTo(0,y),je.moveTo(1,0),je.lineTo(f,0),je.stroke())}}var Yn=c(76322);class En extends Pe{constructor(n,a){super(),this._context=n;const f=this._context.configuration.options;this._domNode=(0,Y.Z)(document.createElement("canvas")),this._domNode.setClassName(a),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new Yn.rW(y=>this._context.viewLayout.getVerticalOffsetForLineNumber(y)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(f.get(67)),this._zoneManager.setPixelRatio(f.get(144)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(n){const a=this._context.configuration.options;return n.hasChanged(67)&&(this._zoneManager.setLineHeight(a.get(67)),this._render()),n.hasChanged(144)&&(this._zoneManager.setPixelRatio(a.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(n){return this._render(),!0}onScrollChanged(n){return n.scrollHeightChanged&&(this._zoneManager.setOuterHeight(n.scrollHeight),this._render()),!0}onZonesChanged(n){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(n){this._domNode.setTop(n.top),this._domNode.setRight(n.right);let a=!1;a=this._zoneManager.setDOMWidth(n.width)||a,a=this._zoneManager.setDOMHeight(n.height)||a,a&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(n){this._zoneManager.setZones(n),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const n=this._zoneManager.getCanvasWidth(),a=this._zoneManager.getCanvasHeight(),f=this._zoneManager.resolveColorZones(),y=this._zoneManager.getId2Color(),T=this._domNode.domNode.getContext("2d");return T.clearRect(0,0,n,a),f.length>0&&this._renderOneLane(T,f,y,n),!0}_renderOneLane(n,a,f,y){let T=0,J=0,se=0;for(const be of a){const Oe=be.colorId,Ge=be.from,je=be.to;Oe!==T?(n.fillRect(0,J,y,se-J),T=Oe,n.fillStyle=f[T],J=Ge,se=je):se>=Ge?se=Math.max(se,je):(n.fillRect(0,J,y,se-J),J=Ge,se=je)}n.fillRect(0,J,y,se-J)}}class ys extends ye{constructor(n){super(n),this.domNode=(0,Y.Z)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const a=this._context.configuration.options;this._rulers=a.get(103),this._typicalHalfwidthCharacterWidth=a.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(n){const a=this._context.configuration.options;return this._rulers=a.get(103),this._typicalHalfwidthCharacterWidth=a.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(n){return n.scrollHeightChanged}prepareRender(n){}_ensureRulersCount(){const n=this._renderedRulers.length,a=this._rulers.length;if(n===a)return;if(n<a){const{tabSize:y}=this._context.viewModel.model.getOptions(),T=y;let J=a-n;for(;J>0;){const se=(0,Y.Z)(document.createElement("div"));se.setClassName("view-ruler"),se.setWidth(T),this.domNode.appendChild(se),this._renderedRulers.push(se),J--}return}let f=n-a;for(;f>0;){const y=this._renderedRulers.pop();this.domNode.removeChild(y),f--}}render(n){this._ensureRulersCount();for(let a=0,f=this._rulers.length;a<f;a++){const y=this._renderedRulers[a],T=this._rulers[a];y.setBoxShadow(T.color?`1px 0 0 0 ${T.color} inset`:""),y.setHeight(Math.min(n.scrollHeight,1e6)),y.setLeft(T.column*this._typicalHalfwidthCharacterWidth)}}}class zn extends ye{constructor(n){super(n),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const f=this._context.configuration.options.get(104);this._useShadows=f.useShadows,this._domNode=(0,Y.Z)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const n=this._useShadows&&this._scrollTop>0;return this._shouldShow!==n?(this._shouldShow=n,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const a=this._context.configuration.options.get(146);a.minimap.renderMinimap===0||a.minimap.minimapWidth>0&&a.minimap.minimapLeft===0?this._width=a.width:this._width=a.width-a.verticalScrollbarWidth}onConfigurationChanged(n){const f=this._context.configuration.options.get(104);return this._useShadows=f.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(n){return this._scrollTop=n.scrollTop,this._updateShouldShow()}prepareRender(n){}render(n){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class Hn{constructor(n){this.left=n.left,this.width=n.width,this.startStyle=null,this.endStyle=null}}class ds{constructor(n,a){this.lineNumber=n,this.ranges=a}}function Vi(st){return new Hn(st)}function mn(st){return new ds(st.lineNumber,st.ranges.map(Vi))}class Ri extends _n{static{this.SELECTION_CLASS_NAME="selected-text"}static{this.SELECTION_TOP_LEFT="top-left-radius"}static{this.SELECTION_BOTTOM_LEFT="bottom-left-radius"}static{this.SELECTION_TOP_RIGHT="top-right-radius"}static{this.SELECTION_BOTTOM_RIGHT="bottom-right-radius"}static{this.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background"}static{this.ROUNDED_PIECE_WIDTH=10}constructor(n){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=n;const a=this._context.configuration.options;this._roundedSelection=a.get(102),this._typicalHalfwidthCharacterWidth=a.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(n){const a=this._context.configuration.options;return this._roundedSelection=a.get(102),this._typicalHalfwidthCharacterWidth=a.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(n){return this._selections=n.selections.slice(0),!0}onDecorationsChanged(n){return!0}onFlushed(n){return!0}onLinesChanged(n){return!0}onLinesDeleted(n){return!0}onLinesInserted(n){return!0}onScrollChanged(n){return n.scrollTopChanged}onZonesChanged(n){return!0}_visibleRangesHaveGaps(n){for(let a=0,f=n.length;a<f;a++)if(n[a].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(n,a,f){const y=this._typicalHalfwidthCharacterWidth/4;let T=null,J=null;if(f&&f.length>0&&a.length>0){const se=a[0].lineNumber;if(se===n.startLineNumber)for(let Oe=0;!T&&Oe<f.length;Oe++)f[Oe].lineNumber===se&&(T=f[Oe].ranges[0]);const be=a[a.length-1].lineNumber;if(be===n.endLineNumber)for(let Oe=f.length-1;!J&&Oe>=0;Oe--)f[Oe].lineNumber===be&&(J=f[Oe].ranges[0]);T&&!T.startStyle&&(T=null),J&&!J.startStyle&&(J=null)}for(let se=0,be=a.length;se<be;se++){const Oe=a[se].ranges[0],Ge=Oe.left,je=Oe.left+Oe.width,nt={top:0,bottom:0},lt={top:0,bottom:0};if(se>0){const bt=a[se-1].ranges[0].left,xt=a[se-1].ranges[0].left+a[se-1].ranges[0].width;gs(Ge-bt)<y?nt.top=2:Ge>bt&&(nt.top=1),gs(je-xt)<y?lt.top=2:bt<je&&je<xt&&(lt.top=1)}else T&&(nt.top=T.startStyle.top,lt.top=T.endStyle.top);if(se+1<be){const bt=a[se+1].ranges[0].left,xt=a[se+1].ranges[0].left+a[se+1].ranges[0].width;gs(Ge-bt)<y?nt.bottom=2:bt<Ge&&Ge<xt&&(nt.bottom=1),gs(je-xt)<y?lt.bottom=2:je<xt&&(lt.bottom=1)}else J&&(nt.bottom=J.startStyle.bottom,lt.bottom=J.endStyle.bottom);Oe.startStyle=nt,Oe.endStyle=lt}}_getVisibleRangesWithStyle(n,a,f){const T=(a.linesVisibleRangesForRange(n,!0)||[]).map(mn);return!this._visibleRangesHaveGaps(T)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(a.visibleRange,T,f),T}_createSelectionPiece(n,a,f,y,T){return'<div class="cslr '+f+'" style="top:'+n.toString()+"px;bottom:"+a.toString()+"px;left:"+y.toString()+"px;width:"+T.toString()+'px;"></div>'}_actualRenderOneSelection(n,a,f,y){if(y.length===0)return;const T=!!y[0].ranges[0].startStyle,J=y[0].lineNumber,se=y[y.length-1].lineNumber;for(let be=0,Oe=y.length;be<Oe;be++){const Ge=y[be],je=Ge.lineNumber,nt=je-a,lt=f&&je===J?1:0,bt=f&&je!==J&&je===se?1:0;let xt="",At="";for(let Gt=0,ti=Ge.ranges.length;Gt<ti;Gt++){const li=Ge.ranges[Gt];if(T){const Ti=li.startStyle,Yi=li.endStyle;if(Ti.top===1||Ti.bottom===1){xt+=this._createSelectionPiece(lt,bt,Ri.SELECTION_CLASS_NAME,li.left-Ri.ROUNDED_PIECE_WIDTH,Ri.ROUNDED_PIECE_WIDTH);let Ai=Ri.EDITOR_BACKGROUND_CLASS_NAME;Ti.top===1&&(Ai+=" "+Ri.SELECTION_TOP_RIGHT),Ti.bottom===1&&(Ai+=" "+Ri.SELECTION_BOTTOM_RIGHT),xt+=this._createSelectionPiece(lt,bt,Ai,li.left-Ri.ROUNDED_PIECE_WIDTH,Ri.ROUNDED_PIECE_WIDTH)}if(Yi.top===1||Yi.bottom===1){xt+=this._createSelectionPiece(lt,bt,Ri.SELECTION_CLASS_NAME,li.left+li.width,Ri.ROUNDED_PIECE_WIDTH);let Ai=Ri.EDITOR_BACKGROUND_CLASS_NAME;Yi.top===1&&(Ai+=" "+Ri.SELECTION_TOP_LEFT),Yi.bottom===1&&(Ai+=" "+Ri.SELECTION_BOTTOM_LEFT),xt+=this._createSelectionPiece(lt,bt,Ai,li.left+li.width,Ri.ROUNDED_PIECE_WIDTH)}}let ki=Ri.SELECTION_CLASS_NAME;if(T){const Ti=li.startStyle,Yi=li.endStyle;Ti.top===0&&(ki+=" "+Ri.SELECTION_TOP_LEFT),Ti.bottom===0&&(ki+=" "+Ri.SELECTION_BOTTOM_LEFT),Yi.top===0&&(ki+=" "+Ri.SELECTION_TOP_RIGHT),Yi.bottom===0&&(ki+=" "+Ri.SELECTION_BOTTOM_RIGHT)}At+=this._createSelectionPiece(lt,bt,ki,li.left,li.width)}n[nt][0]+=xt,n[nt][1]+=At}}prepareRender(n){const a=[],f=n.visibleRange.startLineNumber,y=n.visibleRange.endLineNumber;for(let J=f;J<=y;J++){const se=J-f;a[se]=["",""]}const T=[];for(let J=0,se=this._selections.length;J<se;J++){const be=this._selections[J];if(be.isEmpty()){T[J]=null;continue}const Oe=this._getVisibleRangesWithStyle(be,n,this._previousFrameVisibleRangesWithStyle[J]);T[J]=Oe,this._actualRenderOneSelection(a,f,this._selections.length>1,Oe)}this._previousFrameVisibleRangesWithStyle=T,this._renderResult=a.map(([J,se])=>J+se)}render(n,a){if(!this._renderResult)return"";const f=a-n;return f<0||f>=this._renderResult.length?"":this._renderResult[f]}}(0,oi.zy)((st,n)=>{const a=st.getColor(an.rm4);a&&!a.isTransparent()&&n.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${a}; }`)});function gs(st){return st<0?-st:st}class zs{constructor(n,a,f,y,T,J,se){this.top=n,this.left=a,this.paddingLeft=f,this.width=y,this.height=T,this.textContent=J,this.textContentClassName=se}}var xn;(function(st){st[st.Single=0]="Single",st[st.MultiPrimary=1]="MultiPrimary",st[st.MultiSecondary=2]="MultiSecondary"})(xn||(xn={}));class ks{constructor(n,a){this._context=n;const f=this._context.configuration.options,y=f.get(50);this._cursorStyle=f.get(28),this._lineHeight=f.get(67),this._typicalHalfwidthCharacterWidth=y.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(f.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=(0,Y.Z)(document.createElement("div")),this._domNode.setClassName(`cursor ${Ci}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),(0,C.M)(this._domNode,y),this._domNode.setDisplay("none"),this._position=new Ue.y(1,1),this._pluralityClass="",this.setPlurality(a),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(n){switch(n){default:case xn.Single:this._pluralityClass="";break;case xn.MultiPrimary:this._pluralityClass="cursor-primary";break;case xn.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(n){const a=this._context.configuration.options,f=a.get(50);return this._cursorStyle=a.get(28),this._lineHeight=a.get(67),this._typicalHalfwidthCharacterWidth=f.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(a.get(31),this._typicalHalfwidthCharacterWidth),(0,C.M)(this._domNode,f),!0}onCursorPositionChanged(n,a){return a?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=n,!0}_getGraphemeAwarePosition(){const{lineNumber:n,column:a}=this._position,f=this._context.viewModel.getLineContent(n),[y,T]=yi.m(f,a-1);return[new Ue.y(n,y+1),f.substring(y,T)]}_prepareRender(n){let a="",f="";const[y,T]=this._getGraphemeAwarePosition();if(this._cursorStyle===Q.m9.Line||this._cursorStyle===Q.m9.LineThin){const nt=n.visibleRangeForPosition(y);if(!nt||nt.outsideRenderedLine)return null;const lt=w.zk(this._domNode.domNode);let bt;this._cursorStyle===Q.m9.Line?(bt=w.vT(lt,this._lineCursorWidth>0?this._lineCursorWidth:2),bt>2&&(a=T,f=this._getTokenClassName(y))):bt=w.vT(lt,1);let xt=nt.left,At=0;bt>=2&&xt>=1&&(At=1,xt-=At);const Gt=n.getVerticalOffsetForLineNumber(y.lineNumber)-n.bigNumbersDelta;return new zs(Gt,xt,At,bt,this._lineHeight,a,f)}const J=n.linesVisibleRangesForRange(new x.Q(y.lineNumber,y.column,y.lineNumber,y.column+T.length),!1);if(!J||J.length===0)return null;const se=J[0];if(se.outsideRenderedLine||se.ranges.length===0)return null;const be=se.ranges[0],Oe=T==="	"?this._typicalHalfwidthCharacterWidth:be.width<1?this._typicalHalfwidthCharacterWidth:be.width;this._cursorStyle===Q.m9.Block&&(a=T,f=this._getTokenClassName(y));let Ge=n.getVerticalOffsetForLineNumber(y.lineNumber)-n.bigNumbersDelta,je=this._lineHeight;return(this._cursorStyle===Q.m9.Underline||this._cursorStyle===Q.m9.UnderlineThin)&&(Ge+=this._lineHeight-2,je=2),new zs(Ge,be.left,0,Oe,je,a,f)}_getTokenClassName(n){const a=this._context.viewModel.getViewLineData(n.lineNumber),f=a.tokens.findTokenIndexAtOffset(n.column-1);return a.tokens.getClassName(f)}prepareRender(n){this._renderData=this._prepareRender(n)}render(n){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${Ci} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class Gs extends ye{static{this.BLINK_INTERVAL=500}constructor(n){super(n);const a=this._context.configuration.options;this._readOnly=a.get(92),this._cursorBlinking=a.get(26),this._cursorStyle=a.get(28),this._cursorSmoothCaretAnimation=a.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new ks(this._context,xn.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=(0,Y.Z)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Be.pc,this._cursorFlatBlinkInterval=new w.Be,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(n){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(n){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(n){const a=this._context.configuration.options;this._readOnly=a.get(92),this._cursorBlinking=a.get(26),this._cursorStyle=a.get(28),this._cursorSmoothCaretAnimation=a.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(n);for(let f=0,y=this._secondaryCursors.length;f<y;f++)this._secondaryCursors[f].onConfigurationChanged(n);return!0}_onCursorPositionChanged(n,a,f){const y=this._secondaryCursors.length!==a.length||this._cursorSmoothCaretAnimation==="explicit"&&f!==3;if(this._primaryCursor.setPlurality(a.length?xn.MultiPrimary:xn.Single),this._primaryCursor.onCursorPositionChanged(n,y),this._updateBlinking(),this._secondaryCursors.length<a.length){const T=a.length-this._secondaryCursors.length;for(let J=0;J<T;J++){const se=new ks(this._context,xn.MultiSecondary);this._domNode.domNode.insertBefore(se.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(se)}}else if(this._secondaryCursors.length>a.length){const T=this._secondaryCursors.length-a.length;for(let J=0;J<T;J++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let T=0;T<a.length;T++)this._secondaryCursors[T].onCursorPositionChanged(a[T],y)}onCursorStateChanged(n){const a=[];for(let y=0,T=n.selections.length;y<T;y++)a[y]=n.selections[y].getPosition();this._onCursorPositionChanged(a[0],a.slice(1),n.reason);const f=n.selections[0].isEmpty();return this._selectionIsEmpty!==f&&(this._selectionIsEmpty=f,this._updateDomClassName()),!0}onDecorationsChanged(n){return!0}onFlushed(n){return!0}onFocusChanged(n){return this._editorHasFocus=n.isFocused,this._updateBlinking(),!1}onLinesChanged(n){return!0}onLinesDeleted(n){return!0}onLinesInserted(n){return!0}onScrollChanged(n){return!0}onTokensChanged(n){const a=f=>{for(let y=0,T=n.ranges.length;y<T;y++)if(n.ranges[y].fromLineNumber<=f.lineNumber&&f.lineNumber<=n.ranges[y].toLineNumber)return!0;return!1};if(a(this._primaryCursor.getPosition()))return!0;for(const f of this._secondaryCursors)if(a(f.getPosition()))return!0;return!1}onZonesChanged(n){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const n=this._getCursorBlinking(),a=n===0,f=n===5;a?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!a&&!f&&(n===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},Gs.BLINK_INTERVAL,(0,w.zk)(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},Gs.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let n="cursors-layer";switch(this._selectionIsEmpty||(n+=" has-selection"),this._cursorStyle){case Q.m9.Line:n+=" cursor-line-style";break;case Q.m9.Block:n+=" cursor-block-style";break;case Q.m9.Underline:n+=" cursor-underline-style";break;case Q.m9.LineThin:n+=" cursor-line-thin-style";break;case Q.m9.BlockOutline:n+=" cursor-block-outline-style";break;case Q.m9.UnderlineThin:n+=" cursor-underline-thin-style";break;default:n+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:n+=" cursor-blink";break;case 2:n+=" cursor-smooth";break;case 3:n+=" cursor-phase";break;case 4:n+=" cursor-expand";break;case 5:n+=" cursor-solid";break;default:n+=" cursor-solid"}else n+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(n+=" cursor-smooth-caret-animation"),n}_show(){this._primaryCursor.show();for(let n=0,a=this._secondaryCursors.length;n<a;n++)this._secondaryCursors[n].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let n=0,a=this._secondaryCursors.length;n<a;n++)this._secondaryCursors[n].hide();this._isVisible=!1}prepareRender(n){this._primaryCursor.prepareRender(n);for(let a=0,f=this._secondaryCursors.length;a<f;a++)this._secondaryCursors[a].prepareRender(n)}render(n){const a=[];let f=0;const y=this._primaryCursor.render(n);y&&(a[f++]=y);for(let T=0,J=this._secondaryCursors.length;T<J;T++){const se=this._secondaryCursors[T].render(n);se&&(a[f++]=se)}this._renderData=a}getLastRenderData(){return this._renderData}}(0,oi.zy)((st,n)=>{const a=[{class:".cursor",foreground:Ne.D0,background:Ne.kM},{class:".cursor-primary",foreground:Ne.sC,background:Ne.je},{class:".cursor-secondary",foreground:Ne.we,background:Ne.L0}];for(const f of a){const y=st.getColor(f.foreground);if(y){let T=st.getColor(f.background);T||(T=y.opposite()),n.addRule(`.monaco-editor .cursors-layer ${f.class} { background-color: ${y}; border-color: ${y}; color: ${T}; }`),(0,un.Bb)(st.type)&&n.addRule(`.monaco-editor .cursors-layer.has-selection ${f.class} { border-left: 1px solid ${T}; border-right: 1px solid ${T}; }`)}}});const Po=()=>{throw new Error("Invalid change accessor")};class zi extends ye{constructor(n){super(n);const a=this._context.configuration.options,f=a.get(146);this._lineHeight=a.get(67),this._contentWidth=f.contentWidth,this._contentLeft=f.contentLeft,this.domNode=(0,Y.Z)(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=(0,Y.Z)(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const n=this._context.viewLayout.getWhitespaces(),a=new Map;for(const y of n)a.set(y.id,y);let f=!1;return this._context.viewModel.changeWhitespace(y=>{const T=Object.keys(this._zones);for(let J=0,se=T.length;J<se;J++){const be=T[J],Oe=this._zones[be],Ge=this._computeWhitespaceProps(Oe.delegate);Oe.isInHiddenArea=Ge.isInHiddenArea;const je=a.get(be);je&&(je.afterLineNumber!==Ge.afterViewLineNumber||je.height!==Ge.heightInPx)&&(y.changeOneWhitespace(be,Ge.afterViewLineNumber,Ge.heightInPx),this._safeCallOnComputedHeight(Oe.delegate,Ge.heightInPx),f=!0)}}),f}onConfigurationChanged(n){const a=this._context.configuration.options,f=a.get(146);return this._lineHeight=a.get(67),this._contentWidth=f.contentWidth,this._contentLeft=f.contentLeft,n.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(n){return this._recomputeWhitespacesProps()}onLinesDeleted(n){return!0}onScrollChanged(n){return n.scrollTopChanged||n.scrollWidthChanged}onZonesChanged(n){return!0}onLinesInserted(n){return!0}_getZoneOrdinal(n){return n.ordinal??n.afterColumn??1e4}_computeWhitespaceProps(n){if(n.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(n),minWidthInPx:this._minWidthInPixels(n)};let a;if(typeof n.afterColumn<"u")a=this._context.viewModel.model.validatePosition({lineNumber:n.afterLineNumber,column:n.afterColumn});else{const J=this._context.viewModel.model.validatePosition({lineNumber:n.afterLineNumber,column:1}).lineNumber;a=new Ue.y(J,this._context.viewModel.model.getLineMaxColumn(J))}let f;a.column===this._context.viewModel.model.getLineMaxColumn(a.lineNumber)?f=this._context.viewModel.model.validatePosition({lineNumber:a.lineNumber+1,column:1}):f=this._context.viewModel.model.validatePosition({lineNumber:a.lineNumber,column:a.column+1});const y=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(a,n.afterColumnAffinity,!0),T=n.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(f);return{isInHiddenArea:!T,afterViewLineNumber:y.lineNumber,heightInPx:T?this._heightInPixels(n):0,minWidthInPx:this._minWidthInPixels(n)}}changeViewZones(n){let a=!1;return this._context.viewModel.changeWhitespace(f=>{const y={addZone:T=>(a=!0,this._addZone(f,T)),removeZone:T=>{T&&(a=this._removeZone(f,T)||a)},layoutZone:T=>{T&&(a=this._layoutZone(f,T)||a)}};Ps(n,y),y.addZone=Po,y.removeZone=Po,y.layoutZone=Po}),a}_addZone(n,a){const f=this._computeWhitespaceProps(a),T={whitespaceId:n.insertWhitespace(f.afterViewLineNumber,this._getZoneOrdinal(a),f.heightInPx,f.minWidthInPx),delegate:a,isInHiddenArea:f.isInHiddenArea,isVisible:!1,domNode:(0,Y.Z)(a.domNode),marginDomNode:a.marginDomNode?(0,Y.Z)(a.marginDomNode):null};return this._safeCallOnComputedHeight(T.delegate,f.heightInPx),T.domNode.setPosition("absolute"),T.domNode.domNode.style.width="100%",T.domNode.setDisplay("none"),T.domNode.setAttribute("monaco-view-zone",T.whitespaceId),this.domNode.appendChild(T.domNode),T.marginDomNode&&(T.marginDomNode.setPosition("absolute"),T.marginDomNode.domNode.style.width="100%",T.marginDomNode.setDisplay("none"),T.marginDomNode.setAttribute("monaco-view-zone",T.whitespaceId),this.marginDomNode.appendChild(T.marginDomNode)),this._zones[T.whitespaceId]=T,this.setShouldRender(),T.whitespaceId}_removeZone(n,a){if(this._zones.hasOwnProperty(a)){const f=this._zones[a];return delete this._zones[a],n.removeWhitespace(f.whitespaceId),f.domNode.removeAttribute("monaco-visible-view-zone"),f.domNode.removeAttribute("monaco-view-zone"),f.domNode.domNode.remove(),f.marginDomNode&&(f.marginDomNode.removeAttribute("monaco-visible-view-zone"),f.marginDomNode.removeAttribute("monaco-view-zone"),f.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(n,a){if(this._zones.hasOwnProperty(a)){const f=this._zones[a],y=this._computeWhitespaceProps(f.delegate);return f.isInHiddenArea=y.isInHiddenArea,n.changeOneWhitespace(f.whitespaceId,y.afterViewLineNumber,y.heightInPx),this._safeCallOnComputedHeight(f.delegate,y.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(n){return this._zones.hasOwnProperty(n)?!!this._zones[n].delegate.suppressMouseDown:!1}_heightInPixels(n){return typeof n.heightInPx=="number"?n.heightInPx:typeof n.heightInLines=="number"?this._lineHeight*n.heightInLines:this._lineHeight}_minWidthInPixels(n){return typeof n.minWidthInPx=="number"?n.minWidthInPx:0}_safeCallOnComputedHeight(n,a){if(typeof n.onComputedHeight=="function")try{n.onComputedHeight(a)}catch(f){(0,O.dz)(f)}}_safeCallOnDomNodeTop(n,a){if(typeof n.onDomNodeTop=="function")try{n.onDomNodeTop(a)}catch(f){(0,O.dz)(f)}}prepareRender(n){}render(n){const a=n.viewportData.whitespaceViewportData,f={};let y=!1;for(const J of a)this._zones[J.id].isInHiddenArea||(f[J.id]=J,y=!0);const T=Object.keys(this._zones);for(let J=0,se=T.length;J<se;J++){const be=T[J],Oe=this._zones[be];let Ge=0,je=0,nt="none";f.hasOwnProperty(be)?(Ge=f[be].verticalOffset-n.bigNumbersDelta,je=f[be].height,nt="block",Oe.isVisible||(Oe.domNode.setAttribute("monaco-visible-view-zone","true"),Oe.isVisible=!0),this._safeCallOnDomNodeTop(Oe.delegate,n.getScrolledTopFromAbsoluteTop(f[be].verticalOffset))):(Oe.isVisible&&(Oe.domNode.removeAttribute("monaco-visible-view-zone"),Oe.isVisible=!1),this._safeCallOnDomNodeTop(Oe.delegate,n.getScrolledTopFromAbsoluteTop(-1e6))),Oe.domNode.setTop(Ge),Oe.domNode.setHeight(je),Oe.domNode.setDisplay(nt),Oe.marginDomNode&&(Oe.marginDomNode.setTop(Ge),Oe.marginDomNode.setHeight(je),Oe.marginDomNode.setDisplay(nt))}y&&(this.domNode.setWidth(Math.max(n.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function Ps(st,n){try{return st(n)}catch(a){(0,O.dz)(a)}}var Qs=c(62681);class wr extends _n{constructor(n){super(),this._context=n,this._options=new xo(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(n){const a=new xo(this._context.configuration);return this._options.equals(a)?n.hasChanged(146):(this._options=a,!0)}onCursorStateChanged(n){return this._selection=n.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(n){return!0}onFlushed(n){return!0}onLinesChanged(n){return!0}onLinesDeleted(n){return!0}onLinesInserted(n){return!0}onScrollChanged(n){return n.scrollTopChanged}onZonesChanged(n){return!0}prepareRender(n){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const a=n.visibleRange.startLineNumber,y=n.visibleRange.endLineNumber-a+1,T=new Array(y);for(let se=0;se<y;se++)T[se]=!0;const J=this._context.viewModel.getMinimapLinesRenderingData(n.viewportData.startLineNumber,n.viewportData.endLineNumber,T);this._renderResult=[];for(let se=n.viewportData.startLineNumber;se<=n.viewportData.endLineNumber;se++){const be=se-n.viewportData.startLineNumber,Oe=J.data[be];let Ge=null;if(this._options.renderWhitespace==="selection"){const je=this._selection;for(const nt of je){if(nt.endLineNumber<se||nt.startLineNumber>se)continue;const lt=nt.startLineNumber===se?nt.startColumn:Oe.minColumn,bt=nt.endLineNumber===se?nt.endColumn:Oe.maxColumn;lt<bt&&(Ge||(Ge=[]),Ge.push(new Qs.MT(lt-1,bt-1)))}}this._renderResult[be]=this._applyRenderWhitespace(n,se,Ge,Oe)}}_applyRenderWhitespace(n,a,f,y){if(this._options.renderWhitespace==="selection"&&!f||this._options.renderWhitespace==="trailing"&&y.continuesWithWrappedLine)return"";const T=this._context.theme.getColor(Ne.w4),J=this._options.renderWithSVG,se=y.content,be=this._options.stopRenderingLineAfter===-1?se.length:Math.min(this._options.stopRenderingLineAfter,se.length),Oe=y.continuesWithWrappedLine,Ge=y.minColumn-1,je=this._options.renderWhitespace==="boundary",nt=this._options.renderWhitespace==="trailing",lt=this._options.lineHeight,bt=this._options.middotWidth,xt=this._options.wsmiddotWidth,At=this._options.spaceWidth,Gt=Math.abs(xt-At),ti=Math.abs(bt-At),li=Gt<ti?11825:183,ki=this._options.canUseHalfwidthRightwardsArrow;let Ti="",Yi=!1,Ai=yi.HG(se),Ji;Ai===-1?(Yi=!0,Ai=be,Ji=be):Ji=yi.lT(se);let xi=0,cn=f&&f[xi],rn=0;for(let gn=Ge;gn<be;gn++){const Sn=se.charCodeAt(gn);if(cn&&gn>=cn.endOffset&&(xi++,cn=f&&f[xi]),Sn!==9&&Sn!==32||nt&&!Yi&&gn<=Ji)continue;if(je&&gn>=Ai&&gn<=Ji&&Sn===32){const jn=gn-1>=0?se.charCodeAt(gn-1):0,Ns=gn+1<be?se.charCodeAt(gn+1):0;if(jn!==32&&Ns!==32)continue}if(je&&Oe&&gn===be-1){const jn=gn-1>=0?se.charCodeAt(gn-1):0;if(Sn===32&&jn!==32&&jn!==9)continue}if(f&&(!cn||cn.startOffset>gn||cn.endOffset<=gn))continue;const Vn=n.visibleRangeForPosition(new Ue.y(a,gn+1));Vn&&(J?(rn=Math.max(rn,Vn.left),Sn===9?Ti+=this._renderArrow(lt,At,Vn.left):Ti+=`<circle cx="${(Vn.left+At/2).toFixed(2)}" cy="${(lt/2).toFixed(2)}" r="${(At/7).toFixed(2)}" />`):Sn===9?Ti+=`<div class="mwh" style="left:${Vn.left}px;height:${lt}px;">${ki?"\uFFEB":"\u2192"}</div>`:Ti+=`<div class="mwh" style="left:${Vn.left}px;height:${lt}px;">${String.fromCharCode(li)}</div>`)}return J?(rn=Math.round(rn+At),`<svg style="bottom:0;position:absolute;width:${rn}px;height:${lt}px" viewBox="0 0 ${rn} ${lt}" xmlns="http://www.w3.org/2000/svg" fill="${T}">`+Ti+"</svg>"):Ti}_renderArrow(n,a,f){const y=a/7,T=a,J=n/2,se=f,be={x:0,y:y/2},Oe={x:100/125*T,y:be.y},Ge={x:Oe.x-.2*Oe.x,y:Oe.y+.2*Oe.x},je={x:Ge.x+.1*Oe.x,y:Ge.y+.1*Oe.x},nt={x:je.x+.35*Oe.x,y:je.y-.35*Oe.x},lt={x:nt.x,y:-nt.y},bt={x:je.x,y:-je.y},xt={x:Ge.x,y:-Ge.y},At={x:Oe.x,y:-Oe.y},Gt={x:be.x,y:-be.y};return`<path d="M ${[be,Oe,Ge,je,nt,lt,bt,xt,At,Gt].map(ki=>`${(se+ki.x).toFixed(2)} ${(J+ki.y).toFixed(2)}`).join(" L ")}" />`}render(n,a){if(!this._renderResult)return"";const f=a-n;return f<0||f>=this._renderResult.length?"":this._renderResult[f]}}class xo{constructor(n){const a=n.options,f=a.get(50),y=a.get(38);y==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):y==="svg"?(this.renderWhitespace=a.get(100),this.renderWithSVG=!0):(this.renderWhitespace=a.get(100),this.renderWithSVG=!1),this.spaceWidth=f.spaceWidth,this.middotWidth=f.middotWidth,this.wsmiddotWidth=f.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=f.canUseHalfwidthRightwardsArrow,this.lineHeight=a.get(67),this.stopRenderingLineAfter=a.get(118)}equals(n){return this.renderWhitespace===n.renderWhitespace&&this.renderWithSVG===n.renderWithSVG&&this.spaceWidth===n.spaceWidth&&this.middotWidth===n.middotWidth&&this.wsmiddotWidth===n.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===n.canUseHalfwidthRightwardsArrow&&this.lineHeight===n.lineHeight&&this.stopRenderingLineAfter===n.stopRenderingLineAfter}}class Is{constructor(n,a,f,y){this.selections=n,this.startLineNumber=a.startLineNumber|0,this.endLineNumber=a.endLineNumber|0,this.relativeVerticalOffset=a.relativeVerticalOffset,this.bigNumbersDelta=a.bigNumbersDelta|0,this.lineHeight=a.lineHeight|0,this.whitespaceViewportData=f,this._model=y,this.visibleRange=new x.Q(a.startLineNumber,this._model.getLineMinColumn(a.startLineNumber),a.endLineNumber,this._model.getLineMaxColumn(a.endLineNumber))}getViewLineRenderingData(n){return this._model.getViewportViewLineRenderingData(this.visibleRange,n)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class Ls{get type(){return this._theme.type}get value(){return this._theme}constructor(n){this._theme=n}update(n){this._theme=n}getColor(n){return this._theme.getColor(n)}}class Ec{constructor(n,a,f){this.configuration=n,this.theme=new Ls(a),this.viewModel=f,this.viewLayout=f.viewLayout}addEventHandler(n){this.viewModel.addViewEventHandler(n)}removeEventHandler(n){this.viewModel.removeViewEventHandler(n)}}var pa=function(st,n,a,f){var y=arguments.length,T=y<3?n:f===null?f=Object.getOwnPropertyDescriptor(n,a):f,J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(st,n,a,f);else for(var se=st.length-1;se>=0;se--)(J=st[se])&&(T=(y<3?J(T):y>3?J(n,a,T):J(n,a))||T);return y>3&&T&&Object.defineProperty(n,a,T),T},lr=function(st,n){return function(a,f){n(a,f,st)}};let Bs=class extends Pe{constructor(n,a,f,y,T,J,se){super(),this._instantiationService=se,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new Xt.L(1,1,1,1)],this._renderAnimationFrame=null;const be=new ws(a,y,T,n);this._context=new Ec(a,f,y),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(xs,this._context,be,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=(0,Y.Z)(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=(0,Y.Z)(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=(0,Y.Z)(document.createElement("div")),Ke.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new cs(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new Si(this._context,this._linesContent),this._viewZones=new zi(this._context),this._viewParts.push(this._viewZones);const Oe=new Ui(this._context);this._viewParts.push(Oe);const Ge=new zn(this._context);this._viewParts.push(Ge);const je=new Ki(this._context);this._viewParts.push(je),je.addDynamicOverlay(new sn(this._context)),je.addDynamicOverlay(new Ri(this._context)),je.addDynamicOverlay(new zt(this._context)),je.addDynamicOverlay(new fs(this._context)),je.addDynamicOverlay(new wr(this._context));const nt=new Tt(this._context);this._viewParts.push(nt),nt.addDynamicOverlay(new yn(this._context)),nt.addDynamicOverlay(new qi(this._context)),nt.addDynamicOverlay(new mi(this._context)),nt.addDynamicOverlay(new gt(this._context)),this._glyphMarginWidgets=new os(this._context),this._viewParts.push(this._glyphMarginWidgets);const lt=new ei(this._context);lt.getDomNode().appendChild(this._viewZones.marginDomNode),lt.getDomNode().appendChild(nt.getDomNode()),lt.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(lt),this._contentWidgets=new yt(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new Gs(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new vi(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const bt=new ys(this._context);this._viewParts.push(bt);const xt=new St(this._context);this._viewParts.push(xt);const At=new en(this._context);if(this._viewParts.push(At),Oe){const Gt=this._scrollbar.getOverviewRulerLayoutInfo();Gt.parent.insertBefore(Oe.getDomNode(),Gt.insertBefore)}this._linesContent.appendChild(je.getDomNode()),this._linesContent.appendChild(bt.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(lt.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(Ge.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(At.getDomNode()),this._overflowGuardContainer.appendChild(xt.domNode),this.domNode.appendChild(this._overflowGuardContainer),J?(J.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),J.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new Oi(this._context,be,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const n=this._context.viewModel.model,a=this._context.viewModel.glyphLanes;let f=[],y=0;f=f.concat(n.getAllMarginDecorations().map(T=>{const J=T.options.glyphMargin?.position??_s.ZS.Center;return y=Math.max(y,T.range.endLineNumber),{range:T.range,lane:J,persist:T.options.glyphMargin?.persistLane}})),f=f.concat(this._glyphMarginWidgets.getWidgets().map(T=>{const J=n.validateRange(T.preference.range);return y=Math.max(y,J.endLineNumber),{range:J,lane:T.preference.lane}})),f.sort((T,J)=>x.Q.compareRangesUsingStarts(T.range,J.range)),a.reset(y);for(const T of f)a.push(T.lane,T.range,T.persist);return a}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:n=>{this._textAreaHandler.textArea.domNode.dispatchEvent(n)},getLastRenderData:()=>{const n=this._viewCursors.getLastRenderData()||[],a=this._textAreaHandler.getLastRenderData();return new Rt(n,a)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:n=>this._viewZones.shouldSuppressMouseDownOnViewZone(n),shouldSuppressMouseDownOnWidget:n=>this._contentWidgets.shouldSuppressMouseDownOnWidget(n),getPositionFromDOMInfo:(n,a)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(n,a)),visibleRangeForPosition:(n,a)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Ue.y(n,a))),getLineWidth:n=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(n))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:n=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(n))}}_applyLayout(){const a=this._context.configuration.options.get(146);this.domNode.setWidth(a.width),this.domNode.setHeight(a.height),this._overflowGuardContainer.setWidth(a.width),this._overflowGuardContainer.setHeight(a.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const n=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+(0,oi.Pz)(this._context.theme.type)+n}handleEvents(n){super.handleEvents(n),this._scheduleRender()}onConfigurationChanged(n){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(n){return this._selections=n.selections,!1}onDecorationsChanged(n){return n.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(n){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(n){return this._context.theme.update(n.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const n of this._viewParts)n.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new O.D7;if(this._renderAnimationFrame===null){const n=this._createCoordinatedRendering();this._renderAnimationFrame=_a.INSTANCE.scheduleCoordinatedRendering({window:w.zk(this.domNode?.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new O.D7;try{return n.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new O.D7;return n.renderText()},prepareRender:(a,f)=>{if(this._store.isDisposed)throw new O.D7;return n.prepareRender(a,f)},render:(a,f)=>{if(this._store.isDisposed)throw new O.D7;return n.render(a,f)}})}}_flushAccumulatedAndRenderNow(){const n=this._createCoordinatedRendering();js(()=>n.prepareRenderText());const a=js(()=>n.renderText());if(a){const[f,y]=a;js(()=>n.prepareRender(f,y)),js(()=>n.render(f,y))}}_getViewPartsToRender(){const n=[];let a=0;for(const f of this._viewParts)f.shouldRender()&&(n[a++]=f);return n}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const n=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(n.requiredLanes)}ae.p.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let n=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&n.length===0)return null;const a=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(a.startLineNumber,a.endLineNumber,a.centeredLineNumber);const f=new Is(this._selections,a,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(f),this._viewLines.shouldRender()&&(this._viewLines.renderText(f),this._viewLines.onDidRender(),n=this._getViewPartsToRender()),[n,new Rn.eh(this._context.viewLayout,f,this._viewLines)]},prepareRender:(n,a)=>{for(const f of n)f.prepareRender(a)},render:(n,a)=>{for(const f of n)f.render(a),f.onDidRender()}}}delegateVerticalScrollbarPointerDown(n){this._scrollbar.delegateVerticalScrollbarPointerDown(n)}delegateScrollFromMouseWheelEvent(n){this._scrollbar.delegateScrollFromMouseWheelEvent(n)}restoreState(n){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:n.scrollTop,scrollLeft:n.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(n,a){const f=this._context.viewModel.model.validatePosition({lineNumber:n,column:a}),y=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(f);this._flushAccumulatedAndRenderNow();const T=this._viewLines.visibleRangeForPosition(new Ue.y(y.lineNumber,y.column));return T?T.left:-1}getTargetAtClientPoint(n,a){const f=this._pointerHandler.getTargetAtClientPoint(n,a);return f?$i.convertViewToModelMouseTarget(f,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(n){return new En(this._context,n)}change(n){this._viewZones.changeViewZones(n),this._scheduleRender()}render(n,a){if(a){this._viewLines.forceShouldRender();for(const f of this._viewParts)f.forceShouldRender()}n?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(n){this._textAreaHandler.writeScreenReaderContent(n)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(n){this._textAreaHandler.setAriaOptions(n)}addContentWidget(n){this._contentWidgets.addWidget(n.widget),this.layoutContentWidget(n),this._scheduleRender()}layoutContentWidget(n){this._contentWidgets.setWidgetPosition(n.widget,n.position?.position??null,n.position?.secondaryPosition??null,n.position?.preference??null,n.position?.positionAffinity??null),this._scheduleRender()}removeContentWidget(n){this._contentWidgets.removeWidget(n.widget),this._scheduleRender()}addOverlayWidget(n){this._overlayWidgets.addWidget(n.widget),this.layoutOverlayWidget(n),this._scheduleRender()}layoutOverlayWidget(n){this._overlayWidgets.setWidgetPosition(n.widget,n.position)&&this._scheduleRender()}removeOverlayWidget(n){this._overlayWidgets.removeWidget(n.widget),this._scheduleRender()}addGlyphMarginWidget(n){this._glyphMarginWidgets.addWidget(n.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(n){const a=n.position;this._glyphMarginWidgets.setWidgetPosition(n.widget,a)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(n){this._glyphMarginWidgets.removeWidget(n.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};Bs=pa([lr(6,nn._Y)],Bs);function js(st){try{return st()}catch(n){return(0,O.dz)(n),null}}class _a{static{this.INSTANCE=new _a}constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(n){return this._coordinatedRenderings.push(n),this._scheduleRender(n.window),{dispose:()=>{const a=this._coordinatedRenderings.indexOf(n);if(a!==-1&&(this._coordinatedRenderings.splice(a,1),this._coordinatedRenderings.length===0)){for(const[f,y]of this._animationFrameRunners)y.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(n){if(!this._animationFrameRunners.has(n)){const a=()=>{this._animationFrameRunners.delete(n),this._onRenderScheduled()};this._animationFrameRunners.set(n,w.Oq(n,a,100))}}_onRenderScheduled(){const n=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const f of n)js(()=>f.prepareRenderText());const a=[];for(let f=0,y=n.length;f<y;f++){const T=n[f];a[f]=js(()=>T.renderText())}for(let f=0,y=n.length;f<y;f++){const T=n[f],J=a[f];if(!J)continue;const[se,be]=J;js(()=>T.prepareRender(se,be))}for(let f=0,y=n.length;f<y;f++){const T=n[f],J=a[f];if(!J)continue;const[se,be]=J;js(()=>T.render(se,be))}}}var Js=c(6105);class hn{constructor(n,a,f,y,T){this.injectionOffsets=n,this.injectionOptions=a,this.breakOffsets=f,this.breakOffsetsVisibleColumn=y,this.wrappedTextIndentLength=T}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(n){return n>0?this.wrappedTextIndentLength:0}getLineLength(n){const a=n>0?this.breakOffsets[n-1]:0;let y=this.breakOffsets[n]-a;return n>0&&(y+=this.wrappedTextIndentLength),y}getMaxOutputOffset(n){return this.getLineLength(n)}translateToInputOffset(n,a){n>0&&(a=Math.max(0,a-this.wrappedTextIndentLength));let y=n===0?a:this.breakOffsets[n-1]+a;if(this.injectionOffsets!==null)for(let T=0;T<this.injectionOffsets.length&&y>this.injectionOffsets[T];T++)y<this.injectionOffsets[T]+this.injectionOptions[T].content.length?y=this.injectionOffsets[T]:y-=this.injectionOptions[T].content.length;return y}translateToOutputPosition(n,a=2){let f=n;if(this.injectionOffsets!==null)for(let y=0;y<this.injectionOffsets.length&&!(n<this.injectionOffsets[y]||a!==1&&n===this.injectionOffsets[y]);y++)f+=this.injectionOptions[y].content.length;return this.offsetInInputWithInjectionsToOutputPosition(f,a)}offsetInInputWithInjectionsToOutputPosition(n,a=2){let f=0,y=this.breakOffsets.length-1,T=0,J=0;for(;f<=y;){T=f+(y-f)/2|0;const be=this.breakOffsets[T];if(J=T>0?this.breakOffsets[T-1]:0,a===0)if(n<=J)y=T-1;else if(n>be)f=T+1;else break;else if(n<J)y=T-1;else if(n>=be)f=T+1;else break}let se=n-J;return T>0&&(se+=this.wrappedTextIndentLength),new yr(T,se)}normalizeOutputPosition(n,a,f){if(this.injectionOffsets!==null){const y=this.outputPositionToOffsetInInputWithInjections(n,a),T=this.normalizeOffsetInInputWithInjectionsAroundInjections(y,f);if(T!==y)return this.offsetInInputWithInjectionsToOutputPosition(T,f)}if(f===0){if(n>0&&a===this.getMinOutputOffset(n))return new yr(n-1,this.getMaxOutputOffset(n-1))}else if(f===1){const y=this.getOutputLineCount()-1;if(n<y&&a===this.getMaxOutputOffset(n))return new yr(n+1,this.getMinOutputOffset(n+1))}return new yr(n,a)}outputPositionToOffsetInInputWithInjections(n,a){return n>0&&(a=Math.max(0,a-this.wrappedTextIndentLength)),(n>0?this.breakOffsets[n-1]:0)+a}normalizeOffsetInInputWithInjectionsAroundInjections(n,a){const f=this.getInjectedTextAtOffset(n);if(!f)return n;if(a===2){if(n===f.offsetInInputWithInjections+f.length&&Ys(this.injectionOptions[f.injectedTextIndex].cursorStops))return f.offsetInInputWithInjections+f.length;{let y=f.offsetInInputWithInjections;if(Nl(this.injectionOptions[f.injectedTextIndex].cursorStops))return y;let T=f.injectedTextIndex-1;for(;T>=0&&this.injectionOffsets[T]===this.injectionOffsets[f.injectedTextIndex]&&!(Ys(this.injectionOptions[T].cursorStops)||(y-=this.injectionOptions[T].content.length,Nl(this.injectionOptions[T].cursorStops)));)T--;return y}}else if(a===1||a===4){let y=f.offsetInInputWithInjections+f.length,T=f.injectedTextIndex;for(;T+1<this.injectionOffsets.length&&this.injectionOffsets[T+1]===this.injectionOffsets[T];)y+=this.injectionOptions[T+1].content.length,T++;return y}else if(a===0||a===3){let y=f.offsetInInputWithInjections,T=f.injectedTextIndex;for(;T-1>=0&&this.injectionOffsets[T-1]===this.injectionOffsets[T];)y-=this.injectionOptions[T-1].content.length,T--;return y}(0,Js.xb)(a)}getInjectedText(n,a){const f=this.outputPositionToOffsetInInputWithInjections(n,a),y=this.getInjectedTextAtOffset(f);return y?{options:this.injectionOptions[y.injectedTextIndex]}:null}getInjectedTextAtOffset(n){const a=this.injectionOffsets,f=this.injectionOptions;if(a!==null){let y=0;for(let T=0;T<a.length;T++){const J=f[T].content.length,se=a[T]+y,be=a[T]+y+J;if(se>n)break;if(n<=be)return{injectedTextIndex:T,offsetInInputWithInjections:se,length:J};y+=J}}}}function Ys(st){return st==null?!0:st===_s.VW.Right||st===_s.VW.Both}function Nl(st){return st==null?!0:st===_s.VW.Left||st===_s.VW.Both}class qd{constructor(n){this.options=n}}class yr{constructor(n,a){this.outputLineIndex=n,this.outputOffset=a}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(n){return new Ue.y(n+this.outputLineIndex,this.outputOffset+1)}}var Ni=c(24934);const vn=(0,Ln.H)("domLineBreaksComputer",{createHTML:st=>st});class ms{static create(n){return new ms(new WeakRef(n))}constructor(n){this.targetWindow=n}createLineBreaksComputer(n,a,f,y,T){const J=[],se=[];return{addRequest:(be,Oe,Ge)=>{J.push(be),se.push(Oe)},finalize:()=>As((0,$n.eU)(this.targetWindow.deref()),J,n,a,f,y,T,se)}}}function As(st,n,a,f,y,T,J,se){function be(xi){const cn=se[xi];if(cn){const rn=Ni.uK.applyInjectedText(n[xi],cn),gn=cn.map(Vn=>Vn.options),Sn=cn.map(Vn=>Vn.column-1);return new hn(Sn,gn,[rn.length],[],0)}else return null}if(y===-1){const xi=[];for(let cn=0,rn=n.length;cn<rn;cn++)xi[cn]=be(cn);return xi}const Oe=Math.round(y*a.typicalHalfwidthCharacterWidth),je=Math.round(f*(T===3?2:T===2?1:0)),nt=Math.ceil(a.spaceWidth*je),lt=document.createElement("div");(0,C.M)(lt,a);const bt=new Qn.fe(1e4),xt=[],At=[],Gt=[],ti=[],li=[];for(let xi=0;xi<n.length;xi++){const cn=Ni.uK.applyInjectedText(n[xi],se[xi]);let rn=0,gn=0,Sn=Oe;if(T!==0)if(rn=yi.HG(cn),rn===-1)rn=0;else{for(let Cs=0;Cs<rn;Cs++){const Os=cn.charCodeAt(Cs)===9?f-gn%f:1;gn+=Os}const Ns=Math.ceil(a.spaceWidth*gn);Ns+a.typicalFullwidthCharacterWidth>Oe?(rn=0,gn=0):Sn=Oe-Ns}const Vn=cn.substr(rn),jn=Ga(Vn,gn,f,Sn,bt,nt);xt[xi]=rn,At[xi]=gn,Gt[xi]=Vn,ti[xi]=jn[0],li[xi]=jn[1]}const ki=bt.build(),Ti=vn?.createHTML(ki)??ki;lt.innerHTML=Ti,lt.style.position="absolute",lt.style.top="10000",J==="keepAll"?(lt.style.wordBreak="keep-all",lt.style.overflowWrap="anywhere"):(lt.style.wordBreak="inherit",lt.style.overflowWrap="break-word"),st.document.body.appendChild(lt);const Yi=document.createRange(),Ai=Array.prototype.slice.call(lt.children,0),Ji=[];for(let xi=0;xi<n.length;xi++){const cn=Ai[xi],rn=Vr(Yi,cn,Gt[xi],ti[xi]);if(rn===null){Ji[xi]=be(xi);continue}const gn=xt[xi],Sn=At[xi]+je,Vn=li[xi],jn=[];for(let es=0,to=rn.length;es<to;es++)jn[es]=Vn[rn[es]];if(gn!==0)for(let es=0,to=rn.length;es<to;es++)rn[es]+=gn;let Ns,Cs;const Os=se[xi];Os?(Ns=Os.map(es=>es.options),Cs=Os.map(es=>es.column-1)):(Ns=null,Cs=null),Ji[xi]=new hn(Cs,Ns,rn,jn,Sn)}return lt.remove(),Ji}function Ga(st,n,a,f,y,T){if(T!==0){const nt=String(T);y.appendString('<div style="text-indent: -'),y.appendString(nt),y.appendString("px; padding-left: "),y.appendString(nt),y.appendString("px; box-sizing: border-box; width:")}else y.appendString('<div style="width:');y.appendString(String(f)),y.appendString('px;">');const J=st.length;let se=n,be=0;const Oe=[],Ge=[];let je=0<J?st.charCodeAt(0):0;y.appendString("<span>");for(let nt=0;nt<J;nt++){nt!==0&&nt%16384===0&&y.appendString("</span><span>"),Oe[nt]=be,Ge[nt]=se;const lt=je;je=nt+1<J?st.charCodeAt(nt+1):0;let bt=1,xt=1;switch(lt){case 9:bt=a-se%a,xt=bt;for(let At=1;At<=bt;At++)At<bt?y.appendCharCode(160):y.appendASCIICharCode(32);break;case 32:je===32?y.appendCharCode(160):y.appendASCIICharCode(32);break;case 60:y.appendString("&lt;");break;case 62:y.appendString("&gt;");break;case 38:y.appendString("&amp;");break;case 0:y.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:y.appendCharCode(65533);break;default:yi.ne(lt)&&xt++,lt<32?y.appendCharCode(9216+lt):y.appendCharCode(lt)}be+=bt,se+=xt}return y.appendString("</span>"),Oe[st.length]=be,Ge[st.length]=se,y.appendString("</div>"),[Oe,Ge]}function Vr(st,n,a,f){if(a.length<=1)return null;const y=Array.prototype.slice.call(n.children,0),T=[];try{Lr(st,y,f,0,null,a.length-1,null,T)}catch{return null}return T.length===0?null:(T.push(a.length),T)}function Lr(st,n,a,f,y,T,J,se){if(f===T||(y=y||va(st,n,a[f],a[f+1]),J=J||va(st,n,a[T],a[T+1]),Math.abs(y[0].top-J[0].top)<=.1))return;if(f+1===T){se.push(T);return}const be=f+(T-f)/2|0,Oe=va(st,n,a[be],a[be+1]);Lr(st,n,a,f,y,be,Oe,se),Lr(st,n,a,be,Oe,T,J,se)}function va(st,n,a,f){return st.setStart(n[a/16384|0].firstChild,a%16384),st.setEnd(n[f/16384|0].firstChild,f%16384),st.getClientRects()}class Qa extends I.jG{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new I.$w),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(n,a,f){this._editor=n,this._instantiationService=f;for(const y of a){if(this._pending.has(y.id)){(0,O.dz)(new Error(`Cannot have two contributions with the same id ${y.id}`));continue}this._pending.set(y.id,y)}this._instantiateSome(0),this._register((0,w.U3)((0,w.zk)(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register((0,w.U3)((0,w.zk)(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register((0,w.U3)((0,w.zk)(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const n={};for(const[a,f]of this._instances)typeof f.saveViewState=="function"&&(n[a]=f.saveViewState());return n}restoreViewState(n){for(const[a,f]of this._instances)typeof f.restoreViewState=="function"&&f.restoreViewState(n[a])}get(n){return this._instantiateById(n),this._instances.get(n)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){return(0,w.U3)((0,w.zk)(this._editor?.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(n){if(this._finishedInstantiation[n])return;this._finishedInstantiation[n]=!0;const a=this._findPendingContributionsByInstantiation(n);for(const f of a)this._instantiateById(f.id)}_findPendingContributionsByInstantiation(n){const a=[];for(const[,f]of this._pending)f.instantiation===n&&a.push(f);return a}_instantiateById(n){const a=this._pending.get(n);if(a){if(this._pending.delete(n),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const f=this._instantiationService.createInstance(a.ctor,this._editor);this._instances.set(a.id,f),typeof f.restoreViewState=="function"&&a.instantiation}catch(f){(0,O.dz)(f)}}}}var Tl=c(33836),Ur=c(5408),cr=c(74719),Jn=c(89464),Rl=c(61231),zr=c(87451),Zo=c(84139),Dr=c(79821);class Er{static create(n){return new Er(n.get(135),n.get(134))}constructor(n,a){this.classifier=new xc(n,a)}createLineBreaksComputer(n,a,f,y,T){const J=[],se=[],be=[];return{addRequest:(Oe,Ge,je)=>{J.push(Oe),se.push(Ge),be.push(je)},finalize:()=>{const Oe=n.typicalFullwidthCharacterWidth/n.typicalHalfwidthCharacterWidth,Ge=[];for(let je=0,nt=J.length;je<nt;je++){const lt=se[je],bt=be[je];bt&&!bt.injectionOptions&&!lt?Ge[je]=kc(this.classifier,bt,J[je],a,f,Oe,y,T):Ge[je]=eh(this.classifier,J[je],lt,a,f,Oe,y,T)}return Pl.length=0,jr.length=0,Ge}}}}class xc extends Dr.V{constructor(n,a){super(0);for(let f=0;f<n.length;f++)this.set(n.charCodeAt(f),1);for(let f=0;f<a.length;f++)this.set(a.charCodeAt(f),2)}get(n){return n>=0&&n<256?this._asciiMap[n]:n>=12352&&n<=12543||n>=13312&&n<=19903||n>=19968&&n<=40959?3:this._map.get(n)||this._defaultValue}}let Pl=[],jr=[];function kc(st,n,a,f,y,T,J,se){if(y===-1)return null;const be=a.length;if(be<=1)return null;const Oe=se==="keepAll",Ge=n.breakOffsets,je=n.breakOffsetsVisibleColumn,nt=Kr(a,f,y,T,J),lt=y-nt,bt=Pl,xt=jr;let At=0,Gt=0,ti=0,li=y;const ki=Ge.length;let Ti=0;if(Ti>=0){let Yi=Math.abs(je[Ti]-li);for(;Ti+1<ki;){const Ai=Math.abs(je[Ti+1]-li);if(Ai>=Yi)break;Yi=Ai,Ti++}}for(;Ti<ki;){let Yi=Ti<0?0:Ge[Ti],Ai=Ti<0?0:je[Ti];Gt>Yi&&(Yi=Gt,Ai=ti);let Ji=0,xi=0,cn=0,rn=0;if(Ai<=li){let Sn=Ai,Vn=Yi===0?0:a.charCodeAt(Yi-1),jn=Yi===0?0:st.get(Vn),Ns=!0;for(let Cs=Yi;Cs<be;Cs++){const Os=Cs,es=a.charCodeAt(Cs);let to,Vs;if(yi.pc(es)?(Cs++,to=0,Vs=2):(to=st.get(es),Vs=xr(es,Sn,f,T)),Os>Gt&&Ya(Vn,jn,es,to,Oe)&&(Ji=Os,xi=Sn),Sn+=Vs,Sn>li){Os>Gt?(cn=Os,rn=Sn-Vs):(cn=Cs+1,rn=Sn),Sn-xi>lt&&(Ji=0),Ns=!1;break}Vn=es,jn=to}if(Ns){At>0&&(bt[At]=Ge[Ge.length-1],xt[At]=je[Ge.length-1],At++);break}}if(Ji===0){let Sn=Ai,Vn=a.charCodeAt(Yi),jn=st.get(Vn),Ns=!1;for(let Cs=Yi-1;Cs>=Gt;Cs--){const Os=Cs+1,es=a.charCodeAt(Cs);if(es===9){Ns=!0;break}let to,Vs;if(yi.LJ(es)?(Cs--,to=0,Vs=2):(to=st.get(es),Vs=yi.ne(es)?T:1),Sn<=li){if(cn===0&&(cn=Os,rn=Sn),Sn<=li-lt)break;if(Ya(es,to,Vn,jn,Oe)){Ji=Os,xi=Sn;break}}Sn-=Vs,Vn=es,jn=to}if(Ji!==0){const Cs=lt-(rn-xi);if(Cs<=f){const Os=a.charCodeAt(cn);let es;yi.pc(Os)?es=2:es=xr(Os,rn,f,T),Cs-es<0&&(Ji=0)}}if(Ns){Ti--;continue}}if(Ji===0&&(Ji=cn,xi=rn),Ji<=Gt){const Sn=a.charCodeAt(Gt);yi.pc(Sn)?(Ji=Gt+2,xi=ti+2):(Ji=Gt+1,xi=ti+xr(Sn,ti,f,T))}for(Gt=Ji,bt[At]=Ji,ti=xi,xt[At]=xi,At++,li=xi+lt;Ti<0||Ti<ki&&je[Ti]<xi;)Ti++;let gn=Math.abs(je[Ti]-li);for(;Ti+1<ki;){const Sn=Math.abs(je[Ti+1]-li);if(Sn>=gn)break;gn=Sn,Ti++}}return At===0?null:(bt.length=At,xt.length=At,Pl=n.breakOffsets,jr=n.breakOffsetsVisibleColumn,n.breakOffsets=bt,n.breakOffsetsVisibleColumn=xt,n.wrappedTextIndentLength=nt,n)}function eh(st,n,a,f,y,T,J,se){const be=Ni.uK.applyInjectedText(n,a);let Oe,Ge;if(a&&a.length>0?(Oe=a.map(xi=>xi.options),Ge=a.map(xi=>xi.column-1)):(Oe=null,Ge=null),y===-1)return Oe?new hn(Ge,Oe,[be.length],[],0):null;const je=be.length;if(je<=1)return Oe?new hn(Ge,Oe,[be.length],[],0):null;const nt=se==="keepAll",lt=Kr(be,f,y,T,J),bt=y-lt,xt=[],At=[];let Gt=0,ti=0,li=0,ki=y,Ti=be.charCodeAt(0),Yi=st.get(Ti),Ai=xr(Ti,0,f,T),Ji=1;yi.pc(Ti)&&(Ai+=1,Ti=be.charCodeAt(1),Yi=st.get(Ti),Ji++);for(let xi=Ji;xi<je;xi++){const cn=xi,rn=be.charCodeAt(xi);let gn,Sn;yi.pc(rn)?(xi++,gn=0,Sn=2):(gn=st.get(rn),Sn=xr(rn,Ai,f,T)),Ya(Ti,Yi,rn,gn,nt)&&(ti=cn,li=Ai),Ai+=Sn,Ai>ki&&((ti===0||Ai-li>bt)&&(ti=cn,li=Ai-Sn),xt[Gt]=ti,At[Gt]=li,Gt++,ki=li+bt,ti=0),Ti=rn,Yi=gn}return Gt===0&&(!a||a.length===0)?null:(xt[Gt]=je,At[Gt]=Ai,new hn(Ge,Oe,xt,At,lt))}function xr(st,n,a,f){return st===9?a-n%a:yi.ne(st)||st<32?f:1}function Al(st,n){return n-st%n}function Ya(st,n,a,f,y){return a!==32&&(n===2&&f!==2||n!==1&&f===1||!y&&n===3&&f!==2||!y&&f===3&&n!==1)}function Kr(st,n,a,f,y){let T=0;if(y!==0){const J=yi.HG(st);if(J!==-1){for(let be=0;be<J;be++){const Oe=st.charCodeAt(be)===9?Al(T,n):1;T+=Oe}const se=y===3?2:y===2?1:0;for(let be=0;be<se;be++){const Oe=Al(T,n);T+=Oe}T+f>a&&(T=0)}}return T}var Zs=c(51922),is=c(92998);class On{constructor(n){this._selTrackedRange=null,this._trackSelection=!0,this._setState(n,new is.mG(new x.Q(1,1,1,1),0,0,new Ue.y(1,1),0),new is.mG(new x.Q(1,1,1,1),0,0,new Ue.y(1,1),0))}dispose(n){this._removeTrackedRange(n)}startTrackingSelection(n){this._trackSelection=!0,this._updateTrackedRange(n)}stopTrackingSelection(n){this._trackSelection=!1,this._removeTrackedRange(n)}_updateTrackedRange(n){this._trackSelection&&(this._selTrackedRange=n.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(n){this._selTrackedRange=n.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new is.MF(this.modelState,this.viewState)}readSelectionFromMarkers(n){const a=n.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!a.isEmpty()?Xt.L.fromRange(a.collapseToEnd(),this.modelState.selection.getDirection()):Xt.L.fromRange(a,this.modelState.selection.getDirection())}ensureValidState(n){this._setState(n,this.modelState,this.viewState)}setState(n,a,f){this._setState(n,a,f)}static _validatePositionWithCache(n,a,f,y){return a.equals(f)?y:n.normalizePosition(a,2)}static _validateViewState(n,a){const f=a.position,y=a.selectionStart.getStartPosition(),T=a.selectionStart.getEndPosition(),J=n.normalizePosition(f,2),se=this._validatePositionWithCache(n,y,f,J),be=this._validatePositionWithCache(n,T,y,se);return f.equals(J)&&y.equals(se)&&T.equals(be)?a:new is.mG(x.Q.fromPositions(se,be),a.selectionStartKind,a.selectionStartLeftoverVisibleColumns+y.column-se.column,J,a.leftoverVisibleColumns+f.column-J.column)}_setState(n,a,f){if(f&&(f=On._validateViewState(n.viewModel,f)),a){const y=n.model.validateRange(a.selectionStart),T=a.selectionStart.equalsRange(y)?a.selectionStartLeftoverVisibleColumns:0,J=n.model.validatePosition(a.position),se=a.position.equals(J)?a.leftoverVisibleColumns:0;a=new is.mG(y,a.selectionStartKind,T,J,se)}else{if(!f)return;const y=n.model.validateRange(n.coordinatesConverter.convertViewRangeToModelRange(f.selectionStart)),T=n.model.validatePosition(n.coordinatesConverter.convertViewPositionToModelPosition(f.position));a=new is.mG(y,f.selectionStartKind,f.selectionStartLeftoverVisibleColumns,T,f.leftoverVisibleColumns)}if(f){const y=n.coordinatesConverter.validateViewRange(f.selectionStart,a.selectionStart),T=n.coordinatesConverter.validateViewPosition(f.position,a.position);f=new is.mG(y,a.selectionStartKind,a.selectionStartLeftoverVisibleColumns,T,a.leftoverVisibleColumns)}else{const y=n.coordinatesConverter.convertModelPositionToViewPosition(new Ue.y(a.selectionStart.startLineNumber,a.selectionStart.startColumn)),T=n.coordinatesConverter.convertModelPositionToViewPosition(new Ue.y(a.selectionStart.endLineNumber,a.selectionStart.endColumn)),J=new x.Q(y.lineNumber,y.column,T.lineNumber,T.column),se=n.coordinatesConverter.convertModelPositionToViewPosition(a.position);f=new is.mG(J,a.selectionStartKind,a.selectionStartLeftoverVisibleColumns,se,a.leftoverVisibleColumns)}this.modelState=a,this.viewState=f,this._updateTrackedRange(n)}}class Ks{constructor(n){this.context=n,this.cursors=[new On(n)],this.lastAddedCursorIndex=0}dispose(){for(const n of this.cursors)n.dispose(this.context)}startTrackingSelections(){for(const n of this.cursors)n.startTrackingSelection(this.context)}stopTrackingSelections(){for(const n of this.cursors)n.stopTrackingSelection(this.context)}updateContext(n){this.context=n}ensureValidState(){for(const n of this.cursors)n.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(n=>n.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(n=>n.asCursorState())}getViewPositions(){return this.cursors.map(n=>n.viewState.position)}getTopMostViewPosition(){return(0,Zs.kh)(this.cursors,(0,_.VE)(n=>n.viewState.position,Ue.y.compare)).viewState.position}getBottomMostViewPosition(){return(0,Zs.ot)(this.cursors,(0,_.VE)(n=>n.viewState.position,Ue.y.compare)).viewState.position}getSelections(){return this.cursors.map(n=>n.modelState.selection)}getViewSelections(){return this.cursors.map(n=>n.viewState.selection)}setSelections(n){this.setStates(is.MF.fromModelSelections(n))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(n){n!==null&&(this.cursors[0].setState(this.context,n[0].modelState,n[0].viewState),this._setSecondaryStates(n.slice(1)))}_setSecondaryStates(n){const a=this.cursors.length-1,f=n.length;if(a<f){const y=f-a;for(let T=0;T<y;T++)this._addSecondaryCursor()}else if(a>f){const y=a-f;for(let T=0;T<y;T++)this._removeSecondaryCursor(this.cursors.length-2)}for(let y=0;y<f;y++)this.cursors[y+1].setState(this.context,n[y].modelState,n[y].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new On(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(n){this.lastAddedCursorIndex>=n+1&&this.lastAddedCursorIndex--,this.cursors[n+1].dispose(this.context),this.cursors.splice(n+1,1)}normalize(){if(this.cursors.length===1)return;const n=this.cursors.slice(0),a=[];for(let f=0,y=n.length;f<y;f++)a.push({index:f,selection:n[f].modelState.selection});a.sort((0,_.VE)(f=>f.selection,x.Q.compareRangesUsingStarts));for(let f=0;f<a.length-1;f++){const y=a[f],T=a[f+1],J=y.selection,se=T.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let be;if(se.isEmpty()||J.isEmpty()?be=se.getStartPosition().isBeforeOrEqual(J.getEndPosition()):be=se.getStartPosition().isBefore(J.getEndPosition()),be){const Oe=y.index<T.index?f:f+1,Ge=y.index<T.index?f+1:f,je=a[Ge].index,nt=a[Oe].index,lt=a[Ge].selection,bt=a[Oe].selection;if(!lt.equalsSelection(bt)){const xt=lt.plusRange(bt),At=lt.selectionStartLineNumber===lt.startLineNumber&&lt.selectionStartColumn===lt.startColumn,Gt=bt.selectionStartLineNumber===bt.startLineNumber&&bt.selectionStartColumn===bt.startColumn;let ti;je===this.lastAddedCursorIndex?(ti=At,this.lastAddedCursorIndex=nt):ti=Gt;let li;ti?li=new Xt.L(xt.startLineNumber,xt.startColumn,xt.endLineNumber,xt.endColumn):li=new Xt.L(xt.endLineNumber,xt.endColumn,xt.startLineNumber,xt.startColumn),a[Oe].selection=li;const ki=is.MF.fromModelSelection(li);n[nt].setState(this.context,ki.modelState,ki.viewState)}for(const xt of a)xt.index>je&&xt.index--;n.splice(je,1),a.splice(Ge,1),this._removeSecondaryCursor(je-1),f--}}}}class Ca{constructor(n,a,f,y){this._cursorContextBrand=void 0,this.model=n,this.viewModel=a,this.coordinatesConverter=f,this.cursorConfig=y}}var th=c(71899),Xo=c(14932),Do=c(3320);class Ic{constructor(){this.type=0}}class Ol{constructor(){this.type=1}}class Za{constructor(n){this.type=2,this._source=n}hasChanged(n){return this._source.hasChanged(n)}}class Xa{constructor(n,a,f){this.selections=n,this.modelSelections=a,this.reason=f,this.type=3}}class Ao{constructor(n){this.type=4,n?(this.affectsMinimap=n.affectsMinimap,this.affectsOverviewRuler=n.affectsOverviewRuler,this.affectsGlyphMargin=n.affectsGlyphMargin,this.affectsLineNumber=n.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class $r{constructor(){this.type=5}}class ba{constructor(n){this.type=6,this.isFocused=n}}class Fl{constructor(){this.type=7}}class dr{constructor(){this.type=8}}class Wl{constructor(n,a){this.fromLineNumber=n,this.count=a,this.type=9}}class Oo{constructor(n,a){this.type=10,this.fromLineNumber=n,this.toLineNumber=a}}class Ja{constructor(n,a){this.type=11,this.fromLineNumber=n,this.toLineNumber=a}}class Sa{constructor(n,a,f,y,T,J,se){this.source=n,this.minimalReveal=a,this.range=f,this.selections=y,this.verticalType=T,this.revealHorizontal=J,this.scrollType=se,this.type=12}}class ih{constructor(n){this.type=13,this.scrollWidth=n.scrollWidth,this.scrollLeft=n.scrollLeft,this.scrollHeight=n.scrollHeight,this.scrollTop=n.scrollTop,this.scrollWidthChanged=n.scrollWidthChanged,this.scrollLeftChanged=n.scrollLeftChanged,this.scrollHeightChanged=n.scrollHeightChanged,this.scrollTopChanged=n.scrollTopChanged}}class Fo{constructor(n){this.theme=n,this.type=14}}class Mc{constructor(n){this.type=15,this.ranges=n}}class xu{constructor(){this.type=16}}class Nc{constructor(){this.type=17}}class nh extends I.jG{constructor(){super(),this._onEvent=this._register(new A.vl),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(n){this._addOutgoingEvent(n),this._emitOutgoingEvents()}_addOutgoingEvent(n){for(let a=0,f=this._outgoingEvents.length;a<f;a++){const y=this._outgoingEvents[a].kind===n.kind?this._outgoingEvents[a].attemptToMerge(n):null;if(y){this._outgoingEvents[a]=y;return}}this._outgoingEvents.push(n)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const n=this._outgoingEvents.shift();n.isNoOp()||this._onEvent.fire(n)}}addViewEventHandler(n){for(let a=0,f=this._eventHandlers.length;a<f;a++)this._eventHandlers[a];this._eventHandlers.push(n)}removeViewEventHandler(n){for(let a=0;a<this._eventHandlers.length;a++)if(this._eventHandlers[a]===n){this._eventHandlers.splice(a,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new sh),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const n=this._collector.outgoingEvents,a=this._collector.viewEvents;this._collector=null;for(const f of n)this._addOutgoingEvent(f);a.length>0&&this._emitMany(a)}this._emitOutgoingEvents()}emitSingleViewEvent(n){try{this.beginEmitViewEvents().emitViewEvent(n)}finally{this.endEmitViewEvents()}}_emitMany(n){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(n):this._viewEventQueue=n,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const n=this._viewEventQueue;this._viewEventQueue=null;const a=this._eventHandlers.slice(0);for(const f of a)f.handleEvents(n)}}}class sh{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(n){this.viewEvents.push(n)}emitOutgoingEvent(n){this.outgoingEvents.push(n)}}class wa{constructor(n,a,f,y){this.kind=0,this._oldContentWidth=n,this._oldContentHeight=a,this.contentWidth=f,this.contentHeight=y,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(n){return n.kind!==this.kind?null:new wa(this._oldContentWidth,this._oldContentHeight,n.contentWidth,n.contentHeight)}}class ya{constructor(n,a){this.kind=1,this.oldHasFocus=n,this.hasFocus=a}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(n){return n.kind!==this.kind?null:new ya(this.oldHasFocus,n.hasFocus)}}class qn{constructor(n,a,f,y,T,J,se,be){this.kind=2,this._oldScrollWidth=n,this._oldScrollLeft=a,this._oldScrollHeight=f,this._oldScrollTop=y,this.scrollWidth=T,this.scrollLeft=J,this.scrollHeight=se,this.scrollTop=be,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(n){return n.kind!==this.kind?null:new qn(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,n.scrollWidth,n.scrollLeft,n.scrollHeight,n.scrollTop)}}class Bl{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(n){return n.kind!==this.kind?null:this}}class Tc{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(n){return n.kind!==this.kind?null:this}}class La{constructor(n,a,f,y,T,J,se){this.kind=6,this.oldSelections=n,this.selections=a,this.oldModelVersionId=f,this.modelVersionId=y,this.source=T,this.reason=J,this.reachedMaxCursorCount=se}static _selectionsAreEqual(n,a){if(!n&&!a)return!0;if(!n||!a)return!1;const f=n.length,y=a.length;if(f!==y)return!1;for(let T=0;T<f;T++)if(!n[T].equalsSelection(a[T]))return!1;return!0}isNoOp(){return La._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(n){return n.kind!==this.kind?null:new La(this.oldSelections,n.selections,this.oldModelVersionId,n.modelVersionId,n.source,n.reason,this.reachedMaxCursorCount||n.reachedMaxCursorCount)}}class Wo{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(n){return n.kind!==this.kind?null:this}}class oh{constructor(n){this.event=n,this.kind=7}isNoOp(){return!1}attemptToMerge(n){return null}}class $s{constructor(n){this.event=n,this.kind=8}isNoOp(){return!1}attemptToMerge(n){return null}}class Jo{constructor(n){this.event=n,this.kind=9}isNoOp(){return!1}attemptToMerge(n){return null}}class Gr{constructor(n){this.event=n,this.kind=10}isNoOp(){return!1}attemptToMerge(n){return null}}class ku{constructor(n){this.event=n,this.kind=11}isNoOp(){return!1}attemptToMerge(n){return null}}class Iu{constructor(n){this.event=n,this.kind=12}isNoOp(){return!1}attemptToMerge(n){return null}}class rh extends I.jG{constructor(n,a,f,y){super(),this._model=n,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=a,this._coordinatesConverter=f,this.context=new Ca(this._model,this._viewModel,this._coordinatesConverter,y),this._cursors=new Ks(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=(0,I.AS)(this._autoClosedActions),super.dispose()}updateConfiguration(n){this.context=new Ca(this._model,this._viewModel,this._coordinatesConverter,n),this._cursors.updateContext(this.context)}onLineMappingChanged(n){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(n,"viewModel",0,this.getCursorStates())}setHasFocus(n){this._hasFocus=n}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const n=this._cursors.getSelections();for(let a=0;a<this._autoClosedActions.length;a++){const f=this._autoClosedActions[a];f.isValid(n)||(f.dispose(),this._autoClosedActions.splice(a,1),a--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(n,a,f,y){let T=!1;const J=this.context.cursorConfig.multiCursorLimit;y!==null&&y.length>J&&(y=y.slice(0,J),T=!0);const se=kr.from(this._model,this);return this._cursors.setStates(y),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(n,a,f,se,T)}setCursorColumnSelectData(n){this._columnSelectData=n}revealAll(n,a,f,y,T,J){const se=this._cursors.getViewPositions();let be=null,Oe=null;se.length>1?Oe=this._cursors.getViewSelections():be=x.Q.fromPositions(se[0],se[0]),n.emitViewEvent(new Sa(a,f,be,Oe,y,T,J))}revealPrimary(n,a,f,y,T,J){const be=[this._cursors.getPrimaryCursor().viewState.selection];n.emitViewEvent(new Sa(a,f,null,be,y,T,J))}saveState(){const n=[],a=this._cursors.getSelections();for(let f=0,y=a.length;f<y;f++){const T=a[f];n.push({inSelectionMode:!T.isEmpty(),selectionStart:{lineNumber:T.selectionStartLineNumber,column:T.selectionStartColumn},position:{lineNumber:T.positionLineNumber,column:T.positionColumn}})}return n}restoreState(n,a){const f=[];for(let y=0,T=a.length;y<T;y++){const J=a[y];let se=1,be=1;J.position&&J.position.lineNumber&&(se=J.position.lineNumber),J.position&&J.position.column&&(be=J.position.column);let Oe=se,Ge=be;J.selectionStart&&J.selectionStart.lineNumber&&(Oe=J.selectionStart.lineNumber),J.selectionStart&&J.selectionStart.column&&(Ge=J.selectionStart.column),f.push({selectionStartLineNumber:Oe,selectionStartColumn:Ge,positionLineNumber:se,positionColumn:be})}this.setStates(n,"restoreState",0,is.MF.fromModelSelections(f)),this.revealAll(n,"restoreState",!1,0,!0,1)}onModelContentChanged(n,a){if(a instanceof Ni.vn){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(n,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const f=a.rawContentChangedEvent;if(this._knownModelVersionId=f.versionId,this._isHandling)return;const y=f.containsEvent(1);if(this._prevEditOperationType=0,y)this._cursors.dispose(),this._cursors=new Ks(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(n,"model",1,null,!1);else if(this._hasFocus&&f.resultingSelection&&f.resultingSelection.length>0){const T=is.MF.fromModelSelections(f.resultingSelection);this.setStates(n,"modelChange",f.isUndoing?5:f.isRedoing?6:2,T)&&this.revealAll(n,"modelChange",!1,0,!0,0)}else{const T=this._cursors.readSelectionFromMarkers();this.setStates(n,"modelChange",2,is.MF.fromModelSelections(T))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const n=this._cursors.getPrimaryCursor(),a=n.viewState.selectionStart.getStartPosition(),f=n.viewState.position;return{isReal:!1,fromViewLineNumber:a.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,a),toViewLineNumber:f.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,f)}}getSelections(){return this._cursors.getSelections()}setSelections(n,a,f,y){this.setStates(n,a,y,is.MF.fromModelSelections(f))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(n){this._prevEditOperationType=n}_pushAutoClosedAction(n,a){const f=[],y=[];for(let se=0,be=n.length;se<be;se++)f.push({range:n[se],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),y.push({range:a[se],options:{description:"auto-closed-enclosing",stickiness:1}});const T=this._model.deltaDecorations([],f),J=this._model.deltaDecorations([],y);this._autoClosedActions.push(new qa(this._model,T,J))}_executeEditOperation(n){if(!n)return;n.shouldPushStackElementBefore&&this._model.pushStackElement();const a=el.executeCommands(this._model,this._cursors.getSelections(),n.commands);if(a){this._interpretCommandResult(a);const f=[],y=[];for(let T=0;T<n.commands.length;T++){const J=n.commands[T];J instanceof Do.Hs&&J.enclosingRange&&J.closeCharacterRange&&(f.push(J.closeCharacterRange),y.push(J.enclosingRange))}f.length>0&&this._pushAutoClosedAction(f,y),this._prevEditOperationType=n.type}n.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(n){(!n||n.length===0)&&(n=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(n),this._cursors.normalize()}_emitStateChangedIfNecessary(n,a,f,y,T){const J=kr.from(this._model,this);if(J.equals(y))return!1;const se=this._cursors.getSelections(),be=this._cursors.getViewSelections();if(n.emitViewEvent(new Xa(be,se,f)),!y||y.cursorState.length!==J.cursorState.length||J.cursorState.some((Oe,Ge)=>!Oe.modelState.equals(y.cursorState[Ge].modelState))){const Oe=y?y.cursorState.map(je=>je.modelState.selection):null,Ge=y?y.modelVersionId:0;n.emitOutgoingEvent(new La(Oe,se,Ge,J.modelVersionId,a||"keyboard",f,T))}return!0}_findAutoClosingPairs(n){if(!n.length)return null;const a=[];for(let f=0,y=n.length;f<y;f++){const T=n[f];if(!T.text||T.text.indexOf(`
`)>=0)return null;const J=T.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!J)return null;const se=J[1],be=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(se);if(!be||be.length!==1)return null;const Oe=be[0].open,Ge=T.text.length-J[2].length-1,je=T.text.lastIndexOf(Oe,Ge-1);if(je===-1)return null;a.push([je,Ge])}return a}executeEdits(n,a,f,y){let T=null;a==="snippet"&&(T=this._findAutoClosingPairs(f)),T&&(f[0]._isTracked=!0);const J=[],se=[],be=this._model.pushEditOperations(this.getSelections(),f,Oe=>{if(T)for(let je=0,nt=T.length;je<nt;je++){const[lt,bt]=T[je],xt=Oe[je],At=xt.range.startLineNumber,Gt=xt.range.startColumn-1+lt,ti=xt.range.startColumn-1+bt;J.push(new x.Q(At,ti+1,At,ti+2)),se.push(new x.Q(At,Gt+1,At,ti+2))}const Ge=y(Oe);return Ge&&(this._isHandling=!0),Ge});be&&(this._isHandling=!1,this.setSelections(n,a,be,0)),J.length>0&&this._pushAutoClosedAction(J,se)}_executeEdit(n,a,f,y=0){if(this.context.cursorConfig.readOnly)return;const T=kr.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),n()}catch(J){(0,O.dz)(J)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(a,f,y,T,!1)&&this.revealAll(a,f,!1,0,!0,0)}getAutoClosedCharacters(){return qa.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(n){this._compositionState=new Da(this._model,this.getSelections())}endComposition(n,a){const f=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{a==="keyboard"&&this._executeEditOperation(Xo.T.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,f,this.getSelections(),this.getAutoClosedCharacters()))},n,a)}type(n,a,f){this._executeEdit(()=>{if(f==="keyboard"){const y=a.length;let T=0;for(;T<y;){const J=yi.iy(a,T),se=a.substr(T,J);this._executeEditOperation(Xo.T.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),se)),T+=J}}else this._executeEditOperation(Xo.T.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),a))},n,f)}compositionType(n,a,f,y,T,J){if(a.length===0&&f===0&&y===0){if(T!==0){const se=this.getSelections().map(be=>{const Oe=be.getPosition();return new Xt.L(Oe.lineNumber,Oe.column+T,Oe.lineNumber,Oe.column+T)});this.setSelections(n,J,se,0)}return}this._executeEdit(()=>{this._executeEditOperation(Xo.T.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),a,f,y,T))},n,J)}paste(n,a,f,y,T){this._executeEdit(()=>{this._executeEditOperation(Xo.T.paste(this.context.cursorConfig,this._model,this.getSelections(),a,f,y||[]))},n,T,4)}cut(n,a){this._executeEdit(()=>{this._executeEditOperation(th.g.cut(this.context.cursorConfig,this._model,this.getSelections()))},n,a)}executeCommand(n,a,f){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new is.vY(0,[a],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},n,f)}executeCommands(n,a,f){this._executeEdit(()=>{this._executeEditOperation(new is.vY(0,a,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},n,f)}}class kr{static from(n,a){return new kr(n.getVersionId(),a.getCursorStates())}constructor(n,a){this.modelVersionId=n,this.cursorState=a}equals(n){if(!n||this.modelVersionId!==n.modelVersionId||this.cursorState.length!==n.cursorState.length)return!1;for(let a=0,f=this.cursorState.length;a<f;a++)if(!this.cursorState[a].equals(n.cursorState[a]))return!1;return!0}}class qa{static getAllAutoClosedCharacters(n){let a=[];for(const f of n)a=a.concat(f.getAutoClosedCharactersRanges());return a}constructor(n,a,f){this._model=n,this._autoClosedCharactersDecorations=a,this._autoClosedEnclosingDecorations=f}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const n=[];for(let a=0;a<this._autoClosedCharactersDecorations.length;a++){const f=this._model.getDecorationRange(this._autoClosedCharactersDecorations[a]);f&&n.push(f)}return n}isValid(n){const a=[];for(let f=0;f<this._autoClosedEnclosingDecorations.length;f++){const y=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[f]);if(y&&(a.push(y),y.startLineNumber!==y.endLineNumber))return!1}a.sort(x.Q.compareRangesUsingStarts),n.sort(x.Q.compareRangesUsingStarts);for(let f=0;f<n.length;f++)if(f>=a.length||!a[f].strictContainsRange(n[f]))return!1;return!0}}class el{static executeCommands(n,a,f){const y={model:n,selectionsBefore:a,trackedRanges:[],trackedRangesDirection:[]},T=this._innerExecuteCommands(y,f);for(let J=0,se=y.trackedRanges.length;J<se;J++)y.model._setTrackedRange(y.trackedRanges[J],null,0);return T}static _innerExecuteCommands(n,a){if(this._arrayIsEmpty(a))return null;const f=this._getEditOperations(n,a);if(f.operations.length===0)return null;const y=f.operations,T=this._getLoserCursorMap(y);if(T.hasOwnProperty("0"))return null;const J=[];for(let Oe=0,Ge=y.length;Oe<Ge;Oe++)T.hasOwnProperty(y[Oe].identifier.major.toString())||J.push(y[Oe]);f.hadTrackedEditOperation&&J.length>0&&(J[0]._isTracked=!0);let se=n.model.pushEditOperations(n.selectionsBefore,J,Oe=>{const Ge=[];for(let lt=0;lt<n.selectionsBefore.length;lt++)Ge[lt]=[];for(const lt of Oe)lt.identifier&&Ge[lt.identifier.major].push(lt);const je=(lt,bt)=>lt.identifier.minor-bt.identifier.minor,nt=[];for(let lt=0;lt<n.selectionsBefore.length;lt++)Ge[lt].length>0?(Ge[lt].sort(je),nt[lt]=a[lt].computeCursorState(n.model,{getInverseEditOperations:()=>Ge[lt],getTrackedSelection:bt=>{const xt=parseInt(bt,10),At=n.model._getTrackedRange(n.trackedRanges[xt]);return n.trackedRangesDirection[xt]===0?new Xt.L(At.startLineNumber,At.startColumn,At.endLineNumber,At.endColumn):new Xt.L(At.endLineNumber,At.endColumn,At.startLineNumber,At.startColumn)}})):nt[lt]=n.selectionsBefore[lt];return nt});se||(se=n.selectionsBefore);const be=[];for(const Oe in T)T.hasOwnProperty(Oe)&&be.push(parseInt(Oe,10));be.sort((Oe,Ge)=>Ge-Oe);for(const Oe of be)se.splice(Oe,1);return se}static _arrayIsEmpty(n){for(let a=0,f=n.length;a<f;a++)if(n[a])return!1;return!0}static _getEditOperations(n,a){let f=[],y=!1;for(let T=0,J=a.length;T<J;T++){const se=a[T];if(se){const be=this._getEditOperationsFromCommand(n,T,se);f=f.concat(be.operations),y=y||be.hadTrackedEditOperation}}return{operations:f,hadTrackedEditOperation:y}}static _getEditOperationsFromCommand(n,a,f){const y=[];let T=0;const J=(je,nt,lt=!1)=>{x.Q.isEmpty(je)&&nt===""||y.push({identifier:{major:a,minor:T++},range:je,text:nt,forceMoveMarkers:lt,isAutoWhitespaceEdit:f.insertsAutoWhitespace})};let se=!1;const Ge={addEditOperation:J,addTrackedEditOperation:(je,nt,lt)=>{se=!0,J(je,nt,lt)},trackSelection:(je,nt)=>{const lt=Xt.L.liftSelection(je);let bt;if(lt.isEmpty())if(typeof nt=="boolean")nt?bt=2:bt=3;else{const Gt=n.model.getLineMaxColumn(lt.startLineNumber);lt.startColumn===Gt?bt=2:bt=3}else bt=1;const xt=n.trackedRanges.length,At=n.model._setTrackedRange(null,lt,bt);return n.trackedRanges[xt]=At,n.trackedRangesDirection[xt]=lt.getDirection(),xt.toString()}};try{f.getEditOperations(n.model,Ge)}catch(je){return(0,O.dz)(je),{operations:[],hadTrackedEditOperation:!1}}return{operations:y,hadTrackedEditOperation:se}}static _getLoserCursorMap(n){n=n.slice(0),n.sort((f,y)=>-x.Q.compareRangesUsingEnds(f.range,y.range));const a={};for(let f=1;f<n.length;f++){const y=n[f-1],T=n[f];if(x.Q.getStartPosition(y.range).isBefore(x.Q.getEndPosition(T.range))){let J;y.identifier.major>T.identifier.major?J=y.identifier.major:J=T.identifier.major,a[J.toString()]=!0;for(let se=0;se<n.length;se++)n[se].identifier.major===J&&(n.splice(se,1),se<f&&f--,se--);f>0&&f--}}return a}}class Mu{constructor(n,a,f){this.text=n,this.startSelection=a,this.endSelection=f}}class Da{static _capture(n,a){const f=[];for(const y of a){if(y.startLineNumber!==y.endLineNumber)return null;f.push(new Mu(n.getLineContent(y.startLineNumber),y.startColumn-1,y.endColumn-1))}return f}constructor(n,a){this._original=Da._capture(n,a)}deduceOutcome(n,a){if(!this._original)return null;const f=Da._capture(n,a);if(!f||this._original.length!==f.length)return null;const y=[];for(let T=0,J=this._original.length;T<J;T++)y.push(Da._deduceOutcome(this._original[T],f[T]));return y}static _deduceOutcome(n,a){const f=Math.min(n.startSelection,a.startSelection,yi.Qp(n.text,a.text)),y=Math.min(n.text.length-n.endSelection,a.text.length-a.endSelection,yi.Vi(n.text,a.text)),T=n.text.substring(f,n.text.length-y),J=a.text.substring(f,a.text.length-y);return new Xo.v(T,n.startSelection-f,n.endSelection-f,J,a.startSelection-f,a.endSelection-f)}}var Nu=c(49896),Tu=c(3207),ah=c(1822);class ho{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(n){this._hasPending=!0,this._inserts.push(n)}change(n){this._hasPending=!0,this._changes.push(n)}remove(n){this._hasPending=!0,this._removes.push(n)}mustCommit(){return this._hasPending}commit(n){if(!this._hasPending)return;const a=this._inserts,f=this._changes,y=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],n._commitPendingChanges(a,f,y)}}class Hl{constructor(n,a,f,y,T){this.id=n,this.afterLineNumber=a,this.ordinal=f,this.height=y,this.minWidth=T,this.prefixSum=0}}class Vl{static{this.INSTANCE_COUNT=0}constructor(n,a,f,y){this._instanceId=yi.tk(++Vl.INSTANCE_COUNT),this._pendingChanges=new ho,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=n,this._lineHeight=a,this._paddingTop=f,this._paddingBottom=y}static findInsertionIndex(n,a,f){let y=0,T=n.length;for(;y<T;){const J=y+T>>>1;a===n[J].afterLineNumber?f<n[J].ordinal?T=J:y=J+1:a<n[J].afterLineNumber?T=J:y=J+1}return y}setLineHeight(n){this._checkPendingChanges(),this._lineHeight=n}setPadding(n,a){this._paddingTop=n,this._paddingBottom=a}onFlushed(n){this._checkPendingChanges(),this._lineCount=n}changeWhitespace(n){let a=!1;try{n({insertWhitespace:(y,T,J,se)=>{a=!0,y=y|0,T=T|0,J=J|0,se=se|0;const be=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new Hl(be,y,T,J,se)),be},changeOneWhitespace:(y,T,J)=>{a=!0,T=T|0,J=J|0,this._pendingChanges.change({id:y,newAfterLineNumber:T,newHeight:J})},removeWhitespace:y=>{a=!0,this._pendingChanges.remove({id:y})}})}finally{this._pendingChanges.commit(this)}return a}_commitPendingChanges(n,a,f){if((n.length>0||f.length>0)&&(this._minWidth=-1),n.length+a.length+f.length<=1){for(const be of n)this._insertWhitespace(be);for(const be of a)this._changeOneWhitespace(be.id,be.newAfterLineNumber,be.newHeight);for(const be of f){const Oe=this._findWhitespaceIndex(be.id);Oe!==-1&&this._removeWhitespace(Oe)}return}const y=new Set;for(const be of f)y.add(be.id);const T=new Map;for(const be of a)T.set(be.id,be);const J=be=>{const Oe=[];for(const Ge of be)if(!y.has(Ge.id)){if(T.has(Ge.id)){const je=T.get(Ge.id);Ge.afterLineNumber=je.newAfterLineNumber,Ge.height=je.newHeight}Oe.push(Ge)}return Oe},se=J(this._arr).concat(J(n));se.sort((be,Oe)=>be.afterLineNumber===Oe.afterLineNumber?be.ordinal-Oe.ordinal:be.afterLineNumber-Oe.afterLineNumber),this._arr=se,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(n){const a=Vl.findInsertionIndex(this._arr,n.afterLineNumber,n.ordinal);this._arr.splice(a,0,n),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,a-1)}_findWhitespaceIndex(n){const a=this._arr;for(let f=0,y=a.length;f<y;f++)if(a[f].id===n)return f;return-1}_changeOneWhitespace(n,a,f){const y=this._findWhitespaceIndex(n);if(y!==-1&&(this._arr[y].height!==f&&(this._arr[y].height=f,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,y-1)),this._arr[y].afterLineNumber!==a)){const T=this._arr[y];this._removeWhitespace(y),T.afterLineNumber=a,this._insertWhitespace(T)}}_removeWhitespace(n){this._arr.splice(n,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)}onLinesDeleted(n,a){this._checkPendingChanges(),n=n|0,a=a|0,this._lineCount-=a-n+1;for(let f=0,y=this._arr.length;f<y;f++){const T=this._arr[f].afterLineNumber;n<=T&&T<=a?this._arr[f].afterLineNumber=n-1:T>a&&(this._arr[f].afterLineNumber-=a-n+1)}}onLinesInserted(n,a){this._checkPendingChanges(),n=n|0,a=a|0,this._lineCount+=a-n+1;for(let f=0,y=this._arr.length;f<y;f++){const T=this._arr[f].afterLineNumber;n<=T&&(this._arr[f].afterLineNumber+=a-n+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(n){this._checkPendingChanges(),n=n|0;let a=Math.max(0,this._prefixSumValidIndex+1);a===0&&(this._arr[0].prefixSum=this._arr[0].height,a++);for(let f=a;f<=n;f++)this._arr[f].prefixSum=this._arr[f-1].prefixSum+this._arr[f].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,n),this._arr[n].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const n=this._lineHeight*this._lineCount,a=this.getWhitespacesTotalHeight();return n+a+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(n){this._checkPendingChanges(),n=n|0;const a=this._findLastWhitespaceBeforeLineNumber(n);return a===-1?0:this.getWhitespacesAccumulatedHeight(a)}_findLastWhitespaceBeforeLineNumber(n){n=n|0;const a=this._arr;let f=0,y=a.length-1;for(;f<=y;){const J=(y-f|0)/2|0,se=f+J|0;if(a[se].afterLineNumber<n){if(se+1>=a.length||a[se+1].afterLineNumber>=n)return se;f=se+1|0}else y=se-1|0}return-1}_findFirstWhitespaceAfterLineNumber(n){n=n|0;const f=this._findLastWhitespaceBeforeLineNumber(n)+1;return f<this._arr.length?f:-1}getFirstWhitespaceIndexAfterLineNumber(n){return this._checkPendingChanges(),n=n|0,this._findFirstWhitespaceAfterLineNumber(n)}getVerticalOffsetForLineNumber(n,a=!1){this._checkPendingChanges(),n=n|0;let f;n>1?f=this._lineHeight*(n-1):f=0;const y=this.getWhitespaceAccumulatedHeightBeforeLineNumber(n-(a?1:0));return f+y+this._paddingTop}getVerticalOffsetAfterLineNumber(n,a=!1){this._checkPendingChanges(),n=n|0;const f=this._lineHeight*n,y=this.getWhitespaceAccumulatedHeightBeforeLineNumber(n+(a?1:0));return f+y+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let n=0;for(let a=0,f=this._arr.length;a<f;a++)n=Math.max(n,this._arr[a].minWidth);this._minWidth=n}return this._minWidth}isAfterLines(n){this._checkPendingChanges();const a=this.getLinesTotalHeight();return n>a}isInTopPadding(n){return this._paddingTop===0?!1:(this._checkPendingChanges(),n<this._paddingTop)}isInBottomPadding(n){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const a=this.getLinesTotalHeight();return n>=a-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(n){if(this._checkPendingChanges(),n=n|0,n<0)return 1;const a=this._lineCount|0,f=this._lineHeight;let y=1,T=a;for(;y<T;){const J=(y+T)/2|0,se=this.getVerticalOffsetForLineNumber(J)|0;if(n>=se+f)y=J+1;else{if(n>=se)return J;T=J}}return y>a?a:y}getLinesViewportData(n,a){this._checkPendingChanges(),n=n|0,a=a|0;const f=this._lineHeight,y=this.getLineNumberAtOrAfterVerticalOffset(n)|0,T=this.getVerticalOffsetForLineNumber(y)|0;let J=this._lineCount|0,se=this.getFirstWhitespaceIndexAfterLineNumber(y)|0;const be=this.getWhitespacesCount()|0;let Oe,Ge;se===-1?(se=be,Ge=J+1,Oe=0):(Ge=this.getAfterLineNumberForWhitespaceIndex(se)|0,Oe=this.getHeightForWhitespaceIndex(se)|0);let je=T,nt=je;const lt=5e5;let bt=0;T>=lt&&(bt=Math.floor(T/lt)*lt,bt=Math.floor(bt/f)*f,nt-=bt);const xt=[],At=n+(a-n)/2;let Gt=-1;for(let Ti=y;Ti<=J;Ti++){if(Gt===-1){const Yi=je,Ai=je+f;(Yi<=At&&At<Ai||Yi>At)&&(Gt=Ti)}for(je+=f,xt[Ti-y]=nt,nt+=f;Ge===Ti;)nt+=Oe,je+=Oe,se++,se>=be?Ge=J+1:(Ge=this.getAfterLineNumberForWhitespaceIndex(se)|0,Oe=this.getHeightForWhitespaceIndex(se)|0);if(je>=a){J=Ti;break}}Gt===-1&&(Gt=J);const ti=this.getVerticalOffsetForLineNumber(J)|0;let li=y,ki=J;return li<ki&&T<n&&li++,li<ki&&ti+f>a&&ki--,{bigNumbersDelta:bt,startLineNumber:y,endLineNumber:J,relativeVerticalOffset:xt,centeredLineNumber:Gt,completelyVisibleStartLineNumber:li,completelyVisibleEndLineNumber:ki,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(n){this._checkPendingChanges(),n=n|0;const a=this.getAfterLineNumberForWhitespaceIndex(n);let f;a>=1?f=this._lineHeight*a:f=0;let y;return n>0?y=this.getWhitespacesAccumulatedHeight(n-1):y=0,f+y+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(n){this._checkPendingChanges(),n=n|0;let a=0,f=this.getWhitespacesCount()-1;if(f<0)return-1;const y=this.getVerticalOffsetForWhitespaceIndex(f),T=this.getHeightForWhitespaceIndex(f);if(n>=y+T)return-1;for(;a<f;){const J=Math.floor((a+f)/2),se=this.getVerticalOffsetForWhitespaceIndex(J),be=this.getHeightForWhitespaceIndex(J);if(n>=se+be)a=J+1;else{if(n>=se)return J;f=J}}return a}getWhitespaceAtVerticalOffset(n){this._checkPendingChanges(),n=n|0;const a=this.getWhitespaceIndexAtOrAfterVerticallOffset(n);if(a<0||a>=this.getWhitespacesCount())return null;const f=this.getVerticalOffsetForWhitespaceIndex(a);if(f>n)return null;const y=this.getHeightForWhitespaceIndex(a),T=this.getIdForWhitespaceIndex(a),J=this.getAfterLineNumberForWhitespaceIndex(a);return{id:T,afterLineNumber:J,verticalOffset:f,height:y}}getWhitespaceViewportData(n,a){this._checkPendingChanges(),n=n|0,a=a|0;const f=this.getWhitespaceIndexAtOrAfterVerticallOffset(n),y=this.getWhitespacesCount()-1;if(f<0)return[];const T=[];for(let J=f;J<=y;J++){const se=this.getVerticalOffsetForWhitespaceIndex(J),be=this.getHeightForWhitespaceIndex(J);if(se>=a)break;T.push({id:this.getIdForWhitespaceIndex(J),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(J),verticalOffset:se,height:be})}return T}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(n){return this._checkPendingChanges(),n=n|0,this._arr[n].id}getAfterLineNumberForWhitespaceIndex(n){return this._checkPendingChanges(),n=n|0,this._arr[n].afterLineNumber}getHeightForWhitespaceIndex(n){return this._checkPendingChanges(),n=n|0,this._arr[n].height}}const po=125;class Ea{constructor(n,a,f,y){n=n|0,a=a|0,f=f|0,y=y|0,n<0&&(n=0),a<0&&(a=0),f<0&&(f=0),y<0&&(y=0),this.width=n,this.contentWidth=a,this.scrollWidth=Math.max(n,a),this.height=f,this.contentHeight=y,this.scrollHeight=Math.max(f,y)}equals(n){return this.width===n.width&&this.contentWidth===n.contentWidth&&this.height===n.height&&this.contentHeight===n.contentHeight}}class lh extends I.jG{constructor(n,a){super(),this._onDidContentSizeChange=this._register(new A.vl),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new Ea(0,0,0,0),this._scrollable=this._register(new ah.yE({forceIntegerValues:!0,smoothScrollDuration:n,scheduleAtNextAnimationFrame:a})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(n){this._scrollable.setSmoothScrollDuration(n)}validateScrollPosition(n){return this._scrollable.validateScrollPosition(n)}getScrollDimensions(){return this._dimensions}setScrollDimensions(n){if(this._dimensions.equals(n))return;const a=this._dimensions;this._dimensions=n,this._scrollable.setScrollDimensions({width:n.width,scrollWidth:n.scrollWidth,height:n.height,scrollHeight:n.scrollHeight},!0);const f=a.contentWidth!==n.contentWidth,y=a.contentHeight!==n.contentHeight;(f||y)&&this._onDidContentSizeChange.fire(new wa(a.contentWidth,a.contentHeight,n.contentWidth,n.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(n){this._scrollable.setScrollPositionNow(n)}setScrollPositionSmooth(n){this._scrollable.setScrollPositionSmooth(n)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class Ru extends I.jG{constructor(n,a,f){super(),this._configuration=n;const y=this._configuration.options,T=y.get(146),J=y.get(84);this._linesLayout=new Vl(a,y.get(67),J.top,J.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new lh(0,f)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Ea(T.contentWidth,0,T.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(115)?po:0)}onConfigurationChanged(n){const a=this._configuration.options;if(n.hasChanged(67)&&this._linesLayout.setLineHeight(a.get(67)),n.hasChanged(84)){const f=a.get(84);this._linesLayout.setPadding(f.top,f.bottom)}if(n.hasChanged(146)){const f=a.get(146),y=f.contentWidth,T=f.height,J=this._scrollable.getScrollDimensions(),se=J.contentWidth;this._scrollable.setScrollDimensions(new Ea(y,J.contentWidth,T,this._getContentHeight(y,T,se)))}else this._updateHeight();n.hasChanged(115)&&this._configureSmoothScrollDuration()}onFlushed(n){this._linesLayout.onFlushed(n)}onLinesDeleted(n,a){this._linesLayout.onLinesDeleted(n,a)}onLinesInserted(n,a){this._linesLayout.onLinesInserted(n,a)}_getHorizontalScrollbarHeight(n,a){const y=this._configuration.options.get(104);return y.horizontal===2||n>=a?0:y.horizontalScrollbarSize}_getContentHeight(n,a,f){const y=this._configuration.options;let T=this._linesLayout.getLinesTotalHeight();return y.get(106)?T+=Math.max(0,a-y.get(67)-y.get(84).bottom):y.get(104).ignoreHorizontalScrollbarInContentHeight||(T+=this._getHorizontalScrollbarHeight(n,f)),T}_updateHeight(){const n=this._scrollable.getScrollDimensions(),a=n.width,f=n.height,y=n.contentWidth;this._scrollable.setScrollDimensions(new Ea(a,n.contentWidth,f,this._getContentHeight(a,f,y)))}getCurrentViewport(){const n=this._scrollable.getScrollDimensions(),a=this._scrollable.getCurrentScrollPosition();return new on.LM(a.scrollTop,a.scrollLeft,n.width,n.height)}getFutureViewport(){const n=this._scrollable.getScrollDimensions(),a=this._scrollable.getFutureScrollPosition();return new on.LM(a.scrollTop,a.scrollLeft,n.width,n.height)}_computeContentWidth(){const n=this._configuration.options,a=this._maxLineWidth,f=n.get(147),y=n.get(50),T=n.get(146);if(f.isViewportWrapping){const J=n.get(73);return a>T.contentWidth+y.typicalHalfwidthCharacterWidth&&J.enabled&&J.side==="right"?a+T.verticalScrollbarWidth:a}else{const J=n.get(105)*y.typicalHalfwidthCharacterWidth,se=this._linesLayout.getWhitespaceMinWidth();return Math.max(a+J+T.verticalScrollbarWidth,se,this._overlayWidgetsMinWidth)}}setMaxLineWidth(n){this._maxLineWidth=n,this._updateContentWidth()}setOverlayWidgetsMinWidth(n){this._overlayWidgetsMinWidth=n,this._updateContentWidth()}_updateContentWidth(){const n=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Ea(n.width,this._computeContentWidth(),n.height,n.contentHeight)),this._updateHeight()}saveState(){const n=this._scrollable.getFutureScrollPosition(),a=n.scrollTop,f=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(a),y=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(f);return{scrollTop:a,scrollTopWithoutViewZones:a-y,scrollLeft:n.scrollLeft}}changeWhitespace(n){const a=this._linesLayout.changeWhitespace(n);return a&&this.onHeightMaybeChanged(),a}getVerticalOffsetForLineNumber(n,a=!1){return this._linesLayout.getVerticalOffsetForLineNumber(n,a)}getVerticalOffsetAfterLineNumber(n,a=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(n,a)}isAfterLines(n){return this._linesLayout.isAfterLines(n)}isInTopPadding(n){return this._linesLayout.isInTopPadding(n)}isInBottomPadding(n){return this._linesLayout.isInBottomPadding(n)}getLineNumberAtVerticalOffset(n){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(n)}getWhitespaceAtVerticalOffset(n){return this._linesLayout.getWhitespaceAtVerticalOffset(n)}getLinesViewportData(){const n=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(n.top,n.top+n.height)}getLinesViewportDataAtScrollTop(n){const a=this._scrollable.getScrollDimensions();return n+a.height>a.scrollHeight&&(n=a.scrollHeight-a.height),n<0&&(n=0),this._linesLayout.getLinesViewportData(n,n+a.height)}getWhitespaceViewportData(){const n=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(n.top,n.top+n.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(n){return this._scrollable.validateScrollPosition(n)}setScrollPosition(n,a){a===1?this._scrollable.setScrollPositionNow(n):this._scrollable.setScrollPositionSmooth(n)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(n,a){const f=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:f.scrollLeft+n,scrollTop:f.scrollTop+a})}}var Rc=c(36389),Pc=c(14216);function qs(st,n){return st===null?n?Ul.INSTANCE:Ir.INSTANCE:new Ac(st,n)}class Ac{constructor(n,a){this._projectionData=n,this._isVisible=a}isVisible(){return this._isVisible}setVisible(n){return this._isVisible=n,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(n,a,f){this._assertVisible();const y=f>0?this._projectionData.breakOffsets[f-1]:0,T=this._projectionData.breakOffsets[f];let J;if(this._projectionData.injectionOffsets!==null){const se=this._projectionData.injectionOffsets.map((Oe,Ge)=>new Ni.uK(0,0,Oe+1,this._projectionData.injectionOptions[Ge],0));J=Ni.uK.applyInjectedText(n.getLineContent(a),se).substring(y,T)}else J=n.getValueInRange({startLineNumber:a,startColumn:y+1,endLineNumber:a,endColumn:T+1});return f>0&&(J=Oc(this._projectionData.wrappedTextIndentLength)+J),J}getViewLineLength(n,a,f){return this._assertVisible(),this._projectionData.getLineLength(f)}getViewLineMinColumn(n,a,f){return this._assertVisible(),this._projectionData.getMinOutputOffset(f)+1}getViewLineMaxColumn(n,a,f){return this._assertVisible(),this._projectionData.getMaxOutputOffset(f)+1}getViewLineData(n,a,f){const y=new Array;return this.getViewLinesData(n,a,f,1,0,[!0],y),y[0]}getViewLinesData(n,a,f,y,T,J,se){this._assertVisible();const be=this._projectionData,Oe=be.injectionOffsets,Ge=be.injectionOptions;let je=null;if(Oe){je=[];let lt=0,bt=0;for(let xt=0;xt<be.getOutputLineCount();xt++){const At=new Array;je[xt]=At;const Gt=xt>0?be.breakOffsets[xt-1]:0,ti=be.breakOffsets[xt];for(;bt<Oe.length;){const li=Ge[bt].content.length,ki=Oe[bt]+lt,Ti=ki+li;if(ki>ti)break;if(Gt<Ti){const Yi=Ge[bt];if(Yi.inlineClassName){const Ai=xt>0?be.wrappedTextIndentLength:0,Ji=Ai+Math.max(ki-Gt,0),xi=Ai+Math.min(Ti-Gt,ti-Gt);Ji!==xi&&At.push(new on.or(Ji,xi,Yi.inlineClassName,Yi.inlineClassNameAffectsLetterSpacing))}}if(Ti<=ti)lt+=li,bt++;else break}}}let nt;Oe?nt=n.tokenization.getLineTokens(a).withInserted(Oe.map((lt,bt)=>({offset:lt,text:Ge[bt].content,tokenMetadata:Pc.f.defaultTokenMetadata}))):nt=n.tokenization.getLineTokens(a);for(let lt=f;lt<f+y;lt++){const bt=T+lt-f;if(!J[bt]){se[bt]=null;continue}se[bt]=this._getViewLineData(nt,je?je[lt]:null,lt)}}_getViewLineData(n,a,f){this._assertVisible();const y=this._projectionData,T=f>0?y.wrappedTextIndentLength:0,J=f>0?y.breakOffsets[f-1]:0,se=y.breakOffsets[f],be=n.sliceAndInflate(J,se,T);let Oe=be.getLineContent();f>0&&(Oe=Oc(y.wrappedTextIndentLength)+Oe);const Ge=this._projectionData.getMinOutputOffset(f)+1,je=Oe.length+1,nt=f+1<this.getViewLineCount(),lt=f===0?0:y.breakOffsetsVisibleColumn[f-1];return new on.GP(Oe,nt,Ge,je,lt,be,a)}getModelColumnOfViewPosition(n,a){return this._assertVisible(),this._projectionData.translateToInputOffset(n,a-1)+1}getViewPositionOfModelPosition(n,a,f=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(a-1,f).toPosition(n)}getViewLineNumberOfModelPosition(n,a){this._assertVisible();const f=this._projectionData.translateToOutputPosition(a-1);return n+f.outputLineIndex}normalizePosition(n,a,f){const y=a.lineNumber-n;return this._projectionData.normalizeOutputPosition(n,a.column-1,f).toPosition(y)}getInjectedTextAt(n,a){return this._projectionData.getInjectedText(n,a-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class Ul{static{this.INSTANCE=new Ul}constructor(){}isVisible(){return!0}setVisible(n){return n?this:Ir.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(n,a,f){return n.getLineContent(a)}getViewLineLength(n,a,f){return n.getLineLength(a)}getViewLineMinColumn(n,a,f){return n.getLineMinColumn(a)}getViewLineMaxColumn(n,a,f){return n.getLineMaxColumn(a)}getViewLineData(n,a,f){const y=n.tokenization.getLineTokens(a),T=y.getLineContent();return new on.GP(T,!1,1,T.length+1,0,y.inflate(),null)}getViewLinesData(n,a,f,y,T,J,se){if(!J[T]){se[T]=null;return}se[T]=this.getViewLineData(n,a,0)}getModelColumnOfViewPosition(n,a){return a}getViewPositionOfModelPosition(n,a){return new Ue.y(n,a)}getViewLineNumberOfModelPosition(n,a){return n}normalizePosition(n,a,f){return a}getInjectedTextAt(n,a){return null}}class Ir{static{this.INSTANCE=new Ir}constructor(){}isVisible(){return!1}setVisible(n){return n?Ul.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(n,a,f){throw new Error("Not supported")}getViewLineLength(n,a,f){throw new Error("Not supported")}getViewLineMinColumn(n,a,f){throw new Error("Not supported")}getViewLineMaxColumn(n,a,f){throw new Error("Not supported")}getViewLineData(n,a,f){throw new Error("Not supported")}getViewLinesData(n,a,f,y,T,J,se){throw new Error("Not supported")}getModelColumnOfViewPosition(n,a){throw new Error("Not supported")}getViewPositionOfModelPosition(n,a){throw new Error("Not supported")}getViewLineNumberOfModelPosition(n,a){throw new Error("Not supported")}normalizePosition(n,a,f){throw new Error("Not supported")}getInjectedTextAt(n,a){throw new Error("Not supported")}}const Qr=[""];function Oc(st){if(st>=Qr.length)for(let n=1;n<=st;n++)Qr[n]=Fc(n);return Qr[st]}function Fc(st){return new Array(st+1).join(" ")}var qo=c(82895);class xa{constructor(n,a,f,y,T,J,se,be,Oe,Ge){this._editorId=n,this.model=a,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=f,this._monospaceLineBreaksComputerFactory=y,this.fontInfo=T,this.tabSize=J,this.wrappingStrategy=se,this.wrappingColumn=be,this.wrappingIndent=Oe,this.wordBreak=Ge,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new Zr(this)}_constructLines(n,a){this.modelLineProjections=[],n&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const f=this.model.getLinesContent(),y=this.model.getInjectedTextDecorations(this._editorId),T=f.length,J=this.createLineBreaksComputer(),se=new _.j3(Ni.uK.fromDecorations(y));for(let xt=0;xt<T;xt++){const At=se.takeWhile(Gt=>Gt.lineNumber===xt+1);J.addRequest(f[xt],At,a?a[xt]:null)}const be=J.finalize(),Oe=[],Ge=this.hiddenAreasDecorationIds.map(xt=>this.model.getDecorationRange(xt)).sort(x.Q.compareRangesUsingStarts);let je=1,nt=0,lt=-1,bt=lt+1<Ge.length?nt+1:T+2;for(let xt=0;xt<T;xt++){const At=xt+1;At===bt&&(lt++,je=Ge[lt].startLineNumber,nt=Ge[lt].endLineNumber,bt=lt+1<Ge.length?nt+1:T+2);const Gt=At>=je&&At<=nt,ti=qs(be[xt],!Gt);Oe[xt]=ti.getViewLineCount(),this.modelLineProjections[xt]=ti}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new qo.c2(Oe)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(n=>this.model.getDecorationRange(n))}setHiddenAreas(n){const a=n.map(nt=>this.model.validateRange(nt)),f=rs(a),y=this.hiddenAreasDecorationIds.map(nt=>this.model.getDecorationRange(nt)).sort(x.Q.compareRangesUsingStarts);if(f.length===y.length){let nt=!1;for(let lt=0;lt<f.length;lt++)if(!f[lt].equalsRange(y[lt])){nt=!0;break}if(!nt)return!1}const T=f.map(nt=>({range:nt,options:zr.kI.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,T);const J=f;let se=1,be=0,Oe=-1,Ge=Oe+1<J.length?be+1:this.modelLineProjections.length+2,je=!1;for(let nt=0;nt<this.modelLineProjections.length;nt++){const lt=nt+1;lt===Ge&&(Oe++,se=J[Oe].startLineNumber,be=J[Oe].endLineNumber,Ge=Oe+1<J.length?be+1:this.modelLineProjections.length+2);let bt=!1;if(lt>=se&&lt<=be?this.modelLineProjections[nt].isVisible()&&(this.modelLineProjections[nt]=this.modelLineProjections[nt].setVisible(!1),bt=!0):(je=!0,this.modelLineProjections[nt].isVisible()||(this.modelLineProjections[nt]=this.modelLineProjections[nt].setVisible(!0),bt=!0)),bt){const xt=this.modelLineProjections[nt].getViewLineCount();this.projectedModelLineLineCounts.setValue(nt,xt)}}return je||this.setHiddenAreas([]),!0}modelPositionIsVisible(n,a){return n<1||n>this.modelLineProjections.length?!1:this.modelLineProjections[n-1].isVisible()}getModelLineViewLineCount(n){return n<1||n>this.modelLineProjections.length?1:this.modelLineProjections[n-1].getViewLineCount()}setTabSize(n){return this.tabSize===n?!1:(this.tabSize=n,this._constructLines(!1,null),!0)}setWrappingSettings(n,a,f,y,T){const J=this.fontInfo.equals(n),se=this.wrappingStrategy===a,be=this.wrappingColumn===f,Oe=this.wrappingIndent===y,Ge=this.wordBreak===T;if(J&&se&&be&&Oe&&Ge)return!1;const je=J&&se&&!be&&Oe&&Ge;this.fontInfo=n,this.wrappingStrategy=a,this.wrappingColumn=f,this.wrappingIndent=y,this.wordBreak=T;let nt=null;if(je){nt=[];for(let lt=0,bt=this.modelLineProjections.length;lt<bt;lt++)nt[lt]=this.modelLineProjections[lt].getProjectionData()}return this._constructLines(!1,nt),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(n,a,f){if(!n||n<=this._validModelVersionId)return null;const y=a===1?1:this.projectedModelLineLineCounts.getPrefixSum(a-1)+1,T=this.projectedModelLineLineCounts.getPrefixSum(f);return this.modelLineProjections.splice(a-1,f-a+1),this.projectedModelLineLineCounts.removeValues(a-1,f-a+1),new Oo(y,T)}onModelLinesInserted(n,a,f,y){if(!n||n<=this._validModelVersionId)return null;const T=a>2&&!this.modelLineProjections[a-2].isVisible(),J=a===1?1:this.projectedModelLineLineCounts.getPrefixSum(a-1)+1;let se=0;const be=[],Oe=[];for(let Ge=0,je=y.length;Ge<je;Ge++){const nt=qs(y[Ge],!T);be.push(nt);const lt=nt.getViewLineCount();se+=lt,Oe[Ge]=lt}return this.modelLineProjections=this.modelLineProjections.slice(0,a-1).concat(be).concat(this.modelLineProjections.slice(a-1)),this.projectedModelLineLineCounts.insertValues(a-1,Oe),new Ja(J,J+se-1)}onModelLineChanged(n,a,f){if(n!==null&&n<=this._validModelVersionId)return[!1,null,null,null];const y=a-1,T=this.modelLineProjections[y].getViewLineCount(),J=this.modelLineProjections[y].isVisible(),se=qs(f,J);this.modelLineProjections[y]=se;const be=this.modelLineProjections[y].getViewLineCount();let Oe=!1,Ge=0,je=-1,nt=0,lt=-1,bt=0,xt=-1;T>be?(Ge=this.projectedModelLineLineCounts.getPrefixSum(a-1)+1,je=Ge+be-1,bt=je+1,xt=bt+(T-be)-1,Oe=!0):T<be?(Ge=this.projectedModelLineLineCounts.getPrefixSum(a-1)+1,je=Ge+T-1,nt=je+1,lt=nt+(be-T)-1,Oe=!0):(Ge=this.projectedModelLineLineCounts.getPrefixSum(a-1)+1,je=Ge+be-1),this.projectedModelLineLineCounts.setValue(y,be);const At=Ge<=je?new Wl(Ge,je-Ge+1):null,Gt=nt<=lt?new Ja(nt,lt):null,ti=bt<=xt?new Oo(bt,xt):null;return[Oe,At,Gt,ti]}acceptVersionId(n){this._validModelVersionId=n,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(n){if(n<1)return 1;const a=this.getViewLineCount();return n>a?a:n|0}getActiveIndentGuide(n,a,f){n=this._toValidViewLineNumber(n),a=this._toValidViewLineNumber(a),f=this._toValidViewLineNumber(f);const y=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),T=this.convertViewPositionToModelPosition(a,this.getViewLineMinColumn(a)),J=this.convertViewPositionToModelPosition(f,this.getViewLineMinColumn(f)),se=this.model.guides.getActiveIndentGuide(y.lineNumber,T.lineNumber,J.lineNumber),be=this.convertModelPositionToViewPosition(se.startLineNumber,1),Oe=this.convertModelPositionToViewPosition(se.endLineNumber,this.model.getLineMaxColumn(se.endLineNumber));return{startLineNumber:be.lineNumber,endLineNumber:Oe.lineNumber,indent:se.indent}}getViewLineInfo(n){n=this._toValidViewLineNumber(n);const a=this.projectedModelLineLineCounts.getIndexOf(n-1),f=a.index,y=a.remainder;return new Yr(f+1,y)}getMinColumnOfViewLine(n){return this.modelLineProjections[n.modelLineNumber-1].getViewLineMinColumn(this.model,n.modelLineNumber,n.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(n){return this.modelLineProjections[n.modelLineNumber-1].getViewLineMaxColumn(this.model,n.modelLineNumber,n.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(n){const a=this.modelLineProjections[n.modelLineNumber-1],f=a.getViewLineMinColumn(this.model,n.modelLineNumber,n.modelLineWrappedLineIdx),y=a.getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,f);return new Ue.y(n.modelLineNumber,y)}getModelEndPositionOfViewLine(n){const a=this.modelLineProjections[n.modelLineNumber-1],f=a.getViewLineMaxColumn(this.model,n.modelLineNumber,n.modelLineWrappedLineIdx),y=a.getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,f);return new Ue.y(n.modelLineNumber,y)}getViewLineInfosGroupedByModelRanges(n,a){const f=this.getViewLineInfo(n),y=this.getViewLineInfo(a),T=new Array;let J=this.getModelStartPositionOfViewLine(f),se=new Array;for(let be=f.modelLineNumber;be<=y.modelLineNumber;be++){const Oe=this.modelLineProjections[be-1];if(Oe.isVisible()){const Ge=be===f.modelLineNumber?f.modelLineWrappedLineIdx:0,je=be===y.modelLineNumber?y.modelLineWrappedLineIdx+1:Oe.getViewLineCount();for(let nt=Ge;nt<je;nt++)se.push(new Yr(be,nt))}if(!Oe.isVisible()&&J){const Ge=new Ue.y(be-1,this.model.getLineMaxColumn(be-1)+1),je=x.Q.fromPositions(J,Ge);T.push(new tl(je,se)),se=[],J=null}else Oe.isVisible()&&!J&&(J=new Ue.y(be,1))}if(J){const be=x.Q.fromPositions(J,this.getModelEndPositionOfViewLine(y));T.push(new tl(be,se))}return T}getViewLinesBracketGuides(n,a,f,y){const T=f?this.convertViewPositionToModelPosition(f.lineNumber,f.column):null,J=[];for(const se of this.getViewLineInfosGroupedByModelRanges(n,a)){const be=se.modelRange.startLineNumber,Oe=this.model.guides.getLinesBracketGuides(be,se.modelRange.endLineNumber,T,y);for(const Ge of se.viewLines){const nt=Oe[Ge.modelLineNumber-be].map(lt=>{if(lt.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[Ge.modelLineNumber-1].getViewPositionOfModelPosition(0,lt.forWrappedLinesAfterColumn).lineNumber>=Ge.modelLineWrappedLineIdx||lt.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[Ge.modelLineNumber-1].getViewPositionOfModelPosition(0,lt.forWrappedLinesBeforeOrAtColumn).lineNumber<Ge.modelLineWrappedLineIdx)return;if(!lt.horizontalLine)return lt;let bt=-1;if(lt.column!==-1){const Gt=this.modelLineProjections[Ge.modelLineNumber-1].getViewPositionOfModelPosition(0,lt.column);if(Gt.lineNumber===Ge.modelLineWrappedLineIdx)bt=Gt.column;else if(Gt.lineNumber<Ge.modelLineWrappedLineIdx)bt=this.getMinColumnOfViewLine(Ge);else if(Gt.lineNumber>Ge.modelLineWrappedLineIdx)return}const xt=this.convertModelPositionToViewPosition(Ge.modelLineNumber,lt.horizontalLine.endColumn),At=this.modelLineProjections[Ge.modelLineNumber-1].getViewPositionOfModelPosition(0,lt.horizontalLine.endColumn);return At.lineNumber===Ge.modelLineWrappedLineIdx?new Xn.TH(lt.visibleColumn,bt,lt.className,new Xn.pv(lt.horizontalLine.top,xt.column),-1,-1):At.lineNumber<Ge.modelLineWrappedLineIdx||lt.visibleColumn!==-1?void 0:new Xn.TH(lt.visibleColumn,bt,lt.className,new Xn.pv(lt.horizontalLine.top,this.getMaxColumnOfViewLine(Ge)),-1,-1)});J.push(nt.filter(lt=>!!lt))}}return J}getViewLinesIndentGuides(n,a){n=this._toValidViewLineNumber(n),a=this._toValidViewLineNumber(a);const f=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),y=this.convertViewPositionToModelPosition(a,this.getViewLineMaxColumn(a));let T=[];const J=[],se=[],be=f.lineNumber-1,Oe=y.lineNumber-1;let Ge=null;for(let bt=be;bt<=Oe;bt++){const xt=this.modelLineProjections[bt];if(xt.isVisible()){const At=xt.getViewLineNumberOfModelPosition(0,bt===be?f.column:1),Gt=xt.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(bt+1)),ti=Gt-At+1;let li=0;ti>1&&xt.getViewLineMinColumn(this.model,bt+1,Gt)===1&&(li=At===0?1:2),J.push(ti),se.push(li),Ge===null&&(Ge=new Ue.y(bt+1,0))}else Ge!==null&&(T=T.concat(this.model.guides.getLinesIndentGuides(Ge.lineNumber,bt)),Ge=null)}Ge!==null&&(T=T.concat(this.model.guides.getLinesIndentGuides(Ge.lineNumber,y.lineNumber)),Ge=null);const je=a-n+1,nt=new Array(je);let lt=0;for(let bt=0,xt=T.length;bt<xt;bt++){let At=T[bt];const Gt=Math.min(je-lt,J[bt]),ti=se[bt];let li;ti===2?li=0:ti===1?li=1:li=Gt;for(let ki=0;ki<Gt;ki++)ki===li&&(At=0),nt[lt++]=At}return nt}getViewLineContent(n){const a=this.getViewLineInfo(n);return this.modelLineProjections[a.modelLineNumber-1].getViewLineContent(this.model,a.modelLineNumber,a.modelLineWrappedLineIdx)}getViewLineLength(n){const a=this.getViewLineInfo(n);return this.modelLineProjections[a.modelLineNumber-1].getViewLineLength(this.model,a.modelLineNumber,a.modelLineWrappedLineIdx)}getViewLineMinColumn(n){const a=this.getViewLineInfo(n);return this.modelLineProjections[a.modelLineNumber-1].getViewLineMinColumn(this.model,a.modelLineNumber,a.modelLineWrappedLineIdx)}getViewLineMaxColumn(n){const a=this.getViewLineInfo(n);return this.modelLineProjections[a.modelLineNumber-1].getViewLineMaxColumn(this.model,a.modelLineNumber,a.modelLineWrappedLineIdx)}getViewLineData(n){const a=this.getViewLineInfo(n);return this.modelLineProjections[a.modelLineNumber-1].getViewLineData(this.model,a.modelLineNumber,a.modelLineWrappedLineIdx)}getViewLinesData(n,a,f){n=this._toValidViewLineNumber(n),a=this._toValidViewLineNumber(a);const y=this.projectedModelLineLineCounts.getIndexOf(n-1);let T=n;const J=y.index,se=y.remainder,be=[];for(let Oe=J,Ge=this.model.getLineCount();Oe<Ge;Oe++){const je=this.modelLineProjections[Oe];if(!je.isVisible())continue;const nt=Oe===J?se:0;let lt=je.getViewLineCount()-nt,bt=!1;if(T+lt>a&&(bt=!0,lt=a-T+1),je.getViewLinesData(this.model,Oe+1,nt,lt,T-n,f,be),T+=lt,bt)break}return be}validateViewPosition(n,a,f){n=this._toValidViewLineNumber(n);const y=this.projectedModelLineLineCounts.getIndexOf(n-1),T=y.index,J=y.remainder,se=this.modelLineProjections[T],be=se.getViewLineMinColumn(this.model,T+1,J),Oe=se.getViewLineMaxColumn(this.model,T+1,J);a<be&&(a=be),a>Oe&&(a=Oe);const Ge=se.getModelColumnOfViewPosition(J,a);return this.model.validatePosition(new Ue.y(T+1,Ge)).equals(f)?new Ue.y(n,a):this.convertModelPositionToViewPosition(f.lineNumber,f.column)}validateViewRange(n,a){const f=this.validateViewPosition(n.startLineNumber,n.startColumn,a.getStartPosition()),y=this.validateViewPosition(n.endLineNumber,n.endColumn,a.getEndPosition());return new x.Q(f.lineNumber,f.column,y.lineNumber,y.column)}convertViewPositionToModelPosition(n,a){const f=this.getViewLineInfo(n),y=this.modelLineProjections[f.modelLineNumber-1].getModelColumnOfViewPosition(f.modelLineWrappedLineIdx,a);return this.model.validatePosition(new Ue.y(f.modelLineNumber,y))}convertViewRangeToModelRange(n){const a=this.convertViewPositionToModelPosition(n.startLineNumber,n.startColumn),f=this.convertViewPositionToModelPosition(n.endLineNumber,n.endColumn);return new x.Q(a.lineNumber,a.column,f.lineNumber,f.column)}convertModelPositionToViewPosition(n,a,f=2,y=!1,T=!1){const J=this.model.validatePosition(new Ue.y(n,a)),se=J.lineNumber,be=J.column;let Oe=se-1,Ge=!1;if(T)for(;Oe<this.modelLineProjections.length&&!this.modelLineProjections[Oe].isVisible();)Oe++,Ge=!0;else for(;Oe>0&&!this.modelLineProjections[Oe].isVisible();)Oe--,Ge=!0;if(Oe===0&&!this.modelLineProjections[Oe].isVisible())return new Ue.y(y?0:1,1);const je=1+this.projectedModelLineLineCounts.getPrefixSum(Oe);let nt;return Ge?T?nt=this.modelLineProjections[Oe].getViewPositionOfModelPosition(je,1,f):nt=this.modelLineProjections[Oe].getViewPositionOfModelPosition(je,this.model.getLineMaxColumn(Oe+1),f):nt=this.modelLineProjections[se-1].getViewPositionOfModelPosition(je,be,f),nt}convertModelRangeToViewRange(n,a=0){if(n.isEmpty()){const f=this.convertModelPositionToViewPosition(n.startLineNumber,n.startColumn,a);return x.Q.fromPositions(f)}else{const f=this.convertModelPositionToViewPosition(n.startLineNumber,n.startColumn,1),y=this.convertModelPositionToViewPosition(n.endLineNumber,n.endColumn,0);return new x.Q(f.lineNumber,f.column,y.lineNumber,y.column)}}getViewLineNumberOfModelPosition(n,a){let f=n-1;if(this.modelLineProjections[f].isVisible()){const T=1+this.projectedModelLineLineCounts.getPrefixSum(f);return this.modelLineProjections[f].getViewLineNumberOfModelPosition(T,a)}for(;f>0&&!this.modelLineProjections[f].isVisible();)f--;if(f===0&&!this.modelLineProjections[f].isVisible())return 1;const y=1+this.projectedModelLineLineCounts.getPrefixSum(f);return this.modelLineProjections[f].getViewLineNumberOfModelPosition(y,this.model.getLineMaxColumn(f+1))}getDecorationsInRange(n,a,f,y,T){const J=this.convertViewPositionToModelPosition(n.startLineNumber,n.startColumn),se=this.convertViewPositionToModelPosition(n.endLineNumber,n.endColumn);if(se.lineNumber-J.lineNumber<=n.endLineNumber-n.startLineNumber)return this.model.getDecorationsInRange(new x.Q(J.lineNumber,1,se.lineNumber,se.column),a,f,y,T);let be=[];const Oe=J.lineNumber-1,Ge=se.lineNumber-1;let je=null;for(let xt=Oe;xt<=Ge;xt++)if(this.modelLineProjections[xt].isVisible())je===null&&(je=new Ue.y(xt+1,xt===Oe?J.column:1));else if(je!==null){const Gt=this.model.getLineMaxColumn(xt);be=be.concat(this.model.getDecorationsInRange(new x.Q(je.lineNumber,je.column,xt,Gt),a,f,y)),je=null}je!==null&&(be=be.concat(this.model.getDecorationsInRange(new x.Q(je.lineNumber,je.column,se.lineNumber,se.column),a,f,y)),je=null),be.sort((xt,At)=>{const Gt=x.Q.compareRangesUsingStarts(xt.range,At.range);return Gt===0?xt.id<At.id?-1:xt.id>At.id?1:0:Gt});const nt=[];let lt=0,bt=null;for(const xt of be){const At=xt.id;bt!==At&&(bt=At,nt[lt++]=xt)}return nt}getInjectedTextAt(n){const a=this.getViewLineInfo(n.lineNumber);return this.modelLineProjections[a.modelLineNumber-1].getInjectedTextAt(a.modelLineWrappedLineIdx,n.column)}normalizePosition(n,a){const f=this.getViewLineInfo(n.lineNumber);return this.modelLineProjections[f.modelLineNumber-1].normalizePosition(f.modelLineWrappedLineIdx,n,a)}getLineIndentColumn(n){const a=this.getViewLineInfo(n);return a.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(a.modelLineNumber):0}}function rs(st){if(st.length===0)return[];const n=st.slice();n.sort(x.Q.compareRangesUsingStarts);const a=[];let f=n[0].startLineNumber,y=n[0].endLineNumber;for(let T=1,J=n.length;T<J;T++){const se=n[T];se.startLineNumber>y+1?(a.push(new x.Q(f,1,y,1)),f=se.startLineNumber,y=se.endLineNumber):se.endLineNumber>y&&(y=se.endLineNumber)}return a.push(new x.Q(f,1,y,1)),a}class Yr{constructor(n,a){this.modelLineNumber=n,this.modelLineWrappedLineIdx=a}}class tl{constructor(n,a){this.modelRange=n,this.viewLines=a}}class Zr{constructor(n){this._lines=n}convertViewPositionToModelPosition(n){return this._lines.convertViewPositionToModelPosition(n.lineNumber,n.column)}convertViewRangeToModelRange(n){return this._lines.convertViewRangeToModelRange(n)}validateViewPosition(n,a){return this._lines.validateViewPosition(n.lineNumber,n.column,a)}validateViewRange(n,a){return this._lines.validateViewRange(n,a)}convertModelPositionToViewPosition(n,a,f,y){return this._lines.convertModelPositionToViewPosition(n.lineNumber,n.column,a,f,y)}convertModelRangeToViewRange(n,a){return this._lines.convertModelRangeToViewRange(n,a)}modelPositionIsVisible(n){return this._lines.modelPositionIsVisible(n.lineNumber,n.column)}getModelLineViewLineCount(n){return this._lines.getModelLineViewLineCount(n)}getViewLineNumberOfModelPosition(n,a){return this._lines.getViewLineNumberOfModelPosition(n,a)}}class _o{constructor(n){this.model=n}dispose(){}createCoordinatesConverter(){return new Wc(this)}getHiddenAreas(){return[]}setHiddenAreas(n){return!1}setTabSize(n){return!1}setWrappingSettings(n,a,f,y){return!1}createLineBreaksComputer(){const n=[];return{addRequest:(a,f,y)=>{n.push(null)},finalize:()=>n}}onModelFlushed(){}onModelLinesDeleted(n,a,f){return new Oo(a,f)}onModelLinesInserted(n,a,f,y){return new Ja(a,f)}onModelLineChanged(n,a,f){return[!1,new Wl(a,1),null,null]}acceptVersionId(n){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(n,a,f){return{startLineNumber:n,endLineNumber:n,indent:0}}getViewLinesBracketGuides(n,a,f){return new Array(a-n+1).fill([])}getViewLinesIndentGuides(n,a){const f=a-n+1,y=new Array(f);for(let T=0;T<f;T++)y[T]=0;return y}getViewLineContent(n){return this.model.getLineContent(n)}getViewLineLength(n){return this.model.getLineLength(n)}getViewLineMinColumn(n){return this.model.getLineMinColumn(n)}getViewLineMaxColumn(n){return this.model.getLineMaxColumn(n)}getViewLineData(n){const a=this.model.tokenization.getLineTokens(n),f=a.getLineContent();return new on.GP(f,!1,1,f.length+1,0,a.inflate(),null)}getViewLinesData(n,a,f){const y=this.model.getLineCount();n=Math.min(Math.max(1,n),y),a=Math.min(Math.max(1,a),y);const T=[];for(let J=n;J<=a;J++){const se=J-n;T[se]=f[se]?this.getViewLineData(J):null}return T}getDecorationsInRange(n,a,f,y,T){return this.model.getDecorationsInRange(n,a,f,y,T)}normalizePosition(n,a){return this.model.normalizePosition(n,a)}getLineIndentColumn(n){return this.model.getLineIndentColumn(n)}getInjectedTextAt(n){return null}}class Wc{constructor(n){this._lines=n}_validPosition(n){return this._lines.model.validatePosition(n)}_validRange(n){return this._lines.model.validateRange(n)}convertViewPositionToModelPosition(n){return this._validPosition(n)}convertViewRangeToModelRange(n){return this._validRange(n)}validateViewPosition(n,a){return this._validPosition(a)}validateViewRange(n,a){return this._validRange(a)}convertModelPositionToViewPosition(n){return this._validPosition(n)}convertModelRangeToViewRange(n){return this._validRange(n)}modelPositionIsVisible(n){const a=this._lines.model.getLineCount();return!(n.lineNumber<1||n.lineNumber>a)}getModelLineViewLineCount(n){return 1}getViewLineNumberOfModelPosition(n,a){return n}}const Bo=_s.ZS.Right;class il{constructor(n){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((n+1)*Bo/8))}reset(n){const a=Math.ceil((n+1)*Bo/8);this.lanes.length<a?this.lanes=new Uint8Array(a):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(n,a,f){f&&(this.persist|=1<<n-1);for(let y=a.startLineNumber;y<=a.endLineNumber;y++){const T=Bo*y+(n-1);this.lanes[T>>>3]|=1<<T%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(y))}}getLanesAtLine(n){const a=[];let f=Bo*n;for(let y=0;y<Bo;y++)(this.persist&1<<y||this.lanes[f>>>3]&1<<f%8)&&a.push(y+1),f++;return a.length?a:[_s.ZS.Center]}countAtLine(n){let a=Bo*n,f=0;for(let y=0;y<Bo;y++)(this.persist&1<<y||this.lanes[a>>>3]&1<<a%8)&&f++,a++;return f}}const Bc=!0;class ko extends I.jG{constructor(n,a,f,y,T,J,se,be,Oe,Ge){if(super(),this.languageConfigurationService=se,this._themeService=be,this._attachedView=Oe,this._transactionalTarget=Ge,this.hiddenAreasModel=new Nr,this.previousHiddenAreas=[],this._editorId=n,this._configuration=a,this.model=f,this._eventDispatcher=new nh,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new is.d$(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new Be.uC(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=Mr.create(this.model),this.glyphLanes=new il(0),Bc&&this.model.isTooLargeForTokenization())this._lines=new _o(this.model);else{const je=this._configuration.options,nt=je.get(50),lt=je.get(140),bt=je.get(147),xt=je.get(139),At=je.get(130);this._lines=new xa(this._editorId,this.model,y,T,nt,this.model.getOptions().tabSize,lt,bt.wrappingColumn,xt,At)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new rh(f,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new Ru(this._configuration,this.getLineCount(),J)),this._register(this.viewLayout.onDidScroll(je=>{je.scrollTopChanged&&this._handleVisibleLinesChanged(),je.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new ih(je)),this._eventDispatcher.emitOutgoingEvent(new qn(je.oldScrollWidth,je.oldScrollLeft,je.oldScrollHeight,je.oldScrollTop,je.scrollWidth,je.scrollLeft,je.scrollHeight,je.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(je=>{this._eventDispatcher.emitOutgoingEvent(je)})),this._decorations=new Rc.UB(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(je=>{try{const nt=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(nt,je)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(Qi.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new xu)})),this._register(this._themeService.onDidColorThemeChange(je=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new Fo(je))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(n){this._eventDispatcher.addViewEventHandler(n)}removeViewEventHandler(n){this._eventDispatcher.removeViewEventHandler(n)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const n=this.viewLayout.getLinesViewportData(),a=new x.Q(n.startLineNumber,this.getLineMinColumn(n.startLineNumber),n.endLineNumber,this.getLineMaxColumn(n.endLineNumber));return this._toModelVisibleRanges(a)}visibleLinesStabilized(){const n=this.getModelVisibleRanges();this._attachedView.setVisibleLines(n,!0)}_handleVisibleLinesChanged(){const n=this.getModelVisibleRanges();this._attachedView.setVisibleLines(n,!1)}setHasFocus(n){this._hasFocus=n,this._cursor.setHasFocus(n),this._eventDispatcher.emitSingleViewEvent(new ba(n)),this._eventDispatcher.emitOutgoingEvent(new ya(!n,n))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new Ic)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new Ol)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const n=new Ue.y(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),a=this.coordinatesConverter.convertViewPositionToModelPosition(n);return new sl(a,this._viewportStart.startLineDelta)}return new sl(null,0)}_onConfigurationChanged(n,a){const f=this._captureStableViewport(),y=this._configuration.options,T=y.get(50),J=y.get(140),se=y.get(147),be=y.get(139),Oe=y.get(130);this._lines.setWrappingSettings(T,J,se.wrappingColumn,be,Oe)&&(n.emitViewEvent(new $r),n.emitViewEvent(new dr),n.emitViewEvent(new Ao(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),a.hasChanged(92)&&(this._decorations.reset(),n.emitViewEvent(new Ao(null))),a.hasChanged(99)&&(this._decorations.reset(),n.emitViewEvent(new Ao(null))),n.emitViewEvent(new Za(a)),this.viewLayout.onConfigurationChanged(a),f.recoverViewportStart(this.coordinatesConverter,this.viewLayout),is.d$.shouldRecreate(a)&&(this.cursorConfig=new is.d$(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(n=>{try{const f=this._eventDispatcher.beginEmitViewEvents();let y=!1,T=!1;const J=n instanceof Ni.Ic?n.rawContentChangedEvent.changes:n.changes,se=n instanceof Ni.Ic?n.rawContentChangedEvent.versionId:null,be=this._lines.createLineBreaksComputer();for(const je of J)switch(je.changeType){case 4:{for(let nt=0;nt<je.detail.length;nt++){const lt=je.detail[nt];let bt=je.injectedTexts[nt];bt&&(bt=bt.filter(xt=>!xt.ownerId||xt.ownerId===this._editorId)),be.addRequest(lt,bt,null)}break}case 2:{let nt=null;je.injectedText&&(nt=je.injectedText.filter(lt=>!lt.ownerId||lt.ownerId===this._editorId)),be.addRequest(je.detail,nt,null);break}}const Oe=be.finalize(),Ge=new _.j3(Oe);for(const je of J)switch(je.changeType){case 1:{this._lines.onModelFlushed(),f.emitViewEvent(new $r),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),y=!0;break}case 3:{const nt=this._lines.onModelLinesDeleted(se,je.fromLineNumber,je.toLineNumber);nt!==null&&(f.emitViewEvent(nt),this.viewLayout.onLinesDeleted(nt.fromLineNumber,nt.toLineNumber)),y=!0;break}case 4:{const nt=Ge.takeCount(je.detail.length),lt=this._lines.onModelLinesInserted(se,je.fromLineNumber,je.toLineNumber,nt);lt!==null&&(f.emitViewEvent(lt),this.viewLayout.onLinesInserted(lt.fromLineNumber,lt.toLineNumber)),y=!0;break}case 2:{const nt=Ge.dequeue(),[lt,bt,xt,At]=this._lines.onModelLineChanged(se,je.lineNumber,nt);T=lt,bt&&f.emitViewEvent(bt),xt&&(f.emitViewEvent(xt),this.viewLayout.onLinesInserted(xt.fromLineNumber,xt.toLineNumber)),At&&(f.emitViewEvent(At),this.viewLayout.onLinesDeleted(At.fromLineNumber,At.toLineNumber));break}case 5:break}se!==null&&this._lines.acceptVersionId(se),this.viewLayout.onHeightMaybeChanged(),!y&&T&&(f.emitViewEvent(new dr),f.emitViewEvent(new Ao(null)),this._cursor.onLineMappingChanged(f),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const a=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&a){const f=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(f){const y=this.coordinatesConverter.convertModelPositionToViewPosition(f.getStartPosition()),T=this.viewLayout.getVerticalOffsetForLineNumber(y.lineNumber);this.viewLayout.setScrollPosition({scrollTop:T+this._viewportStart.startLineDelta},1)}}try{const f=this._eventDispatcher.beginEmitViewEvents();n instanceof Ni.Ic&&f.emitOutgoingEvent(new Gr(n.contentChangedEvent)),this._cursor.onModelContentChanged(f,n)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(n=>{const a=[];for(let f=0,y=n.ranges.length;f<y;f++){const T=n.ranges[f],J=this.coordinatesConverter.convertModelPositionToViewPosition(new Ue.y(T.fromLineNumber,1)).lineNumber,se=this.coordinatesConverter.convertModelPositionToViewPosition(new Ue.y(T.toLineNumber,this.model.getLineMaxColumn(T.toLineNumber))).lineNumber;a[f]={fromLineNumber:J,toLineNumber:se}}this._eventDispatcher.emitSingleViewEvent(new Mc(a)),this._eventDispatcher.emitOutgoingEvent(new Iu(n))})),this._register(this.model.onDidChangeLanguageConfiguration(n=>{this._eventDispatcher.emitSingleViewEvent(new Fl),this.cursorConfig=new is.d$(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new Jo(n))})),this._register(this.model.onDidChangeLanguage(n=>{this.cursorConfig=new is.d$(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new $s(n))})),this._register(this.model.onDidChangeOptions(n=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const a=this._eventDispatcher.beginEmitViewEvents();a.emitViewEvent(new $r),a.emitViewEvent(new dr),a.emitViewEvent(new Ao(null)),this._cursor.onLineMappingChanged(a),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new is.d$(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new ku(n))})),this._register(this.model.onDidChangeDecorations(n=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new Ao(n)),this._eventDispatcher.emitOutgoingEvent(new oh(n))}))}setHiddenAreas(n,a){this.hiddenAreasModel.setHiddenAreas(a,n);const f=this.hiddenAreasModel.getMergedRanges();if(f===this.previousHiddenAreas)return;this.previousHiddenAreas=f;const y=this._captureStableViewport();let T=!1;try{const J=this._eventDispatcher.beginEmitViewEvents();T=this._lines.setHiddenAreas(f),T&&(J.emitViewEvent(new $r),J.emitViewEvent(new dr),J.emitViewEvent(new Ao(null)),this._cursor.onLineMappingChanged(J),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const se=y.viewportStartModelPosition?.lineNumber;se&&f.some(Oe=>Oe.startLineNumber<=se&&se<=Oe.endLineNumber)||y.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),T&&this._eventDispatcher.emitOutgoingEvent(new Tc)}getVisibleRangesPlusViewportAboveBelow(){const n=this._configuration.options.get(146),a=this._configuration.options.get(67),f=Math.max(20,Math.round(n.height/a)),y=this.viewLayout.getLinesViewportData(),T=Math.max(1,y.completelyVisibleStartLineNumber-f),J=Math.min(this.getLineCount(),y.completelyVisibleEndLineNumber+f);return this._toModelVisibleRanges(new x.Q(T,this.getLineMinColumn(T),J,this.getLineMaxColumn(J)))}getVisibleRanges(){const n=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(n)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(n){const a=this.coordinatesConverter.convertViewRangeToModelRange(n),f=this._lines.getHiddenAreas();if(f.length===0)return[a];const y=[];let T=0,J=a.startLineNumber,se=a.startColumn;const be=a.endLineNumber,Oe=a.endColumn;for(let Ge=0,je=f.length;Ge<je;Ge++){const nt=f[Ge].startLineNumber,lt=f[Ge].endLineNumber;lt<J||nt>be||(J<nt&&(y[T++]=new x.Q(J,se,nt-1,this.model.getLineMaxColumn(nt-1))),J=lt+1,se=1)}return(J<be||J===be&&se<Oe)&&(y[T++]=new x.Q(J,se,be,Oe)),y}getCompletelyVisibleViewRange(){const n=this.viewLayout.getLinesViewportData(),a=n.completelyVisibleStartLineNumber,f=n.completelyVisibleEndLineNumber;return new x.Q(a,this.getLineMinColumn(a),f,this.getLineMaxColumn(f))}getCompletelyVisibleViewRangeAtScrollTop(n){const a=this.viewLayout.getLinesViewportDataAtScrollTop(n),f=a.completelyVisibleStartLineNumber,y=a.completelyVisibleEndLineNumber;return new x.Q(f,this.getLineMinColumn(f),y,this.getLineMaxColumn(y))}saveState(){const n=this.viewLayout.saveState(),a=n.scrollTop,f=this.viewLayout.getLineNumberAtVerticalOffset(a),y=this.coordinatesConverter.convertViewPositionToModelPosition(new Ue.y(f,this.getLineMinColumn(f))),T=this.viewLayout.getVerticalOffsetForLineNumber(f)-a;return{scrollLeft:n.scrollLeft,firstPosition:y,firstPositionDeltaTop:T}}reduceRestoreState(n){if(typeof n.firstPosition>"u")return this._reduceRestoreStateCompatibility(n);const a=this.model.validatePosition(n.firstPosition),f=this.coordinatesConverter.convertModelPositionToViewPosition(a),y=this.viewLayout.getVerticalOffsetForLineNumber(f.lineNumber)-n.firstPositionDeltaTop;return{scrollLeft:n.scrollLeft,scrollTop:y}}_reduceRestoreStateCompatibility(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(n,a,f){this._viewportStart.update(this,n)}getActiveIndentGuide(n,a,f){return this._lines.getActiveIndentGuide(n,a,f)}getLinesIndentGuides(n,a){return this._lines.getViewLinesIndentGuides(n,a)}getBracketGuidesInRangeByLine(n,a,f,y){return this._lines.getViewLinesBracketGuides(n,a,f,y)}getLineContent(n){return this._lines.getViewLineContent(n)}getLineLength(n){return this._lines.getViewLineLength(n)}getLineMinColumn(n){return this._lines.getViewLineMinColumn(n)}getLineMaxColumn(n){return this._lines.getViewLineMaxColumn(n)}getLineFirstNonWhitespaceColumn(n){const a=yi.HG(this.getLineContent(n));return a===-1?0:a+1}getLineLastNonWhitespaceColumn(n){const a=yi.lT(this.getLineContent(n));return a===-1?0:a+2}getMinimapDecorationsInRange(n){return this._decorations.getMinimapDecorationsInRange(n)}getDecorationsInViewport(n){return this._decorations.getDecorationsViewportData(n).decorations}getInjectedTextAt(n){return this._lines.getInjectedTextAt(n)}getViewportViewLineRenderingData(n,a){const y=this._decorations.getDecorationsViewportData(n).inlineDecorations[a-n.startLineNumber];return this._getViewLineRenderingData(a,y)}getViewLineRenderingData(n){const a=this._decorations.getInlineDecorationsOnLine(n);return this._getViewLineRenderingData(n,a)}_getViewLineRenderingData(n,a){const f=this.model.mightContainRTL(),y=this.model.mightContainNonBasicASCII(),T=this.getTabSize(),J=this._lines.getViewLineData(n);return J.inlineDecorations&&(a=[...a,...J.inlineDecorations.map(se=>se.toInlineDecoration(n))]),new on.qL(J.minColumn,J.maxColumn,J.content,J.continuesWithWrappedLine,f,y,J.tokens,a,T,J.startVisibleColumn)}getViewLineData(n){return this._lines.getViewLineData(n)}getMinimapLinesRenderingData(n,a,f){const y=this._lines.getViewLinesData(n,a,f);return new on.nt(this.getTabSize(),y)}getAllOverviewRulerDecorations(n){const a=this.model.getOverviewRulerDecorations(this._editorId,(0,Q.$C)(this._configuration.options)),f=new Xr;for(const y of a){const T=y.options,J=T.overviewRuler;if(!J)continue;const se=J.position;if(se===0)continue;const be=J.getColor(n.value),Oe=this.coordinatesConverter.getViewLineNumberOfModelPosition(y.range.startLineNumber,y.range.startColumn),Ge=this.coordinatesConverter.getViewLineNumberOfModelPosition(y.range.endLineNumber,y.range.endColumn);f.accept(be,T.zIndex,Oe,Ge,se)}return f.asArray}_invalidateDecorationsColorCache(){const n=this.model.getOverviewRulerDecorations();for(const a of n)a.options.overviewRuler?.invalidateCachedColor(),a.options.minimap?.invalidateCachedColor()}getValueInRange(n,a){const f=this.coordinatesConverter.convertViewRangeToModelRange(n);return this.model.getValueInRange(f,a)}getValueLengthInRange(n,a){const f=this.coordinatesConverter.convertViewRangeToModelRange(n);return this.model.getValueLengthInRange(f,a)}modifyPosition(n,a){const f=this.coordinatesConverter.convertViewPositionToModelPosition(n),y=this.model.modifyPosition(f,a);return this.coordinatesConverter.convertModelPositionToViewPosition(y)}deduceModelPositionRelativeToViewPosition(n,a,f){const y=this.coordinatesConverter.convertViewPositionToModelPosition(n);this.model.getEOL().length===2&&(a<0?a-=f:a+=f);const J=this.model.getOffsetAt(y)+a;return this.model.getPositionAt(J)}getPlainTextToCopy(n,a,f){const y=f?`\r
`:this.model.getEOL();n=n.slice(0),n.sort(x.Q.compareRangesUsingStarts);let T=!1,J=!1;for(const be of n)be.isEmpty()?T=!0:J=!0;if(!J){if(!a)return"";const be=n.map(Ge=>Ge.startLineNumber);let Oe="";for(let Ge=0;Ge<be.length;Ge++)Ge>0&&be[Ge-1]===be[Ge]||(Oe+=this.model.getLineContent(be[Ge])+y);return Oe}if(T&&a){const be=[];let Oe=0;for(const Ge of n){const je=Ge.startLineNumber;Ge.isEmpty()?je!==Oe&&be.push(this.model.getLineContent(je)):be.push(this.model.getValueInRange(Ge,f?2:0)),Oe=je}return be.length===1?be[0]:be}const se=[];for(const be of n)be.isEmpty()||se.push(this.model.getValueInRange(be,f?2:0));return se.length===1?se[0]:se}getRichTextToCopy(n,a){const f=this.model.getLanguageId();if(f===Nu.vH||n.length!==1)return null;let y=n[0];if(y.isEmpty()){if(!a)return null;const Ge=y.startLineNumber;y=new x.Q(Ge,this.model.getLineMinColumn(Ge),Ge,this.model.getLineMaxColumn(Ge))}const T=this._configuration.options.get(50),J=this._getColorMap(),be=/[:;\\\/<>]/.test(T.fontFamily)||T.fontFamily===Q.jU.fontFamily;let Oe;return be?Oe=Q.jU.fontFamily:(Oe=T.fontFamily,Oe=Oe.replace(/"/g,"'"),/[,']/.test(Oe)||/[+ ]/.test(Oe)&&(Oe=`'${Oe}'`),Oe=`${Oe}, ${Q.jU.fontFamily}`),{mode:f,html:`<div style="color: ${J[1]};background-color: ${J[2]};font-family: ${Oe};font-weight: ${T.fontWeight};font-size: ${T.fontSize}px;line-height: ${T.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(y,J)+"</div>"}}_getHTMLToCopy(n,a){const f=n.startLineNumber,y=n.startColumn,T=n.endLineNumber,J=n.endColumn,se=this.getTabSize();let be="";for(let Oe=f;Oe<=T;Oe++){const Ge=this.model.tokenization.getLineTokens(Oe),je=Ge.getLineContent(),nt=Oe===f?y-1:0,lt=Oe===T?J-1:je.length;je===""?be+="<br>":be+=(0,Tu.s0)(je,Ge.inflate(),a,nt,lt,se,m.uF)}return be}_getColorMap(){const n=wi.dG.getColorMap(),a=["#000000"];if(n)for(let f=1,y=n.length;f<y;f++)a[f]=ji.Q1.Format.CSS.formatHex(n[f]);return a}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(n,a,f){return this._withViewEventsCollector(y=>this._cursor.setStates(y,n,a,f))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(n){this._cursor.setCursorColumnSelectData(n)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(n){this._cursor.setPrevEditOperationType(n)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(n,a,f=0){this._withViewEventsCollector(y=>this._cursor.setSelections(y,n,a,f))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(n){this._withViewEventsCollector(a=>this._cursor.restoreState(a,n))}_executeCursorEdit(n){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new Wo);return}this._withViewEventsCollector(n)}executeEdits(n,a,f){this._executeCursorEdit(y=>this._cursor.executeEdits(y,n,a,f))}startComposition(){this._executeCursorEdit(n=>this._cursor.startComposition(n))}endComposition(n){this._executeCursorEdit(a=>this._cursor.endComposition(a,n))}type(n,a){this._executeCursorEdit(f=>this._cursor.type(f,n,a))}compositionType(n,a,f,y,T){this._executeCursorEdit(J=>this._cursor.compositionType(J,n,a,f,y,T))}paste(n,a,f,y){this._executeCursorEdit(T=>this._cursor.paste(T,n,a,f,y))}cut(n){this._executeCursorEdit(a=>this._cursor.cut(a,n))}executeCommand(n,a){this._executeCursorEdit(f=>this._cursor.executeCommand(f,n,a))}executeCommands(n,a){this._executeCursorEdit(f=>this._cursor.executeCommands(f,n,a))}revealAllCursors(n,a,f=!1){this._withViewEventsCollector(y=>this._cursor.revealAll(y,n,f,0,a,0))}revealPrimaryCursor(n,a,f=!1){this._withViewEventsCollector(y=>this._cursor.revealPrimary(y,n,f,0,a,0))}revealTopMostCursor(n){const a=this._cursor.getTopMostViewPosition(),f=new x.Q(a.lineNumber,a.column,a.lineNumber,a.column);this._withViewEventsCollector(y=>y.emitViewEvent(new Sa(n,!1,f,null,0,!0,0)))}revealBottomMostCursor(n){const a=this._cursor.getBottomMostViewPosition(),f=new x.Q(a.lineNumber,a.column,a.lineNumber,a.column);this._withViewEventsCollector(y=>y.emitViewEvent(new Sa(n,!1,f,null,0,!0,0)))}revealRange(n,a,f,y,T){this._withViewEventsCollector(J=>J.emitViewEvent(new Sa(n,!1,f,null,y,a,T)))}changeWhitespace(n){this.viewLayout.changeWhitespace(n)&&(this._eventDispatcher.emitSingleViewEvent(new Nc),this._eventDispatcher.emitOutgoingEvent(new Bl))}_withViewEventsCollector(n){return this._transactionalTarget.batchChanges(()=>{try{const a=this._eventDispatcher.beginEmitViewEvents();return n(a)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(n){this._withViewEventsCollector(()=>{n()})}normalizePosition(n,a){return this._lines.normalizePosition(n,a)}getLineIndentColumn(n){return this._lines.getLineIndentColumn(n)}}class Mr{static create(n){const a=n._setTrackedRange(null,new x.Q(1,1,1,1),1);return new Mr(n,1,!1,a,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(n,a,f,y,T){this._model=n,this._viewLineNumber=a,this._isValid=f,this._modelTrackedRange=y,this._startLineDelta=T}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(n,a){const f=n.coordinatesConverter.convertViewPositionToModelPosition(new Ue.y(a,n.getLineMinColumn(a))),y=n.model._setTrackedRange(this._modelTrackedRange,new x.Q(f.lineNumber,f.column,f.lineNumber,f.column),1),T=n.viewLayout.getVerticalOffsetForLineNumber(a),J=n.viewLayout.getCurrentScrollTop();this._viewLineNumber=a,this._isValid=!0,this._modelTrackedRange=y,this._startLineDelta=J-T}invalidate(){this._isValid=!1}}class Xr{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(n,a,f,y,T){const J=this._asMap[n];if(J){const se=J.data,be=se[se.length-3],Oe=se[se.length-1];if(be===T&&Oe+1>=f){y>Oe&&(se[se.length-1]=y);return}se.push(T,f,y)}else{const se=new on.Uv(n,a,[T,f,y]);this._asMap[n]=se,this.asArray.push(se)}}}class Nr{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(n,a){const f=this.hiddenAreas.get(n);f&&Io(f,a)||(this.hiddenAreas.set(n,a),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const n=Array.from(this.hiddenAreas.values()).reduce((a,f)=>nl(a,f),[]);return Io(this.ranges,n)?this.ranges:(this.ranges=n,this.ranges)}}function nl(st,n){const a=[];let f=0,y=0;for(;f<st.length&&y<n.length;){const T=st[f],J=n[y];if(T.endLineNumber<J.startLineNumber-1)a.push(st[f++]);else if(J.endLineNumber<T.startLineNumber-1)a.push(n[y++]);else{const se=Math.min(T.startLineNumber,J.startLineNumber),be=Math.max(T.endLineNumber,J.endLineNumber);a.push(new x.Q(se,1,be,1)),f++,y++}}for(;f<st.length;)a.push(st[f++]);for(;y<n.length;)a.push(n[y++]);return a}function Io(st,n){if(st.length!==n.length)return!1;for(let a=0;a<st.length;a++)if(!st[a].equalsRange(n[a]))return!1;return!0}class sl{constructor(n,a){this.viewportStartModelPosition=n,this.startLineDelta=a}recoverViewportStart(n,a){if(!this.viewportStartModelPosition)return;const f=n.convertModelPositionToViewPosition(this.viewportStartModelPosition),y=a.getVerticalOffsetForLineNumber(f.lineNumber);a.setScrollPosition({scrollTop:y+this.startLineDelta},1)}}var hr=c(93750),zl=c(25894),Hc=c(68624),Vc=c(22250),ur=c(76222),jl=function(st,n,a,f){var y=arguments.length,T=y<3?n:f===null?f=Object.getOwnPropertyDescriptor(n,a):f,J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(st,n,a,f);else for(var se=st.length-1;se>=0;se--)(J=st[se])&&(T=(y<3?J(T):y>3?J(n,a,T):J(n,a))||T);return y>3&&T&&Object.defineProperty(n,a,T),T},oo=function(st,n){return function(a,f){n(a,f,st)}},Ho;let ka=class extends I.jG{static{Ho=this}static{this.dropIntoEditorDecorationOptions=zr.kI.register({description:"workbench-dnd-target",className:"dnd-target"})}get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(n,a,f,y,T,J,se,be,Oe,Ge,je,nt){super(),this.languageConfigurationService=je,this._deliveryQueue=(0,A.Qy)(),this._contributions=this._register(new Qa),this._onDidDispose=this._register(new A.vl),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new Uc({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new Uc({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Hs(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new A.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new A.vl),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new A.vl),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),T.willCreateCodeEditor();const lt={...a};this._domElement=n,this._overflowWidgetsDomNode=lt.overflowWidgetsDomNode,delete lt.overflowWidgetsDomNode,this._id=++Kl,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=f.telemetryData,this._configuration=this._register(this._createConfiguration(f.isSimpleWidget||!1,f.contextMenuId??(f.isSimpleWidget?ur.D8.SimpleEditorContext:ur.D8.EditorContext),lt,Ge)),this._register(this._configuration.onDidChange(At=>{this._onDidChangeConfiguration.fire(At);const Gt=this._configuration.options;if(At.hasChanged(146)){const ti=Gt.get(146);this._onDidLayoutChange.fire(ti)}})),this._contextKeyService=this._register(se.createScoped(this._domElement)),this._notificationService=Oe,this._codeEditorService=T,this._commandService=J,this._themeService=be,this._register(new gr(this,this._contextKeyService)),this._register(new tr(this,this._contextKeyService,nt)),this._instantiationService=this._register(y.createChild(new Hc.a([zl.fN,this._contextKeyService]))),this._modelData=null,this._focusTracker=new Tr(n,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let bt;Array.isArray(f.contributions)?bt=f.contributions:bt=G.dS.getEditorContributions(),this._contributions.initialize(this,bt,this._instantiationService);for(const At of G.dS.getEditorActions()){if(this._actions.has(At.id)){(0,O.dz)(new Error(`Cannot have two actions with the same id ${At.id}`));continue}const Gt=new Ur.f(At.id,At.label,At.alias,At.metadata,At.precondition??void 0,ti=>this._instantiationService.invokeFunction(li=>Promise.resolve(At.runEditorCommand(li,this,ti))),this._contextKeyService);this._actions.set(Gt.id,Gt)}const xt=()=>!this._configuration.options.get(92)&&this._configuration.options.get(36).enabled;this._register(new w.pN(this._domElement,{onDragOver:At=>{if(!xt())return;const Gt=this.getTargetAtClientPoint(At.clientX,At.clientY);Gt?.position&&this.showDropIndicatorAt(Gt.position)},onDrop:async At=>{if(!xt()||(this.removeDropIndicator(),!At.dataTransfer))return;const Gt=this.getTargetAtClientPoint(At.clientX,At.clientY);Gt?.position&&this._onDropIntoEditor.fire({position:Gt.position,event:At})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(n){this._modelData?.view.writeScreenReaderContent(n)}_createConfiguration(n,a,f,y){return new K(n,a,f,this._domElement,y)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return cr._.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(n){return this._instantiationService.invokeFunction(n)}updateOptions(n){this._configuration.updateOptions(n||{})}getOptions(){return this._configuration.options}getOption(n){return this._configuration.options.get(n)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(n){return this._modelData?Tl.z.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),n):null}getValue(n=null){if(!this._modelData)return"";const a=!!(n&&n.preserveBOM);let f=0;return n&&n.lineEnding&&n.lineEnding===`
`?f=1:n&&n.lineEnding&&n.lineEnding===`\r
`&&(f=2),this._modelData.model.getValue(f,a)}setValue(n){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(n)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(n=null){try{this._beginUpdate();const a=n;if(this._modelData===null&&a===null||this._modelData&&this._modelData.model===a)return;const f={oldModelUrl:this._modelData?.model.uri||null,newModelUrl:a?.uri||null};this._onWillChangeModel.fire(f);const y=this.hasTextFocus(),T=this._detachModel();this._attachModel(a),y&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(f),this._postDetachModelCleanup(T),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const n in this._decorationTypeSubtypes){const a=this._decorationTypeSubtypes[n];for(const f in a)this._removeDecorationType(n+"-"+f)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(n,a,f,y){const T=n.model.validatePosition({lineNumber:a,column:f}),J=n.viewModel.coordinatesConverter.convertModelPositionToViewPosition(T);return n.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(J.lineNumber,y)}getTopForLineNumber(n,a=!1){return this._modelData?Ho._getVerticalOffsetForPosition(this._modelData,n,1,a):-1}getTopForPosition(n,a){return this._modelData?Ho._getVerticalOffsetForPosition(this._modelData,n,a,!1):-1}static _getVerticalOffsetForPosition(n,a,f,y=!1){const T=n.model.validatePosition({lineNumber:a,column:f}),J=n.viewModel.coordinatesConverter.convertModelPositionToViewPosition(T);return n.viewModel.viewLayout.getVerticalOffsetForLineNumber(J.lineNumber,y)}getBottomForLineNumber(n,a=!1){if(!this._modelData)return-1;const f=this._modelData.model.getLineMaxColumn(n);return Ho._getVerticalOffsetAfterPosition(this._modelData,n,f,a)}setHiddenAreas(n,a){this._modelData?.viewModel.setHiddenAreas(n.map(f=>x.Q.lift(f)),a)}getVisibleColumnFromPosition(n){if(!this._modelData)return n.column;const a=this._modelData.model.validatePosition(n),f=this._modelData.model.getOptions().tabSize;return it.A.visibleColumnFromColumn(this._modelData.model.getLineContent(a.lineNumber),a.column,f)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(n,a="api"){if(this._modelData){if(!Ue.y.isIPosition(n))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(a,[{selectionStartLineNumber:n.lineNumber,selectionStartColumn:n.column,positionLineNumber:n.lineNumber,positionColumn:n.column}])}}_sendRevealRange(n,a,f,y){if(!this._modelData)return;if(!x.Q.isIRange(n))throw new Error("Invalid arguments");const T=this._modelData.model.validateRange(n),J=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(T);this._modelData.viewModel.revealRange("api",f,J,a,y)}revealLine(n,a=0){this._revealLine(n,0,a)}revealLineInCenter(n,a=0){this._revealLine(n,1,a)}revealLineInCenterIfOutsideViewport(n,a=0){this._revealLine(n,2,a)}revealLineNearTop(n,a=0){this._revealLine(n,5,a)}_revealLine(n,a,f){if(typeof n!="number")throw new Error("Invalid arguments");this._sendRevealRange(new x.Q(n,1,n,1),a,!1,f)}revealPosition(n,a=0){this._revealPosition(n,0,!0,a)}revealPositionInCenter(n,a=0){this._revealPosition(n,1,!0,a)}revealPositionInCenterIfOutsideViewport(n,a=0){this._revealPosition(n,2,!0,a)}revealPositionNearTop(n,a=0){this._revealPosition(n,5,!0,a)}_revealPosition(n,a,f,y){if(!Ue.y.isIPosition(n))throw new Error("Invalid arguments");this._sendRevealRange(new x.Q(n.lineNumber,n.column,n.lineNumber,n.column),a,f,y)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(n,a="api"){const f=Xt.L.isISelection(n),y=x.Q.isIRange(n);if(!f&&!y)throw new Error("Invalid arguments");if(f)this._setSelectionImpl(n,a);else if(y){const T={selectionStartLineNumber:n.startLineNumber,selectionStartColumn:n.startColumn,positionLineNumber:n.endLineNumber,positionColumn:n.endColumn};this._setSelectionImpl(T,a)}}_setSelectionImpl(n,a){if(!this._modelData)return;const f=new Xt.L(n.selectionStartLineNumber,n.selectionStartColumn,n.positionLineNumber,n.positionColumn);this._modelData.viewModel.setSelections(a,[f])}revealLines(n,a,f=0){this._revealLines(n,a,0,f)}revealLinesInCenter(n,a,f=0){this._revealLines(n,a,1,f)}revealLinesInCenterIfOutsideViewport(n,a,f=0){this._revealLines(n,a,2,f)}revealLinesNearTop(n,a,f=0){this._revealLines(n,a,5,f)}_revealLines(n,a,f,y){if(typeof n!="number"||typeof a!="number")throw new Error("Invalid arguments");this._sendRevealRange(new x.Q(n,1,a,1),f,!1,y)}revealRange(n,a=0,f=!1,y=!0){this._revealRange(n,f?1:0,y,a)}revealRangeInCenter(n,a=0){this._revealRange(n,1,!0,a)}revealRangeInCenterIfOutsideViewport(n,a=0){this._revealRange(n,2,!0,a)}revealRangeNearTop(n,a=0){this._revealRange(n,5,!0,a)}revealRangeNearTopIfOutsideViewport(n,a=0){this._revealRange(n,6,!0,a)}revealRangeAtTop(n,a=0){this._revealRange(n,3,!0,a)}_revealRange(n,a,f,y){if(!x.Q.isIRange(n))throw new Error("Invalid arguments");this._sendRevealRange(x.Q.lift(n),a,f,y)}setSelections(n,a="api",f=0){if(this._modelData){if(!n||n.length===0)throw new Error("Invalid arguments");for(let y=0,T=n.length;y<T;y++)if(!Xt.L.isISelection(n[y]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(a,n,f)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(n,a=1){if(this._modelData){if(typeof n!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:n},a)}}setScrollTop(n,a=1){if(this._modelData){if(typeof n!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:n},a)}}setScrollPosition(n,a=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(n,a)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const n=this._contributions.saveViewState(),a=this._modelData.viewModel.saveCursorState(),f=this._modelData.viewModel.saveState();return{cursorState:a,viewState:f,contributionsState:n}}restoreViewState(n){if(!this._modelData||!this._modelData.hasRealView)return;const a=n;if(a&&a.cursorState&&a.viewState){const f=a.cursorState;Array.isArray(f)?f.length>0&&this._modelData.viewModel.restoreCursorState(f):this._modelData.viewModel.restoreCursorState([f]),this._contributions.restoreViewState(a.contributionsState||{});const y=this._modelData.viewModel.reduceRestoreState(a.viewState);this._modelData.view.restoreState(y)}}handleInitialized(){this._getViewModel()?.visibleLinesStabilized()}getContribution(n){return this._contributions.get(n)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let n=this.getActions();return n=n.filter(a=>a.isSupported()),n}getAction(n){return this._actions.get(n)||null}trigger(n,a,f){f=f||{};try{switch(this._beginUpdate(),a){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(n);return;case"type":{const T=f;this._type(n,T.text||"");return}case"replacePreviousChar":{const T=f;this._compositionType(n,T.text||"",T.replaceCharCnt||0,0,0);return}case"compositionType":{const T=f;this._compositionType(n,T.text||"",T.replacePrevCharCnt||0,T.replaceNextCharCnt||0,T.positionDelta||0);return}case"paste":{const T=f;this._paste(n,T.text||"",T.pasteOnNewLine||!1,T.multicursorText||null,T.mode||null,T.clipboardEvent);return}case"cut":this._cut(n);return}const y=this.getAction(a);if(y){Promise.resolve(y.run(f)).then(void 0,O.dz);return}if(!this._modelData||this._triggerEditorCommand(n,a,f))return;this._triggerCommand(a,f)}finally{this._endUpdate()}}_triggerCommand(n,a){this._commandService.executeCommand(n,a)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(n){this._modelData&&(this._modelData.viewModel.endComposition(n),this._onDidCompositionEnd.fire())}_type(n,a){!this._modelData||a.length===0||(n==="keyboard"&&this._onWillType.fire(a),this._modelData.viewModel.type(a,n),n==="keyboard"&&this._onDidType.fire(a))}_compositionType(n,a,f,y,T){this._modelData&&this._modelData.viewModel.compositionType(a,f,y,T,n)}_paste(n,a,f,y,T,J){if(!this._modelData)return;const se=this._modelData.viewModel,be=se.getSelection().getStartPosition();se.paste(a,f,y,n);const Oe=se.getSelection().getStartPosition();n==="keyboard"&&this._onDidPaste.fire({clipboardEvent:J,range:new x.Q(be.lineNumber,be.column,Oe.lineNumber,Oe.column),languageId:T})}_cut(n){this._modelData&&this._modelData.viewModel.cut(n)}_triggerEditorCommand(n,a,f){const y=G.dS.getEditorCommand(a);return y?(f=f||{},f.source=n,this._instantiationService.invokeFunction(T=>{Promise.resolve(y.runEditorCommand(T,this,f)).then(void 0,O.dz)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(n,a,f){if(!this._modelData||this._configuration.options.get(92))return!1;let y;return f?Array.isArray(f)?y=()=>f:y=f:y=()=>null,this._modelData.viewModel.executeEdits(n,a,y),!0}executeCommand(n,a){this._modelData&&this._modelData.viewModel.executeCommand(a,n)}executeCommands(n,a){this._modelData&&this._modelData.viewModel.executeCommands(a,n)}createDecorationsCollection(n){return new Ia(this,n)}changeDecorations(n){return this._modelData?this._modelData.model.changeDecorations(n,this._id):null}getLineDecorations(n){return this._modelData?this._modelData.model.getLineDecorations(n,this._id,(0,Q.$C)(this._configuration.options)):null}getDecorationsInRange(n){return this._modelData?this._modelData.model.getDecorationsInRange(n,this._id,(0,Q.$C)(this._configuration.options)):null}deltaDecorations(n,a){return this._modelData?n.length===0&&a.length===0?n:this._modelData.model.deltaDecorations(n,a,this._id):[]}removeDecorations(n){!this._modelData||n.length===0||this._modelData.model.changeDecorations(a=>{a.deltaDecorations(n,[])})}removeDecorationsByType(n){const a=this._decorationTypeKeysToIds[n];a&&this.changeDecorations(f=>f.deltaDecorations(a,[])),this._decorationTypeKeysToIds.hasOwnProperty(n)&&delete this._decorationTypeKeysToIds[n],this._decorationTypeSubtypes.hasOwnProperty(n)&&delete this._decorationTypeSubtypes[n]}getLayoutInfo(){return this._configuration.options.get(146)}createOverviewRuler(n){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(n)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(n){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(n)}delegateScrollFromMouseWheelEvent(n){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(n)}layout(n,a=!1){this._configuration.observeContainer(n),a||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(n){const a={widget:n,position:n.getPosition()};this._contentWidgets.hasOwnProperty(n.getId()),this._contentWidgets[n.getId()]=a,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(a)}layoutContentWidget(n){const a=n.getId();if(this._contentWidgets.hasOwnProperty(a)){const f=this._contentWidgets[a];f.position=n.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(f)}}removeContentWidget(n){const a=n.getId();if(this._contentWidgets.hasOwnProperty(a)){const f=this._contentWidgets[a];delete this._contentWidgets[a],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(f)}}addOverlayWidget(n){const a={widget:n,position:n.getPosition()};this._overlayWidgets.hasOwnProperty(n.getId()),this._overlayWidgets[n.getId()]=a,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(a)}layoutOverlayWidget(n){const a=n.getId();if(this._overlayWidgets.hasOwnProperty(a)){const f=this._overlayWidgets[a];f.position=n.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(f)}}removeOverlayWidget(n){const a=n.getId();if(this._overlayWidgets.hasOwnProperty(a)){const f=this._overlayWidgets[a];delete this._overlayWidgets[a],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(f)}}addGlyphMarginWidget(n){const a={widget:n,position:n.getPosition()};this._glyphMarginWidgets.hasOwnProperty(n.getId()),this._glyphMarginWidgets[n.getId()]=a,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(a)}layoutGlyphMarginWidget(n){const a=n.getId();if(this._glyphMarginWidgets.hasOwnProperty(a)){const f=this._glyphMarginWidgets[a];f.position=n.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(f)}}removeGlyphMarginWidget(n){const a=n.getId();if(this._glyphMarginWidgets.hasOwnProperty(a)){const f=this._glyphMarginWidgets[a];delete this._glyphMarginWidgets[a],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(f)}}changeViewZones(n){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(n)}getTargetAtClientPoint(n,a){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(n,a)}getScrolledVisiblePosition(n){if(!this._modelData||!this._modelData.hasRealView)return null;const a=this._modelData.model.validatePosition(n),f=this._configuration.options,y=f.get(146),T=Ho._getVerticalOffsetForPosition(this._modelData,a.lineNumber,a.column)-this.getScrollTop(),J=this._modelData.view.getOffsetForColumn(a.lineNumber,a.column)+y.glyphMarginWidth+y.lineNumbersWidth+y.decorationsWidth-this.getScrollLeft();return{top:T,left:J,height:f.get(67)}}getOffsetForColumn(n,a){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(n,a)}render(n=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,n)})}setAriaOptions(n){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(n)}applyFontInfo(n){(0,C.M)(n,this._configuration.options.get(50))}setBanner(n,a){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=n,this._configuration.setReservedHeight(n?a:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(n){if(!n){this._modelData=null;return}const a=[];this._domElement.setAttribute("data-mode-id",n.getLanguageId()),this._configuration.setIsDominatedByLongLines(n.isDominatedByLongLines()),this._configuration.setModelLineCount(n.getLineCount());const f=n.onBeforeAttached(),y=new ko(this._id,this._configuration,n,ms.create(w.zk(this._domElement)),Er.create(this._configuration.options),se=>w.PG(w.zk(this._domElement),se),this.languageConfigurationService,this._themeService,f,{batchChanges:se=>{try{return this._beginUpdate(),se()}finally{this._endUpdate()}}});a.push(n.onWillDispose(()=>this.setModel(null))),a.push(y.onEvent(se=>{switch(se.kind){case 0:this._onDidContentSizeChange.fire(se);break;case 1:this._editorTextFocus.setValue(se.hasFocus);break;case 2:this._onDidScrollChange.fire(se);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(se.reachedMaxCursorCount){const je=this.getOption(80),nt=Ii.kg("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",je);this._notificationService.prompt(Vc.AI.Warning,nt,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:Ii.kg("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const be=[];for(let je=0,nt=se.selections.length;je<nt;je++)be[je]=se.selections[je].getPosition();const Oe={position:be[0],secondaryPositions:be.slice(1),reason:se.reason,source:se.source};this._onDidChangeCursorPosition.fire(Oe);const Ge={selection:se.selections[0],secondarySelections:se.selections.slice(1),modelVersionId:se.modelVersionId,oldSelections:se.oldSelections,oldModelVersionId:se.oldModelVersionId,source:se.source,reason:se.reason};this._onDidChangeCursorSelection.fire(Ge);break}case 7:this._onDidChangeModelDecorations.fire(se.event);break;case 8:this._domElement.setAttribute("data-mode-id",n.getLanguageId()),this._onDidChangeModelLanguage.fire(se.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(se.event);break;case 10:this._onDidChangeModelContent.fire(se.event);break;case 11:this._onDidChangeModelOptions.fire(se.event);break;case 12:this._onDidChangeModelTokens.fire(se.event);break}}));const[T,J]=this._createView(y);if(J){this._domElement.appendChild(T.domNode.domNode);let se=Object.keys(this._contentWidgets);for(let be=0,Oe=se.length;be<Oe;be++){const Ge=se[be];T.addContentWidget(this._contentWidgets[Ge])}se=Object.keys(this._overlayWidgets);for(let be=0,Oe=se.length;be<Oe;be++){const Ge=se[be];T.addOverlayWidget(this._overlayWidgets[Ge])}se=Object.keys(this._glyphMarginWidgets);for(let be=0,Oe=se.length;be<Oe;be++){const Ge=se[be];T.addGlyphMarginWidget(this._glyphMarginWidgets[Ge])}T.render(!1,!0),T.domNode.domNode.setAttribute("data-uri",n.uri.toString())}this._modelData=new er(n,y,T,J,a,f)}_createView(n){let a;this.isSimpleWidget?a={paste:(T,J,se,be)=>{this._paste("keyboard",T,J,se,be)},type:T=>{this._type("keyboard",T)},compositionType:(T,J,se,be)=>{this._compositionType("keyboard",T,J,se,be)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:a={paste:(T,J,se,be)=>{const Oe={text:T,pasteOnNewLine:J,multicursorText:se,mode:be};this._commandService.executeCommand("paste",Oe)},type:T=>{const J={text:T};this._commandService.executeCommand("type",J)},compositionType:(T,J,se,be)=>{if(se||be){const Oe={text:T,replacePrevCharCnt:J,replaceNextCharCnt:se,positionDelta:be};this._commandService.executeCommand("compositionType",Oe)}else{const Oe={text:T,replaceCharCnt:J};this._commandService.executeCommand("replacePreviousChar",Oe)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const f=new $i(n.coordinatesConverter);return f.onKeyDown=T=>this._onKeyDown.fire(T),f.onKeyUp=T=>this._onKeyUp.fire(T),f.onContextMenu=T=>this._onContextMenu.fire(T),f.onMouseMove=T=>this._onMouseMove.fire(T),f.onMouseLeave=T=>this._onMouseLeave.fire(T),f.onMouseDown=T=>this._onMouseDown.fire(T),f.onMouseUp=T=>this._onMouseUp.fire(T),f.onMouseDrag=T=>this._onMouseDrag.fire(T),f.onMouseDrop=T=>this._onMouseDrop.fire(T),f.onMouseDropCanceled=T=>this._onMouseDropCanceled.fire(T),f.onMouseWheel=T=>this._onMouseWheel.fire(T),[new Bs(a,this._configuration,this._themeService.getColorTheme(),n,f,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(n){n?.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(this._contributionsDisposable?.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const n=this._modelData.model,a=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),a&&this._domElement.contains(a)&&a.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),n}_removeDecorationType(n){this._codeEditorService.removeDecorationType(n)}hasModel(){return this._modelData!==null}showDropIndicatorAt(n){const a=[{range:new x.Q(n.lineNumber,n.column,n.lineNumber,n.column),options:Ho.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(a),this.revealPosition(n,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(n,a){this._contextKeyService.createKey(n,a)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}};ka=Ho=jl([oo(3,nn._Y),oo(4,Le.T),oo(5,hr.d),oo(6,zl.fN),oo(7,oi.Gy),oo(8,Vc.Ot),oo(9,ve.j),oo(10,Rl.JZ),oo(11,Zo.ILanguageFeaturesService)],ka);let Kl=0;class er{constructor(n,a,f,y,T,J){this.model=n,this.viewModel=a,this.view=f,this.hasRealView=y,this.listenersToRemove=T,this.attachedView=J}dispose(){(0,I.AS)(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class Uc extends I.jG{constructor(n){super(),this._emitterOptions=n,this._onDidChangeToTrue=this._register(new A.vl(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new A.vl(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(n){const a=n?2:1;this._value!==a&&(this._value=a,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class Hs extends A.vl{constructor(n,a){super({deliveryQueue:a}),this._contributions=n}fire(n){this._contributions.onBeforeInteractionEvent(),super.fire(n)}}class gr extends I.jG{constructor(n,a){super(),this._editor=n,a.createKey("editorId",n.getId()),this._editorSimpleInput=Jn.R.editorSimpleInput.bindTo(a),this._editorFocus=Jn.R.focus.bindTo(a),this._textInputFocus=Jn.R.textInputFocus.bindTo(a),this._editorTextFocus=Jn.R.editorTextFocus.bindTo(a),this._tabMovesFocus=Jn.R.tabMovesFocus.bindTo(a),this._editorReadonly=Jn.R.readOnly.bindTo(a),this._inDiffEditor=Jn.R.inDiffEditor.bindTo(a),this._editorColumnSelection=Jn.R.columnSelection.bindTo(a),this._hasMultipleSelections=Jn.R.hasMultipleSelections.bindTo(a),this._hasNonEmptySelection=Jn.R.hasNonEmptySelection.bindTo(a),this._canUndo=Jn.R.canUndo.bindTo(a),this._canRedo=Jn.R.canRedo.bindTo(a),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register($.M.onDidChangeTabFocus(f=>this._tabMovesFocus.set(f))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const n=this._editor.getOptions();this._tabMovesFocus.set($.M.getTabFocusMode()),this._editorReadonly.set(n.get(92)),this._inDiffEditor.set(n.get(61)),this._editorColumnSelection.set(n.get(22))}_updateFromSelection(){const n=this._editor.getSelections();n?(this._hasMultipleSelections.set(n.length>1),this._hasNonEmptySelection.set(n.some(a=>!a.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const n=this._editor.getModel();this._canUndo.set(!!(n&&n.canUndo())),this._canRedo.set(!!(n&&n.canRedo()))}}class tr extends I.jG{constructor(n,a,f){super(),this._editor=n,this._contextKeyService=a,this._languageFeaturesService=f,this._langId=Jn.R.languageId.bindTo(a),this._hasCompletionItemProvider=Jn.R.hasCompletionItemProvider.bindTo(a),this._hasCodeActionsProvider=Jn.R.hasCodeActionsProvider.bindTo(a),this._hasCodeLensProvider=Jn.R.hasCodeLensProvider.bindTo(a),this._hasDefinitionProvider=Jn.R.hasDefinitionProvider.bindTo(a),this._hasDeclarationProvider=Jn.R.hasDeclarationProvider.bindTo(a),this._hasImplementationProvider=Jn.R.hasImplementationProvider.bindTo(a),this._hasTypeDefinitionProvider=Jn.R.hasTypeDefinitionProvider.bindTo(a),this._hasHoverProvider=Jn.R.hasHoverProvider.bindTo(a),this._hasDocumentHighlightProvider=Jn.R.hasDocumentHighlightProvider.bindTo(a),this._hasDocumentSymbolProvider=Jn.R.hasDocumentSymbolProvider.bindTo(a),this._hasReferenceProvider=Jn.R.hasReferenceProvider.bindTo(a),this._hasRenameProvider=Jn.R.hasRenameProvider.bindTo(a),this._hasSignatureHelpProvider=Jn.R.hasSignatureHelpProvider.bindTo(a),this._hasInlayHintsProvider=Jn.R.hasInlayHintsProvider.bindTo(a),this._hasDocumentFormattingProvider=Jn.R.hasDocumentFormattingProvider.bindTo(a),this._hasDocumentSelectionFormattingProvider=Jn.R.hasDocumentSelectionFormattingProvider.bindTo(a),this._hasMultipleDocumentFormattingProvider=Jn.R.hasMultipleDocumentFormattingProvider.bindTo(a),this._hasMultipleDocumentSelectionFormattingProvider=Jn.R.hasMultipleDocumentSelectionFormattingProvider.bindTo(a),this._isInEmbeddedEditor=Jn.R.isInEmbeddedEditor.bindTo(a);const y=()=>this._update();this._register(n.onDidChangeModel(y)),this._register(n.onDidChangeModelLanguage(y)),this._register(f.completionProvider.onDidChange(y)),this._register(f.codeActionProvider.onDidChange(y)),this._register(f.codeLensProvider.onDidChange(y)),this._register(f.definitionProvider.onDidChange(y)),this._register(f.declarationProvider.onDidChange(y)),this._register(f.implementationProvider.onDidChange(y)),this._register(f.typeDefinitionProvider.onDidChange(y)),this._register(f.hoverProvider.onDidChange(y)),this._register(f.documentHighlightProvider.onDidChange(y)),this._register(f.documentSymbolProvider.onDidChange(y)),this._register(f.referenceProvider.onDidChange(y)),this._register(f.renameProvider.onDidChange(y)),this._register(f.documentFormattingEditProvider.onDidChange(y)),this._register(f.documentRangeFormattingEditProvider.onDidChange(y)),this._register(f.signatureHelpProvider.onDidChange(y)),this._register(f.inlayHintsProvider.onDidChange(y)),y()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const n=this._editor.getModel();if(!n){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(n.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(n)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(n)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(n)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(n)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(n)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(n)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(n)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(n)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(n)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(n)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(n)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(n)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(n)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(n)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(n)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(n)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(n)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(n).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(n).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(n).length>1),this._isInEmbeddedEditor.set(n.uri.scheme===b.ny.walkThroughSnippet||n.uri.scheme===b.ny.vscodeChatCodeBlock)})}}class Tr extends I.jG{constructor(n,a){super(),this._onChange=this._register(new A.vl),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(w.w5(n)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),a&&(this._overflowWidgetsDomNode=this._register(w.w5(a)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const n=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==n&&(this._hadFocus=n,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}}class Ia{get length(){return this._decorationIds.length}constructor(n,a){this._editor=n,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(a)&&a.length>0&&this.set(a)}onDidChange(n,a,f){return this._editor.onDidChangeModelDecorations(y=>{this._isChangingDecorations||n.call(a,y)},f)}getRange(n){return!this._editor.hasModel()||n>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[n])}getRanges(){if(!this._editor.hasModel())return[];const n=this._editor.getModel(),a=[];for(const f of this._decorationIds){const y=n.getDecorationRange(f);y&&a.push(y)}return a}has(n){return this._decorationIds.includes(n.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(n){try{this._isChangingDecorations=!0,this._editor.changeDecorations(a=>{this._decorationIds=a.deltaDecorations(this._decorationIds,n)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(n){let a=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(f=>{a=f.deltaDecorations([],n),this._decorationIds=this._decorationIds.concat(a)})}finally{this._isChangingDecorations=!1}return a}}const Ms=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),Rr=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function ns(st){return Ms+encodeURIComponent(st.toString())+Rr}const eo=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),$l=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function Ma(st){return eo+encodeURIComponent(st.toString())+$l}(0,oi.zy)((st,n)=>{const a=st.getColor(an.Rbi);a&&n.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${ns(a)}") repeat-x bottom left; }`);const f=st.getColor(an.Hng);f&&n.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${ns(f)}") repeat-x bottom left; }`);const y=st.getColor(an.pOz);y&&n.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${ns(y)}") repeat-x bottom left; }`);const T=st.getColor(an.i61);T&&n.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${Ma(T)}") no-repeat bottom left; }`);const J=st.getColor(Ne.yw);J&&n.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${J.rgba.a}; }`)})},84546:(Mt,He,c)=>{c.d(He,{hb:()=>qe,B8:()=>at,MH:()=>Ke,_C:()=>me,W0:()=>re,Bm:()=>N,B6:()=>ne,b$:()=>Ae,bm:()=>Re,mh:()=>Ce,tX:()=>ae,Es:()=>F,xu:()=>K,bG:()=>Ue});var u=c(31938),G=c(89530),U=c(15625),P=c(7069),M=c(78690);class w{constructor(pe){this.spliceables=pe}splice(pe,te,oe){this.spliceables.forEach(Te=>Te.splice(pe,te,oe))}}var O=c(93009),A=c(37519),I=c(34920),b=c(77065),C=c(56491),v=c(5262),_=c(60599),d=c(23957),m=c(90692),S=c(33902);class D extends Error{constructor(pe,te){super(`ListError [${pe}] ${te}`)}}var E=c(63074),B=c(25334),R=c(63886),z=function(Xe,pe,te,oe){var Te=arguments.length,Ve=Te<3?pe:oe===null?oe=Object.getOwnPropertyDescriptor(pe,te):oe,We;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ve=Reflect.decorate(Xe,pe,te,oe);else for(var dt=Xe.length-1;dt>=0;dt--)(We=Xe[dt])&&(Ve=(Te<3?We(Ve):Te>3?We(pe,te,Ve):We(pe,te))||Ve);return Te>3&&Ve&&Object.defineProperty(pe,te,Ve),Ve};class W{constructor(pe){this.trait=pe,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(pe){return pe}renderElement(pe,te,oe){const Te=this.renderedElements.findIndex(Ve=>Ve.templateData===oe);if(Te>=0){const Ve=this.renderedElements[Te];this.trait.unrender(oe),Ve.index=te}else{const Ve={index:te,templateData:oe};this.renderedElements.push(Ve)}this.trait.renderIndex(te,oe)}splice(pe,te,oe){const Te=[];for(const Ve of this.renderedElements)Ve.index<pe?Te.push(Ve):Ve.index>=pe+te&&Te.push({index:Ve.index+oe-te,templateData:Ve.templateData});this.renderedElements=Te}renderIndexes(pe){for(const{index:te,templateData:oe}of this.renderedElements)pe.indexOf(te)>-1&&this.trait.renderIndex(te,oe)}disposeTemplate(pe){const te=this.renderedElements.findIndex(oe=>oe.templateData===pe);te<0||this.renderedElements.splice(te,1)}}class ${get name(){return this._trait}get renderer(){return new W(this)}constructor(pe){this._trait=pe,this.indexes=[],this.sortedIndexes=[],this._onChange=new C.vl,this.onChange=this._onChange.event}splice(pe,te,oe){const Te=oe.length-te,Ve=pe+te,We=[];let dt=0;for(;dt<this.sortedIndexes.length&&this.sortedIndexes[dt]<pe;)We.push(this.sortedIndexes[dt++]);for(let Ye=0;Ye<oe.length;Ye++)oe[Ye]&&We.push(Ye+pe);for(;dt<this.sortedIndexes.length&&this.sortedIndexes[dt]>=Ve;)We.push(this.sortedIndexes[dt++]+Te);this.renderer.splice(pe,te,oe.length),this._set(We,We)}renderIndex(pe,te){te.classList.toggle(this._trait,this.contains(pe))}unrender(pe){pe.classList.remove(this._trait)}set(pe,te){return this._set(pe,[...pe].sort(ot),te)}_set(pe,te,oe){const Te=this.indexes,Ve=this.sortedIndexes;this.indexes=pe,this.sortedIndexes=te;const We=Ze(Ve,pe);return this.renderer.renderIndexes(We),this._onChange.fire({indexes:pe,browserEvent:oe}),Te}get(){return this.indexes}contains(pe){return(0,O.El)(this.sortedIndexes,pe,ot)>=0}dispose(){(0,_.AS)(this._onChange)}}z([b.B],$.prototype,"renderer",null);class Q extends ${constructor(pe){super("selected"),this.setAriaSelected=pe}renderIndex(pe,te){super.renderIndex(pe,te),this.setAriaSelected&&(this.contains(pe)?te.setAttribute("aria-selected","true"):te.setAttribute("aria-selected","false"))}}class q{constructor(pe,te,oe){this.trait=pe,this.view=te,this.identityProvider=oe}splice(pe,te,oe){if(!this.identityProvider)return this.trait.splice(pe,te,new Array(oe.length).fill(!1));const Te=this.trait.get().map(dt=>this.identityProvider.getId(this.view.element(dt)).toString());if(Te.length===0)return this.trait.splice(pe,te,new Array(oe.length).fill(!1));const Ve=new Set(Te),We=oe.map(dt=>Ve.has(this.identityProvider.getId(dt).toString()));this.trait.splice(pe,te,We)}}function ne(Xe){return Xe.tagName==="INPUT"||Xe.tagName==="TEXTAREA"}function ve(Xe,pe){return Xe.classList.contains(pe)?!0:Xe.classList.contains("monaco-list")||!Xe.parentElement?!1:ve(Xe.parentElement,pe)}function Re(Xe){return ve(Xe,"monaco-editor")}function Ae(Xe){return ve(Xe,"monaco-custom-toggle")}function re(Xe){return ve(Xe,"action-item")}function K(Xe){return ve(Xe,"monaco-tree-sticky-row")}function F(Xe){return Xe.classList.contains("monaco-tree-sticky-container")}function N(Xe){return Xe.tagName==="A"&&Xe.classList.contains("monaco-button")||Xe.tagName==="DIV"&&Xe.classList.contains("monaco-button-dropdown")?!0:Xe.classList.contains("monaco-list")||!Xe.parentElement?!1:N(Xe.parentElement)}class j{get onKeyDown(){return C.Jh.chain(this.disposables.add(new G.f(this.view.domNode,"keydown")).event,pe=>pe.filter(te=>!ne(te.target)).map(te=>new U.Z(te)))}constructor(pe,te,oe){this.list=pe,this.view=te,this.disposables=new _.Cm,this.multipleSelectionDisposables=new _.Cm,this.multipleSelectionSupport=oe.multipleSelectionSupport,this.disposables.add(this.onKeyDown(Te=>{switch(Te.keyCode){case 3:return this.onEnter(Te);case 16:return this.onUpArrow(Te);case 18:return this.onDownArrow(Te);case 11:return this.onPageUpArrow(Te);case 12:return this.onPageDownArrow(Te);case 9:return this.onEscape(Te);case 31:this.multipleSelectionSupport&&(m.zx?Te.metaKey:Te.ctrlKey)&&this.onCtrlA(Te)}}))}updateOptions(pe){pe.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=pe.multipleSelectionSupport)}onEnter(pe){pe.preventDefault(),pe.stopPropagation(),this.list.setSelection(this.list.getFocus(),pe.browserEvent)}onUpArrow(pe){pe.preventDefault(),pe.stopPropagation(),this.list.focusPrevious(1,!1,pe.browserEvent);const te=this.list.getFocus()[0];this.list.setAnchor(te),this.list.reveal(te),this.view.domNode.focus()}onDownArrow(pe){pe.preventDefault(),pe.stopPropagation(),this.list.focusNext(1,!1,pe.browserEvent);const te=this.list.getFocus()[0];this.list.setAnchor(te),this.list.reveal(te),this.view.domNode.focus()}onPageUpArrow(pe){pe.preventDefault(),pe.stopPropagation(),this.list.focusPreviousPage(pe.browserEvent);const te=this.list.getFocus()[0];this.list.setAnchor(te),this.list.reveal(te),this.view.domNode.focus()}onPageDownArrow(pe){pe.preventDefault(),pe.stopPropagation(),this.list.focusNextPage(pe.browserEvent);const te=this.list.getFocus()[0];this.list.setAnchor(te),this.list.reveal(te),this.view.domNode.focus()}onCtrlA(pe){pe.preventDefault(),pe.stopPropagation(),this.list.setSelection((0,O.y1)(this.list.length),pe.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(pe){this.list.getSelection().length&&(pe.preventDefault(),pe.stopPropagation(),this.list.setSelection([],pe.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}z([b.B],j.prototype,"onKeyDown",null);var me;(function(Xe){Xe[Xe.Automatic=0]="Automatic",Xe[Xe.Trigger=1]="Trigger"})(me||(me={}));var ce;(function(Xe){Xe[Xe.Idle=0]="Idle",Xe[Xe.Typing=1]="Typing"})(ce||(ce={}));const he=new class{mightProducePrintableCharacter(Xe){return Xe.ctrlKey||Xe.metaKey||Xe.altKey?!1:Xe.keyCode>=31&&Xe.keyCode<=56||Xe.keyCode>=21&&Xe.keyCode<=30||Xe.keyCode>=98&&Xe.keyCode<=107||Xe.keyCode>=85&&Xe.keyCode<=95}};class Le{constructor(pe,te,oe,Te,Ve){this.list=pe,this.view=te,this.keyboardNavigationLabelProvider=oe,this.keyboardNavigationEventFilter=Te,this.delegate=Ve,this.enabled=!1,this.state=ce.Idle,this.mode=me.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new _.Cm,this.disposables=new _.Cm,this.updateOptions(pe.options)}updateOptions(pe){pe.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=pe.typeNavigationMode??me.Automatic}enable(){if(this.enabled)return;let pe=!1;const te=C.Jh.chain(this.enabledDisposables.add(new G.f(this.view.domNode,"keydown")).event,Ve=>Ve.filter(We=>!ne(We.target)).filter(()=>this.mode===me.Automatic||this.triggered).map(We=>new U.Z(We)).filter(We=>pe||this.keyboardNavigationEventFilter(We)).filter(We=>this.delegate.mightProducePrintableCharacter(We)).forEach(We=>u.fs.stop(We,!0)).map(We=>We.browserEvent.key)),oe=C.Jh.debounce(te,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);C.Jh.reduce(C.Jh.any(te,oe),(Ve,We)=>We===null?null:(Ve||"")+We,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),oe(this.onClear,this,this.enabledDisposables),te(()=>pe=!0,void 0,this.enabledDisposables),oe(()=>pe=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){const pe=this.list.getFocus();if(pe.length>0&&pe[0]===this.previouslyFocused){const te=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(pe[0]));typeof te=="string"?(0,M.xE)(te):te&&(0,M.xE)(te.get())}this.previouslyFocused=-1}onInput(pe){if(!pe){this.state=ce.Idle,this.triggered=!1;return}const te=this.list.getFocus(),oe=te.length>0?te[0]:0,Te=this.state===ce.Idle?1:0;this.state=ce.Typing;for(let Ve=0;Ve<this.list.length;Ve++){const We=(oe+Ve+Te)%this.list.length,dt=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(We)),Ye=dt&&dt.toString();if(this.list.options.typeNavigationEnabled){if(typeof Ye<"u"){if((0,v.WP)(pe,Ye)){this.previouslyFocused=oe,this.list.setFocus([We]),this.list.reveal(We);return}const mt=(0,v.O)(pe,Ye);if(mt&&mt[0].end-mt[0].start>1&&mt.length===1){this.previouslyFocused=oe,this.list.setFocus([We]),this.list.reveal(We);return}}}else if(typeof Ye>"u"||(0,v.WP)(pe,Ye)){this.previouslyFocused=oe,this.list.setFocus([We]),this.list.reveal(We);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class Y{constructor(pe,te){this.list=pe,this.view=te,this.disposables=new _.Cm;const oe=C.Jh.chain(this.disposables.add(new G.f(te.domNode,"keydown")).event,Ve=>Ve.filter(We=>!ne(We.target)).map(We=>new U.Z(We)));C.Jh.chain(oe,Ve=>Ve.filter(We=>We.keyCode===2&&!We.ctrlKey&&!We.metaKey&&!We.shiftKey&&!We.altKey))(this.onTab,this,this.disposables)}onTab(pe){if(pe.target!==this.view.domNode)return;const te=this.list.getFocus();if(te.length===0)return;const oe=this.view.domElement(te[0]);if(!oe)return;const Te=oe.querySelector("[tabIndex]");if(!Te||!(0,u.sb)(Te)||Te.tabIndex===-1)return;const Ve=(0,u.zk)(Te).getComputedStyle(Te);Ve.visibility==="hidden"||Ve.display==="none"||(pe.preventDefault(),pe.stopPropagation(),Te.focus())}dispose(){this.disposables.dispose()}}function ae(Xe){return m.zx?Xe.browserEvent.metaKey:Xe.browserEvent.ctrlKey}function Ce(Xe){return Xe.browserEvent.shiftKey}function Pe(Xe){return(0,u.Er)(Xe)&&Xe.button===2}const ye={isSelectionSingleChangeEvent:ae,isSelectionRangeChangeEvent:Ce};class Ke{constructor(pe){this.list=pe,this.disposables=new _.Cm,this._onPointer=new C.vl,this.onPointer=this._onPointer.event,pe.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||ye),this.mouseSupport=typeof pe.options.mouseSupport>"u"||!!pe.options.mouseSupport,this.mouseSupport&&(pe.onMouseDown(this.onMouseDown,this,this.disposables),pe.onContextMenu(this.onContextMenu,this,this.disposables),pe.onMouseDblClick(this.onDoubleClick,this,this.disposables),pe.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(P.q.addTarget(pe.getHTMLElement()))),C.Jh.any(pe.onMouseClick,pe.onMouseMiddleClick,pe.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(pe){pe.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,pe.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||ye))}isSelectionSingleChangeEvent(pe){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(pe):!1}isSelectionRangeChangeEvent(pe){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(pe):!1}isSelectionChangeEvent(pe){return this.isSelectionSingleChangeEvent(pe)||this.isSelectionRangeChangeEvent(pe)}onMouseDown(pe){Re(pe.browserEvent.target)||(0,u.bq)()!==pe.browserEvent.target&&this.list.domFocus()}onContextMenu(pe){if(ne(pe.browserEvent.target)||Re(pe.browserEvent.target))return;const te=typeof pe.index>"u"?[]:[pe.index];this.list.setFocus(te,pe.browserEvent)}onViewPointer(pe){if(!this.mouseSupport||ne(pe.browserEvent.target)||Re(pe.browserEvent.target)||pe.browserEvent.isHandledByList)return;pe.browserEvent.isHandledByList=!0;const te=pe.index;if(typeof te>"u"){this.list.setFocus([],pe.browserEvent),this.list.setSelection([],pe.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(pe))return this.changeSelection(pe);this.list.setFocus([te],pe.browserEvent),this.list.setAnchor(te),Pe(pe.browserEvent)||this.list.setSelection([te],pe.browserEvent),this._onPointer.fire(pe)}onDoubleClick(pe){if(ne(pe.browserEvent.target)||Re(pe.browserEvent.target)||this.isSelectionChangeEvent(pe)||pe.browserEvent.isHandledByList)return;pe.browserEvent.isHandledByList=!0;const te=this.list.getFocus();this.list.setSelection(te,pe.browserEvent)}changeSelection(pe){const te=pe.index;let oe=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(pe)){typeof oe>"u"&&(oe=this.list.getFocus()[0]??te,this.list.setAnchor(oe));const Te=Math.min(oe,te),Ve=Math.max(oe,te),We=(0,O.y1)(Te,Ve+1),dt=this.list.getSelection(),Ye=it(Ze(dt,[oe]),oe);if(Ye.length===0)return;const mt=Ze(We,_t(dt,Ye));this.list.setSelection(mt,pe.browserEvent),this.list.setFocus([te],pe.browserEvent)}else if(this.isSelectionSingleChangeEvent(pe)){const Te=this.list.getSelection(),Ve=Te.filter(We=>We!==te);this.list.setFocus([te]),this.list.setAnchor(te),Te.length===Ve.length?this.list.setSelection([...Ve,te],pe.browserEvent):this.list.setSelection(Ve,pe.browserEvent)}}dispose(){this.disposables.dispose()}}class qe{constructor(pe,te){this.styleElement=pe,this.selectorSuffix=te}style(pe){const te=this.selectorSuffix&&`.${this.selectorSuffix}`,oe=[];pe.listBackground&&oe.push(`.monaco-list${te} .monaco-list-rows { background: ${pe.listBackground}; }`),pe.listFocusBackground&&(oe.push(`.monaco-list${te}:focus .monaco-list-row.focused { background-color: ${pe.listFocusBackground}; }`),oe.push(`.monaco-list${te}:focus .monaco-list-row.focused:hover { background-color: ${pe.listFocusBackground}; }`)),pe.listFocusForeground&&oe.push(`.monaco-list${te}:focus .monaco-list-row.focused { color: ${pe.listFocusForeground}; }`),pe.listActiveSelectionBackground&&(oe.push(`.monaco-list${te}:focus .monaco-list-row.selected { background-color: ${pe.listActiveSelectionBackground}; }`),oe.push(`.monaco-list${te}:focus .monaco-list-row.selected:hover { background-color: ${pe.listActiveSelectionBackground}; }`)),pe.listActiveSelectionForeground&&oe.push(`.monaco-list${te}:focus .monaco-list-row.selected { color: ${pe.listActiveSelectionForeground}; }`),pe.listActiveSelectionIconForeground&&oe.push(`.monaco-list${te}:focus .monaco-list-row.selected .codicon { color: ${pe.listActiveSelectionIconForeground}; }`),pe.listFocusAndSelectionBackground&&oe.push(`
				.monaco-drag-image,
				.monaco-list${te}:focus .monaco-list-row.selected.focused { background-color: ${pe.listFocusAndSelectionBackground}; }
			`),pe.listFocusAndSelectionForeground&&oe.push(`
				.monaco-drag-image,
				.monaco-list${te}:focus .monaco-list-row.selected.focused { color: ${pe.listFocusAndSelectionForeground}; }
			`),pe.listInactiveFocusForeground&&(oe.push(`.monaco-list${te} .monaco-list-row.focused { color:  ${pe.listInactiveFocusForeground}; }`),oe.push(`.monaco-list${te} .monaco-list-row.focused:hover { color:  ${pe.listInactiveFocusForeground}; }`)),pe.listInactiveSelectionIconForeground&&oe.push(`.monaco-list${te} .monaco-list-row.focused .codicon { color:  ${pe.listInactiveSelectionIconForeground}; }`),pe.listInactiveFocusBackground&&(oe.push(`.monaco-list${te} .monaco-list-row.focused { background-color:  ${pe.listInactiveFocusBackground}; }`),oe.push(`.monaco-list${te} .monaco-list-row.focused:hover { background-color:  ${pe.listInactiveFocusBackground}; }`)),pe.listInactiveSelectionBackground&&(oe.push(`.monaco-list${te} .monaco-list-row.selected { background-color:  ${pe.listInactiveSelectionBackground}; }`),oe.push(`.monaco-list${te} .monaco-list-row.selected:hover { background-color:  ${pe.listInactiveSelectionBackground}; }`)),pe.listInactiveSelectionForeground&&oe.push(`.monaco-list${te} .monaco-list-row.selected { color: ${pe.listInactiveSelectionForeground}; }`),pe.listHoverBackground&&oe.push(`.monaco-list${te}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${pe.listHoverBackground}; }`),pe.listHoverForeground&&oe.push(`.monaco-list${te}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${pe.listHoverForeground}; }`);const Te=(0,u.gI)(pe.listFocusAndSelectionOutline,(0,u.gI)(pe.listSelectionOutline,pe.listFocusOutline??""));Te&&oe.push(`.monaco-list${te}:focus .monaco-list-row.focused.selected { outline: 1px solid ${Te}; outline-offset: -1px;}`),pe.listFocusOutline&&oe.push(`
				.monaco-drag-image,
				.monaco-list${te}:focus .monaco-list-row.focused { outline: 1px solid ${pe.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${te}.last-focused .monaco-list-row.focused { outline: 1px solid ${pe.listFocusOutline}; outline-offset: -1px; }
			`);const Ve=(0,u.gI)(pe.listSelectionOutline,pe.listInactiveFocusOutline??"");Ve&&oe.push(`.monaco-list${te} .monaco-list-row.focused.selected { outline: 1px dotted ${Ve}; outline-offset: -1px; }`),pe.listSelectionOutline&&oe.push(`.monaco-list${te} .monaco-list-row.selected { outline: 1px dotted ${pe.listSelectionOutline}; outline-offset: -1px; }`),pe.listInactiveFocusOutline&&oe.push(`.monaco-list${te} .monaco-list-row.focused { outline: 1px dotted ${pe.listInactiveFocusOutline}; outline-offset: -1px; }`),pe.listHoverOutline&&oe.push(`.monaco-list${te} .monaco-list-row:hover { outline: 1px dashed ${pe.listHoverOutline}; outline-offset: -1px; }`),pe.listDropOverBackground&&oe.push(`
				.monaco-list${te}.drop-target,
				.monaco-list${te} .monaco-list-rows.drop-target,
				.monaco-list${te} .monaco-list-row.drop-target { background-color: ${pe.listDropOverBackground} !important; color: inherit !important; }
			`),pe.listDropBetweenBackground&&(oe.push(`
			.monaco-list${te} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${te} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${pe.listDropBetweenBackground};
			}`),oe.push(`
			.monaco-list${te} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${te} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${pe.listDropBetweenBackground};
			}`)),pe.tableColumnsBorder&&oe.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${pe.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),pe.tableOddRowsBackgroundColor&&oe.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${pe.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=oe.join(`
`)}}const Ue={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:I.Q1.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:I.Q1.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:I.Q1.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},x={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function it(Xe,pe){const te=Xe.indexOf(pe);if(te===-1)return[];const oe=[];let Te=te-1;for(;Te>=0&&Xe[Te]===pe-(te-Te);)oe.push(Xe[Te--]);for(oe.reverse(),Te=te;Te<Xe.length&&Xe[Te]===pe+(Te-te);)oe.push(Xe[Te++]);return oe}function Ze(Xe,pe){const te=[];let oe=0,Te=0;for(;oe<Xe.length||Te<pe.length;)if(oe>=Xe.length)te.push(pe[Te++]);else if(Te>=pe.length)te.push(Xe[oe++]);else if(Xe[oe]===pe[Te]){te.push(Xe[oe]),oe++,Te++;continue}else Xe[oe]<pe[Te]?te.push(Xe[oe++]):te.push(pe[Te++]);return te}function _t(Xe,pe){const te=[];let oe=0,Te=0;for(;oe<Xe.length||Te<pe.length;)if(oe>=Xe.length)te.push(pe[Te++]);else if(Te>=pe.length)te.push(Xe[oe++]);else if(Xe[oe]===pe[Te]){oe++,Te++;continue}else Xe[oe]<pe[Te]?te.push(Xe[oe++]):Te++;return te}const ot=(Xe,pe)=>Xe-pe;class Pt{constructor(pe,te){this._templateId=pe,this.renderers=te}get templateId(){return this._templateId}renderTemplate(pe){return this.renderers.map(te=>te.renderTemplate(pe))}renderElement(pe,te,oe,Te){let Ve=0;for(const We of this.renderers)We.renderElement(pe,te,oe[Ve++],Te)}disposeElement(pe,te,oe,Te){let Ve=0;for(const We of this.renderers)We.disposeElement?.(pe,te,oe[Ve],Te),Ve+=1}disposeTemplate(pe){let te=0;for(const oe of this.renderers)oe.disposeTemplate(pe[te++])}}class Wt{constructor(pe){this.accessibilityProvider=pe,this.templateId="a18n"}renderTemplate(pe){return{container:pe,disposables:new _.Cm}}renderElement(pe,te,oe){const Te=this.accessibilityProvider.getAriaLabel(pe),Ve=Te&&typeof Te!="string"?Te:(0,R.lk)(Te);oe.disposables.add((0,R.fm)(dt=>{this.setAriaLabel(dt.readObservable(Ve),oe.container)}));const We=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(pe);typeof We=="number"?oe.container.setAttribute("aria-level",`${We}`):oe.container.removeAttribute("aria-level")}setAriaLabel(pe,te){pe?te.setAttribute("aria-label",pe):te.removeAttribute("aria-label")}disposeElement(pe,te,oe,Te){oe.disposables.clear()}disposeTemplate(pe){pe.disposables.dispose()}}class Rt{constructor(pe,te){this.list=pe,this.dnd=te}getDragElements(pe){const te=this.list.getSelectedElements();return te.indexOf(pe)>-1?te:[pe]}getDragURI(pe){return this.dnd.getDragURI(pe)}getDragLabel(pe,te){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(pe,te)}onDragStart(pe,te){this.dnd.onDragStart?.(pe,te)}onDragOver(pe,te,oe,Te,Ve){return this.dnd.onDragOver(pe,te,oe,Te,Ve)}onDragLeave(pe,te,oe,Te){this.dnd.onDragLeave?.(pe,te,oe,Te)}onDragEnd(pe){this.dnd.onDragEnd?.(pe)}drop(pe,te,oe,Te,Ve){this.dnd.drop(pe,te,oe,Te,Ve)}dispose(){this.dnd.dispose()}}class at{get onDidChangeFocus(){return C.Jh.map(this.eventBufferer.wrapEvent(this.focus.onChange),pe=>this.toListEvent(pe),this.disposables)}get onDidChangeSelection(){return C.Jh.map(this.eventBufferer.wrapEvent(this.selection.onChange),pe=>this.toListEvent(pe),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let pe=!1;const te=C.Jh.chain(this.disposables.add(new G.f(this.view.domNode,"keydown")).event,Ve=>Ve.map(We=>new U.Z(We)).filter(We=>pe=We.keyCode===58||We.shiftKey&&We.keyCode===68).map(We=>u.fs.stop(We,!0)).filter(()=>!1)),oe=C.Jh.chain(this.disposables.add(new G.f(this.view.domNode,"keyup")).event,Ve=>Ve.forEach(()=>pe=!1).map(We=>new U.Z(We)).filter(We=>We.keyCode===58||We.shiftKey&&We.keyCode===68).map(We=>u.fs.stop(We,!0)).map(({browserEvent:We})=>{const dt=this.getFocus(),Ye=dt.length?dt[0]:void 0,mt=typeof Ye<"u"?this.view.element(Ye):void 0,Dt=typeof Ye<"u"?this.view.domElement(Ye):this.view.domNode;return{index:Ye,element:mt,anchor:Dt,browserEvent:We}})),Te=C.Jh.chain(this.view.onContextMenu,Ve=>Ve.filter(We=>!pe).map(({element:We,index:dt,browserEvent:Ye})=>({element:We,index:dt,anchor:new B.P((0,u.zk)(this.view.domNode),Ye),browserEvent:Ye})));return C.Jh.any(te,oe,Te)}get onKeyDown(){return this.disposables.add(new G.f(this.view.domNode,"keydown")).event}get onDidFocus(){return C.Jh.signal(this.disposables.add(new G.f(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return C.Jh.signal(this.disposables.add(new G.f(this.view.domNode,"blur",!0)).event)}constructor(pe,te,oe,Te,Ve=x){this.user=pe,this._options=Ve,this.focus=new $("focused"),this.anchor=new $("anchor"),this.eventBufferer=new C.at,this._ariaLabel="",this.disposables=new _.Cm,this._onDidDispose=new C.vl,this.onDidDispose=this._onDidDispose.event;const We=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new Q(We!=="listbox");const dt=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=Ve.accessibilityProvider,this.accessibilityProvider&&(dt.push(new Wt(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),Te=Te.map(mt=>new Pt(mt.templateId,[...dt,mt]));const Ye={...Ve,dnd:Ve.dnd&&new Rt(this,Ve.dnd)};if(this.view=this.createListView(te,oe,Te,Ye),this.view.domNode.setAttribute("role",We),Ve.styleController)this.styleController=Ve.styleController(this.view.domId);else{const mt=(0,u.li)(this.view.domNode);this.styleController=new qe(mt,this.view.domId)}if(this.spliceable=new w([new q(this.focus,this.view,Ve.identityProvider),new q(this.selection,this.view,Ve.identityProvider),new q(this.anchor,this.view,Ve.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new Y(this,this.view)),(typeof Ve.keyboardSupport!="boolean"||Ve.keyboardSupport)&&(this.keyboardController=new j(this,this.view,Ve),this.disposables.add(this.keyboardController)),Ve.keyboardNavigationLabelProvider){const mt=Ve.keyboardNavigationDelegate||he;this.typeNavigationController=new Le(this,this.view,Ve.keyboardNavigationLabelProvider,Ve.keyboardNavigationEventFilter??(()=>!0),mt),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(Ve),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(pe,te,oe,Te){return new E.uO(pe,te,oe,Te)}createMouseController(pe){return new Ke(this)}updateOptions(pe={}){this._options={...this._options,...pe},this.typeNavigationController?.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(pe),this.keyboardController?.updateOptions(pe),this.view.updateOptions(pe)}get options(){return this._options}splice(pe,te,oe=[]){if(pe<0||pe>this.view.length)throw new D(this.user,`Invalid start index: ${pe}`);if(te<0)throw new D(this.user,`Invalid delete count: ${te}`);te===0&&oe.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(pe,te,oe))}rerender(){this.view.rerender()}element(pe){return this.view.element(pe)}indexOf(pe){return this.view.indexOf(pe)}indexAt(pe){return this.view.indexAt(pe)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(pe){this.view.setScrollTop(pe)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(pe){this._ariaLabel=pe,this.view.domNode.setAttribute("aria-label",pe)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(pe,te){this.view.layout(pe,te)}setSelection(pe,te){for(const oe of pe)if(oe<0||oe>=this.length)throw new D(this.user,`Invalid index ${oe}`);this.selection.set(pe,te)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(pe=>this.view.element(pe))}setAnchor(pe){if(typeof pe>"u"){this.anchor.set([]);return}if(pe<0||pe>=this.length)throw new D(this.user,`Invalid index ${pe}`);this.anchor.set([pe])}getAnchor(){return(0,O.Fy)(this.anchor.get(),void 0)}getAnchorElement(){const pe=this.getAnchor();return typeof pe>"u"?void 0:this.element(pe)}setFocus(pe,te){for(const oe of pe)if(oe<0||oe>=this.length)throw new D(this.user,`Invalid index ${oe}`);this.focus.set(pe,te)}focusNext(pe=1,te=!1,oe,Te){if(this.length===0)return;const Ve=this.focus.get(),We=this.findNextIndex(Ve.length>0?Ve[0]+pe:0,te,Te);We>-1&&this.setFocus([We],oe)}focusPrevious(pe=1,te=!1,oe,Te){if(this.length===0)return;const Ve=this.focus.get(),We=this.findPreviousIndex(Ve.length>0?Ve[0]-pe:0,te,Te);We>-1&&this.setFocus([We],oe)}async focusNextPage(pe,te){let oe=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);oe=oe===0?0:oe-1;const Te=this.getFocus()[0];if(Te!==oe&&(Te===void 0||oe>Te)){const Ve=this.findPreviousIndex(oe,!1,te);Ve>-1&&Te!==Ve?this.setFocus([Ve],pe):this.setFocus([oe],pe)}else{const Ve=this.view.getScrollTop();let We=Ve+this.view.renderHeight;oe>Te&&(We-=this.view.elementHeight(oe)),this.view.setScrollTop(We),this.view.getScrollTop()!==Ve&&(this.setFocus([]),await(0,A.wR)(0),await this.focusNextPage(pe,te))}}async focusPreviousPage(pe,te,oe=()=>0){let Te;const Ve=oe(),We=this.view.getScrollTop()+Ve;We===0?Te=this.view.indexAt(We):Te=this.view.indexAfter(We-1);const dt=this.getFocus()[0];if(dt!==Te&&(dt===void 0||dt>=Te)){const Ye=this.findNextIndex(Te,!1,te);Ye>-1&&dt!==Ye?this.setFocus([Ye],pe):this.setFocus([Te],pe)}else{const Ye=We;this.view.setScrollTop(We-this.view.renderHeight-Ve),this.view.getScrollTop()+oe()!==Ye&&(this.setFocus([]),await(0,A.wR)(0),await this.focusPreviousPage(pe,te,oe))}}focusLast(pe,te){if(this.length===0)return;const oe=this.findPreviousIndex(this.length-1,!1,te);oe>-1&&this.setFocus([oe],pe)}focusFirst(pe,te){this.focusNth(0,pe,te)}focusNth(pe,te,oe){if(this.length===0)return;const Te=this.findNextIndex(pe,!1,oe);Te>-1&&this.setFocus([Te],te)}findNextIndex(pe,te=!1,oe){for(let Te=0;Te<this.length;Te++){if(pe>=this.length&&!te)return-1;if(pe=pe%this.length,!oe||oe(this.element(pe)))return pe;pe++}return-1}findPreviousIndex(pe,te=!1,oe){for(let Te=0;Te<this.length;Te++){if(pe<0&&!te)return-1;if(pe=(this.length+pe%this.length)%this.length,!oe||oe(this.element(pe)))return pe;pe--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(pe=>this.view.element(pe))}reveal(pe,te,oe=0){if(pe<0||pe>=this.length)throw new D(this.user,`Invalid index ${pe}`);const Te=this.view.getScrollTop(),Ve=this.view.elementTop(pe),We=this.view.elementHeight(pe);if((0,S.Et)(te)){const dt=We-this.view.renderHeight+oe;this.view.setScrollTop(dt*(0,d.qE)(te,0,1)+Ve-oe)}else{const dt=Ve+We,Ye=Te+this.view.renderHeight;Ve<Te+oe&&dt>=Ye||(Ve<Te+oe||dt>=Ye&&We>=this.view.renderHeight?this.view.setScrollTop(Ve-oe):dt>=Ye&&this.view.setScrollTop(dt-this.view.renderHeight))}}getRelativeTop(pe,te=0){if(pe<0||pe>=this.length)throw new D(this.user,`Invalid index ${pe}`);const oe=this.view.getScrollTop(),Te=this.view.elementTop(pe),Ve=this.view.elementHeight(pe);if(Te<oe+te||Te+Ve>oe+this.view.renderHeight)return null;const We=Ve-this.view.renderHeight+te;return Math.abs((oe+te-Te)/We)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(pe){return this.view.getElementDomId(pe)}getElementTop(pe){return this.view.elementTop(pe)}style(pe){this.styleController.style(pe)}toListEvent({indexes:pe,browserEvent:te}){return{indexes:pe,elements:pe.map(oe=>this.view.element(oe)),browserEvent:te}}_onFocusChange(){const pe=this.focus.get();this.view.domNode.classList.toggle("element-focused",pe.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){const pe=this.focus.get();if(pe.length>0){let te;this.accessibilityProvider?.getActiveDescendantId&&(te=this.accessibilityProvider.getActiveDescendantId(this.view.element(pe[0]))),this.view.domNode.setAttribute("aria-activedescendant",te||this.view.getElementDomId(pe[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const pe=this.selection.get();this.view.domNode.classList.toggle("selection-none",pe.length===0),this.view.domNode.classList.toggle("selection-single",pe.length===1),this.view.domNode.classList.toggle("selection-multiple",pe.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}z([b.B],at.prototype,"onDidChangeFocus",null),z([b.B],at.prototype,"onDidChangeSelection",null),z([b.B],at.prototype,"onContextMenu",null),z([b.B],at.prototype,"onKeyDown",null),z([b.B],at.prototype,"onDidFocus",null),z([b.B],at.prototype,"onDidBlur",null)},85565:(Mt,He,c)=>{c.d(He,{$X:()=>it,AV:()=>U,BO:()=>C,Bm:()=>v,Bq:()=>I,DB:()=>q,E_:()=>Ke,GP:()=>M,HG:()=>E,LJ:()=>N,LU:()=>Pt,Lv:()=>ne,MV:()=>ae,NB:()=>b,OS:()=>d,Q_:()=>Re,Qp:()=>re,S8:()=>Ve,Ss:()=>_t,UD:()=>z,UU:()=>B,Vi:()=>K,W1:()=>$,Wd:()=>te,Wv:()=>ve,Z5:()=>me,_J:()=>x,aC:()=>Ue,bm:()=>A,eY:()=>m,en:()=>D,ih:()=>O,iy:()=>Y,jy:()=>w,km:()=>Le,lF:()=>W,lT:()=>R,m:()=>Ce,ne:()=>Ze,ns:()=>Ae,pc:()=>F,r_:()=>ot,tk:()=>Rt,tl:()=>We,uz:()=>S,wB:()=>_,y_:()=>dt,zY:()=>Wt,z_:()=>j,zd:()=>Q});var u=c(20817),G=c(37145);function U(Ye){return!Ye||typeof Ye!="string"?!0:Ye.trim().length===0}const P=/{(\d+)}/g;function M(Ye,...mt){return mt.length===0?Ye:Ye.replace(P,function(Dt,Se){const we=parseInt(Se,10);return isNaN(we)||we<0||we>=mt.length?Dt:mt[we]})}function w(Ye){return Ye.replace(/[<>"'&]/g,mt=>{switch(mt){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return mt})}function O(Ye){return Ye.replace(/[<>&]/g,function(mt){switch(mt){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return mt}})}function A(Ye){return Ye.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function I(Ye,mt=" "){const Dt=b(Ye,mt);return C(Dt,mt)}function b(Ye,mt){if(!Ye||!mt)return Ye;const Dt=mt.length;if(Dt===0||Ye.length===0)return Ye;let Se=0;for(;Ye.indexOf(mt,Se)===Se;)Se=Se+Dt;return Ye.substring(Se)}function C(Ye,mt){if(!Ye||!mt)return Ye;const Dt=mt.length,Se=Ye.length;if(Dt===0||Se===0)return Ye;let we=Se,Xt=-1;for(;Xt=Ye.lastIndexOf(mt,we-1),!(Xt===-1||Xt+Dt!==we);){if(Xt===0)return"";we=Xt}return Ye.substring(0,we)}function v(Ye){return Ye.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function _(Ye){return Ye.replace(/\*/g,"")}function d(Ye,mt,Dt={}){if(!Ye)throw new Error("Cannot create regex from empty string");mt||(Ye=A(Ye)),Dt.wholeWord&&(/\B/.test(Ye.charAt(0))||(Ye="\\b"+Ye),/\B/.test(Ye.charAt(Ye.length-1))||(Ye=Ye+"\\b"));let Se="";return Dt.global&&(Se+="g"),Dt.matchCase||(Se+="i"),Dt.multiline&&(Se+="m"),Dt.unicode&&(Se+="u"),new RegExp(Ye,Se)}function m(Ye){return Ye.source==="^"||Ye.source==="^$"||Ye.source==="$"||Ye.source==="^\\s*$"?!1:!!(Ye.exec("")&&Ye.lastIndex===0)}function S(Ye){return Ye.split(/\r\n|\r|\n/)}function D(Ye){const mt=[],Dt=Ye.split(/(\r\n|\r|\n)/);for(let Se=0;Se<Math.ceil(Dt.length/2);Se++)mt.push(Dt[2*Se]+(Dt[2*Se+1]??""));return mt}function E(Ye){for(let mt=0,Dt=Ye.length;mt<Dt;mt++){const Se=Ye.charCodeAt(mt);if(Se!==32&&Se!==9)return mt}return-1}function B(Ye,mt=0,Dt=Ye.length){for(let Se=mt;Se<Dt;Se++){const we=Ye.charCodeAt(Se);if(we!==32&&we!==9)return Ye.substring(mt,Se)}return Ye.substring(mt,Dt)}function R(Ye,mt=Ye.length-1){for(let Dt=mt;Dt>=0;Dt--){const Se=Ye.charCodeAt(Dt);if(Se!==32&&Se!==9)return Dt}return-1}function z(Ye,mt){return Ye<mt?-1:Ye>mt?1:0}function W(Ye,mt,Dt=0,Se=Ye.length,we=0,Xt=mt.length){for(;Dt<Se&&we<Xt;Dt++,we++){const Z=Ye.charCodeAt(Dt),Fe=mt.charCodeAt(we);if(Z<Fe)return-1;if(Z>Fe)return 1}const ri=Se-Dt,ke=Xt-we;return ri<ke?-1:ri>ke?1:0}function $(Ye,mt){return Q(Ye,mt,0,Ye.length,0,mt.length)}function Q(Ye,mt,Dt=0,Se=Ye.length,we=0,Xt=mt.length){for(;Dt<Se&&we<Xt;Dt++,we++){let Z=Ye.charCodeAt(Dt),Fe=mt.charCodeAt(we);if(Z===Fe)continue;if(Z>=128||Fe>=128)return W(Ye.toLowerCase(),mt.toLowerCase(),Dt,Se,we,Xt);ne(Z)&&(Z-=32),ne(Fe)&&(Fe-=32);const pt=Z-Fe;if(pt!==0)return pt}const ri=Se-Dt,ke=Xt-we;return ri<ke?-1:ri>ke?1:0}function q(Ye){return Ye>=48&&Ye<=57}function ne(Ye){return Ye>=97&&Ye<=122}function ve(Ye){return Ye>=65&&Ye<=90}function Re(Ye,mt){return Ye.length===mt.length&&Q(Ye,mt)===0}function Ae(Ye,mt){const Dt=mt.length;return mt.length>Ye.length?!1:Q(Ye,mt,0,Dt)===0}function re(Ye,mt){const Dt=Math.min(Ye.length,mt.length);let Se;for(Se=0;Se<Dt;Se++)if(Ye.charCodeAt(Se)!==mt.charCodeAt(Se))return Se;return Dt}function K(Ye,mt){const Dt=Math.min(Ye.length,mt.length);let Se;const we=Ye.length-1,Xt=mt.length-1;for(Se=0;Se<Dt;Se++)if(Ye.charCodeAt(we-Se)!==mt.charCodeAt(Xt-Se))return Se;return Dt}function F(Ye){return 55296<=Ye&&Ye<=56319}function N(Ye){return 56320<=Ye&&Ye<=57343}function j(Ye,mt){return(Ye-55296<<10)+(mt-56320)+65536}function me(Ye,mt,Dt){const Se=Ye.charCodeAt(Dt);if(F(Se)&&Dt+1<mt){const we=Ye.charCodeAt(Dt+1);if(N(we))return j(Se,we)}return Se}function ce(Ye,mt){const Dt=Ye.charCodeAt(mt-1);if(N(Dt)&&mt>1){const Se=Ye.charCodeAt(mt-2);if(F(Se))return j(Se,Dt)}return Dt}class he{get offset(){return this._offset}constructor(mt,Dt=0){this._str=mt,this._len=mt.length,this._offset=Dt}setOffset(mt){this._offset=mt}prevCodePoint(){const mt=ce(this._str,this._offset);return this._offset-=mt>=65536?2:1,mt}nextCodePoint(){const mt=me(this._str,this._len,this._offset);return this._offset+=mt>=65536?2:1,mt}eol(){return this._offset>=this._len}}class Le{get offset(){return this._iterator.offset}constructor(mt,Dt=0){this._iterator=new he(mt,Dt)}nextGraphemeLength(){const mt=Xe.getInstance(),Dt=this._iterator,Se=Dt.offset;let we=mt.getGraphemeBreakType(Dt.nextCodePoint());for(;!Dt.eol();){const Xt=Dt.offset,ri=mt.getGraphemeBreakType(Dt.nextCodePoint());if(at(we,ri)){Dt.setOffset(Xt);break}we=ri}return Dt.offset-Se}prevGraphemeLength(){const mt=Xe.getInstance(),Dt=this._iterator,Se=Dt.offset;let we=mt.getGraphemeBreakType(Dt.prevCodePoint());for(;Dt.offset>0;){const Xt=Dt.offset,ri=mt.getGraphemeBreakType(Dt.prevCodePoint());if(at(ri,we)){Dt.setOffset(Xt);break}we=ri}return Se-Dt.offset}eol(){return this._iterator.eol()}}function Y(Ye,mt){return new Le(Ye,mt).nextGraphemeLength()}function ae(Ye,mt){return new Le(Ye,mt).prevGraphemeLength()}function Ce(Ye,mt){mt>0&&N(Ye.charCodeAt(mt))&&mt--;const Dt=mt+Y(Ye,mt);return[Dt-ae(Ye,Dt),Dt]}let Pe;function ye(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function Ke(Ye){return Pe||(Pe=ye()),Pe.test(Ye)}const qe=/^[\t\n\r\x20-\x7E]*$/;function Ue(Ye){return qe.test(Ye)}const x=/[\u2028\u2029]/;function it(Ye){return x.test(Ye)}function Ze(Ye){return Ye>=11904&&Ye<=55215||Ye>=63744&&Ye<=64255||Ye>=65281&&Ye<=65374}function _t(Ye){return Ye>=127462&&Ye<=127487||Ye===8986||Ye===8987||Ye===9200||Ye===9203||Ye>=9728&&Ye<=10175||Ye===11088||Ye===11093||Ye>=127744&&Ye<=128591||Ye>=128640&&Ye<=128764||Ye>=128992&&Ye<=129008||Ye>=129280&&Ye<=129535||Ye>=129648&&Ye<=129782}const ot="\uFEFF";function Pt(Ye){return!!(Ye&&Ye.length>0&&Ye.charCodeAt(0)===65279)}function Wt(Ye,mt=!1){return Ye?(mt&&(Ye=Ye.replace(/\\./g,"")),Ye.toLowerCase()!==Ye):!1}function Rt(Ye){return Ye=Ye%(2*26),Ye<26?String.fromCharCode(97+Ye):String.fromCharCode(65+Ye-26)}function at(Ye,mt){return Ye===0?mt!==5&&mt!==7:Ye===2&&mt===3?!1:Ye===4||Ye===2||Ye===3||mt===4||mt===2||mt===3?!0:!(Ye===8&&(mt===8||mt===9||mt===11||mt===12)||(Ye===11||Ye===9)&&(mt===9||mt===10)||(Ye===12||Ye===10)&&mt===10||mt===5||mt===13||mt===7||Ye===1||Ye===13&&mt===14||Ye===6&&mt===6)}class Xe{static{this._INSTANCE=null}static getInstance(){return Xe._INSTANCE||(Xe._INSTANCE=new Xe),Xe._INSTANCE}constructor(){this._data=pe()}getGraphemeBreakType(mt){if(mt<32)return mt===10?3:mt===13?2:4;if(mt<127)return 0;const Dt=this._data,Se=Dt.length/3;let we=1;for(;we<=Se;)if(mt<Dt[3*we])we=2*we;else if(mt>Dt[3*we+1])we=2*we+1;else return Dt[3*we+2];return 0}}function pe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function te(Ye,mt){if(Ye===0)return 0;const Dt=oe(Ye,mt);if(Dt!==void 0)return Dt;const Se=new he(mt,Ye);return Se.prevCodePoint(),Se.offset}function oe(Ye,mt){const Dt=new he(mt,Ye);let Se=Dt.prevCodePoint();for(;Te(Se)||Se===65039||Se===8419;){if(Dt.offset===0)return;Se=Dt.prevCodePoint()}if(!_t(Se))return;let we=Dt.offset;return we>0&&Dt.prevCodePoint()===8205&&(we=Dt.offset),we}function Te(Ye){return 127995<=Ye&&Ye<=127999}const Ve="\xA0";class We{static{this.ambiguousCharacterData=new G.d(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new u.o5({getCacheKey:JSON.stringify},mt=>{function Dt(pt){const et=new Map;for(let Zt=0;Zt<pt.length;Zt+=2)et.set(pt[Zt],pt[Zt+1]);return et}function Se(pt,et){const Zt=new Map(pt);for(const[bi,ci]of et)Zt.set(bi,ci);return Zt}function we(pt,et){if(!pt)return et;const Zt=new Map;for(const[bi,ci]of pt)et.has(bi)&&Zt.set(bi,ci);return Zt}const Xt=this.ambiguousCharacterData.value;let ri=mt.filter(pt=>!pt.startsWith("_")&&pt in Xt);ri.length===0&&(ri=["_default"]);let ke;for(const pt of ri){const et=Dt(Xt[pt]);ke=we(ke,et)}const Z=Dt(Xt._common),Fe=Se(Z,ke);return new We(Fe)})}static getInstance(mt){return We.cache.get(Array.from(mt))}static{this._locales=new G.d(()=>Object.keys(We.ambiguousCharacterData.value).filter(mt=>!mt.startsWith("_")))}static getLocales(){return We._locales.value}constructor(mt){this.confusableDictionary=mt}isAmbiguous(mt){return this.confusableDictionary.has(mt)}getPrimaryConfusable(mt){return this.confusableDictionary.get(mt)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}class dt{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(dt.getRawData())),this._data}static isInvisibleCharacter(mt){return dt.getData().has(mt)}static get codePoints(){return dt.getData()}}},85613:(Mt,He,c)=>{c.d(He,{I:()=>A});var u=c(85565),G=c(23418),U=c(69504),P=c(98414),M=c(66412),w=c(92998);class O{constructor(b,C,v){this._cursorPositionBrand=void 0,this.lineNumber=b,this.column=C,this.leftoverVisibleColumns=v}}class A{static leftPosition(b,C){if(C.column>b.getLineMinColumn(C.lineNumber))return C.delta(void 0,-u.MV(b.getLineContent(C.lineNumber),C.column-1));if(C.lineNumber>1){const v=C.lineNumber-1;return new U.y(v,b.getLineMaxColumn(v))}else return C}static leftPositionAtomicSoftTabs(b,C,v){if(C.column<=b.getLineIndentColumn(C.lineNumber)){const _=b.getLineMinColumn(C.lineNumber),d=b.getLineContent(C.lineNumber),m=M.s.atomicPosition(d,C.column-1,v,0);if(m!==-1&&m+1>=_)return new U.y(C.lineNumber,m+1)}return this.leftPosition(b,C)}static left(b,C,v){const _=b.stickyTabStops?A.leftPositionAtomicSoftTabs(C,v,b.tabSize):A.leftPosition(C,v);return new O(_.lineNumber,_.column,0)}static moveLeft(b,C,v,_,d){let m,S;if(v.hasSelection()&&!_)m=v.selection.startLineNumber,S=v.selection.startColumn;else{const D=v.position.delta(void 0,-(d-1)),E=C.normalizePosition(A.clipPositionColumn(D,C),0),B=A.left(b,C,E);m=B.lineNumber,S=B.column}return v.move(_,m,S,0)}static clipPositionColumn(b,C){return new U.y(b.lineNumber,A.clipRange(b.column,C.getLineMinColumn(b.lineNumber),C.getLineMaxColumn(b.lineNumber)))}static clipRange(b,C,v){return b<C?C:b>v?v:b}static rightPosition(b,C,v){return v<b.getLineMaxColumn(C)?v=v+u.iy(b.getLineContent(C),v-1):C<b.getLineCount()&&(C=C+1,v=b.getLineMinColumn(C)),new U.y(C,v)}static rightPositionAtomicSoftTabs(b,C,v,_,d){if(v<b.getLineIndentColumn(C)){const m=b.getLineContent(C),S=M.s.atomicPosition(m,v-1,_,1);if(S!==-1)return new U.y(C,S+1)}return this.rightPosition(b,C,v)}static right(b,C,v){const _=b.stickyTabStops?A.rightPositionAtomicSoftTabs(C,v.lineNumber,v.column,b.tabSize,b.indentSize):A.rightPosition(C,v.lineNumber,v.column);return new O(_.lineNumber,_.column,0)}static moveRight(b,C,v,_,d){let m,S;if(v.hasSelection()&&!_)m=v.selection.endLineNumber,S=v.selection.endColumn;else{const D=v.position.delta(void 0,d-1),E=C.normalizePosition(A.clipPositionColumn(D,C),1),B=A.right(b,C,E);m=B.lineNumber,S=B.column}return v.move(_,m,S,0)}static vertical(b,C,v,_,d,m,S,D){const E=G.A.visibleColumnFromColumn(C.getLineContent(v),_,b.tabSize)+d,B=C.getLineCount(),R=v===1&&_===1,z=v===B&&_===C.getLineMaxColumn(v),W=m<v?R:z;if(v=m,v<1?(v=1,S?_=C.getLineMinColumn(v):_=Math.min(C.getLineMaxColumn(v),_)):v>B?(v=B,S?_=C.getLineMaxColumn(v):_=Math.min(C.getLineMaxColumn(v),_)):_=b.columnFromVisibleColumn(C,v,E),W?d=0:d=E-G.A.visibleColumnFromColumn(C.getLineContent(v),_,b.tabSize),D!==void 0){const $=new U.y(v,_),Q=C.normalizePosition($,D);d=d+(_-Q.column),v=Q.lineNumber,_=Q.column}return new O(v,_,d)}static down(b,C,v,_,d,m,S){return this.vertical(b,C,v,_,d,v+m,S,4)}static moveDown(b,C,v,_,d){let m,S;v.hasSelection()&&!_?(m=v.selection.endLineNumber,S=v.selection.endColumn):(m=v.position.lineNumber,S=v.position.column);let D=0,E;do if(E=A.down(b,C,m+D,S,v.leftoverVisibleColumns,d,!0),C.normalizePosition(new U.y(E.lineNumber,E.column),2).lineNumber>m)break;while(D++<10&&m+D<C.getLineCount());return v.move(_,E.lineNumber,E.column,E.leftoverVisibleColumns)}static translateDown(b,C,v){const _=v.selection,d=A.down(b,C,_.selectionStartLineNumber,_.selectionStartColumn,v.selectionStartLeftoverVisibleColumns,1,!1),m=A.down(b,C,_.positionLineNumber,_.positionColumn,v.leftoverVisibleColumns,1,!1);return new w.mG(new P.Q(d.lineNumber,d.column,d.lineNumber,d.column),0,d.leftoverVisibleColumns,new U.y(m.lineNumber,m.column),m.leftoverVisibleColumns)}static up(b,C,v,_,d,m,S){return this.vertical(b,C,v,_,d,v-m,S,3)}static moveUp(b,C,v,_,d){let m,S;v.hasSelection()&&!_?(m=v.selection.startLineNumber,S=v.selection.startColumn):(m=v.position.lineNumber,S=v.position.column);const D=A.up(b,C,m,S,v.leftoverVisibleColumns,d,!0);return v.move(_,D.lineNumber,D.column,D.leftoverVisibleColumns)}static translateUp(b,C,v){const _=v.selection,d=A.up(b,C,_.selectionStartLineNumber,_.selectionStartColumn,v.selectionStartLeftoverVisibleColumns,1,!1),m=A.up(b,C,_.positionLineNumber,_.positionColumn,v.leftoverVisibleColumns,1,!1);return new w.mG(new P.Q(d.lineNumber,d.column,d.lineNumber,d.column),0,d.leftoverVisibleColumns,new U.y(m.lineNumber,m.column),m.leftoverVisibleColumns)}static _isBlankLine(b,C){return b.getLineFirstNonWhitespaceColumn(C)===0}static moveToPrevBlankLine(b,C,v,_){let d=v.position.lineNumber;for(;d>1&&this._isBlankLine(C,d);)d--;for(;d>1&&!this._isBlankLine(C,d);)d--;return v.move(_,d,C.getLineMinColumn(d),0)}static moveToNextBlankLine(b,C,v,_){const d=C.getLineCount();let m=v.position.lineNumber;for(;m<d&&this._isBlankLine(C,m);)m++;for(;m<d&&!this._isBlankLine(C,m);)m++;return v.move(_,m,C.getLineMinColumn(m),0)}static moveToBeginningOfLine(b,C,v,_){const d=v.position.lineNumber,m=C.getLineMinColumn(d),S=C.getLineFirstNonWhitespaceColumn(d)||m;let D;return v.position.column===S?D=m:D=S,v.move(_,d,D,0)}static moveToEndOfLine(b,C,v,_,d){const m=v.position.lineNumber,S=C.getLineMaxColumn(m);return v.move(_,m,S,d?1073741824-S:0)}static moveToBeginningOfBuffer(b,C,v,_){return v.move(_,1,1,0)}static moveToEndOfBuffer(b,C,v,_){const d=C.getLineCount(),m=C.getLineMaxColumn(d);return v.move(_,d,m,0)}}},85653:(Mt,He,c)=>{c.d(He,{h:()=>G});var u=c(81545);const G=(0,u.u1)("clipboardService")},86527:(Mt,He,c)=>{c.d(He,{Hg:()=>v});var u=c(73429),G=c(81545),U=c(56491),P=c(4156),M=c(33924),w=c(81182),O=c(69393),A=c(91090),I=function(m,S,D,E){var B=arguments.length,R=B<3?S:E===null?E=Object.getOwnPropertyDescriptor(S,D):E,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(m,S,D,E);else for(var W=m.length-1;W>=0;W--)(z=m[W])&&(R=(B<3?z(R):B>3?z(S,D,R):z(S,D))||R);return B>3&&R&&Object.defineProperty(S,D,R),R},b=function(m,S){return function(D,E){S(D,E,m)}},C;const v=(0,G.u1)("diffProviderFactoryService");let _=class{constructor(S){this.instantiationService=S}createDiffProvider(S){return this.instantiationService.createInstance(d,S)}};_=I([b(0,G._Y)],_),(0,u.v)(v,_,1);let d=class{static{C=this}static{this.diffCache=new Map}constructor(S,D,E){this.editorWorkerService=D,this.telemetryService=E,this.onDidChangeEventEmitter=new U.vl,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(S)}dispose(){this.diffAlgorithmOnDidChangeSubscription?.dispose()}async computeDiff(S,D,E,B){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(S,D,E,B);if(S.isDisposed()||D.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(S.getLineCount()===1&&S.getLineMaxColumn(1)===1)return D.getLineCount()===1&&D.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new w.wm(new M.M(1,2),new M.M(1,D.getLineCount()+1),[new w.q6(S.getFullModelRange(),D.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const R=JSON.stringify([S.uri.toString(),D.uri.toString()]),z=JSON.stringify([S.id,D.id,S.getAlternativeVersionId(),D.getAlternativeVersionId(),JSON.stringify(E)]),W=C.diffCache.get(R);if(W&&W.context===z)return W.result;const $=P.W.create(),Q=await this.editorWorkerService.computeDiff(S.uri,D.uri,E,this.diffAlgorithm),q=$.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:q,timedOut:Q?.quitEarly??!0,detectedMoves:E.computeMoves?Q?.moves.length??0:-1}),B.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!Q)throw new Error("no diff result available");return C.diffCache.size>10&&C.diffCache.delete(C.diffCache.keys().next().value),C.diffCache.set(R,{result:Q,context:z}),Q}setOptions(S){let D=!1;S.diffAlgorithm&&this.diffAlgorithm!==S.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription?.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=S.diffAlgorithm,typeof S.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=S.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),D=!0),D&&this.onDidChangeEventEmitter.fire()}};d=C=I([b(1,O.IEditorWorkerService),b(2,A.k)],d)},86968:(Mt,He,c)=>{c.d(He,{CO:()=>C,WR:()=>I,mF:()=>A});var u=c(6105),G=c(87856),U=c(69504),P=c(88935),M=c(43228);class w{constructor(d){this.text=d,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let m=0;m<d.length;m++)d.charAt(m)===`
`&&this.lineStartOffsetByLineIdx.push(m+1)}getOffset(d){return this.lineStartOffsetByLineIdx[d.lineNumber-1]+d.column-1}getOffsetRange(d){return new P.L(this.getOffset(d.getStartPosition()),this.getOffset(d.getEndPosition()))}get textLength(){const d=this.lineStartOffsetByLineIdx.length-1;return new M.W(d,this.text.length-this.lineStartOffsetByLineIdx[d])}}var O=c(98414);class A{constructor(d){this.edits=d,(0,u.Ft)(()=>(0,u.Xo)(d,(m,S)=>m.range.getEndPosition().isBeforeOrEqual(S.range.getStartPosition())))}apply(d){let m="",S=new U.y(1,1);for(const E of this.edits){const B=E.range,R=B.getStartPosition(),z=B.getEndPosition(),W=b(S,R);W.isEmpty()||(m+=d.getValueOfRange(W)),m+=E.text,S=z}const D=b(S,d.endPositionExclusive);return D.isEmpty()||(m+=d.getValueOfRange(D)),m}applyToString(d){const m=new v(d);return this.apply(m)}getNewRanges(){const d=[];let m=0,S=0,D=0;for(const E of this.edits){const B=M.W.ofText(E.text),R=U.y.lift({lineNumber:E.range.startLineNumber+S,column:E.range.startColumn+(E.range.startLineNumber===m?D:0)}),z=B.createRange(R);d.push(z),S=z.endLineNumber-E.range.endLineNumber,D=z.endColumn-E.range.endColumn,m=E.range.endLineNumber}return d}}class I{constructor(d,m){this.range=d,this.text=m}toSingleEditOperation(){return{range:this.range,text:this.text}}}function b(_,d){if(_.lineNumber===d.lineNumber&&_.column===Number.MAX_SAFE_INTEGER)return O.Q.fromPositions(d,d);if(!_.isBeforeOrEqual(d))throw new G.D7("start must be before end");return new O.Q(_.lineNumber,_.column,d.lineNumber,d.column)}class C{get endPositionExclusive(){return this.length.addToPosition(new U.y(1,1))}}class v extends C{constructor(d){super(),this.value=d,this._t=new w(this.value)}getValueOfRange(d){return this._t.getOffsetRange(d).substring(this.value)}get length(){return this._t.textLength}}},87207:(Mt,He,c)=>{c.d(He,{D:()=>u});class u{static capture(U){if(U.getScrollTop()===0||U.hasPendingScrollAnimation())return new u(U.getScrollTop(),U.getContentHeight(),null,0,null);let P=null,M=0;const w=U.getVisibleRanges();if(w.length>0){P=w[0].getStartPosition();const O=U.getTopForPosition(P.lineNumber,P.column);M=U.getScrollTop()-O}return new u(U.getScrollTop(),U.getContentHeight(),P,M,U.getPosition())}constructor(U,P,M,w,O){this._initialScrollTop=U,this._initialContentHeight=P,this._visiblePosition=M,this._visiblePositionScrollDelta=w,this._cursorPosition=O}restore(U){if(!(this._initialContentHeight===U.getContentHeight()&&this._initialScrollTop===U.getScrollTop())&&this._visiblePosition){const P=U.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);U.setScrollTop(P+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(U){if(this._initialContentHeight===U.getContentHeight()&&this._initialScrollTop===U.getScrollTop())return;const P=U.getPosition();if(!this._cursorPosition||!P)return;const M=U.getTopForLineNumber(P.lineNumber)-U.getTopForLineNumber(this._cursorPosition.lineNumber);U.setScrollTop(U.getScrollTop()+M,1)}}},87386:(Mt,He,c)=>{c.d(He,{b:()=>G});var u=c(81545);const G=(0,u.u1)("keybindingService")},87856:(Mt,He,c)=>{c.d(He,{AL:()=>A,D7:()=>d,EM:()=>v,MB:()=>O,M_:()=>P,Qg:()=>b,aD:()=>I,cU:()=>M,dz:()=>U,iH:()=>C});class u{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(S){setTimeout(()=>{throw S.stack?_.isErrorNoTelemetry(S)?new _(S.message+`

`+S.stack):new Error(S.message+`

`+S.stack):S},0)}}emit(S){this.listeners.forEach(D=>{D(S)})}onUnexpectedError(S){this.unexpectedErrorHandler(S),this.emit(S)}onUnexpectedExternalError(S){this.unexpectedErrorHandler(S)}}const G=new u;function U(m){O(m)||G.onUnexpectedError(m)}function P(m){O(m)||G.onUnexpectedExternalError(m)}function M(m){if(m instanceof Error){const{name:S,message:D}=m,E=m.stacktrace||m.stack;return{$isError:!0,name:S,message:D,stack:E,noTelemetry:_.isErrorNoTelemetry(m)}}return m}const w="Canceled";function O(m){return m instanceof A?!0:m instanceof Error&&m.name===w&&m.message===w}class A extends Error{constructor(){super(w),this.name=this.message}}function I(){const m=new Error(w);return m.name=m.message,m}function b(m){return m?new Error(`Illegal argument: ${m}`):new Error("Illegal argument")}function C(m){return m?new Error(`Illegal state: ${m}`):new Error("Illegal state")}class v extends Error{constructor(S){super("NotSupported"),S&&(this.message=S)}}class _ extends Error{constructor(S){super(S),this.name="CodeExpectedError"}static fromError(S){if(S instanceof _)return S;const D=new _;return D.message=S.message,D.stack=S.stack,D}static isErrorNoTelemetry(S){return S.name==="CodeExpectedError"}}class d extends Error{constructor(S){super(S||"An unexpected bug occurred."),Object.setPrototypeOf(this,d.prototype)}}},88238:(Mt,He,c)=>{c.d(He,{Fd:()=>M,aJ:()=>P});var u=c(93009),G=c(60599),U=c(39642),P;(function(O){O[O.PRESERVE=0]="PRESERVE",O[O.LAST=1]="LAST"})(P||(P={}));const M={Quickaccess:"workbench.contributions.quickaccess"};class w{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(A){return A.prefix.length===0?this.defaultProvider=A:this.providers.push(A),this.providers.sort((I,b)=>b.prefix.length-I.prefix.length),(0,G.s)(()=>{this.providers.splice(this.providers.indexOf(A),1),this.defaultProvider===A&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return(0,u.Yc)([this.defaultProvider,...this.providers])}getQuickAccessProvider(A){return A&&this.providers.find(b=>A.startsWith(b.prefix))||void 0||this.defaultProvider}}U.O.add(M.Quickaccess,new w)},88360:(Mt,He,c)=>{c.d(He,{PE:()=>Oi,aG:()=>Ii,er:()=>os,YD:()=>ei,zL:()=>vs,Nf:()=>dn,cH:()=>Dn});var u=c(31938),G=c(93009),U=c(46204),P=c(56491),M=c(60599),w=c(84546);class O{get templateId(){return this.renderer.templateId}constructor(le,Be){this.renderer=le,this.modelProvider=Be}renderTemplate(le){return{data:this.renderer.renderTemplate(le),disposable:M.jG.None}}renderElement(le,Be,ht,Ft){if(ht.disposable?.dispose(),!ht.data)return;const Ot=this.modelProvider();if(Ot.isResolved(le))return this.renderer.renderElement(Ot.get(le),le,ht.data,Ft);const qt=new U.Qi,Si=Ot.resolve(le,qt.token);ht.disposable={dispose:()=>qt.cancel()},this.renderer.renderPlaceholder(le,ht.data),Si.then(mi=>this.renderer.renderElement(mi,le,ht.data,Ft))}disposeTemplate(le){le.disposable&&(le.disposable.dispose(),le.disposable=void 0),le.data&&(this.renderer.disposeTemplate(le.data),le.data=void 0)}}class A{constructor(le,Be){this.modelProvider=le,this.accessibilityProvider=Be}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(le){const Be=this.modelProvider();return Be.isResolved(le)?this.accessibilityProvider.getAriaLabel(Be.get(le)):null}}function I(zt,le){return{...le,accessibilityProvider:le.accessibilityProvider&&new A(zt,le.accessibilityProvider)}}class b{constructor(le,Be,ht,Ft,Ot={}){const qt=()=>this.model,Si=Ft.map(mi=>new O(mi,qt));this.list=new w.B8(le,Be,ht,Si,I(qt,Ot))}updateOptions(le){this.list.updateOptions(le)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return P.Jh.map(this.list.onMouseDblClick,({element:le,index:Be,browserEvent:ht})=>({element:le===void 0?void 0:this._model.get(le),index:Be,browserEvent:ht}))}get onPointer(){return P.Jh.map(this.list.onPointer,({element:le,index:Be,browserEvent:ht})=>({element:le===void 0?void 0:this._model.get(le),index:Be,browserEvent:ht}))}get onDidChangeSelection(){return P.Jh.map(this.list.onDidChangeSelection,({elements:le,indexes:Be,browserEvent:ht})=>({elements:le.map(Ft=>this._model.get(Ft)),indexes:Be,browserEvent:ht}))}get model(){return this._model}set model(le){this._model=le,this.list.splice(0,this.list.length,(0,G.y1)(le.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(le=>this.model.get(le))}style(le){this.list.style(le)}dispose(){this.list.dispose()}}var C=c(91779),v=c(15903),_=c(39118);class d{static{this.TemplateId="row"}constructor(le,Be,ht){this.columns=le,this.getColumnSize=ht,this.templateId=d.TemplateId,this.renderedTemplates=new Set;const Ft=new Map(Be.map(Ot=>[Ot.templateId,Ot]));this.renderers=[];for(const Ot of le){const qt=Ft.get(Ot.templateId);if(!qt)throw new Error(`Table cell renderer for template id ${Ot.templateId} not found.`);this.renderers.push(qt)}}renderTemplate(le){const Be=(0,u.BC)(le,(0,u.$)(".monaco-table-tr")),ht=[],Ft=[];for(let qt=0;qt<this.columns.length;qt++){const Si=this.renderers[qt],mi=(0,u.BC)(Be,(0,u.$)(".monaco-table-td",{"data-col-index":qt}));mi.style.width=`${this.getColumnSize(qt)}px`,ht.push(mi),Ft.push(Si.renderTemplate(mi))}const Ot={container:le,cellContainers:ht,cellTemplateData:Ft};return this.renderedTemplates.add(Ot),Ot}renderElement(le,Be,ht,Ft){for(let Ot=0;Ot<this.columns.length;Ot++){const Si=this.columns[Ot].project(le);this.renderers[Ot].renderElement(Si,Be,ht.cellTemplateData[Ot],Ft)}}disposeElement(le,Be,ht,Ft){for(let Ot=0;Ot<this.columns.length;Ot++){const qt=this.renderers[Ot];if(qt.disposeElement){const mi=this.columns[Ot].project(le);qt.disposeElement(mi,Be,ht.cellTemplateData[Ot],Ft)}}}disposeTemplate(le){for(let Be=0;Be<this.columns.length;Be++)this.renderers[Be].disposeTemplate(le.cellTemplateData[Be]);(0,u.w_)(le.container),this.renderedTemplates.delete(le)}layoutColumn(le,Be){for(const{cellContainers:ht}of this.renderedTemplates)ht[le].style.width=`${Be}px`}}function m(zt){return{getHeight(le){return zt.getHeight(le)},getTemplateId(){return d.TemplateId}}}class S extends M.jG{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??P.Jh.None}constructor(le,Be){super(),this.column=le,this.index=Be,this._onDidLayout=new P.vl,this.onDidLayout=this._onDidLayout.event,this.element=(0,u.$)(".monaco-table-th",{"data-col-index":Be},le.label),le.tooltip&&this._register((0,C.i)().setupManagedHover((0,v.nZ)("mouse"),this.element,le.tooltip))}layout(le){this._onDidLayout.fire([this.index,le])}}class D{static{this.InstanceCount=0}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(le){this.list.scrollTop=le}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(le,Be,ht,Ft,Ot,qt){this.virtualDelegate=ht,this.columns=Ft,this.domId=`table_id_${++D.InstanceCount}`,this.disposables=new M.Cm,this.cachedWidth=0,this.cachedHeight=0,this.domNode=(0,u.BC)(Be,(0,u.$)(`.monaco-table.${this.domId}`));const Si=Ft.map((Wi,Ei)=>this.disposables.add(new S(Wi,Ei))),mi={size:Si.reduce((Wi,Ei)=>Wi+Ei.column.weight,0),views:Si.map(Wi=>({size:Wi.column.weight,view:Wi}))};this.splitview=this.disposables.add(new _.U(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:mi})),this.splitview.el.style.height=`${ht.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${ht.headerRowHeight}px`;const qi=new d(Ft,Ot,Wi=>this.splitview.getViewSize(Wi));this.list=this.disposables.add(new w.B8(le,this.domNode,m(ht),[qi],qt)),P.Jh.any(...Si.map(Wi=>Wi.onDidLayout))(([Wi,Ei])=>qi.layoutColumn(Wi,Ei),null,this.disposables),this.splitview.onDidSashReset(Wi=>{const Ei=Ft.reduce((on,an)=>on+an.weight,0),Qi=Ft[Wi].weight/Ei*this.cachedWidth;this.splitview.resizeView(Wi,Qi)},null,this.disposables),this.styleElement=(0,u.li)(this.domNode),this.style(w.bG)}updateOptions(le){this.list.updateOptions(le)}splice(le,Be,ht=[]){this.list.splice(le,Be,ht)}getHTMLElement(){return this.domNode}style(le){const Be=[];Be.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=Be.join(`
`),this.list.style(le)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}var E=c(35946),B=c(63074),R=c(51473),z=c(37852),W=c(13697);class ${constructor(le,Be,ht={}){this.user=le,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new R.G6(le,Be,null,ht),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,ht.sorter&&(this.sorter={compare(Ft,Ot){return ht.sorter.compare(Ft.element,Ot.element)}}),this.identityProvider=ht.identityProvider}setChildren(le,Be=W.f.empty(),ht={}){const Ft=this.getElementLocation(le);this._setChildren(Ft,this.preserveCollapseState(Be),ht)}_setChildren(le,Be=W.f.empty(),ht){const Ft=new Set,Ot=new Set,qt=mi=>{if(mi.element===null)return;const qi=mi;if(Ft.add(qi.element),this.nodes.set(qi.element,qi),this.identityProvider){const Wi=this.identityProvider.getId(qi.element).toString();Ot.add(Wi),this.nodesByIdentity.set(Wi,qi)}ht.onDidCreateNode?.(qi)},Si=mi=>{if(mi.element===null)return;const qi=mi;if(Ft.has(qi.element)||this.nodes.delete(qi.element),this.identityProvider){const Wi=this.identityProvider.getId(qi.element).toString();Ot.has(Wi)||this.nodesByIdentity.delete(Wi)}ht.onDidDeleteNode?.(qi)};this.model.splice([...le,0],Number.MAX_VALUE,Be,{...ht,onDidCreateNode:qt,onDidDeleteNode:Si})}preserveCollapseState(le=W.f.empty()){return this.sorter&&(le=[...le].sort(this.sorter.compare.bind(this.sorter))),W.f.map(le,Be=>{let ht=this.nodes.get(Be.element);if(!ht&&this.identityProvider){const qt=this.identityProvider.getId(Be.element).toString();ht=this.nodesByIdentity.get(qt)}if(!ht){let qt;return typeof Be.collapsed>"u"?qt=void 0:Be.collapsed===z.Yo.Collapsed||Be.collapsed===z.Yo.PreserveOrCollapsed?qt=!0:Be.collapsed===z.Yo.Expanded||Be.collapsed===z.Yo.PreserveOrExpanded?qt=!1:qt=!!Be.collapsed,{...Be,children:this.preserveCollapseState(Be.children),collapsed:qt}}const Ft=typeof Be.collapsible=="boolean"?Be.collapsible:ht.collapsible;let Ot;return typeof Be.collapsed>"u"||Be.collapsed===z.Yo.PreserveOrCollapsed||Be.collapsed===z.Yo.PreserveOrExpanded?Ot=ht.collapsed:Be.collapsed===z.Yo.Collapsed?Ot=!0:Be.collapsed===z.Yo.Expanded?Ot=!1:Ot=!!Be.collapsed,{...Be,collapsible:Ft,collapsed:Ot,children:this.preserveCollapseState(Be.children)}})}rerender(le){const Be=this.getElementLocation(le);this.model.rerender(Be)}getFirstElementChild(le=null){const Be=this.getElementLocation(le);return this.model.getFirstElementChild(Be)}has(le){return this.nodes.has(le)}getListIndex(le){const Be=this.getElementLocation(le);return this.model.getListIndex(Be)}getListRenderCount(le){const Be=this.getElementLocation(le);return this.model.getListRenderCount(Be)}isCollapsible(le){const Be=this.getElementLocation(le);return this.model.isCollapsible(Be)}setCollapsible(le,Be){const ht=this.getElementLocation(le);return this.model.setCollapsible(ht,Be)}isCollapsed(le){const Be=this.getElementLocation(le);return this.model.isCollapsed(Be)}setCollapsed(le,Be,ht){const Ft=this.getElementLocation(le);return this.model.setCollapsed(Ft,Be,ht)}expandTo(le){const Be=this.getElementLocation(le);this.model.expandTo(Be)}refilter(){this.model.refilter()}getNode(le=null){if(le===null)return this.model.getNode(this.model.rootRef);const Be=this.nodes.get(le);if(!Be)throw new z.jh(this.user,`Tree element not found: ${le}`);return Be}getNodeLocation(le){return le.element}getParentNodeLocation(le){if(le===null)throw new z.jh(this.user,"Invalid getParentNodeLocation call");const Be=this.nodes.get(le);if(!Be)throw new z.jh(this.user,`Tree element not found: ${le}`);const ht=this.model.getNodeLocation(Be),Ft=this.model.getParentNodeLocation(ht);return this.model.getNode(Ft).element}getElementLocation(le){if(le===null)return[];const Be=this.nodes.get(le);if(!Be)throw new z.jh(this.user,`Tree element not found: ${le}`);return this.model.getNodeLocation(Be)}}function Q(zt){const le=[zt.element],Be=zt.incompressible||!1;return{element:{elements:le,incompressible:Be},children:W.f.map(W.f.from(zt.children),Q),collapsible:zt.collapsible,collapsed:zt.collapsed}}function q(zt){const le=[zt.element],Be=zt.incompressible||!1;let ht,Ft;for(;[Ft,ht]=W.f.consume(W.f.from(zt.children),2),!(Ft.length!==1||Ft[0].incompressible);)zt=Ft[0],le.push(zt.element);return{element:{elements:le,incompressible:Be},children:W.f.map(W.f.concat(Ft,ht),q),collapsible:zt.collapsible,collapsed:zt.collapsed}}function ne(zt,le=0){let Be;return le<zt.element.elements.length-1?Be=[ne(zt,le+1)]:Be=W.f.map(W.f.from(zt.children),ht=>ne(ht,0)),le===0&&zt.element.incompressible?{element:zt.element.elements[le],children:Be,incompressible:!0,collapsible:zt.collapsible,collapsed:zt.collapsed}:{element:zt.element.elements[le],children:Be,collapsible:zt.collapsible,collapsed:zt.collapsed}}function ve(zt){return ne(zt,0)}function Re(zt,le,Be){return zt.element===le?{...zt,children:Be}:{...zt,children:W.f.map(W.f.from(zt.children),ht=>Re(ht,le,Be))}}const Ae=zt=>({getId(le){return le.elements.map(Be=>zt.getId(Be).toString()).join("\0")}});class re{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(le,Be,ht={}){this.user=le,this.rootRef=null,this.nodes=new Map,this.model=new $(le,Be,ht),this.enabled=typeof ht.compressionEnabled>"u"?!0:ht.compressionEnabled,this.identityProvider=ht.identityProvider}setChildren(le,Be=W.f.empty(),ht){const Ft=ht.diffIdentityProvider&&Ae(ht.diffIdentityProvider);if(le===null){const an=W.f.map(Be,this.enabled?q:Q);this._setChildren(null,an,{diffIdentityProvider:Ft,diffDepth:1/0});return}const Ot=this.nodes.get(le);if(!Ot)throw new z.jh(this.user,"Unknown compressed tree node");const qt=this.model.getNode(Ot),Si=this.model.getParentNodeLocation(Ot),mi=this.model.getNode(Si),qi=ve(qt),Wi=Re(qi,le,Be),Ei=(this.enabled?q:Q)(Wi),Qi=ht.diffIdentityProvider?(an,Zi)=>ht.diffIdentityProvider.getId(an)===ht.diffIdentityProvider.getId(Zi):void 0;if((0,G.aI)(Ei.element.elements,qt.element.elements,Qi)){this._setChildren(Ot,Ei.children||W.f.empty(),{diffIdentityProvider:Ft,diffDepth:1});return}const on=mi.children.map(an=>an===qt?Ei:an);this._setChildren(mi.element,on,{diffIdentityProvider:Ft,diffDepth:qt.depth-mi.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(le){if(le===this.enabled)return;this.enabled=le;const ht=this.model.getNode().children,Ft=W.f.map(ht,ve),Ot=W.f.map(Ft,le?q:Q);this._setChildren(null,Ot,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(le,Be,ht){const Ft=new Set,Ot=Si=>{for(const mi of Si.element.elements)Ft.add(mi),this.nodes.set(mi,Si.element)},qt=Si=>{for(const mi of Si.element.elements)Ft.has(mi)||this.nodes.delete(mi)};this.model.setChildren(le,Be,{...ht,onDidCreateNode:Ot,onDidDeleteNode:qt})}has(le){return this.nodes.has(le)}getListIndex(le){const Be=this.getCompressedNode(le);return this.model.getListIndex(Be)}getListRenderCount(le){const Be=this.getCompressedNode(le);return this.model.getListRenderCount(Be)}getNode(le){if(typeof le>"u")return this.model.getNode();const Be=this.getCompressedNode(le);return this.model.getNode(Be)}getNodeLocation(le){const Be=this.model.getNodeLocation(le);return Be===null?null:Be.elements[Be.elements.length-1]}getParentNodeLocation(le){const Be=this.getCompressedNode(le),ht=this.model.getParentNodeLocation(Be);return ht===null?null:ht.elements[ht.elements.length-1]}getFirstElementChild(le){const Be=this.getCompressedNode(le);return this.model.getFirstElementChild(Be)}isCollapsible(le){const Be=this.getCompressedNode(le);return this.model.isCollapsible(Be)}setCollapsible(le,Be){const ht=this.getCompressedNode(le);return this.model.setCollapsible(ht,Be)}isCollapsed(le){const Be=this.getCompressedNode(le);return this.model.isCollapsed(Be)}setCollapsed(le,Be,ht){const Ft=this.getCompressedNode(le);return this.model.setCollapsed(Ft,Be,ht)}expandTo(le){const Be=this.getCompressedNode(le);this.model.expandTo(Be)}rerender(le){const Be=this.getCompressedNode(le);this.model.rerender(Be)}refilter(){this.model.refilter()}getCompressedNode(le){if(le===null)return null;const Be=this.nodes.get(le);if(!Be)throw new z.jh(this.user,`Tree element not found: ${le}`);return Be}}const K=zt=>zt[zt.length-1];class F{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(le=>new F(this.unwrapper,le))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(le,Be){this.unwrapper=le,this.node=Be}}function N(zt,le){return{splice(Be,ht,Ft){le.splice(Be,ht,Ft.map(Ot=>zt.map(Ot)))},updateElementHeight(Be,ht){le.updateElementHeight(Be,ht)}}}function j(zt,le){return{...le,identityProvider:le.identityProvider&&{getId(Be){return le.identityProvider.getId(zt(Be))}},sorter:le.sorter&&{compare(Be,ht){return le.sorter.compare(Be.elements[0],ht.elements[0])}},filter:le.filter&&{filter(Be,ht){return le.filter.filter(zt(Be),ht)}}}}class me{get onDidSplice(){return P.Jh.map(this.model.onDidSplice,({insertedNodes:le,deletedNodes:Be})=>({insertedNodes:le.map(ht=>this.nodeMapper.map(ht)),deletedNodes:Be.map(ht=>this.nodeMapper.map(ht))}))}get onDidChangeCollapseState(){return P.Jh.map(this.model.onDidChangeCollapseState,({node:le,deep:Be})=>({node:this.nodeMapper.map(le),deep:Be}))}get onDidChangeRenderNodeCount(){return P.Jh.map(this.model.onDidChangeRenderNodeCount,le=>this.nodeMapper.map(le))}constructor(le,Be,ht={}){this.rootRef=null,this.elementMapper=ht.elementMapper||K;const Ft=Ot=>this.elementMapper(Ot.elements);this.nodeMapper=new z.y2(Ot=>new F(Ft,Ot)),this.model=new re(le,N(this.nodeMapper,Be),j(Ft,ht))}setChildren(le,Be=W.f.empty(),ht={}){this.model.setChildren(le,Be,ht)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(le){this.model.setCompressionEnabled(le)}has(le){return this.model.has(le)}getListIndex(le){return this.model.getListIndex(le)}getListRenderCount(le){return this.model.getListRenderCount(le)}getNode(le){return this.nodeMapper.map(this.model.getNode(le))}getNodeLocation(le){return le.element}getParentNodeLocation(le){return this.model.getParentNodeLocation(le)}getFirstElementChild(le){const Be=this.model.getFirstElementChild(le);return Be===null||typeof Be>"u"?Be:this.elementMapper(Be.elements)}isCollapsible(le){return this.model.isCollapsible(le)}setCollapsible(le,Be){return this.model.setCollapsible(le,Be)}isCollapsed(le){return this.model.isCollapsed(le)}setCollapsed(le,Be,ht){return this.model.setCollapsed(le,Be,ht)}expandTo(le){return this.model.expandTo(le)}rerender(le){return this.model.rerender(le)}refilter(){return this.model.refilter()}getCompressedTreeNode(le=null){return this.model.getNode(le)}}var ce=c(77065),he=function(zt,le,Be,ht){var Ft=arguments.length,Ot=Ft<3?le:ht===null?ht=Object.getOwnPropertyDescriptor(le,Be):ht,qt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ot=Reflect.decorate(zt,le,Be,ht);else for(var Si=zt.length-1;Si>=0;Si--)(qt=zt[Si])&&(Ot=(Ft<3?qt(Ot):Ft>3?qt(le,Be,Ot):qt(le,Be))||Ot);return Ft>3&&Ot&&Object.defineProperty(le,Be,Ot),Ot};class Le extends E.DO{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(le,Be,ht,Ft,Ot={}){super(le,Be,ht,Ft,Ot),this.user=le}setChildren(le,Be=W.f.empty(),ht){this.model.setChildren(le,Be,ht)}rerender(le){if(le===void 0){this.view.rerender();return}this.model.rerender(le)}hasElement(le){return this.model.has(le)}createModel(le,Be,ht){return new $(le,Be,ht)}}class Y{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(le,Be,ht){this._compressedTreeNodeProvider=le,this.stickyScrollDelegate=Be,this.renderer=ht,this.templateId=ht.templateId,ht.onDidChangeTwistieState&&(this.onDidChangeTwistieState=ht.onDidChangeTwistieState)}renderTemplate(le){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(le)}}renderElement(le,Be,ht,Ft){let Ot=this.stickyScrollDelegate.getCompressedNode(le);Ot||(Ot=this.compressedTreeNodeProvider.getCompressedTreeNode(le.element)),Ot.element.elements.length===1?(ht.compressedTreeNode=void 0,this.renderer.renderElement(le,Be,ht.data,Ft)):(ht.compressedTreeNode=Ot,this.renderer.renderCompressedElements(Ot,Be,ht.data,Ft))}disposeElement(le,Be,ht,Ft){ht.compressedTreeNode?this.renderer.disposeCompressedElements?.(ht.compressedTreeNode,Be,ht.data,Ft):this.renderer.disposeElement?.(le,Be,ht.data,Ft)}disposeTemplate(le){this.renderer.disposeTemplate(le.data)}renderTwistie(le,Be){return this.renderer.renderTwistie?this.renderer.renderTwistie(le,Be):!1}}he([ce.B],Y.prototype,"compressedTreeNodeProvider",null);class ae{constructor(le){this.modelProvider=le,this.compressedStickyNodes=new Map}getCompressedNode(le){return this.compressedStickyNodes.get(le)}constrainStickyScrollNodes(le,Be,ht){if(this.compressedStickyNodes.clear(),le.length===0)return[];for(let Ft=0;Ft<le.length;Ft++){const Ot=le[Ft],qt=Ot.position+Ot.height;if(Ft+1<le.length&&qt+le[Ft+1].height>ht||Ft>=Be-1&&Be<le.length){const mi=le.slice(0,Ft),qi=le.slice(Ft),Wi=this.compressStickyNodes(qi);return[...mi,Wi]}}return le}compressStickyNodes(le){if(le.length===0)throw new Error("Can't compress empty sticky nodes");const Be=this.modelProvider();if(!Be.isCompressionEnabled())return le[0];const ht=[];for(let qi=0;qi<le.length;qi++){const Wi=le[qi],Ei=Be.getCompressedTreeNode(Wi.node.element);if(Ei.element){if(qi!==0&&Ei.element.incompressible)break;ht.push(...Ei.element.elements)}}if(ht.length<2)return le[0];const Ft=le[le.length-1],Ot={elements:ht,incompressible:!1},qt={...Ft.node,children:[],element:Ot},Si=new Proxy(le[0].node,{}),mi={node:Si,startIndex:le[0].startIndex,endIndex:Ft.endIndex,position:le[0].position,height:le[0].height};return this.compressedStickyNodes.set(Si,qt),mi}}function Ce(zt,le){return le&&{...le,keyboardNavigationLabelProvider:le.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(Be){let ht;try{ht=zt().getCompressedTreeNode(Be)}catch{return le.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(Be)}return ht.element.elements.length===1?le.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(Be):le.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(ht.element.elements)}}}}class Pe extends Le{constructor(le,Be,ht,Ft,Ot={}){const qt=()=>this,Si=new ae(()=>this.model),mi=Ft.map(qi=>new Y(qt,Si,qi));super(le,Be,ht,mi,{...Ce(qt,Ot),stickyScrollDelegate:Si})}setChildren(le,Be=W.f.empty(),ht){this.model.setChildren(le,Be,ht)}createModel(le,Be,ht){return new me(le,Be,ht)}updateOptions(le={}){super.updateOptions(le),typeof le.compressionEnabled<"u"&&this.model.setCompressionEnabled(le.compressionEnabled)}getCompressedTreeNode(le=null){return this.model.getCompressedTreeNode(le)}}var ye=c(37519),Ke=c(67538),qe=c(42640),Ue=c(87856),x=c(33902);function it(zt){return{...zt,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function Ze(zt,le){return le.parent?le.parent===zt?!0:Ze(zt,le.parent):!1}function _t(zt,le){return zt===le||Ze(zt,le)||Ze(le,zt)}class ot{get element(){return this.node.element.element}get children(){return this.node.children.map(le=>new ot(le))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(le){this.node=le}}class Pt{constructor(le,Be,ht){this.renderer=le,this.nodeMapper=Be,this.onDidChangeTwistieState=ht,this.renderedNodes=new Map,this.templateId=le.templateId}renderTemplate(le){return{templateData:this.renderer.renderTemplate(le)}}renderElement(le,Be,ht,Ft){this.renderer.renderElement(this.nodeMapper.map(le),Be,ht.templateData,Ft)}renderTwistie(le,Be){return le.slow?(Be.classList.add(...qe.L.asClassNameArray(Ke.W.treeItemLoading)),!0):(Be.classList.remove(...qe.L.asClassNameArray(Ke.W.treeItemLoading)),!1)}disposeElement(le,Be,ht,Ft){this.renderer.disposeElement?.(this.nodeMapper.map(le),Be,ht.templateData,Ft)}disposeTemplate(le){this.renderer.disposeTemplate(le.templateData)}dispose(){this.renderedNodes.clear()}}function Wt(zt){return{browserEvent:zt.browserEvent,elements:zt.elements.map(le=>le.element)}}function Rt(zt){return{browserEvent:zt.browserEvent,element:zt.element&&zt.element.element,target:zt.target}}class at extends B.ur{constructor(le){super(le.elements.map(Be=>Be.element)),this.data=le}}function Xe(zt){return zt instanceof B.ur?new at(zt):zt}class pe{constructor(le){this.dnd=le}getDragURI(le){return this.dnd.getDragURI(le.element)}getDragLabel(le,Be){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(le.map(ht=>ht.element),Be)}onDragStart(le,Be){this.dnd.onDragStart?.(Xe(le),Be)}onDragOver(le,Be,ht,Ft,Ot,qt=!0){return this.dnd.onDragOver(Xe(le),Be&&Be.element,ht,Ft,Ot)}drop(le,Be,ht,Ft,Ot){this.dnd.drop(Xe(le),Be&&Be.element,ht,Ft,Ot)}onDragEnd(le){this.dnd.onDragEnd?.(le)}dispose(){this.dnd.dispose()}}function te(zt){return zt&&{...zt,collapseByDefault:!0,identityProvider:zt.identityProvider&&{getId(le){return zt.identityProvider.getId(le.element)}},dnd:zt.dnd&&new pe(zt.dnd),multipleSelectionController:zt.multipleSelectionController&&{isSelectionSingleChangeEvent(le){return zt.multipleSelectionController.isSelectionSingleChangeEvent({...le,element:le.element})},isSelectionRangeChangeEvent(le){return zt.multipleSelectionController.isSelectionRangeChangeEvent({...le,element:le.element})}},accessibilityProvider:zt.accessibilityProvider&&{...zt.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:zt.accessibilityProvider.getRole?le=>zt.accessibilityProvider.getRole(le.element):()=>"treeitem",isChecked:zt.accessibilityProvider.isChecked?le=>!!zt.accessibilityProvider?.isChecked(le.element):void 0,getAriaLabel(le){return zt.accessibilityProvider.getAriaLabel(le.element)},getWidgetAriaLabel(){return zt.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:zt.accessibilityProvider.getWidgetRole?()=>zt.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:zt.accessibilityProvider.getAriaLevel&&(le=>zt.accessibilityProvider.getAriaLevel(le.element)),getActiveDescendantId:zt.accessibilityProvider.getActiveDescendantId&&(le=>zt.accessibilityProvider.getActiveDescendantId(le.element))},filter:zt.filter&&{filter(le,Be){return zt.filter.filter(le.element,Be)}},keyboardNavigationLabelProvider:zt.keyboardNavigationLabelProvider&&{...zt.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(le){return zt.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(le.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof zt.expandOnlyOnTwistieClick>"u"?void 0:typeof zt.expandOnlyOnTwistieClick!="function"?zt.expandOnlyOnTwistieClick:le=>zt.expandOnlyOnTwistieClick(le.element),defaultFindVisibility:le=>le.hasChildren&&le.stale?1:typeof zt.defaultFindVisibility=="number"?zt.defaultFindVisibility:typeof zt.defaultFindVisibility>"u"?2:zt.defaultFindVisibility(le.element)}}function oe(zt,le){le(zt),zt.children.forEach(Be=>oe(Be,le))}class Te{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return P.Jh.map(this.tree.onDidChangeFocus,Wt)}get onDidChangeSelection(){return P.Jh.map(this.tree.onDidChangeSelection,Wt)}get onMouseDblClick(){return P.Jh.map(this.tree.onMouseDblClick,Rt)}get onPointer(){return P.Jh.map(this.tree.onPointer,Rt)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(le,Be,ht,Ft,Ot,qt={}){this.user=le,this.dataSource=Ot,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new P.vl,this._onDidChangeNodeSlowState=new P.vl,this.nodeMapper=new z.y2(Si=>new ot(Si)),this.disposables=new M.Cm,this.identityProvider=qt.identityProvider,this.autoExpandSingleChildren=typeof qt.autoExpandSingleChildren>"u"?!1:qt.autoExpandSingleChildren,this.sorter=qt.sorter,this.getDefaultCollapseState=Si=>qt.collapseByDefault?qt.collapseByDefault(Si)?z.Yo.PreserveOrCollapsed:z.Yo.PreserveOrExpanded:void 0,this.tree=this.createTree(le,Be,ht,Ft,qt),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=it({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(le,Be,ht,Ft,Ot){const qt=new E.w0(ht),Si=Ft.map(qi=>new Pt(qi,this.nodeMapper,this._onDidChangeNodeSlowState.event)),mi=te(Ot)||{};return new Le(le,Be,qt,Si,mi)}updateOptions(le={}){this.tree.updateOptions(le)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(le){this.tree.scrollTop=le}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(le,Be){this.tree.layout(le,Be)}style(le){this.tree.style(le)}getInput(){return this.root.element}async setInput(le,Be){this.refreshPromises.forEach(Ft=>Ft.cancel()),this.refreshPromises.clear(),this.root.element=le;const ht=Be&&{viewState:Be,focus:[],selection:[]};await this._updateChildren(le,!0,!1,ht),ht&&(this.tree.setFocus(ht.focus),this.tree.setSelection(ht.selection)),Be&&typeof Be.scrollTop=="number"&&(this.scrollTop=Be.scrollTop)}async _updateChildren(le=this.root.element,Be=!0,ht=!1,Ft,Ot){if(typeof this.root.element>"u")throw new z.jh(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await P.Jh.toPromise(this._onDidRender.event));const qt=this.getDataNode(le);if(await this.refreshAndRenderNode(qt,Be,Ft,Ot),ht)try{this.tree.rerender(qt)}catch{}}rerender(le){if(le===void 0||le===this.root.element){this.tree.rerender();return}const Be=this.getDataNode(le);this.tree.rerender(Be)}getNode(le=this.root.element){const Be=this.getDataNode(le),ht=this.tree.getNode(Be===this.root?null:Be);return this.nodeMapper.map(ht)}collapse(le,Be=!1){const ht=this.getDataNode(le);return this.tree.collapse(ht===this.root?null:ht,Be)}async expand(le,Be=!1){if(typeof this.root.element>"u")throw new z.jh(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await P.Jh.toPromise(this._onDidRender.event));const ht=this.getDataNode(le);if(this.tree.hasElement(ht)&&!this.tree.isCollapsible(ht)||(ht.refreshPromise&&(await this.root.refreshPromise,await P.Jh.toPromise(this._onDidRender.event)),ht!==this.root&&!ht.refreshPromise&&!this.tree.isCollapsed(ht)))return!1;const Ft=this.tree.expand(ht===this.root?null:ht,Be);return ht.refreshPromise&&(await this.root.refreshPromise,await P.Jh.toPromise(this._onDidRender.event)),Ft}setSelection(le,Be){const ht=le.map(Ft=>this.getDataNode(Ft));this.tree.setSelection(ht,Be)}getSelection(){return this.tree.getSelection().map(Be=>Be.element)}setFocus(le,Be){const ht=le.map(Ft=>this.getDataNode(Ft));this.tree.setFocus(ht,Be)}getFocus(){return this.tree.getFocus().map(Be=>Be.element)}reveal(le,Be){this.tree.reveal(this.getDataNode(le),Be)}getParentElement(le){const Be=this.tree.getParentElement(this.getDataNode(le));return Be&&Be.element}getFirstElementChild(le=this.root.element){const Be=this.getDataNode(le),ht=this.tree.getFirstElementChild(Be===this.root?null:Be);return ht&&ht.element}getDataNode(le){const Be=this.nodes.get(le===this.root.element?null:le);if(!Be)throw new z.jh(this.user,`Data tree node not found: ${le}`);return Be}async refreshAndRenderNode(le,Be,ht,Ft){await this.refreshNode(le,Be,ht),!this.disposables.isDisposed&&this.render(le,ht,Ft)}async refreshNode(le,Be,ht){let Ft;if(this.subTreeRefreshPromises.forEach((Ot,qt)=>{!Ft&&_t(qt,le)&&(Ft=Ot.then(()=>this.refreshNode(le,Be,ht)))}),Ft)return Ft;if(le!==this.root&&this.tree.getNode(le).collapsed){le.hasChildren=!!this.dataSource.hasChildren(le.element),le.stale=!0,this.setChildren(le,[],Be,ht);return}return this.doRefreshSubTree(le,Be,ht)}async doRefreshSubTree(le,Be,ht){let Ft;le.refreshPromise=new Promise(Ot=>Ft=Ot),this.subTreeRefreshPromises.set(le,le.refreshPromise),le.refreshPromise.finally(()=>{le.refreshPromise=void 0,this.subTreeRefreshPromises.delete(le)});try{const Ot=await this.doRefreshNode(le,Be,ht);le.stale=!1,await ye.HC.settled(Ot.map(qt=>this.doRefreshSubTree(qt,Be,ht)))}finally{Ft()}}async doRefreshNode(le,Be,ht){le.hasChildren=!!this.dataSource.hasChildren(le.element);let Ft;if(!le.hasChildren)Ft=Promise.resolve(W.f.empty());else{const Ot=this.doGetChildren(le);if((0,x.xZ)(Ot))Ft=Promise.resolve(Ot);else{const qt=(0,ye.wR)(800);qt.then(()=>{le.slow=!0,this._onDidChangeNodeSlowState.fire(le)},Si=>null),Ft=Ot.finally(()=>qt.cancel())}}try{const Ot=await Ft;return this.setChildren(le,Ot,Be,ht)}catch(Ot){if(le!==this.root&&this.tree.hasElement(le)&&this.tree.collapse(le),(0,Ue.MB)(Ot))return[];throw Ot}finally{le.slow&&(le.slow=!1,this._onDidChangeNodeSlowState.fire(le))}}doGetChildren(le){let Be=this.refreshPromises.get(le);if(Be)return Be;const ht=this.dataSource.getChildren(le.element);return(0,x.xZ)(ht)?this.processChildren(ht):(Be=(0,ye.SS)(async()=>this.processChildren(await ht)),this.refreshPromises.set(le,Be),Be.finally(()=>{this.refreshPromises.delete(le)}))}_onDidChangeCollapseState({node:le,deep:Be}){le.element!==null&&!le.collapsed&&le.element.stale&&(Be?this.collapse(le.element.element):this.refreshAndRenderNode(le.element,!1).catch(Ue.dz))}setChildren(le,Be,ht,Ft){const Ot=[...Be];if(le.children.length===0&&Ot.length===0)return[];const qt=new Map,Si=new Map;for(const Wi of le.children)qt.set(Wi.element,Wi),this.identityProvider&&Si.set(Wi.id,{node:Wi,collapsed:this.tree.hasElement(Wi)&&this.tree.isCollapsed(Wi)});const mi=[],qi=Ot.map(Wi=>{const Ei=!!this.dataSource.hasChildren(Wi);if(!this.identityProvider){const Zi=it({element:Wi,parent:le,hasChildren:Ei,defaultCollapseState:this.getDefaultCollapseState(Wi)});return Ei&&Zi.defaultCollapseState===z.Yo.PreserveOrExpanded&&mi.push(Zi),Zi}const Qi=this.identityProvider.getId(Wi).toString(),on=Si.get(Qi);if(on){const Zi=on.node;return qt.delete(Zi.element),this.nodes.delete(Zi.element),this.nodes.set(Wi,Zi),Zi.element=Wi,Zi.hasChildren=Ei,ht?on.collapsed?(Zi.children.forEach(Et=>oe(Et,_e=>this.nodes.delete(_e.element))),Zi.children.splice(0,Zi.children.length),Zi.stale=!0):mi.push(Zi):Ei&&!on.collapsed&&mi.push(Zi),Zi}const an=it({element:Wi,parent:le,id:Qi,hasChildren:Ei,defaultCollapseState:this.getDefaultCollapseState(Wi)});return Ft&&Ft.viewState.focus&&Ft.viewState.focus.indexOf(Qi)>-1&&Ft.focus.push(an),Ft&&Ft.viewState.selection&&Ft.viewState.selection.indexOf(Qi)>-1&&Ft.selection.push(an),(Ft&&Ft.viewState.expanded&&Ft.viewState.expanded.indexOf(Qi)>-1||Ei&&an.defaultCollapseState===z.Yo.PreserveOrExpanded)&&mi.push(an),an});for(const Wi of qt.values())oe(Wi,Ei=>this.nodes.delete(Ei.element));for(const Wi of qi)this.nodes.set(Wi.element,Wi);return le.children.splice(0,le.children.length,...qi),le!==this.root&&this.autoExpandSingleChildren&&qi.length===1&&mi.length===0&&(qi[0].forceExpanded=!0,mi.push(qi[0])),mi}render(le,Be,ht){const Ft=le.children.map(qt=>this.asTreeElement(qt,Be)),Ot=ht&&{...ht,diffIdentityProvider:ht.diffIdentityProvider&&{getId(qt){return ht.diffIdentityProvider.getId(qt.element)}}};this.tree.setChildren(le===this.root?null:le,Ft,Ot),le!==this.root&&this.tree.setCollapsible(le,le.hasChildren),this._onDidRender.fire()}asTreeElement(le,Be){if(le.stale)return{element:le,collapsible:le.hasChildren,collapsed:!0};let ht;return Be&&Be.viewState.expanded&&le.id&&Be.viewState.expanded.indexOf(le.id)>-1?ht=!1:le.forceExpanded?(ht=!1,le.forceExpanded=!1):ht=le.defaultCollapseState,{element:le,children:le.hasChildren?W.f.map(le.children,Ft=>this.asTreeElement(Ft,Be)):[],collapsible:le.hasChildren,collapsed:ht}}processChildren(le){return this.sorter&&(le=[...le].sort(this.sorter.compare.bind(this.sorter))),le}dispose(){this.disposables.dispose(),this.tree.dispose()}}class Ve{get element(){return{elements:this.node.element.elements.map(le=>le.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(le=>new Ve(le))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(le){this.node=le}}class We{constructor(le,Be,ht,Ft){this.renderer=le,this.nodeMapper=Be,this.compressibleNodeMapperProvider=ht,this.onDidChangeTwistieState=Ft,this.renderedNodes=new Map,this.disposables=[],this.templateId=le.templateId}renderTemplate(le){return{templateData:this.renderer.renderTemplate(le)}}renderElement(le,Be,ht,Ft){this.renderer.renderElement(this.nodeMapper.map(le),Be,ht.templateData,Ft)}renderCompressedElements(le,Be,ht,Ft){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(le),Be,ht.templateData,Ft)}renderTwistie(le,Be){return le.slow?(Be.classList.add(...qe.L.asClassNameArray(Ke.W.treeItemLoading)),!0):(Be.classList.remove(...qe.L.asClassNameArray(Ke.W.treeItemLoading)),!1)}disposeElement(le,Be,ht,Ft){this.renderer.disposeElement?.(this.nodeMapper.map(le),Be,ht.templateData,Ft)}disposeCompressedElements(le,Be,ht,Ft){this.renderer.disposeCompressedElements?.(this.compressibleNodeMapperProvider().map(le),Be,ht.templateData,Ft)}disposeTemplate(le){this.renderer.disposeTemplate(le.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=(0,M.AS)(this.disposables)}}function dt(zt){const le=zt&&te(zt);return le&&{...le,keyboardNavigationLabelProvider:le.keyboardNavigationLabelProvider&&{...le.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(Be){return zt.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(Be.map(ht=>ht.element))}}}}class Ye extends Te{constructor(le,Be,ht,Ft,Ot,qt,Si={}){super(le,Be,ht,Ot,qt,Si),this.compressionDelegate=Ft,this.compressibleNodeMapper=new z.y2(mi=>new Ve(mi)),this.filter=Si.filter}createTree(le,Be,ht,Ft,Ot){const qt=new E.w0(ht),Si=Ft.map(qi=>new We(qi,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),mi=dt(Ot)||{};return new Pe(le,Be,qt,Si,mi)}asTreeElement(le,Be){return{incompressible:this.compressionDelegate.isIncompressible(le.element),...super.asTreeElement(le,Be)}}updateOptions(le={}){this.tree.updateOptions(le)}render(le,Be,ht){if(!this.identityProvider)return super.render(le,Be);const Ft=on=>this.identityProvider.getId(on).toString(),Ot=on=>{const an=new Set;for(const Zi of on){const Et=this.tree.getCompressedTreeNode(Zi===this.root?null:Zi);if(Et.element)for(const _e of Et.element.elements)an.add(Ft(_e.element))}return an},qt=Ot(this.tree.getSelection()),Si=Ot(this.tree.getFocus());super.render(le,Be,ht);const mi=this.getSelection();let qi=!1;const Wi=this.getFocus();let Ei=!1;const Qi=on=>{const an=on.element;if(an)for(let Zi=0;Zi<an.elements.length;Zi++){const Et=Ft(an.elements[Zi].element),_e=an.elements[an.elements.length-1].element;qt.has(Et)&&mi.indexOf(_e)===-1&&(mi.push(_e),qi=!0),Si.has(Et)&&Wi.indexOf(_e)===-1&&(Wi.push(_e),Ei=!0)}on.children.forEach(Qi)};Qi(this.tree.getCompressedTreeNode(le===this.root?null:le)),qi&&this.setSelection(mi),Ei&&this.setFocus(Wi)}processChildren(le){return this.filter&&(le=W.f.filter(le,Be=>{const ht=this.filter.filter(Be,1),Ft=mt(ht);if(Ft===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return Ft===1})),super.processChildren(le)}}function mt(zt){return typeof zt=="boolean"?zt?1:0:(0,R.iZ)(zt)?(0,R.Mn)(zt.visibility):(0,R.Mn)(zt)}class Dt extends E.DO{constructor(le,Be,ht,Ft,Ot,qt={}){super(le,Be,ht,Ft,qt),this.user=le,this.dataSource=Ot,this.identityProvider=qt.identityProvider}createModel(le,Be,ht){return new $(le,Be,ht)}}var Se=c(45573),we=c(54752),Xt=c(96523),ri=c(25894),ke=c(4977),Z=c(4879),Fe=c(81545),pt=c(87386),et=c(39642),Zt=c(7285),bi=function(zt,le,Be,ht){var Ft=arguments.length,Ot=Ft<3?le:ht===null?ht=Object.getOwnPropertyDescriptor(le,Be):ht,qt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ot=Reflect.decorate(zt,le,Be,ht);else for(var Si=zt.length-1;Si>=0;Si--)(qt=zt[Si])&&(Ot=(Ft<3?qt(Ot):Ft>3?qt(le,Be,Ot):qt(le,Be))||Ot);return Ft>3&&Ot&&Object.defineProperty(le,Be,Ot),Ot},ci=function(zt,le){return function(Be,ht){le(Be,ht,zt)}};const Oi=(0,Fe.u1)("listService");class Ii{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new M.Cm,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(le){le!==this._lastFocusedWidget&&(this._lastFocusedWidget?.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=le,this._lastFocusedWidget?.getHTMLElement().classList.add("last-focused"))}register(le,Be){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new w.hb((0,u.li)(),"").style(Zt.IN)),this.lists.some(Ft=>Ft.widget===le))throw new Error("Cannot register the same widget multiple times");const ht={widget:le,extraContextKeys:Be};return this.lists.push(ht),(0,u.X7)(le.getHTMLElement())&&this.setLastFocusedList(le),(0,M.qE)(le.onDidFocus(()=>this.setLastFocusedList(le)),(0,M.s)(()=>this.lists.splice(this.lists.indexOf(ht),1)),le.onDidDispose(()=>{this.lists=this.lists.filter(Ft=>Ft!==ht),this._lastFocusedWidget===le&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const yi=new ri.N1("listScrollAtBoundary","none"),Vt=ri.M$.or(yi.isEqualTo("top"),yi.isEqualTo("both")),_n=ri.M$.or(yi.isEqualTo("bottom"),yi.isEqualTo("both")),oi=new ri.N1("listFocus",!0),Ne=new ri.N1("treestickyScrollFocused",!1),gt=new ri.N1("listSupportsMultiselect",!0),ei=ri.M$.and(oi,ri.M$.not(ke.aV),Ne.negate()),ai=new ri.N1("listHasSelectionOrFocus",!1),Ci=new ri.N1("listDoubleSelection",!1),wi=new ri.N1("listMultiSelection",!1),ji=new ri.N1("listSelectionNavigation",!1),Di=new ri.N1("listSupportsFind",!0),dn=new ri.N1("treeElementCanCollapse",!1),nn=new ri.N1("treeElementHasParent",!1),Dn=new ri.N1("treeElementCanExpand",!1),Mi=new ri.N1("treeElementHasChild",!1),Zn=new ri.N1("treeFindOpen",!1),us="listTypeNavigationMode",xs="listAutomaticKeyboardNavigation";function Wn(zt,le){const Be=zt.createScoped(le.getHTMLElement());return oi.bindTo(Be),Be}function Rn(zt,le){const Be=yi.bindTo(zt),ht=()=>{const Ft=le.scrollTop===0,Ot=le.scrollHeight-le.renderHeight-le.scrollTop<1;Ft&&Ot?Be.set("both"):Ft?Be.set("top"):Ot?Be.set("bottom"):Be.set("none")};return ht(),le.onDidScroll(ht)}const Bn="workbench.list.multiSelectModifier",ws="workbench.list.openMode",Ln="workbench.list.horizontalScrolling",Qn="workbench.list.defaultFindMode",hi="workbench.list.typeNavigationMode",vt="workbench.list.keyboardNavigation",ui="workbench.list.scrollByPage",wt="workbench.list.defaultFindMatchType",In="workbench.tree.indent",Ki="workbench.tree.renderIndentGuides",Tt="workbench.list.smoothScrolling",$i="workbench.list.mouseWheelScrollSensitivity",St="workbench.list.fastScrollSensitivity",yt="workbench.tree.expandMode",Yt="workbench.tree.enableStickyScroll",ii="workbench.tree.stickyScrollMaxItemCount";function Li(zt){return zt.getValue(Bn)==="alt"}class Bi extends M.jG{constructor(le){super(),this.configurationService=le,this.useAltAsMultipleSelectionModifier=Li(le),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(le=>{le.affectsConfiguration(Bn)&&(this.useAltAsMultipleSelectionModifier=Li(this.configurationService))}))}isSelectionSingleChangeEvent(le){return this.useAltAsMultipleSelectionModifier?le.browserEvent.altKey:(0,w.tX)(le)}isSelectionRangeChangeEvent(le){return(0,w.mh)(le)}}function Pi(zt,le){const Be=zt.get(we.pG),ht=zt.get(pt.b),Ft=new M.Cm;return[{...le,keyboardNavigationDelegate:{mightProducePrintableCharacter(qt){return ht.mightProducePrintableCharacter(qt)}},smoothScrolling:!!Be.getValue(Tt),mouseWheelScrollSensitivity:Be.getValue($i),fastScrollSensitivity:Be.getValue(St),multipleSelectionController:le.multipleSelectionController??Ft.add(new Bi(Be)),keyboardNavigationEventFilter:Mn(ht),scrollByPage:!!Be.getValue(ui)},Ft]}let un=class extends w.B8{constructor(le,Be,ht,Ft,Ot,qt,Si,mi,qi){const Wi=typeof Ot.horizontalScrolling<"u"?Ot.horizontalScrolling:!!mi.getValue(Ln),[Ei,Qi]=qi.invokeFunction(Pi,Ot);super(le,Be,ht,Ft,{keyboardSupport:!1,...Ei,horizontalScrolling:Wi}),this.disposables.add(Qi),this.contextKeyService=Wn(qt,this),this.disposables.add(Rn(this.contextKeyService,this)),this.listSupportsMultiSelect=gt.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(Ot.multipleSelectionSupport!==!1),ji.bindTo(this.contextKeyService).set(!!Ot.selectionNavigation),this.listHasSelectionOrFocus=ai.bindTo(this.contextKeyService),this.listDoubleSelection=Ci.bindTo(this.contextKeyService),this.listMultiSelection=wi.bindTo(this.contextKeyService),this.horizontalScrolling=Ot.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Li(mi),this.disposables.add(this.contextKeyService),this.disposables.add(Si.register(this)),this.updateStyles(Ot.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const an=this.getSelection(),Zi=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(an.length>0||Zi.length>0),this.listMultiSelection.set(an.length>1),this.listDoubleSelection.set(an.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const an=this.getSelection(),Zi=this.getFocus();this.listHasSelectionOrFocus.set(an.length>0||Zi.length>0)})),this.disposables.add(mi.onDidChangeConfiguration(an=>{an.affectsConfiguration(Bn)&&(this._useAltAsMultipleSelectionModifier=Li(mi));let Zi={};if(an.affectsConfiguration(Ln)&&this.horizontalScrolling===void 0){const Et=!!mi.getValue(Ln);Zi={...Zi,horizontalScrolling:Et}}if(an.affectsConfiguration(ui)){const Et=!!mi.getValue(ui);Zi={...Zi,scrollByPage:Et}}if(an.affectsConfiguration(Tt)){const Et=!!mi.getValue(Tt);Zi={...Zi,smoothScrolling:Et}}if(an.affectsConfiguration($i)){const Et=mi.getValue($i);Zi={...Zi,mouseWheelScrollSensitivity:Et}}if(an.affectsConfiguration(St)){const Et=mi.getValue(St);Zi={...Zi,fastScrollSensitivity:Et}}Object.keys(Zi).length>0&&this.updateOptions(Zi)})),this.navigator=new fs(this,{configurationService:mi,...Ot}),this.disposables.add(this.navigator)}updateOptions(le){super.updateOptions(le),le.overrideStyles!==void 0&&this.updateStyles(le.overrideStyles),le.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!le.multipleSelectionSupport)}updateStyles(le){this.style(le?(0,Zt.t8)(le):Zt.IN)}};un=bi([ci(5,ri.fN),ci(6,Oi),ci(7,we.pG),ci(8,Fe._Y)],un);let Cn=class extends b{constructor(le,Be,ht,Ft,Ot,qt,Si,mi,qi){const Wi=typeof Ot.horizontalScrolling<"u"?Ot.horizontalScrolling:!!mi.getValue(Ln),[Ei,Qi]=qi.invokeFunction(Pi,Ot);super(le,Be,ht,Ft,{keyboardSupport:!1,...Ei,horizontalScrolling:Wi}),this.disposables=new M.Cm,this.disposables.add(Qi),this.contextKeyService=Wn(qt,this),this.disposables.add(Rn(this.contextKeyService,this.widget)),this.horizontalScrolling=Ot.horizontalScrolling,this.listSupportsMultiSelect=gt.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(Ot.multipleSelectionSupport!==!1),ji.bindTo(this.contextKeyService).set(!!Ot.selectionNavigation),this._useAltAsMultipleSelectionModifier=Li(mi),this.disposables.add(this.contextKeyService),this.disposables.add(Si.register(this)),this.updateStyles(Ot.overrideStyles),this.disposables.add(mi.onDidChangeConfiguration(an=>{an.affectsConfiguration(Bn)&&(this._useAltAsMultipleSelectionModifier=Li(mi));let Zi={};if(an.affectsConfiguration(Ln)&&this.horizontalScrolling===void 0){const Et=!!mi.getValue(Ln);Zi={...Zi,horizontalScrolling:Et}}if(an.affectsConfiguration(ui)){const Et=!!mi.getValue(ui);Zi={...Zi,scrollByPage:Et}}if(an.affectsConfiguration(Tt)){const Et=!!mi.getValue(Tt);Zi={...Zi,smoothScrolling:Et}}if(an.affectsConfiguration($i)){const Et=mi.getValue($i);Zi={...Zi,mouseWheelScrollSensitivity:Et}}if(an.affectsConfiguration(St)){const Et=mi.getValue(St);Zi={...Zi,fastScrollSensitivity:Et}}Object.keys(Zi).length>0&&this.updateOptions(Zi)})),this.navigator=new fs(this,{configurationService:mi,...Ot}),this.disposables.add(this.navigator)}updateOptions(le){super.updateOptions(le),le.overrideStyles!==void 0&&this.updateStyles(le.overrideStyles),le.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!le.multipleSelectionSupport)}updateStyles(le){this.style(le?(0,Zt.t8)(le):Zt.IN)}dispose(){this.disposables.dispose(),super.dispose()}};Cn=bi([ci(5,ri.fN),ci(6,Oi),ci(7,we.pG),ci(8,Fe._Y)],Cn);let sn=class extends D{constructor(le,Be,ht,Ft,Ot,qt,Si,mi,qi,Wi){const Ei=typeof qt.horizontalScrolling<"u"?qt.horizontalScrolling:!!qi.getValue(Ln),[Qi,on]=Wi.invokeFunction(Pi,qt);super(le,Be,ht,Ft,Ot,{keyboardSupport:!1,...Qi,horizontalScrolling:Ei}),this.disposables.add(on),this.contextKeyService=Wn(Si,this),this.disposables.add(Rn(this.contextKeyService,this)),this.listSupportsMultiSelect=gt.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(qt.multipleSelectionSupport!==!1),ji.bindTo(this.contextKeyService).set(!!qt.selectionNavigation),this.listHasSelectionOrFocus=ai.bindTo(this.contextKeyService),this.listDoubleSelection=Ci.bindTo(this.contextKeyService),this.listMultiSelection=wi.bindTo(this.contextKeyService),this.horizontalScrolling=qt.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Li(qi),this.disposables.add(this.contextKeyService),this.disposables.add(mi.register(this)),this.updateStyles(qt.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const Zi=this.getSelection(),Et=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(Zi.length>0||Et.length>0),this.listMultiSelection.set(Zi.length>1),this.listDoubleSelection.set(Zi.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const Zi=this.getSelection(),Et=this.getFocus();this.listHasSelectionOrFocus.set(Zi.length>0||Et.length>0)})),this.disposables.add(qi.onDidChangeConfiguration(Zi=>{Zi.affectsConfiguration(Bn)&&(this._useAltAsMultipleSelectionModifier=Li(qi));let Et={};if(Zi.affectsConfiguration(Ln)&&this.horizontalScrolling===void 0){const _e=!!qi.getValue(Ln);Et={...Et,horizontalScrolling:_e}}if(Zi.affectsConfiguration(ui)){const _e=!!qi.getValue(ui);Et={...Et,scrollByPage:_e}}if(Zi.affectsConfiguration(Tt)){const _e=!!qi.getValue(Tt);Et={...Et,smoothScrolling:_e}}if(Zi.affectsConfiguration($i)){const _e=qi.getValue($i);Et={...Et,mouseWheelScrollSensitivity:_e}}if(Zi.affectsConfiguration(St)){const _e=qi.getValue(St);Et={...Et,fastScrollSensitivity:_e}}Object.keys(Et).length>0&&this.updateOptions(Et)})),this.navigator=new cs(this,{configurationService:qi,...qt}),this.disposables.add(this.navigator)}updateOptions(le){super.updateOptions(le),le.overrideStyles!==void 0&&this.updateStyles(le.overrideStyles),le.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!le.multipleSelectionSupport)}updateStyles(le){this.style(le?(0,Zt.t8)(le):Zt.IN)}dispose(){this.disposables.dispose(),super.dispose()}};sn=bi([ci(6,ri.fN),ci(7,Oi),ci(8,we.pG),ci(9,Fe._Y)],sn);class yn extends M.jG{constructor(le,Be){super(),this.widget=le,this._onDidOpen=this._register(new P.vl),this.onDidOpen=this._onDidOpen.event,this._register(P.Jh.filter(this.widget.onDidChangeSelection,ht=>(0,u.kx)(ht.browserEvent))(ht=>this.onSelectionFromKeyboard(ht))),this._register(this.widget.onPointer(ht=>this.onPointer(ht.element,ht.browserEvent))),this._register(this.widget.onMouseDblClick(ht=>this.onMouseDblClick(ht.element,ht.browserEvent))),typeof Be?.openOnSingleClick!="boolean"&&Be?.configurationService?(this.openOnSingleClick=Be?.configurationService.getValue(ws)!=="doubleClick",this._register(Be?.configurationService.onDidChangeConfiguration(ht=>{ht.affectsConfiguration(ws)&&(this.openOnSingleClick=Be?.configurationService.getValue(ws)!=="doubleClick")}))):this.openOnSingleClick=Be?.openOnSingleClick??!0}onSelectionFromKeyboard(le){if(le.elements.length!==1)return;const Be=le.browserEvent,ht=typeof Be.preserveFocus=="boolean"?Be.preserveFocus:!0,Ft=typeof Be.pinned=="boolean"?Be.pinned:!ht;this._open(this.getSelectedElement(),ht,Ft,!1,le.browserEvent)}onPointer(le,Be){if(!this.openOnSingleClick||Be.detail===2)return;const Ft=Be.button===1,Ot=!0,qt=Ft,Si=Be.ctrlKey||Be.metaKey||Be.altKey;this._open(le,Ot,qt,Si,Be)}onMouseDblClick(le,Be){if(!Be)return;const ht=Be.target;if(ht.classList.contains("monaco-tl-twistie")||ht.classList.contains("monaco-icon-label")&&ht.classList.contains("folder-icon")&&Be.offsetX<16)return;const Ot=!1,qt=!0,Si=Be.ctrlKey||Be.metaKey||Be.altKey;this._open(le,Ot,qt,Si,Be)}_open(le,Be,ht,Ft,Ot){le&&this._onDidOpen.fire({editorOptions:{preserveFocus:Be,pinned:ht,revealIfVisible:!0},sideBySide:Ft,element:le,browserEvent:Ot})}}class fs extends yn{constructor(le,Be){super(le,Be),this.widget=le}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class cs extends yn{constructor(le,Be){super(le,Be)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class _s extends yn{constructor(le,Be){super(le,Be)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function Mn(zt){let le=!1;return Be=>{if(Be.toKeyCodeChord().isModifierKey())return!1;if(le)return le=!1,!1;const ht=zt.softDispatch(Be,Be.target);return ht.kind===1?(le=!0,!1):(le=!1,ht.kind===0)}}let vs=class extends Le{constructor(le,Be,ht,Ft,Ot,qt,Si,mi,qi){const{options:Wi,getTypeNavigationMode:Ei,disposable:Qi}=qt.invokeFunction($n,Ot);super(le,Be,ht,Ft,Wi),this.disposables.add(Qi),this.internals=new Kn(this,Ot,Ei,Ot.overrideStyles,Si,mi,qi),this.disposables.add(this.internals)}updateOptions(le){super.updateOptions(le),this.internals.updateOptions(le)}};vs=bi([ci(5,Fe._Y),ci(6,ri.fN),ci(7,Oi),ci(8,we.pG)],vs);let Xi=class extends Pe{constructor(le,Be,ht,Ft,Ot,qt,Si,mi,qi){const{options:Wi,getTypeNavigationMode:Ei,disposable:Qi}=qt.invokeFunction($n,Ot);super(le,Be,ht,Ft,Wi),this.disposables.add(Qi),this.internals=new Kn(this,Ot,Ei,Ot.overrideStyles,Si,mi,qi),this.disposables.add(this.internals)}updateOptions(le={}){super.updateOptions(le),le.overrideStyles&&this.internals.updateStyleOverrides(le.overrideStyles),this.internals.updateOptions(le)}};Xi=bi([ci(5,Fe._Y),ci(6,ri.fN),ci(7,Oi),ci(8,we.pG)],Xi);let Fi=class extends Dt{constructor(le,Be,ht,Ft,Ot,qt,Si,mi,qi,Wi){const{options:Ei,getTypeNavigationMode:Qi,disposable:on}=Si.invokeFunction($n,qt);super(le,Be,ht,Ft,Ot,Ei),this.disposables.add(on),this.internals=new Kn(this,qt,Qi,qt.overrideStyles,mi,qi,Wi),this.disposables.add(this.internals)}updateOptions(le={}){super.updateOptions(le),le.overrideStyles!==void 0&&this.internals.updateStyleOverrides(le.overrideStyles),this.internals.updateOptions(le)}};Fi=bi([ci(6,Fe._Y),ci(7,ri.fN),ci(8,Oi),ci(9,we.pG)],Fi);let os=class extends Te{get onDidOpen(){return this.internals.onDidOpen}constructor(le,Be,ht,Ft,Ot,qt,Si,mi,qi,Wi){const{options:Ei,getTypeNavigationMode:Qi,disposable:on}=Si.invokeFunction($n,qt);super(le,Be,ht,Ft,Ot,Ei),this.disposables.add(on),this.internals=new Kn(this,qt,Qi,qt.overrideStyles,mi,qi,Wi),this.disposables.add(this.internals)}updateOptions(le={}){super.updateOptions(le),le.overrideStyles&&this.internals.updateStyleOverrides(le.overrideStyles),this.internals.updateOptions(le)}};os=bi([ci(6,Fe._Y),ci(7,ri.fN),ci(8,Oi),ci(9,we.pG)],os);let no=class extends Ye{constructor(le,Be,ht,Ft,Ot,qt,Si,mi,qi,Wi,Ei){const{options:Qi,getTypeNavigationMode:on,disposable:an}=mi.invokeFunction($n,Si);super(le,Be,ht,Ft,Ot,qt,Qi),this.disposables.add(an),this.internals=new Kn(this,Si,on,Si.overrideStyles,qi,Wi,Ei),this.disposables.add(this.internals)}updateOptions(le){super.updateOptions(le),this.internals.updateOptions(le)}};no=bi([ci(7,Fe._Y),ci(8,ri.fN),ci(9,Oi),ci(10,we.pG)],no);function so(zt){const le=zt.getValue(Qn);if(le==="highlight")return E.vD.Highlight;if(le==="filter")return E.vD.Filter;const Be=zt.getValue(vt);if(Be==="simple"||Be==="highlight")return E.vD.Highlight;if(Be==="filter")return E.vD.Filter}function co(zt){const le=zt.getValue(wt);if(le==="fuzzy")return E.RD.Fuzzy;if(le==="contiguous")return E.RD.Contiguous}function $n(zt,le){const Be=zt.get(we.pG),ht=zt.get(Z.l),Ft=zt.get(ri.fN),Ot=zt.get(Fe._Y),qt=()=>{const Qi=Ft.getContextKeyValue(us);if(Qi==="automatic")return w._C.Automatic;if(Qi==="trigger"||Ft.getContextKeyValue(xs)===!1)return w._C.Trigger;const an=Be.getValue(hi);if(an==="automatic")return w._C.Automatic;if(an==="trigger")return w._C.Trigger},Si=le.horizontalScrolling!==void 0?le.horizontalScrolling:!!Be.getValue(Ln),[mi,qi]=Ot.invokeFunction(Pi,le),Wi=le.paddingBottom,Ei=le.renderIndentGuides!==void 0?le.renderIndentGuides:Be.getValue(Ki);return{getTypeNavigationMode:qt,disposable:qi,options:{keyboardSupport:!1,...mi,indent:typeof Be.getValue(In)=="number"?Be.getValue(In):void 0,renderIndentGuides:Ei,smoothScrolling:!!Be.getValue(Tt),defaultFindMode:so(Be),defaultFindMatchType:co(Be),horizontalScrolling:Si,scrollByPage:!!Be.getValue(ui),paddingBottom:Wi,hideTwistiesOfChildlessElements:le.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:le.expandOnlyOnTwistieClick??Be.getValue(yt)==="doubleClick",contextViewProvider:ht,findWidgetStyles:Zt.Dk,enableStickyScroll:!!Be.getValue(Yt),stickyScrollMaxItemCount:Number(Be.getValue(ii))}}}let Kn=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(le,Be,ht,Ft,Ot,qt,Si){this.tree=le,this.disposables=[],this.contextKeyService=Wn(Ot,le),this.disposables.push(Rn(this.contextKeyService,le)),this.listSupportsMultiSelect=gt.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(Be.multipleSelectionSupport!==!1),ji.bindTo(this.contextKeyService).set(!!Be.selectionNavigation),this.listSupportFindWidget=Di.bindTo(this.contextKeyService),this.listSupportFindWidget.set(Be.findWidgetEnabled??!0),this.hasSelectionOrFocus=ai.bindTo(this.contextKeyService),this.hasDoubleSelection=Ci.bindTo(this.contextKeyService),this.hasMultiSelection=wi.bindTo(this.contextKeyService),this.treeElementCanCollapse=dn.bindTo(this.contextKeyService),this.treeElementHasParent=nn.bindTo(this.contextKeyService),this.treeElementCanExpand=Dn.bindTo(this.contextKeyService),this.treeElementHasChild=Mi.bindTo(this.contextKeyService),this.treeFindOpen=Zn.bindTo(this.contextKeyService),this.treeStickyScrollFocused=Ne.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Li(Si),this.updateStyleOverrides(Ft);const qi=()=>{const Ei=le.getFocus()[0];if(!Ei)return;const Qi=le.getNode(Ei);this.treeElementCanCollapse.set(Qi.collapsible&&!Qi.collapsed),this.treeElementHasParent.set(!!le.getParentElement(Ei)),this.treeElementCanExpand.set(Qi.collapsible&&Qi.collapsed),this.treeElementHasChild.set(!!le.getFirstElementChild(Ei))},Wi=new Set;Wi.add(us),Wi.add(xs),this.disposables.push(this.contextKeyService,qt.register(le),le.onDidChangeSelection(()=>{const Ei=le.getSelection(),Qi=le.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(Ei.length>0||Qi.length>0),this.hasMultiSelection.set(Ei.length>1),this.hasDoubleSelection.set(Ei.length===2)})}),le.onDidChangeFocus(()=>{const Ei=le.getSelection(),Qi=le.getFocus();this.hasSelectionOrFocus.set(Ei.length>0||Qi.length>0),qi()}),le.onDidChangeCollapseState(qi),le.onDidChangeModel(qi),le.onDidChangeFindOpenState(Ei=>this.treeFindOpen.set(Ei)),le.onDidChangeStickyScrollFocused(Ei=>this.treeStickyScrollFocused.set(Ei)),Si.onDidChangeConfiguration(Ei=>{let Qi={};if(Ei.affectsConfiguration(Bn)&&(this._useAltAsMultipleSelectionModifier=Li(Si)),Ei.affectsConfiguration(In)){const on=Si.getValue(In);Qi={...Qi,indent:on}}if(Ei.affectsConfiguration(Ki)&&Be.renderIndentGuides===void 0){const on=Si.getValue(Ki);Qi={...Qi,renderIndentGuides:on}}if(Ei.affectsConfiguration(Tt)){const on=!!Si.getValue(Tt);Qi={...Qi,smoothScrolling:on}}if(Ei.affectsConfiguration(Qn)||Ei.affectsConfiguration(vt)){const on=so(Si);Qi={...Qi,defaultFindMode:on}}if(Ei.affectsConfiguration(hi)||Ei.affectsConfiguration(vt)){const on=ht();Qi={...Qi,typeNavigationMode:on}}if(Ei.affectsConfiguration(wt)){const on=co(Si);Qi={...Qi,defaultFindMatchType:on}}if(Ei.affectsConfiguration(Ln)&&Be.horizontalScrolling===void 0){const on=!!Si.getValue(Ln);Qi={...Qi,horizontalScrolling:on}}if(Ei.affectsConfiguration(ui)){const on=!!Si.getValue(ui);Qi={...Qi,scrollByPage:on}}if(Ei.affectsConfiguration(yt)&&Be.expandOnlyOnTwistieClick===void 0&&(Qi={...Qi,expandOnlyOnTwistieClick:Si.getValue(yt)==="doubleClick"}),Ei.affectsConfiguration(Yt)){const on=Si.getValue(Yt);Qi={...Qi,enableStickyScroll:on}}if(Ei.affectsConfiguration(ii)){const on=Math.max(1,Si.getValue(ii));Qi={...Qi,stickyScrollMaxItemCount:on}}if(Ei.affectsConfiguration($i)){const on=Si.getValue($i);Qi={...Qi,mouseWheelScrollSensitivity:on}}if(Ei.affectsConfiguration(St)){const on=Si.getValue(St);Qi={...Qi,fastScrollSensitivity:on}}Object.keys(Qi).length>0&&le.updateOptions(Qi)}),this.contextKeyService.onDidChangeContext(Ei=>{Ei.affectsSome(Wi)&&le.updateOptions({typeNavigationMode:ht()})})),this.navigator=new _s(le,{configurationService:Si,...Be}),this.disposables.push(this.navigator)}updateOptions(le){le.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!le.multipleSelectionSupport)}updateStyleOverrides(le){this.tree.style(le?(0,Zt.t8)(le):Zt.IN)}dispose(){this.disposables=(0,M.AS)(this.disposables)}};Kn=bi([ci(4,ri.fN),ci(5,Oi),ci(6,we.pG)],Kn),et.O.as(Xt.Fd.Configuration).registerConfiguration({id:"workbench",order:7,title:(0,Se.kg)("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Bn]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[(0,Se.kg)("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),(0,Se.kg)("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:(0,Se.kg)({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[ws]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:(0,Se.kg)({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Ln]:{type:"boolean",default:!1,description:(0,Se.kg)("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[ui]:{type:"boolean",default:!1,description:(0,Se.kg)("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[In]:{type:"number",default:8,minimum:4,maximum:40,description:(0,Se.kg)("tree indent setting","Controls tree indentation in pixels.")},[Ki]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:(0,Se.kg)("render tree indent guides","Controls whether the tree should render indent guides.")},[Tt]:{type:"boolean",default:!1,description:(0,Se.kg)("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[$i]:{type:"number",default:1,markdownDescription:(0,Se.kg)("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[St]:{type:"number",default:5,markdownDescription:(0,Se.kg)("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[Qn]:{type:"string",enum:["highlight","filter"],enumDescriptions:[(0,Se.kg)("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),(0,Se.kg)("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:(0,Se.kg)("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[vt]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[(0,Se.kg)("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),(0,Se.kg)("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),(0,Se.kg)("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:(0,Se.kg)("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:(0,Se.kg)("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[wt]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[(0,Se.kg)("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),(0,Se.kg)("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:(0,Se.kg)("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[yt]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:(0,Se.kg)("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Yt]:{type:"boolean",default:!0,description:(0,Se.kg)("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[ii]:{type:"number",minimum:1,default:7,markdownDescription:(0,Se.kg)("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[hi]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:(0,Se.kg)("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}})},88935:(Mt,He,c)=>{c.d(He,{L:()=>G,h:()=>U});var u=c(87856);class G{static addRange(M,w){let O=0;for(;O<w.length&&w[O].endExclusive<M.start;)O++;let A=O;for(;A<w.length&&w[A].start<=M.endExclusive;)A++;if(O===A)w.splice(O,0,M);else{const I=Math.min(M.start,w[O].start),b=Math.max(M.endExclusive,w[A-1].endExclusive);w.splice(O,A-O,new G(I,b))}}static tryCreate(M,w){if(!(M>w))return new G(M,w)}static ofLength(M){return new G(0,M)}static ofStartAndLength(M,w){return new G(M,M+w)}constructor(M,w){if(this.start=M,this.endExclusive=w,M>w)throw new u.D7(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(M){return new G(this.start+M,this.endExclusive+M)}deltaStart(M){return new G(this.start+M,this.endExclusive)}deltaEnd(M){return new G(this.start,this.endExclusive+M)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(M){return this.start<=M&&M<this.endExclusive}join(M){return new G(Math.min(this.start,M.start),Math.max(this.endExclusive,M.endExclusive))}intersect(M){const w=Math.max(this.start,M.start),O=Math.min(this.endExclusive,M.endExclusive);if(w<=O)return new G(w,O)}intersects(M){const w=Math.max(this.start,M.start),O=Math.min(this.endExclusive,M.endExclusive);return w<O}isBefore(M){return this.endExclusive<=M.start}isAfter(M){return this.start>=M.endExclusive}slice(M){return M.slice(this.start,this.endExclusive)}substring(M){return M.substring(this.start,this.endExclusive)}clip(M){if(this.isEmpty)throw new u.D7(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,M))}clipCyclic(M){if(this.isEmpty)throw new u.D7(`Invalid clipping range: ${this.toString()}`);return M<this.start?this.endExclusive-(this.start-M)%this.length:M>=this.endExclusive?this.start+(M-this.start)%this.length:M}forEach(M){for(let w=this.start;w<this.endExclusive;w++)M(w)}}class U{constructor(){this._sortedRanges=[]}addRange(M){let w=0;for(;w<this._sortedRanges.length&&this._sortedRanges[w].endExclusive<M.start;)w++;let O=w;for(;O<this._sortedRanges.length&&this._sortedRanges[O].start<=M.endExclusive;)O++;if(w===O)this._sortedRanges.splice(w,0,M);else{const A=Math.min(M.start,this._sortedRanges[w].start),I=Math.max(M.endExclusive,this._sortedRanges[O-1].endExclusive);this._sortedRanges.splice(w,O-w,new G(A,I))}}toString(){return this._sortedRanges.map(M=>M.toString()).join(", ")}intersectsStrict(M){let w=0;for(;w<this._sortedRanges.length&&this._sortedRanges[w].endExclusive<=M.start;)w++;return w<this._sortedRanges.length&&this._sortedRanges[w].start<M.endExclusive}intersectWithRange(M){const w=new U;for(const O of this._sortedRanges){const A=O.intersect(M);A&&w.addRange(A)}return w}intersectWithRangeLength(M){return this.intersectWithRange(M).length}get length(){return this._sortedRanges.reduce((M,w)=>M+w.length,0)}}},89394:(Mt,He,c)=>{c.d(He,{_K:()=>M,bJ:()=>P,iD:()=>w});var u=c(90692);let G;const U=globalThis.vscode;if(typeof U<"u"&&typeof U.process<"u"){const O=U.process;G={get platform(){return O.platform},get arch(){return O.arch},get env(){return O.env},cwd(){return O.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?G={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:G={get platform(){return u.uF?"win32":u.zx?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const P=G.cwd,M=G.env,w=G.platform},89464:(Mt,He,c)=>{c.d(He,{R:()=>U});var u=c(45573),G=c(25894),U;(function(P){P.editorSimpleInput=new G.N1("editorSimpleInput",!1,!0),P.editorTextFocus=new G.N1("editorTextFocus",!1,u.kg("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),P.focus=new G.N1("editorFocus",!1,u.kg("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),P.textInputFocus=new G.N1("textInputFocus",!1,u.kg("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),P.readOnly=new G.N1("editorReadonly",!1,u.kg("editorReadonly","Whether the editor is read-only")),P.inDiffEditor=new G.N1("inDiffEditor",!1,u.kg("inDiffEditor","Whether the context is a diff editor")),P.isEmbeddedDiffEditor=new G.N1("isEmbeddedDiffEditor",!1,u.kg("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),P.inMultiDiffEditor=new G.N1("inMultiDiffEditor",!1,u.kg("inMultiDiffEditor","Whether the context is a multi diff editor")),P.multiDiffEditorAllCollapsed=new G.N1("multiDiffEditorAllCollapsed",void 0,u.kg("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),P.hasChanges=new G.N1("diffEditorHasChanges",!1,u.kg("diffEditorHasChanges","Whether the diff editor has changes")),P.comparingMovedCode=new G.N1("comparingMovedCode",!1,u.kg("comparingMovedCode","Whether a moved code block is selected for comparison")),P.accessibleDiffViewerVisible=new G.N1("accessibleDiffViewerVisible",!1,u.kg("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),P.diffEditorRenderSideBySideInlineBreakpointReached=new G.N1("diffEditorRenderSideBySideInlineBreakpointReached",!1,u.kg("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),P.diffEditorInlineMode=new G.N1("diffEditorInlineMode",!1,u.kg("diffEditorInlineMode","Whether inline mode is active")),P.diffEditorOriginalWritable=new G.N1("diffEditorOriginalWritable",!1,u.kg("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),P.diffEditorModifiedWritable=new G.N1("diffEditorModifiedWritable",!1,u.kg("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),P.diffEditorOriginalUri=new G.N1("diffEditorOriginalUri","",u.kg("diffEditorOriginalUri","The uri of the original document")),P.diffEditorModifiedUri=new G.N1("diffEditorModifiedUri","",u.kg("diffEditorModifiedUri","The uri of the modified document")),P.columnSelection=new G.N1("editorColumnSelection",!1,u.kg("editorColumnSelection","Whether `editor.columnSelection` is enabled")),P.writable=P.readOnly.toNegated(),P.hasNonEmptySelection=new G.N1("editorHasSelection",!1,u.kg("editorHasSelection","Whether the editor has text selected")),P.hasOnlyEmptySelection=P.hasNonEmptySelection.toNegated(),P.hasMultipleSelections=new G.N1("editorHasMultipleSelections",!1,u.kg("editorHasMultipleSelections","Whether the editor has multiple selections")),P.hasSingleSelection=P.hasMultipleSelections.toNegated(),P.tabMovesFocus=new G.N1("editorTabMovesFocus",!1,u.kg("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),P.tabDoesNotMoveFocus=P.tabMovesFocus.toNegated(),P.isInEmbeddedEditor=new G.N1("isInEmbeddedEditor",!1,!0),P.canUndo=new G.N1("canUndo",!1,!0),P.canRedo=new G.N1("canRedo",!1,!0),P.hoverVisible=new G.N1("editorHoverVisible",!1,u.kg("editorHoverVisible","Whether the editor hover is visible")),P.hoverFocused=new G.N1("editorHoverFocused",!1,u.kg("editorHoverFocused","Whether the editor hover is focused")),P.stickyScrollFocused=new G.N1("stickyScrollFocused",!1,u.kg("stickyScrollFocused","Whether the sticky scroll is focused")),P.stickyScrollVisible=new G.N1("stickyScrollVisible",!1,u.kg("stickyScrollVisible","Whether the sticky scroll is visible")),P.standaloneColorPickerVisible=new G.N1("standaloneColorPickerVisible",!1,u.kg("standaloneColorPickerVisible","Whether the standalone color picker is visible")),P.standaloneColorPickerFocused=new G.N1("standaloneColorPickerFocused",!1,u.kg("standaloneColorPickerFocused","Whether the standalone color picker is focused")),P.inCompositeEditor=new G.N1("inCompositeEditor",void 0,u.kg("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),P.notInCompositeEditor=P.inCompositeEditor.toNegated(),P.languageId=new G.N1("editorLangId","",u.kg("editorLangId","The language identifier of the editor")),P.hasCompletionItemProvider=new G.N1("editorHasCompletionItemProvider",!1,u.kg("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),P.hasCodeActionsProvider=new G.N1("editorHasCodeActionsProvider",!1,u.kg("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),P.hasCodeLensProvider=new G.N1("editorHasCodeLensProvider",!1,u.kg("editorHasCodeLensProvider","Whether the editor has a code lens provider")),P.hasDefinitionProvider=new G.N1("editorHasDefinitionProvider",!1,u.kg("editorHasDefinitionProvider","Whether the editor has a definition provider")),P.hasDeclarationProvider=new G.N1("editorHasDeclarationProvider",!1,u.kg("editorHasDeclarationProvider","Whether the editor has a declaration provider")),P.hasImplementationProvider=new G.N1("editorHasImplementationProvider",!1,u.kg("editorHasImplementationProvider","Whether the editor has an implementation provider")),P.hasTypeDefinitionProvider=new G.N1("editorHasTypeDefinitionProvider",!1,u.kg("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),P.hasHoverProvider=new G.N1("editorHasHoverProvider",!1,u.kg("editorHasHoverProvider","Whether the editor has a hover provider")),P.hasDocumentHighlightProvider=new G.N1("editorHasDocumentHighlightProvider",!1,u.kg("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),P.hasDocumentSymbolProvider=new G.N1("editorHasDocumentSymbolProvider",!1,u.kg("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),P.hasReferenceProvider=new G.N1("editorHasReferenceProvider",!1,u.kg("editorHasReferenceProvider","Whether the editor has a reference provider")),P.hasRenameProvider=new G.N1("editorHasRenameProvider",!1,u.kg("editorHasRenameProvider","Whether the editor has a rename provider")),P.hasSignatureHelpProvider=new G.N1("editorHasSignatureHelpProvider",!1,u.kg("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),P.hasInlayHintsProvider=new G.N1("editorHasInlayHintsProvider",!1,u.kg("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),P.hasDocumentFormattingProvider=new G.N1("editorHasDocumentFormattingProvider",!1,u.kg("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),P.hasDocumentSelectionFormattingProvider=new G.N1("editorHasDocumentSelectionFormattingProvider",!1,u.kg("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),P.hasMultipleDocumentFormattingProvider=new G.N1("editorHasMultipleDocumentFormattingProvider",!1,u.kg("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),P.hasMultipleDocumentSelectionFormattingProvider=new G.N1("editorHasMultipleDocumentSelectionFormattingProvider",!1,u.kg("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(U||(U={}))},89530:(Mt,He,c)=>{c.d(He,{f:()=>G});var u=c(56491);class G{get event(){return this.emitter.event}constructor(P,M,w){const O=A=>this.emitter.fire(A);this.emitter=new u.vl({onWillAddFirstListener:()=>P.addEventListener(M,O,w),onDidRemoveLastListener:()=>P.removeEventListener(M,O,w)})}dispose(){this.emitter.dispose()}}},90128:(Mt,He,c)=>{c.r(He),c.d(He,{UnicodeTextModelHighlighter:()=>w});var u=c(98414),G=c(8909),U=c(85565),P=c(6105),M=c(5751);class w{static computeUnicodeHighlights(C,v,_){const d=_?_.startLineNumber:1,m=_?_.endLineNumber:C.getLineCount(),S=new A(v),D=S.getCandidateCodePoints();let E;D==="allNonBasicAscii"?E=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):E=new RegExp(`${O(Array.from(D))}`,"g");const B=new G.W5(null,E),R=[];let z=!1,W,$=0,Q=0,q=0;e:for(let ne=d,ve=m;ne<=ve;ne++){const Re=C.getLineContent(ne),Ae=Re.length;B.reset(0);do if(W=B.next(Re),W){let re=W.index,K=W.index+W[0].length;if(re>0){const me=Re.charCodeAt(re-1);U.pc(me)&&re--}if(K+1<Ae){const me=Re.charCodeAt(K-1);U.pc(me)&&K++}const F=Re.substring(re,K);let N=(0,M.Th)(re+1,M.Ld,Re,0);N&&N.endColumn<=re+1&&(N=null);const j=S.shouldHighlightNonBasicASCII(F,N?N.word:null);if(j!==0){if(j===3?$++:j===2?Q++:j===1?q++:(0,P.xb)(j),R.length>=1e3){z=!0;break e}R.push(new u.Q(ne,re+1,ne,K+1))}}while(W)}return{ranges:R,hasMore:z,ambiguousCharacterCount:$,invisibleCharacterCount:Q,nonBasicAsciiCharacterCount:q}}static computeUnicodeHighlightReason(C,v){const _=new A(v);switch(_.shouldHighlightNonBasicASCII(C,null)){case 0:return null;case 2:return{kind:1};case 3:{const m=C.codePointAt(0),S=_.ambiguousCharacters.getPrimaryConfusable(m),D=U.tl.getLocales().filter(E=>!U.tl.getInstance(new Set([...v.allowedLocales,E])).isAmbiguous(m));return{kind:0,confusableWith:String.fromCodePoint(S),notAmbiguousInLocales:D}}case 1:return{kind:2}}}}function O(b,C){return`[${U.bm(b.map(_=>String.fromCodePoint(_)).join(""))}]`}class A{constructor(C){this.options=C,this.allowedCodePoints=new Set(C.allowedCodePoints),this.ambiguousCharacters=U.tl.getInstance(new Set(C.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const C=new Set;if(this.options.invisibleCharacters)for(const v of U.y_.codePoints)I(String.fromCodePoint(v))||C.add(v);if(this.options.ambiguousCharacters)for(const v of this.ambiguousCharacters.getConfusableCodePoints())C.add(v);for(const v of this.allowedCodePoints)C.delete(v);return C}shouldHighlightNonBasicASCII(C,v){const _=C.codePointAt(0);if(this.allowedCodePoints.has(_))return 0;if(this.options.nonBasicASCII)return 1;let d=!1,m=!1;if(v)for(const S of v){const D=S.codePointAt(0),E=U.aC(S);d=d||E,!E&&!this.ambiguousCharacters.isAmbiguous(D)&&!U.y_.isInvisibleCharacter(D)&&(m=!0)}return!d&&m?0:this.options.invisibleCharacters&&!I(C)&&U.y_.isInvisibleCharacter(_)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(_)?3:0}}function I(b){return b===" "||b===`
`||b==="	"}},90692:(Mt,He,c)=>{c.d(He,{BH:()=>N,Fr:()=>K,H8:()=>ae,HZ:()=>ve,OS:()=>ce,UP:()=>ye,_p:()=>me,cm:()=>Y,gm:()=>Ce,ib:()=>ne,j9:()=>q,lg:()=>Ae,m0:()=>Ke,nr:()=>Pe,uF:()=>$,un:()=>re,zx:()=>Q});var u=c(45573);const G="en";let U=!1,P=!1,M=!1,w=!1,O=!1,A=!1,I=!1,b=!1,C=!1,v=!1,_,d=G,m=null,S,D;const E=globalThis;let B;typeof E.vscode<"u"&&typeof E.vscode.process<"u"?B=E.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(B=process);const R=typeof B?.versions?.electron=="string",z=R&&B?.type==="renderer";if(typeof B=="object"){U=B.platform==="win32",P=B.platform==="darwin",M=B.platform==="linux",w=M&&!!B.env.SNAP&&!!B.env.SNAP_REVISION,I=R,C=!!B.env.CI||!!B.env.BUILD_ARTIFACTSTAGINGDIRECTORY,_=G,d=G;const qe=B.env.VSCODE_NLS_CONFIG;if(qe)try{const Ue=JSON.parse(qe);_=Ue.userLocale,m=Ue.osLocale,d=Ue.resolvedLanguage||G,S=Ue.languagePack?.translationsConfigFile}catch{}O=!0}else typeof navigator=="object"&&!z&&(D=navigator.userAgent,U=D.indexOf("Windows")>=0,P=D.indexOf("Macintosh")>=0,b=(D.indexOf("Macintosh")>=0||D.indexOf("iPad")>=0||D.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,M=D.indexOf("Linux")>=0,v=D?.indexOf("Mobi")>=0,A=!0,d=u.i8()||G,_=navigator.language.toLowerCase(),m=_);let W=0;P?W=1:U?W=3:M&&(W=2);const $=U,Q=P,q=M,ne=O,ve=A,Ae=A&&typeof E.importScripts=="function"?E.origin:void 0,re=b,K=v,F=D,N=d,j=typeof E.postMessage=="function"&&!E.importScripts,me=(()=>{if(j){const qe=[];E.addEventListener("message",x=>{if(x.data&&x.data.vscodeScheduleAsyncWork)for(let it=0,Ze=qe.length;it<Ze;it++){const _t=qe[it];if(_t.id===x.data.vscodeScheduleAsyncWork){qe.splice(it,1),_t.callback();return}}});let Ue=0;return x=>{const it=++Ue;qe.push({id:it,callback:x}),E.postMessage({vscodeScheduleAsyncWork:it},"*")}}return qe=>setTimeout(qe)})(),ce=P||b?2:U?1:3;let he=!0,Le=!1;function Y(){if(!Le){Le=!0;const qe=new Uint8Array(2);qe[0]=1,qe[1]=2,he=new Uint16Array(qe.buffer)[0]===513}return he}const ae=!!(F&&F.indexOf("Chrome")>=0),Ce=!!(F&&F.indexOf("Firefox")>=0),Pe=!!(!ae&&F&&F.indexOf("Safari")>=0),ye=!!(F&&F.indexOf("Edg/")>=0),Ke=!!(F&&F.indexOf("Android")>=0)},91090:(Mt,He,c)=>{c.d(He,{k:()=>G});var u=c(81545);const G=(0,u.u1)("telemetryService")},91194:(Mt,He,c)=>{c.d(He,{M:()=>U});var u=c(56491);class G{constructor(){this._onDidChange=new u.vl,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const U=new G},91467:(Mt,He,c)=>{c.d(He,{J:()=>P,k:()=>U});var u=c(33902);const G=Object.create(null);function U(M,w){if((0,u.Kg)(w)){const O=G[w];if(O===void 0)throw new Error(`${M} references an unknown codicon: ${w}`);w=O}return G[M]=w,{id:M}}function P(){return G}},91779:(Mt,He,c)=>{c.d(He,{e:()=>G,i:()=>U});let u={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function G(P){u=P}function U(){return u}},92327:(Mt,He,c)=>{c.d(He,{c:()=>O});var u=c(31938),G=c(56491),U=c(60599);class P extends U.jG{constructor(I){super(),this._onDidChange=this._register(new G.vl),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(I,!0),this._mediaQueryList=null,this._handleChange(I,!1)}_handleChange(I,b){this._mediaQueryList?.removeEventListener("change",this._listener),this._mediaQueryList=I.matchMedia(`(resolution: ${I.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),b&&this._onDidChange.fire()}}class M extends U.jG{get value(){return this._value}constructor(I){super(),this._onDidChange=this._register(new G.vl),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(I);const b=this._register(new P(I));this._register(b.onDidChange(()=>{this._value=this._getPixelRatio(I),this._onDidChange.fire(this._value)}))}_getPixelRatio(I){const b=document.createElement("canvas").getContext("2d"),C=I.devicePixelRatio||1,v=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1;return C/v}}class w{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(I){const b=(0,u.Q2)(I);let C=this.mapWindowIdToPixelRatioMonitor.get(b);return C||(C=(0,U.lC)(new M(I)),this.mapWindowIdToPixelRatioMonitor.set(b,C),(0,U.lC)(G.Jh.once(u.Fv)(({vscodeWindowId:v})=>{v===b&&(C?.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(b))}))),C}getInstance(I){return this._getOrCreatePixelRatioMonitor(I)}}const O=new w},92998:(Mt,He,c)=>{c.d(He,{MF:()=>C,d$:()=>b,mG:()=>d,vG:()=>S,vY:()=>m});var u=c(69504),G=c(98414),U=c(47545),P=c(90439),M=c(23418),w=c(58932);const O=()=>!0,A=()=>!1,I=D=>D===" "||D==="	";class b{static shouldRecreate(E){return E.hasChanged(146)||E.hasChanged(132)||E.hasChanged(37)||E.hasChanged(77)||E.hasChanged(79)||E.hasChanged(80)||E.hasChanged(6)||E.hasChanged(7)||E.hasChanged(11)||E.hasChanged(9)||E.hasChanged(10)||E.hasChanged(14)||E.hasChanged(129)||E.hasChanged(50)||E.hasChanged(92)||E.hasChanged(131)}constructor(E,B,R,z){this.languageConfigurationService=z,this._cursorMoveConfigurationBrand=void 0,this._languageId=E;const W=R.options,$=W.get(146),Q=W.get(50);this.readOnly=W.get(92),this.tabSize=B.tabSize,this.indentSize=B.indentSize,this.insertSpaces=B.insertSpaces,this.stickyTabStops=W.get(117),this.lineHeight=Q.lineHeight,this.typicalHalfwidthCharacterWidth=Q.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor($.height/this.lineHeight)-2),this.useTabStops=W.get(129),this.wordSeparators=W.get(132),this.emptySelectionClipboard=W.get(37),this.copyWithSyntaxHighlighting=W.get(25),this.multiCursorMergeOverlapping=W.get(77),this.multiCursorPaste=W.get(79),this.multiCursorLimit=W.get(80),this.autoClosingBrackets=W.get(6),this.autoClosingComments=W.get(7),this.autoClosingQuotes=W.get(11),this.autoClosingDelete=W.get(9),this.autoClosingOvertype=W.get(10),this.autoSurround=W.get(14),this.autoIndent=W.get(12),this.wordSegmenterLocales=W.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(E,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(E,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(E,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(E).getAutoClosingPairs();const q=this.languageConfigurationService.getLanguageConfiguration(E).getSurroundingPairs();if(q)for(const ve of q)this.surroundingPairs[ve.open]=ve.close;const ne=this.languageConfigurationService.getLanguageConfiguration(E).comments;this.blockCommentStartToken=ne?.blockCommentStartToken??null}get electricChars(){if(!this._electricChars){this._electricChars={};const E=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter?.getElectricCharacters();if(E)for(const B of E)this._electricChars[B]=!0}return this._electricChars}onElectricCharacter(E,B,R){const z=(0,P.BQ)(B,R-1),W=this.languageConfigurationService.getLanguageConfiguration(z.languageId).electricCharacter;return W?W.onElectricCharacter(E,z,R-z.firstCharOffset):null}normalizeIndentation(E){return(0,w.P)(E,this.indentSize,this.insertSpaces)}_getShouldAutoClose(E,B,R){switch(B){case"beforeWhitespace":return I;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(E,R);case"always":return O;case"never":return A}}_getLanguageDefinedShouldAutoClose(E,B){const R=this.languageConfigurationService.getLanguageConfiguration(E).getAutoCloseBeforeSet(B);return z=>R.indexOf(z)!==-1}visibleColumnFromColumn(E,B){return M.A.visibleColumnFromColumn(E.getLineContent(B.lineNumber),B.column,this.tabSize)}columnFromVisibleColumn(E,B,R){const z=M.A.columnFromVisibleColumn(E.getLineContent(B),R,this.tabSize),W=E.getLineMinColumn(B);if(z<W)return W;const $=E.getLineMaxColumn(B);return z>$?$:z}}class C{static fromModelState(E){return new v(E)}static fromViewState(E){return new _(E)}static fromModelSelection(E){const B=U.L.liftSelection(E),R=new d(G.Q.fromPositions(B.getSelectionStart()),0,0,B.getPosition(),0);return C.fromModelState(R)}static fromModelSelections(E){const B=[];for(let R=0,z=E.length;R<z;R++)B[R]=this.fromModelSelection(E[R]);return B}constructor(E,B){this._cursorStateBrand=void 0,this.modelState=E,this.viewState=B}equals(E){return this.viewState.equals(E.viewState)&&this.modelState.equals(E.modelState)}}class v{constructor(E){this.modelState=E,this.viewState=null}}class _{constructor(E){this.modelState=null,this.viewState=E}}class d{constructor(E,B,R,z,W){this.selectionStart=E,this.selectionStartKind=B,this.selectionStartLeftoverVisibleColumns=R,this.position=z,this.leftoverVisibleColumns=W,this._singleCursorStateBrand=void 0,this.selection=d._computeSelection(this.selectionStart,this.position)}equals(E){return this.selectionStartLeftoverVisibleColumns===E.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===E.leftoverVisibleColumns&&this.selectionStartKind===E.selectionStartKind&&this.position.equals(E.position)&&this.selectionStart.equalsRange(E.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(E,B,R,z){return E?new d(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new u.y(B,R),z):new d(new G.Q(B,R,B,R),0,z,new u.y(B,R),z)}static _computeSelection(E,B){return E.isEmpty()||!B.isBeforeOrEqual(E.getStartPosition())?U.L.fromPositions(E.getStartPosition(),B):U.L.fromPositions(E.getEndPosition(),B)}}class m{constructor(E,B,R){this._editOperationResultBrand=void 0,this.type=E,this.commands=B,this.shouldPushStackElementBefore=R.shouldPushStackElementBefore,this.shouldPushStackElementAfter=R.shouldPushStackElementAfter}}function S(D){return D==="'"||D==='"'||D==="`"}},93009:(Mt,He,c)=>{c.d(He,{$z:()=>A,Ct:()=>d,E4:()=>W,EI:()=>m,El:()=>M,Fy:()=>D,Hw:()=>F,RT:()=>u,SK:()=>_,SO:()=>O,TS:()=>K,U9:()=>re,UH:()=>P,V4:()=>q,VE:()=>Re,Yc:()=>v,_A:()=>R,_j:()=>$,aI:()=>U,bS:()=>G,c1:()=>j,dM:()=>S,j3:()=>N,kj:()=>C,n:()=>I,nH:()=>Ae,nK:()=>B,pN:()=>b,r7:()=>z,t9:()=>me,y1:()=>E});function u(ce,he=0){return ce[ce.length-(1+he)]}function G(ce){if(ce.length===0)throw new Error("Invalid tail call");return[ce.slice(0,ce.length-1),ce[ce.length-1]]}function U(ce,he,Le=(Y,ae)=>Y===ae){if(ce===he)return!0;if(!ce||!he||ce.length!==he.length)return!1;for(let Y=0,ae=ce.length;Y<ae;Y++)if(!Le(ce[Y],he[Y]))return!1;return!0}function P(ce,he){const Le=ce.length-1;he<Le&&(ce[he]=ce[Le]),ce.pop()}function M(ce,he,Le){return w(ce.length,Y=>Le(ce[Y],he))}function w(ce,he){let Le=0,Y=ce-1;for(;Le<=Y;){const ae=(Le+Y)/2|0,Ce=he(ae);if(Ce<0)Le=ae+1;else if(Ce>0)Y=ae-1;else return ae}return-(Le+1)}function O(ce,he,Le){if(ce=ce|0,ce>=he.length)throw new TypeError("invalid index");const Y=he[Math.floor(he.length*Math.random())],ae=[],Ce=[],Pe=[];for(const ye of he){const Ke=Le(ye,Y);Ke<0?ae.push(ye):Ke>0?Ce.push(ye):Pe.push(ye)}return ce<ae.length?O(ce,ae,Le):ce<ae.length+Pe.length?Pe[0]:O(ce-(ae.length+Pe.length),Ce,Le)}function A(ce,he){const Le=[];let Y;for(const ae of ce.slice(0).sort(he))!Y||he(Y[0],ae)!==0?(Y=[ae],Le.push(Y)):Y.push(ae);return Le}function*I(ce,he){let Le,Y;for(const ae of ce)Y!==void 0&&he(Y,ae)?Le.push(ae):(Le&&(yield Le),Le=[ae]),Y=ae;Le&&(yield Le)}function b(ce,he){for(let Le=0;Le<=ce.length;Le++)he(Le===0?void 0:ce[Le-1],Le===ce.length?void 0:ce[Le])}function C(ce,he){for(let Le=0;Le<ce.length;Le++)he(Le===0?void 0:ce[Le-1],ce[Le],Le+1===ce.length?void 0:ce[Le+1])}function v(ce){return ce.filter(he=>!!he)}function _(ce){let he=0;for(let Le=0;Le<ce.length;Le++)ce[Le]&&(ce[he]=ce[Le],he+=1);ce.length=he}function d(ce){return!Array.isArray(ce)||ce.length===0}function m(ce){return Array.isArray(ce)&&ce.length>0}function S(ce,he=Le=>Le){const Le=new Set;return ce.filter(Y=>{const ae=he(Y);return Le.has(ae)?!1:(Le.add(ae),!0)})}function D(ce,he){return ce.length>0?ce[0]:he}function E(ce,he){let Le=typeof he=="number"?ce:0;typeof he=="number"?Le=ce:(Le=0,he=ce);const Y=[];if(Le<=he)for(let ae=Le;ae<he;ae++)Y.push(ae);else for(let ae=Le;ae>he;ae--)Y.push(ae);return Y}function B(ce,he,Le){const Y=ce.slice(0,he),ae=ce.slice(he);return Y.concat(Le,ae)}function R(ce,he){const Le=ce.indexOf(he);Le>-1&&(ce.splice(Le,1),ce.unshift(he))}function z(ce,he){const Le=ce.indexOf(he);Le>-1&&(ce.splice(Le,1),ce.push(he))}function W(ce,he){for(const Le of he)ce.push(Le)}function $(ce){return Array.isArray(ce)?ce:[ce]}function Q(ce,he,Le){const Y=ne(ce,he),ae=ce.length,Ce=Le.length;ce.length=ae+Ce;for(let Pe=ae-1;Pe>=Y;Pe--)ce[Pe+Ce]=ce[Pe];for(let Pe=0;Pe<Ce;Pe++)ce[Pe+Y]=Le[Pe]}function q(ce,he,Le,Y){const ae=ne(ce,he);let Ce=ce.splice(ae,Le);return Ce===void 0&&(Ce=[]),Q(ce,ae,Y),Ce}function ne(ce,he){return he<0?Math.max(he+ce.length,0):Math.min(he,ce.length)}var ve;(function(ce){function he(Ce){return Ce<0}ce.isLessThan=he;function Le(Ce){return Ce<=0}ce.isLessThanOrEqual=Le;function Y(Ce){return Ce>0}ce.isGreaterThan=Y;function ae(Ce){return Ce===0}ce.isNeitherLessOrGreaterThan=ae,ce.greaterThan=1,ce.lessThan=-1,ce.neitherLessOrGreaterThan=0})(ve||(ve={}));function Re(ce,he){return(Le,Y)=>he(ce(Le),ce(Y))}function Ae(...ce){return(he,Le)=>{for(const Y of ce){const ae=Y(he,Le);if(!ve.isNeitherLessOrGreaterThan(ae))return ae}return ve.neitherLessOrGreaterThan}}const re=(ce,he)=>ce-he,K=(ce,he)=>re(ce?1:0,he?1:0);function F(ce){return(he,Le)=>-ce(he,Le)}class N{constructor(he){this.items=he,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(he){let Le=this.firstIdx;for(;Le<this.items.length&&he(this.items[Le]);)Le++;const Y=Le===this.firstIdx?null:this.items.slice(this.firstIdx,Le);return this.firstIdx=Le,Y}takeFromEndWhile(he){let Le=this.lastIdx;for(;Le>=0&&he(this.items[Le]);)Le--;const Y=Le===this.lastIdx?null:this.items.slice(Le+1,this.lastIdx+1);return this.lastIdx=Le,Y}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const he=this.items[this.firstIdx];return this.firstIdx++,he}takeCount(he){const Le=this.items.slice(this.firstIdx,this.firstIdx+he);return this.firstIdx+=he,Le}}class j{static{this.empty=new j(he=>{})}constructor(he){this.iterate=he}toArray(){const he=[];return this.iterate(Le=>(he.push(Le),!0)),he}filter(he){return new j(Le=>this.iterate(Y=>he(Y)?Le(Y):!0))}map(he){return new j(Le=>this.iterate(Y=>Le(he(Y))))}findLast(he){let Le;return this.iterate(Y=>(he(Y)&&(Le=Y),!0)),Le}findLastMaxBy(he){let Le,Y=!0;return this.iterate(ae=>((Y||ve.isGreaterThan(he(ae,Le)))&&(Y=!1,Le=ae),!0)),Le}}class me{constructor(he){this._indexMap=he}static createSortPermutation(he,Le){const Y=Array.from(he.keys()).sort((ae,Ce)=>Le(he[ae],he[Ce]));return new me(Y)}apply(he){return he.map((Le,Y)=>he[this._indexMap[Y]])}inverse(){const he=this._indexMap.slice();for(let Le=0;Le<this._indexMap.length;Le++)he[this._indexMap[Le]]=Le;return new me(he)}}},93750:(Mt,He,c)=>{c.d(He,{d:()=>O,w:()=>A});var u=c(56491),G=c(13697),U=c(60599),P=c(77714),M=c(33902),w=c(81545);const O=(0,w.u1)("commandService"),A=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new u.vl,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(I,b){if(!I)throw new Error("invalid command");if(typeof I=="string"){if(!b)throw new Error("invalid command");return this.registerCommand({id:I,handler:b})}if(I.metadata&&Array.isArray(I.metadata.args)){const m=[];for(const D of I.metadata.args)m.push(D.constraint);const S=I.handler;I.handler=function(D,...E){return(0,M.jx)(E,m),S(D,...E)}}const{id:C}=I;let v=this._commands.get(C);v||(v=new P.w,this._commands.set(C,v));const _=v.unshift(I),d=(0,U.s)(()=>{_(),this._commands.get(C)?.isEmpty()&&this._commands.delete(C)});return this._onDidRegisterCommand.fire(C),d}registerCommandAlias(I,b){return A.registerCommand(I,(C,...v)=>C.get(O).executeCommand(b,...v))}getCommand(I){const b=this._commands.get(I);if(!(!b||b.isEmpty()))return G.f.first(b)}getCommands(){const I=new Map;for(const b of this._commands.keys()){const C=this.getCommand(b);C&&I.set(b,C)}return I}};A.registerCommand("noop",()=>{})},94528:(Mt,He,c)=>{c.d(He,{x:()=>U});var u=c(31938),G=c(85565);class U{constructor(M,w,O){this.options=w,this.styles=O,this.count=0,this.element=(0,u.BC)(M,(0,u.$)(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(M){this.count=M,this.render()}setTitleFormat(M){this.titleFormat=M,this.render()}render(){this.element.textContent=(0,G.GP)(this.countFormat,this.count),this.element.title=(0,G.GP)(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}},94698:(Mt,He,c)=>{c.d(He,{Q:()=>u});var u;(function(G){function U(O,A){if(O.start>=A.end||A.start>=O.end)return{start:0,end:0};const I=Math.max(O.start,A.start),b=Math.min(O.end,A.end);return b-I<=0?{start:0,end:0}:{start:I,end:b}}G.intersect=U;function P(O){return O.end-O.start<=0}G.isEmpty=P;function M(O,A){return!P(U(O,A))}G.intersects=M;function w(O,A){const I=[],b={start:O.start,end:Math.min(A.start,O.end)},C={start:Math.max(A.end,O.start),end:O.end};return P(b)||I.push(b),P(C)||I.push(C),I}G.relativeComplement=w})(u||(u={}))},95263:(Mt,He,c)=>{c.d(He,{t:()=>G});var u=c(36035);const G={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:u.K.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"}},95660:(Mt,He,c)=>{c.d(He,{$:()=>m});var u=c(31938),G=c(46625),U=c(15625),P=c(29554),M=c(7069),w=c(15903),O=c(17577),A=c(34920),I=c(56491),b=c(53897),C=c(60599),v=c(42640),_=c(91779);const d={buttonBackground:"#0E639C",buttonHoverBackground:"#006BB3",buttonSeparator:A.Q1.white.toString(),buttonForeground:A.Q1.white.toString(),buttonBorder:void 0,buttonSecondaryBackground:void 0,buttonSecondaryForeground:void 0,buttonSecondaryHoverBackground:void 0};class m extends C.jG{get onDidClick(){return this._onDidClick.event}constructor(D,E){super(),this._label="",this._onDidClick=this._register(new I.vl),this._onDidEscape=this._register(new I.vl),this.options=E,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!E.secondary);const B=E.secondary?E.buttonSecondaryBackground:E.buttonBackground,R=E.secondary?E.buttonSecondaryForeground:E.buttonForeground;this._element.style.color=R||"",this._element.style.backgroundColor=B||"",E.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof E.title=="string"&&this.setTitle(E.title),typeof E.ariaLabel=="string"&&this._element.setAttribute("aria-label",E.ariaLabel),D.appendChild(this._element),this._register(M.q.addTarget(this._element)),[u.Bx.CLICK,M.B.Tap].forEach(z=>{this._register((0,u.ko)(this._element,z,W=>{if(!this.enabled){u.fs.stop(W);return}this._onDidClick.fire(W)}))}),this._register((0,u.ko)(this._element,u.Bx.KEY_DOWN,z=>{const W=new U.Z(z);let $=!1;this.enabled&&(W.equals(3)||W.equals(10))?(this._onDidClick.fire(z),$=!0):W.equals(9)&&(this._onDidEscape.fire(z),this._element.blur(),$=!0),$&&u.fs.stop(W,!0)})),this._register((0,u.ko)(this._element,u.Bx.MOUSE_OVER,z=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register((0,u.ko)(this._element,u.Bx.MOUSE_OUT,z=>{this.updateBackground(!1)})),this.focusTracker=this._register((0,u.w5)(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(D){const E=[];for(let B of(0,O.n)(D))if(typeof B=="string"){if(B=B.trim(),B==="")continue;const R=document.createElement("span");R.textContent=B,E.push(R)}else E.push(B);return E}updateBackground(D){let E;this.options.secondary?E=D?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:E=D?this.options.buttonHoverBackground:this.options.buttonBackground,E&&(this._element.style.backgroundColor=E)}get element(){return this._element}set label(D){if(this._label===D||(0,b.VS)(this._label)&&(0,b.VS)(D)&&(0,b.nK)(this._label,D))return;this._element.classList.add("monaco-text-button");const E=this.options.supportShortLabel?this._labelElement:this._element;if((0,b.VS)(D)){const R=(0,P.Gc)(D,{inline:!0});R.dispose();const z=R.element.querySelector("p")?.innerHTML;if(z){const W=(0,G.aj)(z,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});E.innerHTML=W}else(0,u.Ln)(E)}else this.options.supportIcons?(0,u.Ln)(E,...this.getContentElements(D)):E.textContent=D;let B="";typeof this.options.title=="string"?B=this.options.title:this.options.title&&(B=(0,P.R9)(D)),this.setTitle(B),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",B),this._label=D}get label(){return this._label}set icon(D){this._element.classList.add(...v.L.asClassNameArray(D))}set enabled(D){D?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(D){!this._hover&&D!==""?this._hover=this._register((0,_.i)().setupManagedHover(this.options.hoverDelegate??(0,w.nZ)("mouse"),this._element,D)):this._hover&&this._hover.update(D)}}},96835:(Mt,He,c)=>{c.d(He,{uP:()=>A,F1:()=>P});class u{constructor(b,C,v,_){this.originalStart=b,this.originalLength=C,this.modifiedStart=v,this.modifiedLength=_}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}var G=c(79475);class U{constructor(b){this.source=b}getElements(){const b=this.source,C=new Int32Array(b.length);for(let v=0,_=b.length;v<_;v++)C[v]=b.charCodeAt(v);return C}}function P(I,b,C){return new A(new U(I),new U(b)).ComputeDiff(C).changes}class M{static Assert(b,C){if(!b)throw new Error(C)}}class w{static Copy(b,C,v,_,d){for(let m=0;m<d;m++)v[_+m]=b[C+m]}static Copy2(b,C,v,_,d){for(let m=0;m<d;m++)v[_+m]=b[C+m]}}class O{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new u(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(b,C){this.m_originalStart=Math.min(this.m_originalStart,b),this.m_modifiedStart=Math.min(this.m_modifiedStart,C),this.m_originalCount++}AddModifiedElement(b,C){this.m_originalStart=Math.min(this.m_originalStart,b),this.m_modifiedStart=Math.min(this.m_modifiedStart,C),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class A{constructor(b,C,v=null){this.ContinueProcessingPredicate=v,this._originalSequence=b,this._modifiedSequence=C;const[_,d,m]=A._getElements(b),[S,D,E]=A._getElements(C);this._hasStrings=m&&E,this._originalStringElements=_,this._originalElementsOrHash=d,this._modifiedStringElements=S,this._modifiedElementsOrHash=D,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(b){return b.length>0&&typeof b[0]=="string"}static _getElements(b){const C=b.getElements();if(A._isStringArray(C)){const v=new Int32Array(C.length);for(let _=0,d=C.length;_<d;_++)v[_]=(0,G.e2)(C[_],0);return[C,v,!0]}return C instanceof Int32Array?[[],C,!1]:[[],new Int32Array(C),!1]}ElementsAreEqual(b,C){return this._originalElementsOrHash[b]!==this._modifiedElementsOrHash[C]?!1:this._hasStrings?this._originalStringElements[b]===this._modifiedStringElements[C]:!0}ElementsAreStrictEqual(b,C){if(!this.ElementsAreEqual(b,C))return!1;const v=A._getStrictElement(this._originalSequence,b),_=A._getStrictElement(this._modifiedSequence,C);return v===_}static _getStrictElement(b,C){return typeof b.getStrictElement=="function"?b.getStrictElement(C):null}OriginalElementsAreEqual(b,C){return this._originalElementsOrHash[b]!==this._originalElementsOrHash[C]?!1:this._hasStrings?this._originalStringElements[b]===this._originalStringElements[C]:!0}ModifiedElementsAreEqual(b,C){return this._modifiedElementsOrHash[b]!==this._modifiedElementsOrHash[C]?!1:this._hasStrings?this._modifiedStringElements[b]===this._modifiedStringElements[C]:!0}ComputeDiff(b){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,b)}_ComputeDiff(b,C,v,_,d){const m=[!1];let S=this.ComputeDiffRecursive(b,C,v,_,m);return d&&(S=this.PrettifyChanges(S)),{quitEarly:m[0],changes:S}}ComputeDiffRecursive(b,C,v,_,d){for(d[0]=!1;b<=C&&v<=_&&this.ElementsAreEqual(b,v);)b++,v++;for(;C>=b&&_>=v&&this.ElementsAreEqual(C,_);)C--,_--;if(b>C||v>_){let R;return v<=_?(M.Assert(b===C+1,"originalStart should only be one more than originalEnd"),R=[new u(b,0,v,_-v+1)]):b<=C?(M.Assert(v===_+1,"modifiedStart should only be one more than modifiedEnd"),R=[new u(b,C-b+1,v,0)]):(M.Assert(b===C+1,"originalStart should only be one more than originalEnd"),M.Assert(v===_+1,"modifiedStart should only be one more than modifiedEnd"),R=[]),R}const m=[0],S=[0],D=this.ComputeRecursionPoint(b,C,v,_,m,S,d),E=m[0],B=S[0];if(D!==null)return D;if(!d[0]){const R=this.ComputeDiffRecursive(b,E,v,B,d);let z=[];return d[0]?z=[new u(E+1,C-(E+1)+1,B+1,_-(B+1)+1)]:z=this.ComputeDiffRecursive(E+1,C,B+1,_,d),this.ConcatenateChanges(R,z)}return[new u(b,C-b+1,v,_-v+1)]}WALKTRACE(b,C,v,_,d,m,S,D,E,B,R,z,W,$,Q,q,ne,ve){let Re=null,Ae=null,re=new O,K=C,F=v,N=W[0]-q[0]-_,j=-1073741824,me=this.m_forwardHistory.length-1;do{const ce=N+b;ce===K||ce<F&&E[ce-1]<E[ce+1]?(R=E[ce+1],$=R-N-_,R<j&&re.MarkNextChange(),j=R,re.AddModifiedElement(R+1,$),N=ce+1-b):(R=E[ce-1]+1,$=R-N-_,R<j&&re.MarkNextChange(),j=R-1,re.AddOriginalElement(R,$+1),N=ce-1-b),me>=0&&(E=this.m_forwardHistory[me],b=E[0],K=1,F=E.length-1)}while(--me>=-1);if(Re=re.getReverseChanges(),ve[0]){let ce=W[0]+1,he=q[0]+1;if(Re!==null&&Re.length>0){const Le=Re[Re.length-1];ce=Math.max(ce,Le.getOriginalEnd()),he=Math.max(he,Le.getModifiedEnd())}Ae=[new u(ce,z-ce+1,he,Q-he+1)]}else{re=new O,K=m,F=S,N=W[0]-q[0]-D,j=1073741824,me=ne?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const ce=N+d;ce===K||ce<F&&B[ce-1]>=B[ce+1]?(R=B[ce+1]-1,$=R-N-D,R>j&&re.MarkNextChange(),j=R+1,re.AddOriginalElement(R+1,$+1),N=ce+1-d):(R=B[ce-1],$=R-N-D,R>j&&re.MarkNextChange(),j=R,re.AddModifiedElement(R+1,$+1),N=ce-1-d),me>=0&&(B=this.m_reverseHistory[me],d=B[0],K=1,F=B.length-1)}while(--me>=-1);Ae=re.getChanges()}return this.ConcatenateChanges(Re,Ae)}ComputeRecursionPoint(b,C,v,_,d,m,S){let D=0,E=0,B=0,R=0,z=0,W=0;b--,v--,d[0]=0,m[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const $=C-b+(_-v),Q=$+1,q=new Int32Array(Q),ne=new Int32Array(Q),ve=_-v,Re=C-b,Ae=b-v,re=C-_,F=(Re-ve)%2===0;q[ve]=b,ne[Re]=C,S[0]=!1;for(let N=1;N<=$/2+1;N++){let j=0,me=0;B=this.ClipDiagonalBound(ve-N,N,ve,Q),R=this.ClipDiagonalBound(ve+N,N,ve,Q);for(let he=B;he<=R;he+=2){he===B||he<R&&q[he-1]<q[he+1]?D=q[he+1]:D=q[he-1]+1,E=D-(he-ve)-Ae;const Le=D;for(;D<C&&E<_&&this.ElementsAreEqual(D+1,E+1);)D++,E++;if(q[he]=D,D+E>j+me&&(j=D,me=E),!F&&Math.abs(he-Re)<=N-1&&D>=ne[he])return d[0]=D,m[0]=E,Le<=ne[he]&&N<=1448?this.WALKTRACE(ve,B,R,Ae,Re,z,W,re,q,ne,D,C,d,E,_,m,F,S):null}const ce=(j-b+(me-v)-N)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(j,ce))return S[0]=!0,d[0]=j,m[0]=me,ce>0&&N<=1448?this.WALKTRACE(ve,B,R,Ae,Re,z,W,re,q,ne,D,C,d,E,_,m,F,S):(b++,v++,[new u(b,C-b+1,v,_-v+1)]);z=this.ClipDiagonalBound(Re-N,N,Re,Q),W=this.ClipDiagonalBound(Re+N,N,Re,Q);for(let he=z;he<=W;he+=2){he===z||he<W&&ne[he-1]>=ne[he+1]?D=ne[he+1]-1:D=ne[he-1],E=D-(he-Re)-re;const Le=D;for(;D>b&&E>v&&this.ElementsAreEqual(D,E);)D--,E--;if(ne[he]=D,F&&Math.abs(he-ve)<=N&&D<=q[he])return d[0]=D,m[0]=E,Le>=q[he]&&N<=1448?this.WALKTRACE(ve,B,R,Ae,Re,z,W,re,q,ne,D,C,d,E,_,m,F,S):null}if(N<=1447){let he=new Int32Array(R-B+2);he[0]=ve-B+1,w.Copy2(q,B,he,1,R-B+1),this.m_forwardHistory.push(he),he=new Int32Array(W-z+2),he[0]=Re-z+1,w.Copy2(ne,z,he,1,W-z+1),this.m_reverseHistory.push(he)}}return this.WALKTRACE(ve,B,R,Ae,Re,z,W,re,q,ne,D,C,d,E,_,m,F,S)}PrettifyChanges(b){for(let C=0;C<b.length;C++){const v=b[C],_=C<b.length-1?b[C+1].originalStart:this._originalElementsOrHash.length,d=C<b.length-1?b[C+1].modifiedStart:this._modifiedElementsOrHash.length,m=v.originalLength>0,S=v.modifiedLength>0;for(;v.originalStart+v.originalLength<_&&v.modifiedStart+v.modifiedLength<d&&(!m||this.OriginalElementsAreEqual(v.originalStart,v.originalStart+v.originalLength))&&(!S||this.ModifiedElementsAreEqual(v.modifiedStart,v.modifiedStart+v.modifiedLength));){const E=this.ElementsAreStrictEqual(v.originalStart,v.modifiedStart);if(this.ElementsAreStrictEqual(v.originalStart+v.originalLength,v.modifiedStart+v.modifiedLength)&&!E)break;v.originalStart++,v.modifiedStart++}const D=[null];if(C<b.length-1&&this.ChangesOverlap(b[C],b[C+1],D)){b[C]=D[0],b.splice(C+1,1),C--;continue}}for(let C=b.length-1;C>=0;C--){const v=b[C];let _=0,d=0;if(C>0){const R=b[C-1];_=R.originalStart+R.originalLength,d=R.modifiedStart+R.modifiedLength}const m=v.originalLength>0,S=v.modifiedLength>0;let D=0,E=this._boundaryScore(v.originalStart,v.originalLength,v.modifiedStart,v.modifiedLength);for(let R=1;;R++){const z=v.originalStart-R,W=v.modifiedStart-R;if(z<_||W<d||m&&!this.OriginalElementsAreEqual(z,z+v.originalLength)||S&&!this.ModifiedElementsAreEqual(W,W+v.modifiedLength))break;const Q=(z===_&&W===d?5:0)+this._boundaryScore(z,v.originalLength,W,v.modifiedLength);Q>E&&(E=Q,D=R)}v.originalStart-=D,v.modifiedStart-=D;const B=[null];if(C>0&&this.ChangesOverlap(b[C-1],b[C],B)){b[C-1]=B[0],b.splice(C,1),C++;continue}}if(this._hasStrings)for(let C=1,v=b.length;C<v;C++){const _=b[C-1],d=b[C],m=d.originalStart-_.originalStart-_.originalLength,S=_.originalStart,D=d.originalStart+d.originalLength,E=D-S,B=_.modifiedStart,R=d.modifiedStart+d.modifiedLength,z=R-B;if(m<5&&E<20&&z<20){const W=this._findBetterContiguousSequence(S,E,B,z,m);if(W){const[$,Q]=W;($!==_.originalStart+_.originalLength||Q!==_.modifiedStart+_.modifiedLength)&&(_.originalLength=$-_.originalStart,_.modifiedLength=Q-_.modifiedStart,d.originalStart=$+m,d.modifiedStart=Q+m,d.originalLength=D-d.originalStart,d.modifiedLength=R-d.modifiedStart)}}}return b}_findBetterContiguousSequence(b,C,v,_,d){if(C<d||_<d)return null;const m=b+C-d+1,S=v+_-d+1;let D=0,E=0,B=0;for(let R=b;R<m;R++)for(let z=v;z<S;z++){const W=this._contiguousSequenceScore(R,z,d);W>0&&W>D&&(D=W,E=R,B=z)}return D>0?[E,B]:null}_contiguousSequenceScore(b,C,v){let _=0;for(let d=0;d<v;d++){if(!this.ElementsAreEqual(b+d,C+d))return 0;_+=this._originalStringElements[b+d].length}return _}_OriginalIsBoundary(b){return b<=0||b>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[b])}_OriginalRegionIsBoundary(b,C){if(this._OriginalIsBoundary(b)||this._OriginalIsBoundary(b-1))return!0;if(C>0){const v=b+C;if(this._OriginalIsBoundary(v-1)||this._OriginalIsBoundary(v))return!0}return!1}_ModifiedIsBoundary(b){return b<=0||b>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[b])}_ModifiedRegionIsBoundary(b,C){if(this._ModifiedIsBoundary(b)||this._ModifiedIsBoundary(b-1))return!0;if(C>0){const v=b+C;if(this._ModifiedIsBoundary(v-1)||this._ModifiedIsBoundary(v))return!0}return!1}_boundaryScore(b,C,v,_){const d=this._OriginalRegionIsBoundary(b,C)?1:0,m=this._ModifiedRegionIsBoundary(v,_)?1:0;return d+m}ConcatenateChanges(b,C){const v=[];if(b.length===0||C.length===0)return C.length>0?C:b;if(this.ChangesOverlap(b[b.length-1],C[0],v)){const _=new Array(b.length+C.length-1);return w.Copy(b,0,_,0,b.length-1),_[b.length-1]=v[0],w.Copy(C,1,_,b.length,C.length-1),_}else{const _=new Array(b.length+C.length);return w.Copy(b,0,_,0,b.length),w.Copy(C,0,_,b.length,C.length),_}}ChangesOverlap(b,C,v){if(M.Assert(b.originalStart<=C.originalStart,"Left change is not less than or equal to right change"),M.Assert(b.modifiedStart<=C.modifiedStart,"Left change is not less than or equal to right change"),b.originalStart+b.originalLength>=C.originalStart||b.modifiedStart+b.modifiedLength>=C.modifiedStart){const _=b.originalStart;let d=b.originalLength;const m=b.modifiedStart;let S=b.modifiedLength;return b.originalStart+b.originalLength>=C.originalStart&&(d=C.originalStart+C.originalLength-b.originalStart),b.modifiedStart+b.modifiedLength>=C.modifiedStart&&(S=C.modifiedStart+C.modifiedLength-b.modifiedStart),v[0]=new u(_,d,m,S),!0}else return v[0]=null,!1}ClipDiagonalBound(b,C,v,_){if(b>=0&&b<_)return b;const d=v,m=_-v-1,S=C%2===0;if(b<0){const D=d%2===0;return S===D?0:1}else{const D=m%2===0;return S===D?_-1:_-2}}}},98020:(Mt,He,c)=>{c.d(He,{Gn:()=>_,JJ:()=>O,vf:()=>v});var u=c(13522),G=c(8775),U=c(28841),P=c(45573),M=c(96523),w=c(39642);const O=Object.freeze({id:"editor",order:5,type:"object",title:P.kg("editorConfigurationTitle","Editor"),scope:5}),A={...O,properties:{"editor.tabSize":{type:"number",default:U.R.tabSize,minimum:1,markdownDescription:P.kg("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:P.kg("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:U.R.insertSpaces,markdownDescription:P.kg("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:U.R.detectIndentation,markdownDescription:P.kg("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:U.R.trimAutoWhitespace,description:P.kg("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:U.R.largeFileOptimizations,description:P.kg("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[P.kg("wordBasedSuggestions.off","Turn off Word Based Suggestions."),P.kg("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),P.kg("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),P.kg("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:P.kg("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[P.kg("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),P.kg("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),P.kg("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:P.kg("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:P.kg("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:P.kg("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:P.kg("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:P.kg("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:P.kg("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:P.kg("editor.experimental.treeSitterTelemetry","Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:P.kg("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:P.kg("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:P.kg("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:P.kg("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:P.kg("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:P.kg("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:u.q.maxComputationTime,description:P.kg("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:u.q.maxFileSize,description:P.kg("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:u.q.renderSideBySide,description:P.kg("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:u.q.renderSideBySideInlineBreakpoint,description:P.kg("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:u.q.useInlineViewWhenSpaceIsLimited,description:P.kg("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:u.q.renderMarginRevertIcon,description:P.kg("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:u.q.renderGutterMenu,description:P.kg("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:u.q.ignoreTrimWhitespace,description:P.kg("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:u.q.renderIndicators,description:P.kg("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:u.q.diffCodeLens,description:P.kg("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:u.q.diffWordWrap,markdownEnumDescriptions:[P.kg("wordWrap.off","Lines will never wrap."),P.kg("wordWrap.on","Lines will wrap at the viewport width."),P.kg("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:u.q.diffAlgorithm,markdownEnumDescriptions:[P.kg("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),P.kg("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:u.q.hideUnchangedRegions.enabled,markdownDescription:P.kg("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:u.q.hideUnchangedRegions.revealLineCount,markdownDescription:P.kg("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:u.q.hideUnchangedRegions.minimumLineCount,markdownDescription:P.kg("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:u.q.hideUnchangedRegions.contextLineCount,markdownDescription:P.kg("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:u.q.experimental.showMoves,markdownDescription:P.kg("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:u.q.experimental.showEmptyDecorations,description:P.kg("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:u.q.experimental.useTrueInlineView,description:P.kg("useTrueInlineView","If enabled and the editor uses the inline view, word changes are rendered inline.")}}};function I(m){return typeof m.type<"u"||typeof m.anyOf<"u"}for(const m of G.BE){const S=m.schema;if(typeof S<"u")if(I(S))A.properties[`editor.${m.name}`]=S;else for(const D in S)Object.hasOwnProperty.call(S,D)&&(A.properties[D]=S[D])}let b=null;function C(){return b===null&&(b=Object.create(null),Object.keys(A.properties).forEach(m=>{b[m]=!0})),b}function v(m){return C()[`editor.${m}`]||!1}function _(m){return C()[`diffEditor.${m}`]||!1}w.O.as(M.Fd.Configuration).registerConfiguration(A)},98414:(Mt,He,c)=>{c.d(He,{Q:()=>G});var u=c(69504);class G{constructor(P,M,w,O){P>w||P===w&&M>O?(this.startLineNumber=w,this.startColumn=O,this.endLineNumber=P,this.endColumn=M):(this.startLineNumber=P,this.startColumn=M,this.endLineNumber=w,this.endColumn=O)}isEmpty(){return G.isEmpty(this)}static isEmpty(P){return P.startLineNumber===P.endLineNumber&&P.startColumn===P.endColumn}containsPosition(P){return G.containsPosition(this,P)}static containsPosition(P,M){return!(M.lineNumber<P.startLineNumber||M.lineNumber>P.endLineNumber||M.lineNumber===P.startLineNumber&&M.column<P.startColumn||M.lineNumber===P.endLineNumber&&M.column>P.endColumn)}static strictContainsPosition(P,M){return!(M.lineNumber<P.startLineNumber||M.lineNumber>P.endLineNumber||M.lineNumber===P.startLineNumber&&M.column<=P.startColumn||M.lineNumber===P.endLineNumber&&M.column>=P.endColumn)}containsRange(P){return G.containsRange(this,P)}static containsRange(P,M){return!(M.startLineNumber<P.startLineNumber||M.endLineNumber<P.startLineNumber||M.startLineNumber>P.endLineNumber||M.endLineNumber>P.endLineNumber||M.startLineNumber===P.startLineNumber&&M.startColumn<P.startColumn||M.endLineNumber===P.endLineNumber&&M.endColumn>P.endColumn)}strictContainsRange(P){return G.strictContainsRange(this,P)}static strictContainsRange(P,M){return!(M.startLineNumber<P.startLineNumber||M.endLineNumber<P.startLineNumber||M.startLineNumber>P.endLineNumber||M.endLineNumber>P.endLineNumber||M.startLineNumber===P.startLineNumber&&M.startColumn<=P.startColumn||M.endLineNumber===P.endLineNumber&&M.endColumn>=P.endColumn)}plusRange(P){return G.plusRange(this,P)}static plusRange(P,M){let w,O,A,I;return M.startLineNumber<P.startLineNumber?(w=M.startLineNumber,O=M.startColumn):M.startLineNumber===P.startLineNumber?(w=M.startLineNumber,O=Math.min(M.startColumn,P.startColumn)):(w=P.startLineNumber,O=P.startColumn),M.endLineNumber>P.endLineNumber?(A=M.endLineNumber,I=M.endColumn):M.endLineNumber===P.endLineNumber?(A=M.endLineNumber,I=Math.max(M.endColumn,P.endColumn)):(A=P.endLineNumber,I=P.endColumn),new G(w,O,A,I)}intersectRanges(P){return G.intersectRanges(this,P)}static intersectRanges(P,M){let w=P.startLineNumber,O=P.startColumn,A=P.endLineNumber,I=P.endColumn;const b=M.startLineNumber,C=M.startColumn,v=M.endLineNumber,_=M.endColumn;return w<b?(w=b,O=C):w===b&&(O=Math.max(O,C)),A>v?(A=v,I=_):A===v&&(I=Math.min(I,_)),w>A||w===A&&O>I?null:new G(w,O,A,I)}equalsRange(P){return G.equalsRange(this,P)}static equalsRange(P,M){return!P&&!M?!0:!!P&&!!M&&P.startLineNumber===M.startLineNumber&&P.startColumn===M.startColumn&&P.endLineNumber===M.endLineNumber&&P.endColumn===M.endColumn}getEndPosition(){return G.getEndPosition(this)}static getEndPosition(P){return new u.y(P.endLineNumber,P.endColumn)}getStartPosition(){return G.getStartPosition(this)}static getStartPosition(P){return new u.y(P.startLineNumber,P.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(P,M){return new G(this.startLineNumber,this.startColumn,P,M)}setStartPosition(P,M){return new G(P,M,this.endLineNumber,this.endColumn)}collapseToStart(){return G.collapseToStart(this)}static collapseToStart(P){return new G(P.startLineNumber,P.startColumn,P.startLineNumber,P.startColumn)}collapseToEnd(){return G.collapseToEnd(this)}static collapseToEnd(P){return new G(P.endLineNumber,P.endColumn,P.endLineNumber,P.endColumn)}delta(P){return new G(this.startLineNumber+P,this.startColumn,this.endLineNumber+P,this.endColumn)}static fromPositions(P,M=P){return new G(P.lineNumber,P.column,M.lineNumber,M.column)}static lift(P){return P?new G(P.startLineNumber,P.startColumn,P.endLineNumber,P.endColumn):null}static isIRange(P){return P&&typeof P.startLineNumber=="number"&&typeof P.startColumn=="number"&&typeof P.endLineNumber=="number"&&typeof P.endColumn=="number"}static areIntersectingOrTouching(P,M){return!(P.endLineNumber<M.startLineNumber||P.endLineNumber===M.startLineNumber&&P.endColumn<M.startColumn||M.endLineNumber<P.startLineNumber||M.endLineNumber===P.startLineNumber&&M.endColumn<P.startColumn)}static areIntersecting(P,M){return!(P.endLineNumber<M.startLineNumber||P.endLineNumber===M.startLineNumber&&P.endColumn<=M.startColumn||M.endLineNumber<P.startLineNumber||M.endLineNumber===P.startLineNumber&&M.endColumn<=P.startColumn)}static compareRangesUsingStarts(P,M){if(P&&M){const A=P.startLineNumber|0,I=M.startLineNumber|0;if(A===I){const b=P.startColumn|0,C=M.startColumn|0;if(b===C){const v=P.endLineNumber|0,_=M.endLineNumber|0;if(v===_){const d=P.endColumn|0,m=M.endColumn|0;return d-m}return v-_}return b-C}return A-I}return(P?1:0)-(M?1:0)}static compareRangesUsingEnds(P,M){return P.endLineNumber===M.endLineNumber?P.endColumn===M.endColumn?P.startLineNumber===M.startLineNumber?P.startColumn-M.startColumn:P.startLineNumber-M.startLineNumber:P.endColumn-M.endColumn:P.endLineNumber-M.endLineNumber}static spansMultipleLines(P){return P.endLineNumber>P.startLineNumber}toJSON(){return this}}},99042:(Mt,He,c)=>{c.d(He,{E:()=>G,Z:()=>u});function u(U,P){const M=[],w=[];for(const O of U)P.has(O)||M.push(O);for(const O of P)U.has(O)||w.push(O);return{removed:M,added:w}}function G(U,P){const M=new Set;for(const w of P)U.has(w)&&M.add(w);return M}}}]);
