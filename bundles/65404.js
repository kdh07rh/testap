"use strict";(self.webpackChunkjennifer5_frontend=self.webpackChunkjennifer5_frontend||[]).push([[65404],{46242:(b,m,o)=>{o.d(m,{A:()=>Y});var e=o(47577),r=o(79526),k=o(27664),W=o(35129),p=o(35375),L=o(67281),c=o(65267),C=o(40317),i=o(10935),a=o(21005);const f={class:"main"},S={key:0,class:"top"},A={class:"left"},w={class:"right"},d={class:"right"},D=["action"],K=["value"],F=["value"],j=["value"],z=["value"],P=["action"],H=["target"],x=["value"],N=["value"],J=["value"],O=["value"],V=["value"],I=900,R=600,G=(0,e.pM)({__name:"ServerLogWindow",props:{type:{},dataServerItems:{},logItems:{},apiIds:{},names:{}},emits:["cancel","change-data-server"],setup(Z,{emit:q}){const X=q,n=Z,l=(0,e.WQ)("i18n",{}),E=(0,e.WQ)("windowSize",{width:window.innerWidth,height:window.innerHeight}),_=(0,e.EW)(()=>E.width/2-I/2),ee=(0,e.EW)(()=>E.height/2-R/2),te=(0,e.EW)(()=>n.type==="data"?l.dataServerLog:n.type==="view"?l.viewServerLog:n.type==="agent"?l.agentLog:n.type==="config"?l.agentConfigFile:""),ne=(0,e.EW)(()=>[{field:"name",label:l.fileName,width:"40%",sort:!0},{field:"lastModified",label:l.modifiedDate,sort:!0},{field:"length",label:`${l.size} (${l.kb})`,sort:!0,class:"right"},{field:null,label:"",sort:!1}]),u=(0,e.KR)(),g=(0,e.KR)(-1),y=(0,e.KR)(),M=(0,e.KR)(),B=(0,e.KR)(),T=(0,e.KR)(),oe=(0,W.Xg)(T),h=(0,e.KR)(""),se=({value:s})=>{X("change-data-server",s),g.value=s},ie=()=>{const s=u.value;if(s!==void 0){const t=s.isJenniferLog?s.name:s.path;a.A.put(`/api-v2/my-background-job/agent-log-download/${n.apiIds[0]}/${n.apiIds[2]}`,{fileNameOrPath:t,fileSize:s.length,isJenniferLog:s.isJenniferLog}),h.value=""}},$=async s=>{u.value=s,n.type==="agent"?h.value=l.T0010:setTimeout(()=>{y.value!==void 0&&B.value!==void 0&&(y.value.target="download-iframe",y.value.submit())},100)},Q=s=>{s!==void 0&&(u.value=s),setTimeout(()=>{window.open("",`logViewer/${n.type}`,"width=1280,height=800,location='no',history='no',resizable='no',status='no',scrollbars='no',toolbar='no',menubar='no'"),M.value?.submit()},100)};return(0,e.wB)(()=>n.dataServerItems,s=>{s.length>0&&(g.value=s[0].value)}),(s,t)=>((0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.bF)(L.A,{class:(0,e.C4)(["server-log-window",n.type]),messages:{cancel:"",apply:""},"open-w":I,"open-h":R,"open-x":_.value,"open-y":ee.value,"hide-footer":"",onCancel:t[1]||(t[1]=()=>X("cancel"))},{subject:(0,e.k6)(()=>[(0,e.eW)((0,e.v_)(te.value),1)]),icons:(0,e.k6)(()=>[n.type==="view"||n.type==="data"?((0,e.uX)(),(0,e.Wv)(p.A,{key:0,items:[{iconType:(0,e.R1)(r.B2).realtime}],"tooltip-options":{message:(0,e.R1)(l).realtimeLog},class:"close-icon transparent",onMousedown:t[0]||(t[0]=(0,e.D$)(()=>{},["stop"])),onClick:Q},null,8,["items","tooltip-options"])):(0,e.Q3)("v-if",!0)]),default:(0,e.k6)(()=>[t[18]||(t[18]=(0,e.eW)()),t[19]||(t[19]=(0,e.eW)()),(0,e.Lk)("div",f,[n.type==="data"?((0,e.uX)(),(0,e.CE)("div",S,[(0,e.Lk)("div",A,[n.type==="data"&&n.dataServerItems.length>0?((0,e.uX)(),(0,e.Wv)(c.A,{key:0,width:400,items:n.dataServerItems,"selected-value":g.value,onOnchange:se},null,8,["items","selected-value"])):(0,e.Q3)("v-if",!0)]),t[3]||(t[3]=(0,e.eW)()),t[4]||(t[4]=(0,e.Lk)("div",{class:"right"},null,-1))])):(0,e.Q3)("v-if",!0),t[9]||(t[9]=(0,e.eW)()),(0,e.Lk)("div",{class:"bottom",ref_key:"container",ref:T,style:(0,e.Tr)({"padding-right":`${(0,e.R1)(oe)}px`})},[(0,e.bF)(C.A,{columns:ne.value,rows:n.logItems,checkable:!1},{row:(0,e.k6)(({data:v,index:ae})=>[(0,e.Lk)("td",null,(0,e.v_)(v.name),1),t[6]||(t[6]=(0,e.eW)()),(0,e.Lk)("td",null,(0,e.v_)((0,e.R1)(k.qm)(v.lastModified).format((0,e.R1)(k.fp).long)),1),t[7]||(t[7]=(0,e.eW)()),(0,e.Lk)("td",w,(0,e.v_)(v.length.toLocaleForAries()),1),t[8]||(t[8]=(0,e.eW)()),(0,e.Lk)("td",d,[n.type==="agent"?((0,e.uX)(),(0,e.Wv)(p.A,{key:0,small:"",class:"border-none",items:[{iconType:(0,e.R1)(r.B2).arrowDownward}],"tooltip-options":{message:(0,e.R1)(l).download,position:"center-left"},onClick:()=>$(v)},null,8,["items","tooltip-options","onClick"])):((0,e.uX)(),(0,e.Wv)(p.A,{key:1,small:"",class:"border-none","icon-first":"",items:[{iconType:(0,e.R1)(r.B2).arrowDownward,text:(0,e.R1)(l).download}],onClick:()=>$(v)},null,8,["items","onClick"])),t[5]||(t[5]=(0,e.eW)()),n.type==="agent"?((0,e.uX)(),(0,e.Wv)(p.A,{key:2,small:"",class:"border-none",items:[{iconType:(0,e.R1)(r.B2).realtime}],"tooltip-options":{message:(0,e.R1)(l).realtimeLog,position:"center-left"},onClick:()=>Q(v)},null,8,["items","tooltip-options","onClick"])):(0,e.Q3)("v-if",!0)])]),_:1},8,["columns","rows"])],4)]),t[20]||(t[20]=(0,e.eW)()),(0,e.Lk)("iframe",{ref_key:"downloadIframe",ref:B,name:"download-iframe",style:{display:"none"}},null,512),t[21]||(t[21]=(0,e.eW)()),u.value!==void 0?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[n.type==="data"||n.type==="view"?((0,e.uX)(),(0,e.CE)("form",{key:0,ref_key:"form",ref:y,method:"post",action:`/serverLog/${n.type}/download`},[(0,e.Lk)("input",{name:"name",type:"hidden",value:u.value.name},null,8,K),t[10]||(t[10]=(0,e.eW)()),(0,e.Lk)("input",{name:"path",type:"hidden",value:u.value.path},null,8,F),t[11]||(t[11]=(0,e.eW)()),(0,e.Lk)("input",{name:"length",type:"hidden",value:u.value.length},null,8,j),t[12]||(t[12]=(0,e.eW)()),(0,e.Lk)("input",{name:"sid",type:"hidden",value:g.value},null,8,z)],8,D)):(0,e.Q3)("v-if",!0),t[13]||(t[13]=(0,e.eW)()),n.type==="config"?((0,e.uX)(),(0,e.CE)("form",{key:1,ref_key:"form",ref:y,method:"post",action:`/api-v2/agent-config-file/${n.apiIds[0]}/${n.apiIds[2]}/${u.value.name}`},null,8,P)):(0,e.Q3)("v-if",!0)],64)):(0,e.Q3)("v-if",!0),t[22]||(t[22]=(0,e.eW)()),n.type==="data"||n.type==="view"||n.type==="agent"?((0,e.uX)(),(0,e.CE)("form",{key:1,ref_key:"formPopup",ref:M,action:"/popup/logViewer",method:"post",target:`logViewer/${n.type}`},[(0,e.Lk)("input",{name:"pageType",type:"hidden",value:n.type},null,8,x),t[14]||(t[14]=(0,e.eW)()),(0,e.Lk)("input",{name:"domainId",type:"hidden",value:n.type==="data"?g.value:n.apiIds[0]},null,8,N),t[15]||(t[15]=(0,e.eW)()),(0,e.Lk)("input",{name:"instanceId",type:"hidden",value:n.apiIds[2]},null,8,J),t[16]||(t[16]=(0,e.eW)()),(0,e.Lk)("input",{name:"fileName",type:"hidden",value:n.type==="agent"?u.value?.name:""},null,8,O),t[17]||(t[17]=(0,e.eW)()),n.names!==void 0?((0,e.uX)(),(0,e.CE)("input",{key:0,name:"names",type:"hidden",value:JSON.stringify(n.names)},null,8,V)):(0,e.Q3)("v-if",!0)],8,H)):(0,e.Q3)("v-if",!0)]),_:1,__:[18,19,20,21,22]},8,["class","open-x","open-y"]),t[23]||(t[23]=(0,e.eW)()),h.value!==""?((0,e.uX)(),(0,e.Wv)(i.A,{key:0,message:h.value,onCancel:t[2]||(t[2]=()=>h.value=""),onApply:ie},null,8,["message"])):(0,e.Q3)("v-if",!0)],64))}});var U=o(35339);const Y=(0,U.A)(G,[["__scopeId","data-v-8ab92916"]])},48121:(b,m,o)=>{o.d(m,{A:()=>C});var e=o(47577);function r(i,a,f,S,A,w){return(0,e.uX)(),(0,e.CE)("div",{class:(0,e.C4)(["aries-ui-loading-btn",[i.size,{transparent:f.transparent}]])},[!f.disabled&&i.progress<1?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,e.C4)(["loading",{suspendible:i.suspendible}]),onMouseover:a[0]||(a[0]=(...d)=>i.onMouseover&&i.onMouseover(...d)),onMouseleave:a[1]||(a[1]=(...d)=>i.onMouseleave&&i.onMouseleave(...d)),onClick:a[2]||(a[2]=(...d)=>i.onClickStopSearch&&i.onClickStopSearch(...d))},[(0,e.eW)((0,e.v_)(w.loadingMessage)+" ",1),(0,e.Lk)("div",{class:"loading-layer",style:(0,e.Tr)({width:i.progress*100+"%"})},null,4)],34)):((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,e.C4)(["default",{disabled:f.disabled}]),onClick:a[3]||(a[3]=(...d)=>i.onClickSearch&&i.onClickSearch(...d))},(0,e.v_)(w.i18n.search),3))],2)}var k=o(88308),W=o(44707);const p={name:"LoadingBtn",inject:{i18n:{default:()=>({search:"Search",searching:"Searching...",stopSearch:"Stop searching"})}},mixins:[W.A,k.A],props:{disabled:{type:Boolean,default:!1},showProgress:{type:Boolean,default:!0},transparent:{type:Boolean,default:!1}},computed:{loadingMessage(){if(this.stopActive)return this.i18n.stopSearch;let i=this.i18n.searching;return this.showProgress&&(i+=`${Math.floor(this.progress*100)}%`),i}}};var L=o(35339);const C=(0,L.A)(p,[["render",r],["__scopeId","data-v-d857babe"]])},88308:(b,m,o)=>{o.d(m,{A:()=>e});const e={props:{disabled:{type:Boolean,default:!1},progress:{type:Number,default:1,validator(r){return r>=0&&r<=1}},suspendible:{type:Boolean,default:!0}},data(){return{stopActive:!1}},methods:{onMouseover(){this.suspendible&&(this.stopActive=!0)},onMouseleave(){this.suspendible&&(this.stopActive=!1)},onClickSearch(){this.stopActive=!1,this.$emit("search")},onClickStopSearch(){this.suspendible&&this.$emit("stop-search")}}}}}]);
