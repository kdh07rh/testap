"use strict";(self.webpackChunkjennifer5_frontend=self.webpackChunkjennifer5_frontend||[]).push([[21577],{2902:(te,X,v)=>{v.d(X,{X:()=>x});var e=v(47577);const B={class:"right"};function x(N,u,h,z,p,M){const V=(0,e.g2)("svg-icon"),U=(0,e.g2)("input-field");return(0,e.uX)(),(0,e.CE)("div",{class:"aries-ui-format-number-input",style:(0,e.Tr)(M.cssValues),onKeydown:u[2]||(u[2]=(...A)=>M.isNumber&&M.isNumber(...A))},[(0,e.bF)(U,{value:h.useLocale?M.formattedValue:p.currentValue,small:N.small,normal:N.normal,large:N.large,label:h.label,unit:h.unit,align:h.align,disabled:h.disabled,type:h.useLocale?"text":"number",validator:h.validator,onFocus:M.onFocus,onBlur:M.onBlur,onInput:M.onInput},(0,e.eX)({_:2},[h.useStepper?{name:"icon-right",fn:(0,e.k6)(()=>[(0,e.Lk)("div",B,[(0,e.bF)(V,{icon:N.accumulators,width:18,height:18},null,8,["icon"]),u[3]||(u[3]=(0,e.eW)()),(0,e.Lk)("div",{class:"arrow up",onClick:u[0]||(u[0]=A=>M.onClickArrow("up"))}),u[4]||(u[4]=(0,e.eW)()),(0,e.Lk)("div",{class:"arrow down",onClick:u[1]||(u[1]=A=>M.onClickArrow("down"))})])]),key:"0"}:void 0]),1032,["value","small","normal","large","label","unit","align","disabled","type","validator","onFocus","onBlur","onInput"])],36)}},3762:(te,X,v)=>{v.d(X,{X:()=>e.X});var e=v(2902)},21577:(te,X,v)=>{v.r(X),v.d(X,{default:()=>mt});var e=v(47577),B=(n=>(n.UPDATE_DOMAIN_GROUPS="updateDomainGroups",n.UPDATE_DOMAIN_INFO="updateDomainInfo",n.UPDATE_BUSINESS_GROUPS="updateBusinessGroups",n.UPDATE_BUSINESS_LIST="updateBusinessList",n.CHANGE_GLOBAL_LOADING="changeGlobalLoading",n))(B||{}),x=(n=>(n.LOAD_DOMAIN_GROUPS="loadDomainGroups",n.LOAD_BUSINESS_GROUPS="updateBusinessGroups",n.LOAD_BUSINESS_LIST_FOR_CSV="loadBusinessListForCsv",n.SAVE_AND_LOAD_DOMAIN_LIST="saveAndLoadBusinessList",n))(x||{}),N=(n=>(n.GET_DOMAIN_NAME_MAP="getDomainNameMap",n))(N||{}),u=v(1401);const h={module:"businessSettings",useDomainGroup:!1,domainGroups:[],domainIds:[],domainNameMap:{},businessGroups:[],globalLoading:!1},z={[B.UPDATE_DOMAIN_GROUPS](n,a){n.useDomainGroup=a.active,n.domainGroups=a.items},[B.UPDATE_DOMAIN_INFO](n,a){n.domainIds=a.ids,n.domainNameMap=a.nameMap},[B.UPDATE_BUSINESS_GROUPS](n,a){n.businessGroups=a},[B.UPDATE_BUSINESS_LIST](n,a){const d=n.businessGroups.findIndex(t=>t.domainId===a.domainId);n.businessGroups[d].businessList=a.items},[B.CHANGE_GLOBAL_LOADING](n,a){n.globalLoading=a}};var p=v(6373),M=v(53406),V=v(21005);const U={async[x.LOAD_DOMAIN_GROUPS]({commit:n}){const a=await V.A.get("/domain/groups/status/usage"),d=await V.A.get("/api-v2/manage/domain-group");n(B.UPDATE_DOMAIN_GROUPS,{active:a.data,items:(0,M.JP)(d.data)})},async[x.LOAD_BUSINESS_GROUPS]({state:n,commit:a},d){a(B.CHANGE_GLOBAL_LOADING,!0);const t=n.domainIds.map(r=>V.A.get("/biz/group/treeList",{params:{format:"json",sid:r}}));V.A.all(t).then(r=>{const c=r.filter(L=>L.data.list.length>=0);a(B.UPDATE_BUSINESS_GROUPS,c.map(L=>{const _=L.data.sid,R=L.data.list,E=d[_],w=n.useDomainGroup?typeof E=="string"?[E]:E:[],W=n.useDomainGroup?w.slice(-1)[0]:E;return{domainId:_,parentNames:w.slice(0,w.length-1),simpleName:W,businessList:R.map($=>({...$,sid:_}))}})),a(B.CHANGE_GLOBAL_LOADING,!1)})},async[x.SAVE_AND_LOAD_DOMAIN_LIST]({commit:n},a){if(a.items.length>250)return!1;const{data:d}=await V.A.post("/biz/group/treeSave",(0,p.$W)({sid:a.domainId,json:JSON.stringify(a.items.sort((t,r)=>{const c=(0,p.Kt)(t.treeIndex),L=(0,p.Kt)(r.treeIndex);return c<L?-1:c>L?1:0}))}));if(d){const t=await V.A.get("/biz/group/treeList",{params:{format:"json",sid:a.domainId}});n(B.UPDATE_BUSINESS_LIST,{domainId:a.domainId,items:t.data.list.map(r=>({...r,sid:a.domainId}))})}return d},async[x.LOAD_BUSINESS_LIST_FOR_CSV]({dispatch:n},a){const t=a.csv.split(`
`).filter((r,c)=>c>0&&r!=="").map(r=>{const c=r.split(",");return{treeIndex:c[0],bizId:parseInt(c[1]),shortName:c[2],longName:c[3],ruleList:c[4],badResponseTimeLimit:parseInt(c[5])}});return await n(x.SAVE_AND_LOAD_DOMAIN_LIST,{domainId:a.domainId,items:t})}},A={[N.GET_DOMAIN_NAME_MAP]:n=>{const a={},d={};return n.domainGroups.filter(t=>t.sid!==-1).forEach(t=>{a[t.sid]=t.index}),n.domainIds.forEach(t=>{const r=(0,M.Ss)(n.domainGroups),c=a[t];c!==void 0&&n.useDomainGroup?d[t]=(0,M.p9)(c,[r[c]],r):d[t]=n.domainNameMap[t]}),d}};var Y=v(97116);function T(){if(Y.A.hasModule(h.module))return;const n={namespaced:!0,state:()=>h,mutations:z,actions:U,getters:A};Y.A.registerModule(h.module,n)}function G(){return(0,u.P)(h.module)}var K=v(79526),le=v(86617);const g={title:p.Ru.get("ui.label.business"),showDomainGroupList:p.Ru.get("word.showDomainGroupList"),hideDomainGroupList:p.Ru.get("word.hideDomainGroupList"),import:p.Ru.get("ui.button.import"),export:p.Ru.get("ui.button.export"),add:p.Ru.get("ui.button.add"),more:p.Ru.get("ui.label.more"),saveChanges:p.Ru.get("ui.label.saveChanges"),save:p.Ru.get("ui.button.save"),cancel:p.Ru.get("ui.button.cancel"),delete:p.Ru.get("ui.button.delete"),location:p.Ru.get("ui.button.location"),businessIndex:p.Ru.get("ui.label.business.index"),businessId:p.Ru.get("ui.label.business.id"),businessName:p.Ru.get("ui.label.business.groupName"),description:p.Ru.get("ui.label.description"),applicationPattern:p.Ru.get("ui.label.applicationPattern"),badResponseTime:p.Ru.get("ui.label.badResponseTime"),requiredFields:p.Ru.get("ui.label.requiredFields"),ms:p.Ru.get("ui.label.unit.ms"),addToBottom:p.Ru.get("ui.label.addToBottom"),M0124:p.Ru.get("M0124"),M0067:p.Ru.get("M0067"),M0337:p.Ru.get("M0337"),M0076:p.Ru.get("M0076"),M0073:p.Ru.get("M0073"),M0077:p.Ru.get("M0077"),M0148:p.Ru.get("M0148"),M0359:p.Ru.get("M0359"),M0276:p.Ru.get("M0276"),T0016:p.Ru.get("text.0016")};var l=v(22984);function I(n){const a=[],d={};return n.forEach(t=>{const r=t.treeIndex.split("."),c={parent:void 0,children:[],data:t};if(d[t.treeIndex]=c,r.length===1)a.push(c);else{r.pop();const L=r.join("."),_=d[L];_&&(_.children.push(c),c.parent=_)}}),a}function y(n,a,d=""){for(let t=0;t<a.length;t++){const r=a[t],c={...r.data};d===""?c.treeIndex=`${t}`:c.treeIndex=`${d}.${t}`,n.push(c),r.children.length>0&&y(n,r.children,c.treeIndex)}}function S(n,a,d){for(let t=0;t<n.length;t++){if(n[t].data.treeIndex===a)return n[t];d=S(n[t].children,a,d)}return d}function b(n,a,d){for(let t=0;t<n.length;t++){if(n[t].data.treeIndex===a)return n.splice(t,1)[0];d=b(n[t].children,a,d)}return d}function j(n,a){for(let d=0;d<a.length;d++)if(a[d].treeIndex!==n.treeIndex&&a[d].ruleList===n.ruleList)return!0;return!1}function Q(n){return n?n.treeIndex.split(".").length-1:-1}function oe(n,a){let d=0;const t=I(n),r=S(t,a);function c(L){d+=1;for(let _=0;_<L.length;_++)L[_].children.length>0&&c(L[_].children)}return r&&r.children.length>0&&c(r.children),d}var ie=v(62078),ne=v(35375),me=v(998),ge=v(19766),_e=v(90194),fe=v(10935);const Ie={class:"column name"},he={class:"key"},be={class:"value"},Le={class:"column rules"},xe={class:"key"},Re={class:"value"},Se={class:"column limit"},Ae={class:"key"},Ee={class:"value"},ye={key:0,class:"handle"},De=(0,e.pM)({__name:"BusinessRow",props:{item:{},draggingItem:{},isLeaf:{type:Boolean},isFold:{type:Boolean},disabled:{type:Boolean},selected:{type:Boolean}},emits:["fold","select","dragstart","dragend","dragover","dragout"],setup(n,{emit:a}){const d=a,t=n,r=(0,e.KR)(),c=(0,e.WQ)("i18n",{}),L=(0,e.WQ)("isBlockedSystemSetting",!1),_=(0,e.EW)(()=>t.item.treeIndex.split(".").length),R=(0,e.EW)(()=>t.item.ruleList.split("|").join(", ")),E=(0,e.EW)(()=>_.value===1&&!t.isLeaf),w=(0,e.EW)(()=>t.draggingItem===void 0?!1:t.draggingItem.bizId===t.item.bizId),W=()=>{E.value&&d("fold",t.item,!t.isFold)},$=()=>{t.draggingItem===void 0&&d("select",t.item)},k=q=>{t.selected||r.value===void 0||d("dragstart",t.item,r.value?.getBoundingClientRect(),q)},P=()=>{t.draggingItem!==void 0&&t.disabled||d("dragend",t.item)},J=()=>{t.draggingItem!==void 0&&t.disabled||d("dragover",t.item)},Z=()=>{t.draggingItem!==void 0&&t.disabled||d("dragout")};return(q,C)=>((0,e.uX)(),(0,e.CE)("div",{ref_key:"element",ref:r,class:(0,e.C4)(["business-row",`depth-${_.value}`,t.selected?"selected":w.value?"dragging":t.disabled?"disabled":""])},[(0,e.Lk)("div",{class:(0,e.C4)(["folder",E.value?"":"disabled"]),onClick:W},[(0,e.bF)((0,e.R1)(K.Ah),{icon:E.value?(0,e.R1)(K.B2)[t.isFold?"arrowDown":"arrowUp"]:(0,e.R1)(K.B2).arrowRight,width:14,height:14},null,8,["icon"])],2),C[5]||(C[5]=(0,e.eW)()),(0,e.Lk)("div",{class:"columns",onClick:$,onMouseup:P,onMouseenter:J,onMouseleave:Z},[(0,e.Lk)("div",Ie,[(0,e.Lk)("div",he,(0,e.v_)((0,e.R1)(c).businessName),1),C[0]||(C[0]=(0,e.eW)()),(0,e.Lk)("div",be,(0,e.v_)(t.item.shortName),1)]),C[3]||(C[3]=(0,e.eW)()),(0,e.Lk)("div",Le,[(0,e.Lk)("div",xe,(0,e.v_)((0,e.R1)(c).applicationPattern),1),C[1]||(C[1]=(0,e.eW)()),(0,e.Lk)("div",Re,(0,e.v_)(R.value),1)]),C[4]||(C[4]=(0,e.eW)()),(0,e.Lk)("div",Se,[(0,e.Lk)("div",Ae,(0,e.v_)((0,e.R1)(c).badResponseTime),1),C[2]||(C[2]=(0,e.eW)()),(0,e.Lk)("div",Ee,(0,e.v_)(t.item.badResponseTimeLimit.toLocaleForAries()),1)])],32),C[6]||(C[6]=(0,e.eW)()),(0,e.R1)(L)?(0,e.Q3)("v-if",!0):((0,e.uX)(),(0,e.CE)("div",ye,[(0,e.bF)((0,e.R1)(K.Ah),{icon:(0,e.R1)(K.B2).gripVertical,width:16,height:16,onMousedown:k},null,8,["icon"])]))],2))}});var se=v(35339);const ce=(0,se.A)(De,[["__scopeId","data-v-422148df"]]),Ne=(0,e.pM)({__name:"BusinessShadowRow",props:{dragoverItem:{}},setup(n){const a=n,d=(0,e.EW)(()=>a.dragoverItem.treeIndex.split(".").length+1);return(t,r)=>((0,e.uX)(),(0,e.CE)("div",{class:(0,e.C4)(["business-shadow-row",`depth-${d.value}`])},null,2))}}),Me=(0,se.A)(Ne,[["__scopeId","data-v-0410e274"]]),we=(0,e.pM)({__name:"SplitterRow",props:{item:{},draggingItem:{},disabled:{type:Boolean}},emits:["dragend"],setup(n,{emit:a}){const d=a,t=n,r=(0,e.EW)(()=>t.item===void 0?0:t.item.treeIndex.split(".").length),c=()=>{t.disabled||d("dragend",t.item)};return(L,_)=>((0,e.uX)(),(0,e.CE)("div",{class:(0,e.C4)(["splitter-row",`depth-${r.value}`,t.draggingItem===void 0?"":"dragging",L.disabled?"disabled":""]),onMouseup:c},_[0]||(_[0]=[(0,e.Lk)("div",{class:"splitter"},null,-1)]),34))}}),ue=(0,se.A)(we,[["__scopeId","data-v-37432fbb"]]),We={key:0,class:"none"},Be=(0,e.pM)({__name:"BusinessTable",props:{storageKey:{},items:{},selectedItem:{}},emits:["select","dragend"],setup(n,{emit:a}){const d=a,t=n,r=(0,e.WQ)("i18n",{}),c=(0,e.KR)(),L=(0,e.KR)({}),_=(0,e.KR)(),R=(0,e.Kh)({width:"auto",left:"0px",top:"0px",opacity:.2}),E=(0,e.KR)([0,0]),w=(0,e.KR)(),W=(0,e.EW)(()=>t.items.filter(o=>{const s=[];return Object.keys(L.value).forEach(f=>{L.value[f]&&s.push(parseInt(f))}),s.findIndex(f=>{const D=t.items.find(F=>F.bizId==f);if(D)return o.treeIndex.startsWith(D.treeIndex)&&o.treeIndex!==D.treeIndex})===-1}).sort((o,s)=>{const i=(0,p.Kt)(o.treeIndex),f=(0,p.Kt)(s.treeIndex);return i<f?-1:i>f?1:0})),$=o=>t.items.filter(s=>o===s.treeIndex?!1:s.treeIndex.startsWith(`${o}.`)),k=()=>{const o=localStorage.getItem(t.storageKey),s=o?JSON.parse(o):{};L.value=t.items.reduce((i,f)=>(i[f.bizId]=s[f.bizId]===!0,i),{})},P=o=>{if(!_.value)return!1;const s=oe(t.items,_.value.treeIndex);return!!(Q(o)+s>1||o===_.value||o.treeIndex.startsWith(`${_.value.treeIndex}.`))},J=o=>{if(!_.value)return!1;const s=oe(t.items,_.value.treeIndex);return!!(Q(o)-1+s>1||o===_.value||o.treeIndex.startsWith(`${_.value.treeIndex}.`))},Z=(o,s)=>{L.value[o.bizId]=s,localStorage.setItem(t.storageKey,JSON.stringify(L.value))},q=o=>{d("select",o)},C=(o,s,i)=>{if(_.value!==void 0||c.value===void 0)return;_.value=o;const f=c.value?.getBoundingClientRect(),D=(o.treeIndex.split(".").length-1)*24,F=s.left-f.left-D,ee=s.top-f.top;R.width=`${s.width}px`,R.left=`${F}px`,R.top=`${ee}px`,E.value=[i.x,i.y,F,ee]},re=o=>{if(_.value===void 0)return;const s=o.x-E.value[0],i=o.y-E.value[1];R.left=`${E.value[2]+s}px`,R.top=`${E.value[3]+i}px`},O=()=>{_.value!==void 0&&(_.value=void 0)},m=(o,s)=>{if(_.value===void 0)return;let i=I(t.items);const f=b(i,_.value.treeIndex);if(f!==void 0){if(o==="top")i.unshift(f);else if(o==="bottom")i.push(f);else if(s!==void 0){if(o==="insert"){const F=S(i,s.treeIndex),ee=F?.parent,gt=(ee?ee.children:i).findIndex(ft=>ft.data.bizId===F?.data.bizId);(ee?ee.children:i).splice(gt,0,f)}else if(o==="append"){const F=S(i,s.treeIndex);F&&F.children.push(f)}}}const D=[];y(D,i),d("dragend",D),_.value=void 0},H=o=>{w.value=o},de=()=>{w.value!==void 0&&(w.value=void 0)},ae=o=>{if(_.value===void 0||w.value===void 0)return!1;let s=W.value.findIndex(f=>f.bizId===w.value.bizId),i=s;for(;i<W.value.length-1&&W.value[i+1].treeIndex.startsWith(`${W.value[s].treeIndex}.`);)i+=1;return i===o};return k(),(0,e.wB)(()=>t.items,()=>{k()}),(o,s)=>((0,e.uX)(),(0,e.CE)("div",{class:(0,e.C4)(["business-table",_.value!==void 0?"dragging":""]),onMouseleave:O,onMouseup:O,onMousemove:re,ref_key:"element",ref:c},[W.value.length===0?((0,e.uX)(),(0,e.CE)("div",We,(0,e.v_)((0,e.R1)(r).M0124),1)):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[((0,e.uX)(),(0,e.Wv)(ue,{key:"key-top","dragging-item":_.value,disabled:!1,onDragend:s[0]||(s[0]=i=>m("top"))},null,8,["dragging-item"])),s[4]||(s[4]=(0,e.eW)()),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(W.value,(i,f)=>((0,e.uX)(),(0,e.CE)(e.FK,{key:`row-${f}`},[f>0?((0,e.uX)(),(0,e.Wv)(ue,{key:0,item:i,"dragging-item":_.value,disabled:J(i),onDragend:D=>m("insert",i)},null,8,["item","dragging-item","disabled","onDragend"])):(0,e.Q3)("v-if",!0),s[2]||(s[2]=(0,e.eW)()),(0,e.bF)(ce,{item:i,"dragging-item":_.value,"is-leaf":$(i.treeIndex).length===0,"is-fold":L.value[i.bizId],disabled:P(i),selected:t.selectedItem!==void 0&&t.selectedItem.bizId===i.bizId,onFold:Z,onSelect:q,onDragstart:C,onDragend:D=>m("append",i),onDragover:D=>H(i),onDragout:de},null,8,["item","dragging-item","is-leaf","is-fold","disabled","selected","onDragend","onDragover"]),s[3]||(s[3]=(0,e.eW)()),ae(f)?((0,e.uX)(),(0,e.Wv)(Me,{key:1,"dragover-item":w.value},null,8,["dragover-item"])):(0,e.Q3)("v-if",!0)],64))),128)),s[5]||(s[5]=(0,e.eW)()),((0,e.uX)(),(0,e.Wv)(ue,{key:"key-bottom","dragging-item":_.value,disabled:!1,onDragend:s[1]||(s[1]=i=>m("bottom"))},null,8,["dragging-item"]))],64)),s[6]||(s[6]=(0,e.eW)()),_.value!==void 0?((0,e.uX)(),(0,e.Wv)(ce,{key:2,class:"dragging-row",style:(0,e.Tr)(R),item:_.value,"dragging-item":void 0,"is-leaf":$(_.value.treeIndex).length===0,"is-fold":L.value[_.value.bizId],disabled:!1,selected:!1},null,8,["style","item","is-leaf","is-fold"])):(0,e.Q3)("v-if",!0)],34))}}),Te=(0,se.A)(Be,[["__scopeId","data-v-9ba08790"]]);var Oe=v(67281),ke=v(97953),ve=v(11649),Ce=v(65267),Fe=v(8355);const Pe={class:"main"},Ge={key:0,class:"form"},Ue={class:"subject"},Ke={class:"form"},Xe={class:"subject"},Ve={class:"form"},$e={class:"subject"},je={class:"form"},ze={class:"subject"},Qe=["placeholder"],He={class:"form"},Je={class:"subject"},Ye={class:"unit"},Ze=(0,e.pM)({__name:"SetWindow",props:{item:{},items:{}},emits:["cancel","delete","update","append"],setup(n,{emit:a}){const d=a,t=n,r=(0,e.WQ)("i18n",{}),c=(0,e.WQ)("isBlockedSystemSetting",!1),L=(0,e.EW)(()=>570),_=(0,e.EW)(()=>t.item.treeIndex===""?586:472),R=(0,e.WQ)("windowSize",{width:window.innerWidth,height:window.innerHeight}),E=(0,e.EW)(()=>R.width/2-L.value/2),w=(0,e.EW)(()=>R.height/2-_.value/2),W=(0,e.EW)(()=>[{text:r.addToBottom,value:""},...t.items.filter(O=>O.treeIndex.split(".").length<3).map(O=>({text:O.treeIndex.split(".").length===1?O.shortName:`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${O.shortName}`,value:O.treeIndex}))]),$=(0,e.KR)(""),k=(0,e.KR)(""),P=(0,e.Kh)({...t.item,ruleList:t.item.ruleList.split("|").join(`
`)}),J=(0,e.EW)(()=>!Z(P.shortName)||P.ruleList===""),Z=O=>!(0,p.T_)(O)&&O.length<=20,q=()=>{if(P.badResponseTimeLimit>864e5){k.value=r.M0359;return}const O={...P,ruleList:P.ruleList.split(`
`).filter(m=>m!=="").join("|")};t.item.treeIndex===""?d("append",O,$.value):d("update",O)},C=()=>{d("delete",t.item)},re=({value:O})=>{$.value=O};return(O,m)=>((0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.bF)(Oe.A,{class:"modify-window",messages:{apply:(0,e.R1)(r)[t.item.treeIndex===""?"save":"saveChanges"],cancel:(0,e.R1)(r).cancel},"open-w":L.value,"open-h":_.value,"open-x":E.value,"open-y":w.value,draggable:!1,resizable:!1,"apply-btn-disabled":J.value||(0,e.R1)(c),onCancel:m[4]||(m[4]=()=>d("cancel")),onApply:q},(0,e.eX)({tools:(0,e.k6)(()=>[t.item.treeIndex!==""?((0,e.uX)(),(0,e.Wv)(ne.A,{key:0,class:(0,e.C4)(["border-none","delete-btn"]),normal:"",items:[{text:(0,e.R1)(r).delete}],disabled:(0,e.R1)(c),onClick:C},null,8,["items","disabled"])):(0,e.Q3)("v-if",!0)]),default:(0,e.k6)(()=>[m[15]||(m[15]=(0,e.eW)()),m[16]||(m[16]=(0,e.eW)()),(0,e.Lk)("div",Pe,[t.item.treeIndex===""?((0,e.uX)(),(0,e.CE)("div",Ge,[(0,e.Lk)("div",Ue,(0,e.v_)((0,e.R1)(r).location),1),m[6]||(m[6]=(0,e.eW)()),(0,e.bF)(Ce.A,{normal:"","display-row-count":5,items:W.value,"selected-value":$.value,onOnchange:re},null,8,["items","selected-value"])])):(0,e.Q3)("v-if",!0),m[11]||(m[11]=(0,e.eW)()),(0,e.Lk)("div",Ke,[(0,e.Lk)("div",Xe,(0,e.v_)((0,e.R1)(r).businessName),1),m[7]||(m[7]=(0,e.eW)()),(0,e.bF)(ve.A,{normal:"",placeholder:(0,e.R1)(r).requiredFields,validator:Z,value:P.shortName,"onUpdate:value":m[0]||(m[0]=H=>P.shortName=H)},null,8,["placeholder","value"])]),m[12]||(m[12]=(0,e.eW)()),(0,e.Lk)("div",Ve,[(0,e.Lk)("div",$e,(0,e.v_)((0,e.R1)(r).description),1),m[8]||(m[8]=(0,e.eW)()),(0,e.bF)(ve.A,{normal:"",value:P.longName,"onUpdate:value":m[1]||(m[1]=H=>P.longName=H)},null,8,["value"])]),m[13]||(m[13]=(0,e.eW)()),(0,e.Lk)("div",je,[(0,e.Lk)("div",ze,[(0,e.eW)((0,e.v_)((0,e.R1)(r).applicationPattern)+" ",1),(0,e.bF)(Fe.A,{position:"center-right",message:(0,e.R1)(r).M0067},{default:(0,e.k6)(()=>[(0,e.bF)((0,e.R1)(K.Ah),{icon:(0,e.R1)(K.B2).help,width:16,height:16},null,8,["icon"])]),_:1},8,["message"])]),m[9]||(m[9]=(0,e.eW)()),(0,e.bo)((0,e.Lk)("textarea",{"onUpdate:modelValue":m[2]||(m[2]=H=>P.ruleList=H),placeholder:(0,e.R1)(r).requiredFields},null,8,Qe),[[e.Jo,P.ruleList]])]),m[14]||(m[14]=(0,e.eW)()),(0,e.Lk)("div",He,[(0,e.Lk)("div",Je,(0,e.v_)((0,e.R1)(r).badResponseTime),1),m[10]||(m[10]=(0,e.eW)()),(0,e.bF)(ke.A,{width:210,min:0,step:1e3,value:P.badResponseTimeLimit,"onUpdate:value":m[3]||(m[3]=H=>P.badResponseTimeLimit=H),normal:""},null,8,["value"]),(0,e.Lk)("span",Ye,(0,e.v_)((0,e.R1)(r).ms),1)])])]),_:2},[t.item.treeIndex===""?{name:"subject",fn:(0,e.k6)(()=>[(0,e.eW)((0,e.v_)((0,e.R1)(r).add),1)]),key:"0"}:void 0]),1032,["messages","open-w","open-h","open-x","open-y","apply-btn-disabled"]),m[17]||(m[17]=(0,e.eW)()),k.value!==""?((0,e.uX)(),(0,e.Wv)(_e.A,{key:0,message:k.value,onCancel:m[5]||(m[5]=()=>k.value="")},null,8,["message"])):(0,e.Q3)("v-if",!0)],64))}}),qe=(0,se.A)(Ze,[["__scopeId","data-v-c5651b4a"]]),et={class:"business-list"},tt={class:"subject"},st={class:"left"},nt={class:"parent-names"},ot={class:"name"},it={class:"right"},rt=(0,e.pM)({__name:"BusinessGroups",setup(n){const a={badResponseTimeLimit:3e4,ruleList:"",bizId:0,existData:!0,treeIndex:"",oid:-1,shortName:"",longName:"",sid:-1},{state:d,dispatch:t}=G(),r=(0,e.WQ)("i18n",{}),c=(0,e.WQ)("isBlockedSystemSetting",!1),L=(0,e.EW)(()=>d.businessGroups),_=(0,e.EW)(()=>d.globalLoading),R=(0,e.KR)({}),E=(0,e.KR)({}),w=(0,e.KR)(),W=(0,e.KR)(),$=(0,e.KR)(-1),k=(0,e.KR)(""),P=o=>{(0,p.tr)("businessGroup",{fields:["treeIndex","bizId","shortName","longName","ruleList","badResponseTimeLimit"],names:[r.businessIndex,r.businessId,r.businessName,r.description,r.applicationPattern,r.badResponseTime],types:["string",null,"string","string","string",null],rows:o})},J=async(o,s)=>{await t(x.SAVE_AND_LOAD_DOMAIN_LIST,{domainId:o,items:s})||(k.value=r.T0016),R.value[o]=!1},Z=o=>{R.value[o.domainId]=!0,w.value={...a,sid:o.domainId}},q=o=>{const s=L.value.find(i=>i.domainId===o.sid);if(s){const i=s.businessList.filter(D=>D.treeIndex!==o.treeIndex),f=[];y(f,I(i),void 0),J(o.sid,f)}},C=o=>{const s=L.value.find(i=>i.domainId===o.sid);if(s){if(j(o,s.businessList)){k.value=r.M0276;return}const i=s.businessList.findIndex(f=>f.treeIndex===o.treeIndex);s.businessList[i]=o,J(o.sid,s.businessList),O(o.sid)}},re=(o,s)=>{const i=L.value.find(f=>f.domainId===o.sid);if(i){if(j(o,i.businessList)){k.value=r.M0276;return}const f=I(i.businessList);if(s==="")f.push({children:[],data:o});else{const F=S(f,s);F!==void 0&&F.children.push({children:[],data:o})}const D=[];y(D,f,void 0),J(o.sid,D)}},O=o=>{R.value[o]=!1,w.value=void 0},m=o=>{R.value[o.sid]=!0,w.value=o},H=(o,s)=>{o===0?$.value=s.domainId:o===1&&P(s.businessList),E.value[s.domainId]=!1},de=()=>{W.value&&W.value.click()},ae=o=>{const s=o.target.files[0];if(s&&W.value){if(s.type.indexOf("csv")===-1){k.value=r.M0337,W.value.value="";return}const i=new FormData;i.append("mng_file",s);const f=new XMLHttpRequest;f.open("POST","/biz/group/encoding",!0),f.onload=async D=>{try{const F=D.target.responseText;F!==""?(await t(x.LOAD_BUSINESS_LIST_FOR_CSV,{domainId:$.value,csv:F})||(k.value=r.T0016),$.value=-1):k.value=r.M0337}catch{k.value=r.M0337}finally{W.value.value=""}},f.send(i)}};return(0,e.wB)(L,o=>{o.forEach(s=>{R.value[s.domainId]=!1,E.value[s.domainId]=!1})}),(0,e.sV)(()=>{W.value&&W.value.addEventListener("change",ae)}),(0,e.xo)(()=>{W.value&&W.value.removeEventListener("change",ae)}),(o,s)=>((0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.Lk)("div",et,[_.value?((0,e.uX)(),(0,e.Wv)(ie.A,{key:0})):((0,e.uX)(!0),(0,e.CE)(e.FK,{key:1},(0,e.pI)(L.value,(i,f)=>((0,e.uX)(),(0,e.CE)("div",{class:"group",key:`group-${f}`},[(0,e.Lk)("div",tt,[(0,e.Lk)("div",st,[(0,e.Lk)("div",nt,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(i.parentNames,(D,F)=>((0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.eW)((0,e.v_)(D)+" ",1),F<i.parentNames.length-1?((0,e.uX)(),(0,e.Wv)((0,e.R1)(K.Ah),{key:`icon-${f}:${F}`,icon:(0,e.R1)(K.B2).arrowRight,width:16,height:16},null,8,["icon"])):(0,e.Q3)("v-if",!0)],64))),256))]),s[2]||(s[2]=(0,e.eW)()),(0,e.Lk)("div",ot,(0,e.v_)(i.simpleName),1)]),s[5]||(s[5]=(0,e.eW)()),(0,e.Lk)("div",it,[(0,e.bF)(ne.A,{class:"border-none",normal:"","tooltip-options":{message:(0,e.R1)(r).add},pressed:R.value[i.domainId]&&w.value!==void 0&&w.value.treeIndex==="",items:[{iconType:(0,e.R1)(K.B2).add}],disabled:(0,e.R1)(c),onClick:D=>Z(i)},null,8,["tooltip-options","pressed","items","disabled","onClick"]),s[3]||(s[3]=(0,e.eW)()),(0,e.bF)(ne.A,{class:"border-none",normal:"","tooltip-options":{message:(0,e.R1)(r).more},pressed:E.value[i.domainId],items:[{iconType:(0,e.R1)(K.B2).moreHorizon}],onClick:()=>E.value[i.domainId]=!E.value[i.domainId]},null,8,["tooltip-options","pressed","items","onClick"]),s[4]||(s[4]=(0,e.eW)()),E.value[i.domainId]?((0,e.uX)(),(0,e.Wv)(me.A,{key:0,top:36,right:0},{default:(0,e.k6)(()=>[(0,e.bF)(ge.A,{"no-scroll":"",normal:"",items:i.businessList.length>0?[{text:(0,e.R1)(r).import},{text:(0,e.R1)(r).export}]:[{text:(0,e.R1)(r).import}],"onUpdate:activeIndex":D=>H(D,i)},null,8,["items","onUpdate:activeIndex"])]),_:2},1024)):(0,e.Q3)("v-if",!0)])]),s[6]||(s[6]=(0,e.eW)()),((0,e.uX)(),(0,e.Wv)(Te,{key:`table-${f}`,"storage-key":`businessFoldCache-${i.domainId}`,items:i.businessList,"selected-item":w.value,onSelect:m,onDragend:D=>J(i.domainId,D)},null,8,["storage-key","items","selected-item","onDragend"])),s[7]||(s[7]=(0,e.eW)()),R.value[i.domainId]&&w.value?((0,e.uX)(),(0,e.Wv)(qe,{key:0,item:w.value,items:i.businessList,onCancel:D=>O(i.domainId),onDelete:q,onUpdate:C,onAppend:re},null,8,["item","items","onCancel"])):(0,e.Q3)("v-if",!0)]))),128)),s[8]||(s[8]=(0,e.eW)()),(0,e.Lk)("input",{type:"file",class:"file-input",accept:".csv",ref_key:"fileInput",ref:W},null,512)]),s[9]||(s[9]=(0,e.eW)()),k.value!==""?((0,e.uX)(),(0,e.Wv)(_e.A,{key:0,message:k.value,onCancel:s[0]||(s[0]=()=>k.value="")},null,8,["message"])):(0,e.Q3)("v-if",!0),s[10]||(s[10]=(0,e.eW)()),$.value!==-1?((0,e.uX)(),(0,e.Wv)(fe.A,{key:1,message:(0,e.R1)(r).M0076,onCancel:s[1]||(s[1]=()=>$.value=-1),onApply:de},null,8,["message"])):(0,e.Q3)("v-if",!0)],64))}}),at=(0,se.A)(rt,[["__scopeId","data-v-0a056ab2"]]),lt={class:"app business"},ut={class:"left"},dt={class:"right"},pt={class:"title"},_t={class:"scroll-view"},ct={class:"instance-list-group"},vt=(0,e.pM)({__name:"App",setup(n){T(),(0,e.Gt)("i18n",g),(0,e.Gt)("isBlockedSystemSetting",(0,p.Yj)(le.$z.BLOCKING_SYSTEM_SETTING));const a=(0,u.P)("domain"),{commit:d,dispatch:t,getters:r}=G(),c=(0,e.KR)(window.innerWidth>1280),L=()=>{const _=a.getters("sidList"),R={};a.state.domainList.forEach(E=>{_.includes(E.data.sid)&&(R[E.data.sid]=E.data.title)}),d(B.UPDATE_DOMAIN_INFO,{ids:_,nameMap:R}),t(x.LOAD_BUSINESS_GROUPS,r(N.GET_DOMAIN_NAME_MAP))};return(0,e.wB)(()=>a.state.selectedOne,()=>{L()}),(0,e.KC)(async()=>{await t(x.LOAD_DOMAIN_GROUPS)}),(0,e.sV)(()=>{setTimeout(L,500)}),(_,R)=>((0,e.uX)(),(0,e.CE)("div",lt,[(0,e.bo)((0,e.Lk)("div",ut,[(0,e.bF)(l.A,{"is-layer":!1,"show-title":!1})],512),[[e.aG,c.value]]),R[2]||(R[2]=(0,e.eW)()),(0,e.Lk)("div",dt,[(0,e.Lk)("div",pt,[(0,e.bF)(ne.A,{normal:"",class:"border-none",items:[{iconType:(0,e.R1)(K.B2)[c.value?"leftPanelClose":"leftPanelOpen"]}],"tooltip-options":{position:"bottom-left",message:(0,e.R1)(g)[c.value?"hideDomainGroupList":"showDomainGroupList"]},onClick:R[0]||(R[0]=()=>c.value=!c.value)},null,8,["items","tooltip-options"]),(0,e.eW)(" "+(0,e.v_)((0,e.R1)(g).title),1)]),R[1]||(R[1]=(0,e.eW)()),(0,e.Lk)("div",_t,[(0,e.Lk)("div",ct,[(0,e.bF)(at)])])])]))}}),mt=(0,se.A)(vt,[["__scopeId","data-v-25d3df6a"]])},29992:(te,X,v)=>{v.d(X,{P:()=>e});const e=(N,u,h="index")=>{N[h]=u,N.children.forEach((z,p)=>{const M=u+"."+p;z[h]=M,N.children.length>0&&e(z,M,h)})},B=(N,u={children:[],data:{methodName:"[ROOT]",selfRate:-1,selfTime:-1,selfTimeFormat:"",elapsedTime:-1,elapsedTimeFormat:"",callCount:-1,callCountFormat:""},index:"0",type:"open"},h="0")=>{const z=[u],p={},M=[];let V=0;return N.forEach(U=>{const A={children:[],data:U,index:null,type:"open"};z.push(A),p[U.key]=A,U.parentKey==h&&(A.index="0."+V,A.type="fold",M.push(A),V++)}),z.forEach(U=>{const A=p[U.data.parentKey];A&&A.children.push(U)}),M.length==0?[]:(M.forEach(A=>{e(A,A.index)}),z.filter(A=>A.index!=null).sort((A,Y)=>A.index<Y.index?-1:A.index>Y.index?1:0))};function x(N,u=null){if(N.length===0)return{tree:[],depth:0};const h={},z={children:[],treeIndex:null,open:!1},p={...N.find(T=>T.parentKey==="0"),...z,treeIndex:"0"},M=[p],V=[p];h[p.key]=p;let U=0;N.forEach(T=>{if(T.key===p.key)return;const G={...T,...z};M.push(G),h[T.key]=G,G.parentKey===p.key&&(G.treeIndex="0."+U,V.push(G),U++)});const A=M.filter(T=>T.treeIndex!==null);A.forEach(T=>{const G=h[T.parentKey];G&&(G.children=G.children.concat([T]))}),V.forEach(T=>{e(T,T.treeIndex,"treeIndex")});const Y=A.reduce((T,G)=>{const K=G.treeIndex.split(".").length;return T<K?K:T},1);return{tree:A.sort((T,G)=>T.treeIndex.localeCompare(G.treeIndex)),depth:Y}}},53406:(te,X,v)=>{v.d(X,{$y:()=>G,Bu:()=>M,JP:()=>pe,Jv:()=>A,KB:()=>V,KF:()=>Y,O1:()=>T,Ss:()=>u,Y0:()=>K,n_:()=>U,p9:()=>N,sl:()=>p,t4:()=>z,tf:()=>le});var e=v(6373),B=v(29992),x=v(86617);const N=(g="",l=[],I={})=>{const y=g.split(".");y.pop();const S=y.join("."),b=I[S];return b!==void 0&&l.push(b),S===""?l.reverse():N(S,l,I)},u=g=>{const l={};return g.forEach(I=>{l[I.index]=I.title}),l},h=(g,l,I)=>{const y={};return l.filter(S=>S.sid!==-1).forEach(S=>{y[S.sid]=S.index}),I.map(S=>{const b=y[S.sid];if(b&&g){const j=b.split("."),Q=j.pop();return{...S,parentIndex:j.join("."),order:Q===void 0?0:parseInt(Q)}}else return{parentIndex:null,order:0,...S}})},z=(g,l,I)=>{const y=h(g,l,I),S=[...l.filter(b=>b.sid===-1).map(b=>{const j=y.filter(ne=>ne.parentIndex===b.index),Q=u(l),oe=Q[b.index],ie=b.index.split(".");return ie.pop(),{parentNames:N(b.index,[oe],Q),simpleName:oe,parent:ie.length===0?null:ie.join("."),key:b.index,domainList:j}}),{isUnknown:!0,domainList:y.filter(b=>b.parentIndex===null)}];for(let b=0;b<S.length-1;b++)S[b].domainList.sort((j,Q)=>j.order-Q.order);return S},p=g=>g.filter(l=>l.index!==null&&l.index!=="null").map(l=>{const I=l.index.split(".");return I.pop(),{key:l.index,label:l.title,parent:I.length===0?null:I.join("."),sid:l.sid,uid:l.uid}}),M=g=>{const l={},I=[];let y=0;return g.forEach(b=>{let j=null;b.parent===null&&(j=`${y}`,y+=1);const Q={uid:b.uid,sid:b.sid,label:b.label,parent:b.parent,key:b.key,index:j,children:[]};I.push(Q),l[b.key]=Q}),I.forEach(b=>{const j=l[b.parent];j&&j.children.push(b)}),I.filter(b=>b.index!==null).forEach(b=>{(0,B.P)(b,b.index)}),I},V=g=>g.index.split(".").length-1,U=(g,l=0)=>{const I=g.children;if(I.length>0)for(let y=0;y<I.length;y++)return U(I[y],l+1);return l},A=(g,l,I,y,S,b="")=>({key:I,label:l,fold:!1,check:!1,disable:!1,icon:S,parent:y,sid:g,uid:b}),Y=(g,l)=>g===x.sU.DOT_NET?l.dotnet:g===x.sU.PHP?l.php:g===x.sU.PYTHON?l.python:g===x.sU.OPEN_TELEMETRY?l.opentelemetry:l.java,T=(g=1,l="")=>{window.open(`/popup/agentHelp?type=${g}&key=${l}`,"agentHelp","width=1024,height=768,history=no,resizable=no,status=no,scrollbars=no,menubar=no").focus()},G=g=>{const l={};return g.forEach(I=>{l[I.sid]||(l[I.sid]={oids:[],langTypes:[],versions:[]}),l[I.sid].oids.push(I.oid),l[I.sid].langTypes.push(I.languageType),l[I.sid].versions.push(I.connectedVersion)}),l},K=(g,l)=>g===x.mR.SUCCESS||g===x.$L.NO_PENDING?l.upgradeSuccess:g===x.mR.FAIL_NO_SESSION||g===x.$L.NO_SESSION?l.M0250:g===x.mR.FAIL_AGENT_PROBLEM||g===x.$L.AGENT_PROBLEM?l.M0252:g===x.mR.AGENT_TIMEOUT||g===x.$L.NOT_SUPPORTING?l.M0251:"",le=(g,l)=>g.requireJavaBaseJarUpgrade?l.M0248:g.agentResultCodeOrZero===x.YS.FAIL_INSTALL?l.M0507:l.M0249,pe=g=>g.map(l=>({index:l.index,title:l.name,sid:l.domainId,uid:l.key})).sort((l,I)=>{const y=(0,e.Kt)(l.index),S=(0,e.Kt)(I.index);return y<S?-1:y>S?1:0})},76270:(te,X,v)=>{v.d(X,{A:()=>N});var e=v(11649),B=v(79526),x=v(44707);const N={name:"FormatNumberInput",components:{SvgIcon:B.Ah,InputField:e.A},mixins:[x.A],props:{disabled:{type:Boolean,default:!1},value:{type:Number,default:0},label:{type:String,default:null},unit:{type:String,default:null},formatter:{type:Function,default:u=>u.toLocaleString()},width:Number,step:{type:Number,default:1},max:{type:Number,default:Number.MAX_SAFE_INTEGER,validator(u){return u<=Number.MAX_SAFE_INTEGER}},min:{type:Number,default:0,validator(u){return u>=0}},useStepper:{type:Boolean,default:!1},align:{type:String,default:"default",validator(u){return["left","right","default"].includes(u)}},useLocale:{type:Boolean,default:!1},validator:{type:Function,default:null}},emits:["update:value","input"],data(){return{editing:!1,currentValue:this.value}},watch:{value(u,h){u!==h&&(this.currentValue=this.value)}},computed:{formattedValue(){return this.editing||!this.formatter?this.currentValue:this.formatter(this.currentValue)},size(){return this.normal&&"normal"||this.large&&"large"||"small"},cssValues(){const u=this.size==="small"?-4:0;return{width:this.width&&this.width+"px","--arrow-margin-right":u+"px"}}},methods:{onFocus(){this.editing=!0},onBlur(){this.editing=!1;let u=this.currentValue;u===""||isNaN(u)?u=this.min:u=Math.max(this.min,Math.min(this.max,u)),this.currentValue=u,this.$emit("input",u),this.$emit("update:value",u)},onInput(u){u.match(/^\d*$/)&&(this.currentValue=u===""?"":parseFloat(u))},increase(){const u=this.currentValue%this.step;let h=this.currentValue;h=this.currentValue+this.step-u,!(h>this.max||h<this.min)&&(this.currentValue=h,this.$emit("input",parseFloat(this.currentValue)),this.$emit("update:value",parseFloat(this.currentValue)))},decrease(){const u=this.currentValue%this.step;let h=this.currentValue;u!==0?h-=u:h-=this.step,!(h>this.max||h<this.min)&&(this.currentValue=h,this.$emit("input",parseFloat(this.currentValue)),this.$emit("update:value",parseFloat(this.currentValue)))},isNumber(u){const{key:h}=u;switch(h){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":case"Meta":case"a":case"c":case"v":case"Backspace":case"Tab":case"ArrowLeft":case"ArrowRight":break;case"ArrowUp":this.increase(),u.preventDefault();break;case"ArrowDown":this.decrease(),u.preventDefault();break;default:u.preventDefault()}},onClickArrow(u){u==="up"?this.increase():this.decrease()}},created(){this.accumulators=B.B2.unfoldMore}}},81026:(te,X,v)=>{v.d(X,{A:()=>e.A});var e=v(76270)},97953:(te,X,v)=>{v.d(X,{A:()=>u});var e=v(3762),B=v(81026),x=v(35339);const u=(0,x.A)(B.A,[["render",e.X],["__scopeId","data-v-4edb8588"]])}}]);
