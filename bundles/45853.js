"use strict";(self.webpackChunkjennifer5_frontend=self.webpackChunkjennifer5_frontend||[]).push([[45853],{20251:(P,C,d)=>{d.d(C,{A:()=>w});var e=d(72458),E=d(54952),M=d(35339);const w=(0,M.A)(E.A,[["render",e.X],["__scopeId","data-v-2a3181b0"]])},30771:(P,C,d)=>{d.d(C,{A:()=>F});var e=d(11649),E=d(44707),M=d(79526);const F={name:"PasswordInput",components:{InputField:e.A,SvgIcon:M.Ah},mixins:[E.A],emits:["update:value","keyup:enter","blur","focus","input","change"],props:{value:{type:String,default:""},name:{type:String,default:null},placeholder:{type:String,default:null},autocomplete:{type:String,default:"on"},invalid:{type:Boolean,default:void 0},validator:{type:Function,default:null}},data(){return{showPassword:!1}},computed:{iconType(){return this.showPassword?this.icons.visibilityOff:this.icons.visibility},displayType(){return this.showPassword?"text":"password"}},methods:{toggleDisplayType(){this.showPassword=!this.showPassword},onBlur(){this.focused=!1,this.$emit("blur")},onInput(w){this.$emit("input",w),this.$emit("update:value",w)}},created(){this.icons={visibility:M.B2.visibility,visibilityOff:M.B2.visibilityOff}}}},31975:(P,C,d)=>{d.d(C,{A:()=>e.A});var e=d(30771)},39755:(P,C,d)=>{d.d(C,{A:()=>A});var e=d(47577);const E=["width","height"],M=["r","cx","cy","stroke-width"],F=["r","cx","cy","stroke-width","stroke-dasharray","stroke-dashoffset"];function w(L,O,X,ie,oe,W){const q=(0,e.g2)("svg-icon"),ee=(0,e.g2)("tooltip-balloon");return(0,e.uX)(),(0,e.CE)("div",{class:(0,e.C4)(["aries-ui-circle-loading-btn",[L.size]])},[!L.disabled&&(X.loading||L.progress<1)?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,e.C4)(["loading-layer",{suspendible:L.suspendible}]),style:(0,e.Tr)(W.cssValues),onMouseover:O[0]||(O[0]=(...K)=>L.onMouseover&&L.onMouseover(...K)),onMouseleave:O[1]||(O[1]=(...K)=>L.onMouseleave&&L.onMouseleave(...K))},[((0,e.uX)(),(0,e.CE)("svg",{class:(0,e.C4)(["circle-loading-svg",`${X.type}-circle`]),width:W.radius*2,height:W.radius*2},[X.type==="progress"?((0,e.uX)(),(0,e.CE)("circle",{key:0,class:"gauge-background",r:W.normalizedRadius,cx:W.radius,cy:W.radius,"stroke-width":X.stroke,stroke:"black",fill:"transparent"},null,8,M)):(0,e.Q3)("v-if",!0),O[3]||(O[3]=(0,e.eW)()),(0,e.Lk)("circle",{class:"gauge-fill",r:W.normalizedRadius,cx:W.radius,cy:W.radius,"stroke-width":X.stroke,stroke:"black","stroke-dasharray":W.strokeDasharray,"stroke-dashoffset":W.strokeDashoffset,fill:"transparent"},null,8,F)],10,E)),O[4]||(O[4]=(0,e.eW)()),L.stopActive?((0,e.uX)(),(0,e.Wv)(q,{key:0,class:"stop-btn",icon:L.closeIcon,width:W.iconSize,height:W.iconSize,onClick:L.onClickStopSearch},null,8,["icon","width","height","onClick"])):(0,e.Q3)("v-if",!0),O[5]||(O[5]=(0,e.eW)()),L.stopActive&&W.i18n.M0629?((0,e.uX)(),(0,e.Wv)(ee,{key:1,position:"bottom-right","cursor-none":"",style:(0,e.Tr)(W.tooltipOptions)},{default:(0,e.k6)(()=>[(0,e.eW)((0,e.v_)(W.i18n.M0629),1)]),_:1},8,["style"])):(0,e.Q3)("v-if",!0)],38)):((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,e.C4)(["default-btn",{disabled:L.disabled}]),onClick:O[2]||(O[2]=(...K)=>L.onClickSearch&&L.onClickSearch(...K))},[(0,e.bF)(q,{icon:L.searchIcon,width:W.iconSize,height:W.iconSize},null,8,["icon","width","height"])],2))],2)}var h=d(88308),y=d(79526),D=d(17644),j=d(8355),B=d(44707);const I={name:"CircleLoading",inject:{i18n:{default:()=>({M0629:"Stop searching at this point"})}},components:{TooltipBalloon:D.A,SvgIcon:y.Ah},mixins:[B.A,h.A],props:{stroke:{type:Number,default:2},type:{type:String,default:"progress",validator(L){return["progress","loading"].includes(L)}},loading:{type:Boolean,default:void 0}},computed:{radius(){return this.small?9:this.large?17:13},iconSize(){return this.small?16:this.large?24:20},normalizedRadius(){return this.radius-this.stroke/2},circumference(){return this.normalizedRadius*2*Math.PI},strokeDasharray(){return this.type==="loading"?this.circumference:`${this.circumference*this.progress} ${this.circumference*(1-this.progress)}`},strokeDashoffset(){return this.type==="loading"?null:this.circumference/4},tooltipOptions(){return(0,j.F)("bottom-right")},cssValues(){return{"--diameter":this.normalizedRadius*2+"px"}}},created(){this.searchIcon=y.B2.search,this.closeIcon=y.B2.close}};var H=d(35339);const A=(0,H.A)(I,[["render",w],["__scopeId","data-v-f9b9df58"]])},54952:(P,C,d)=>{d.d(C,{A:()=>e.A});var e=d(82452)},60433:(P,C,d)=>{d.r(C),d.d(C,{default:()=>qs});var e=d(47577);const E={class:"app"},M={class:"left"},F={key:0,class:"right"},w={class:"title"},h={class:"instance-list-group"},y={key:1,class:"right"},D={class:"title"},j={class:"scroll-view"};function B(t,n,o,l,i,s){const c=(0,e.g2)("domain-tree-layer"),r=(0,e.g2)("btn"),u=(0,e.g2)("tool-bar"),_=(0,e.g2)("instance-list"),m=(0,e.g2)("back-button"),f=(0,e.g2)("detail-instance");return(0,e.uX)(),(0,e.CE)("div",E,[(0,e.bo)((0,e.Lk)("div",M,[(0,e.bF)(c,{"is-layer":!1,"show-title":!1})],512),[[e.aG,i.showDomainTreeLayer&&t.screenMode==="list"]]),n[6]||(n[6]=(0,e.eW)()),t.screenMode==="list"?((0,e.uX)(),(0,e.CE)("div",F,[(0,e.Lk)("div",w,[(0,e.bF)(r,{normal:"",class:"border-none",items:[{iconType:i.titleIconTypes[i.showDomainTreeLayer?"close":"open"]}],"tooltip-options":{position:"bottom-left",message:i.i18nMessages[i.showDomainTreeLayer?"hideDomainGroupList":"showDomainGroupList"]},onClick:n[0]||(n[0]=()=>i.showDomainTreeLayer=!i.showDomainTreeLayer)},null,8,["items","tooltip-options"]),(0,e.eW)(" "+(0,e.v_)(i.i18nMessages.title),1)]),n[2]||(n[2]=(0,e.eW)()),(0,e.bF)(u,{onReload:s.reloadInstanceList},null,8,["onReload"]),n[3]||(n[3]=(0,e.eW)()),(0,e.Lk)("div",{class:"scroll-view",ref:"scrollList",onScroll:n[1]||(n[1]=(...v)=>s.scrollHandlerForList&&s.scrollHandlerForList(...v))},[(0,e.Lk)("div",h,[((0,e.uX)(),(0,e.Wv)(_,{key:i.instanceListKey,expanded:!i.showDomainTreeLayer},null,8,["expanded"]))])],544)])):((0,e.uX)(),(0,e.CE)("div",y,[(0,e.Lk)("div",D,[(0,e.bF)(m)]),n[4]||(n[4]=(0,e.eW)()),(0,e.bF)(u,{onReload:s.reloadInstanceList},null,8,["onReload"]),n[5]||(n[5]=(0,e.eW)()),(0,e.Lk)("div",j,[(0,e.bF)(f)])]))])}var I=d(33152),H=d(22984);const Z={key:1,class:"content-none"},A={class:"group"},L={class:"subject"},O={class:"parent-names"},X={class:"name"},ie={class:"status"},oe={class:"status"},W={key:0,ref:"formPopup",action:"/popup/logViewer",method:"post",target:"logViewer/agent"},q=["value"],ee=["value"],K=["value"];function be(t,n,o,l,i,s){const c=(0,e.g2)("loading-indicator"),r=(0,e.g2)("svg-icon"),u=(0,e.g2)("tooltip"),_=(0,e.g2)("circle-loading-btn"),m=(0,e.g2)("chip"),f=(0,e.g2)("jmx-status"),v=(0,e.g2)("collection-status"),g=(0,e.g2)("auto-stacktrace-status"),S=(0,e.g2)("setting-table");return(0,e.uX)(),(0,e.CE)(e.FK,null,[((0,e.uX)(),(0,e.CE)("div",{class:"instance-list",key:i.renderSeq},[t.instanceListLoading?((0,e.uX)(),(0,e.Wv)(c,{key:0})):(0,e.Q3)("v-if",!0),n[9]||(n[9]=(0,e.eW)()),t.instanceListInDomain.length===0?((0,e.uX)(),(0,e.CE)("div",Z,(0,e.v_)(s.i18n.M0677),1)):((0,e.uX)(!0),(0,e.CE)(e.FK,{key:2},(0,e.pI)(t.instanceListInDomain,R=>((0,e.uX)(),(0,e.CE)("div",A,[(0,e.Lk)("div",L,[(0,e.Lk)("div",O,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(R.parentNames,(k,Ie)=>((0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.eW)((0,e.v_)(k)+" ",1),Ie<R.parentNames.length-1?((0,e.uX)(),(0,e.Wv)(r,{key:0,icon:i.subjectOptions.iconType,width:i.subjectOptions.iconSize,height:i.subjectOptions.iconSize},null,8,["icon","width","height"])):(0,e.Q3)("v-if",!0)],64))),256))]),n[0]||(n[0]=(0,e.eW)()),(0,e.Lk)("div",X,(0,e.v_)(R.simpleName),1)]),n[8]||(n[8]=(0,e.eW)()),(0,e.bF)(S,{columns:i.columns,rows:R.instanceList,draggable:!s.isBlockedSystemSetting,"min-width":660,"more-icon":i.moreIcon,"more-icon-message":s.i18n.realtimeLog,onMoreIcon:k=>s.onClickMoreIcon(k,R.parentNames),onSort:s.changeInstanceOrders,onDrag:s.changeInstanceOrders,onCheck:t.addCheckedInstanceIds,onSelect:k=>s.onClickTableRow(k,[...R.parentNames,R.simpleName]),selectable:""},{row:(0,e.k6)(({data:k,index:Ie})=>[(0,e.Lk)("td",null,[s.validAndExistDeploySetting(k)?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.eW)((0,e.v_)(s.printInstanceName(k.shortName))+" ",1),(0,e.bF)(u,{class:"inner label",position:"center-right",message:s.printInstanceAndDeployInfo(k)},{default:(0,e.k6)(()=>[(0,e.bF)(r,{icon:i.deployOptions.iconType,width:i.deployOptions.iconSize,height:i.deployOptions.iconSize},null,8,["icon","width","height"])]),_:2},1032,["message"])],64)):((0,e.uX)(),(0,e.Wv)(u,{key:1,class:"inner",position:"center-right",message:s.printInstanceInfo(k)},{default:(0,e.k6)(()=>[(0,e.eW)((0,e.v_)(s.printInstanceName(k.shortName)),1)]),_:2},1032,["message"]))]),n[3]||(n[3]=(0,e.eW)()),(0,e.Lk)("td",null,(0,e.v_)(k.ip),1),n[4]||(n[4]=(0,e.eW)()),(0,e.Lk)("td",null,[(0,e.bF)(u,{class:"inner",position:"center-right",message:s.getLanguageTypeName(k)},{default:(0,e.k6)(()=>[(0,e.eW)((0,e.v_)(k.connectedVersion),1)]),_:2},1032,["message"])]),n[5]||(n[5]=(0,e.eW)()),(0,e.Lk)("td",ie,[(0,e.Lk)("span",{class:(0,e.C4)(s.getAgentStatusClasses(k.status))},null,2)]),n[6]||(n[6]=(0,e.eW)()),(0,e.Lk)("td",oe,[(0,e.Lk)("span",{class:(0,e.C4)(s.getAgentStatusClasses(k.license_status))},null,2)]),n[7]||(n[7]=(0,e.eW)()),(0,e.Lk)("td",null,[k.uploadStatus!==-1?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[k.uploadStatus===0?((0,e.uX)(),(0,e.Wv)(_,{key:0,small:"",loading:"",type:"loading",suspendible:!1})):k.uploadStatus===i.uploadStatus.SUCCESS?((0,e.uX)(),(0,e.Wv)(m,{key:1,value:s.printUpgradeStatusMessage(k.uploadStatus),"text-color":i.styles[s.theme].successTextColor,"background-color":i.styles[s.theme].successBackgroundColor},null,8,["value","text-color","background-color"])):((0,e.uX)(),(0,e.Wv)(u,{key:2,class:"inner",width:160,position:"center-left",message:s.printUpgradeStatusMessage(k.uploadStatus)},{default:(0,e.k6)(()=>[(0,e.bF)(m,{value:s.i18n.failTransfer,"text-color":i.styles[s.theme].failTextColor,"background-color":i.styles[s.theme].failBackgroundColor},null,8,["value","text-color","background-color"])]),_:2},1032,["message"]))],64)):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[k.upgradePending!==null?((0,e.uX)(),(0,e.Wv)(u,{key:0,class:"inner",width:160,position:"center-left",message:s.printUpgradePendingMessage(k.upgradePending)},{default:(0,e.k6)(()=>[(0,e.bF)(m,{value:`${s.i18n.version} (${k.upgradePending.version})`,"text-color":i.styles[s.theme].warningTextColor,"background-color":i.styles[s.theme].warningBackgroundColor},null,8,["value","text-color","background-color"])]),_:2},1032,["message"])):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[k.upgradeStatus!==i.upgradeStatus.NO_PENDING&&k.upgradeStatus!==i.upgradeStatus.NO_SESSION?((0,e.uX)(),(0,e.Wv)(u,{key:0,class:"inner",width:160,position:"center-left",message:s.printUpgradeStatusMessage(k.upgradeStatus)},{default:(0,e.k6)(()=>[(0,e.bF)(m,{value:s.i18n.failTransfer,"text-color":i.styles[s.theme].failTextColor,"background-color":i.styles[s.theme].failBackgroundColor},null,8,["value","text-color","background-color"])]),_:2},1032,["message"])):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.bF)(f,{"language-type":k.languageType,"agent-status":k.status,status:k.jmxConnectionStatus,type:k.jmx.jmxTypeOrZero},null,8,["language-type","agent-status","status","type"]),n[1]||(n[1]=(0,e.eW)()),(0,e.bF)(v,{"language-type":k.languageType,status:k.isProfile},null,8,["language-type","status"]),n[2]||(n[2]=(0,e.eW)()),s.validAutoStacktraceStatus(k)?((0,e.uX)(),(0,e.Wv)(g,{key:0,interval:k.autoStacktrace.autoStacktraceInterval,limit:k.autoStacktrace.autoStacktraceLimit,count:k.autoStacktrace.autoStacktraceCount},null,8,["interval","limit","count"])):(0,e.Q3)("v-if",!0)],64))],64))],64))])]),_:2},1032,["columns","rows","draggable","more-icon","more-icon-message","onMoreIcon","onSort","onDrag","onCheck","onSelect"])]))),256))])),n[16]||(n[16]=(0,e.eW)()),i.selectedInstance!==null?((0,e.uX)(),(0,e.CE)("form",W,[n[10]||(n[10]=(0,e.Lk)("input",{name:"pageType",type:"hidden",value:"agent"},null,-1)),n[11]||(n[11]=(0,e.eW)()),(0,e.Lk)("input",{name:"domainId",type:"hidden",value:i.selectedInstance.sid},null,8,q),n[12]||(n[12]=(0,e.eW)()),(0,e.Lk)("input",{name:"instanceId",type:"hidden",value:i.selectedInstance.instId},null,8,ee),n[13]||(n[13]=(0,e.eW)()),n[14]||(n[14]=(0,e.Lk)("input",{name:"fileName",type:"hidden",value:""},null,-1)),n[15]||(n[15]=(0,e.eW)()),i.selectedInstance.names!==void 0?((0,e.uX)(),(0,e.CE)("input",{key:0,name:"names",type:"hidden",value:JSON.stringify(i.selectedInstance.names)},null,8,K)):(0,e.Q3)("v-if",!0)],512)):(0,e.Q3)("v-if",!0)],64)}var ae=d(62078),b=d(79526),Le=d(39755),le=d(80593),G=d(8355),Se=d(40317),p=d(86617);const re=10,Ae=(0,e.pM)({__name:"JmxStatus",props:{languageType:{},agentStatus:{},status:{},type:{}},setup(t){const n=t,o=(0,e.WQ)("i18n",{}),l=(0,e.EW)(()=>{const s=Object.keys(p.nS),r=Object.values(p.nS).findIndex(u=>u===n.type);return s[r]}),i=(0,e.EW)(()=>{const s={[p.Df.CONNECTED]:o.connected,[p.Df.NOT_CONNECTED]:o.notConnected,[p.Df.UNKNOWN]:o.unknown};return n.status===p.Df.CONNECTED?l.value:`${s[n.status]}`});return(s,c)=>n.languageType===(0,e.R1)(p.sU).JAVA&&n.agentStatus===(0,e.R1)(p.xr).LIVE?((0,e.uX)(),(0,e.Wv)(G.A,{key:0,position:"center-right",message:i.value},{default:(0,e.k6)(()=>[(0,e.Lk)("span",{class:(0,e.C4)(["label-status",n.status===(0,e.R1)(p.Df).CONNECTED?"connected":"not-connected"])},[n.status===(0,e.R1)(p.Df).UNKNOWN?((0,e.uX)(),(0,e.Wv)((0,e.R1)(b.Ah),{key:0,icon:(0,e.R1)(b.B2).help,width:re,height:re},null,8,["icon"])):(0,e.Q3)("v-if",!0),(0,e.eW)(" "+(0,e.v_)((0,e.R1)(o).jmx),1)],2)]),_:1},8,["message"])):(0,e.Q3)("v-if",!0)}});var x=d(35339);const Te=(0,x.A)(Ae,[["__scopeId","data-v-8d8b7144"]]),Ce=(0,e.pM)({__name:"CollectionStatus",props:{languageType:{},status:{type:Boolean}},setup(t){const n=t,o=(0,e.WQ)("i18n",{});return(l,i)=>n.languageType===(0,e.R1)(p.sU).JAVA?((0,e.uX)(),(0,e.CE)("span",{key:0,class:(0,e.C4)(["label-status",n.status?"connected":"not-connected"])},(0,e.v_)((0,e.R1)(o).memory),3)):(0,e.Q3)("v-if",!0)}}),De=(0,x.A)(Ce,[["__scopeId","data-v-10bec8f7"]]),we={class:"label-status connected"},We=(0,e.pM)({__name:"AutoStacktraceStatus",props:{interval:{},limit:{},count:{}},setup(t){const n=t,o=(0,e.WQ)("i18n",{}),l=(0,e.EW)(()=>`${o.criticalTime}: ${n.limit}${o.ms}<br/>
${o.collectInterval}: ${n.interval}${o.ms}<br/>
${o.collectMaxCount}: ${n.count}`);return(i,s)=>((0,e.uX)(),(0,e.Wv)(G.A,{class:"inner label-tooltip",position:"center-left",message:l.value},{default:(0,e.k6)(()=>[(0,e.Lk)("span",we,(0,e.v_)((0,e.R1)(o).autoStacktrace),1)]),_:1},8,["message"]))}}),Me=(0,x.A)(We,[["__scopeId","data-v-503c385c"]]);var $=d(97116);const Oe={screenMode:"list",domainIds:[],domainNameMap:{},checkedInstanceList:[],instanceListInDomain:[],instanceListLoading:!1,selectedInstance:null,instanceTreeNodes:[],instanceTreeLoading:!1,agentOptionLoading:!1,agentCopyProgress:-1,agentUpgradeProgress:-1,agentLogItems:[],jmxWasList:[]},de={},Re={updateInstanceListInDomain(t,n){t.instanceListInDomain=n},updateInstanceListLoading(t,n){t.instanceListLoading=n},addCheckedInstanceIds(t,n){n.forEach(l=>{const i=`${l.sid}:${l.oid}`;de[i]=l.checked});let o=[];t.instanceListInDomain.forEach(l=>{o=[...o,...l.instanceList.filter(i=>de[`${i.sid}:${i.oid}`]===!0)]}),t.checkedInstanceList=o},updateDomainIds(t,n){t.domainIds=n.ids,t.domainNameMap=n.nameMap},selectedDetailInstance(t,n){t.screenMode="modify",t.selectedInstance=n,t.checkedInstanceList=[{...n,checked:!0}]},backToScreenMode(t){t.screenMode="list",t.checkedInstanceIds=new Set,t.selectedInstance=null,t.checkedInstanceList=[]},updateInstanceTreeNodes(t,n){t.instanceTreeNodes=n},updateInstanceTreeLoading(t,n){t.instanceTreeLoading=n},updateAgentOptionLoading(t,n){t.agentOptionLoading=n},upgradeAgentCopyProgress(t,n){t.agentCopyProgress=n},upgradeAgentUpgradeProgress(t,n){t.agentUpgradeProgress=n},updateAgentLogItems(t,n){t.agentLogItems=n},updateJmxWasList(t,n){t.jmxWasList=n}};var T=d(21005),a=d(6373),N=d(53406);function Fe(t){const n=`${t}`;return n.includes(`
`)?n.split(`
`).map(o=>o.trim()).filter(o=>o!==""):[n.trim()]}const Ee={async loadInstanceList({commit:t},{fullNameMap:n,useDomainGroup:o}){t("updateInstanceListLoading",!0);const i=Object.keys(n).map(s=>T.A.get("/agent/upgrade/list",{params:{sid:s}}));T.A.all(i).then(s=>{const c=s.filter(r=>r.data.length>0);t("updateInstanceListInDomain",c.map(r=>{const u=r.data.map(v=>({...v,uploadStatus:-1})),_=n[u[0].sid],m=o?typeof _=="string"?[_]:_:[],f=o?m.pop():_;return{domainId:u[0].sid,parentNames:m,simpleName:f,instanceList:u}})),t("updateInstanceListLoading",!1)})},async removeCheckedInstanceList({state:t}){const n=[];return t.checkedInstanceList.forEach(o=>{n.push(T.A.post("/agent/names/remove",(0,a.$W)({sid:o.sid,oid:o.oid})))}),await T.A.all(n)},async loadInstanceListForTree({commit:t},n){t("updateInstanceTreeLoading",!0);const l=(0,N.sl)(n).map(c=>({...(0,N.Jv)(c.sid,c.label,c.key,c.parent,c.sid===-1?"domainGroup":"domain"),data:null,disable:!0})),i={},s=l.filter(c=>c.sid!==-1).map(c=>(i[c.sid]=c.key,T.A.get("/agent/names",{params:{format:"json",sid:c.sid}}).catch(()=>null)));await T.A.all(s).then(c=>{c.forEach(r=>{r!==null&&r.data.forEach(u=>{l.push({...(0,N.Jv)(u.sid,u.shortName,`${u.sid}/${u.oid}`,i[u.sid],"instance"),data:u})})}),t("updateInstanceTreeNodes",l),t("updateInstanceTreeLoading",!1)})},async preLoadInstanceListForTree({state:t,commit:n,dispatch:o},l){!t.instanceTreeLoading&&t.instanceTreeNodes.length===0?await o("loadInstanceListForTree",l):n("updateInstanceTreeNodes",t.instanceTreeNodes.map(i=>({...i,check:!1,fold:!1})))},async hasPendingInstance({state:t,commit:n}){const{data:o}=await T.A.get(`/api-v2/manage/instance/${t.selectedInstance.sid}/${t.selectedInstance.instId}/has-pending`);n("selectedDetailInstance",{...t.selectedInstance,hasPending:o})},async applyPendingInstance({state:t,commit:n}){await T.A.get("/agent/apply/pending",{params:{sid:t.selectedInstance.sid,oid:t.selectedInstance.oid}}),n("selectedDetailInstance",{...t.selectedInstance,hasPending:!0})},async saveDetailInstance({state:t,commit:n}){await T.A.post("/agent/names/save",(0,a.$W)({sid:t.selectedInstance.sid,oid:t.selectedInstance.oid,shortName:t.selectedInstance.shortName,longName:t.selectedInstance.longName,expired:!0})),n("backToScreenMode")},async loadAgentOptions({state:t,commit:n}){n("updateAgentOptionLoading",!0);const o=await T.A.get("/agent/config/table",{params:{format:"json",langType:t.selectedInstance.languageType,sid:t.selectedInstance.sid,oid:t.selectedInstance.oid}});return n("updateAgentOptionLoading",!1),o},async saveAgentOption({state:t,dispatch:n},o){return await T.A.post("/agent/config/table/save",(0,a.$W)({sid:t.selectedInstance.sid,oid:t.selectedInstance.oid,langType:t.selectedInstance.languageType,version:t.selectedInstance.connectedVersion,keys:[o.key],values:[Fe(o.value).join(`
`)],usingDefaults:[o.usingDefault]}))},async copyAgentOptions({state:t,commit:n},{options:o,nodes:l}){n("updateAgentOptionLoading",!0);const i=(0,N.$y)(l),s=o.map(_=>_.key),c=o.map(_=>_.values.join(`
`)),r=o.map(_=>_.usingDefault),u=[];for(let _ in i)u.push(T.A.post("/agent/config/table/save/multi",(0,a.$W)({sid:_,oids:i[_].oids,langTypes:i[_].langTypes,versions:i[_].versions,keys:s,values:c,usingDefaults:r})).catch(()=>null));await T.A.all(u).then(_=>{n("updateAgentOptionLoading",!1)})},copyAgentSettings({commit:t},{targetNode:n,nodes:o}){t("upgradeAgentCopyProgress",0);const l=(0,N.$y)(o),i=Object.keys(l).length;let s=0;const c=[];for(let r in l)c.push(T.A.post("/agent/setting/copy",(0,a.$W)({sid:n.sid,oid:n.oid,targetSid:r,targetOids:l[r].oids})).catch(()=>null).finally(()=>{s+=1,t("upgradeAgentCopyProgress",s/i)}));T.A.all(c).then(r=>{t("upgradeAgentCopyProgress",-1)})},updateInstanceOrderedList({},{sid:t,oids:n,orders:o}){return T.A.get("/agent/orders",{params:{sid:t,oids:n,orders:o}})},async loadAgentLogFiles({commit:t},{sid:n,instId:o}){const{data:l}=await T.A.get(`/api-v2/manage/log/list/agent/${n}/${o}`);t("updateAgentLogItems",l.map(i=>({path:i.absolutePath,name:i.name,length:i.size,lastModified:i.lastModified,isJenniferLog:i.isJenniferLog})).filter(i=>i.name.endsWith(".log")))},async loadAgentConfigFiles({commit:t},{sid:n,instId:o}){const{data:l}=await T.A.get(`/api-v2/agent-config-file/${n}/${o}`);t("updateAgentLogItems",l)},async loadJmxWasList({commit:t},{sid:n}){const{data:o}=await T.A.get("/dynamicProfile/jmx/list/was",{params:{sid:n,format:"json"}});t("updateJmxWasList",o)},async saveJmxSetting({commit:t},n){return await T.A.post("/dynamicProfile/jmx/save",(0,a.$W)(n))},async saveAutoStacktraceSetting({commit:t},n){return await T.A.post("/dynamicProfile/autoStacktrace/save",(0,a.$W)(n))},async deleteAutoStacktraceSetting({commit:t},n){return await T.A.post("/dynamicProfile/autoStacktrace/remove",(0,a.$W)({sid:n.sid,oids:[n.oid]}))},async saveCollectionStatus({commit:t},n){return await T.A.post("/dynamicProfile/collection/save",(0,a.$W)(n))},async saveDeploySetting({commit:t},n){return await T.A.post("/deploydata/modifieddir/save",(0,a.$W)({sid:n.sid,oid:n.oid,configuredDirs:n.configuredDirList.join(","),allowedExts:n.allowedExtList.join(","),excludeDirs:n.excludeDirList.join(","),checkDepth:n.checkDepth,checkInterval:n.checkInterval,enableHotDeploy:n.enableHotDeploy}))},async deleteDeploySetting({commit:t},n){return await T.A.post("/deploydata/modifieddir/remove",(0,a.$W)({sid:n.sid,oid:n.oid}))}};var ue=d(96539),xe=d(91568),Ne=d(5149),Be=d(11454);const te="instanceSettings",{mapState:J,mapMutations:Q,mapActions:z}=(0,I.$t)(te);$.A.hasModule(te)||$.A.registerModule(te,{namespaced:!0,state:Oe,mutations:Re,actions:Ee}),$.A.hasModule(ue.CU)||$.A.registerModule(ue.CU,{namespaced:!0,state:xe.A,mutations:Ne.A,actions:Be.A});var ce=d(39151),Pe=d(92135);const pe=(0,I.$t)("domainSettings"),je={inject:["i18n","theme","mainSize","isBlockedSystemSetting"],components:{AutoStacktraceStatus:Me,LoadingIndicator:ae.A,SvgIcon:b.Ah,SettingTable:Se.A,CircleLoadingBtn:Le.A,Chip:le.A,Tooltip:G.A,JmxStatus:Te,CollectionStatus:De},props:{expanded:{type:Boolean,required:!0}},computed:{...J({domainIds:t=>t.domainIds,domainNameMap:t=>t.domainNameMap,instanceListInDomain:t=>t.instanceListInDomain,instanceListLoading:t=>t.instanceListLoading}),...pe.mapState({useDomainGroup:t=>t.useDomainGroup,domainGroupTree:t=>t.domainGroupTree}),domainFullNameMap(){const t={},n={};return this.domainGroupTree.filter(o=>o.sid!==-1).forEach(o=>{t[o.sid]=o.index}),this.domainIds.forEach(o=>{const l=(0,N.Ss)(this.domainGroupTree),i=t[o];i!==void 0&&this.useDomainGroup?n[o]=(0,N.p9)(i,[l[i]],l):n[o]=this.domainNameMap[o]}),n},namingAlign(){return ce.n.get("namingAlign")==="rear"?"right":"left"}},watch:{domainIds:{handler(){this.renderSeq+=1,this.loadInstanceList({fullNameMap:this.domainFullNameMap,useDomainGroup:this.useDomainGroup})},deep:!0},expanded:{handler(){this.nameLengthScale=this.createNameLengthScale()},deep:!1}},data(){return{renderSeq:0,styles:{classic:{successBackgroundColor:"#49d484",successTextColor:"#fff",failBackgroundColor:"#ff4f55",failTextColor:"#fff",warningBackgroundColor:"#fddd2f",warningTextColor:"#212121"},dark:{successBackgroundColor:"#49d484",successTextColor:"#fff",failBackgroundColor:"#ff4f55",failTextColor:"#fff",warningBackgroundColor:"#fddd2f",warningTextColor:"#212121"}},columns:[{field:"shortName",label:this.i18n.instanceName,sortable:!0},{field:"ip",label:this.i18n.ip,sortable:!0},{field:"connectedVersion",label:this.i18n.agentVersion,sortable:!0,width:"10%"},{field:"status",label:this.i18n.tcpStatus,width:70,class:"status"},{field:"license_status",label:this.i18n.licenseStatus,width:70,class:"status"},{field:"uploadStatus",label:this.i18n.state,sortable:!1,width:200}],subjectOptions:{iconType:b.B2.arrowRight,iconSize:16},jmxOptions:{iconType:b.B2.dbconnection,iconSize:16},deployOptions:{iconType:b.B2.label,iconSize:12},uploadStatus:p.mR,upgradeStatus:p.$L,moreIcon:b.B2.realtime,selectedInstance:null,nameLengthScale:this.createNameLengthScale()}},methods:{...Q(["addCheckedInstanceIds","selectedDetailInstance"]),...z(["loadInstanceList","loadJmxWasList","updateInstanceOrderedList","loadAgentLogFiles","loadAgentConfigFiles"]),...pe.mapActions(["loadUseDomainGroup","loadDomainGroupTree"]),async onClickTableRow(t,n){this.validJavaAgentStatus(t)&&await this.loadJmxWasList(t),this.selectedDetailInstance({...t,parentNames:n,hasPending:!1})},getLanguageTypeName(t){return`${this.i18n.platform} : ${(0,N.KF)(t.languageType,this.i18n)}`},getAgentStatusClasses(t){return["icon",t===p.DB.RUNNING?"running":"stop"]},validJavaAgentStatus(t){return t.languageType===p.sU.JAVA&&t.status===p.xr.LIVE},validAutoStacktraceStatus(t){return(t.languageType===p.sU.JAVA||t.languageType===p.sU.DOT_NET||t.languageType===p.sU.PHP)&&t.status===p.xr.LIVE&&t.autoStacktrace.supportAutoStacktrace&&t.autoStacktrace.enableAutoStacktrace},validAndExistDeploySetting(t){return(t.languageType===p.sU.JAVA||t.languageType===p.sU.DOT_NET||t.languageType===p.sU.PHP)&&t.status===p.xr.LIVE&&(t.deploy.appliedDirCount>0||t.deploy.configuredDirCount>0)},changeInstanceOrders(t){if(t.length>0){const n=t[0].sid,o=t.map(i=>i.oid),l=Array.from({length:t.length},(i,s)=>s);this.updateInstanceOrderedList({sid:n,oids:o,orders:l})}},cropWithExtension(t,n){const o=ce.n.get("namingAlign")==="rear",l="...";let i=t;return t.length>n&&(o?i=`${l}${t.substr(-(n-l.length))}`:i=`${t.substr(0,n-l.length)}${l}`),i},printUpgradeStatusMessage(t){return(0,N.Y0)(t,this.i18n)},printUpgradePendingMessage(t){return(0,N.tf)(t,this.i18n)},printInstanceName(t){const n=Math.floor(this.nameLengthScale(this.mainSize.width));return n<=0?"":this.cropWithExtension(t,n)},printInstanceInfo(t){const n=[`${this.i18n.domainId} : ${t.sid}`,`${this.i18n.instanceId} : ${t.instId} (${t.oid})`];return t.hostName!==""&&n.push(`${this.i18n.hostName} : ${t.hostName}`),t.longName!==""&&n.push(`${this.i18n.description} : ${t.longName}`),n.join("<br/>")},printInstanceAndDeployInfo(t){return`${t.shortName} (${this.i18n.dirCount} : ${t.deploy.appliedDirCount}/${t.deploy.configuredDirCount})`},createNameLengthScale(){const t=this.expanded?260:0;return(0,Pe.A)().domain([900-t,1300-t]).range([5,20])},onClickMoreIcon(t,n){this.selectedInstance={...t,names:[...n,t.shortName]},setTimeout(()=>{window.open("","logViewer/agent","width=1280,height=800,location='no',history='no',resizable='no',status='no',scrollbars='no',toolbar='no',menubar='no'"),this.$refs.formPopup.submit(),this.selectedInstance=null},100)}},async created(){await this.loadUseDomainGroup(),await this.loadDomainGroupTree(),this.loadInstanceList({fullNameMap:this.domainFullNameMap,useDomainGroup:this.useDomainGroup})}},Ue=(0,x.A)(je,[["render",be],["__scopeId","data-v-25f7d1a4"]]),Xe={class:"tool-bar"},Ke={ref:"fileInput",name:"mng_file",type:"file",class:"file-input"},Je={ref:"fileIframe",name:"upload-iframe"};function Ve(t,n,o,l,i,s){const c=(0,e.g2)("btn"),r=(0,e.g2)("loading-btn"),u=(0,e.g2)("instance-tree-window"),_=(0,e.g2)("popup-list"),m=(0,e.g2)("layered-menu"),f=(0,e.g2)("server-log-window"),v=(0,e.g2)("alert-window"),g=(0,e.g2)("confirm-window");return(0,e.uX)(),(0,e.CE)("div",Xe,[t.selectedInstance===null?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[t.agentCopyProgress===-1?((0,e.uX)(),(0,e.Wv)(c,{key:0,class:"border-none",normal:"","icon-first":"",disabled:s.checkedValidInstanceCount!==1||s.checkedInvalidInstanceCount>0||s.isBlockedSystemSetting,items:[{text:s.i18n.copySetting,iconType:i.iconTypes.copy}],onClick:s.onClickAgentCopyButton},null,8,["disabled","items","onClick"])):((0,e.uX)(),(0,e.Wv)(r,{key:1,progress:t.agentCopyProgress,suspendible:!1},null,8,["progress"])),n[8]||(n[8]=(0,e.eW)()),i.instanceTreeWindowOptions.active?((0,e.uX)(),(0,e.Wv)(u,{key:2,title:s.i18n.copyAgentSettings,message:"",left:i.instanceTreeWindowOptions.left,top:i.instanceTreeWindowOptions.top,"instance-tree":t.instanceTreeNodes,"target-instance":t.checkedInstanceList[0],onCancel:s.onCancelInstanceTreeWindow,onApply:s.onShowConfirmCopyWindow},null,8,["title","left","top","instance-tree","target-instance","onCancel","onApply"])):(0,e.Q3)("v-if",!0),n[9]||(n[9]=(0,e.eW)()),t.agentUpgradeProgress===-1?((0,e.uX)(),(0,e.Wv)(c,{key:3,class:"border-none",normal:"","icon-first":"",disabled:s.checkedValidInstanceCount===0||s.checkedInvalidInstanceCount>0||s.isBlockedSystemSetting,items:[{text:s.i18n.upgrade,iconType:i.iconTypes.arrowUpward}],onClick:s.onClickAgentUpgradeButton},null,8,["disabled","items","onClick"])):((0,e.uX)(),(0,e.Wv)(r,{key:4,progress:t.agentUpgradeProgress,suspendible:!1},null,8,["progress"])),n[10]||(n[10]=(0,e.eW)()),n[11]||(n[11]=(0,e.Lk)("div",{class:"splitter"},null,-1))],64)):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.bF)(c,{class:"border-none",normal:"","icon-first":"",disabled:!s.validSelectedInstance,pressed:i.activeAgentLogMenu,items:[{iconType:i.iconTypes.summary,text:s.i18n.logWatcher}],onClick:n[0]||(n[0]=()=>i.activeAgentLogMenu=!i.activeAgentLogMenu)},null,8,["disabled","pressed","items"]),n[12]||(n[12]=(0,e.eW)()),i.activeAgentLogMenu?((0,e.uX)(),(0,e.Wv)(m,{key:0,width:240,top:36,right:36},{default:(0,e.k6)(()=>[(0,e.bF)(_,{"no-scroll":"",normal:"",items:[{text:s.i18n.agentLog},{text:s.i18n.agentConfigFile}],"onUpdate:activeIndex":s.onSelectAgentLogMenu},null,8,["items","onUpdate:activeIndex"])]),_:1})):(0,e.Q3)("v-if",!0),n[13]||(n[13]=(0,e.eW)()),i.agentLogType!=="none"?((0,e.uX)(),(0,e.Wv)(f,{key:1,type:i.agentLogType,"data-server-items":[],"log-items":t.agentLogItems,"api-ids":[t.selectedInstance.sid,t.selectedInstance.oid,t.selectedInstance.instId],names:[...t.selectedInstance.parentNames,t.selectedInstance.shortName],onCancel:n[1]||(n[1]=()=>i.agentLogType="none")},null,8,["type","log-items","api-ids","names"])):(0,e.Q3)("v-if",!0)],64)),n[18]||(n[18]=(0,e.eW)()),(0,e.bF)(c,{class:"border-none",normal:"","icon-first":"",disabled:s.checkedInvalidInstanceCount===0||s.checkedValidInstanceCount>0||s.isBlockedSystemSetting,items:[{iconType:i.iconTypes.trashcan}],"tooltip-options":{message:s.i18n.delete},onClick:s.onClickAgentRemoveButton},null,8,["disabled","items","tooltip-options","onClick"]),n[19]||(n[19]=(0,e.eW)()),((0,e.uX)(),(0,e.CE)("form",{ref:"fileForm",action:"/agent/upgrade/upload",method:"post",target:"upload-iframe",enctype:"multipart/form-data",key:i.uploadForm.key},[(0,e.Lk)("input",Ke,null,512),n[14]||(n[14]=(0,e.eW)()),(0,e.bo)((0,e.Lk)("input",{name:"sid",type:"hidden","onUpdate:modelValue":n[2]||(n[2]=S=>i.uploadForm.sid=S)},null,512),[[e.Jo,i.uploadForm.sid]]),n[15]||(n[15]=(0,e.eW)()),(0,e.bo)((0,e.Lk)("input",{name:"oid",type:"hidden","onUpdate:modelValue":n[3]||(n[3]=S=>i.uploadForm.oid=S)},null,512),[[e.Jo,i.uploadForm.oid]]),n[16]||(n[16]=(0,e.eW)()),(0,e.bo)((0,e.Lk)("input",{name:"fileName",type:"hidden","onUpdate:modelValue":n[4]||(n[4]=S=>i.uploadForm.fileName=S)},null,512),[[e.Jo,i.uploadForm.fileName]]),n[17]||(n[17]=(0,e.eW)()),(0,e.Lk)("iframe",Je,null,512)])),n[20]||(n[20]=(0,e.eW)()),i.alertMessage!==""?((0,e.uX)(),(0,e.Wv)(v,{key:2,message:i.alertMessage,onCancel:n[5]||(n[5]=()=>i.alertMessage="")},null,8,["message"])):(0,e.Q3)("v-if",!0),n[21]||(n[21]=(0,e.eW)()),i.confirmMessageForRemove!==""?((0,e.uX)(),(0,e.Wv)(g,{key:3,message:i.confirmMessageForRemove,onCancel:n[6]||(n[6]=()=>i.confirmMessageForRemove=""),onApply:s.onConfirmRemoveInstances},null,8,["message","onApply"])):(0,e.Q3)("v-if",!0),n[22]||(n[22]=(0,e.eW)()),i.confirmMessageForCopy!==""?((0,e.uX)(),(0,e.Wv)(g,{key:4,message:i.confirmMessageForCopy,onCancel:n[7]||(n[7]=()=>i.confirmMessageForCopy=""),onApply:s.onApplyInstanceTreeWindow},null,8,["message","onApply"])):(0,e.Q3)("v-if",!0)])}var ne=d(90194),U=d(35375),Ge=d(48121);const Qe={key:0,class:"message"},He={class:"search"};function ze(t,n,o,l,i,s){const c=(0,e.g2)("search"),r=(0,e.g2)("tree-selector"),u=(0,e.g2)("window");return(0,e.uX)(),(0,e.Wv)(u,{class:"instance-tree-window",messages:{apply:s.i18n.apply,cancel:s.i18n.cancel},draggable:!0,resizable:!1,"open-x":o.left,"open-y":o.top,"open-w":i.width,"open-h":i.height,"onUpdate:openX":n[1]||(n[1]=_=>t.$emit("update:left",_)),"onUpdate:openY":n[2]||(n[2]=_=>t.$emit("update:top",_)),onCancel:s.onClickCancelBtn,onApply:s.onClickApplyBtn},{subject:(0,e.k6)(()=>[(0,e.eW)((0,e.v_)(o.title),1)]),default:(0,e.k6)(()=>[n[3]||(n[3]=(0,e.eW)()),o.message!==""?((0,e.uX)(),(0,e.CE)("div",Qe,(0,e.v_)(o.message),1)):(0,e.Q3)("v-if",!0),n[4]||(n[4]=(0,e.eW)()),(0,e.Lk)("div",He,[(0,e.bF)(c,{small:"",placeholder:s.i18n.search,width:i.width-40,value:i.searchKeyword,"onUpdate:value":n[0]||(n[0]=_=>i.searchKeyword=_),onSearch:s.onFilterInstanceTree,onClear:s.onFilterInstanceTree},null,8,["placeholder","width","value","onSearch","onClear"])]),n[5]||(n[5]=(0,e.eW)()),((0,e.uX)(),(0,e.Wv)(r,{key:i.renderKey,tree:i.filteredInstanceTree,"leaf-icon-for-multi-select":"instance","multi-select":!0,width:i.width-36,height:s.treeSelectorHeight,onChange:s.onChangeTreeNodes},null,8,["tree","width","height","onChange"]))]),_:1,__:[3,4,5]},8,["messages","open-x","open-y","open-w","open-h","onCancel","onApply"])}var Ye=d(67281),ge=d(87469),Ze=d(97099);const qe={inject:["i18n"],components:{Window:Ye.A,Search:ge.A,TreeSelector:Ze.A},emits:["update:left","update:top","cancel","apply"],props:{title:{type:String,required:!0},message:{type:String,required:!1,default:""},left:{type:Number,required:!1,default:0},top:{type:Number,required:!1,default:0},instanceTree:{type:Array,required:!0},targetInstance:{type:Object,required:!0}},computed:{treeSelectorHeight(){const t=this.message===""?44:0;return this.height-212+t}},watch:{instanceTree(t){this.filteredInstanceTree=this.validatedInstanceTree(t)}},data(){return{renderKey:1,width:400,height:520,searchKeyword:"",filteredInstanceTree:this.validatedInstanceTree(this.instanceTree),checkedInstanceList:[]}},methods:{onClickCancelBtn(){this.$emit("cancel")},onClickApplyBtn(){this.$emit("apply",this.checkedInstanceList)},onChangeTreeNodes(t){this.checkedInstanceList=t.filter(n=>n.icon==="instance").map(n=>n.data)},onFilterInstanceTree(){const t=this.validatedInstanceTree(this.instanceTree);if(this.searchKeyword==="")this.filteredInstanceTree=t;else{const n=t.filter(m=>m.label.toLowerCase().indexOf(this.searchKeyword.toLowerCase())!==-1),o=new Map;t.forEach(m=>{o.set(m.key,m)});const l=(m,f=new Set)=>{if(!m.parent)return f;const v=o.get(m.parent);return v&&(f.add(v),l(v,f)),f},i=m=>t.filter(f=>f.parent===m.key),s=(m,f=new Set)=>(i(m).forEach(g=>{f.add(g),g.icon==="domain"&&s(g,f)}),f),c=new Set;n.forEach(m=>{l(m).forEach(v=>c.add(v))});const r=new Map;[...n,...Array.from(c)].forEach(m=>{r.set(m.key,m)});const u=new Set;Array.from(r.values()).filter(m=>m.icon==="domain").forEach(m=>{const f=i(m);!f.some(g=>r.has(g.key))&&f.length>0&&s(m).forEach(S=>u.add(S))}),Array.from(u).forEach(m=>{r.set(m.key,m)}),this.filteredInstanceTree=Array.from(r.values())}this.renderKey+=1},validatedInstanceTree(t){const n=new Map;t.forEach(l=>{n.set(l.key,l)});const o=new Map;return t.forEach(l=>{if(l.parent){const i=o.get(l.parent)||0;o.set(l.parent,i+1)}}),t.filter(l=>{if(l.icon==="instance"){if(l.data.sid===this.targetInstance.sid&&l.data.oid===this.targetInstance.oid&&!(l.data.status!==p.DB.RUNNING||l.data.license_status!==p.DB.RUNNING||l.data.languageType!==this.targetInstance.languageType))return!1}else if((o.get(l.key)||0)===0)return!1;return!0}).map(l=>({...l,disable:!1}))}}},_e=(0,x.A)(qe,[["render",ze],["__scopeId","data-v-0e1def4e"]]);var $e=d(19766),et=d(998),tt=d(46242),nt=d(10935);const st=(0,I.$t)("domainSettings"),it={inject:["i18n","isBlockedSystemSetting"],components:{ConfirmWindow:nt.A,LayeredMenu:et.A,PopupList:$e.A,Btn:U.A,LoadingBtn:Ge.A,InstanceTreeWindow:_e,AlertWindow:ne.A,ServerLogWindow:tt.A},computed:{...st.mapState({useDomainGroup:t=>t.useDomainGroup,domainGroupTree:t=>t.domainGroupTree}),...J({selectedInstance:t=>t.selectedInstance,checkedInstanceList:t=>t.checkedInstanceList,instanceListInDomain:t=>t.instanceListInDomain,instanceTreeNodes:t=>t.instanceTreeNodes,instanceTreeLoading:t=>t.instanceTreeLoading,agentCopyProgress:t=>t.agentCopyProgress,agentUpgradeProgress:t=>t.agentUpgradeProgress,agentLogItems:t=>t.agentLogItems}),checkedValidInstanceCount(){return this.checkedInstanceList.filter(t=>t.status===p.DB.RUNNING&&t.license_status===p.DB.RUNNING).length},checkedInvalidInstanceCount(){return this.checkedInstanceList.filter(t=>t.status!==p.DB.RUNNING||t.license_status!==p.DB.RUNNING).length},validSelectedInstance(){return this.selectedInstance!==null&&this.selectedInstance.status===p.DB.RUNNING&&this.selectedInstance.license_status===p.DB.RUNNING}},watch:{validatedInstanceList(t){t.length===0&&(this.instanceTreeWindowOptions.active=!1)}},data(){return{iconTypes:{copy:b.B2.copy,arrowUpward:b.B2.arrowUpward,trashcan:b.B2.trashcan,summary:b.B2.summary},instanceTreeWindowOptions:{active:!1,left:this.getWindowLeft(),top:118},uploadForm:{key:0,sid:-1,oid:-1,fileName:""},fileHandler:null,iframeHandler:null,alertMessage:"",confirmMessageForRemove:"",confirmMessageForCopy:"",activeAgentLogMenu:!1,agentLogType:"none",agentLogPayload:{domainId:-1,instanceId:-1},agentCopyNodes:[]}},methods:{...Q(["upgradeAgentUpgradeProgress"]),...z(["preLoadInstanceListForTree","copyAgentSettings","removeCheckedInstanceList","loadAgentLogFiles","loadAgentConfigFiles"]),onClickAgentRemoveButton(){this.confirmMessageForRemove=this.i18n.M0270},async onConfirmRemoveInstances(){await this.removeCheckedInstanceList(),this.$emit("reload"),this.confirmMessageForRemove=""},async onClickAgentCopyButton(){const t=this.useDomainGroup&&this.domainGroupTree.filter(n=>n.sid>-1).length>0?this.domainGroupTree:[{index:"0",sid:-1,title:this.i18n.unknownGroup},{index:"0.0",sid:this.instanceListInDomain[0].domainId,title:this.instanceListInDomain[0].simpleName}];await this.preLoadInstanceListForTree(t),this.instanceTreeWindowOptions.left=this.getWindowLeft(),this.instanceTreeWindowOptions.active=!this.instanceTreeWindowOptions.active,this.confirmMessageForCopy=""},onShowConfirmCopyWindow(t){this.agentCopyNodes=t,this.instanceTreeWindowOptions.active=!1,this.confirmMessageForCopy=this.i18n.T0100.split("%d").join(t.length)},onCancelInstanceTreeWindow(){this.agentCopyNodes=[],this.instanceTreeWindowOptions.active=!1,this.confirmMessageForCopy=""},async onApplyInstanceTreeWindow(){const t=this.agentCopyNodes;t===void 0||t.length===0||(t.length>0?(this.instanceTreeWindowOptions.active=!1,await this.copyAgentSettings({targetNode:this.checkedInstanceList[0],nodes:t})):this.alertMessage=this.i18n.M0026,this.onCancelInstanceTreeWindow())},async onClickAgentUpgradeButton(){const t=this;this.fileHandler!==null&&(this.$refs.fileInput.removeEventListener("change",this.fileHandler),this.fileHandler=null),this.fileHandler=function(){const n=this.files[0];if(n){if(!n.name.endsWith(".zip")&&!n.name.endsWith(".whl")){t.alertMessage=t.i18n.M0079;return}if(n.size>629145600){t.alertMessage=t.i18n.M0080;return}t.uploadForm.fileName=n.name,t.uploadAgentFiles(0,t.checkedInstanceList)}},this.$refs.fileInput.click(),this.$refs.fileInput.addEventListener("change",this.fileHandler)},getWindowLeft(){return window.innerWidth-572-24},uploadAgentFiles(t=0,n=[]){const o=n[t],l=t+1,i=this.instanceListInDomain.findIndex(r=>r.domainId===o.sid),s=this.instanceListInDomain[i].instanceList.findIndex(r=>r.oid===o.oid),c=this.instanceListInDomain[i].instanceList;c[s].uploadStatus=0,this.upgradeAgentUpgradeProgress(0),this.iframeHandler!==null&&(this.$refs.fileIframe.removeEventListener("load",this.iframeHandler),this.iframeHandler=null),this.iframeHandler=r=>{const u=parseInt(r.target.contentDocument.body.innerText);this.selectedInstance!==null?this.alertMessage=(0,N.Y0)(u,this.i18n):(c[s]={...c[s],uploadStatus:u},this.instanceListInDomain[i].instanceList=[...c]),l<n.length?(this.upgradeAgentUpgradeProgress(l/n.length),this.uploadAgentFiles(l,n)):(this.upgradeAgentUpgradeProgress(-1),this.uploadForm.key+=1)},this.uploadForm={...this.uploadForm,sid:o.sid,oid:o.oid},setTimeout(()=>{this.$refs.fileForm.submit()},100),this.$refs.fileIframe.addEventListener("load",this.iframeHandler)},async onSelectAgentLogMenu(t){try{t===0?await this.loadAgentLogFiles({sid:this.selectedInstance.sid,instId:this.selectedInstance.instId}):await this.loadAgentConfigFiles({sid:this.selectedInstance.sid,instId:this.selectedInstance.instId}),this.agentLogType=t===0?"agent":"config"}catch{this.alertMessage=this.i18n.text0001}this.activeAgentLogMenu=!1}}},ot=(0,x.A)(it,[["render",Ve],["__scopeId","data-v-be45dcdc"]]),at={class:"back-button"},lt={class:"left"},rt={class:"right"},dt={class:"parent-names"},ut={class:"name"};function ct(t,n,o,l,i,s){const c=(0,e.g2)("btn"),r=(0,e.g2)("svg-icon");return(0,e.uX)(),(0,e.CE)("div",at,[(0,e.Lk)("div",lt,[(0,e.bF)(c,{normal:"",class:"border-none",items:[{iconType:i.backOptions.iconType}],"tooltip-options":{message:s.i18n.goBack},onClick:t.backToScreenMode},null,8,["items","tooltip-options","onClick"])]),n[1]||(n[1]=(0,e.eW)()),(0,e.Lk)("div",rt,[(0,e.Lk)("div",dt,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(t.selectedInstance.parentNames,(u,_)=>((0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.eW)((0,e.v_)(u)+" ",1),_<t.selectedInstance.parentNames.length-1?((0,e.uX)(),(0,e.Wv)(r,{key:0,icon:i.subjectOptions.iconType,width:i.subjectOptions.iconSize,height:i.subjectOptions.iconSize},null,8,["icon","width","height"])):(0,e.Q3)("v-if",!0)],64))),256))]),n[0]||(n[0]=(0,e.eW)()),(0,e.Lk)("div",ut,(0,e.v_)(t.selectedInstance.shortName),1)])])}const pt={inject:["i18n"],components:{Btn:U.A,SvgIcon:b.Ah},data(){return{backOptions:{iconType:b.B2.arrowBack},subjectOptions:{iconType:b.B2.arrowRight,iconSize:16}}},computed:{...J({selectedInstance:t=>t.selectedInstance})},methods:{...Q(["backToScreenMode"])}},gt=(0,x.A)(pt,[["render",ct],["__scopeId","data-v-abdc6942"]]),_t={class:"detail-instance"},mt={class:"row basic"},vt={class:"left"},ht={class:"right"},yt={class:"form"},ft={class:"subject"},kt={class:"input"},It={class:"form"},bt={class:"subject"},Lt={class:"input"},St={class:"row-group"},At={class:"row"},Tt={class:"left"},Ct={class:"right"},Dt={class:"row"},wt={class:"left"},Wt={class:"right"},Mt={class:"row"},Ot={class:"left"},Rt={class:"right"},Ft={class:"row"},Et={class:"left"},xt={class:"right"},Nt={class:"row"},Bt={class:"left"},Pt={class:"right"},jt={class:"row"},Ut={class:"left"},Xt={class:"right"},Kt={class:"row"},Jt={class:"left"},Vt={class:"right"},Gt={class:"row"},Qt={class:"left"},Ht={class:"right"},zt={class:"row"},Yt={class:"left"},Zt={class:"right"},qt={key:1},$t={key:0,class:"row"},en={class:"left"},tn={class:"right"},nn={key:1,class:"row"},sn={class:"left"},on={class:"right"},an={key:2,class:"row"},ln={class:"left"},rn={class:"right"},dn={key:3,class:"row"},un={class:"left"},cn={class:"right"},pn={class:"footer"};function gn(t,n,o,l,i,s){const c=(0,e.g2)("tab"),r=(0,e.g2)("input-field"),u=(0,e.g2)("toggle-switch"),_=(0,e.g2)("auto-stacktrace-setting"),m=(0,e.g2)("jmx-setting"),f=(0,e.g2)("deploy-setting"),v=(0,e.g2)("btn"),g=(0,e.g2)("agent-options"),S=(0,e.g2)("alert-window");return(0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.Lk)("div",_t,[(0,e.bF)(c,{normal:"",tabs:s.tabItems,"active-tab":i.activeTab,onChange:s.onChangeTab},null,8,["tabs","active-tab","onChange"]),n[37]||(n[37]=(0,e.eW)()),i.activeTab==="detail"?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.Lk)("div",mt,[(0,e.Lk)("div",vt,(0,e.v_)(s.i18n.defaultSetting),1),n[8]||(n[8]=(0,e.eW)()),(0,e.Lk)("div",ht,[(0,e.Lk)("div",yt,[(0,e.Lk)("div",ft,(0,e.v_)(s.i18n.instanceName),1),n[5]||(n[5]=(0,e.eW)()),(0,e.Lk)("div",kt,[(0,e.bF)(r,{normal:"",validator:s.validCheckShortName,disabled:t.instance.usingInstanceNameFromAgent,value:t.instance.shortName,"onUpdate:value":n[0]||(n[0]=R=>t.instance.shortName=R)},null,8,["validator","disabled","value"])])]),n[7]||(n[7]=(0,e.eW)()),(0,e.Lk)("div",It,[(0,e.Lk)("div",bt,(0,e.v_)(s.i18n.description),1),n[6]||(n[6]=(0,e.eW)()),(0,e.Lk)("div",Lt,[(0,e.bF)(r,{normal:"",validator:s.validCheckLongName,value:t.instance.longName,"onUpdate:value":n[1]||(n[1]=R=>t.instance.longName=R)},null,8,["validator","value"])])])])]),n[31]||(n[31]=(0,e.eW)()),(0,e.Lk)("div",St,[(0,e.Lk)("div",At,[(0,e.Lk)("div",Tt,(0,e.v_)(s.i18n.hostName),1),n[9]||(n[9]=(0,e.eW)()),(0,e.Lk)("div",Ct,(0,e.v_)(t.instance.hostName),1)]),n[18]||(n[18]=(0,e.eW)()),(0,e.Lk)("div",Dt,[(0,e.Lk)("div",wt,(0,e.v_)(s.i18n.configFileName),1),n[10]||(n[10]=(0,e.eW)()),(0,e.Lk)("div",Wt,(0,e.v_)(t.instance.confFilePath),1)]),n[19]||(n[19]=(0,e.eW)()),(0,e.Lk)("div",Mt,[(0,e.Lk)("div",Ot,(0,e.v_)(s.i18n.domainId),1),n[11]||(n[11]=(0,e.eW)()),(0,e.Lk)("div",Rt,(0,e.v_)(t.instance.sid),1)]),n[20]||(n[20]=(0,e.eW)()),(0,e.Lk)("div",Ft,[(0,e.Lk)("div",Et,(0,e.v_)(s.i18n.instanceId)+" (OID)",1),n[12]||(n[12]=(0,e.eW)()),(0,e.Lk)("div",xt,(0,e.v_)(t.instance.instId)+" ("+(0,e.v_)(t.instance.oid)+`)
                    `,1)]),n[21]||(n[21]=(0,e.eW)()),(0,e.Lk)("div",Nt,[(0,e.Lk)("div",Bt,(0,e.v_)(s.i18n.ip)+" ("+(0,e.v_)(s.i18n.hostAddress)+`)
                    `,1),n[13]||(n[13]=(0,e.eW)()),(0,e.Lk)("div",Pt,(0,e.v_)(t.instance.ip)+" ("+(0,e.v_)(t.instance.hostAddress)+`)
                    `,1)]),n[22]||(n[22]=(0,e.eW)()),(0,e.Lk)("div",jt,[(0,e.Lk)("div",Ut,(0,e.v_)(s.i18n.platform),1),n[14]||(n[14]=(0,e.eW)()),(0,e.Lk)("div",Xt,(0,e.v_)(s.getLanguageTypeName(t.instance.languageType)),1)]),n[23]||(n[23]=(0,e.eW)()),(0,e.Lk)("div",Kt,[(0,e.Lk)("div",Jt,(0,e.v_)(s.i18n.os),1),n[15]||(n[15]=(0,e.eW)()),(0,e.Lk)("div",Vt,(0,e.v_)(t.instance.os),1)]),n[24]||(n[24]=(0,e.eW)()),(0,e.Lk)("div",Gt,[(0,e.Lk)("div",Qt,(0,e.v_)(s.i18n.agentVersion),1),n[16]||(n[16]=(0,e.eW)()),(0,e.Lk)("div",Ht,(0,e.v_)(t.instance.connectedVersion),1)]),n[25]||(n[25]=(0,e.eW)()),(0,e.Lk)("div",zt,[(0,e.Lk)("div",Yt,(0,e.v_)(s.i18n.optionsPending),1),n[17]||(n[17]=(0,e.eW)()),(0,e.Lk)("div",Zt,[t.instance.hasPending?((0,e.uX)(),(0,e.CE)("span",{key:0,class:"has-pending",onClick:n[2]||(n[2]=(...R)=>t.applyPendingInstance&&t.applyPendingInstance(...R))},"PENDING")):((0,e.uX)(),(0,e.CE)("span",qt,(0,e.v_)(s.i18n.none),1))])])]),n[32]||(n[32]=(0,e.eW)()),s.validJavaAgentStatus?((0,e.uX)(),(0,e.CE)("div",$t,[(0,e.Lk)("div",en,(0,e.v_)(s.i18n.memory)+"("+(0,e.v_)(s.i18n.collection)+")",1),n[26]||(n[26]=(0,e.eW)()),(0,e.Lk)("div",tn,[(0,e.bF)(u,{normal:"",active:i.collectionStatus,"onUpdate:active":n[3]||(n[3]=R=>i.collectionStatus=R)},null,8,["active"])])])):(0,e.Q3)("v-if",!0),n[33]||(n[33]=(0,e.eW)()),s.validAutoStacktraceStatus?((0,e.uX)(),(0,e.CE)("div",nn,[(0,e.Lk)("div",sn,(0,e.v_)(s.i18n.autoStacktrace),1),n[27]||(n[27]=(0,e.eW)()),(0,e.Lk)("div",on,[(0,e.bF)(_,{onUpdate:s.onUpdateAutoStacktraceFormData,sid:t.instance.sid,oid:t.instance.oid,data:t.instance.autoStacktrace},null,8,["onUpdate","sid","oid","data"])])])):(0,e.Q3)("v-if",!0),n[34]||(n[34]=(0,e.eW)()),s.validJavaAgentStatus?((0,e.uX)(),(0,e.CE)("div",an,[(0,e.Lk)("div",ln,(0,e.v_)(s.i18n.jmxSetting),1),n[28]||(n[28]=(0,e.eW)()),(0,e.Lk)("div",rn,[(0,e.bF)(m,{onUpdate:s.onUpdateJmxFormData,sid:t.instance.sid,oid:t.instance.oid,status:t.instance.jmxConnectionStatus,data:t.instance.jmx},null,8,["onUpdate","sid","oid","status","data"])])])):(0,e.Q3)("v-if",!0),n[35]||(n[35]=(0,e.eW)()),s.validDefaultAgentStatus?((0,e.uX)(),(0,e.CE)("div",dn,[(0,e.Lk)("div",un,(0,e.v_)(s.i18n.applicationHistory),1),n[29]||(n[29]=(0,e.eW)()),(0,e.Lk)("div",cn,[(0,e.bF)(f,{onUpdate:s.onUpdateDeployFormData,sid:t.instance.sid,oid:t.instance.oid,"language-type":t.instance.languageType,data:t.instance.deploy},null,8,["onUpdate","sid","oid","language-type","data"])])])):(0,e.Q3)("v-if",!0),n[36]||(n[36]=(0,e.eW)()),(0,e.Lk)("div",pn,[(0,e.bF)(v,{class:"border-none",normal:"",items:[{text:s.i18n.cancel}],onClick:t.backToScreenMode},null,8,["items","onClick"]),n[30]||(n[30]=(0,e.eW)()),(0,e.bF)(v,{class:"primary",normal:"",disabled:s.isDuplicated||s.isInvalidated||s.isBlockedSystemSetting,loading:i.saveLoading,items:[{text:s.i18n.saveChanges}],onClick:s.onClickSaveButton},null,8,["disabled","loading","items","onClick"])])],64)):((0,e.uX)(),(0,e.Wv)(g,{key:1}))]),n[38]||(n[38]=(0,e.eW)()),i.alertMessage!==""?((0,e.uX)(),(0,e.Wv)(S,{key:0,message:i.alertMessage,onCancel:n[4]||(n[4]=R=>i.alertMessage="")},null,8,["message"])):(0,e.Q3)("v-if",!0)],64)}var me=d(80805),_n=d(20251),ve=d(11649);const mn={class:"jmx-setting"},vn={class:"top"},hn={class:"bottom"},yn={key:0,class:"input-group"},fn={key:1,class:"input-group"},kn={key:2,class:"input-group"},In={key:3,class:"input-group"},bn={key:4,class:"input-group"};function Ln(t,n,o,l,i,s){const c=(0,e.g2)("dropdown"),r=(0,e.g2)("btn"),u=(0,e.g2)("input-field"),_=(0,e.g2)("format-number-input"),m=(0,e.g2)("password-input");return(0,e.uX)(),(0,e.CE)("div",mn,[(0,e.Lk)("div",vn,[(0,e.bF)(c,{normal:"",width:280,items:t.dropdownItems,"selected-value":t.formData.type,onOnchange:t.onChangeJmxType},null,8,["items","selected-value","onOnchange"]),n[5]||(n[5]=(0,e.eW)()),t.validJmxStatus?(0,e.Q3)("v-if",!0):((0,e.uX)(),(0,e.Wv)(r,{key:0,normal:"",class:"border-none",items:[{iconType:t.iconType}],"tooltip-options":{message:t.i18n.M0470,position:"center-right"}},null,8,["items","tooltip-options"]))]),n[15]||(n[15]=(0,e.eW)()),(0,e.Lk)("div",hn,[t.isRequireHost?((0,e.uX)(),(0,e.CE)("div",yn,[(0,e.Lk)("div",null,(0,e.v_)(t.i18n.host),1),n[6]||(n[6]=(0,e.eW)()),(0,e.bF)(u,{normal:"",value:t.formData.host,"onUpdate:value":n[0]||(n[0]=f=>t.formData.host=f),onInput:t.onInputJmxFormData},null,8,["value","onInput"])])):(0,e.Q3)("v-if",!0),n[11]||(n[11]=(0,e.eW)()),t.isRequirePort?((0,e.uX)(),(0,e.CE)("div",fn,[(0,e.Lk)("div",null,(0,e.v_)(t.i18n.port),1),n[7]||(n[7]=(0,e.eW)()),(0,e.bF)(_,{normal:"",value:t.formData.port,"onUpdate:value":n[1]||(n[1]=f=>t.formData.port=f),onInput:t.onInputJmxFormData},null,8,["value","onInput"])])):(0,e.Q3)("v-if",!0),n[12]||(n[12]=(0,e.eW)()),t.isRequireIdPassword?((0,e.uX)(),(0,e.CE)("div",kn,[(0,e.Lk)("div",null,(0,e.v_)(t.i18n.id),1),n[8]||(n[8]=(0,e.eW)()),(0,e.bF)(u,{normal:"",value:t.formData.id,"onUpdate:value":n[2]||(n[2]=f=>t.formData.id=f),onInput:t.onInputJmxFormData},null,8,["value","onInput"])])):(0,e.Q3)("v-if",!0),n[13]||(n[13]=(0,e.eW)()),t.isRequireIdPassword?((0,e.uX)(),(0,e.CE)("div",In,[(0,e.Lk)("div",null,(0,e.v_)(t.i18n.password),1),n[9]||(n[9]=(0,e.eW)()),(0,e.bF)(m,{normal:"",value:t.formData.password,"onUpdate:value":n[3]||(n[3]=f=>t.formData.password=f),onInput:t.onInputJmxFormData},null,8,["value","onInput"])])):(0,e.Q3)("v-if",!0),n[14]||(n[14]=(0,e.eW)()),t.isSupportJmxServerName?((0,e.uX)(),(0,e.CE)("div",bn,[(0,e.Lk)("div",null,(0,e.v_)(t.i18n.serverName),1),n[10]||(n[10]=(0,e.eW)()),(0,e.bF)(u,{normal:"",value:t.formData.serverName,"onUpdate:value":n[4]||(n[4]=f=>t.formData.serverName=f),onInput:t.onInputJmxFormData},null,8,["value","onInput"])])):(0,e.Q3)("v-if",!0)])])}var he=d(65267),V=d(97953),Sn=d(70140);const An=(0,e.pM)({inject:["i18n"],emits:["update"],components:{Dropdown:he.A,FormatNumberInput:V.A,PasswordInput:Sn.A,InputField:ve.A,Btn:U.A},props:{sid:{type:Number,required:!0},oid:{type:Number,required:!0},status:{type:Number,required:!0},data:{type:Object,required:!0}},computed:{...J({jmxWasList:t=>t.jmxWasList}),cacheWasTypes(){const t={};return this.jmxWasList.forEach(n=>{t[n.key]=n}),t},dropdownItems(){return[{value:0,text:this.i18n.M0208}].concat(this.jmxWasList.map(t=>({value:t.key,text:t.name})))},isRequireHost(){const t=this.formData.type;return this.cacheWasTypes[t]&&this.cacheWasTypes[t].isRequireHost},isRequirePort(){const t=this.formData.type;return this.cacheWasTypes[t]&&this.cacheWasTypes[t].isRequirePort},isRequireIdPassword(){const t=this.formData.type;return t===p.nS.WILDFLY15_30||this.cacheWasTypes[t]&&this.cacheWasTypes[t].isRequireIdPassword},isSupportJmxServerName(){const t=this.formData.type;return this.cacheWasTypes[t]&&this.cacheWasTypes[t].isRequireServerName},validJmxStatus(){return this.status===p.Df.CONNECTED}},data(){return{formData:{sid:this.sid,oid:this.oid,type:this.data.jmxTypeOrZero,host:this.data.hostOrEmpty,port:this.data.portOrN1,id:this.data.idOrEmpty,password:this.data.passwordOrEmpty,serverName:this.data.jmxServerNameOrEmpty},iconType:b.B2.info}},methods:{onChangeJmxType({value:t}){this.formData.type=t,this.formData.host="",this.formData.port=-1,this.formData.id="",this.formData.password="",this.formData.serverName="",this.onInputJmxFormData()},onInputJmxFormData(){this.$emit("update",{data:this.formData,status:{host:this.isRequireHost,port:this.isRequirePort,idPassword:this.isRequireIdPassword,serverName:this.isSupportJmxServerName}})}}}),Tn=(0,x.A)(An,[["render",Ln],["__scopeId","data-v-0d35ee50"]]);var Y=d(88994);const Cn={class:"directory-textarea"},Dn={class:"title"},wn={class:"textarea"},Wn=["value"],Mn=(0,e.pM)({__name:"DirectoryTextarea",props:{directories:{}},emits:["update"],setup(t,{emit:n}){const o=n,l=t,i=(0,e.WQ)("i18n",{}),s=(0,e.KR)(),c=()=>{if(s.value!==void 0){const r=s.value?.value;o("update",r.split(`
`).filter(u=>u.trim()!==""))}};return(r,u)=>((0,e.uX)(),(0,e.CE)("div",Cn,[(0,e.Lk)("div",Dn,(0,e.v_)((0,e.R1)(i).M0387),1),u[0]||(u[0]=(0,e.eW)()),(0,e.Lk)("div",wn,[(0,e.Lk)("textarea",{ref_key:"element",ref:s,value:l.directories.join(`
`),onInput:c},null,40,Wn)])]))}}),ye=(0,x.A)(Mn,[["__scopeId","data-v-42fc6648"]]),On={class:"deploy-setting"},Rn={class:"folder"},Fn={class:"top"},En={class:"title"},xn={key:0,class:"bottom"},Nn={class:"row"},Bn={class:"title"},Pn={key:1,class:"row"},jn={class:"title"},Un={class:"extensions"},Xn={class:"row etc"},Kn={class:"title"},Jn={class:"row"},Vn={class:"folder"},Gn={class:"top"},Qn={class:"title"},Hn={key:0,class:"bottom"},zn=(0,e.pM)({__name:"DeploySetting",props:{sid:{},oid:{},languageType:{},data:{}},emits:["update"],setup(t,{emit:n}){const o=n,l=t,i=(0,e.WQ)("i18n",{}),s=(0,e.KR)(l.data.configuredDirList.length>0),c=(0,e.KR)(l.data.excludeDirList.length>0),r=(0,e.Kh)({...l.data}),u=(0,e.EW)(()=>l.languageType===p.sU.JAVA?Object.values(p.Yf):l.languageType===p.sU.DOT_NET?Object.values(p.md):[]),_=v=>{r.configuredDirList=v},m=v=>{r.excludeDirList=v},f=(v,g)=>{v?r.allowedExtList.push(g):r.allowedExtList=r.allowedExtList.filter(S=>S!==g)};return(0,e.wB)(r,()=>{o("update",{sid:l.sid,oid:l.oid,...r})}),(v,g)=>((0,e.uX)(),(0,e.CE)("div",On,[(0,e.Lk)("div",Rn,[(0,e.Lk)("div",Fn,[(0,e.Lk)("div",En,(0,e.v_)((0,e.R1)(i).settingDir),1),g[5]||(g[5]=(0,e.eW)()),(0,e.bF)(U.A,{class:"border-none",normal:"",items:[{iconType:(0,e.R1)(b.B2)[`${s.value?"arrowUp":"arrowDown"}`]}],onClick:g[0]||(g[0]=()=>s.value=!s.value)},null,8,["items"])]),g[13]||(g[13]=(0,e.eW)()),s.value?((0,e.uX)(),(0,e.CE)("div",xn,[v.languageType===(0,e.R1)(p.sU).JAVA||v.languageType===(0,e.R1)(p.sU).DOT_NET||v.languageType===(0,e.R1)(p.sU).PHP?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.bF)(ye,{directories:l.data.configuredDirList,onUpdate:_},null,8,["directories"]),g[7]||(g[7]=(0,e.eW)()),(0,e.Lk)("div",Nn,[(0,e.Lk)("div",Bn,(0,e.v_)((0,e.R1)(i).M0418),1),g[6]||(g[6]=(0,e.eW)()),(0,e.bF)(V.A,{normal:"",width:62,max:10,min:1,value:r.checkDepth,"onUpdate:value":g[1]||(g[1]=S=>r.checkDepth=S)},null,8,["value"])])],64)):(0,e.Q3)("v-if",!0),g[11]||(g[11]=(0,e.eW)()),v.languageType===(0,e.R1)(p.sU).JAVA||v.languageType===(0,e.R1)(p.sU).DOT_NET?((0,e.uX)(),(0,e.CE)("div",Pn,[(0,e.Lk)("div",jn,[(0,e.eW)((0,e.v_)((0,e.R1)(i).M0419)+" ",1),(0,e.bF)(G.A,{message:(0,e.R1)(i).M0420,width:240,position:"top-left"},{default:(0,e.k6)(()=>[(0,e.bF)((0,e.R1)(b.Ah),{icon:(0,e.R1)(b.B2).caution,width:14,height:14},null,8,["icon"])]),_:1},8,["message"])]),g[8]||(g[8]=(0,e.eW)()),(0,e.Lk)("div",Un,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(u.value,(S,R)=>((0,e.uX)(),(0,e.Wv)(Y.A,{normal:"",key:R,label:S,active:r.allowedExtList.includes(S),onChange:k=>f(k,S)},null,8,["label","active","onChange"]))),128))])])):(0,e.Q3)("v-if",!0),g[12]||(g[12]=(0,e.eW)()),v.languageType===(0,e.R1)(p.sU).JAVA?((0,e.uX)(),(0,e.CE)(e.FK,{key:2},[(0,e.Lk)("div",Xn,[(0,e.Lk)("div",Kn,[(0,e.bF)(Y.A,{normal:"",label:(0,e.R1)(i).hotDeployMonitoring,active:r.enableHotDeploy,"onUpdate:active":g[2]||(g[2]=S=>r.enableHotDeploy=S)},null,8,["label","active"])])]),g[10]||(g[10]=(0,e.eW)()),(0,e.Lk)("div",Jn,[(0,e.Lk)("div",{class:(0,e.C4)(["title",r.enableHotDeploy?"":"disabled"])},[(0,e.eW)((0,e.v_)((0,e.R1)(i).dirCheckInterval)+" ",1),(0,e.bF)(G.A,{message:r.enableHotDeploy?(0,e.R1)(i).M0421:"",width:240,position:"top-left"},{default:(0,e.k6)(()=>[(0,e.bF)((0,e.R1)(b.Ah),{icon:(0,e.R1)(b.B2).caution,width:14,height:14},null,8,["icon"])]),_:1},8,["message"])],2),g[9]||(g[9]=(0,e.eW)()),(0,e.bF)(V.A,{normal:"",step:1e3,min:0,width:120,disabled:!r.enableHotDeploy,value:r.checkInterval,"onUpdate:value":g[3]||(g[3]=S=>r.checkInterval=S)},null,8,["disabled","value"]),(0,e.eW)(" "+(0,e.v_)((0,e.R1)(i).ms),1)])],64)):(0,e.Q3)("v-if",!0)])):(0,e.Q3)("v-if",!0)]),g[16]||(g[16]=(0,e.eW)()),(0,e.Lk)("div",Vn,[(0,e.Lk)("div",Gn,[(0,e.Lk)("div",Qn,(0,e.v_)((0,e.R1)(i).settingExcludeDir),1),g[14]||(g[14]=(0,e.eW)()),(0,e.bF)(U.A,{class:"border-none",normal:"",items:[{iconType:(0,e.R1)(b.B2)[`${c.value?"arrowUp":"arrowDown"}`]}],onClick:g[4]||(g[4]=()=>c.value=!c.value)},null,8,["items"])]),g[15]||(g[15]=(0,e.eW)()),c.value?((0,e.uX)(),(0,e.CE)("div",Hn,[(0,e.bF)(ye,{directories:l.data.excludeDirList,onUpdate:m},null,8,["directories"])])):(0,e.Q3)("v-if",!0)])]))}}),Yn=(0,x.A)(zn,[["__scopeId","data-v-ef495eec"]]),Zn={class:"auto-stacktrace-setting"},qn={class:"form"},$n={class:"form"},es={class:"message"},ts={class:"unit"},ns={class:"form"},ss={class:"message"},is={class:"unit"},os={class:"form"},as={class:"message"},ls={class:"form"},rs={class:"form"},ds=(0,e.pM)({__name:"AutoStacktraceSetting",props:{sid:{},oid:{},data:{}},emits:["update"],setup(t,{emit:n}){const o=n,l=t,i=(0,e.WQ)("i18n",{}),s=(0,e.Kh)({...l.data});return(0,e.wB)(s,()=>{o("update",{sid:l.sid,oid:l.oid,...s})}),(c,r)=>((0,e.uX)(),(0,e.CE)("div",Zn,[(0,e.Lk)("div",qn,[(0,e.bF)(me.A,{normal:"",active:s.enableAutoStacktrace,"onUpdate:active":r[0]||(r[0]=u=>s.enableAutoStacktrace=u)},null,8,["active"])]),r[13]||(r[13]=(0,e.eW)()),s.enableAutoStacktrace?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.Lk)("div",$n,[(0,e.Lk)("div",es,[(0,e.eW)((0,e.v_)((0,e.R1)(i).criticalTime)+" ",1),(0,e.bF)(G.A,{message:`${(0,e.R1)(i).M0680} (Java 5.6.0.2)`,width:200},{default:(0,e.k6)(()=>[(0,e.bF)((0,e.R1)(b.Ah),{icon:(0,e.R1)(b.B2).help,width:16,height:16},null,8,["icon"])]),_:1},8,["message"])]),r[6]||(r[6]=(0,e.eW)()),(0,e.bF)(V.A,{normal:"",width:96,min:2e3,step:1e3,value:s.autoStacktraceLimit,"onUpdate:value":r[1]||(r[1]=u=>s.autoStacktraceLimit=u)},null,8,["value"]),(0,e.Lk)("span",ts,(0,e.v_)((0,e.R1)(i).ms),1)]),r[9]||(r[9]=(0,e.eW)()),(0,e.Lk)("div",ns,[(0,e.Lk)("div",ss,(0,e.v_)((0,e.R1)(i).collectInterval),1),r[7]||(r[7]=(0,e.eW)()),(0,e.bF)(V.A,{normal:"",width:96,min:0,step:1e3,value:s.autoStacktraceInterval,"onUpdate:value":r[2]||(r[2]=u=>s.autoStacktraceInterval=u)},null,8,["value"]),(0,e.Lk)("span",is,(0,e.v_)((0,e.R1)(i).ms),1)]),r[10]||(r[10]=(0,e.eW)()),(0,e.Lk)("div",os,[(0,e.Lk)("div",as,(0,e.v_)((0,e.R1)(i).collectMaxCount),1),r[8]||(r[8]=(0,e.eW)()),(0,e.bF)(V.A,{normal:"",width:96,min:0,step:1e3,value:s.autoStacktraceCount,"onUpdate:value":r[3]||(r[3]=u=>s.autoStacktraceCount=u)},null,8,["value"])]),r[11]||(r[11]=(0,e.eW)()),(0,e.Lk)("div",ls,[(0,e.bF)(Y.A,{normal:"",label:(0,e.R1)(i).collectionAutoStackTrace,active:s.collectNonTransaction,"onUpdate:active":r[4]||(r[4]=u=>s.collectNonTransaction=u)},null,8,["label","active"])]),r[12]||(r[12]=(0,e.eW)()),(0,e.Lk)("div",rs,[(0,e.bF)(Y.A,{normal:"",label:(0,e.R1)(i).collectStatisticByApplication,active:s.collectStatisticByApplication,"onUpdate:active":r[5]||(r[5]=u=>s.collectStatisticByApplication=u)},null,8,["label","active"])])],64)):(0,e.Q3)("v-if",!0)]))}}),us=(0,x.A)(ds,[["__scopeId","data-v-968823e2"]]),cs={class:"agent-options"},ps={class:"top"},gs={class:"tools"},_s={class:"bottom"};function ms(t,n,o,l,i,s){const c=(0,e.g2)("search"),r=(0,e.g2)("btn"),u=(0,e.g2)("instance-tree-window"),_=(0,e.g2)("loading-indicator"),m=(0,e.g2)("agent-option"),f=(0,e.g2)("alert-window");return(0,e.uX)(),(0,e.CE)("div",cs,[(0,e.Lk)("div",ps,[(0,e.Lk)("div",null,(0,e.v_)(s.i18n.settingAdvancedOptions),1),n[3]||(n[3]=(0,e.eW)()),(0,e.Lk)("div",null,[(0,e.bF)(c,{placeholder:s.i18n.searchAdvancedOptions,value:i.searchKeyword,"onUpdate:value":n[0]||(n[0]=v=>i.searchKeyword=v),onSearch:s.onFilterAgentOptions,onClear:s.onFilterAgentOptions},null,8,["placeholder","value","onSearch","onClear"])]),n[4]||(n[4]=(0,e.eW)()),(0,e.Lk)("div",gs,[(0,e.bF)(r,{normal:"",items:[{text:s.i18n.agentHelp}],onClick:s.onClickHelpButton},null,8,["items","onClick"]),n[2]||(n[2]=(0,e.eW)()),(0,e.bF)(r,{normal:"",items:[{text:s.i18n.distAdvancedOptions}],pressed:i.instanceTreeWindowOptions.active,loading:t.instanceTreeLoading,disabled:i.checkedAgentOptions.length===0,suspendible:!1,onClick:s.onClickDeployButton},null,8,["items","pressed","loading","disabled","onClick"])]),n[5]||(n[5]=(0,e.eW)()),i.instanceTreeWindowOptions.active?((0,e.uX)(),(0,e.Wv)(u,{key:0,title:s.i18n.distAdvancedOptions,message:"",left:i.instanceTreeWindowOptions.left,top:i.instanceTreeWindowOptions.top,"instance-tree":t.instanceTreeNodes,"target-instance":t.instance,onCancel:s.onCancelInstanceTreeWindow,onApply:s.onApplyInstanceTreeWindow},null,8,["title","left","top","instance-tree","target-instance","onCancel","onApply"])):(0,e.Q3)("v-if",!0)]),n[7]||(n[7]=(0,e.eW)()),(0,e.Lk)("div",_s,[t.agentOptionLoading?((0,e.uX)(),(0,e.Wv)(_,{key:0})):(0,e.Q3)("v-if",!0),n[6]||(n[6]=(0,e.eW)()),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(i.agentOptions,(v,g)=>((0,e.uX)(),(0,e.Wv)(m,{key:v.key,"is-check":v.isCheck,"is-fold":v.isFold,"is-direct":v.isDirect,label:v.key,"language-type":t.instance.languageType,"using-default":v.usingDefault,"need-reboot":v.needReboot,"default-values":v.defaultValues,values:v.values,onToggle:S=>s.onToggleAgentOption(S,g),onSave:s.onSaveAgentOption,onCheck:S=>s.onCheckAgentOption(S,g)},null,8,["is-check","is-fold","is-direct","label","language-type","using-default","need-reboot","default-values","values","onToggle","onSave","onCheck"]))),128))]),n[8]||(n[8]=(0,e.eW)()),i.alertMessage!==""?((0,e.uX)(),(0,e.Wv)(f,{key:0,message:i.alertMessage,onCancel:n[1]||(n[1]=()=>i.alertMessage="")},null,8,["message"])):(0,e.Q3)("v-if",!0)])}const vs={class:"agent-option"},hs={class:"row"},ys={class:"left"},fs={class:"right"},ks={class:"information"},Is={class:"reboot-text"},bs={class:"reboot-text"},Ls={key:0,class:"expand"},Ss={class:"top"},As={class:"default"},Ts={class:"radio"},Cs=["value","disabled"],Ds={class:"custom"},ws={class:"radio"},Ws=["value","disabled"],Ms={class:"default"},Os={class:"radio"},Rs={class:"custom"},Fs={class:"radio"},Es={class:"default"},xs={class:"radio"},Ns={class:"custom"},Bs={class:"radio"},Ps={class:"bottom"};function js(t,n,o,l,i,s){const c=(0,e.g2)("checkbox"),r=(0,e.g2)("chip"),u=(0,e.g2)("btn"),_=(0,e.g2)("radio"),m=(0,e.g2)("format-number-input"),f=(0,e.g2)("dropdown");return(0,e.uX)(),(0,e.CE)("div",vs,[(0,e.Lk)("div",hs,[(0,e.Lk)("div",ys,[(0,e.bF)(c,{small:"",active:o.isCheck,onChange:s.onChangeCheckbox},null,8,["active","onChange"]),n[7]||(n[7]=(0,e.eW)()),(0,e.Lk)("span",null,(0,e.v_)(o.label),1)]),n[12]||(n[12]=(0,e.eW)()),(0,e.Lk)("div",fs,[(0,e.Lk)("span",ks,[o.usingDefault?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.eW)((0,e.v_)(s.i18n.defaultValue)+" ("+(0,e.v_)(s.printValues(o.defaultValues))+`)
                    `,1)],64)):o.needReboot?((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.bF)(r,{value:s.i18n.reboot,"background-color":"#ff4f55","text-color":"#fff"},null,8,["value"]),n[8]||(n[8]=(0,e.eW)()),(0,e.Lk)("span",Is,(0,e.v_)(s.printValues(o.values)),1)],64)):o.isDirect?((0,e.uX)(),(0,e.CE)(e.FK,{key:2},[(0,e.bF)(r,{value:s.i18n.directOptionApplied,"background-color":"#ff4f55","text-color":"#fff"},null,8,["value"]),n[9]||(n[9]=(0,e.eW)()),(0,e.Lk)("span",bs,(0,e.v_)(s.printValues(o.values)),1)],64)):((0,e.uX)(),(0,e.CE)(e.FK,{key:3},[(0,e.eW)((0,e.v_)(s.printValues(o.values)),1)],64))]),n[10]||(n[10]=(0,e.eW)()),(0,e.bF)(u,{class:"border-none",normal:"",items:[{iconType:i.iconTypes.help}],onClick:s.onClickHelpIcon},null,8,["items","onClick"]),n[11]||(n[11]=(0,e.eW)()),(0,e.bF)(u,{class:"border-none",normal:"",items:[{iconType:i.iconTypes[o.isFold?"fold":"open"]}],onClick:s.onClickFoldIcon},null,8,["items","onClick"])])]),n[22]||(n[22]=(0,e.eW)()),o.isFold?(0,e.Q3)("v-if",!0):((0,e.uX)(),(0,e.CE)("div",Ls,[(0,e.Lk)("div",Ss,[s.valuesType==="string"?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.Lk)("div",As,[(0,e.Lk)("div",Ts,[(0,e.bF)(_,{label:s.i18n.defaultValue,active:i.selectedType==="default",disabled:o.isDirect,onChange:n[0]||(n[0]=()=>i.selectedType="default")},null,8,["label","active","disabled"])]),n[13]||(n[13]=(0,e.eW)()),i.selectedType==="default"?((0,e.uX)(),(0,e.CE)("textarea",{key:0,readonly:"",value:o.defaultValues.join(`
`),disabled:o.isDirect},null,8,Cs)):(0,e.Q3)("v-if",!0)]),n[15]||(n[15]=(0,e.eW)()),(0,e.Lk)("div",Ds,[(0,e.Lk)("div",ws,[(0,e.bF)(_,{label:s.i18n.custom,active:i.selectedType==="custom",disabled:o.isDirect,onChange:n[1]||(n[1]=()=>i.selectedType="custom")},null,8,["label","active","disabled"])]),n[14]||(n[14]=(0,e.eW)()),i.selectedType==="custom"?((0,e.uX)(),(0,e.CE)("textarea",{key:0,value:o.values.join(`
`),disabled:o.isDirect,onChange:n[2]||(n[2]=(...v)=>s.onChangeTextarea&&s.onChangeTextarea(...v))},null,40,Ws)):(0,e.Q3)("v-if",!0)])],64)):s.valuesType==="number"?((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.Lk)("div",Ms,[(0,e.Lk)("div",Os,[(0,e.bF)(_,{label:[s.i18n.defaultValue,o.defaultValues[0]].join(" : "),active:i.selectedType==="default",disabled:o.isDirect,onChange:n[3]||(n[3]=()=>i.selectedType="default")},null,8,["label","active","disabled"])])]),n[17]||(n[17]=(0,e.eW)()),(0,e.Lk)("div",Rs,[(0,e.Lk)("div",Fs,[(0,e.bF)(_,{label:s.i18n.custom,active:i.selectedType==="custom",disabled:o.isDirect,onChange:n[4]||(n[4]=()=>i.selectedType="custom")},null,8,["label","active","disabled"])]),n[16]||(n[16]=(0,e.eW)()),i.selectedType==="custom"?((0,e.uX)(),(0,e.Wv)(m,{key:0,min:-1,value:parseInt(o.values[0]),disabled:o.isDirect,onInput:s.onChangeFormatNumberInput},null,8,["value","disabled","onInput"])):(0,e.Q3)("v-if",!0)])],64)):s.valuesType==="boolean"?((0,e.uX)(),(0,e.CE)(e.FK,{key:2},[(0,e.Lk)("div",Es,[(0,e.Lk)("div",xs,[(0,e.bF)(_,{label:[s.i18n.defaultValue,o.defaultValues[0]].join(" : "),active:i.selectedType==="default",disabled:o.isDirect,onChange:n[5]||(n[5]=()=>i.selectedType="default")},null,8,["label","active","disabled"])])]),n[18]||(n[18]=(0,e.eW)()),(0,e.Lk)("div",Ns,[(0,e.Lk)("div",Bs,[(0,e.bF)(_,{label:s.i18n.custom,active:i.selectedType==="custom",disabled:o.isDirect,onChange:n[6]||(n[6]=()=>i.selectedType="custom")},null,8,["label","active","disabled"])])]),n[19]||(n[19]=(0,e.eW)()),i.selectedType==="custom"?((0,e.uX)(),(0,e.Wv)(f,{key:0,items:[{text:"True",value:"true"},{text:"False",value:"false"}],"selected-value":i.selectedValue,width:100,normal:"",onOnchange:s.onChangeDropdown},null,8,["selected-value","onOnchange"])):(0,e.Q3)("v-if",!0)],64)):(0,e.Q3)("v-if",!0)]),n[21]||(n[21]=(0,e.eW)()),(0,e.Lk)("div",Ps,[(0,e.bF)(u,{normal:"",class:"border-none",items:[{text:s.i18n.cancel}],onClick:s.onClickFoldIcon},null,8,["items","onClick"]),n[20]||(n[20]=(0,e.eW)()),o.isDirect?(0,e.Q3)("v-if",!0):((0,e.uX)(),(0,e.Wv)(u,{key:0,normal:"",class:"primary",items:[{text:s.i18n.saveChanges}],onClick:s.onClickSaveButton},null,8,["items","onClick"]))])]))])}var Us=d(73310);const Xs={inject:["i18n"],components:{Checkbox:Y.A,Radio:Us.A,Btn:U.A,FormatNumberInput:V.A,Dropdown:he.A,Chip:le.A},props:{isCheck:{type:Boolean,required:!0},isFold:{type:Boolean,required:!0},label:{type:String,required:!0},languageType:{type:Number,required:!0},usingDefault:{type:Boolean,required:!0},needReboot:{type:Boolean,required:!0},defaultValues:{type:Array,required:!0},values:{type:Array,required:!0},isDirect:{type:Boolean,required:!0}},watch:{usingDefault(t){this.selectedType=t?"default":"custom",this.selectedValue=this.getDefaultStringValue()}},computed:{valuesType(){return this.getValuesType()}},data(){return{iconTypes:{help:b.B2.help,fold:b.B2.arrowDown,open:b.B2.arrowUp},selectedType:this.usingDefault?"default":"custom",selectedValue:this.getDefaultStringValue()}},methods:{onClickHelpIcon(){(0,N.O1)(this.languageType,this.label)},onClickFoldIcon(){this.$emit("toggle",!this.isFold)},onChangeTextarea(t){this.selectedValue=t.target.value.trim()},onChangeFormatNumberInput(t){this.selectedValue=t},onChangeDropdown({value:t}){this.selectedValue=t},onClickSaveButton(){const t=this.selectedType==="default";this.$emit("save",{key:this.label,value:t?this.defaultValues.join(`
`):this.selectedValue,usingDefault:t})},onChangeCheckbox(t){this.$emit("check",t)},printValues(t){return t.length>0?t.join(","):""},getDefaultStringValue(){return this.getValuesType()==="string"?this.usingDefault?this.defaultValues.join(`
`):this.values.join(`
`):this.usingDefault?this.defaultValues[0]:this.values[0]},getValuesType(){const t=this.defaultValues;return t[0]==="true"||t[0]==="false"?"boolean":!isNaN(t[0])&&t[0]!==null&&t[0]!==""?"number":"string"}}},Ks=(0,x.A)(Xs,[["render",js],["__scopeId","data-v-7c413770"]]),Js=(0,I.$t)("domainSettings"),Vs={inject:["i18n"],components:{Search:ge.A,Btn:U.A,LoadingIndicator:ae.A,AgentOption:Ks,InstanceTreeWindow:_e,AlertWindow:ne.A},computed:{...Js.mapState({useDomainGroup:t=>t.useDomainGroup,domainGroupTree:t=>t.domainGroupTree}),...J({instance:t=>t.selectedInstance,instanceListInDomain:t=>t.instanceListInDomain,instanceTreeNodes:t=>t.instanceTreeNodes,instanceTreeLoading:t=>t.instanceTreeLoading,agentOptionLoading:t=>t.agentOptionLoading})},watch:{checkedAgentOptions(t,n){n.length>0&&t.length===0&&(this.instanceTreeWindowOptions.active=!1)}},data(){return{checkedAgentOptions:[],originAgentOptions:[],agentOptions:[],searchKeyword:"",instanceTreeWindowOptions:{active:!1,left:this.getWindowLeft(),top:228},alertMessage:""}},methods:{...Q(["updateInstanceTreeNodes"]),...z(["loadAgentOptions","saveAgentOption","copyAgentOptions","preLoadInstanceListForTree"]),onClickHelpButton(){(0,N.O1)(this.instance.languageType)},async onClickDeployButton(){const t=this.useDomainGroup&&this.domainGroupTree.filter(n=>n.sid>-1).length>0?this.domainGroupTree:[{index:"0",sid:-1,title:this.i18n.unknownGroup},{index:"0.0",sid:this.instanceListInDomain[0].domainId,title:this.instanceListInDomain[0].simpleName}];await this.preLoadInstanceListForTree(t),this.instanceTreeWindowOptions.left=this.getWindowLeft(),this.instanceTreeWindowOptions.active=!this.instanceTreeWindowOptions.active},onToggleAgentOption(t,n){this.agentOptions=this.agentOptions.map((o,l)=>({...o,isFold:n===l?t:!0}))},onFilterAgentOptions(){this.searchKeyword!==""?this.agentOptions=[...this.originAgentOptions].filter(t=>t.key.toLowerCase().indexOf(this.searchKeyword.toLowerCase())!==-1):this.agentOptions=[...this.originAgentOptions]},onCheckAgentOption(t,n){this.agentOptions[n].isCheck=t,this.checkedAgentOptions=this.agentOptions.filter(o=>o.isCheck===!0)},onCancelInstanceTreeWindow(){this.instanceTreeWindowOptions.active=!1},async onApplyInstanceTreeWindow(t){t!==void 0&&(t.length>0?(this.instanceTreeWindowOptions.active=!1,await this.copyAgentOptions({options:this.checkedAgentOptions,nodes:t})):this.alertMessage=this.i18n.M0026)},getWindowLeft(){return window.innerWidth-400-24},async onSaveAgentOption(t){const{data:n}=await this.saveAgentOption(t);n==="SUCCESS"&&await this.updateAgentOptions()},async updateAgentOptions(){const{data:t}=await this.loadAgentOptions(),n=t.map(o=>{const l=o.agentOwnValues!==null;return{...o,isFold:!0,isCheck:!1,isDirect:l,usingDefault:l?!1:o.usingDefault,values:l?o.agentOwnValues:o.values}}).sort((o,l)=>l.isDirect-o.isDirect||l.needReboot-o.needReboot);this.originAgentOptions=[...n],this.onFilterAgentOptions()}},created(){setTimeout(()=>{this.updateAgentOptions()},500)}},Gs=(0,x.A)(Vs,[["render",ms],["__scopeId","data-v-2d70d7da"]]),Qs={inject:["i18n","isBlockedSystemSetting"],components:{ToggleSwitch:me.A,Tab:_n.A,Btn:U.A,InputField:ve.A,JmxSetting:Tn,DeploySetting:Yn,AutoStacktraceSetting:us,AgentOptions:Gs,AlertWindow:ne.A},computed:{...J({instance:t=>t.selectedInstance}),isDuplicated(){return!1},isInvalidated(){const{shortName:t}=this.instance;return!this.validCheckShortName(t)},tabItems(){return[{key:"detail",value:this.i18n.detailSetting},{key:"options",value:this.i18n.settingAdvancedOptions}]},validAutoStacktraceStatus(){return this.validDefaultAgentStatus&&this.instance.autoStacktrace!==void 0&&this.instance.autoStacktrace.supportAutoStacktrace},validJavaAgentStatus(){return this.instance.languageType===p.sU.JAVA&&this.instance.status===p.xr.LIVE},validDefaultAgentStatus(){return(this.instance.languageType===p.sU.JAVA||this.instance.languageType===p.sU.DOT_NET||this.instance.languageType===p.sU.PHP)&&this.instance.status===p.xr.LIVE}},data(){return{saveLoading:!1,activeTab:"detail",alertMessage:"",autoStacktraceForm:null,jmxForm:null,deployForm:null,collectionStatus:!1}},watch:{instance:{handler(t){this.collectionStatus=t.isProfile},deep:!1}},methods:{...Q(["backToScreenMode"]),...z(["hasPendingInstance","applyPendingInstance","saveDetailInstance","saveAutoStacktraceSetting","deleteAutoStacktraceSetting","saveJmxSetting","saveCollectionStatus","saveDeploySetting","deleteDeploySetting"]),async onClickSaveButton(){if(this.validJavaAgentStatus){if(this.jmxForm!==null){if(this.jmxForm.status.host&&this.jmxForm.data.host===""){this.alertMessage=this.i18n.M0234;return}if(this.jmxForm.status.port&&this.jmxForm.data.port===-1){this.alertMessage=this.i18n.M0202;return}if(this.jmxForm.status.idPassword&&(this.jmxForm.data.id===""||this.jmxForm.data.password==="")&&this.jmxForm.data.type!==p.nS.WILDFLY15_30){this.alertMessage=this.i18n.M0345;return}await this.saveJmxSetting(this.jmxForm.data)}await this.saveCollectionStatus({sid:this.instance.sid,oid:this.instance.oid,isProfile:this.collectionStatus})}this.validDefaultAgentStatus&&this.deployForm!==null&&(this.deployForm.configuredDirList.length>0?await this.saveDeploySetting(this.deployForm):await this.deleteDeploySetting({sid:this.deployForm.sid,oid:this.deployForm.oid})),this.validAutoStacktraceStatus&&this.autoStacktraceForm!==null&&(this.autoStacktraceForm.enableAutoStacktrace?await this.saveAutoStacktraceSetting({sid:this.instance.sid,oids:[this.instance.oid],collectNonTransaction:this.autoStacktraceForm.collectNonTransaction,collectStatisticByApplication:this.autoStacktraceForm.collectStatisticByApplication,interval:this.autoStacktraceForm.autoStacktraceInterval,limit:this.autoStacktraceForm.autoStacktraceLimit,maxCount:this.autoStacktraceForm.autoStacktraceCount}):await this.deleteAutoStacktraceSetting({sid:this.instance.sid,oid:this.instance.oid})),this.saveLoading=!0,await this.saveDetailInstance(),this.saveLoading=!1},onChangeTab(t){this.activeTab=t},onUpdateAutoStacktraceFormData(t){this.autoStacktraceForm=t},onUpdateJmxFormData(t){this.jmxForm=t},onUpdateDeployFormData(t){this.deployForm=t},getLanguageTypeName(t){return(0,N.KF)(t,this.i18n)},validCheckShortName(t){return t.length<=40&&!(0,a.T_)(t)},validCheckLongName(t){return!(0,a.T_)(t)},historyPushState(){history.pushState(null,document.title,location.href)},historyPopState(){this.historyPushState(),this.backToScreenMode()}},async created(){await this.hasPendingInstance(),this.historyPushState(),window.addEventListener("popstate",this.historyPopState)},beforeUnmount(){window.removeEventListener("popstate",this.historyPopState)}},Hs=(0,x.A)(Qs,[["render",gn],["__scopeId","data-v-159ee0ad"]]),fe={title:a.Ru.get("ui.label.instance"),showDomainGroupList:a.Ru.get("word.showDomainGroupList"),hideDomainGroupList:a.Ru.get("word.hideDomainGroupList"),applicationHistory:a.Ru.get("ui.title.applicationHistory"),copySetting:a.Ru.get("ui.label.copySetting"),upgrade:a.Ru.get("ui.button.upgrade"),instanceId:a.Ru.get("ui.label.instId"),instanceName:a.Ru.get("ui.label.instanceName"),platform:a.Ru.get("ui.label.platform"),ip:a.Ru.get("ui.label.ip"),agentVersion:a.Ru.get("ui.label.agent.version"),tcpStatus:a.Ru.get("ui.label.agent.tcpCon"),licenseStatus:a.Ru.get("ui.en.license"),state:a.Ru.get("ui.label.state"),optionsPending:a.Ru.get("ui.label.optionsPending"),java:a.Ru.get("ui.en.java"),dotnet:a.Ru.get("ui.en.dotnet"),php:a.Ru.get("ui.en.php"),python:a.Ru.get("ui.en.python"),opentelemetry:a.Ru.get("ui.en.opentelemetry"),os:a.Ru.get("ui.label.os"),saveChanges:a.Ru.get("ui.label.saveChanges"),apply:a.Ru.get("ui.label.apply"),cancel:a.Ru.get("ui.label.cancel"),hostName:a.Ru.get("ui.label.hostName"),configFileName:a.Ru.get("ui.label.configFileName"),description:a.Ru.get("ui.label.explain"),defaultSetting:a.Ru.get("ui.label.defaultSetting"),detailSetting:a.Ru.get("ui.label.detailSetting"),settingAdvancedOptions:a.Ru.get("ui.label.settingAdvancedOptions"),distAdvancedOptions:a.Ru.get("ui.label.distAdvancedOptions"),searchAdvancedOptions:a.Ru.get("ui.label.searchAdvancedOptions"),agentHelp:a.Ru.get("ui.title.agentHelp"),defaultValue:a.Ru.get("ui.label.defaultValue"),custom:a.Ru.get("ui.label.custom"),copyAgentSettings:a.Ru.get("ui.label.agent.setting.copy"),reboot:a.Ru.get("ui.label.reboot"),directOptionApplied:a.Ru.get("ui.label.directOptionApplied"),search:a.Ru.get("ui.label.search"),searching:a.Ru.get("ui.button.upgradeLoading"),goBack:a.Ru.get("ui.label.goBack"),delete:a.Ru.get("ui.button.delete"),domainId:a.Ru.get("ui.label.sid"),upgradeSuccess:a.Ru.get("ui.label.upgradeSuccess"),failTransfer:a.Ru.get("ui.label.failTransfer"),version:a.Ru.get("ui.label.version"),unknownGroup:a.Ru.get("ui.label.unknownGroup"),logWatcher:a.Ru.get("ui.label.logWatcher"),agentLog:a.Ru.get("ui.label.agentLog"),agentConfigFile:a.Ru.get("ui.label.agentConfigFile"),fileName:a.Ru.get("ui.label.fileName"),modifiedDate:a.Ru.get("ui.label.modifiedDate"),size:a.Ru.get("ui.label.size"),download:a.Ru.get("ui.label.download"),kb:a.Ru.get("ui.label.unit.kb"),realtimeLog:a.Ru.get("word.realtimeLog"),jmxSetting:a.Ru.get("ui.label.jmxSetting"),jmx:a.Ru.get("ui.en.jmx"),none:a.Ru.get("ui.label.none"),host:a.Ru.get("ui.label.host"),port:a.Ru.get("ui.label.port"),id:a.Ru.get("ui.label.id"),password:a.Ru.get("ui.label.password"),serverName:a.Ru.get("ui.label.serverName"),collection:a.Ru.get("ui.label.collection"),memory:a.Ru.get("ui.title.memory"),hostAddress:a.Ru.get("word.hostAddress"),M0248:a.Ru.get("M0248"),M0507:a.Ru.get("M0507"),M0249:a.Ru.get("M0249"),M0250:a.Ru.get("M0250"),M0251:a.Ru.get("M0251"),M0252:a.Ru.get("M0252"),M0026:a.Ru.get("M0026"),M0079:a.Ru.get("M0079"),M0080:a.Ru.get("M0080"),M0505:a.Ru.get("M0505"),M0677:a.Ru.get("M0677"),M0470:a.Ru.get("M0470"),M0208:a.Ru.get("M0208"),M0234:a.Ru.get("M0234"),M0202:a.Ru.get("M0202"),M0345:a.Ru.get("M0345"),M0387:a.Ru.get("M0387"),M0418:a.Ru.get("M0418"),M0419:a.Ru.get("M0419"),M0420:a.Ru.get("M0420"),M0421:a.Ru.get("M0421"),M0680:a.Ru.get("M0680"),M0270:a.Ru.get("M0270"),text0001:a.Ru.get("text.0001"),connected:a.Ru.get("word.connected"),notConnected:a.Ru.get("word.notConnected"),unknown:a.Ru.get("ui.label.unknown"),settingDir:a.Ru.get("ui.label.settingDir"),settingExcludeDir:a.Ru.get("ui.label.settingExcludeDir"),hotDeployMonitoring:a.Ru.get("ui.label.hotDeployMonitoring"),dirCheckInterval:a.Ru.get("ui.label.dirCheckInterval"),ms:a.Ru.get("ui.label.unit.ms"),dirCount:a.Ru.get("ui.label.dirCount"),autoStacktrace:a.Ru.get("ui.label.autoStacktrace"),criticalTime:a.Ru.get("ui.label.criticalTime"),collectInterval:a.Ru.get("ui.label.collectInterval"),collectMaxCount:a.Ru.get("ui.label.collectMaxCount"),collectionAutoStackTrace:a.Ru.get("ui.label.collectionAutoStackTrace.all"),collectStatisticByApplication:a.Ru.get("ui.label.collectStatisticByApplication"),T0004:a.Ru.get("text.0004"),T0010:a.Ru.get("text.0010"),T0100:a.Ru.get("text.0100")};var zs=d(42460);const ke=1400,se=(0,I.$t)("domain"),Ys=(0,I.$t)("domainSettings"),Zs={provide:{i18n:fe,isBlockedSystemSetting:(0,a.Yj)(p.$z.BLOCKING_SYSTEM_SETTING)},inject:["windowSize"],components:{DomainTreeLayer:H.A,InstanceList:Ue,ToolBar:ot,BackButton:gt,DetailInstance:Hs,Btn:U.A},computed:{...se.mapState(["domainList"]),...se.mapGetters(["sidList"]),...Ys.mapState(["isChangedDomainGroup"]),...J({screenMode:t=>t.screenMode,instanceListInDomain:t=>t.instanceListInDomain})},data(){return{i18nMessages:fe,instanceListKey:0,scrollTopForList:(0,zs.Fo2)("scrollTopForSettings",0),showDomainTreeLayer:this.windowSize.width>=ke,titleIconTypes:{open:b.B2.leftPanelOpen,close:b.B2.leftPanelClose}}},watch:{sidList:{handler(t){this.updateDomainIds({ids:t,nameMap:this.createDomainNameMap(t)}),this.backToScreenMode(),this.scrollTopForList=0},deep:!0},screenMode:{async handler(t,n){t==="list"&&n==="modify"&&(await this.$nextTick(),this.$refs.scrollList.scrollTop=this.scrollTopForList)},deep:!1},windowSize:{handler(t){this.showDomainTreeLayer&&t.width<ke&&(this.showDomainTreeLayer=!1)},deep:!0}},methods:{...se.mapMutations(["selectDomain"]),...Q(["updateDomainIds","backToScreenMode","selectedDetailInstance"]),...z(["loadJmxWasList"]),createDomainNameMap(t){const n={};return this.domainList.forEach(o=>{t.includes(o.data.sid)&&(n[o.data.sid]=o.data.title)}),n},reloadInstanceList(){this.backToScreenMode(),this.screenMode==="list"&&(this.instanceListKey+=1)},scrollHandlerForList(t){this.scrollTopForList=t.target.scrollTop},validJavaAgentStatus(t){return t.languageType===p.sU.JAVA&&t.status===p.xr.LIVE},loadParameters(){const t=new URLSearchParams(location.search);if(t.has("domainId")&&t.has("instanceOid")){const n=this.domainList.find(o=>`${o.data.sid}`===t.get("domainId"));n&&(this.selectDomain(n.treeIndex),setTimeout(async()=>{const o=this.instanceListInDomain[0];if(o){const l=o.instanceList.find(i=>`${i.oid}`===t.get("instanceOid"));l&&(this.validJavaAgentStatus(l)&&await this.loadJmxWasList(l),this.selectedDetailInstance({...l,parentNames:o.parentNames,hasPending:!1}))}},800))}}},created(){this.isChangedDomainGroup?location.reload():(this.loadParameters(),this.updateDomainIds({ids:this.sidList,nameMap:this.createDomainNameMap(this.sidList)}),this.backToScreenMode())}},qs=(0,x.A)(Zs,[["render",B],["__scopeId","data-v-2f3c4684"]])},67038:(P,C,d)=>{d.d(C,{X:()=>w});var e=d(47577);const E=["onMousedown","onMouseover","onMouseleave"],M={class:"text"},F={key:0,class:"indicator",ref:"indicatorRef"};function w(h,y,D,j,B,I){const H=(0,e.g2)("tooltip-balloon"),Z=(0,e.g2)("badge");return(0,e.uX)(),(0,e.CE)("div",{class:(0,e.C4)(["tab-wrapper",I.borderClass,{flexible:D.flexible,animate:D.animate}])},[(0,e.Lk)("ul",{class:"tab-container",ref:"tabRef",tabindex:"0",onFocus:y[1]||(y[1]=(...A)=>I.onFocusAscendant&&I.onFocusAscendant(...A)),onKeydown:[y[2]||(y[2]=(0,e.jR)((0,e.D$)((...A)=>I.selectPrev&&I.selectPrev(...A),["prevent"]),["left"])),y[3]||(y[3]=(0,e.jR)((0,e.D$)((...A)=>I.selectPrev&&I.selectPrev(...A),["prevent"]),["up"])),y[4]||(y[4]=(0,e.jR)((0,e.D$)((...A)=>I.selectNext&&I.selectNext(...A),["prevent"]),["right"])),y[5]||(y[5]=(0,e.jR)((0,e.D$)((...A)=>I.selectNext&&I.selectNext(...A),["prevent"]),["down"])),y[6]||(y[6]=(0,e.jR)((0,e.D$)(A=>I.onTabChange(D.tabs[B.focusIndex],B.focusIndex),["prevent"]),["space"]))]},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(D.tabs,(A,L)=>((0,e.uX)(),(0,e.CE)("li",{key:L,class:(0,e.C4)(["tab-item",h.size,I.borderClass,A.key===D.activeTab?"active":"default",{disabled:A.disabled}]),onMousedown:(0,e.D$)(O=>I.onTabChange(A,L),["prevent"]),onMouseover:O=>I.onMouseOver(A,L),onMouseleave:O=>I.onMouseLeave(L),onBlur:y[0]||(y[0]=(...O)=>I.onBlur&&I.onBlur(...O)),tabindex:"-1"},[A.tooltipMessage!==void 0&&A.tooltipMessage!==""&&B.showTooltip[L]?((0,e.uX)(),(0,e.Wv)(H,{key:0,style:(0,e.Tr)(I.tooltipStyles),"cursor-none":""},{default:(0,e.k6)(()=>[(0,e.eW)((0,e.v_)(A.tooltipMessage),1)]),_:2},1032,["style"])):(0,e.Q3)("v-if",!0),y[7]||(y[7]=(0,e.eW)()),(0,e.Lk)("span",M,(0,e.v_)(A.value),1),y[8]||(y[8]=(0,e.eW)()),A.caption!==void 0?((0,e.uX)(),(0,e.Wv)(Z,{key:1,style:{"margin-left":"4px"},type:I.badgeProps(A.caption).type,value:I.badgeProps(A.caption).value},null,8,["type","value"])):(0,e.Q3)("v-if",!0)],42,E))),128))],544),y[9]||(y[9]=(0,e.eW)()),D.borderPosition!=="none"&&D.animate?((0,e.uX)(),(0,e.CE)("div",F,null,512)):(0,e.Q3)("v-if",!0)],2)}},70140:(P,C,d)=>{d.d(C,{A:()=>w});var e=d(96513),E=d(31975),M=d(35339);const w=(0,M.A)(E.A,[["render",e.X]])},72458:(P,C,d)=>{d.d(C,{X:()=>e.X});var e=d(67038)},82452:(P,C,d)=>{d.d(C,{A:()=>w});var e=d(87380),E=d(17644),M=d(8355),F=d(44707);const w={name:"Tab",mixins:[F.A],components:{TooltipBalloon:E.A,Badge:e.A},props:{tabs:{type:Array,required:!0},activeTab:{type:String,required:!1},borderPosition:{type:String,validator:h=>["top","bottom","none"].indexOf(h)!==-1,default:"bottom"},tooltipPosition:{type:String,default:"top-center"},flexible:{type:Boolean,default:!1},animate:{type:Boolean,default:!0},delay:{type:Number,default:0}},computed:{borderClass(){return"border-"+this.borderPosition},activeIndex(){return this.activeTab?this.tabs.findIndex(h=>h.key===this.activeTab):-1},tooltipStyles(){return(0,M.F)(this.tooltipPosition,0)}},watch:{tabs:{handler(h){this.$nextTick(()=>{h.length>0&&this.moveIndicator(this.activeIndex)})},deep:!0},activeTab:{handler(h,y){if(y!==h){const D=this.tabs.findIndex(j=>j.key===h);this.moveIndicator(D)}},deep:!1}},data(){return{focusIndex:0,showTooltip:Array(this.tabs.length).fill(!1)}},methods:{moveIndicator(h){if(!(!this.$refs.tabRef||h<0)&&this.animate&&this.borderPosition!=="none"){const{offsetLeft:y,clientWidth:D,className:j}=this.$refs.tabRef.children[h],B=this.$refs.indicatorRef;B.style.left=y+"px",B.style.width=D+"px",B.style.opacity=j.includes("disabled")?.5:1}},onTabChange(h,y){h.disabled||(this.$emit("change",h.key),this.focusIndex=y)},selectPrev(){let h=this.focusIndex-1;h<0&&(h=this.tabs.length-1),this.$refs.tabRef.children[h].focus(),this.focusIndex=h},selectNext(){let h=this.focusIndex+1;h>=this.tabs.length&&(h=0),this.$refs.tabRef.children[h].focus(),this.focusIndex=h},onFocusAscendant(){this.$refs.tabRef.children[this.focusIndex].focus()},onBlur(){this.focusIndex=this.activeIndex},badgeProps(h){let y;switch(h){case"unknown":y="warning";break;case 0:y="secondary";break;default:y="primary";break}return{value:h==="unknown"?"!":h,type:y}},onMouseOver(h,y){h.tooltipMessage!==void 0&&h.tooltipMessage!==""&&(this.showTooltip[y]=!0)},onMouseLeave(h){this.showTooltip[h]&&(this.showTooltip[h]=!1)}},mounted(){this.activeIndex>-1&&(this.onTabChange(this.tabs[this.activeIndex],this.activeIndex),setTimeout(()=>this.moveIndicator(this.activeIndex),this.delay))}}},87205:(P,C,d)=>{d.d(C,{X:()=>E});var e=d(47577);function E(M,F,w,h,y,D){const j=(0,e.g2)("svg-icon"),B=(0,e.g2)("input-field");return(0,e.uX)(),(0,e.Wv)(B,(0,e._B)({value:w.value,type:D.displayType,name:w.name,placeholder:w.placeholder,autocomplete:w.autocomplete,invalid:w.invalid,"onUpdate:value":F[0]||(F[0]=I=>M.$emit("update:value",I)),onInput:D.onInput,onBlur:D.onBlur,[M.size||""]:!0,"onKeyup:enter":F[1]||(F[1]=I=>M.$emit("keyup:enter"))}),{"icon-right":(0,e.k6)(({size:I})=>[(0,e.bF)(j,{icon:D.iconType,width:I,height:I,onClick:D.toggleDisplayType,style:{cursor:"pointer"}},null,8,["icon","width","height","onClick"])]),_:1},16,["value","type","name","placeholder","autocomplete","invalid","onInput","onBlur"])}},96513:(P,C,d)=>{d.d(C,{X:()=>e.X});var e=d(87205)}}]);
