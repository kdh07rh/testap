"use strict";(self.webpackChunkjennifer5_frontend=self.webpackChunkjennifer5_frontend||[]).push([[33225],{33225:(k,A,d)=>{d.r(A),d.d(A,{default:()=>Mt});var t=d(47577),p=d(86617);const w={[p._6.DATASERVER_DOWN]:void 0,[p._6.LICENSE_EXPIRE_SOON]:void 0,[p._6.AGENT_VERSION_HIGHER_THAN_SERVER]:void 0,[p._6.INVALID_DOMAIN_ID]:void 0,[p._6.MAXIMUM_AGENT_NUMBER_PER_DOMAIN_REACHED]:void 0,[p._6.INSTANCE_ID_DUPLICATED]:void 0,[p._6.NO_LICENSE]:void 0,[p._6.DATASERVER_NOT_ENOUGH_DISK]:void 0,[p._6.DATASERVER_AGENT_DATA_LOSING]:void 0,[p._6.PENDING_AGENT_OPTION]:void 0,[p.m8.USER_SIGNED_UP]:void 0};var g=d(21005),b=d(6373);const E="/mng/notice/systemEvent";async function L(){const l={...w},u=await g.A.get(`${E}/listOnScreen`),v=await g.A.get(`${E}/listOnEmail`),n=await g.A.get(`${E}/listOnAdapter`);return u.data.forEach(e=>{l[e.type]===void 0&&(l[e.type]={name:e.name,type:e.type,activeStatusOnScreen:e.isActive,activeStatusOnEmail:!1,activeStatusOnAdapter:!1,activeDataserverListOnScreen:e.activeDataserverList,activeDataserverListOnEmail:[],activeDataserverListOnAdapter:[]})}),v.data.forEach(e=>{if(e.type===p.m8.USER_SIGNED_UP)l[e.type]={name:e.name,type:e.type,activeStatusOnScreen:!1,activeStatusOnEmail:e.isActive,activeStatusOnAdapter:!1,activeDataserverListOnScreen:[],activeDataserverListOnEmail:[location.host],activeDataserverListOnAdapter:[]};else{const c=l[e.type];c.activeStatusOnEmail=e.isActive,c.activeDataserverListOnEmail=e.activeDataserverList}}),n.data.forEach(e=>{const c=l[e.type];c.activeStatusOnAdapter=e.isActive,c.activeDataserverListOnAdapter=e.activeDataserverList}),Object.values(l)}async function F(){const{data:l}=await g.A.get("/mng/dataserver/list");return l}async function P(){const l=await g.A.get(`${E}/isActiveOnScreen`),u=await g.A.get(`${E}/isActiveOnEmail`),v=await g.A.get(`${E}/isActiveOnAdapter`);return[l.data,u.data,v.data]}async function V(l,u="Screen"){const{data:v}=await g.A.post(`${E}/permitOn${u}`,(0,b.$W)({isActive:l}));return v}async function O(l,u,v,n="Screen"){const{data:e}=await g.A.post(`${E}/setSettingOn${n}`,(0,b.$W)({type:l,isActive:u,activeDataserverList:v}));return e}async function G(){const{data:l}=await g.A.get("/serverInfo/smtp/list",{params:{format:"json"}});return l.map(u=>({text:u.sender,value:`${u.key}`}))}async function j(){const{data:l}=await g.A.get(`${E}/getEmailInfo`);return l}async function B(l){const{data:u}=await g.A.post(`${E}/setEmailInfo`,(0,b.$W)(l));return u}var W=d(87310),N=d(35375),C=d(80805),M=d(59260),T=d(67281),H=d(88994);const Q={class:"data-server-selector"},h={class:"top"},z=(0,t.pM)({__name:"DataServerSelector",props:{apiType:{},globalActiveStatus:{type:Boolean},activeStatus:{type:Boolean},activeDataServerList:{},totalDataServerList:{},isUserSignedUp:{type:Boolean}},emits:["update:activeStatus","update:activeDataServerList"],setup(l,{emit:u}){const v=(0,t.WQ)("i18n",{}),n=u,e=l,c=(0,t.EW)(()=>e.apiType==="Screen"?v.systemEventColumnNames[1]:e.apiType==="Email"?v.systemEventColumnNames[2]:e.apiType==="Adapter"?v.systemEventColumnNames[3]:""),o=(0,t.EW)(()=>e.isUserSignedUp?[[location.host,!0]]:e.totalDataServerList.map(a=>[a,e.activeDataServerList.includes(a)])),m=a=>{n("update:activeStatus",a)},S=(a,i)=>{i?n("update:activeDataServerList",[...e.activeDataServerList,a]):n("update:activeDataServerList",e.activeDataServerList.filter(_=>_!==a))};return(a,i)=>((0,t.uX)(),(0,t.CE)("div",Q,[(0,t.Lk)("div",h,[(0,t.Lk)("span",null,(0,t.v_)(c.value),1),i[0]||(i[0]=(0,t.eW)()),(0,t.bF)(C.A,{disabled:!e.globalActiveStatus,active:e.activeStatus,onChange:m},null,8,["disabled","active"])]),i[1]||(i[1]=(0,t.eW)()),(0,t.Lk)("div",{class:(0,t.C4)(["bottom",e.isUserSignedUp?"disabled":""])},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.value,(_,y)=>((0,t.uX)(),(0,t.CE)("div",{class:"item",key:y},[(0,t.bF)(H.A,{label:_[0],active:_[1],disabled:!e.globalActiveStatus||!e.activeStatus||e.isUserSignedUp,onChange:()=>S(_[0],!_[1])},null,8,["label","active","disabled","onChange"])]))),128))],2)]))}});var f=d(35339);const D=(0,f.A)(z,[["__scopeId","data-v-26f16802"]]),Y={class:"container"},U=824,x=424,J=(0,t.pM)({__name:"EventSettingWindow",props:{activeStatus:{},item:{}},emits:["close","submit"],setup(l,{emit:u}){const v=u,n=l,e=(0,t.Kh)({...n.item}),[c,o]=(0,M.V)(U,x),m=(0,t.WQ)("i18n",{}),S=(0,t.KR)([]),a=(0,t.EW)(()=>typeof p._6[n.item.name]<"u"),i=(0,t.EW)(()=>typeof p.m8[n.item.name]<"u"),_=(0,t.EW)(()=>typeof p.tv[n.item.name]<"u"),y=async()=>{a.value&&await O(e.type,e.activeStatusOnScreen,e.activeDataserverListOnScreen,"Screen"),i.value&&await O(e.type,e.activeStatusOnEmail,e.activeDataserverListOnEmail,"Email"),_.value&&await O(e.type,e.activeStatusOnAdapter,e.activeDataserverListOnAdapter,"Adapter"),v("submit")};return(0,t.KC)(async()=>{const R=await F();S.value=R}),(R,r)=>((0,t.uX)(),(0,t.Wv)(T.A,{class:"event-setting-window","open-w":U,"open-h":x,"open-x":(0,t.R1)(c),"open-y":(0,t.R1)(o),messages:{apply:(0,t.R1)(m).save,cancel:(0,t.R1)(m).cancel},onApply:y,onCancel:r[6]||(r[6]=()=>v("close"))},{subject:(0,t.k6)(()=>[(0,t.eW)((0,t.v_)(n.item.name),1)]),default:(0,t.k6)(()=>[r[9]||(r[9]=(0,t.eW)()),(0,t.Lk)("div",Y,[a.value?((0,t.uX)(),(0,t.Wv)(D,{key:0,"api-type":"Screen","global-active-status":n.activeStatus[0],"active-status":e.activeStatusOnScreen,"onUpdate:activeStatus":r[0]||(r[0]=s=>e.activeStatusOnScreen=s),"active-data-server-list":e.activeDataserverListOnScreen,"onUpdate:activeDataServerList":r[1]||(r[1]=s=>e.activeDataserverListOnScreen=s),"total-data-server-list":S.value,"is-user-signed-up":!1},null,8,["global-active-status","active-status","active-data-server-list","total-data-server-list"])):(0,t.Q3)("v-if",!0),r[7]||(r[7]=(0,t.eW)()),i.value?((0,t.uX)(),(0,t.Wv)(D,{key:1,"api-type":"Email","global-active-status":n.activeStatus[1],"active-status":e.activeStatusOnEmail,"onUpdate:activeStatus":r[2]||(r[2]=s=>e.activeStatusOnEmail=s),"active-data-server-list":e.activeDataserverListOnEmail,"onUpdate:activeDataServerList":r[3]||(r[3]=s=>e.activeDataserverListOnEmail=s),"total-data-server-list":S.value,"is-user-signed-up":n.item.name==="USER_SIGNED_UP"},null,8,["global-active-status","active-status","active-data-server-list","total-data-server-list","is-user-signed-up"])):(0,t.Q3)("v-if",!0),r[8]||(r[8]=(0,t.eW)()),_.value?((0,t.uX)(),(0,t.Wv)(D,{key:2,"api-type":"Adapter","global-active-status":n.activeStatus[2],"active-status":e.activeStatusOnAdapter,"onUpdate:activeStatus":r[4]||(r[4]=s=>e.activeStatusOnAdapter=s),"active-data-server-list":e.activeDataserverListOnAdapter,"onUpdate:activeDataServerList":r[5]||(r[5]=s=>e.activeDataserverListOnAdapter=s),"total-data-server-list":S.value,"is-user-signed-up":!1},null,8,["global-active-status","active-status","active-data-server-list","total-data-server-list"])):(0,t.Q3)("v-if",!0)])]),_:1,__:[9]},8,["open-x","open-y","messages"]))}}),Z=(0,f.A)(J,[["__scopeId","data-v-0d6ba904"]]),q={class:"event-view"},tt={class:"row head"},et={class:"type"},at={class:"switch"},st={class:"switch"},it={class:"switch"},nt=["onClick"],lt={class:"name"},ut={class:"host"},ot={class:"host"},rt={class:"host"},vt=(0,t.pM)({__name:"EventView",setup(l){const u=(0,t.WQ)("i18n",{}),v=(0,t.KR)([]),n=(0,t.KR)(void 0),e=(0,t.KR)([!1,!1,!1]),c=(S,a)=>{V(S,a)},o=S=>{n.value=S},m=async()=>{v.value=await L(),n.value=void 0};return(0,t.KC)(async()=>{v.value=await L(),e.value=await P()}),(S,a)=>((0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",q,[(0,t.Lk)("div",tt,[(0,t.Lk)("div",et,(0,t.v_)((0,t.R1)(u).systemEventColumnNames[0]),1),a[7]||(a[7]=(0,t.eW)()),(0,t.Lk)("div",at,[(0,t.bF)(C.A,{small:"","label-position":"right",label:(0,t.R1)(u).systemEventColumnNames[1],active:e.value[0],"onUpdate:active":a[0]||(a[0]=i=>e.value[0]=i),onChange:a[1]||(a[1]=i=>c(i,"Screen"))},null,8,["label","active"])]),a[8]||(a[8]=(0,t.eW)()),(0,t.Lk)("div",st,[(0,t.bF)(C.A,{small:"","label-position":"right",label:(0,t.R1)(u).systemEventColumnNames[2],active:e.value[1],"onUpdate:active":a[2]||(a[2]=i=>e.value[1]=i),onChange:a[3]||(a[3]=i=>c(i,"Email"))},null,8,["label","active"])]),a[9]||(a[9]=(0,t.eW)()),(0,t.Lk)("div",it,[(0,t.bF)(C.A,{small:"","label-position":"right",label:(0,t.R1)(u).systemEventColumnNames[3],active:e.value[2],"onUpdate:active":a[4]||(a[4]=i=>e.value[2]=i),onChange:a[5]||(a[5]=i=>c(i,"Adapter"))},null,8,["label","active"])])]),a[13]||(a[13]=(0,t.eW)()),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(v.value,(i,_)=>((0,t.uX)(),(0,t.CE)("div",{class:"row body",key:`${_}`,onClick:y=>o(i)},[(0,t.Lk)("div",lt,(0,t.v_)(i.name),1),a[10]||(a[10]=(0,t.eW)()),(0,t.Lk)("div",ut,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.activeDataserverListOnScreen,(y,R)=>((0,t.uX)(),(0,t.CE)("div",{key:`${_}_${R}`},[(0,t.Lk)("span",{class:(0,t.C4)([e.value[0]&&i.activeStatusOnScreen?"":"disabled"])},(0,t.v_)(y),3)]))),128))]),a[11]||(a[11]=(0,t.eW)()),(0,t.Lk)("div",ot,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.activeDataserverListOnEmail,(y,R)=>((0,t.uX)(),(0,t.CE)("div",{key:`${_}_${R}`},[(0,t.Lk)("span",{class:(0,t.C4)([e.value[1]&&i.activeStatusOnEmail?"":"disabled"])},(0,t.v_)(y),3)]))),128))]),a[12]||(a[12]=(0,t.eW)()),(0,t.Lk)("div",rt,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.activeDataserverListOnAdapter,(y,R)=>((0,t.uX)(),(0,t.CE)("div",{key:`${_}_${R}`},[(0,t.Lk)("span",{class:(0,t.C4)([e.value[2]&&i.activeStatusOnAdapter?"":"disabled"])},(0,t.v_)(y),3)]))),128))])],8,nt))),128))]),a[14]||(a[14]=(0,t.eW)()),n.value!==void 0?((0,t.uX)(),(0,t.Wv)(Z,{key:0,"active-status":e.value,item:n.value,onClose:a[6]||(a[6]=()=>n.value=void 0),onSubmit:m},null,8,["active-status","item"])):(0,t.Q3)("v-if",!0)],64))}}),dt=(0,f.A)(vt,[["__scopeId","data-v-23b26395"]]);var pt=d(65267),K=d(11649),ct=d(10935);const mt={class:"row"},gt={class:"subject"},_t={class:"ui"},St={class:"col"},Et={class:"col"},yt={class:"row"},Rt={class:"subject"},bt={class:"ui"},At={class:"row"},ft={class:"subject"},wt={class:"ui"},$=460,X=366,Lt=(0,t.pM)({__name:"EmailSettingWindow",props:{emailInfo:{},smtpItems:{}},emits:["close"],setup(l,{emit:u}){const v=u,n=l,[e,c]=(0,M.V)($,X),o=(0,t.WQ)("i18n",{}),m=(0,t.Kh)({...n.emailInfo}),S=(0,t.KR)(m.receivers.join(";")),a=(0,t.KR)(!1),i=({value:r})=>{m.smtpKey=r},_=r=>{m.receivers=r.split(";").filter(s=>s!==""&&(0,b.bB)(s))},y=()=>{location.hash="#/smtpAndAdapter"},R=async()=>{await B(m)&&v("close")};return(r,s)=>((0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(T.A,{class:"email-setting-window","open-w":$,"open-h":X,"open-x":(0,t.R1)(e),"open-y":(0,t.R1)(c),messages:{apply:(0,t.R1)(o).save,cancel:(0,t.R1)(o).cancel},"apply-btn-disabled":m.senderName==="",onApply:R,onCancel:s[3]||(s[3]=()=>v("close"))},{subject:(0,t.k6)(()=>[(0,t.eW)((0,t.v_)((0,t.R1)(o).emailNotification),1)]),default:(0,t.k6)(()=>[s[9]||(s[9]=(0,t.eW)()),(0,t.Lk)("div",mt,[(0,t.Lk)("div",gt,(0,t.v_)((0,t.R1)(o).senderMail),1),s[6]||(s[6]=(0,t.eW)()),(0,t.Lk)("div",_t,[(0,t.Lk)("div",St,[(0,t.bF)(pt.A,{normal:"",items:n.smtpItems,"selected-value":m.smtpKey,onOnchange:i},null,8,["items","selected-value"])]),s[5]||(s[5]=(0,t.eW)()),(0,t.Lk)("div",Et,[(0,t.bF)(N.A,{normal:"",items:[{text:`${(0,t.R1)(o).smtp} ${(0,t.R1)(o).setting}`}],pressed:a.value,onClick:s[0]||(s[0]=()=>a.value=!a.value)},null,8,["items","pressed"])])])]),s[10]||(s[10]=(0,t.eW)()),(0,t.Lk)("div",yt,[(0,t.Lk)("div",Rt,(0,t.v_)((0,t.R1)(o).senderName),1),s[7]||(s[7]=(0,t.eW)()),(0,t.Lk)("div",bt,[(0,t.bF)(K.A,{normal:"",validator:()=>m.senderName!=="",value:m.senderName,"onUpdate:value":s[1]||(s[1]=I=>m.senderName=I)},null,8,["validator","value"])])]),s[11]||(s[11]=(0,t.eW)()),(0,t.Lk)("div",At,[(0,t.Lk)("div",ft,(0,t.v_)((0,t.R1)(o).receiver),1),s[8]||(s[8]=(0,t.eW)()),(0,t.Lk)("div",wt,[(0,t.bF)(K.A,{normal:"",placeholder:"aaa@exmaple.com;bbb@example.com;...",validator:()=>m.receivers.length>0,value:S.value,"onUpdate:value":s[2]||(s[2]=I=>S.value=I),onInput:_},null,8,["validator","value"])])])]),_:1,__:[9,10,11]},8,["open-x","open-y","messages","apply-btn-disabled"]),s[12]||(s[12]=(0,t.eW)()),a.value?((0,t.uX)(),(0,t.Wv)(ct.A,{key:0,message:(0,t.R1)(o).smtpConfirmMessage,onApply:y,onCancel:s[4]||(s[4]=()=>a.value=!1)},null,8,["message"])):(0,t.Q3)("v-if",!0)],64))}}),Wt=(0,f.A)(Lt,[["__scopeId","data-v-3bc6c798"]]),Ct={class:"system-app"},Ot={class:"title"},Dt={class:"left"},It={class:"right"},kt={class:"main"},Nt=(0,t.pM)({__name:"App",setup(l){(0,t.Gt)("i18n",W.A);const u=(0,t.KR)(void 0),v=(0,t.KR)([]),n=(0,t.KR)(!1),e=async()=>{n.value=!0;const c=await j(),o=await G();u.value=c,v.value=o,n.value=!1};return(c,o)=>((0,t.uX)(),(0,t.CE)("div",Ct,[(0,t.Lk)("div",Ot,[(0,t.Lk)("div",Dt,(0,t.v_)((0,t.R1)(W.A).systemTitle),1),o[1]||(o[1]=(0,t.eW)()),(0,t.Lk)("div",It,[(0,t.bF)(N.A,{normal:"",loading:n.value,items:[{text:`${(0,t.R1)(W.A).emailNotification} ${(0,t.R1)(W.A).setting}`}],onClick:e},null,8,["loading","items"])])]),o[3]||(o[3]=(0,t.eW)()),(0,t.Lk)("div",kt,[(0,t.bF)(dt),o[2]||(o[2]=(0,t.eW)()),u.value!==void 0?((0,t.uX)(),(0,t.Wv)(Wt,{key:0,"email-info":u.value,"smtp-items":v.value,onClose:o[0]||(o[0]=()=>u.value=void 0)},null,8,["email-info","smtp-items"])):(0,t.Q3)("v-if",!0)])]))}}),Mt=(0,f.A)(Nt,[["__scopeId","data-v-5c791d94"]])},59260:(k,A,d)=>{d.d(A,{V:()=>p});var t=d(47577);function p(w,g){const b=(0,t.WQ)("windowSize",{width:window.innerWidth,height:window.innerHeight}),E=(0,t.EW)(()=>b.width/2-w/2),L=(0,t.EW)(()=>b.height/2-g/2);return[E,L]}},87310:(k,A,d)=>{d.d(A,{A:()=>g});var t=d(6373),p=d(44399);const g={title:t.Ru.get("ui.label.event"),internalTitle:t.Ru.get("ui.label.alarm"),externalTitle:t.Ru.get("ui.label.eventExternal"),systemTitle:t.Ru.get("ui.label.product.admin.notify"),saveChanges:t.Ru.get("ui.label.saveChanges"),pushAlarm:t.Ru.get("ui.label.alarmSystemPush"),pushAlarmSound:t.Ru.get("ui.label.pushAlarmSound"),alarmSound:t.Ru.get("ui.label.notificationSound"),alarmEventStatus:t.Ru.get("ui.label.alarmEventStatus"),alarmEventSetting:t.Ru.get("ui.label.alarmEventSetting"),alarmSaveStatus:t.Ru.get("ui.label.alarmSaveStatus"),alarmMaxAge:t.Ru.get("ui.label.alarmMaxAge"),alarmMaxCount:t.Ru.get("ui.label.alarmMaxCount"),normal:t.Ru.get("ui.label.normal"),warning:t.Ru.get("ui.label.warning"),fatal:t.Ru.get("ui.label.fatal"),sec:t.Ru.get("ui.label.unit.sec"),soundLoop:t.Ru.get("ui.label.soundLoop"),listening:t.Ru.get("ui.label.listening"),registerCustomSound:t.Ru.get("ui.label.registerCustomSound"),fileName:t.Ru.get("ui.label.fileName"),size:t.Ru.get("ui.label.size"),delete:t.Ru.get("ui.button.delete"),save:t.Ru.get("ui.button.save"),fileUpload:t.Ru.get("ui.label.fileUpload"),kb:t.Ru.get("ui.label.unit.kb"),eventLevel:t.Ru.get("ui.label.eventLevel"),repeatOff:t.Ru.get("ui.label.repeatOff"),offReservation:t.Ru.get("ui.label.offReservation"),everyday:t.Ru.get("ui.label.time.daily"),weekday:t.Ru.get("ui.label.time.weekday"),custom:t.Ru.get("ui.label.time.user"),allowNotification:t.Ru.get("ui.label.allowNotification"),object:t.Ru.get("ui.label.object"),domain:t.Ru.get("ui.label.domain"),goBack:t.Ru.get("ui.label.goBack"),email:t.Ru.get("ui.label.email"),targetConfig:t.Ru.get("ui.label.targetConfig"),submit:t.Ru.get("ui.button.add"),sender:t.Ru.get("ui.label.sender"),senderName:t.Ru.get("ui.label.senderName"),receiver:t.Ru.get("ui.label.receiver"),modify:t.Ru.get("ui.button.modify"),mailSubjectFormat:t.Ru.get("ui.label.mailSubjectFormat"),mailContentsFormat:t.Ru.get("ui.label.mailContentsFormat"),html:t.Ru.get("ui.label.html"),plainText:t.Ru.get("ui.label.plainText"),documentType:t.Ru.get("ui.label.documentType"),adapterSetting:t.Ru.get("ui.group.adapter"),setting:t.Ru.get("ui.label.setting"),emailNotification:t.Ru.get("ui.label.notify.email"),senderMail:t.Ru.get("ui.label.senderMail"),smtp:t.Ru.get("ui.en.smtp"),smtpConfirmMessage:t.Ru.get("text.0002"),weekdays:[t.Ru.get("ui.label.time.sunday"),t.Ru.get("ui.label.time.monday"),t.Ru.get("ui.label.time.tuesday"),t.Ru.get("ui.label.time.wednesday"),t.Ru.get("ui.label.time.thursday"),t.Ru.get("ui.label.time.friday"),t.Ru.get("ui.label.time.saturday")],systemEventColumnNames:[t.Ru.get("ui.label.type"),t.Ru.get("ui.label.notify.screen"),t.Ru.get("ui.label.notify.email"),t.Ru.get("ui.label.notify.adapter")],M0723:t.Ru.get("M0723"),M0724:t.Ru.get("M0724"),M0079:t.Ru.get("M0079"),M0482:t.Ru.get("M0482"),...p.Ay}}}]);
