(()=>{"use strict";var v={31472:(n,o,r)=>{r.d(o,{H:()=>O,W:()=>f});var e=r(86617);const _="/api-v2/manage/xview-pattern-recognition",s="/script/tf-model/reward_v20230630_2/model.json",f=60,O=60,T=54,A=5,D=5,b=null,w={[e.i8.HTTP_IO_EXCEPTION]:5,[e.i8.HTTP_404_ERROR]:1,[e.i8.OUT_OF_MEMORY]:5,[e.i8.SERVICE_EXCEPTION]:5,[e.i8.SERVICE_ERROR]:1,[e.i8.DB_CONNECTION_UNCLOSED]:5,[e.i8.DB_STATEMENT_UNCLOSED]:1,[e.i8.DB_RESULTSET_UNCLOSED]:1,[e.i8.PLC_REJECTED]:5,[e.i8.DEADLOCK]:5,[e.i8.METHOD_EXCEPTION]:1,[e.i8.RECURSIVE_CALL]:1,[e.i8.REPETITIVE_CALL]:1,[e.i8.SQL_EXCEPTION]:4,[e.i8.SQL_TOOMANY_FETCH]:5,[e.i8.EXTERNALCALL_EXCEPTION]:5,[e.i8.DB_CONNECTION_FAIL]:5,[e.i8.DB_UN_COMMIT_ROLLBACK]:1,[e.i8.DB_CONNECTION_ILLEGAL_ACCESS]:1,[e.i8.CORE_ERROR]:5,[e.i8.COMPILE_ERROR]:3,[e.i8.PARSE_ERROR]:3,[e.i8.PHP_WARNING]:1,[e.i8.NATIVE_CRITICAL_ERROR]:5,[e.i8.BAD_RESPONSE_TIME_APPLICATION]:3,[e.i8.BAD_RESPONSE_TIME_SQL]:5,[e.i8.BAD_RESPONSE_TIME_EXTERNAL_CALL]:5,[e.i8.AGENT_STOP]:5,[e.i8.AGENT_START]:1,[e.i8.AGENT_RECONNECT]:1,[e.i8.THREAD_KILL_MANUAL]:1,[e.i8.THREAD_KILL_AUTO]:1}},74014:(n,o,r)=>{var e=r(3317),_=r(31472);importScripts("/script/tf.js");const s=15;let f=8e3,T=60*10*1e3,A=parseInt(T/_.W),D=parseInt(f/_.H);function b(a,c){let p={max:0,min:0,avg:0,cnt:0};for(let t=0;t<_.W;t++)p.max+=g(a.max[t],c.max[t])/_.W,p.min+=g(a.min[t],c.min[t])/_.W,p.avg+=g(a.cnt[t]>0?a.sum[t]/a.cnt[t]:0,c.cnt[t]>0?c.sum[t]/c.cnt[t]:0)/_.W,p.cnt+=g(a.cnt[t],c.cnt[t])/_.W;let d=0;const m={max:.3,min:.1,avg:.3,cnt:.3};for(const[t,E]of Object.entries(p)){const l=E*m[t];isNaN(l)||(d+=E*m[t])}return d*100}function w(a,c){const p=a.length;let d=0,m=0,t=0;for(let E=0;E<p;E++)d+=a[E]*c[E],m+=a[E]**2,t+=c[E]**2;return m=Math.sqrt(m),t=Math.sqrt(t),d/(m*t)}function g(a,c){return a===c?1:Math.min(a,c)/((a+c)/2)}function L(a,c){const p=new Map;return a.map(d=>{const[m,t,E]=d;p.get(E)===void 0&&p.set(E,{max:new Array(s).fill(0),min:new Array(s).fill(0),sum:new Array(s).fill(0),cnt:new Array(s).fill(0)});let l=p.get(E),u=((m-c)/A).toFixed(0);l.max[u]=Math.max(l.max[u],t),l.min[u]=l.min[u]===0?t:Math.min(l.min[u],t),l.sum[u]+=t,l.cnt[u]+=1}),p}function h(a,c,p,d,m){const t=new Map;function E(l){const u=[1,_.H,_.W,1],R=(0,e.d)(l,p,d,m);let C=tf.tensor(R,u),I=c.predict(C),M=I.arraySync()[0];return I.dispose(),M}return t.clear(),a.forEach(l=>{if(t.get(l[2])===void 0){let u=a.filter(C=>C[2]===l[2]),R=E(u);t.set(l[2],R)}}),t}self.onmessage=async({data:a})=>{const c=Date.now(),p=await tf.loadGraphModel("/script/tf-model/reward_v20230630_2/model.json"),{name:d,rows:m,axisMax:t,TS_FST:E,TS_LST:l}=a,u=l-E;A=parseInt(`${u/s}`),D=parseInt(`${t/_.H}`);const R=L(m,E),C=h(m,p,E,u,t),I=new Map,M=R.get(d);R.forEach((S,N)=>{I.set(N,[b(M,S)])});const y=C.get(d);C.forEach((S,N)=>{I.get(N).push(w(y,S)*100)});const x=new Map([...I.entries()].sort((S,N)=>N[1][1]-S[1][1]));self.postMessage([x,d,Date.now()-c])}}},P={};function i(n){var o=P[n];if(o!==void 0)return o.exports;var r=P[n]={exports:{}};return v[n](r,r.exports,i),r.exports}i.m=v,i.x=()=>{var n=i.O(void 0,[18757],()=>i(74014));return n=i.O(n),n},(()=>{var n=[];i.O=(o,r,e,_)=>{if(r){_=_||0;for(var s=n.length;s>0&&n[s-1][2]>_;s--)n[s]=n[s-1];n[s]=[r,e,_];return}for(var f=1/0,s=0;s<n.length;s++){for(var[r,e,_]=n[s],O=!0,T=0;T<r.length;T++)(_&!1||f>=_)&&Object.keys(i.O).every(L=>i.O[L](r[T]))?r.splice(T--,1):(O=!1,_<f&&(f=_));if(O){n.splice(s--,1);var A=e();A!==void 0&&(o=A)}}return o}})(),i.d=(n,o)=>{for(var r in o)i.o(o,r)&&!i.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:o[r]})},i.f={},i.e=n=>Promise.all(Object.keys(i.f).reduce((o,r)=>(i.f[r](n,o),o),[])),i.u=n=>""+n+".js",i.miniCssF=n=>{},i.o=(n,o)=>Object.prototype.hasOwnProperty.call(n,o),i.p="/bundles/",(()=>{var n={74014:1},o=_=>{var[s,f,O]=_;for(var T in f)i.o(f,T)&&(i.m[T]=f[T]);for(O&&O(i);s.length;)n[s.pop()]=1;e(_)};i.f.i=(_,s)=>{n[_]||importScripts(i.p+i.u(_))};var r=self.webpackChunkjennifer5_frontend=self.webpackChunkjennifer5_frontend||[],e=r.push.bind(r);r.push=o})(),(()=>{var n=i.x;i.x=()=>i.e(18757).then(n)})();var B=i.x()})();
