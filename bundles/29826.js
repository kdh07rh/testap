"use strict";(self.webpackChunkjennifer5_frontend=self.webpackChunkjennifer5_frontend||[]).push([[29826],{29826:(E,_,S)=>{S.a(E,async(tt,j)=>{try{S.d(_,{A:()=>$});var s=S(23773),V=S(76843),Q=S(10324),et=S(16956),Y=tt([s,Q]);[s,Q]=Y.then?(await Y)():Y,V.A.use(Q.A);const $={name:"grid.xtable",extend:"event",component:function(){const x=V.A.include("util.base"),y=V.A.include("grid.table"),ot=V.A.include("grid.row");x.resize(function(){for(var l=V.A.get("grid.xtable"),u=0;u<l.length;u++)for(var w=l[u],H=0;H<w.length;H++)w[H].resize()},1e3);var O=function(){var l=null,u=null,w=[],H=[],z=[],A=null,F=1,X=!1,b=!1,L=8,C=null,M=x.index(),a=null,T=null,G=0;function W(t,e,o,n){for(var i=[],r=0,h=t.length;r<h;r++){var c=new ot,f=e+r;c.init(t[r],l.tpl.row,o),c.setIndex(f),(n=="open"||n=="fold")&&(c.type=n),o==null&&(H[f]=c),i.push(c)}return i}function nt(t){var e=["buffer","bufferCount","csvCount","sortLoading","sortCache","sortIndex","sortOrder","event","rows","scrollWidth","width","rowHeight","xssFilter","msort","vscrollKeydownEvent"],o=(0,s.A)(t.root);if(t.options.buffer=="vscroll"&&(o.hasClass("nowrap")||o.addClass("nowrap")),t.options.buffer!="page"&&(o.hasClass("scroll")||o.addClass("scroll")),o.append(o.children("table").clone()),l=y(o.children("table:first-child"),f(t,e)),v(t,l),u=y(o.children("table:last-child"),f(t,e.concat("resize"))),p(t,u),d(t),t.options.xssFilter){var n=t.options.xssFilter,i=n===!0?l.uit.getColumnCount():n.length;T={};for(var r=0;r<i;r++){var h=n===!0?r:n[r],c=l.getColumn(h);T[c.name]=!0}}function f(m,g){var N={};for(var k in m.options)s.A.inArray(k,g)==-1&&(N[k]=m.options[k]);return m.options.scrollWidth>0&&(N.resize=!1),N}function d(m){var g=m.options;g.scrollWidth>0?m.scrollWidth(g.scrollWidth,!0):g.width>0&&(0,s.A)(m.root).outerWidth(g.width)}function v(m,g){(0,s.A)(g.root).wrap("<div class='head'></div>"),(0,s.A)(g.root).children("tbody").remove()}function p(m,g){var N=g.listColumn();if(m.options.buffer!="page"){var k=m.options.scrollHeight;m.options.buffer=="vscroll"?((0,s.A)(g.root).wrap("<div class='body' style='max-height: "+k+"px'><div></div></div>"),(0,s.A)(g.root).parent().parent().css({"overflow-y":"scroll",transform:"translateZ(0)"})):((0,s.A)(g.root).wrap("<div class='body' style='max-height: "+k+"px'></div>"),(0,s.A)(g.root).parent().css({"overflow-y":"scroll"}))}else(0,s.A)(g.root).wrap("<div class='body'></div>");(0,s.A)(g.root).find("thead > tr").outerHeight(0).not(":last-child").remove();for(var U=0;U<N.length;U++)(0,s.A)(N[U].element).html("").outerHeight(0)}}function it(t){l.on("colresize",function(e,o){for(var n=l.listColumn(),i=u.listColumn(),r=!1,h=n.length-1;h>=0;h--){var c=(0,s.A)(n[h].element).outerWidth();t.options.buffer!="page"&&n[h].type=="show"&&!r?(x.browser.msie?(0,s.A)(i[h].element).outerWidth(c-J(t)):(0,s.A)(i[h].element).css({width:"auto"}),r=!0):((0,s.A)(n[h].element).outerWidth(c),(0,s.A)(i[h].element).outerWidth(c))}Z(500),t.emit("colresize",[e,o])}),l.on("colshow",function(e,o){u.uit.showColumn(e.index),t.resize(),t.emit("colshow",[e,o])}),l.on("colhide",function(e,o){u.uit.hideColumn(e.index),t.resize(),t.emit("colhide",[e,o])}),l.on("colclick",function(e,o){t.emit("colclick",[e,o])}),l.on("coldblclick",function(e,o){t.emit("coldblclick",[e,o])}),l.on("colmenu",function(e,o){t.emit("colmenu",[e,o])}),l.on("sort",function(e,o){t.sort(e.index,e.order,!1,o),t.emit("sort",[e,o])}),u.on("select",function(e,o){t.emit("select",[e,o])}),u.on("click",function(e,o){t.emit("click",[e,o])}),u.on("dblclick",function(e,o){t.emit("dblclick",[e,o])}),u.on("rowmenu",function(e,o){t.emit("rowmenu",[e,o])}),u.on("expand",function(e,o){t.emit("expand",[e,o])}),u.on("expandend",function(e,o){t.emit("expandend",[e,o])})}function st(t,e,o){var n=t.options,i=0,r=(0,s.A)(t.root).children(".head"),h=(0,s.A)(t.root).children(".body");c(t),h[0].addEventListener("scroll",(0,et.k3)(function(f){if(t.hideColumnMenu(),e>0&&(r[0].scrollLeft=this.scrollLeft),n.buffer=="scroll"){var d=this.scrollTop+o,v=h[0].scrollHeight;d>=v*.9&&(t.next(),t.emit("scroll",f))}else n.buffer=="vscroll"&&a.prev_scroll_left!=this.scrollLeft&&(a.prev_scroll_left=this.scrollLeft);f.stopPropagation()},50)),n.buffer=="vscroll"&&n.vscrollKeydownEvent&&((0,s.A)(t.root).hover(function(){a.is_focus=!0},function(){a.is_focus=!1}),t.addEvent(document,"keydown",function(f){if(a.is_focus){var d=h.scrollTop(),v=K(t);if(f.which==38||f.which==40)h.scrollTop(d+(f.which==38?-v:v));else if(f.which==33||f.which==34){var p=v*a.scroll_count;h.scrollTop(d+(f.which==33?-p:p))}}}));function c(f){var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,v=h.scrollTop();if(i===v){d(function(){c(f)}),h.css({"will-change":"auto"}),h.find("tbody").css({"will-change":"auto"});return}else h.css({"will-change":"transform"}),h.find("tbody").css({"will-change":"contents"}),i=v,R(v),f.next(),f.emit("scroll"),d(function(){c(f)})}}function rt(t){var e={},o={},n=0;(0,s.A)(t.root).find("thead .resize").remove();for(var i=0,r=l.uit.getColumnCount();i<r;i++){var h=(0,s.A)(l.getColumn(i).element),c=(0,s.A)("<div class='resize'></div>"),f=h.position(),d=h.outerWidth()+f.left-1;c.css({position:"absolute",width:L+"px",height:h.outerHeight(),left:(i==r-1?d-L:d)+"px",top:f.top+"px",cursor:"w-resize","z-index":"1"}),h.append(c),function(p,m){t.addEvent(c,"mousedown",function(g){return n==0&&(n=g.pageX),e={head:l.getColumn(p),body:u.getColumn(p),isLast:m},o={column:(0,s.A)(e.head.element).outerWidth(),head:(0,s.A)(l.root).outerWidth(),body:(0,s.A)(u.root).outerWidth(),"max-width":parseInt((0,s.A)(l.root).parent().css("max-width"))},b=!0,!1})}(i,i==r-1)}t.addEvent(document,"mousemove",function(p){n>0&&v(p.pageX-n)}),t.addEvent(document,"mouseup",function(p){if(n>0){if(e.isLast){var m=(0,s.A)(u.root).parent().scrollLeft(),g=p.pageX-n;g>0&&((0,s.A)(l.root).parent().scrollLeft(m+g),(0,s.A)(u.root).parent().scrollLeft(m+g))}return n=0,Z(500),l.emit("colresize",[e.head,p]),setTimeout(function(){b=!1},100),!1}}),l.on("colshow",Z),l.on("colhide",Z);function v(p){var m=30;o.head+p<o["max-width"]||o.column+p<m||((0,s.A)(e.head.element).outerWidth(o.column+p),(0,s.A)(e.body.element).outerWidth(o.column+p),(0,s.A)(l.root).outerWidth(o.head+p),(0,s.A)(u.root).outerWidth(o.body+p))}}function Z(t){setTimeout(function(){for(var e=0,o=l.uit.getColumnCount();e<o;e++){var n=(0,s.A)(l.getColumn(e).element),i=n.position(),r=n.outerWidth()+i.left-1;n.find(".resize").css("left",(e==o-1?r-L:r)+"px")}},t)}function J(t){return t.options.buffer=="page"?0:x.scrollWidth()}function R(t){a!=null&&(t>=a.max_scroll_top&&(t=a.max_scroll_top),(0,s.A)(u.root).css({top:t+"px"}),a.start_index=parseInt(t*a.index_rate),a.end_index=a.start_index+a.scroll_count)}function lt(t){var e=t.options.scrollHeight/K(t);a.height=K(t),a.scroll_height=t.options.scrollHeight,a.content_height=z.length*a.height,a.count=z.length,a.scroll_count=Math.ceil(e);var o=a.content_height-a.scroll_height;a.max_scroll_top=o>=0?o:0,a.index_rate=(a.count-a.scroll_count)/a.max_scroll_top,(0,s.A)(u.root).parent().height(a.content_height>0?a.content_height:"auto")}function ht(t){(0,s.A)(t.root).find(".body").scrollTop(0),(0,s.A)(u.root).css({top:"0px"}),(0,s.A)(u.root).parent().css({height:"auto"}),a={height:0,scroll_height:0,content_height:0,count:0,scroll_count:0,max_scroll_top:0,start_index:0,end_index:0,prev_scroll_left:0,is_focus:!0}}function P(t){for(var e=0;e<t.length;e++)z.push(t[e]),t[e].type=="open"&&t[e].children.length>0&&P(t[e].children)}function D(t,e,o){for(var n=t.children.length,i=W(x.typeCheck("array",e)?e:[e],n,t,o),r=0,h=i.length;r<h;r++)t.children.push(i[r])}function I(t,e){e?(z=[],P(w)):z=w,t.options.buffer=="vscroll"&&lt(t)}function ct(t){for(var e=t.options.msort,o=e===!0?l.uit.getColumnCount():e.length,n=[],i=[],r=0;r<o;r++){var h=e===!0?r:e[r],c=t.getColumn(h);c.element!=null&&(function(f,d){t.addEvent(d.element,"click",function(v){if(!(0,s.A)(v.target).hasClass("resize")){if(d.order=="asc"){d.order=null;for(var p=0;p<n.length;p++)d.name==n[p]&&(n.splice(p,1),i.splice(p,1))}else{var m=x.inArray(d.name,n);d.order==null?d.order="desc":d.order=="desc"&&(d.order="asc"),m==-1?(n.push(d.name),i.push(d.order)):i[m]=d.order}t.emit("msort",[d,v]),t.msort(n,i),t.emit("colclick",[d,v])}})}(h,c),(0,s.A)(c.element).css("cursor","pointer"))}}function q(t,e){if(e.indexOf(".")!=-1){var o=e.split("."),n=t[o.shift()];return o.length==1?n[o[0]]:q(n,o.join("."))}return t[e]}function B(t,e,o,n,i){var r=n[i]=="desc"?1:0,h=o[i],c=q(t,h),f=q(e,h),d=!isNaN(+c-+f),v=d?+c:c,p=d?+f:f;return d||(typeof v=="string"&&(v=v.toLowerCase()),typeof p=="string"&&(p=p.toLowerCase())),v<p?r==0?-1:1:v==p?o.length-1>i?B(t,e,o,n,i+1):0:r==0?1:-1}function K(t){return G==0?t.options.rowHeight:G}this.init=function(){var t=this.options;if(t.data=t.rows!=null?t.rows:t.data,this.root.tagName=="TABLE"){var e=(0,s.A)(this.root).wrap("<div class='xtable'></div>");this.root=e.parent().get(0)}if(nt(this),it(this),st(this,t.scrollWidth,t.scrollHeight),t.msort&&t.sortEvent&&ct(this),t.data&&this.update(t.data),l.tpl.loading){var o=(0,s.A)(l.tpl.loading());(0,s.A)(this.root).append(o),t.sortLoading=t.sortLoading===!0?500:t.sortLoading}t.resize&&(t.scrollWidth>0?rt(this):(l.resizeColumns(),l.resize()))},this.render=function(t,e){I(this,t),e===!0&&this.options.buffer=="vscroll"&&R(0),this.next()},this.select=function(t){C!=null&&(0,s.A)(C.element).removeClass("selected");var e=this.get(t);return C=e,e.element!=null&&(0,s.A)(e.element).addClass("selected"),e},this.unselect=function(){C!=null&&((0,s.A)(C.element).removeClass("selected"),C=null)},this.update=function(t){this.reset(),w=W(t,0,null),this.render(!1,!0),this.emit("update"),l.emit("colresize"),this.options.sortIndex&&(this.options.sort?this.sort(this.options.sortIndex,this.options.sortOrder,!0):this.options.msort&&this.msort(this.options.sortIndex,this.options.sortOrder,!0))},this.updateTree=function(t){this.reset();for(var e=0;e<t.length;e++){var o=M.getParentIndex(t[e].index);if(o==null)w.push(W([t[e].data],0,null,t[e].type)[0]);else{var n=this.get(o);n&&D(n,t[e].data,t[e].type)}}this.render(!0,!0),this.emit("updateTree")},this.append=function(t,e){var o=this.get(t);o&&(D(o,e),this.clear(),this.render(!0,!0),this.emit("append"))},this.open=function(t){var e=this.get(t);e&&(e.type="open",this.clear(),this.render(!0),this.emit("open",[e]))},this.fold=function(t){var e=this.get(t);e&&(e.type="fold",this.clear(),this.render(!0),this.emit("fold",[e]))},this.openAll=function(t){var e=[];if(this.findAll(t,e),e){for(var o=0,n=e.length;o<n;o++)e[o].type="open";this.clear(),this.render(!0),this.emit("openall")}},this.foldAll=function(t){var e=[];if(this.findAll(t,e),e){for(var o=0,n=e.length;o<n;o++)e[o].type="fold";this.clear(),this.render(!0),this.emit("foldall")}},this.next=function(){var t=(F-1)*this.options.bufferCount,e=t+this.options.bufferCount;if(this.options.buffer=="vscroll"&&(u.reset(),a.start_index<a.end_index&&(t=a.start_index,e=a.end_index)),e=e>z.length?z.length:e,e<=z.length){for(var o=[],n=t;n<e;n++){var i=z[n];i&&(i.seq=n+1,i.reload(l.uit.getColumn(),null,T),o.push(i))}u.append(o),this.options.buffer!="vscroll"?(this.emit("next",[F]),o.length>0&&F++):this.emit("next",[o])}if(G==0&&u.count()>0){var r=u.get(0);r&&r.element&&(G=(0,s.A)(r.element).outerHeight())}},this.page=function(t){if(this.options.buffer=="scroll"||this.options.buffer=="vscroll"||this.getPage()==t)return!1;this.clear(),F=t<1?1:t,this.render()},this.sort=function(t,e,o,n){if(!this.options.fields||!this.options.sort||this.options.msort||b)return;var i=this,r=l.getColumn(t);typeof r.name=="string"&&(r.order=e||(r.order=="asc"||r.order==null?"desc":"asc"),l.uit.setColumn(t,r),this.options.sortLoading&&!o?(i.showLoading(),setTimeout(function(){h()},this.options.sortLoading)):h()),this.options.sortCache&&this.setOption({sortIndex:r.index,sortOrder:r.order});function h(){w.sort(function(c,f){return B(c.data,f.data,[r.name],[r.order],0)}),i.clear(),i.render(!0),i.emit("sortend",[r,n]),i.hideLoading()}},this.msort=function(t,e,o){if(!this.options.fields||!this.options.msort||this.options.sort||!x.typeCheck("array",t)||!x.typeCheck("array",e)||t.length!=e.length)return;A==null?A=z:z=A;var n=this,i=z.slice();this.options.sortLoading&&!o?(n.showLoading(),setTimeout(function(){r()},this.options.sortLoading)):r(),this.options.sortCache&&this.setOption({sortIndex:t,sortOrder:e});function r(){t.length>0&&i.sort(function(h,c){return B(h.data,c.data,t,e,0)}),w=i,n.clear(),n.render(!0),n.emit("msortend"),n.hideLoading(),i=null}},this.filter=function(t){A==null?A=z:z=A;for(var e=z.slice(),o=[],n=0,i=e.length;n<i;n++){var r=e[n].data;(typeof t=="function"&&t(r)===!0||!t)&&o.push(r)}this.update(o),this.emit("filter",[o]),e=null},this.rollback=function(){this.filter(null),A=null},this.clear=function(){F=1,u.uit.removeRows(),u.scroll()},this.reset=function(){this.options.buffer=="vscroll"&&ht(this),this.clear(),w=[],H=[],z=[],C=null},this.resize=function(){l.resizeColumns(),l.resize(),l.emit("colresize")},this.scrollWidth=function(t,e){if(this.options.scrollWidth!=0){var o=this.options.width;if(o>0){var n=t>=o?t-J(this):o;(0,s.A)(this.root).outerWidth(n)}else(0,s.A)(this.root).outerWidth(t-J(this));if(t>0){var i=(0,s.A)(this.root).outerWidth();(0,s.A)(this.root).outerWidth(t),e&&((0,s.A)(l.root).outerWidth(i+J(this)),(0,s.A)(u.root).outerWidth(i),Z(1e3)),(0,s.A)(l.root).parent().css("max-width",t),(0,s.A)(u.root).parent().css("max-width",t)}}},this.scrollHeight=function(t){this.options.buffer!="page"&&((0,s.A)(this.root).find(".body").css("max-height",t+"px").scrollTop(0),this.setOption("scrollHeight",t),I(this,!0),this.options.buffer=="vscroll"&&R(0),this.next())},this.scrollTop=function(t,e){if(this.options.buffer=="vscroll"){var o=(0,s.A)(this.root).children(".body");I(this,!0);for(var n=0,i=z.length;n<i;n++){var r=z[n];if(""+t==r.index){var h=n*a.height,c=o.height(),f=x.typeCheck("integer",e)?e:0;h+f>c&&(h+=f),o.scrollTop(h),this.clear(),this.next();break}}}},this.height=function(t){this.scrollHeight(t)},this.size=function(){return w.length},this.count=function(){return w.length},this.list=function(){return w},this.listColumn=function(){return l.listColumn()},this.listData=function(){for(var t=[],e=0;e<w.length;e++)t.push(w[e].data);return t},this.get=function(t){if(t==null)return null;var e=H[t];if(e)return e;for(var o=M.getIndexList(t),e=H[o[0]],n=1,i=o.length;n<i&&e;n++)e=e.children[o[n]];return e},this.findAll=function(t,e){var o=this.get(t);if(o!=null){x.typeCheck("array",e)||(e=[o]);for(var n=0;n<o.children.length;n++){var i=o.children[n];e.push(i),i.children.length>0&&this.findAll(i.index,e)}}},this.getColumn=function(t){return l.getColumn(t)},this.getData=function(t){var e=this.get(t);return e?e.data:null},this.showColumn=function(t){l.showColumn(t)},this.hideColumn=function(t){l.hideColumn(t)},this.initColumns=function(t){l.initColumns(t),u.initColumns(t),l.emit("colresize")},this.showColumnMenu=function(t,e){l.showColumnMenu(t,e)},this.hideColumnMenu=function(){l.hideColumnMenu()},this.toggleColumnMenu=function(t,e){l.toggleColumnMenu(t,e)},this.showExpand=function(t,e){u.showExpand(t,e)},this.hideExpand=function(t){t?u.hideExpand(t):u.hideExpand()},this.getExpand=function(){return u.getExpand()},this.showLoading=function(t){if(!X&&(X=!0,t>0)){var e=this;setTimeout(function(){e.hideLoading()},t)}},this.hideLoading=function(){X&&(X=!1)},this.isLoading=function(){return X},this.setCsv=function(t){var e=this.options;if(!(!e.fields&&!e.csv)){var o=x.getCsvFields(e.fields,e.csv),n=e.csvNumber?x.getCsvFields(e.fields,e.csvNumber):null;this.update(x.csvToData(o,t,n))}},this.setCsvFile=function(t){if(!(!this.options.fields&&!this.options.csv)){var e=this;x.fileToCsv(t,function(o){e.setCsv(o)})}},this.getCsv=function(){if(!(!this.options.fields&&!this.options.csv)){var t=x.getCsvFields(this.options.fields,this.options.csv),e=w.length>this.options.csvCount?this.options.csvCount:w.length;return x.dataToCsv2({fields:t,rows:this.listData(),count:e,names:this.options.csvNames})}},this.getCsvBase64=function(){if(!(!this.options.fields&&!this.options.csv))return x.csvToBase64(this.getCsv())},this.downloadCsv=function(t){x.typeCheck("string",t)&&(t=t.split(".")[0]);var e=document.createElement("a");e.download=t?t+".csv":"table.csv",e.href=this.getCsvBase64(),document.body.appendChild(e),e.click(),e.parentNode.removeChild(e)},this.rowFunc=function(t,e,o){if(this.options.fields){var n=typeof o=="function",i=0,r=n?0:w.length,h=l.getColumn(e);if(h.name)for(var c=0;c<w.length;c++){var f=w[c].data,d=f[h.name];isNaN(d)||(n?o(w[c])&&(i+=d,r++):i+=d)}return t=="sum"?i:t=="avg"?i/r:null}},this.getPage=function(){return F-1},this.activeIndex=function(){return C?C.index:null},this.setTpl=function(t,e){l.setTpl(t,e)}};return O.setup=function(){return{fields:null,csv:null,csvNames:null,csvNumber:null,csvCount:1e4,data:[],rows:null,colshow:!1,expand:!1,expandEvent:!0,resize:!1,rowHeight:26,scrollHeight:200,scrollWidth:0,width:0,buffer:"scroll",bufferCount:100,msort:!1,sort:!1,sortLoading:!1,sortCache:!1,sortIndex:null,sortOrder:"asc",sortEvent:!0,xssFilter:!1,animate:!1,vscrollKeydownEvent:!0}},O}};j()}catch($){j($)}})}}]);
