"use strict";(self.webpackChunkjennifer5_frontend=self.webpackChunkjennifer5_frontend||[]).push([[15366],{3280:(M,v,o)=>{o.d(v,{X:()=>L});var e=o(47577);const k={class:"popup-and-button-wrapper"},D={class:"popup-window-container"};function L(h,C,c,I,T,m){const R=(0,e.g2)("Icon"),W=(0,e.g2)("resource-selector"),P=(0,e.g2)("window"),V=(0,e.g2)("fade-down"),Y=(0,e.gN)("click-outside");return(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",k,[(0,e.Lk)("button",{ref:"popup-button",class:"jui-ish-button",onClick:C[0]||(C[0]=(...N)=>m.buttonClickHandler&&m.buttonClickHandler(...N))},[(0,e.eW)((0,e.v_)(m.i18n.targetConfig)+" ",1),c.useButtonIcon?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[C[3]||(C[3]=(0,e.eW)(`
                :
                `)),(0,e.bF)(R,{"style-override":"position: relative; top:3px;","resource-type":T.selectedResourceType},null,8,["resource-type"]),(0,e.eW)(" "+(0,e.v_)(m.selectedResourceText),1)],64)):(0,e.Q3)("v-if",!0)],512),C[5]||(C[5]=(0,e.eW)()),(0,e.bF)(V,null,{default:(0,e.k6)(()=>[T.open?((0,e.uX)(),(0,e.Wv)(P,{key:0,messages:m.messagesForWindow,"open-x":T.openX,"onUpdate:openX":C[1]||(C[1]=N=>T.openX=N),"open-y":T.openY,"onUpdate:openY":C[2]||(C[2]=N=>T.openY=N),"open-w":m.prettyWidth,"open-h":540,onApply:m.submitNManualChecked,onCancel:m.cancelHandler},{subject:(0,e.k6)(()=>[(0,e.Lk)("span",null,(0,e.v_)(m.i18n.targetConfig),1)]),default:(0,e.k6)(()=>[C[4]||(C[4]=(0,e.eW)()),(0,e.Lk)("div",D,[(0,e.bF)(W,{tab:T.currentTab,resources:T.currentResources,"no-border":!1,"show-resource-type-tab":!1,onTabChange:m.tabChangeHandler,onResourceChange:m.resourceChangeHandler},null,8,["tab","resources","onTabChange","onResourceChange"])])]),_:1,__:[4]},8,["messages","open-x","open-y","open-w","onApply","onCancel"])):(0,e.Q3)("v-if",!0)]),_:1})])),[[Y,m.onClickOutside]])}},3515:(M,v,o)=>{o.d(v,{A:()=>R});var e=o(47577);const k={class:"memos"},D={class:"title"},L={key:0,class:"separator"},h={class:"list"};function C(W,P,V,Y,N,X){const G=(0,e.g2)("memo-comp");return(0,e.uX)(),(0,e.CE)("div",k,[(0,e.Lk)("div",D,(0,e.v_)(W.subject),1),P[0]||(P[0]=(0,e.eW)()),W.useSeparator?((0,e.uX)(),(0,e.CE)("div",L)):(0,e.Q3)("v-if",!0),P[1]||(P[1]=(0,e.eW)()),(0,e.Lk)("div",h,[W.memoItems.length>0?((0,e.uX)(!0),(0,e.CE)(e.FK,{key:0},(0,e.pI)(W.memoItems,(z,J)=>((0,e.uX)(),(0,e.Wv)(G,{key:J,"memo-type":W.memoType,"memo-text":z,"use-sub-text":W.useSubText,"icon-size":W.iconSize,"use-delete-btn":"",onDelete:se=>W.onDeleteMemo(z,J),onSelect:se=>W.onSelectMemo(z,J)},null,8,["memo-type","memo-text","use-sub-text","icon-size","onDelete","onSelect"]))),128)):(0,e.Q3)("v-if",!0)])])}var c=o(78496);const I=(0,e.pM)({components:{MemoComp:c.A},props:{subject:{type:String,required:!0},memoType:{type:String,required:!1,default:"normal"},memoItems:{type:Array,required:!0},useSubText:{type:Boolean,required:!1,default:!1},useSeparator:{type:Boolean,required:!1,default:!0},iconSize:{type:Number,required:!1,default:16}},emits:["delete","select"],setup(W,{emit:P}){return{i18n:(0,e.WQ)("i18n",{}),onSelectMemo:(X,G)=>{P("select",X,G)},onDeleteMemo:(X,G)=>{P("delete",X,G)},...(0,e.QW)(W)}}});var T=o(35339);const R=(0,T.A)(I,[["render",C],["__scopeId","data-v-38678256"]])},10401:(M,v,o)=>{o.d(v,{A:()=>k});var e=o(90428);const k={name:"Radio",mixins:[e.A],props:{normal:Boolean,large:Boolean},computed:{size(){return this.large?"large":"normal"}}}},15114:(M,v,o)=>{o.d(v,{A:()=>h});var e=o(30556),k=o(64173),D=o(35339);const h=(0,D.A)(k.A,[["render",e.X],["__scopeId","data-v-6fb6a6c3"]])},18697:(M,v,o)=>{o.d(v,{A:()=>C});var e=o(43866),k=o(67281),D=o(59775),L=o(74986),h=o(48414);const C={inject:{i18n:{default:{targetConfig:"Select targets",cancel:"Cancel",submit:"Finish",autoRefresh:"Auto Refresh"}}},components:{ResourceSelector:e.A,Window:k.A,FadeDown:D.A,Icon:L.A},directives:{clickOutside:h.A},props:{checkedCache:{type:Boolean,default:!1},resources:{type:Array,required:!0},popupPositionLeft:{type:Boolean,default:!1},distTop:{type:Number,default:0},defaultSelectedResourceIndex:{type:Number,default:0,validator(c){return c>=0||c<this.resources.length}},useButtonIcon:{type:Boolean,required:!1,default:!0}},data(){return{open:!1,openX:0,openY:0,currentTab:this.resources[this.defaultSelectedResourceIndex].resourceType,selectedResourceType:this.resources[this.defaultSelectedResourceIndex].resourceType,currentResources:[],selectedResources:[],manualCheckedResources:[]}},computed:{prettyWidth(){return this.resources.length===2?354:380},messagesForWindow(){return{apply:this.i18n.submit,cancel:this.i18n.cancel}},selectedResourceText(){return(0,e.Z)(this.selectedResourceType)},checkedResources(){return this.selectedResources.find(c=>c.resourceType===this.selectedResourceType).tree.filter(c=>c.check==="on")}},watch:{resources:{handler(c){this.currentTab=c[this.defaultSelectedResourceIndex].resourceType,this.selectedResourceType=c[this.defaultSelectedResourceIndex].resourceType,this.manualCheckedResources.length>0&&this.checkedCache&&c.forEach(I=>{I.tree=I.tree?.map(T=>{const{sid:m,oid:R}=T.data;return T.check=this.manualCheckedResources.findIndex(W=>W.data.sid===m&&W.data.oid===R)>-1?"on":"off",T})}),this.currentResources=Array.from(c),this.selectedResources=Array.from(c),this.submitHandler()},deep:!1}},mounted(){this.updateButtonXY()},methods:{updateButtonXY(){const{top:c,height:I,left:T,width:m}=this.$refs["popup-button"].getBoundingClientRect();this.openY=c+I+8+this.distTop,this.popupPositionLeft?this.openX=T:this.openX=T-this.prettyWidth+m},buttonClickHandler(){this.open||this.updateButtonXY(),this.open=!this.open,this.$emit("buttonClick",this.open)},cancelHandler(){this.open=!1,setTimeout(()=>{this.currentTab=this.selectedResourceType,this.currentResources=Array.from(this.selectedResources)},150)},submitNManualChecked(){this.submitHandler(),this.checkedCache&&(this.manualCheckedResources=this.checkedResources)},submitHandler(){this.open=!1,this.selectedResourceType=this.currentTab,this.selectedResources=Array.from(this.currentResources),this.$emit("submit",{resourceType:this.selectedResourceType,tree:this.checkedResources})},tabChangeHandler(c){this.currentTab=c,this.resourceChangeHandler({resourceType:c,tree:this.currentResources.find(({resourceType:I})=>I===c).tree})},resourceChangeHandler({resourceType:c,tree:I}){this.currentTab=c;const T=this.currentResources.findIndex(m=>m.resourceType===c);this.currentResources[T]={...this.currentResources[T],tree:I}},onClickOutside(){this.open&&(this.open=!1)},clearManualCheckedResources(){this.manualCheckedResources=[]}}}},30556:(M,v,o)=>{o.d(v,{X:()=>e.X});var e=o(3280)},30780:(M,v,o)=>{o.r(v),o.d(v,{default:()=>Ys});var e=o(47577),k=o(20251);const D={class:"app"},L={class:"row"},h={class:"left"},C={class:"right"},c={class:"message"},I={class:"input-wrapper"},T={class:"subject"},m={class:"main"},R={class:"input-wrapper"},W={class:"subject"},P={class:"main"},V={class:"input-wrapper"},Y={class:"subject"},N={class:"main"},X={class:"row"},G={class:"left"},z={class:"right"},J={class:"toggle-switch-wrapper"},se={class:"dropdown-wrapper"},me={class:"subject"},ve={class:"main"},ce={class:"dropdown-wrapper"},ge={class:"subject"},Ae={class:"main"},ye={class:"dropdown-wrapper"},Te={class:"subject"},Le={class:"main"},fe={class:"btn-wrapper"},Se={class:"row"},be={class:"left"},Ee={class:"right"},ke={class:"dropdown-wrapper"},Ce={class:"subject"},Re={class:"main"},he={class:"dropdown-wrapper"},We={class:"subject"},De={class:"main"},Oe={class:"row"},we={class:"left"},Ie={class:"right"},Fe={class:"footer"},Me=["name"],xe=["src"],Be=["src"],Pe={class:"file-upload-btn"};function Ne(s,t,l,d,n,r){const p=(0,e.g2)("checkbox"),i=(0,e.g2)("format-number-input"),S=(0,e.g2)("toggle-switch"),g=(0,e.g2)("dropdown"),A=(0,e.g2)("btn"),y=(0,e.g2)("setting-table"),j=(0,e.g2)("window"),B=(0,e.g2)("alert-window");return(0,e.uX)(),(0,e.CE)("div",D,[(0,e.Lk)("div",L,[(0,e.Lk)("div",h,(0,e.v_)(n.i18nMessages.alarmEventSetting),1),t[24]||(t[24]=(0,e.eW)()),(0,e.Lk)("div",C,[(0,e.Lk)("div",c,(0,e.v_)(n.i18nMessages.alarmEventStatus),1),t[21]||(t[21]=(0,e.eW)()),(0,e.Lk)("div",I,[(0,e.Lk)("div",T,[(0,e.bF)(p,{label:n.i18nMessages.normal,active:n.normalStatus.active,"onUpdate:active":t[0]||(t[0]=_=>n.normalStatus.active=_)},null,8,["label","active"])]),t[16]||(t[16]=(0,e.eW)()),(0,e.Lk)("div",m,[(0,e.bF)(i,{normal:"",width:89,min:0,max:300,value:n.normalStatus.delay,"onUpdate:value":t[1]||(t[1]=_=>n.normalStatus.delay=_)},null,8,["value"]),t[15]||(t[15]=(0,e.eW)()),(0,e.Lk)("span",null,(0,e.v_)(n.i18nMessages.sec),1)])]),t[22]||(t[22]=(0,e.eW)()),(0,e.Lk)("div",R,[(0,e.Lk)("div",W,[(0,e.bF)(p,{label:n.i18nMessages.warning,active:n.warningStatus.active,"onUpdate:active":t[2]||(t[2]=_=>n.warningStatus.active=_)},null,8,["label","active"])]),t[18]||(t[18]=(0,e.eW)()),(0,e.Lk)("div",P,[(0,e.bF)(i,{normal:"",width:89,min:0,max:300,value:n.warningStatus.delay,"onUpdate:value":t[3]||(t[3]=_=>n.warningStatus.delay=_)},null,8,["value"]),t[17]||(t[17]=(0,e.eW)()),(0,e.Lk)("span",null,(0,e.v_)(n.i18nMessages.sec),1)])]),t[23]||(t[23]=(0,e.eW)()),(0,e.Lk)("div",V,[(0,e.Lk)("div",Y,[(0,e.bF)(p,{label:n.i18nMessages.fatal,active:n.fatalStatus.active,"onUpdate:active":t[4]||(t[4]=_=>n.fatalStatus.active=_)},null,8,["label","active"])]),t[20]||(t[20]=(0,e.eW)()),(0,e.Lk)("div",N,[(0,e.bF)(i,{normal:"",width:89,min:0,max:300,value:n.fatalStatus.delay,"onUpdate:value":t[5]||(t[5]=_=>n.fatalStatus.delay=_)},null,8,["value"]),t[19]||(t[19]=(0,e.eW)()),(0,e.Lk)("span",null,(0,e.v_)(n.i18nMessages.sec),1)])])])]),t[47]||(t[47]=(0,e.eW)()),(0,e.Lk)("div",X,[(0,e.Lk)("div",G,(0,e.v_)(n.i18nMessages.alarmSound),1),t[36]||(t[36]=(0,e.eW)()),(0,e.Lk)("div",z,[(0,e.Lk)("div",J,[(0,e.bF)(S,{normal:"",active:n.activeAlarmSound,"onUpdate:active":t[6]||(t[6]=_=>n.activeAlarmSound=_)},null,8,["active"])]),t[31]||(t[31]=(0,e.eW)()),(0,e.Lk)("div",se,[(0,e.Lk)("div",me,(0,e.v_)(n.i18nMessages.normal),1),t[26]||(t[26]=(0,e.eW)()),(0,e.Lk)("div",ve,[(0,e.bF)(g,{normal:"",width:438,items:n.soundItems,"selected-value":`${n.normalStatus.sound}`,onOnchange:r.onChangeNormalSound},null,8,["items","selected-value","onOnchange"]),t[25]||(t[25]=(0,e.eW)()),(0,e.bF)(A,{normal:"",items:[{iconType:n.iconTypes.soundOn}],onClick:t[7]||(t[7]=_=>r.onPlaySoundItem("normalStatus"))},null,8,["items"])])]),t[32]||(t[32]=(0,e.eW)()),(0,e.Lk)("div",ce,[(0,e.Lk)("div",ge,(0,e.v_)(n.i18nMessages.warning),1),t[28]||(t[28]=(0,e.eW)()),(0,e.Lk)("div",Ae,[(0,e.bF)(g,{normal:"",width:438,items:n.soundItems,"selected-value":`${n.warningStatus.sound}`,onOnchange:r.onChangeWarningSound},null,8,["items","selected-value","onOnchange"]),t[27]||(t[27]=(0,e.eW)()),(0,e.bF)(A,{normal:"",items:[{iconType:n.iconTypes.soundOn}],onClick:t[8]||(t[8]=_=>r.onPlaySoundItem("warningStatus"))},null,8,["items"])])]),t[33]||(t[33]=(0,e.eW)()),(0,e.Lk)("div",ye,[(0,e.Lk)("div",Te,(0,e.v_)(n.i18nMessages.fatal),1),t[30]||(t[30]=(0,e.eW)()),(0,e.Lk)("div",Le,[(0,e.bF)(g,{normal:"",width:438,items:n.soundItems,"selected-value":`${n.fatalStatus.sound}`,onOnchange:r.onChangeFatalSound},null,8,["items","selected-value","onOnchange"]),t[29]||(t[29]=(0,e.eW)()),(0,e.bF)(A,{normal:"",items:[{iconType:n.iconTypes.soundOn}],onClick:t[9]||(t[9]=_=>r.onPlaySoundItem("fatalStatus"))},null,8,["items"])])]),t[34]||(t[34]=(0,e.eW)()),(0,e.Lk)("div",fe,[(0,e.bF)(A,{normal:"",items:[{text:n.i18nMessages.registerCustomSound}],onClick:r.onClickRegisterCustomSoundBtn},null,8,["items","onClick"])]),t[35]||(t[35]=(0,e.eW)()),(0,e.bF)(p,{label:n.i18nMessages.soundLoop,active:n.soundLoop,"onUpdate:active":t[10]||(t[10]=_=>n.soundLoop=_)},null,8,["label","active"])])]),t[48]||(t[48]=(0,e.eW)()),(0,e.Lk)("div",Se,[(0,e.Lk)("div",be,(0,e.v_)(n.i18nMessages.alarmSaveStatus),1),t[40]||(t[40]=(0,e.eW)()),(0,e.Lk)("div",Ee,[(0,e.Lk)("div",ke,[(0,e.Lk)("div",Ce,(0,e.v_)(n.i18nMessages.alarmMaxAge),1),t[37]||(t[37]=(0,e.eW)()),(0,e.Lk)("div",Re,[(0,e.bF)(g,{normal:"",width:90,items:n.ageItems,"selected-value":n.maxAge,onOnchange:r.onChangeMaxAge},null,8,["items","selected-value","onOnchange"])])]),t[39]||(t[39]=(0,e.eW)()),(0,e.Lk)("div",he,[(0,e.Lk)("div",We,(0,e.v_)(n.i18nMessages.alarmMaxCount),1),t[38]||(t[38]=(0,e.eW)()),(0,e.Lk)("div",De,[(0,e.bF)(g,{normal:"",width:90,items:n.countItems,"selected-value":n.maxCount,onOnchange:r.onChangeMaxCount},null,8,["items","selected-value","onOnchange"])])])])]),t[49]||(t[49]=(0,e.eW)()),(0,e.Lk)("div",Oe,[(0,e.Lk)("div",we,(0,e.v_)(n.i18nMessages.pushAlarm),1),t[41]||(t[41]=(0,e.eW)()),(0,e.Lk)("div",Ie,[(0,e.bF)(S,{normal:"",active:n.activePushAlarm,"onUpdate:active":t[11]||(t[11]=_=>n.activePushAlarm=_)},null,8,["active"])])]),t[50]||(t[50]=(0,e.eW)()),(0,e.Lk)("div",Fe,[(0,e.bF)(A,{class:"primary",normal:"",loading:n.saveLoading,items:[{text:n.i18nMessages.saveChanges}],onClick:r.onClickSaveBtn},null,8,["loading","items","onClick"])]),t[51]||(t[51]=(0,e.eW)()),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(n.soundItems,_=>((0,e.uX)(),(0,e.CE)("audio",{name:`sound_${_.value}`,key:_.value},[_.value>0&&_.value<4?((0,e.uX)(),(0,e.CE)("source",{key:0,src:`/sound/${_.text}`,type:"audio/mpeg"},null,8,xe)):((0,e.uX)(),(0,e.CE)("source",{key:1,src:`/static/sound/read?name=${_.text}`,type:"audio/mpeg"},null,8,Be))],8,Me))),128)),t[52]||(t[52]=(0,e.eW)()),n.registerSoundWindowActive?((0,e.uX)(),(0,e.Wv)(j,{key:0,"hide-cancel-btn":!0,"hide-footer":!0,"open-w":484,"open-h":300,"open-x":r.windowX,"open-y":r.windowY,onCancel:t[13]||(t[13]=()=>n.registerSoundWindowActive=!1)},{subject:(0,e.k6)(()=>[(0,e.eW)((0,e.v_)(n.i18nMessages.registerCustomSound),1)]),default:(0,e.k6)(()=>[t[45]||(t[45]=(0,e.eW)()),(0,e.Lk)("div",Pe,[(0,e.bF)(A,{small:"",items:[{text:n.i18nMessages.fileUpload}]},null,8,["items"]),t[42]||(t[42]=(0,e.eW)()),(0,e.Lk)("input",{name:"mng_file",type:"file",class:"file-input",onChange:t[12]||(t[12]=(..._)=>r.onChangeFileEvent&&r.onChangeFileEvent(..._))},null,32)]),t[46]||(t[46]=(0,e.eW)()),(0,e.bF)(y,{draggable:!1,"min-width":400,checkable:!1,columns:n.registerSoundColumns,rows:n.registerSoundItems},{row:(0,e.k6)(({data:_,index:b})=>[(0,e.Lk)("td",null,(0,e.v_)(_.name),1),t[43]||(t[43]=(0,e.eW)()),(0,e.Lk)("td",null,(0,e.v_)(Math.floor(_.size/1024)),1),t[44]||(t[44]=(0,e.eW)()),(0,e.Lk)("td",null,[(0,e.bF)(A,{small:"",class:"border-none",items:[{iconType:n.iconTypes.trashcan}],onClick:w=>r.onRemoveRegisterCustomSoundBtn(_.key)},null,8,["items","onClick"])])]),_:1},8,["columns","rows"])]),_:1,__:[45,46]},8,["open-x","open-y"])):(0,e.Q3)("v-if",!0),t[53]||(t[53]=(0,e.eW)()),n.alertMessage!==""?((0,e.uX)(),(0,e.Wv)(B,{key:1,message:n.alertMessage,onCancel:t[14]||(t[14]=()=>n.alertMessage="")},null,8,["message"])):(0,e.Q3)("v-if",!0)])}var Z=o(35375),ee=o(80805),q=o(88994),Ge=o(97953),ne=o(65267),je=o(67281),Xe=o(90194),Ue=o(40317),oe=o(79526),Ke=o(84982),x=o(21005),U=o(6373);const He=async(s,t)=>await x.A.post("/user/modify/push",(0,U.$W)({browser:!1,desktop:s,sound:t})),Ve=async(s,t,l,d,n,r)=>await x.A.post("/eventRule/notify/options/save",(0,U.$W)({normalStatus:s.active,normalTimeout:s.delay*1e3,normalSound:s.sound,warningStatus:t.active,warningTimeout:t.delay*1e3,warningSound:t.sound,fatalStatus:l.active,fatalTimeout:l.delay*1e3,fatalSound:l.sound,soundLoop:d,maxAge:n,maxCount:r})),Ye=async()=>await x.A.get("/eventRule/notify/options/get",{params:{format:"json"}}),le=async()=>await x.A.get("/eventRule/notify/sound/list/all"),ie=async()=>await x.A.get("/eventRule/notify/sound/list"),Qe=async s=>await x.A.get("/eventRule/notify/sound/remove",{params:{key:s}});var F=o(87310);const ze={components:{Btn:Z.A,ToggleSwitch:ee.A,Checkbox:q.A,FormatNumberInput:Ge.A,Dropdown:ne.A,Window:je.A,AlertWindow:Xe.A,SettingTable:Ue.A},computed:{windowX(){return window.innerWidth/2-242},windowY(){return window.innerHeight/2-150}},data(){return{saveLoading:!1,activePushAlarm:!1,activeAlarmSound:!1,normalStatus:{active:!0,delay:3,sound:1},warningStatus:{active:!0,delay:5,sound:2},fatalStatus:{active:!0,delay:8,sound:3},soundLoop:!1,maxAge:10,maxCount:20,ageItems:Array.from({length:7},(s,t)=>{const l=t+1;return{text:`${l}`,value:l}}),countItems:Array.from({length:10},(s,t)=>{const l=(t+1)*10;return{text:`${l}`,value:l}}),soundItems:[],registerSoundItems:[],registerSoundWindowActive:!1,registerSoundColumns:[{field:"name",label:F.A.fileName,width:"60%"},{field:"size",label:F.A.size+` (${F.A.kb})`},{field:"key",label:F.A.delete}],iconTypes:{soundOn:oe.B2.soundOn,trashcan:oe.B2.trashcan},alertMessage:"",i18nMessages:F.A}},methods:{async onClickSaveBtn(){this.saveLoading=!0,await He(this.activePushAlarm,this.activeAlarmSound),await Ve(this.normalStatus,this.warningStatus,this.fatalStatus,this.soundLoop,this.maxAge,this.maxCount),location.reload()},async createUserInfo(){const{data:s}=await(0,Ke.ql)();this.activePushAlarm=s.desktopPush,this.activeAlarmSound=s.soundPush},async createAlarmOptions(){const{data:s}=await Ye();this.normalStatus={active:s.normalStatus,delay:s.normalTimeout/1e3,sound:s.normalSound},this.warningStatus={active:s.warningStatus,delay:s.warningTimeout/1e3,sound:s.warningSound},this.fatalStatus={active:s.fatalStatus,delay:s.fatalTimeout/1e3,sound:s.fatalSound},this.soundLoop=s.soundLoop,this.maxAge=s.maxAge,this.maxCount=s.maxCount,le().then(t=>{this.soundItems=t.data.map(l=>({text:l.name,value:`${l.key}`}))})},onChangeNormalSound({value:s}){this.normalStatus.sound=s},onChangeWarningSound({value:s}){this.warningStatus.sound=s},onChangeFatalSound({value:s}){this.fatalStatus.sound=s},onChangeMaxAge({value:s}){this.maxAge=s},onChangeMaxCount({value:s}){this.maxCount=s},onPlaySoundItem(s){const t=`[name=sound_${this[s].sound}]`;document.querySelector(t).play()},reloadSoundFiles(){ie().then(s=>{this.registerSoundItems=s.data}),le().then(s=>{this.soundItems=s.data.map(t=>({text:t.name,value:`${t.key}`}))})},async onRemoveRegisterCustomSoundBtn(s){await Qe(s),this.reloadSoundFiles()},async onClickRegisterCustomSoundBtn(){const{data:s}=await ie();this.registerSoundItems=s,this.registerSoundWindowActive=!0},onChangeFileEvent(s){const t=s.target.files[0];if(t){if(t.name.toLowerCase().indexOf(".mp3")==-1||t.size>1024*200){this.alertMessage=F.A.M0482;return}this.sendSelectedFileXhr2(t)}},sendSelectedFileXhr2(s){const t=this,l=new FormData,d=new XMLHttpRequest;l.append("mng_file",s),d.open("POST","/eventRule/notify/sound/upload",!0),d.onload=function(n){const r=n.target.responseText.trim();s.name===r?t.reloadSoundFiles():this.alertMessage=F.A.M0079},d.send(l)}},async created(){await this.createUserInfo(),await this.createAlarmOptions()}};var K=o(35339);const Je=(0,K.A)(ze,[["render",Ne],["__scopeId","data-v-35001ae7"]]);var Q=o(1401),H=o(27664);const Ze=[{text:F.A.everyday,value:0},{text:F.A.weekday,value:1},{text:F.A.custom,value:2}];function ue(s,t){return{key:s.key,type:s.iconType==="mail"?2:1,isActive:s.active,domains:s.targets.map(l=>l.domainId),senderName:t?t.senderName:"",receivers:t?t.receivers:[],subjectFormat:t?t.subjectFormat:"",contentsFormat:t?t.contentsFormat:"",contentsType:t?t.contentsType:""}}function qe(){return Array(7).fill(null).map((s,t)=>({active:!0,name:F.A.weekdays[t],hours:[0,23]}))}var $e=o(86617),re=o(10991),_e=o(97116);const E={CHANGE_SCREEN_MODE:"changeScreenMode",UPDATE_GLOBAL_ACTIVITY_SETTING:"updateGlobalActivitySetting",UPDATE_GLOBAL_OFF_RESERVATION:"updateGlobalOffReservation",UPDATE_GLOBAL_ALLOW_TIMES:"updateGlobalAllowTimes",CHANGE_GLOBAL_ALLOW_TIME:"changeGlobalAllowTime",CHANGE_GLOBAL_ALLOW_TYPE:"changeGlobalAllowType",UPDATE_ADAPTER_SETTING:"updateAdapterSetting",UPDATE_ADAPTER_SETTINGS:"updateAdapterSettings"},f={LOAD_GLOBAL_ACTIVITY_SETTING:"loadGlobalActivitySetting",SAVE_GLOBAL_ACTIVITY_SETTING:"saveGlobalActivitySetting",LOAD_GLOBAL_OFF_RESERVATION:"loadGlobalOffReservation",SAVE_GLOBAL_OFF_RESERVATION:"saveGlobalOffReservation",LOAD_GLOBAL_ALLOW_TIMES:"loadGlobalAllowTimes",SYNC_GLOBAL_ALLOW_TIMES:"syncGlobalAllowTimes",LOAD_ADAPTER_SETTINGS:"loadAdapterSettings",LOAD_SMTP_SETTINGS:"loadSmtpSettings",SAVE_ADAPTER_AND_SMTP_SETTING:"saveAdapterAndSmtSetting"},et={namespaced:!0,state:()=>({module:"anomalyInRule",screenMode:"list",adapterSettings:[],adapterSetting:{active:!1,name:"",key:"",iconType:"none",targets:[]},globalActivitySetting:{all:!1,normal:!1,warning:!1,fatal:!1},globalOffReservation:{start:(0,re.VP)((0,H.qm)(),"day"),end:(0,re.VP)((0,H.qm)(),"day")},globalAllowTimes:{type:"everyday",weekdays:qe()}}),mutations:{[E.CHANGE_SCREEN_MODE](s,t){s.screenMode=t},[E.UPDATE_GLOBAL_ACTIVITY_SETTING](s,t){s.globalActivitySetting=t},[E.UPDATE_GLOBAL_OFF_RESERVATION](s,t){s.globalOffReservation=t},[E.UPDATE_GLOBAL_ALLOW_TIMES](s,t){const l=JSON.parse(t.customJson);s.globalAllowTimes={type:t.allowType,weekdays:l.map((d,n)=>({active:d.active,name:F.A.weekdays[n],hours:[d.startHour,d.endHour]}))}},[E.CHANGE_GLOBAL_ALLOW_TIME](s,t){s.globalAllowTimes.weekdays[t.index]=t.weekday},[E.CHANGE_GLOBAL_ALLOW_TYPE](s,t){s.globalAllowTimes.type=t},[E.UPDATE_ADAPTER_SETTING](s,t){s.adapterSetting=t},[E.UPDATE_ADAPTER_SETTINGS](s,t){s.adapterSettings=t}},actions:{async[f.LOAD_GLOBAL_ACTIVITY_SETTING]({commit:s}){const{data:t}=await x.A.get("/event/external/push/info/get");s(E.UPDATE_GLOBAL_ACTIVITY_SETTING,t)},async[f.SAVE_GLOBAL_ACTIVITY_SETTING]({commit:s},t){const{data:l}=await x.A.post("/event/external/push/info/set",(0,U.$W)(t));l&&s(E.UPDATE_GLOBAL_ACTIVITY_SETTING,t)},async[f.LOAD_GLOBAL_OFF_RESERVATION]({commit:s}){const{data:t}=await x.A.get("/event/external/push/ignore/get/onetime");s(E.UPDATE_GLOBAL_OFF_RESERVATION,{start:(0,H.qm)(t.startTime),end:(0,H.qm)(t.endTime)})},async[f.SAVE_GLOBAL_OFF_RESERVATION]({commit:s},t){const{data:l}=await x.A.post("/event/external/push/ignore/set/onetime",(0,U.$W)({startTime:t.start.valueOf(),endTime:t.end.valueOf()}));l&&s(E.UPDATE_GLOBAL_OFF_RESERVATION,t)},async[f.LOAD_GLOBAL_ALLOW_TIMES]({commit:s}){const{data:t}=await x.A.get("/event/external/push/allow/get");s(E.UPDATE_GLOBAL_ALLOW_TIMES,t)},async[f.SYNC_GLOBAL_ALLOW_TIMES]({state:s}){await x.A.post("/event/external/push/allow/set",(0,U.$W)({allowType:s.globalAllowTimes.type,customJson:JSON.stringify(s.globalAllowTimes.weekdays.map(t=>({active:t.active,startHour:t.hours[0],endHour:t.hours[1]})))}))},async[f.LOAD_ADAPTER_SETTINGS]({commit:s}){const{data:t}=await x.A.get("/event/external/push/list");s(E.UPDATE_ADAPTER_SETTINGS,t.map(l=>{let d="none";if(l.type===$e.Nn.SMTP)d="mail";else{const n=["jira","slack","telegram"],r=n.findIndex(p=>p===l.key);r!==-1&&(d=n[r])}return{active:l.isActive,name:l.name,key:l.key,iconType:d,targets:l.accessibleDomainNames.map((n,r)=>({domainName:n,domainId:l.accessibleDomainIds[r]}))}}))},async[f.LOAD_SMTP_SETTINGS]({state:s,commit:t}){for(let l=0;l<s.adapterSettings.length;l++){const d=s.adapterSettings[l];if(d.iconType==="mail"){const{data:n}=await x.A.get(`/event/external/push/smtp/get?key=${d.key}`);s.adapterSettings[l].smtpSetting={...n,receivers:n.receivers||[],senderName:n.senderName||""},t(E.UPDATE_ADAPTER_SETTINGS,[...s.adapterSettings])}}},async[f.SAVE_ADAPTER_AND_SMTP_SETTING]({commit:s,dispatch:t},l){const{data:d}=await x.A.post("/event/external/push/smtp/set",(0,U.$W)(l));d&&(await t(f.LOAD_ADAPTER_SETTINGS),await t(f.LOAD_SMTP_SETTINGS),s(E.CHANGE_SCREEN_MODE,"list"))}}};_e.A.hasModule("externalNotification")||_e.A.registerModule("externalNotification",et);const zs=null;var de=o(74399);const te=(0,e.pM)({__name:"LocaleTimeDropdown",props:{small:{type:Boolean,default:!1},normal:{type:Boolean,default:!0},large:{type:Boolean,default:!0},width:{default:120},disabled:{type:Boolean,default:!1},isEndHour:{type:Boolean,default:!1},hour:{}},emits:["change"],setup(s,{emit:t}){const l=t,d=s,n=(0,e.EW)(()=>d.hour),r=Array(24).fill(0).map((i,S)=>{const g=new Date,A=d.isEndHour?59:0;g.setHours(S,A,A,A);let y="en-US";return H.gi.language==="ko"?y="ko-KR":H.gi.language==="ja"&&(y="ja-JP"),{text:g.toLocaleTimeString(y,{timeStyle:"short"}),value:g.getHours()}}),p=i=>{l("change",i.value)};return(i,S)=>((0,e.uX)(),(0,e.Wv)(ne.A,{disabled:d.disabled,small:d.small,normal:d.normal,large:d.large,width:d.width,items:(0,e.R1)(r),"selected-value":n.value,onOnchange:p},null,8,["disabled","small","normal","large","width","items","selected-value"]))}}),tt={class:"subject icon-group"},st={class:"tools"},nt={key:0,class:"bottom"},ot={class:"subject"},at={class:"targets"},lt={class:"target"},it=(0,e.pM)({__name:"AdapterSetting",props:{setting:{}},emits:["select","active"],setup(s,{emit:t}){const l=(0,e.WQ)("i18n",{}),d=t,n=(0,e.KR)(s.setting.active),r=p=>{const{className:i}=p.target;i!=="button"&&!i.includes("aries-switch")?d("select",s.setting):d("active",n.value,s.setting)};return(p,i)=>((0,e.uX)(),(0,e.CE)("div",{class:"adapter-setting",onClick:r},[(0,e.Lk)("div",{class:"top",style:(0,e.Tr)({paddingBottom:`${p.setting.targets.length>0?20:0}px`})},[(0,e.Lk)("div",tt,[(0,e.Lk)("div",{class:(0,e.C4)(["icon",p.setting.iconType])},null,2),i[1]||(i[1]=(0,e.eW)()),(0,e.Lk)("span",null,(0,e.v_)(p.setting.name),1)]),i[2]||(i[2]=(0,e.eW)()),(0,e.Lk)("div",st,[(0,e.bF)(ee.A,{normal:"",active:n.value,"onUpdate:active":i[0]||(i[0]=S=>n.value=S)},null,8,["active"])])],4),i[4]||(i[4]=(0,e.eW)()),p.setting.targets.length>0?((0,e.uX)(),(0,e.CE)("div",nt,[(0,e.Lk)("div",ot,(0,e.v_)((0,e.R1)(l).domain),1),i[3]||(i[3]=(0,e.eW)()),(0,e.Lk)("div",at,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(p.setting.targets,S=>((0,e.uX)(),(0,e.CE)("div",lt,(0,e.v_)(S.domainName??`SID(${S.domainId})`),1))),256))])])):(0,e.Q3)("v-if",!0)]))}}),ut=(0,K.A)(it,[["__scopeId","data-v-379c68da"]]),rt={class:"time-range-by-week-day"},_t={class:"weekday"},dt={class:"name"},pt={class:"hours"},mt=(0,e.pM)({__name:"TimeRangeByWeekDay",setup(s){const t=(0,e.WQ)("i18n",{}),{state:l,commit:d,dispatch:n}=(0,Q.P)("externalNotification"),r=(0,e.EW)(()=>l.globalAllowTimes.weekdays),p=(g,A)=>{const y=r.value[g];d(E.CHANGE_GLOBAL_ALLOW_TIME,{index:g,weekday:{...y,active:A}}),n(f.SYNC_GLOBAL_ALLOW_TIMES)},i=(g,A)=>{const y=r.value[g];d(E.CHANGE_GLOBAL_ALLOW_TIME,{index:g,weekday:{...y,hours:[A,y.hours[1]]}}),n(f.SYNC_GLOBAL_ALLOW_TIMES)},S=(g,A)=>{const y=r.value[g];d(E.CHANGE_GLOBAL_ALLOW_TIME,{index:g,weekday:{...y,hours:[y.hours[0],A]}}),n(f.SYNC_GLOBAL_ALLOW_TIMES)};return(g,A)=>((0,e.uX)(),(0,e.CE)("div",rt,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(r.value,(y,j)=>((0,e.uX)(),(0,e.CE)("div",_t,[(0,e.Lk)("div",dt,[(0,e.bF)(q.A,{normal:"",label:y.name,active:y.active,onChange:B=>p(j,B)},null,8,["label","active","onChange"])]),A[2]||(A[2]=(0,e.eW)()),(0,e.Lk)("div",pt,[(0,e.bF)(te,{disabled:!y.active,hour:y.hours[0],onChange:B=>i(j,B)},null,8,["disabled","hour","onChange"]),A[0]||(A[0]=(0,e.eW)()),(0,e.Lk)("span",{class:(0,e.C4)([y.active?"":"disabled"])},"~",2),A[1]||(A[1]=(0,e.eW)()),(0,e.bF)(te,{disabled:!y.active,hour:y.hours[1],"is-end-hour":"",onChange:B=>S(j,B)},null,8,["disabled","hour","onChange"])])]))),256))]))}}),vt=(0,K.A)(mt,[["__scopeId","data-v-3496a660"]]),ct={class:"app"},gt={class:"row"},At={class:"left"},yt={class:"right"},Tt={class:"toggle-switch-wrapper"},Lt={class:"row"},ft={class:"left"},St={class:"right"},bt={class:"input-wrapper"},Et={class:"input-wrapper"},kt={class:"input-wrapper"},Ct={class:"row"},Rt={class:"left"},ht={class:"right"},Wt={class:"message"},Dt={class:"dropdown-wrapper"},Ot={class:"main"},wt={class:"row"},It={class:"left"},Ft={class:"right"},Mt={class:"message"},xt={class:"row"},Bt={class:"left"},Pt={class:"right"},Nt=(0,e.pM)({__name:"App",setup(s){const t=["everyday","weekday","custom"],l=(0,e.WQ)("i18n",{}),{state:d,commit:n,dispatch:r}=(0,Q.P)("externalNotification"),p=(0,e.EW)(()=>d.globalActivitySetting),i=(0,e.EW)(()=>d.globalOffReservation),S=(0,e.EW)(()=>d.adapterSettings),g=(0,e.EW)(()=>t.findIndex(a=>a===d.globalAllowTimes.type)),A=a=>{n(E.CHANGE_GLOBAL_ALLOW_TYPE,t[a.value]),r(f.SYNC_GLOBAL_ALLOW_TIMES)},y=a=>{r(f.SAVE_GLOBAL_OFF_RESERVATION,{start:a,end:i.value.end})},j=a=>{const u=(0,H.qm)(i.value.start.valueOf()).set("hour",a);y(u)},B=a=>{r(f.SAVE_GLOBAL_OFF_RESERVATION,{start:i.value.start,end:a})},_=a=>{const u=(0,H.qm)(i.value.end.valueOf()).set("hour",a);B(u)},b=a=>{r(f.SAVE_GLOBAL_ACTIVITY_SETTING,a)},w=a=>{n(E.UPDATE_ADAPTER_SETTING,S.value.find(u=>u.key===a.key)),n(E.CHANGE_SCREEN_MODE,"modify")},O=(a,u)=>{r(f.SAVE_ADAPTER_AND_SMTP_SETTING,ue({...u,active:a},u.smtpSetting))};return(0,e.KC)(async()=>{await r(f.LOAD_GLOBAL_ACTIVITY_SETTING),await r(f.LOAD_GLOBAL_OFF_RESERVATION),await r(f.LOAD_GLOBAL_ALLOW_TIMES),await r(f.LOAD_ADAPTER_SETTINGS),await r(f.LOAD_SMTP_SETTINGS)}),(a,u)=>((0,e.uX)(),(0,e.CE)("div",ct,[(0,e.Lk)("div",gt,[(0,e.Lk)("div",At,(0,e.v_)((0,e.R1)(l).externalTitle),1),u[4]||(u[4]=(0,e.eW)()),(0,e.Lk)("div",yt,[(0,e.Lk)("div",Tt,[(0,e.bF)(ee.A,{normal:"",active:p.value.all,onChange:u[0]||(u[0]=$=>b({...p.value,all:!p.value.all}))},null,8,["active"])])])]),u[17]||(u[17]=(0,e.eW)()),(0,e.Lk)("div",Lt,[(0,e.Lk)("div",ft,(0,e.v_)((0,e.R1)(l).eventLevel),1),u[7]||(u[7]=(0,e.eW)()),(0,e.Lk)("div",St,[(0,e.Lk)("div",bt,[(0,e.bF)(q.A,{label:(0,e.R1)(l).normal,active:p.value.normal,onChange:u[1]||(u[1]=$=>b({...p.value,normal:!p.value.normal}))},null,8,["label","active"])]),u[5]||(u[5]=(0,e.eW)()),(0,e.Lk)("div",Et,[(0,e.bF)(q.A,{label:(0,e.R1)(l).warning,active:p.value.warning,onChange:u[2]||(u[2]=$=>b({...p.value,warning:!p.value.warning}))},null,8,["label","active"])]),u[6]||(u[6]=(0,e.eW)()),(0,e.Lk)("div",kt,[(0,e.bF)(q.A,{label:(0,e.R1)(l).fatal,active:p.value.fatal,onChange:u[3]||(u[3]=$=>b({...p.value,fatal:!p.value.fatal}))},null,8,["label","active"])])])]),u[18]||(u[18]=(0,e.eW)()),(0,e.Lk)("div",Ct,[(0,e.Lk)("div",Rt,(0,e.v_)((0,e.R1)(l).allowNotification),1),u[10]||(u[10]=(0,e.eW)()),(0,e.Lk)("div",ht,[(0,e.Lk)("div",Wt,(0,e.v_)((0,e.R1)(l).M0724),1),u[9]||(u[9]=(0,e.eW)()),(0,e.Lk)("div",Dt,[(0,e.Lk)("div",Ot,[(0,e.bF)(ne.A,{normal:"",width:167,items:(0,e.R1)(Ze),"selected-value":g.value,"no-scroll":"",onOnchange:A},null,8,["items","selected-value"]),u[8]||(u[8]=(0,e.eW)()),g.value===2?((0,e.uX)(),(0,e.Wv)(vt,{key:0})):(0,e.Q3)("v-if",!0)])])])]),u[19]||(u[19]=(0,e.eW)()),(0,e.Lk)("div",wt,[(0,e.Lk)("div",It,(0,e.v_)((0,e.R1)(l).offReservation),1),u[15]||(u[15]=(0,e.eW)()),(0,e.Lk)("div",Ft,[(0,e.Lk)("div",Mt,(0,e.v_)((0,e.R1)(l).M0723),1),u[11]||(u[11]=(0,e.eW)()),(0,e.bF)(de.A,{normal:"","hide-time":"",messages:(0,e.R1)(l),time:i.value.start,onChange:y},null,8,["messages","time"]),u[12]||(u[12]=(0,e.eW)()),(0,e.bF)(te,{hour:i.value.start.hour(),onChange:j},null,8,["hour"]),u[13]||(u[13]=(0,e.eW)(`
                ~
                `)),(0,e.bF)(de.A,{normal:"","hide-time":"",messages:(0,e.R1)(l),time:i.value.end,onChange:B},null,8,["messages","time"]),u[14]||(u[14]=(0,e.eW)()),(0,e.bF)(te,{hour:i.value.end.hour(),onChange:_},null,8,["hour"])])]),u[20]||(u[20]=(0,e.eW)()),(0,e.Lk)("div",xt,[(0,e.Lk)("div",Bt,(0,e.v_)((0,e.R1)(l).adapterSetting),1),u[16]||(u[16]=(0,e.eW)()),(0,e.Lk)("div",Pt,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(S.value,$=>((0,e.uX)(),(0,e.Wv)(ut,{setting:$,onSelect:w,onActive:O},null,8,["setting"]))),256))])])]))}}),Gt=(0,K.A)(Nt,[["__scopeId","data-v-26927b6a"]]);var jt=o(57222),ae=o(11649),pe=o(73310),Xt=o(95447),Ut=o(15114),Kt=o(3515);const Ht={class:"domain-setting"},Vt={class:"subject"},Yt=(0,e.pM)({__name:"DomainSetting",props:{description:{default:""},checkedDomainIds:{},checkedDomainNames:{},distTop:{default:0}},emits:["update:domainNames","update:domainIds","change","delete","select"],setup(s,{emit:t}){const l=s,d=t,n=(0,e.WQ)("i18n",{}),{state:r}=(0,Q.P)("domain"),p=(0,e.EW)(()=>r.domainList.sort((_,b)=>{const w=(0,U.Kt)(_.treeIndex),O=(0,U.Kt)(b.treeIndex);return w<O?-1:w>O?1:0})),i=(0,e.KR)([{resourceType:"domain",tree:[]}]),S=(0,e.KR)(l.checkedDomainIds.map((_,b)=>({main:l.checkedDomainNames[b]??`SID(${_})`,sub:_,disabled:!1})));let g=[],A=!1;const y=_=>{g=_.tree.filter(w=>w.resourceType==="domain"&&w.check==="on"&&w.data.sid!==-1),A&&B(),A=!0},j=_=>{g=g.filter(b=>b.data.data.title!==_.main&&b.data.data.sid!==_.sub),B(),d("delete",_)},B=()=>{const _=g.map(w=>w.data.data.title),b=g.map(w=>w.data.data.sid);S.value=g.map((w,O)=>({main:_[O],sub:b[O],disabled:!1})),d("update:domainNames",_),d("update:domainIds",b),d("change",{names:_,oids:b})};return(0,e.sV)(()=>{i.value=[{resourceType:"domain",tree:(0,Xt.XP)(p.value.map(_=>({..._,existData:!0})),"domain").map(_=>({..._,fold:"no-fold",noFoldPadding:!0,check:l.checkedDomainIds.includes(_.data.data.sid)?"on":"off",resourceType:_.data.resourceType,label:_.data.label}))}]}),(_,b)=>((0,e.uX)(),(0,e.CE)("div",Ht,[(0,e.Lk)("div",Vt,(0,e.v_)(l.description),1),b[0]||(b[0]=(0,e.eW)()),(0,e.bF)(Ut.A,{"popup-position-left":"","use-button-icon":!1,resources:i.value,"dist-top":l.distTop,onSubmit:y},null,8,["resources","dist-top"]),b[1]||(b[1]=(0,e.eW)()),(0,e.bF)(Kt.A,{subject:(0,e.R1)(n).domain,"memo-items":S.value,onDelete:j},null,8,["subject","memo-items"])]))}}),Qt=(0,K.A)(Yt,[["__scopeId","data-v-cd01b6b6"]]),zt={class:"app detail"},Jt={class:"row"},Zt={class:"left"},qt={class:"right"},$t={class:"toggle-switch-wrapper"},es={key:0,class:"row"},ts={class:"left"},ss={class:"right"},ns={class:"form"},os={class:"subject"},as={class:"input"},ls={class:"form"},is={class:"subject"},us={class:"input"},rs={class:"form"},_s={class:"subject"},ds={class:"input"},ps={class:"form"},ms={class:"subject"},vs={class:"input"},cs={class:"form"},gs={class:"subject"},As={class:"input"},ys={class:"form"},Ts={class:"subject"},Ls={class:"input"},fs={class:"radio"},Ss={class:"radio"},bs=["value"],Es=["value"],ks=["value"],Cs={style:{display:"none"},name:"sampleData"},Rs={style:{display:"none"},name:"contentsTemplate"},hs={style:{display:"none"},name:"defaultContentsTemplate"},Ws={class:"row"},Ds={class:"left"},Os={class:"right full"},ws={class:"footer"},Is=(0,e.pM)({__name:"DetailForm",setup(s){const t=(0,e.WQ)("i18n",{}),{state:l,commit:d,dispatch:n}=(0,Q.P)("externalNotification"),r=(0,e.EW)(()=>l.adapterSetting),p=(0,e.EW)(()=>l.adapterSetting.smtpSetting===void 0?{senderName:"",contentsType:"plaintext",receivers:[],contentsFormat:"",accessibleDomainIds:[],type:2,isActive:!1,subjectFormat:"",defaultTextContentsFormat:"",defaultHtmlContentsFormat:"",sampleSubject:"",sampleData:{}}:l.adapterSetting.smtpSetting),i=(0,e.KR)(ue(r.value,p.value)),S=(0,e.KR)(),g=O=>{i.value.receivers=O.split(";").map(a=>a.trim()).filter(a=>a!=="")},A=O=>{i.value.subjectFormat=O.target.value},y=O=>{O!==i.value.contentsType&&(i.value.contentsType=O,i.value.contentsFormat=O==="plaintext"?p.value.defaultTextContentsFormat:p.value.defaultHtmlContentsFormat)},j=({oids:O})=>{i.value.domains=O},B=()=>{S.value!==void 0&&(window.open("","eventMailTemplateForm","width=1100,height=800,location='no',history='no',resizable='no',status='no',scrollbars='no',toolbar='no',menubar='no'"),S.value.action="/popup/eventMailTemplate",S.value.method="post",S.value.target="eventMailTemplateForm",S.value.submit())},_=()=>{n(f.SAVE_ADAPTER_AND_SMTP_SETTING,i.value)},b=()=>{d(E.CHANGE_SCREEN_MODE,"list")},w=O=>{const{data:a}=O;a.type==="email-mail-template"&&(i.value.contentsFormat=a.code)};return(0,jt.v)(()=>{b()}),(0,e.KC)(()=>{window.addEventListener("message",w)}),(0,e.xo)(()=>{window.removeEventListener("message",w)}),(O,a)=>((0,e.uX)(),(0,e.CE)("div",zt,[(0,e.Lk)("div",Jt,[(0,e.Lk)("div",Zt,(0,e.v_)((0,e.R1)(t).externalTitle),1),a[5]||(a[5]=(0,e.eW)()),(0,e.Lk)("div",qt,[(0,e.Lk)("div",$t,[(0,e.bF)(ee.A,{normal:"",active:i.value.isActive,"onUpdate:active":a[0]||(a[0]=u=>i.value.isActive=u)},null,8,["active"])])])]),a[27]||(a[27]=(0,e.eW)()),r.value.iconType==="mail"?((0,e.uX)(),(0,e.CE)("div",es,[(0,e.Lk)("div",ts,(0,e.v_)((0,e.R1)(t).email),1),a[23]||(a[23]=(0,e.eW)()),(0,e.Lk)("div",ss,[(0,e.Lk)("div",ns,[(0,e.Lk)("div",os,(0,e.v_)((0,e.R1)(t).sender),1),a[6]||(a[6]=(0,e.eW)()),(0,e.Lk)("div",as,[(0,e.bF)(ae.A,{normal:"",disabled:"",value:r.value.name,"onUpdate:value":a[1]||(a[1]=u=>r.value.name=u)},null,8,["value"])])]),a[13]||(a[13]=(0,e.eW)()),(0,e.Lk)("div",ls,[(0,e.Lk)("div",is,(0,e.v_)((0,e.R1)(t).senderName),1),a[7]||(a[7]=(0,e.eW)()),(0,e.Lk)("div",us,[(0,e.bF)(ae.A,{normal:"",value:i.value.senderName,"onUpdate:value":a[2]||(a[2]=u=>i.value.senderName=u)},null,8,["value"])])]),a[14]||(a[14]=(0,e.eW)()),(0,e.Lk)("div",rs,[(0,e.Lk)("div",_s,(0,e.v_)((0,e.R1)(t).receiver),1),a[8]||(a[8]=(0,e.eW)()),(0,e.Lk)("div",ds,[(0,e.bF)(ae.A,{normal:"",value:i.value.receivers.join(";"),onInput:g},null,8,["value"])])]),a[15]||(a[15]=(0,e.eW)()),(0,e.Lk)("div",ps,[(0,e.Lk)("div",ms,(0,e.v_)((0,e.R1)(t).mailSubjectFormat),1),a[9]||(a[9]=(0,e.eW)()),(0,e.Lk)("div",vs,[(0,e.Lk)("textarea",{onInput:A},(0,e.v_)(p.value.subjectFormat),33)])]),a[16]||(a[16]=(0,e.eW)()),(0,e.Lk)("div",cs,[(0,e.Lk)("div",gs,(0,e.v_)((0,e.R1)(t).mailContentsFormat),1),a[10]||(a[10]=(0,e.eW)()),(0,e.Lk)("div",As,[(0,e.bF)(Z.A,{normal:"",items:[{text:(0,e.R1)(t).modify}],onClick:B},null,8,["items"])])]),a[17]||(a[17]=(0,e.eW)()),(0,e.Lk)("div",ys,[(0,e.Lk)("div",Ts,(0,e.v_)((0,e.R1)(t).documentType),1),a[12]||(a[12]=(0,e.eW)()),(0,e.Lk)("div",Ls,[(0,e.Lk)("div",fs,[(0,e.bF)(pe.A,{normal:"",label:(0,e.R1)(t).html,active:i.value.contentsType==="html",onChange:a[3]||(a[3]=u=>y("html"))},null,8,["label","active"])]),a[11]||(a[11]=(0,e.eW)()),(0,e.Lk)("div",Ss,[(0,e.bF)(pe.A,{normal:"",label:(0,e.R1)(t).plainText,active:i.value.contentsType==="plaintext",onChange:a[4]||(a[4]=u=>y("plaintext"))},null,8,["label","active"])])])])]),a[24]||(a[24]=(0,e.eW)()),(0,e.Lk)("form",{ref_key:"popupForm",ref:S},[(0,e.Lk)("input",{type:"hidden",name:"smtpKey",value:r.value.key},null,8,bs),a[18]||(a[18]=(0,e.eW)()),(0,e.Lk)("input",{type:"hidden",name:"sampleSubject",value:p.value.sampleSubject},null,8,Es),a[19]||(a[19]=(0,e.eW)()),(0,e.Lk)("input",{type:"hidden",name:"contentsType",value:i.value.contentsType},null,8,ks),a[20]||(a[20]=(0,e.eW)()),(0,e.Lk)("textarea",Cs,(0,e.v_)(p.value.sampleData),1),a[21]||(a[21]=(0,e.eW)()),(0,e.Lk)("textarea",Rs,(0,e.v_)(i.value.contentsFormat),1),a[22]||(a[22]=(0,e.eW)()),(0,e.Lk)("textarea",hs,(0,e.v_)(i.value.contentsType==="html"?p.value.defaultHtmlContentsFormat:p.value.defaultTextContentsFormat),1)],512)])):(0,e.Q3)("v-if",!0),a[28]||(a[28]=(0,e.eW)()),(0,e.Lk)("div",Ws,[(0,e.Lk)("div",Ds,(0,e.v_)((0,e.R1)(t).targetConfig),1),a[25]||(a[25]=(0,e.eW)()),(0,e.Lk)("div",Os,[(0,e.bF)(Qt,{"checked-domain-ids":r.value.targets.map(u=>u.domainId),"checked-domain-names":r.value.targets.map(u=>u.domainName),"dist-top":r.value.iconType==="mail"?-260:0,onChange:j},null,8,["checked-domain-ids","checked-domain-names","dist-top"])])]),a[29]||(a[29]=(0,e.eW)()),(0,e.Lk)("div",ws,[(0,e.bF)(Z.A,{normal:"",items:[{text:(0,e.R1)(t).cancel}],onClick:b},null,8,["items"]),a[26]||(a[26]=(0,e.eW)()),(0,e.bF)(Z.A,{class:"primary",normal:"",items:[{text:(0,e.R1)(t).saveChanges}],onClick:_},null,8,["items"])])]))}}),Fs=(0,K.A)(Is,[["__scopeId","data-v-85d13794"]]),Ms={class:"back-button"},xs={class:"left"},Bs={class:"subject icon-group"},Ps={class:"right"},Ns={class:"name"},Gs=(0,e.pM)({__name:"BackButton",setup(s){const{state:t,commit:l}=(0,Q.P)("externalNotification"),d=(0,e.WQ)("i18n",{}),n=(0,e.EW)(()=>t.adapterSetting),r=()=>{l(E.CHANGE_SCREEN_MODE,"list")};return(p,i)=>((0,e.uX)(),(0,e.CE)("div",Ms,[(0,e.Lk)("div",xs,[(0,e.bF)(Z.A,{normal:"",class:"border-none",items:[{iconType:(0,e.R1)(oe.B2).arrowBack}],"tooltip-options":{message:(0,e.R1)(d).goBack},onClick:r},null,8,["items","tooltip-options"]),i[0]||(i[0]=(0,e.eW)()),(0,e.Lk)("div",Bs,[(0,e.Lk)("div",{class:(0,e.C4)(["icon",n.value.iconType])},null,2)])]),i[1]||(i[1]=(0,e.eW)()),(0,e.Lk)("div",Ps,[(0,e.Lk)("div",Ns,(0,e.v_)(n.value.name),1)])]))}}),js=(0,K.A)(Gs,[["__scopeId","data-v-5e26b551"]]),Xs={class:"root-app"},Us={key:0,class:"title"},Ks={key:1,class:"title"},Hs={key:2,class:"tabs"},Vs=(0,e.pM)({__name:"App",setup(s){const t=[{key:"internal",value:F.A.internalTitle},{key:"external",value:F.A.externalTitle}],l=(0,e.KR)(t[0].key),d=p=>{l.value=p},{state:n}=(0,Q.P)("externalNotification"),r=(0,e.EW)(()=>n.screenMode);return(0,e.Gt)("i18n",F.A),(p,i)=>((0,e.uX)(),(0,e.CE)("div",Xs,[r.value==="list"?((0,e.uX)(),(0,e.CE)("div",Us,(0,e.v_)((0,e.R1)(F.A).title),1)):((0,e.uX)(),(0,e.CE)("div",Ks,[(0,e.bF)(js)])),i[0]||(i[0]=(0,e.eW)()),r.value==="list"?((0,e.uX)(),(0,e.CE)("div",Hs,[(0,e.bF)(k.A,{tabs:t,"active-tab":l.value,onChange:d},null,8,["active-tab"])])):(0,e.Q3)("v-if",!0),i[1]||(i[1]=(0,e.eW)()),l.value==="internal"?((0,e.uX)(),(0,e.Wv)(Je,{key:3})):((0,e.uX)(),(0,e.CE)(e.FK,{key:4},[r.value==="list"?((0,e.uX)(),(0,e.Wv)(Gt,{key:0})):((0,e.uX)(),(0,e.Wv)(Fs,{key:1}))],64))]))}}),Ys=(0,K.A)(Vs,[["__scopeId","data-v-781bffb8"]])},54189:(M,v,o)=>{o.d(v,{A:()=>e.A});var e=o(10401)},57222:(M,v,o)=>{o.d(v,{v:()=>k});var e=o(47577);function k(D){const L=()=>{history.pushState(null,document.title,location.href)},h=()=>{L(),D()};(0,e.KC)(()=>{L(),window.addEventListener("popstate",h)}),(0,e.xo)(()=>{window.removeEventListener("popstate",h)})}},64173:(M,v,o)=>{o.d(v,{A:()=>e.A});var e=o(18697)},73310:(M,v,o)=>{o.d(v,{A:()=>h});var e=o(98884),k=o(54189),D=o(35339);const h=(0,D.A)(k.A,[["render",e.X],["__scopeId","data-v-d3897ec0"]])},78496:(M,v,o)=>{o.d(v,{A:()=>T});var e=o(47577);const k={class:"main"};function D(m,R,W,P,V,Y){const N=(0,e.g2)("svg-icon"),X=(0,e.g2)("tooltip");return(0,e.uX)(),(0,e.Wv)(X,{position:"top-center",message:`${m.memoText.main}`},{default:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,e.C4)(["memo",m.memoType,m.memoText.disabled?"disabled":"",m.memoText.active?"active":""]),onClick:R[1]||(R[1]=(...G)=>m.onClickMemo&&m.onClickMemo(...G))},[(0,e.Lk)("span",k,(0,e.v_)(m.memoText.main),1),R[4]||(R[4]=(0,e.eW)()),m.useSubText?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[R[2]||(R[2]=(0,e.Lk)("span",{class:"blank"},":",-1)),R[3]||(R[3]=(0,e.eW)()),(0,e.Lk)("strong",null,(0,e.v_)(m.memoText.sub),1)],64)):(0,e.Q3)("v-if",!0),R[5]||(R[5]=(0,e.eW)()),m.useDeleteBtn&&!m.memoText.disabled?((0,e.uX)(),(0,e.CE)("div",{key:1,class:"icon",onClick:R[0]||(R[0]=(0,e.D$)((...G)=>m.onClickDeleteBtn&&m.onClickDeleteBtn(...G),["prevent","stop"]))},[(0,e.bF)(N,{icon:m.iconType,width:m.iconSize,height:m.iconSize},null,8,["icon","width","height"])])):(0,e.Q3)("v-if",!0)],2)]),_:1},8,["message"])}var L=o(79526),h=o(8355);const C=(0,e.pM)({components:{SvgIcon:L.Ah,Tooltip:h.A},props:{memoType:{type:String,required:!0},memoText:{type:Object,required:!0},useSubText:{type:Boolean,required:!1,default:!1},useDeleteBtn:{type:Boolean,required:!1,default:!1},iconSize:{type:Number,required:!1,default:16}},emits:["delete","select"],setup(m,{emit:R}){const W=()=>{R("select",m.memoText)},P=()=>{R("delete",m.memoText)};return{iconType:L.B2.close,onClickMemo:W,onClickDeleteBtn:P,...(0,e.QW)(m)}}});var c=o(35339);const T=(0,c.A)(C,[["render",D],["__scopeId","data-v-072375bf"]])},79960:(M,v,o)=>{o.d(v,{X:()=>D});var e=o(47577);const k={class:"aries-radio-label",for:"aries-radio-input"};function D(L,h,C,c,I,T){return(0,e.uX)(),(0,e.CE)("div",{class:(0,e.C4)(["aries-radio-wrapper",T.size,L.disabledClass]),style:(0,e.Tr)(L.cssValues),onClick:h[0]||(h[0]=(...m)=>L.change&&L.change(...m))},[(0,e.Lk)("span",{class:(0,e.C4)(["aries-radio",L.activeClass]),id:"aries-radio-input"},null,2),h[1]||(h[1]=(0,e.eW)()),(0,e.Lk)("label",k,(0,e.v_)(L.label),1)],6)}},84982:(M,v,o)=>{o.d(v,{G1:()=>D,HG:()=>h,ql:()=>L});var e=o(21005),k=o(6373);const D=async()=>await e.A.get("/menu/accessbleList/all",{params:{format:"json"}}),L=async()=>await e.A.get("/user/find"),h=(C,c,I,T)=>e.A.all([e.A.post("/user/modify/screen",(0,k.$W)({startPage:C,targetCount:c})),e.A.get(`/language/${I}`),e.A.get(`/user/theme/${T}`)])},87310:(M,v,o)=>{o.d(v,{A:()=>L});var e=o(6373),k=o(44399);const L={title:e.Ru.get("ui.label.event"),internalTitle:e.Ru.get("ui.label.alarm"),externalTitle:e.Ru.get("ui.label.eventExternal"),systemTitle:e.Ru.get("ui.label.product.admin.notify"),saveChanges:e.Ru.get("ui.label.saveChanges"),pushAlarm:e.Ru.get("ui.label.alarmSystemPush"),pushAlarmSound:e.Ru.get("ui.label.pushAlarmSound"),alarmSound:e.Ru.get("ui.label.notificationSound"),alarmEventStatus:e.Ru.get("ui.label.alarmEventStatus"),alarmEventSetting:e.Ru.get("ui.label.alarmEventSetting"),alarmSaveStatus:e.Ru.get("ui.label.alarmSaveStatus"),alarmMaxAge:e.Ru.get("ui.label.alarmMaxAge"),alarmMaxCount:e.Ru.get("ui.label.alarmMaxCount"),normal:e.Ru.get("ui.label.normal"),warning:e.Ru.get("ui.label.warning"),fatal:e.Ru.get("ui.label.fatal"),sec:e.Ru.get("ui.label.unit.sec"),soundLoop:e.Ru.get("ui.label.soundLoop"),listening:e.Ru.get("ui.label.listening"),registerCustomSound:e.Ru.get("ui.label.registerCustomSound"),fileName:e.Ru.get("ui.label.fileName"),size:e.Ru.get("ui.label.size"),delete:e.Ru.get("ui.button.delete"),save:e.Ru.get("ui.button.save"),fileUpload:e.Ru.get("ui.label.fileUpload"),kb:e.Ru.get("ui.label.unit.kb"),eventLevel:e.Ru.get("ui.label.eventLevel"),repeatOff:e.Ru.get("ui.label.repeatOff"),offReservation:e.Ru.get("ui.label.offReservation"),everyday:e.Ru.get("ui.label.time.daily"),weekday:e.Ru.get("ui.label.time.weekday"),custom:e.Ru.get("ui.label.time.user"),allowNotification:e.Ru.get("ui.label.allowNotification"),object:e.Ru.get("ui.label.object"),domain:e.Ru.get("ui.label.domain"),goBack:e.Ru.get("ui.label.goBack"),email:e.Ru.get("ui.label.email"),targetConfig:e.Ru.get("ui.label.targetConfig"),submit:e.Ru.get("ui.button.add"),sender:e.Ru.get("ui.label.sender"),senderName:e.Ru.get("ui.label.senderName"),receiver:e.Ru.get("ui.label.receiver"),modify:e.Ru.get("ui.button.modify"),mailSubjectFormat:e.Ru.get("ui.label.mailSubjectFormat"),mailContentsFormat:e.Ru.get("ui.label.mailContentsFormat"),html:e.Ru.get("ui.label.html"),plainText:e.Ru.get("ui.label.plainText"),documentType:e.Ru.get("ui.label.documentType"),adapterSetting:e.Ru.get("ui.group.adapter"),setting:e.Ru.get("ui.label.setting"),emailNotification:e.Ru.get("ui.label.notify.email"),senderMail:e.Ru.get("ui.label.senderMail"),smtp:e.Ru.get("ui.en.smtp"),smtpConfirmMessage:e.Ru.get("text.0002"),weekdays:[e.Ru.get("ui.label.time.sunday"),e.Ru.get("ui.label.time.monday"),e.Ru.get("ui.label.time.tuesday"),e.Ru.get("ui.label.time.wednesday"),e.Ru.get("ui.label.time.thursday"),e.Ru.get("ui.label.time.friday"),e.Ru.get("ui.label.time.saturday")],systemEventColumnNames:[e.Ru.get("ui.label.type"),e.Ru.get("ui.label.notify.screen"),e.Ru.get("ui.label.notify.email"),e.Ru.get("ui.label.notify.adapter")],M0723:e.Ru.get("M0723"),M0724:e.Ru.get("M0724"),M0079:e.Ru.get("M0079"),M0482:e.Ru.get("M0482"),...k.Ay}},98884:(M,v,o)=>{o.d(v,{X:()=>e.X});var e=o(79960)}}]);
