"use strict";(self.webpackChunkjennifer5_frontend=self.webpackChunkjennifer5_frontend||[]).push([[69377],{30771:(c,d,i)=>{i.d(d,{A:()=>v});var e=i(11649),p=i(44707),_=i(79526);const v={name:"PasswordInput",components:{InputField:e.A,SvgIcon:_.Ah},mixins:[p.A],emits:["update:value","keyup:enter","blur","focus","input","change"],props:{value:{type:String,default:""},name:{type:String,default:null},placeholder:{type:String,default:null},autocomplete:{type:String,default:"on"},invalid:{type:Boolean,default:void 0},validator:{type:Function,default:null}},data(){return{showPassword:!1}},computed:{iconType(){return this.showPassword?this.icons.visibilityOff:this.icons.visibility},displayType(){return this.showPassword?"text":"password"}},methods:{toggleDisplayType(){this.showPassword=!this.showPassword},onBlur(){this.focused=!1,this.$emit("blur")},onInput(u){this.$emit("input",u),this.$emit("update:value",u)}},created(){this.icons={visibility:_.B2.visibility,visibilityOff:_.B2.visibilityOff}}}},31975:(c,d,i)=>{i.d(d,{A:()=>e.A});var e=i(30771)},69377:(c,d,i)=>{i.r(d),i.d(d,{default:()=>Ke});var e=i(47577);const p={class:"app"},_={class:"title"},v={class:"row"},u={class:"left"},F={class:"right"},b={class:"form"},m={class:"subject"},w={class:"input"},C={class:"form"},f={class:"subject"},E={class:"input"},R={class:"form"},U={class:"subject"},I={class:"input"},S={class:"form-group"},D={class:"form"},j={class:"subject"},B={class:"input"},K={class:"form"},O={class:"subject"},x={class:"input"},Q={class:"form"},X={class:"subject"},N={class:"input"},H={class:"form"},V={class:"subject"},G={class:"input"},z={class:"row"},J={class:"left"},Y={class:"right"},Z={class:"form"},q={class:"subject"},$={class:"input"},ee={class:"form"},se={class:"subject"},te={class:"input"},oe={class:"form"},ie={class:"subject"},le={class:"input"},ne={key:0,class:"form"},re=["innerHTML"],ae={class:"row"},de={class:"left"},ue={class:"right tfa"},_e={class:"form"},ve=["innerHTML"],pe={key:0,class:"form"},me={class:"text"},ge={class:"text"},fe={class:"text"},ce={class:"input"},Me={key:1,class:"form"},we={class:"text"},ye={class:"footer"};function Fe(l,s,a,L,t,r){const g=(0,e.g2)("input-field"),h=(0,e.g2)("password-input"),Oe=(0,e.g2)("toggle-switch"),T=(0,e.g2)("qr-code"),A=(0,e.g2)("btn"),xe=(0,e.g2)("alert-window");return(0,e.uX)(),(0,e.CE)("div",p,[(0,e.Lk)("div",_,(0,e.v_)(t.i18nMessages.title),1),s[42]||(s[42]=(0,e.eW)()),(0,e.Lk)("div",v,[(0,e.Lk)("div",u,(0,e.v_)(t.i18nMessages.editProfile),1),s[25]||(s[25]=(0,e.eW)()),(0,e.Lk)("div",F,[(0,e.Lk)("div",b,[(0,e.Lk)("div",m,(0,e.v_)(t.i18nMessages.userId),1),s[12]||(s[12]=(0,e.eW)()),(0,e.Lk)("div",w,[(0,e.bF)(g,{normal:"",disabled:"",value:t.userForm.id,"onUpdate:value":s[0]||(s[0]=n=>t.userForm.id=n)},null,8,["value"])])]),s[20]||(s[20]=(0,e.eW)()),(0,e.Lk)("div",C,[(0,e.Lk)("div",f,(0,e.v_)(t.i18nMessages.userName),1),s[13]||(s[13]=(0,e.eW)()),(0,e.Lk)("div",E,[(0,e.bF)(g,{normal:"",disabled:t.userForm.adapterMode,validator:r.validatorUserName,value:t.userForm.name,"onUpdate:value":s[1]||(s[1]=n=>t.userForm.name=n)},null,8,["disabled","validator","value"])])]),s[21]||(s[21]=(0,e.eW)()),(0,e.Lk)("div",R,[(0,e.Lk)("div",U,(0,e.v_)(t.i18nMessages.company),1),s[14]||(s[14]=(0,e.eW)()),(0,e.Lk)("div",I,[(0,e.bF)(g,{normal:"",disabled:t.userForm.adapterMode,value:t.userForm.company,"onUpdate:value":s[2]||(s[2]=n=>t.userForm.company=n)},null,8,["disabled","value"])])]),s[22]||(s[22]=(0,e.eW)()),(0,e.Lk)("div",S,[(0,e.Lk)("div",D,[(0,e.Lk)("div",j,(0,e.v_)(t.i18nMessages.dept),1),s[15]||(s[15]=(0,e.eW)()),(0,e.Lk)("div",B,[(0,e.bF)(g,{normal:"",disabled:t.userForm.adapterMode,value:t.userForm.dept,"onUpdate:value":s[3]||(s[3]=n=>t.userForm.dept=n)},null,8,["disabled","value"])])]),s[17]||(s[17]=(0,e.eW)()),(0,e.Lk)("div",K,[(0,e.Lk)("div",O,(0,e.v_)(t.i18nMessages.jobTitle),1),s[16]||(s[16]=(0,e.eW)()),(0,e.Lk)("div",x,[(0,e.bF)(g,{normal:"",disabled:t.userForm.adapterMode,value:t.userForm.jobTitle,"onUpdate:value":s[4]||(s[4]=n=>t.userForm.jobTitle=n)},null,8,["disabled","value"])])])]),s[23]||(s[23]=(0,e.eW)()),(0,e.Lk)("div",Q,[(0,e.Lk)("div",X,(0,e.v_)(t.i18nMessages.cellphone),1),s[18]||(s[18]=(0,e.eW)()),(0,e.Lk)("div",N,[(0,e.bF)(g,{normal:"",disabled:t.userForm.adapterMode,validator:r.validatorCellphone,value:t.userForm.cellphone,"onUpdate:value":s[5]||(s[5]=n=>t.userForm.cellphone=n)},null,8,["disabled","validator","value"])])]),s[24]||(s[24]=(0,e.eW)()),(0,e.Lk)("div",H,[(0,e.Lk)("div",V,(0,e.v_)(t.i18nMessages.email),1),s[19]||(s[19]=(0,e.eW)()),(0,e.Lk)("div",G,[(0,e.bF)(g,{normal:"",disabled:t.userForm.adapterMode,validator:r.validatorEmail,value:t.userForm.email,"onUpdate:value":s[6]||(s[6]=n=>t.userForm.email=n)},null,8,["disabled","validator","value"])])])])]),s[43]||(s[43]=(0,e.eW)()),(0,e.Lk)("div",z,[(0,e.Lk)("div",J,(0,e.v_)(t.i18nMessages.password),1),s[32]||(s[32]=(0,e.eW)()),(0,e.Lk)("div",Y,[(0,e.Lk)("div",Z,[(0,e.Lk)("div",q,(0,e.v_)(t.i18nMessages.currentPassword),1),s[26]||(s[26]=(0,e.eW)()),(0,e.Lk)("div",$,[(0,e.bF)(h,{normal:"",disabled:t.userForm.adapterMode,value:t.userForm.password,"onUpdate:value":s[7]||(s[7]=n=>t.userForm.password=n),autocomplete:"new-password"},null,8,["disabled","value"])])]),s[29]||(s[29]=(0,e.eW)()),(0,e.Lk)("div",ee,[(0,e.Lk)("div",se,(0,e.v_)(t.i18nMessages.newPassword),1),s[27]||(s[27]=(0,e.eW)()),(0,e.Lk)("div",te,[(0,e.bF)(h,{normal:"",disabled:t.userForm.adapterMode,value:t.userForm.newPassword,"onUpdate:value":s[8]||(s[8]=n=>t.userForm.newPassword=n)},null,8,["disabled","value"])])]),s[30]||(s[30]=(0,e.eW)()),(0,e.Lk)("div",oe,[(0,e.Lk)("div",ie,(0,e.v_)(t.i18nMessages.confirmNewPassword),1),s[28]||(s[28]=(0,e.eW)()),(0,e.Lk)("div",le,[(0,e.bF)(h,{normal:"",disabled:t.userForm.adapterMode,value:t.userForm.confirmNewPassword,"onUpdate:value":s[9]||(s[9]=n=>t.userForm.confirmNewPassword=n)},null,8,["disabled","value"])])]),s[31]||(s[31]=(0,e.eW)()),r.passwordChangeDate!==""?((0,e.uX)(),(0,e.CE)("div",ne,[(0,e.Lk)("div",{class:"message",innerHTML:r.passwordChangeDate},null,8,re)])):(0,e.Q3)("v-if",!0)])]),s[44]||(s[44]=(0,e.eW)()),(0,e.Lk)("div",ae,[(0,e.Lk)("div",de,(0,e.v_)(t.i18nMessages.tfa),1),s[41]||(s[41]=(0,e.eW)()),(0,e.Lk)("div",ue,[(0,e.Lk)("div",_e,[(0,e.bF)(Oe,{active:r.activeTfa,onChange:r.onChangeTfaSetting},null,8,["active","onChange"]),s[33]||(s[33]=(0,e.eW)()),(0,e.Lk)("div",{class:"message",innerHTML:t.i18nMessages.M0748},null,8,ve)]),s[40]||(s[40]=(0,e.eW)()),r.activeTfa?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[t.showTfaManual?((0,e.uX)(),(0,e.CE)("div",pe,[(0,e.Lk)("section",null,[(0,e.Lk)("div",me,"\u2776 "+(0,e.v_)(t.i18nMessages.M0751),1)]),s[37]||(s[37]=(0,e.eW)()),(0,e.Lk)("section",null,[(0,e.Lk)("div",ge,"\u2777 "+(0,e.v_)(t.i18nMessages.M0750),1),s[34]||(s[34]=(0,e.eW)()),(0,e.bF)(T,{"secret-key":t.userForm.tfaSecretKey,"qr-code-url":t.userForm.tfaQrCodeUrl},null,8,["secret-key","qr-code-url"])]),s[38]||(s[38]=(0,e.eW)()),(0,e.Lk)("section",null,[(0,e.Lk)("div",fe,"\u2778 "+(0,e.v_)(t.i18nMessages.M0752),1),s[36]||(s[36]=(0,e.eW)()),(0,e.Lk)("div",ce,[(0,e.bF)(g,{normal:"",class:(0,e.C4)(t.tfaClass),placeholder:t.i18nMessages.M0744,validator:t.tfaValidator,value:t.tfaCode,"onUpdate:value":s[10]||(s[10]=n=>t.tfaCode=n),"onKeyup:enter":r.onCheckTfaSetting,onBlur:r.onClearTfaSetting},null,8,["class","placeholder","validator","value","onKeyup:enter","onBlur"]),s[35]||(s[35]=(0,e.eW)()),(0,e.bF)(A,{normal:"",items:[{text:t.i18nMessages.confirm}],onClick:r.onCheckTfaSetting},null,8,["items","onClick"])])])])):((0,e.uX)(),(0,e.CE)("div",Me,[(0,e.Lk)("section",null,[(0,e.Lk)("div",we,(0,e.v_)(t.i18nMessages.M0750),1),s[39]||(s[39]=(0,e.eW)()),r.activeTfa?((0,e.uX)(),(0,e.Wv)(T,{key:0,"secret-key":t.userForm.tfaSecretKey,"qr-code-url":t.userForm.tfaQrCodeUrl},null,8,["secret-key","qr-code-url"])):(0,e.Q3)("v-if",!0)])]))],64)):(0,e.Q3)("v-if",!0)])]),s[45]||(s[45]=(0,e.eW)()),(0,e.Lk)("div",ye,[(0,e.bF)(A,{class:"primary",normal:"",disabled:!r.activeSaveBtn,loading:t.saveLoading,items:[{text:t.i18nMessages.saveChanges}],onClick:r.onClickSaveBtn},null,8,["disabled","loading","items","onClick"])]),s[46]||(s[46]=(0,e.eW)()),t.alertMessage!==""?((0,e.uX)(),(0,e.Wv)(xe,{key:0,message:t.alertMessage,onCancel:s[11]||(s[11]=()=>t.alertMessage="")},null,8,["message"])):(0,e.Q3)("v-if",!0)])}var be=i(35375),Ce=i(11649),Le=i(70140),he=i(90194),ke=i(80805);const Pe={class:"qr-code"},We=["src"],Te={key:1,class:"error"},Ae={class:"code"},Ee=(0,e.pM)({__name:"QrCode",props:{secretKey:{},qrCodeUrl:{}},setup(l){const s=l,a=(0,e.WQ)("i18n",{}),L=(0,e.KR)(!1);return(t,r)=>((0,e.uX)(),(0,e.CE)("div",Pe,[L.value?((0,e.uX)(),(0,e.CE)("div",Te,(0,e.v_)((0,e.R1)(a).M0749),1)):((0,e.uX)(),(0,e.CE)("img",{key:0,src:s.qrCodeUrl,onError:r[0]||(r[0]=()=>L.value=!0)},null,40,We)),r[1]||(r[1]=(0,e.eW)()),(0,e.Lk)("div",Ae,(0,e.v_)(s.secretKey),1)]))}});var k=i(35339);const Re=(0,k.A)(Ee,[["__scopeId","data-v-18aad39c"]]);var P=i(10991),o=i(6373),Ue=i(84982),y=i(21005);const Ie=async()=>await y.A.get("/user/password/policy/get"),Se=async(l,s,a)=>await y.A.post("/user/modify/password",(0,o.$W)({id:l,password:s,newPassword:a})),W=async l=>await y.A.post("/user/modify/self",(0,o.$W)({...l,password:""})),De=async()=>await y.A.get("/user/totp/create"),je=async(l,s)=>await y.A.get("/user/totp/valid",{params:{inputCode:l,secretKey:s}}),M={title:o.Ru.get("ui.label.myAccount"),saveChanges:o.Ru.get("ui.label.saveChanges"),editProfile:o.Ru.get("ui.label.editProfile"),changePassword:o.Ru.get("ui.label.changePassword"),tfa:o.Ru.get("ui.label.tfa"),M0104:o.Ru.get("M0104"),M0105:o.Ru.get("M0105"),M0111:o.Ru.get("M0111"),M0116:o.Ru.get("M0116"),M0117:o.Ru.get("M0117"),M0119:o.Ru.get("M0119"),M0328:o.Ru.get("M0328"),M0748:o.Ru.get("M0748"),M0749:o.Ru.get("M0749"),M0750:o.Ru.get("M0750"),M0751:o.Ru.get("M0751"),M0752:o.Ru.get("M0752"),M0744:o.Ru.get("M0744"),M0745:o.Ru.get("M0745"),requiredFields:o.Ru.get("ui.label.requiredFields"),userId:o.Ru.get("ui.label.userId"),userName:o.Ru.get("ui.label.userName"),password:o.Ru.get("ui.label.password"),currentPassword:o.Ru.get("ui.label.currentPassword"),newPassword:o.Ru.get("ui.label.newPassword"),confirmNewPassword:o.Ru.get("ui.label.confirmNewPassword"),optionalFields:o.Ru.get("ui.label.optionalFields"),company:o.Ru.get("ui.label.company"),dept:o.Ru.get("ui.label.dept"),jobTitle:o.Ru.get("ui.label.jobTitle"),cellphone:o.Ru.get("ui.label.cellphone"),email:o.Ru.get("ui.label.email"),confirm:o.Ru.get("ui.button.confirm")},Be={provide:{i18n:M},components:{Btn:be.A,InputField:Ce.A,PasswordInput:Le.A,AlertWindow:he.A,ToggleSwitch:ke.A,QrCode:Re},data(){return{userForm:{},saveLoading:!1,alertMessage:"",i18nMessages:M,showTfaManual:!1,tfaCode:"",tfaClass:"",tfaValidator:void 0,validTfaCode:!1}},computed:{activeTfa(){return this.userForm.tfaSecretKey!==null&&this.userForm.tfaSecretKey!==void 0&&this.userForm.tfaSecretKey!==""},activeSaveBtn(){return this.activeTfa&&this.showTfaManual?this.validTfaCode:this.validatorUserName(this.userForm.name)},passwordChangeDate(){if(!this.userForm.changePwdDt)return"";const l=(0,P.qm)(parseInt(this.userForm.changePwdDt));return o.Ru.get("word.lastPasswordChanged",l.format(P.fp.longWithSec))}},methods:{async onClickSaveBtn(){if(this.saveLoading=!0,this.userForm.password===""&&this.userForm.newPassword===""&&this.userForm.confirmNewPassword==="")await W(this.userForm),location.reload();else if(this.userForm.newPassword!==this.userForm.confirmNewPassword)this.alertMessage=M.M0105;else{const l=await Ie(),{data:s}=await Se(this.userForm.id,this.userForm.password,this.userForm.newPassword);if(s==="M0116")await W(this.userForm),location.reload();else if(s==="M0104"){let a=M.M0104;a=a.replace("%d",l.data.passwordLength),a=a.replace("%d",l.data.minLowercase),a=a.replace("%d",l.data.minUppercase),a=a.replace("%d",l.data.minDigit),a=a.replace("%d",l.data.minSpecial),a=a.replace("%d",l.data.minSameCount),this.alertMessage=a}else this.alertMessage=M[s]}this.saveLoading=!1},async createUserInfo(){const{data:l}=await(0,Ue.ql)();this.userForm={...l,newPassword:"",confirmNewPassword:""}},validatorUserName(l){return!(0,o.T_)(l)},validatorCellphone(l){return(0,o.lA)(l)},validatorEmail(l){return(0,o.bB)(l)},onClearTfaSetting(){this.tfaClass="",this.tfaValidator=()=>{}},async onChangeTfaSetting(l){if(l){const{data:s}=await De();this.userForm.tfaSecretKey=s.secretKey,this.userForm.tfaQrCodeUrl=s.qrCodeUrl,l&&(this.showTfaManual=!0)}else this.userForm.tfaSecretKey="",this.userForm.tfaQrCodeUrl=""},async onCheckTfaSetting(){const{data:l}=await je(this.tfaCode,this.userForm.tfaSecretKey);l?(this.tfaClass="valid",this.tfaValidator=()=>!0):(this.alertMessage=M.M0745,this.tfaClass="invalid",this.tfaValidator=()=>!1),this.validTfaCode=l}},async created(){await this.createUserInfo()}},Ke=(0,k.A)(Be,[["render",Fe],["__scopeId","data-v-5774b8f8"]])},70140:(c,d,i)=>{i.d(d,{A:()=>u});var e=i(96513),p=i(31975),_=i(35339);const u=(0,_.A)(p.A,[["render",e.X]])},84982:(c,d,i)=>{i.d(d,{G1:()=>_,HG:()=>u,ql:()=>v});var e=i(21005),p=i(6373);const _=async()=>await e.A.get("/menu/accessbleList/all",{params:{format:"json"}}),v=async()=>await e.A.get("/user/find"),u=(F,b,m,w)=>e.A.all([e.A.post("/user/modify/screen",(0,p.$W)({startPage:F,targetCount:b})),e.A.get(`/language/${m}`),e.A.get(`/user/theme/${w}`)])},87205:(c,d,i)=>{i.d(d,{X:()=>p});var e=i(47577);function p(_,v,u,F,b,m){const w=(0,e.g2)("svg-icon"),C=(0,e.g2)("input-field");return(0,e.uX)(),(0,e.Wv)(C,(0,e._B)({value:u.value,type:m.displayType,name:u.name,placeholder:u.placeholder,autocomplete:u.autocomplete,invalid:u.invalid,"onUpdate:value":v[0]||(v[0]=f=>_.$emit("update:value",f)),onInput:m.onInput,onBlur:m.onBlur,[_.size||""]:!0,"onKeyup:enter":v[1]||(v[1]=f=>_.$emit("keyup:enter"))}),{"icon-right":(0,e.k6)(({size:f})=>[(0,e.bF)(w,{icon:m.iconType,width:f,height:f,onClick:m.toggleDisplayType,style:{cursor:"pointer"}},null,8,["icon","width","height","onClick"])]),_:1},16,["value","type","name","placeholder","autocomplete","invalid","onInput","onBlur"])}},96513:(c,d,i)=>{i.d(d,{X:()=>e.X});var e=i(87205)}}]);
